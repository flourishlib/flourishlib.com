<!DOCTYPE html> 
<html> 
<head> 
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<link href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAABMLAAATCwAAAAAAAAAAAAAznGiANJtm/zWZZf83l2T/OJZj/zmUYv86k2H/O5Vi/zZwTv8pJSj/NF1F/z+TYP8/jFz/P4tc/0CLXP9AiluAMKBq/zKeaf8znGf/NZpm/zaYZf83l2T/OJVj/zmUYv87mmX/M2VJ/yopKf86glf/PpFf/z6NXf8/jFz/P4tc/y6jbP8voWv/MZ9q/zKdaP80m2f/NZpm/zaYZf83lmP/OJZj/zqXY/8tPDP/MlxE/z2VYv89jl7/PY5d/z6MXf8rpm//LaRt/y6jbP8woGv/MaFr/zOja/80n2n/NZpm/zaXZP84nWf/MWRJ/y9KO/87l2P/O5Bg/zyPX/89jl7/Kapy/yqocP8spm//Lahw/y6ZZ/8velb/MIle/zOgav80nmn/NqFp/zJ1Uv8tPTT/OZhk/zqTYf87kWD/PJBf/yavdP8orHP/Ka90/yuYZ/8qODL/Kh8k/yopKv8tU0D/MZBh/zOUY/8vXET/LUk7/zWHW/84mGT/OZRi/zqSYf8jsnf/JLF2/yavdf8pSTv/Kioq/ypCN/8qPDT/Kiws/yotLP8sUD//MIdc/zGEWv8xbk//N55o/zeWY/84lWL/ILd6/yG8ff8mflr/KyMm/yo1MP8qKyv/KiUn/yoeJP8rQTb/LqBr/zCob/8wk2P/LVlD/zSgaf81mWb/N5hk/x28fv8eunz/Jl1H/yhOPv8oWkX/KFNB/ylFOf8qTj7/KpRl/yyrcf8uqXD/LW9Q/yopKf8wgVn/M6Fq/zWaZv8ZwIH/G7t+/x61ev8fvX7/Ibx9/yK4ev8ksnf/JrN2/yivdf8prXP/K5hn/yotLP8qKSr/LEo7/zGgav8ynmn/FsWE/xfCgv8awYH/HL1+/x66fP8fuHv/IrZ5/yOzd/8lsHX/JrJ2/yiTZP8qKCn/KjIu/yo2MP8uk2T/MKRs/xLKh/8Ux4X/F8SE/xjBgf8avoD/HLx9/x65fP8gtnr/IrR4/yO1eP8mn2z/Ki0s/yo7M/8qMi7/LJVl/y2ob/8Pz4v/EcyJ/xPJh/8VxoX/F8OD/xnAgf8bvn//Hbt9/x+5e/8guXv/I6Zw/yo1MP8qLiz/Kkg7/ymscv8rqXD/CtSO/w3RjP8Qzor/EsuI/xTIhv8WxYX/GMOD/xm/gP8bvX//Hb5//yCncf8qMS7/KEs8/yWgbf8msnb/KKty/wfZk/8J1pD/C9OO/w3Qi/8QzYn/EsqI/xTHhv8WxIT/GMKC/xrAgP8ctnr/IJtq/yC3ev8huXv/I7J3/yWwdf8D35aABdyU/wfYkv8J1ZD/DNKO/w7PjP8QzIn/EsqH/xTHhv8Ww4P/GMKC/xrEg/8cvX7/Hrl8/yC3ev8itHiAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==" rel="shortcut icon" />
	<title>Flourish Offline Documentation (v0.9.0)</title>
	<link href='http://fonts.googleapis.com/css?family=Arimo:400,700' rel='stylesheet' type='text/css'>
	<style type="text/css">
		.group:after {
			content: ".";
			font-size: 0;
			display: block;
			height: 0;
			clear: both;
			visibility: hidden;
		}

		html {
			background-color: #FFF;
			margin: 0px;
			padding: 0px;	
		}

		body {
			background-color: #FFF;
			font-family: "Helvetica", Arial, Verdana, sans-serif;
			font-size: 15px;
			line-height: 1.5;
			color: #777;
			margin: 0;
		}

		a {
			text-decoration: none;
			color: #678DB7; 
		}
			a:visited { text-decoration: none; color: #5C89BC; }
			a:active  { text-decoration: none; color: #5C89BC; }
			a:hover   { text-decoration: none; color: #4772A3; }	
			
		a img {
			border: none;
		}

		header {
			background-color: #444;
			margin-bottom: 30px;
			padding: 15px 0 12px 0;
			border-bottom: 4px solid #999;

			background-image: -webkit-gradient(
				linear,
				left bottom,
				left top,
				color-stop(0.15, #444),
				color-stop(0.8, #505050)
			);
			background-image: -moz-linear-gradient(
				center bottom,
				#444 15%,
				#505050 80%
			);
		}

			header a {
				border: none;
			}
			header img {
				display: block;
				float: left;
				margin-right: 20px;
			}
			header span.tagline {
				color: #d3d3d3;
				float: left;
				margin-top: 12px;
				font-style: italic;
			}

		img {
			-ms-interpolation-mode: bicubic;
		}

		nav {
			float: right;
			margin-top: 12px;
		}
			nav a {
				display: inline-block;
			}
			nav a,
			nav a:visited {
				margin-right: 0;
				margin-left: 25px;
				color: #fff;
			}
			nav a:hover {
				color: #eee;
			}

		footer {
			margin-top: 30px;
			padding-top: 10px;
			padding-bottom: 10px;
			clear: both;
		}

		p {
			margin-bottom: 1em;
			margin-top: 0px;
		}	

		h1, h2, h3, h4, h5, h6 {
			font-family: 'Arimo', Helvetica, Arial, sans-serif;
			font-weight: normal;
			color: #666;
			font-style: normal;
		}

		h1 {
			font-size: 2.3em;
			margin-bottom: 0.5em;
			margin-top: 0;
			line-height: 1.2;
		}
			h1 em {
				font-style: normal;
				color: #777;
			}

		h2 {
			font-size: 1.7em;
			margin: 0.8em 0 0.4em;
			padding-top: 0;
		}
			h2 em {
				font-size: 0.8em;
			}

		h3 {
			font-size: 1.4em;
			margin: 0.5em 0 0.4em;
		}

		h4 {
			font-size: 1.2em;
			margin: 0.8em 0 0.1em;
		}

		h5 {
			font-size: 1.1em;
			margin: 0.8em 0 0.1em;
		}

		h6 {
			font-size: 1.1em;
			margin: 0.8em 0 0.1em;
		}

		tt, code {
			font-family: "Consolas", "Driod Sans Mono", monospace;
			font-size: 0.85em;
			background-color: #f3f3f3;
			padding: 1px 3px 2px 3px;
		}

		th {
			vertical-align: top;
		}

		dt {
			font-weight: bold;
		}

		ul {
			margin: 0px;
			padding: 0px;
			margin-bottom: 20px;
		}
			ul ul {
				margin-bottom: 5px;
			}

		ol {
			margin: 0 0 0 5px;
			padding: 0;
			margin-bottom: 20px;
		}

		li {
			margin: 0px 0px 0px 25px;
			padding: 0px;
		}	

		form {
			padding: 0px;
			margin: 0px;
		}
			
		input {
			font-family: "Trebuchet MS", Arial, Verdana, sans-serif;
			font-size: 1.0em;
		}

		textarea {
			font-family: "Trebuchet MS", Arial, Verdana, sans-serif;
			font-size: 1.0em;
		}

		label {
			font-weight: bold;
			display: block;
		}

		pre {
			margin: 0 0 1em 0;
			background-color: #f3f3f3;
			border: 1px solid #e3e3e3;
			padding: 3px 8px 3px 8px;
			overflow: auto;
		}

		pre.cm-s-default {
			font-family: "Consolas", "Driod Sans Mono", monospace;
			font-size: 0.85em;
		}



		section.main {
			width: 960px;
			margin: 0px auto 0px auto;
		}

		div.intro {
			font-size: 1.2em;
			line-height: 1.2;
			color: #777;
			text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.2);
			font-family: 'Arimo', Helvetica, Arial, sans-serif;
			padding-right: 380px;
		}
			div.intro em {
				font-style: normal;
			}

		div.sidebar {
			float: right;
			width: 250px;
			margin-left: 20px;
			margin-bottom: 20px;
			background-color: #f3f3f3;
			padding: 20px;
			border-radius: 6px;
			-moz-border-radius: 6px;
			-webkit-border-radius: 6px;
			border: 2px solid #eee;
		}

		h1 + div.sidebar {
			margin-top: -59px;
		}

		div.sidebar h2 {
			margin-top: 0;
			padding-top: 0;
		}

		ul.stackable {
			float: left;
			width: 33%;
		}

		div.class_docs {
			float: left;
			width: 33%;
		}
			div.class_docs ul a {
				font-size: 0.85em;
			}
			div.class_docs ul a {
				font-size: 1.0em;
				width: 185px;
				display: inline-block;
			}
				div.class_docs ul a[href$="-api"] {
					width: auto;
				}
				div.class_docs ul ul a {
					width: 175px;
				}
					div.class_docs ul ul a[href$="-api"] {
						width: auto;
					}
					div.class_docs ul ul ul a {
						width: 165px;
					}
						div.class_docs ul ul ul a[href$="-api"] {
						width: auto;
					}

			div.class_docs ul ul li {
				margin-left: 10px;
			}

			div.class_docs h3 {
				margin-top: 0;
				padding-top: 0;
			}

		/* API */
		div.changes th {
			padding-right: 10px;
		}
		div.changes span.date {
			padding-left: 10px;
			font-style: italic;
		}
		div.meta {
			margin-top: -1.2em;
			margin-bottom: 1em;
		}

		span.visibility,
		span.resolution {
			color: #ccc;
		}

		div.method,
		div.variable,
		div.constant {
			padding-left: 15px;
		}

		h3.method,
		h3.variable,
		h3.constant {
			margin-top: 0.9em;
			padding-top: 10px;
			border-top: 1px solid #eee;
		}

		h2 + h3.method,
		h2 + h3.variable,
		h2 + h3.constant {
			margin-top: 0.5em;
		}

		h3.api {
			clear: both;
		}

		td.param_data_type,
		td.param_name {
			padding-right: 10px;
		}

		#GeneralDocumentation {
			clear: left;
		}

		div.clear {
			clear: left;
		}
	</style> 
	<script>
/*! jQuery v1.7.2 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cu(a){if(!cj[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){ck||(ck=c.createElement("iframe"),ck.frameBorder=ck.width=ck.height=0),b.appendChild(ck);if(!cl||!ck.createElement)cl=(ck.contentWindow||ck.contentDocument).document,cl.write((f.support.boxModel?"<!doctype html>":"")+"<html><body>"),cl.close();d=cl.createElement(a),cl.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ck)}cj[a]=e}return cj[a]}function ct(a,b){var c={};f.each(cp.concat.apply([],cp.slice(0,b)),function(){c[this]=a});return c}function cs(){cq=b}function cr(){setTimeout(cs,0);return cq=f.now()}function ci(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ch(){try{return new a.XMLHttpRequest}catch(b){}}function cb(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function ca(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function b_(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bD.test(a)?d(a,e):b_(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)});else if(!c&&f.type(b)==="object")for(var e in b)b_(a+"["+e+"]",b[e],c,d);else d(a,b)}function b$(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function bZ(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bS,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bZ(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=bZ(a,c,d,e,"*",g));return l}function bY(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bO),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bB(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?1:0,g=4;if(d>0){if(c!=="border")for(;e<g;e+=2)c||(d-=parseFloat(f.css(a,"padding"+bx[e]))||0),c==="margin"?d+=parseFloat(f.css(a,c+bx[e]))||0:d-=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0;return d+"px"}d=by(a,b);if(d<0||d==null)d=a.style[b];if(bt.test(d))return d;d=parseFloat(d)||0;if(c)for(;e<g;e+=2)d+=parseFloat(f.css(a,"padding"+bx[e]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+bx[e]))||0);return d+"px"}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;b.nodeType===1&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?b.outerHTML=a.outerHTML:c!=="input"||a.type!=="checkbox"&&a.type!=="radio"?c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(f.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached"))}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c,i[c][d])}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function T(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function K(){return!0}function J(){return!1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?+d:j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else d=b}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(n.test(b.replace(o,"@").replace(p,"]").replace(q,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){if(typeof c!="string"||!c)return null;var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H)return H.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h,i){var j,k=d==null,l=0,m=a.length;if(d&&typeof d=="object"){for(l in d)e.access(a,c,l,d[l],1,h,f);g=1}else if(f!==b){j=i===b&&e.isFunction(f),k&&(j?(j=c,c=function(a,b,c){return j.call(e(a),c)}):(c.call(a,f),c=null));if(c)for(;l<m;l++)c(a[l],d,j?f.call(a[l],l,c(a[l],d)):f,i);g=1}return g?a:k?c.call(a):m?c(a[0],d):h},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m,n=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),h==="array"?n(g):h==="function"&&(!a.unique||!p.has(g))&&c.push(g)},o=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,j=!0,m=k||0,k=0,l=c.length;for(;c&&m<l;m++)if(c[m].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}j=!1,c&&(a.once?e===!0?p.disable():c=[]:d&&d.length&&(e=d.shift(),p.fireWith(e[0],e[1])))},p={add:function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){j&&f<=l&&(l--,f<=m&&m--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return!c},lock:function(){d=b,(!e||e===!0)&&p.disable();return this},locked:function(){return!d},fireWith:function(b,c){d&&(j?a.once||d.push([b,c]):(!a.once||!e)&&o(b,c));return this},fire:function(){p.fireWith(this,arguments);return this},fired:function(){return!!i}};return p};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p=c.createElement("div"),q=c.documentElement;p.setAttribute("className","t"),p.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=p.getElementsByTagName("*"),e=p.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=p.getElementsByTagName("input")[0],b={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:p.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},f.boxModel=b.boxModel=c.compatMode==="CSS1Compat",i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete p.test}catch(r){b.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",function(){b.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),i.setAttribute("name","t"),p.appendChild(i),j=c.createDocumentFragment(),j.appendChild(p.lastChild),b.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,j.removeChild(i),j.appendChild(p);if(p.attachEvent)for(n in{submit:1,change:1,focusin:1})m="on"+n,o=m in p,o||(p.setAttribute(m,"return;"),o=typeof p[m]=="function"),b[n+"Bubbles"]=o;j.removeChild(p),j=g=h=p=i=null,f(function(){var d,e,g,h,i,j,l,m,n,q,r,s,t,u=c.getElementsByTagName("body")[0];!u||(m=1,t="padding:0;margin:0;border:",r="position:absolute;top:0;left:0;width:1px;height:1px;",s=t+"0;visibility:hidden;",n="style='"+r+t+"5px solid #000;",q="<div "+n+"display:block;'><div style='"+t+"0;display:block;overflow:hidden;'></div></div>"+"<table "+n+"' cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",d=c.createElement("div"),d.style.cssText=s+"width:0;height:0;position:static;top:0;margin-top:"+m+"px",u.insertBefore(d,u.firstChild),p=c.createElement("div"),d.appendChild(p),p.innerHTML="<table><tr><td style='"+t+"0;display:none'></td><td>t</td></tr></table>",k=p.getElementsByTagName("td"),o=k[0].offsetHeight===0,k[0].style.display="",k[1].style.display="none",b.reliableHiddenOffsets=o&&k[0].offsetHeight===0,a.getComputedStyle&&(p.innerHTML="",l=c.createElement("div"),l.style.width="0",l.style.marginRight="0",p.style.width="2px",p.appendChild(l),b.reliableMarginRight=(parseInt((a.getComputedStyle(l,null)||{marginRight:0}).marginRight,10)||0)===0),typeof p.style.zoom!="undefined"&&(p.innerHTML="",p.style.width=p.style.padding="1px",p.style.border=0,p.style.overflow="hidden",p.style.display="inline",p.style.zoom=1,b.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.style.overflow="visible",p.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=p.offsetWidth!==3),p.style.cssText=r+s,p.innerHTML=q,e=p.firstChild,g=e.firstChild,i=e.nextSibling.firstChild.firstChild,j={doesNotAddBorder:g.offsetTop!==5,doesAddBorderForTableAndCells:i.offsetTop===5},g.style.position="fixed",g.style.top="20px",j.fixedPosition=g.offsetTop===20||g.offsetTop===15,g.style.position=g.style.top="",e.style.overflow="hidden",e.style.position="relative",j.subtractsBorderForOverflowNotVisible=g.offsetTop===-5,j.doesNotIncludeMarginInBodyOffset=u.offsetTop!==m,a.getComputedStyle&&(p.style.marginTop="1%",b.pixelMargin=(a.getComputedStyle(p,null)||{marginTop:0}).marginTop!=="1%"),typeof d.style.zoom!="undefined"&&(d.style.zoom=1),u.removeChild(d),l=p=d=null,f.extend(b,j))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c])return g.events;k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!m(j[k]))return}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h,i,j=this[0],k=0,m=null;if(a===b){if(this.length){m=f.data(j);if(j.nodeType===1&&!f._data(j,"parsedAttrs")){g=j.attributes;for(i=g.length;k<i;k++)h=g[k].name,h.indexOf("data-")===0&&(h=f.camelCase(h.substring(5)),l(j,h,m[h]));f._data(j,"parsedAttrs",!0)}}return m}if(typeof a=="object")return this.each(function(){f.data(this,a)});d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!";return f.access(this,function(c){if(c===b){m=this.triggerHandler("getData"+e,[d[0]]),m===b&&j&&(m=f.data(j,a),m=l(j,a,m));return m===b&&d[1]?this.data(d[0]):m}d[1]=c,this.each(function(){var b=f(this);b.triggerHandler("setData"+e,d),f.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1)},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){var d=2;typeof a!="string"&&(c=a,a="fx",d--);if(arguments.length<d)return f.queue(this[0],a);return c===b?this:this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0))h++,l.add(m);m();return d.promise(c)}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,f.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,f.prop,a,b,arguments.length>1)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];{if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h}})}if(g){c=f.valHooks[g.type]||f.valHooks[g.nodeName.toLowerCase()];if(c&&"get"in c&&(d=c.get(g,"value"))!==b)return d;d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0)return null;c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j)return b;h.push(b)}}if(j&&!h.length&&i.length)return f(i[g]).val();return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn)return f(a)[c](d);if(typeof a.getAttribute=="undefined")return f.prop(a,c,d);i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set"in h&&i&&(g=h.set(a,d,c))!==b)return g;a.setAttribute(c,""+d);return d}if(h&&"get"in h&&i&&(g=h.get(a,c))!==null)return g;g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h,i=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;i<g;i++)e=d[i],e&&(c=f.propFix[e]||e,h=u.test(e),h||f.attr(a,e,""),a.removeAttribute(v?e:c),h&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button"))return w.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button"))return w.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0,coords:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/(?:^|\s)hover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(
a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler,g=p.selector),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:g&&G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1)a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o)f.event.remove(a,j+b[h],c,d,!0);continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++)s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s));r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered))return;h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1)return;r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++)m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault();c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=f.event.special[c.type]||{},j=[],k,l,m,n,o,p,q,r,s,t,u;g[0]=c,c.delegateTarget=this;if(!i.preDispatch||i.preDispatch.call(this,c)!==!1){if(e&&(!c.button||c.type!=="click")){n=f(this),n.context=this.ownerDocument||this;for(m=c.target;m!=this;m=m.parentNode||this)if(m.disabled!==!0){p={},r=[],n[0]=m;for(k=0;k<e;k++)s=d[k],t=s.selector,p[t]===b&&(p[t]=s.quick?H(m,s.quick):n.is(t)),p[t]&&r.push(s);r.length&&j.push({elem:m,matches:r})}}d.length>e&&j.push({elem:this,matches:d.slice(e)});for(k=0;k<j.length&&!c.isPropagationStopped();k++){q=j[k],c.currentTarget=q.elem;for(l=0;l<q.matches.length&&!c.isImmediatePropagationStopped();l++){s=q.matches[l];if(h||!c.namespace&&!s.namespace||c.namespace_re&&c.namespace_re.test(s.namespace))c.data=s.data,c.handleObj=s,o=((f.event.special[s.origType]||{}).handle||s.handler).apply(q.elem,g),o!==b&&(c.result=o,o===!1&&(c.preventDefault(),c.stopPropagation()))}}i.postDispatch&&i.postDispatch.call(this,c);return c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;)e=i[--d],a[e]=g[e];a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d))a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b;return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),d._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))});return!1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=J;else if(!e)return this;g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a)this.off(g,c,a[g]);return this}if(c===!1||typeof c=="function")d=c,c=b;d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b))if(w.length===2&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length)q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}else k=w=[]}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]")if(!u)e.push.apply(e,k);else if(d&&d.nodeType===1)for(t=0;k[t]!=null;t++)k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;k[t]!=null;t++)k[t]&&k[t].nodeType===1&&e.push(j[t]);else s(k,e);l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q)if(g==null)m.error(a);else break;q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9||d===11){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=m(b[3],null,null,c);else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],e=b[3];if(c===1&&e===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));o.match.globalPOS=p;var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}catch(r){}finally{l||k.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)m[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.globalPOS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a=="string")return f.inArray(this[0],f(a));return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var V="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")[\\s/>]","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.access(this,function(a){return a===b?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f
.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){return f.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return c.nodeType===1?c.innerHTML.replace(W,""):null;if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},c.nodeType===1&&(f.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(g){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,function(a,b){b.src?f.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||f.isXMLDoc(a)||!bc.test("<"+a.nodeName+">")?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g)e[g]&&bk(d[g],e[g])}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g)bj(d[g],e[g])}}d=e=null;return h},clean:function(a,b,d,e){var g,h,i,j=[];b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);for(var k=0,l;(l=a[k])!=null;k++){typeof l=="number"&&(l+="");if(!l)continue;if(typeof l=="string")if(!_.test(l))l=b.createTextNode(l);else{l=l.replace(Y,"<$1></$2>");var m=(Z.exec(l)||["",""])[1].toLowerCase(),n=bg[m]||bg._default,o=n[0],p=b.createElement("div"),q=bh.childNodes,r;b===c?bh.appendChild(p):U(b).appendChild(p),p.innerHTML=n[1]+l+n[2];while(o--)p=p.lastChild;if(!f.support.tbody){var s=$.test(l),t=m==="table"&&!s?p.firstChild&&p.firstChild.childNodes:n[1]==="<table>"&&!s?p.childNodes:[];for(i=t.length-1;i>=0;--i)f.nodeName(t[i],"tbody")&&!t[i].childNodes.length&&t[i].parentNode.removeChild(t[i])}!f.support.leadingWhitespace&&X.test(l)&&p.insertBefore(b.createTextNode(X.exec(l)[0]),p.firstChild),l=p.childNodes,p&&(p.parentNode.removeChild(p),q.length>0&&(r=q[q.length-1],r&&r.parentNode&&r.parentNode.removeChild(r)))}var u;if(!f.support.appendChecked)if(l[0]&&typeof (u=l.length)=="number")for(i=0;i<u;i++)bn(l[i]);else bn(l);l.nodeType?j.push(l):j=f.merge(j,l)}if(d){g=function(a){return!a.type||be.test(a.type)};for(k=0;j[k];k++){h=j[k];if(e&&f.nodeName(h,"script")&&(!h.type||be.test(h.type)))e.push(h.parentNode?h.parentNode.removeChild(h):h);else{if(h.nodeType===1){var v=f.grep(h.getElementsByTagName("script"),g);j.splice.apply(j,[k+1,0].concat(v))}d.appendChild(h)}}}return j},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()])continue;c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bp=/alpha\([^)]*\)/i,bq=/opacity=([^)]*)/,br=/([A-Z]|^ms)/g,bs=/^[\-+]?(?:\d*\.)?\d+$/i,bt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,bu=/^([\-+])=([\-+.\de]+)/,bv=/^margin/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Top","Right","Bottom","Left"],by,bz,bA;f.fn.css=function(a,c){return f.access(this,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)},a,c,arguments.length>1)},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=by(a,"opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d,h==="string"&&(g=bu.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(by)return by(a,c)},swap:function(a,b,c){var d={},e,f;for(f in b)d[f]=a.style[f],a.style[f]=b[f];e=c.call(a);for(f in b)a.style[f]=d[f];return e}}),f.curCSS=f.css,c.defaultView&&c.defaultView.getComputedStyle&&(bz=function(a,b){var c,d,e,g,h=a.style;b=b.replace(br,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b))),!f.support.pixelMargin&&e&&bv.test(b)&&bt.test(c)&&(g=h.width,h.width=c,c=e.width,h.width=g);return c}),c.documentElement.currentStyle&&(bA=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f==null&&g&&(e=g[b])&&(f=e),bt.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),by=bz||bA,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth!==0?bB(a,b,d):f.swap(a,bw,function(){return bB(a,b,d)})},set:function(a,b){return bs.test(b)?b+"px":b}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bq.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bp,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bp.test(g)?g.replace(bp,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){return f.swap(a,{display:"inline-block"},function(){return b?by(a,"margin-right"):a.style.marginRight})}})}),f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)}),f.each({margin:"",padding:"",border:"Width"},function(a,b){f.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++)f[a+bx[d]+b]=e[d]||e[d-2]||e[0];return f}}});var bC=/%20/g,bD=/\[\]$/,bE=/\r?\n/g,bF=/#.*$/,bG=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bH=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bI=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bJ=/^(?:GET|HEAD)$/,bK=/^\/\//,bL=/\?/,bM=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bN=/^(?:select|textarea)/i,bO=/\s+/,bP=/([?&])_=[^&]*/,bQ=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bR=f.fn.load,bS={},bT={},bU,bV,bW=["*/"]+["*"];try{bU=e.href}catch(bX){bU=c.createElement("a"),bU.href="",bU=bU.href}bV=bQ.exec(bU.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bR)return bR.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bM,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bN.test(this.nodeName)||bH.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bE,"\r\n")}}):{name:b.name,value:c.replace(bE,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b$(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b$(a,b);return a},ajaxSettings:{url:bU,isLocal:bI.test(bV[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bW},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bY(bS),ajaxTransport:bY(bT),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?ca(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=cb(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bG.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bF,"").replace(bK,bV[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bO),d.crossDomain==null&&(r=bQ.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bV[1]&&r[2]==bV[2]&&(r[3]||(r[1]==="http:"?80:443))==(bV[3]||(bV[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bZ(bS,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bJ.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bL.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bP,"$1_="+x);d.url=y+(y===d.url?(bL.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bW+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=bZ(bT,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2)w(-1,z);else throw z}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)b_(g,a[g],c,e);return d.join("&").replace(bC,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cc=f.now(),cd=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cc++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=typeof b.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(cd.test(b.url)||e&&cd.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(cd,l),b.url===j&&(e&&(k=k.replace(cd,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var ce=a.ActiveXObject?function(){for(var a in cg)cg[a](0,1)}:!1,cf=0,cg;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ch()||ci()}:ch,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,ce&&delete cg[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n);try{m.text=h.responseText}catch(a){}try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cf,ce&&(cg||(cg={},f(a).unload(ce)),cg[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cj={},ck,cl,cm=/^(?:toggle|show|hide)$/,cn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,co,cp=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cq;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(ct("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),(e===""&&f.css(d,"display")==="none"||!f.contains(d.ownerDocument.documentElement,d))&&f._data(d,"olddisplay",cu(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(ct("hide",3),a,b,c);var d,e,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(ct("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o,p,q;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]);if((k=f.cssHooks[g])&&"expand"in k){l=k.expand(a[g]),delete a[g];for(i in l)i in a||(a[i]=l[i])}}for(g in a){h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cu(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new f.fx(this,b,i),h=a[i],cm.test(h)?(q=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),q?(f._data(this,"toggle"+i,q==="show"?"hide":"show"),j[q]()):j[h]()):(m=cn.exec(h),n=j.cur(),m?(o=parseFloat(m[2]),p=m[3]||(f.cssNumber[i]?"":"px"),p!=="px"&&(f.style(this,i,(o||1)+p),n=(o||1)/j.cur()*n,f.style(this,i,n+p)),m[1]&&(o=(m[1]==="-="?-1:1)*o+n),j.custom(n,o,p)):j.custom(n,h,""));return!0}var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null)for(b in g)g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);else g[b=a+".run"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:ct("show",1),slideUp:ct("hide",1),slideToggle:ct("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cq||cr(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){f._data(e.elem,"fxshow"+e.prop)===b&&(e.options.hide?f._data(e.elem,"fxshow"+e.prop,e.start):e.options.show&&f._data(e.elem,"fxshow"+e.prop,e.end))},h()&&f.timers.push(h)&&!co&&(co=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cq||cr(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(co),co=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(cp.concat.apply([],cp),function(a,b){b.indexOf("margin")&&(f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)})}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cv,cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?cv=function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(e){}if(!d||!f.contains(c,a))return d?{top:d.top,left:d.left}:{top:0,left:0};var g=b.body,h=cy(b),i=c.clientTop||g.clientTop||0,j=c.clientLeft||g.clientLeft||0,k=h.pageYOffset||f.support.boxModel&&c.scrollTop||g.scrollTop,l=h.pageXOffset||f.support.boxModel&&c.scrollLeft||g.scrollLeft,m=d.top+k-i,n=d.left+l-j;return{top:m,left:n}}:cv=function(a,b,c){var d,e=a.offsetParent,g=a,h=b.body,i=b.defaultView,j=i?i.getComputedStyle(a,null):a.currentStyle,k=a.offsetTop,l=a.offsetLeft;while((a=a.parentNode)&&a!==h&&a!==c){if(f.support.fixedPosition&&j.position==="fixed")break;d=i?i.getComputedStyle(a,null):a.currentStyle,k-=a.scrollTop,l-=a.scrollLeft,a===e&&(k+=a.offsetTop,l+=a.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(a.nodeName))&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),g=e,e=a.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&d.overflow!=="visible"&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),j=d}if(j.position==="relative"||j.position==="static")k+=h.offsetTop,l+=h.offsetLeft;f.support.fixedPosition&&j.position==="fixed"&&(k+=Math.max(c.scrollTop,h.scrollTop),l+=Math.max(c.scrollLeft,h.scrollLeft));return{top:k,left:l}},f.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){f.offset.setOffset(this,a,b)});var c=this[0],d=c&&c.ownerDocument;if(!d)return null;if(c===d.body)return f.offset.bodyOffset(c);return cv(c,d,d.documentElement)},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);f.fn[a]=function(e){return f.access(this,function(a,e,g){var h=cy(a);if(g===b)return h?c in h?h[c]:f.support.boxModel&&h.document.documentElement[e]||h.document.body[e]:a[e];h?h.scrollTo(d?f(h).scrollLeft():g,d?g:f(h).scrollTop()):a[e]=g},a,e,arguments.length,null)}}),f.each({Height:"height",Width:"width"},function(a,c){var d="client"+a,e="scroll"+a,g="offset"+a;f.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,c,"padding")):this[c]():null},f.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,c,a?"margin":"border")):this[c]():null},f.fn[c]=function(a){return f.access(this,function(a,c,h){var i,j,k,l;if(f.isWindow(a)){i=a.document,j=i.documentElement[d];return f.support.boxModel&&j||i.body&&i.body[d]||j}if(a.nodeType===9){i=a.documentElement;if(i[d]>=i[e])return i[d];return Math.max(a.body[e],i[e],a.body[g],i[g])}if(h===b){k=f.css(a,c),l=parseFloat(k);return f.isNumeric(l)?l:k}f(a).css(c,h)},c,a,arguments.length,null)}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);
	</script>
	<script type="text/javascript">
		/*<![CDATA[*/
		$(function() {
			
			$('div.changes').each(function(i, el) {
				var changes = $(el);
				var showHide = $('<a href="#">Show changelog</a>');
				showHide.click(function() {
					if (changes.is(':visible')) {
						changes.hide();
						showHide.text('Show changelog');
					} else {
						changes.show();
						showHide.text('Hide changelog');
					}
					return false;
				});
				showHide.insertBefore(changes);
				changes.hide();
			});

			
			if ($.browser.msie) {
				$('#header + p').append(' <span class="warning">If you are having an issue with navigation being laggy, try a browser other than Internet Explorer.<\/span>');
			}
		});
		/*]]>*/
	</script>
</head>
<body>
		<header>
			<section class="main group">
				<a href="#"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAfCAYAAAAFvjTyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAADSZJREFUeNrsXN1vHUcV372OYzufN04j4KkXUVHRtPEaiQcewGvxBJWaawFSBYXYfSolwdctKhIvtiUEamlrG5B4QODrpqWAgNj8AXitViAhhNdAK1paZZEqUfLRbBLb8fXdneGc3dl7Z+djd29sqBR5pc3szs6cOXPub875zYdjUkqNvWvv2u3LRGCZpqn8uEo/V4bP1TAklWZAjADuJI3uEFMapWFIo7wQ8+A5ZHkhYc+QEvZO2I3PQRi633nwrcWiCoO+FUj4Gy8n6oxpOlw5m3/fu/5/V4QpHbAAVNZ64/ryO9ffLl/buAxAKBmUmFJKISUsjfOFZ5qUk9/x2cD61Jh++qG3pnKUHYVkHG5LO0pYR6BsFZILLNuFewk+Td2hPyLf1+Qa3o1BhYMTkmUhexBku3nA2qf7eKvRmH/93T+X0RsR0hUDIyxxQIqBoQNV9E7Fdw5UUX1MURFzKENJBNJ8FqDY5XHPlvBsgZw6GMS7A7E19D+UfTrHztpLC6wr65esZpMyz6QGkOydOCBR04O8RXgfhfdyVJ6KoGIpNf0MUOGIKRfoi5thbP8OBZWhGnC7SAFE2R7I9m8bWL/3P2O/c+NN4EbFQCWGOebRPBJ2TYO4aQBOjYbmZMtjUQlcaxr95jWgQk4m1nEyDHIncy07Y4DttuzCdlQCq9EIrI2tTYMEXQKQGJioqQ+BlAt78fPk9x68OPGt333EgzLzrbocuAwqjzDwVjUFQNBoY1kxnpF7EYxrdyi/quR47p3IVlGPwnYsqTK3m+EAcKzIY4HXYWn8jGkYlGLQ4TOXj2Ezzovfv/tZz4d06amle6pPP/R2HZ7rCU+jXDr78GsqYI3jQgh3owseKUAcLaEe3nekx8LwbsrX2G4BS2FHd0fA8jd9KwJPAhgeVKGYL97xNwQMXgAoB97P4DN4qjkS4iQg9loslZQlhFjRUgKusbXvuYI8yRLq4e0ae1en14Box1IH3E0JrMb2thUBJOC8U5SmQSSDrxSBhTLP1QJKWPImfvWxyvNf/IcbeTX2nU0M3AKxPeFVtzNL8kqlkr+Hkx0T944Gp8SxFl77hO03LrEfvoPlg9SMD/lVe1qK4RAcN/IBD8FktGeDWG5NdsPGgLi0Bq7ZK+bCDUuom2uQMAwrMZhNjrNQHJ1uV1fX+wpKhW71rq6St0MZ2D+X9c/rdFIA8lAW+07RPg7IcTOBtd0kVqPZlIBFOOKeCax2+q9E5uzDrzvfeOl++9z5UzYNjTaoCCJAxZkgvss7TdegQyoDjEGn6m0D0rJQdy3D4GicmfboTFWcRFYAZeZA/pSm/jVhojCtKgvlUP6quIgJZR1OD34hchG+jUA+6lYTdEMg1OEbtnsxq33W7kwbJFTVB4+1N8HXU2z1rUD+KLNLRZQF37AvI8lAlEJhs0kGtptBKsy1yDtJh0Iq5qfTuxOZZ8+fqsQzy5KdrIsl948f/UsqbgdBZDCrgwHZGnFUHUKVvCAIw3n2Y2a1hbpMQtlVDSjLBRcPqzkLjSm9oR8VaHO5DSrZc7C+lnVeBepXGZjtHPuhF6sxECbtSzaBvDNs+aei83CUGxwSsG41Ny2OoPttAAlcioGIEi24Rs+9+ECkIHgmBJQP6ThNOFbs1TTeihpF72TUszg4oCgjtREEwTx8GC3aBvxjQZ0padZUoC1WVtTL50MQvA+J7cFta/rrskra9kHXMrzMd2hHN8uOOn0UdhpVhsJmEFqtJQGKK+fmBKQWC10g3HQSDvVM9Z/ek7+518K1KihfVYTD5a8vWINQFlfgZyAts3WrhF+5Co5ka0apn7dmg/xK9Ard3fv8tEduTkG5UeXkwDSW2PA8I490ivuUUzxYIIynSkBbrn5NyMzQW/qu87ou19chRV89Jg/6Z8rezDTmmKeEGTfM+uI+WqJXV9gxrYtprDA7jcteE+0iAOuZlZP2VrAZeScGjFEAGQILQpm5iEsHYivPff4N7OzI+Msnlxnw+K0aGDkgg5QcUGKUI+wJuGTiDooJJva7u7sHC66+ZK4UbzebFWh63JS5xhi0Uefe6wDAZQFcZahv7e/uTkKRJchRhtzt7WZZwUlWeJ3iH0fSCQcE8p5F0M1X2Mky9YPstCAPwTTcvU+W04zbz7Njos8I6OJwdR1D3qSuSMAKAmLhkReSJuk1eJ7FbZlv/vaj+D773BfekBQEAI5BmYtGGljxEgiGwDaYeHC5iuFt0duY5m5vb6sI55ogOxphQqnp/fv31xVeZkHBT8qd66mciLgZcpIfcRj0cjV9xTU+sR9rnO5SHZClnN0CUDxBtq05oyfpgyCD8kqbC8CiAwGeNuCBRSNeVP/+yJtTT/76XgyJM7Vf3offViDfw3AGz5UfPvJXF8LeWBQW0cNRI9muQW5ltUDGhcKfnf1japRvNRplxTbFyg62IMSQMyr/gOasRp52St9oNOxcELflKEa/6eboPdHT0+N22FcnA1gV0HkZcqd7e3qc27DjtEofjR18CVjNMLAEbxWFM0hxyjoCniraq8Oy4z+/PzYY8C/kB1+bHwRuhoAyR3AWxAAWnVyAtistT4ZcIgZYEW9V2GPFnCd99fb2toy4tbWFRhB5R723t0d3smJHIM7Qy4c2U8Rd/t5b7/zHT4F1SeFt8d0GO3jQM+Ra9b7eXr+IHTMGX0Vnh1J6Cm1YVDHzg7Ra+8V9qanv3Jf+7vzgy39zgqDLDYPSOABnFcACJN5cxaUGgqSfANEP4yMz8iKq6apGtzzbKAwsK2uGppZNl3TyiHrWlXyTZk0ABlcjx+5QL6dAX4eEOh4/QECXWWxHM3vDMAoTKXpx89at0QL9dnWDT2MHJwWsby/dY+P6I9EvH8yce/GBmbPnT0Wj/vH5wQp4qSkA1EWYJVaTvT8GHDyD5fzksT8NA4DOcEdpeICtFVDU7+vrLbjinv0Dguy7RSP09fU5WR5QB3IFiJVyNjY3Yy6ULrvCfVeBNzf0k5xBxGZ2w3i4MWNpIFqSAB2qUtQoCPQsm7dCYUiIFdJ9Ir8SUyTytcfrVnLy00gvHzBSHoe88qM/+iTMJsELGkk5o50qVtwpAUXNzsPg+vqGRXI4D47UTv5sRKGLd+jgAR/aKtOCxB1kWNTUh8y875q+VmgGcU+uAwf60MuMbWxsTEfUJF7glEMojVbSo33Y9Y0NmxTkjq0BptGdA5YxRHSgEp7Te32p5YMUgJDEt59ZGcaxXnjildRIuHlzPTKYMOsuTtxpDnEntNCKPNOlGocMubymLR1xH5LKmimSPSB+P3z4UB65thXta+scPHgQPT5ypNmb6+tY94Kw9mTxQC/KHcFGtsKmaxKwAFQWIfIJT3n5oH1W3cgCF4xwnC0y79T2VoaauBNKCndKUVc69330yBFHKJO3ycqXnVRkz2nkaLdyoKy4leMdPXzEz+izW6CvErk2DbOQnQ4fOuRcv3Fjju33FZINdtRwR5I5M4041vjLJ8vRjE48hMfzLJEnpU6Vpk89IBeZP/cHDwBkS4DUrbhjWIARkLoLnqOCshWhrqco44ryff+6RF4hb16hi5MYWNIxvm2FnJpCr0Up3Ka/uwX6KurmHjlyuPAJDCg/JOqfIdvJkDMgyuFBGHkss7RukbAvTa6T0wc0O+ylQ1/8LRndkHea91Sc91IRd2na3V8uewU9VkXYEqm8d+3aKvMkE/3HjnkgXxGu6AyUwzU3NGDFNI1xopjKm/EKeKKnyszjIMdgcsog5wyJ/yxLvBaSByhvdcJn+FmmzsuhTNB2lR2JWWL6tGzC9LKlrSxuUlDUg8Yey9SG430x+ko2xU1mPCslhbw8MEmk3FmovVr/6vOfioi7YZg8oKQ1l3YoDi0zQ9GcUQgAktZULHYjeTX6j5XrV6++NynszpdZWJhkMylD2loxjbH+/v6WviDHATm+wFPy5RhG/fjxthw8JWvK+4OZHuvK1avgUYgWjCDTZjKTvk8KM0VV/yInAH2ys2SrPKcgSz6PRY0QlOrmvJWh4VdtgLWAZaSAFe0nMW81w9JW+0nZl55yUqC5dPkKhgyY6dCORi9nUJ1n80+cuMvlRuQIKLRaeGpommMnjh+vK9rDReILHUwyHZA1kZaBe6LpHxl0dbL7SS3FPqebJbNA/5wElEU57uXLV2ySA8KIY5Gg16fRn73zfIlxK6rgUTT1VzhJng/38MLEq/5Xnv00bjhXU6BqP08rfigLFRXuwh4LADMB5d08GSfuOu5C2UEEoqJsqh6U+zCUV66AAwAWEaQF5PhQbhrKD4MsPz3ipT4X4FekIsrnwQjf13L04fs3zPcP8o4qZLuagVxRyEyVbf2J/WM//XiNnUYQlhdyvVTCoRZfeOKVSPgjzw7VIL/Me6lkBIC3ks6u//vd/6DbFjnJ7Ic++IGOjgUzORYLTdHRW50MTZvo+Ryo43XQpq2ZYaIcx3gfLqaTZagPInbUv9u5Wv93w961d+329V8BBgBA3FRI0Rz0QQAAAABJRU5ErkJggg==" alt="Flourish" /></a>
				<span class="tagline">PHP Unframework</span>
				<nav class="group">
					<a href="#ClassDocumentation">Class Documentation</a>
					<a href="#GeneralDocumentation">General Documentation</a>
				</nav>
			</section>
		</header>
		<section class="main"> <p>This document contains all of the class and API documentation, plus selected general documentation for <a class="ext-link" href="http://flourishlib.com"><span class="icon">Flourish</span></a> v0.9.0. The <em>Class Documentation</em> and <em>General Documentation</em> links in the header provide for quick access to the table of contents. Any links preceeded by a small graphical arrow will leave this document.</p><h2 id="ClassDocumentation">Class Documentation</h2>
<div class="class_docs first">
<h3 id="Database">Database</h4>

<ul>
<li><a href="#fDatabase">fDatabase</a>                                <a href="#fDatabase-api">API</a></li>
<li><a href="#fResult">fResult</a>                                    <a href="#fResult-api">API</a></li>
<li><a href="#fSQLTranslation">fSQLTranslation</a>                    <a href="#fSQLTranslation-api">API</a></li>
<li><a href="#fSQLSchemaTranslation">fSQLSchemaTranslation</a>        <a href="#fSQLSchemaTranslation-api">API</a></li>
<li><a href="#fSchema">fSchema</a>                                    <a href="#fSchema-api">API</a></li>
<li><a href="#fStatement">fStatement</a>                              <a href="#fStatement-api">API</a></li>
<li><a href="#fUnbufferedResult">fUnbufferedResult</a>                <a href="#fUnbufferedResult-api">API</a></li>
</ul>

<h3 id="ORM">ORM</h4>

<ul>
<li><a href="#fActiveRecord">fActiveRecord</a>                        <a href="#fActiveRecord-api">API</a></li>
<li><a href="#fRecordSet">fRecordSet</a>                              <a href="#fRecordSet-api">API</a></li>
</ul>

<ul>
<li><a href="#fORM">fORM</a>                                          <a href="#fORM-api">API</a></li>
<li><a href="#fORMColumn">fORMColumn</a>                              <a href="#fORMColumn-api">API</a></li>
<li><a href="#fORMDatabase">fORMDatabase</a>                          <a href="#fORMDatabase-api">API</a></li>
<li><a href="#fORMDate">fORMDate</a>                                  <a href="#fORMDate-api">API</a></li>
<li><a href="#fORMFile">fORMFile</a>                                  <a href="#fORMFile-api">API</a></li>
<li><a href="#fORMJSON">fORMJSON</a>                                  <a href="#fORMJSON-api">API</a></li>
<li><a href="#fORMMoney">fORMMoney</a>                                <a href="#fORMMoney-api">API</a></li>
<li><a href="#fORMOrdering">fORMOrdering</a>                          <a href="#fORMOrdering-api">API</a></li>
<li><a href="#fORMRelated">fORMRelated</a>                            <a href="#fORMRelated-api">API</a></li>
<li><a href="#fORMSchema">fORMSchema</a>                              <a href="#fORMSchema-api">API</a></li>
<li><a href="#fORMValidation">fORMValidation</a>                      <a href="#fORMValidation-api">API</a></li>
</ul>

<h3 id="Filesystem">Filesystem</h4>

<ul>
<li><a href="#fFilesystem">fFilesystem</a>                            <a href="#fFilesystem-api">API</a></li>
<li><a href="#fFile">fFile</a>                                        <a href="#fFile-api">API</a>
<ul>
<li><a href="#fImage">fImage</a>                                     <a href="#fImage-api">API</a></li>
</ul>
</li>
<li><a href="#fDirectory">fDirectory</a>                              <a href="#fDirectory-api">API</a></li>
</ul>
</div>
<div class="class_docs second">
<h3 id="Request">Request</h4>

<ul>
<li><a href="#fCookie">fCookie</a>                                    <a href="#fCookie-api">API</a></li>
<li><a href="#fRequest">fRequest</a>                                  <a href="#fRequest-api">API</a></li>
<li><a href="#fUpload">fUpload</a>                                    <a href="#fUpload-api">API</a></li>
<li><a href="#fURL">fURL</a>                                          <a href="#fURL-api">API</a></li>
<li><a href="#fValidation">fValidation</a>                            <a href="#fValidation-api">API</a></li>
</ul>

<h3 id="Session">Session</h4>

<ul>
<li><a href="#fAuthorization">fAuthorization</a>                      <a href="#fAuthorization-api">API</a></li>
<li><a href="#fMessaging">fMessaging</a>                              <a href="#fMessaging-api">API</a></li>
<li><a href="#fSession">fSession</a>                                  <a href="#fSession-api">API</a></li>
</ul>

<h3 id="Response">Response</h4>

<ul>
<li><a href="#fBuffer">fBuffer</a>                                    <a href="#fBuffer-api">API</a></li>
<li><a href="#fCRUD">fCRUD</a>                                        <a href="#fCRUD-api">API</a></li>
<li><a href="#fHTML">fHTML</a>                                        <a href="#fHTML-api">API</a></li>
<li><a href="#fJSON">fJSON</a>                                        <a href="#fJSON-api">API</a></li>
<li><a href="#fTemplating">fTemplating</a>                            <a href="#fTemplating-api">API</a></li>
</ul>

<h3 id="Utilities">Utilities</h4>

<ul>
<li><a href="#fCache">fCache</a>                                      <a href="#fCache-api">API</a></li>
<li><a href="#fCryptography">fCryptography</a>                        <a href="#fCryptography-api">API</a></li>
<li><a href="#fGrammar">fGrammar</a>                                  <a href="#fGrammar-api">API</a></li>
<li><a href="#fText">fText</a>                                        <a href="#fText-api">API</a></li>
<li><a href="#fXML">fXML</a>                                          <a href="#fXML-api">API</a></li>
</ul>
</div>
<div class="class_docs third">
<h3 id="Email">Email</h4>

<ul>
<li><a href="#fEmail">fEmail</a>                                      <a href="#fEmail-api">API</a></li>
<li><a href="#fMailbox">fMailbox</a>                                  <a href="#fMailbox-api">API</a></li>
<li><a href="#fSMTP">fSMTP</a>                                        <a href="#fSMTP-api">API</a></li>
</ul>

<h3 id="DateTime">Date/Time</h4>

<ul>
<li><a href="#fDate">fDate</a>                                        <a href="#fDate-api">API</a></li>
<li><a href="#fTime">fTime</a>                                        <a href="#fTime-api">API</a></li>
<li><a href="#fTimestamp">fTimestamp</a>                              <a href="#fTimestamp-api">API</a></li>
</ul>

<h3 id="NumbersStrings">Numbers/Strings</h4>

<ul>
<li><a href="#fMoney">fMoney</a>                                      <a href="#fMoney-api">API</a></li>
<li><a href="#fNumber">fNumber</a>                                    <a href="#fNumber-api">API</a></li>
<li><a href="#fUTF8">fUTF8</a>                                        <a href="#fUTF8-api">API</a></li>
</ul>

<h3 id="ErrorsExceptions">Errors/Exceptions</h4>

<ul>
<li><a href="#fCore">fCore</a>                                        <a href="#fCore-api">API</a></li>
<li><a href="#fException">fException</a>                              <a href="#fException-api">API</a>
<ul>
<li><a href="#fExpectedException">fExpectedException</a>             <a href="#fExpectedException-api">API</a>
<ul>
<li><a href="#fAuthorizationException">fAuthorizationException</a>  <a href="#fAuthorizationException-api">API</a></li>
<li><a href="#fEmptySetException">fEmptySetException</a>            <a href="#fEmptySetException-api">API</a></li>
<li><a href="#fNoRemainingException">fNoRemainingException</a>      <a href="#fNoRemainingException-api">API</a></li>
<li><a href="#fNoRowsException">fNoRowsException</a>                <a href="#fNoRowsException-api">API</a></li>
<li><a href="#fNotFoundException">fNotFoundException</a>            <a href="#fNotFoundException-api">API</a></li>
<li><a href="#fValidationException">fValidationException</a>        <a href="#fValidationException-api">API</a></li>
</ul>
</li>
<li><a href="#fUnexpectedException">fUnexpectedException</a>         <a href="#fUnexpectedException-api">API</a>
<ul>
<li><a href="#fConnectivityException">fConnectivityException</a>    <a href="#fConnectivityException-api">API</a></li>
<li><a href="#fEnvironmentException">fEnvironmentException</a>      <a href="#fEnvironmentException-api">API</a></li>
<li><a href="#fProgrammerException">fProgrammerException</a>        <a href="#fProgrammerException-api">API</a></li>
<li><a href="#fSQLException">fSQLException</a>                      <a href="#fSQLException-api">API</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h2 id="GeneralDocumentation">General Documentation</h2><ul class="stackable"><li><a href="#BackwardsCompatibilityBreak-docs">Backwards Compatibility Breaks</a></li><li><a href="#FlourishCallbackSyntax-docs">Flourish Callback Syntax</a></li><li><a href="#FlourishSql-docs">Flourish SQL</a></li><li><a href="#GettingStarted-docs">Getting Started</a></li><li><a href="#HowDoI-docs">How Do I?</a></li><li><a href="#InternalBackwardsCompatibilityBreak-docs">Internal Backwards Compatibility Breaks</a></li><li><a href="#InternationalizationLocalization-docs">Internationalization and Localization</a></li></ul><ul class="stackable"><li><a href="#LicenseAgreement-docs">License</a></li><li><a href="#MessagesList-docs">Messages List</a></li><li><a href="#MethodNaming-docs">Method Naming</a></li><li><a href="#ObjectRelationalMapping-docs">ORM (Object-Relational Mapping)</a></li><li><a href="#ObtainingaSecureCertificateKeyPair-docs">Obtaining a Secure Certificate/Key Pair</a></li><li><a href="#OrmConventions-docs">ORM Conventions</a></li><li><a href="#PerformanceTips-docs">Performance Tips</a></li></ul><ul class="stackable"><li><a href="#PhpVersionDifferences-docs">PHP Version Differences</a></li><li><a href="#ReferenceObjects-docs">Reference Objects</a></li><li><a href="#Security-docs">Security</a></li><li><a href="#UTF-8-docs">UTF-8 in PHP</a></li><li><a href="#ValueObjects-docs">Value Objects</a></li><li><a href="#Versioning-docs">Versioning</a></li></ul><div class="clear"></div>
		<section class="main">
<h2 id="fActiveRecord">fActiveRecord</h2>
<div class="sidebar">
<h3 id="fActiveRecord-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fActiveRecord">Class Documentation</a></strong></li>
<li><a href="#fActiveRecord-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fActiveRecord-docs-Setup">Setup</a>
<ul>
<li><a href="#fActiveRecord-docs-CustomClasstoTableMapping">Custom Class to Table Mapping</a></li>
<li><a href="#fActiveRecord-docs-ModelingTablesinOtherSchemas">Modeling Tables in Other Schemas</a></li>
<li><a href="#fActiveRecord-docs-UsingMultipleDatabases">Using Multiple Databases</a></li>
</ul>
</li>
<li><a href="#fActiveRecord-docs-CreatingandLoadingRecords">Creating and Loading Records</a></li>
<li><a href="#fActiveRecord-docs-ColumnOperations">Column Operations</a>
<ul>
<li><a href="#fActiveRecord-docs-DateTimeandTimestampColumns">Date, Time and Timestamp Columns</a></li>
<li><a href="#fActiveRecord-docs-FloatDecimalColumns">Float/Decimal Columns</a></li>
<li><a href="#fActiveRecord-docs-StringColumns">String Columns</a></li>
<li><a href="#fActiveRecord-docs-AllColumns">All Columns</a></li>
</ul>
</li>
<li><a href="#fActiveRecord-docs-ColumnValuesandObjects">Column Values and Objects</a></li>
<li><a href="#fActiveRecord-docs-RecordOperations">Record Operations</a>
<ul>
<li><a href="#fActiveRecord-docs-store">store()</a></li>
<li><a href="#fActiveRecord-docs-validate">validate()</a>
<ul>
<li><a href="#fActiveRecord-docs-WhatisValidated">What is Validated</a></li>
<li><a href="#fActiveRecord-docs-Usage">Usage</a></li>
</ul>
</li>
<li><a href="#fActiveRecord-docs-delete">delete()</a></li>
<li><a href="#fActiveRecord-docs-load">load()</a></li>
<li><a href="#fActiveRecord-docs-populate">populate()</a>
<ul>
<li><a href="#fActiveRecord-docs-BlankStrings">Blank Strings</a></li>
<li><a href="#fActiveRecord-docs-Checkboxes">Checkboxes</a></li>
</ul>
</li>
<li><a href="#fActiveRecord-docs-replicateclone">replicate() / clone</a></li>
<li><a href="#fActiveRecord-docs-exists">exists()</a>
<ul>
<li><a href="#fActiveRecord-docs-Warning">Warning</a></li>
</ul>
</li>
<li><a href="#fActiveRecord-docs-reflect">reflect()</a></li>
</ul>
</li>
<li><a href="#fActiveRecord-docs-RelatedRecordsOperations">Related Records Operations</a>
<ul>
<li><a href="#fActiveRecord-docs--to-oneRelationships">*-to-one Relationships</a>
<ul>
<li><a href="#fActiveRecord-docs-One-to-oneRelationships">One-to-one Relationships</a></li>
</ul>
</li>
<li><a href="#fActiveRecord-docs--to-manyRelationships">*-to-many Relationships</a>
<ul>
<li><a href="#fActiveRecord-docs-BuildingListingCountingandHas">Building, Listing, Counting and Has</a></li>
<li><a href="#fActiveRecord-docs-Associating">Associating</a></li>
<li><a href="#fActiveRecord-docs-Populating">Populating</a></li>
</ul>
</li>
<li><a href="#fActiveRecord-docs-RelationshipRoutes">Relationship Routes</a></li>
</ul>
</li>
<li><a href="#fActiveRecord-docs-Configuration">Configuration</a></li>
</ul>

<h3 id="fActiveRecord-docs-ORMClasses">ORM Classes </h3>

<ul>
<li><strong>fActiveRecord</strong></li>
<li><a href="#fRecordSet">fRecordSet</a></li>
</ul>

<ul>
<li><a href="#fORM">fORM</a></li>
<li><a href="#fORMColumn">fORMColumn</a></li>
<li><a href="#fORMDatabase">fORMDatabase</a></li>
<li><a href="#fORMDate">fORMDate</a></li>
<li><a href="#fORMFile">fORMFile</a></li>
<li><a href="#fORMJSON">fORMJSON</a></li>
<li><a href="#fORMMoney">fORMMoney</a></li>
<li><a href="#fORMOrdering">fORMOrdering</a></li>
<li><a href="#fORMRelated">fORMRelated</a></li>
<li><a href="#fORMSchema">fORMSchema</a></li>
<li><a href="#fORMValidation">fORMValidation</a></li>
</ul>
</div>

<p>
The fActiveRecord class is an abstract class that follows the <a class="ext-link" href="http://en.wikipedia.org/wiki/Active_record_pattern"><span class="icon">active record pattern</span></a>. It provides an object-oriented interface for creating, retrieving, storing and deleting a single row (or record) in a database. All interaction with the database is done automatically without the need to write any SQL.
</p>

<p>
In addition to providing an interface to the columns in a single table, data from other database tables related via <code>FOREIGN KEY</code> constraints can be easily and efficiently retrieved. To query for and return multiple fActiveRecord objects, please see the class <a href="#fRecordSet">fRecordSet</a>.
</p>

<p>
The following discussion is built on top of the content of <a href="#OrmConventions-docs">ORM Conventions</a>. Topics include database schema structure, various notation standards and information about MySQL and SQLite databases. Please be sure to read over it since it include important information, such as the fact that column and table names must use <code>underscore_notation</code> by default.
</p>

<h3 id="fActiveRecord-docs-Setup">Setup</h3>

<p>
In order to use the fActiveRecord class, a database table must exist to be modeled. Below is an example users tableplease note that the table has been designed to demonstrate the features of the class, not as an example of a well-designed schema.
</p>
<pre class="block sql"><code>CREATE TABLE users (
    user_id INTEGER PRIMARY KEY AUTOINCREMENT,
    email VARCHAR(255) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    first_name VARCHAR(100) NOT NULL,
    middle_initial VARCHAR(5) NOT NULL DEFAULT '',
    last_name VARCHAR(100) NOT NULL,
    date_created TIMESTAMP NOT NULL,
    email_validated BOOLEAN NOT NULL DEFAULT FALSE,
    membership_fee DECIMAL(10,2) NOT NULL,
    profile TEXT NOT NULL DEFAULT '',
    status VARCHAR(20) NOT NULL CHECK(status IN ('Active', 'Inactive'))    
);</code></pre>

<p>
 Once a table has been created, a PHP class will need to be made. The name of the class should be in <code>UpperCamelCase</code> notation and should be a singular form of the table name. Thus for the <code>users</code> table a class <code>User</code> would be created that extends fActiveRecord.
</p>
<pre class="block php"><code>class User extends fActiveRecord
{
    protected function configure()
    {
    }
}</code></pre>

<p>
 A blank extension of the <a href="#fActiveRecord-api-configure"><code>configure()</code></a> method has been included since that is where all class functionality configuration is placed. This method is called exactly once per script execution and is the preferred location to call code to extend or set up the class, but not the individual object.
</p>

<p>
In addition to the fActiveRecord class and database table, a method to connect to the database needs to be set up. To do this, an instance of the <a href="#fDatabase">fDatabase</a> class needs to be passed to <a href="#fORMDatabase-api-attach">fORMDatabase::attach()</a>  this is commonly done in the sites initilization script.
</p>
<pre class="block php"><code>// Set up a SQLite database for use by fActiveRecord and fRecordSet
fORMDatabase::attach(
    new fDatabase('sqlite', '/path/to/database')
);</code></pre>

<p>
 The <a href="#fDatabase">fDatabase</a> instance attached to <a href="#fORMDatabase">fORMDatabase</a> will also be used by <a href="#fRecordSet">fRecordSet</a>.
</p>

<h4 id="fActiveRecord-docs-CustomClasstoTableMapping">Custom Class to Table Mapping</h4>

<p>
It is possible to change the class to table association for modeling an existing incompatible database. The static method <a href="#fORM-api-mapClassToTable">fORM::mapClassToTable()</a> will accept the <code>$class</code> and the <code>$table</code> to map to the class to. 
</p>

<p>
<em>This method should be called in the site-wide configuration and should <strong>not</strong> be called in the <a href="#fActiveRecord-api-configure"><code>configure()</code></a> method.</em>
</p>
<pre class="block php"><code>// Class to table mapping should occur before any classes are used
// such as when the database is attached via fORMDatabase::attach()
fORMDatabase::attach($db);
fORM::mapClassToTable('User', 'user');</code></pre>

<h4 id="fActiveRecord-docs-ModelingTablesinOtherSchemas">Modeling Tables in Other Schemas</h4>

<p>
When a class models a table in a non-default schema (<code>public</code> for PostgreSQL, <code>dbo</code> for MSSQL and the username for Oracle and DB2), the static method <a href="#fORM-api-mapClassToTable">fORM::mapClassToTable()</a> should be called with first parameter the <code>$class</code> to map, and the second parameter, <code>$table</code>, should be in the format <code>schema.table</code>.
</p>

<p>
<em>This method should be called in the site-wide configuration and should <strong>not</strong> be called in the <a href="#fActiveRecord-api-configure"><code>configure()</code></a> method.</em>
</p>
<pre class="block php"><code>// This maps the User class to the users table in the authorization schema
fORM::mapClassToTable('User', 'authorization.users');</code></pre>

<h4 id="fActiveRecord-docs-UsingMultipleDatabases">Using Multiple Databases</h4>

<p>
When multiple databases are configured via <a href="#fORMDatabase">fORMDatabase</a>, classes can model tables on the non-<code>default</code> database by calling the method <a href="#fORM-api-mapClassToDatabase">fORM::mapClassToDatabase()</a>. The first parameter is the <code>$class</code> to map, and the second is the <code>$name</code> of the database set in <a href="#fORMDatabase-api-attach">fORMDatabase::attach()</a>. 
</p>
<pre class="block php"><code>// Attach a second database as &quot;commerce_db&quot; and have the User class model the users table in it
fORMDatabase::attach($db, 'commerce_db');
fORM::mapClassToDatabase('User', 'commerce_db');</code></pre>

<p>
 <em>Like <a href="#fORM-api-mapClassToTable">fORM::mapClassToTable()</a>, this method should be called in the site-wide configuration and should <strong>not</strong> be call in the <a href="#fActiveRecord-api-configure"><code>configure()</code></a> method. This method is not required for classes modeling tables in the default database  if no <code>$name</code> was provided to <a href="#fORMDatabase-api-attach">fORMDatabase::attach()</a>, then the database is the default.</em>
</p>

<h3 id="fActiveRecord-docs-CreatingandLoadingRecords">Creating and Loading Records</h3>

<p>
A new record can be created by simply creating an object without any parameters.
</p>
<pre class="block php"><code>$new_user_1 = new User();
$new_user_2 = new User();</code></pre>

<p>
 Existing records can be loaded from the database by passing the primary key value to the constructor. If a primary key has multiple columns, use an associative array with the keys being the columns.
</p>
<pre class="block php"><code>// Loading a record with a single column primary key
$user = new User(2);

// Loading a record with a multiple column primary key
$permission = new Permission(array('user_id' =&gt; 2, 'resource_id' =&gt; 3));</code></pre>

<p>
 It is also possible to load a record based on the values from columns in a <code>UNIQUE</code> constraint. When loading via a <code>UNIQUE</code> constraint, an associative array must be used, even if there is only a single column in the constraint.
</p>
<pre class="block php"><code>// This loads a user by their unique email address
$user = new User(array('email' =&gt; 'will@flourishlib.com'));</code></pre>

<p>
 Please note that an fActiveRecord object is a <a href="#ReferenceObjects-docs">reference object</a>. All objects of the same class will share the same data and any operations will affect all instances. Thus if the <code>User</code> object for user <code>3</code> has the first name changed, all other objects representing user <code>3</code> will also have the first name changed.
</p>

<h3 id="fActiveRecord-docs-ColumnOperations">Column Operations</h3>

<p>
For every column in a record there are at least five different operations that can be performed. ORM plugins can change these default behaviors or add even more.
</p>
<table><tbody>
<tr>
<td><strong>Action</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td><code>get</code></td>
<td>Retrieves the columns value</td>
</tr>
<tr>
<td><code>set</code></td>
<td>Sets a new value for the column - empty string <code>''</code> are converted to <code>NULL</code></td>
</tr>
<tr>
<td><code>encode</code></td>
<td>Encodes all special HTML characters  should be used when content is not trusted or for displaying in HTML tag attributes</td>
</tr>
<tr>
<td><code>prepare</code></td>
<td>Encodes all special HTML characters, but leaves HTML tags and entities unencoded  should only be used for trusted content</td>
</tr>
<tr>
<td><code>inspect</code></td>
<td>Returns information about the column, including information such as the data type and valid values</td>
</tr>
</tbody></table>

<p>
These five operations are combined with the column name into a <code>camelCase</code> method name. Below are some examples:
</p>
<pre class="block php"><code>$first_name = $user-&gt;getFirstName();

$user-&gt;setFirstName($first_name);

echo $user-&gt;encodeFirstName();

echo $user-&gt;prepareFirstName();

$max_length = $user-&gt;inspectFirstName('max_length');</code></pre>

<p>
 As mentioned on the <a href="#OrmConventions-docs">ORM Conventions</a> page, all columns in the database should be created using <code>underscore_notation</code>. This assumes that numbers are separated from words by an underscore, such as <code>address_2</code>. If a number is not separated by an underscore, or you are having other notation conversion issues, you man need to <a href="#fGrammar-docs-FixingNotationConversionIssues">customize the notation conversion</a> using <a href="#fGrammar">fGrammar</a>.
</p>

<h4 id="fActiveRecord-docs-DateTimeandTimestampColumns">Date, Time and Timestamp Columns</h4>

<p>
When dealing with date, time or timestamp columns, the <code>prepare</code> and <code>encode</code> methods require a single parameter, <code>$date_formatting_string</code>. The formatting string can be any valid <a class="ext-link" href="http://php.net/date.function"><span class="icon"><code>date()</code></span></a> formatting string, or a format name that was created with <a href="#fTimestamp-api-defineFormat">fTimestamp::defineFormat()</a>.
</p>
<pre class="block php"><code>echo $user-&gt;prepareDateCreated('n/j/y');
echo $user-&gt;encodeDateCreated('my_date_format');</code></pre>

<h4 id="fActiveRecord-docs-FloatDecimalColumns">Float/Decimal Columns</h4>

<p>
Floating point columns <em>without</em> an explicit precision require a single parameter, <code>$decimal_places</code>, when calling the <code>prepare</code> and <code>encode</code> methods. Floating point columns <em>with</em> an explicit precision can optionally pass an integer for <code>$decimal_places</code>.
</p>
<pre class="block php"><code>echo $user-&gt;prepareMembershipFee(2);</code></pre>

<h4 id="fActiveRecord-docs-StringColumns">String Columns</h4>

<p>
Columns that are string columns (<code>VARCHAR</code>, <code>CHAR</code> and <code>TEXT</code>) can optionally pass <code>TRUE</code> to their <code>prepare</code> and <code>encode</code> methods to cause all email addresses and website addresses to be converted to HTML links and to cause content without block-level HTML to have newline characters converted to <code>&lt;br /&gt;</code> tags.
</p>
<pre class="block php"><code>echo $user-&gt;prepareEmail(TRUE);
echo $user-&gt;prepareProfile(TRUE);</code></pre>

<h4 id="fActiveRecord-docs-AllColumns">All Columns</h4>

<p>
Every column has an <code>inspect</code> method that will return an associative array of data about the column. It is also possible to retrieve a single value by passing the optional parameter, <code>$element</code>.
</p>
<pre class="block php"><code>$column_info = $user-&gt;inspectFirstName();
$max_length  = $user-&gt;inspectFirstName('max_length');</code></pre>

<h3 id="fActiveRecord-docs-ColumnValuesandObjects">Column Values and Objects</h3>

<p>
The fActiveRecord class supports storing both scalar values (strings, integers, booleans, etc) and objects in columns. The only special consideration with storing objects in columns is that they should have a <code>__toString()</code> method so that they can be converted to a scalar to be saved in the database.
</p>

<p>
All of the Flourish <a href="#ValueObjects-docs">value objects</a> include such a <code>__toString()</code> method, making them work perfectly with fActiveRecord. In fact, fActiveRecord even loads <code>date</code>, <code>time</code> and <code>timestamp</code> columns out of the database into <a href="#fDate">fDate</a>, <a href="#fTime">fTime</a> and <a href="#fTimestamp">fTimestamp</a> objects respectively. Nothing needs to be called or configured to enable this functionality. Thus, when getting <code>date</code>, <code>time</code> or <code>timestamp</code> values from a record, be sure to treat them as <a href="#fDate">fDate</a>, <a href="#fTime">fTime</a> and <a href="#fTimestamp">fTimestamp</a> objects.
</p>
<pre class="block php"><code>// Chaining the fDate::format() method off of the get method
echo $user-&gt;getDateCreated()-&gt;format('n/j/y');

// Objects can be stored in a column as long as they have a __toString() method
$user-&gt;setLastLoginTimestamp(new fTimestamp());</code></pre>

<h3 id="fActiveRecord-docs-RecordOperations">Record Operations</h3>

<p>
The following methods allow manipulation of an active record object:
</p>
<table><tbody>
<tr>
<td><strong>Method</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td><a href="#fActiveRecord-api-store"><code>store()</code></a></td>
<td>Performs <a href="#fActiveRecord-api-validate"><code>validate()</code></a> and then executes an <code>INSERT</code> or <code>UDPATE</code> query</td>
</tr>
<tr>
<td><a href="#fActiveRecord-api-validate"><code>validate()</code></a></td>
<td>Ensures a record can be successfully saved to the database without actually doing it</td>
</tr>
<tr>
<td><a href="#fActiveRecord-api-delete"><code>delete()</code></a></td>
<td>Deletes a record from the database</td>
</tr>
<tr>
<td><a href="#fActiveRecord-api-load"><code>load()</code></a></td>
<td>Reloads a records values from the database</td>
</tr>
<tr>
<td><a href="#fActiveRecord-api-populate"><code>populate()</code></a></td>
<td>Values from the HTTP request will automatically be set to the various columns of the record</td>
</tr>
<tr>
<td><a href="#fActiveRecord-api-replicate"><code>replicate()</code></a> / <code>clone</code></td>
<td>Creates a copy of the record, cloning all contained objects and removing any auto incrementing primary key, can also replicate related records</td>
</tr>
<tr>
<td><a href="#fActiveRecord-api-exists"><code>exists()</code></a></td>
<td>Indicates if a record has already been stored in the database</td>
</tr>
<tr>
<td><a href="#fActiveRecord-api-reflect"><code>reflect()</code></a></td>
<td>Returns a string containing the method signature for every method of the record</td>
</tr>
</tbody></table>

<h4 id="fActiveRecord-docs-store">store()</h4>

<p>
The <a href="#fActiveRecord-api-store"><code>store()</code></a> method will ensure that the record can be properly saved in the database and will store it there. If any errors are found, an <a href="#fValidationException">fValidationException</a> will be thrown with a message that is suitable for display to end users. The validation is performed by <code>store()</code> calling <a href="#fActiveRecord-api-validate"><code>validate()</code></a>.
</p>

<p>
<code>store()</code> will also automatically begin a database and filesystem transaction if they are not already in progress. This allows database and filesystem actions to be performed in extending code and child objects without the need to keep track of changes manually and revert them.
</p>
<pre class="block php"><code>try {
    $user = new User();
    $user-&gt;setFirstName('Will');
    $user-&gt;setLastName('Bond');
    $user-&gt;store();

} catch (fExpectedException $e) {
    echo $e-&gt;printMessage();
}</code></pre>

<p>
 There is a single optional parameter, <code>$force_cascade</code>, that affects how related records in one-to-many and one-to-one relationships are stored. <em>See the <a href="#fActiveRecord-docs-RelatedRecordsOperations">Related Records Operations</a> section for more details about how related records can be accessed and manipulated.</em>
</p>

<p>
If related records (which we will call child records) have been set via an <code>associate</code> or <code>populate</code> method, and one or more of the original child records is no longer associated, and that child records has child records (grandchildren of the original) with an <code>ON DELETE RESTRICT</code> or <code>ON DELETE NO ACTION</code> clause in the <code>FOREIGN KEY</code> constraint, that child and the associated grandchildren records will all be deleted anyway. Normally an exception would be thrown indicating the child to be deleted had a grandchild record referencing it.
</p>

<p>
By default this parameter is set to <code>FALSE</code> to obey the restrictions in the database schema.
</p>
<pre class="block php"><code>$user-&gt;populateFakeRelatedRecords();
$user-&gt;store(TRUE);</code></pre>

<p>
 This forced cascade effect is accomplished by first finding the related records and explicitly deleting them before the originally associated record.
</p>

<h4 id="fActiveRecord-docs-validate">validate()</h4>

<p>
Validation of a record is performed based on the database schema and any additional validation rules set via the <a href="#fORMValidation">fORMValidation</a> class, ORM plugins and <a href="#fORM">fORM</a> hooks.
</p>

<h5 id="fActiveRecord-docs-WhatisValidated">What is Validated</h5>

<p>
The following rules are used to determine if a record is valid to store in the database:
</p>

<ol>
<li>All data must be compatible with the data type of the column it is being stored in</li>
<li>If a column has a <code>NOT NULL</code> constraint and does not have a <code>DEFAULT</code> value, a value other than an empty string must be set</li>
<li>If a value has a <code>FOREIGN KEY</code> constraint, the value must reference a valid value</li>
<li>If a column has a <code>UNIQUE</code> or <code>PRIMARY KEY</code> contraint, the value must be <code>NULL</code> or unique</li>
<li>If a column has a <code>CHECK</code> constraint with an <code>IN (...)</code> expression, the value must be in the list - for MySQL this holds true for <code>ENUM</code> columns</li>
<li>If a column is a <code>VARCHAR</code> or <code>CHAR</code> column, the value string length must be less than or equal to the size of the column</li>
</ol>

<p>
If any of these validation checks do not work out, an <a href="#fValidationException">fValidationException</a> will be thrown contains an error message suitable for end users.
</p>

<p>
There are many additional validation rules that can be added to a record via <a href="#fORMValidation">fORMValidation</a>. If the desired functionality is not available via <a href="#fORMValidation">fORMValidation</a>, an ORM hook can be used. Please see the <a href="#fORM-docs-AddingFunctionalitytofActiveRecord">Adding Functionality to fActiveRecord</a> and <a href="#fORM-docs-CustomValidationUsingaHook">Custom Validation Using a Hook</a> section of the <a href="#fORM">fORM</a> page for details and example code.
</p>

<p>
Many of the various ORM plugins that come with Flourish (<a href="#fORMColumn">fORMColumn</a>, <a href="#fORMDate">fORMDate</a>, <a href="#fORMFile">fORMFile</a>, <a href="#fORMMoney">fORMMoney</a> and <a href="#fORMOrdering">fORMOrdering</a>) add additional validation rules.
</p>

<h5 id="fActiveRecord-docs-Usage">Usage</h5>

<p>
Since this method is automatically called when executing <a href="#fActiveRecord-api-store"><code>store()</code></a>, it will typically only be called in situations where storing is not possible, such as multi-page forms.
</p>
<pre class="block php"><code>try {
    // ...
    $user-&gt;validate();

} catch (fValidationException $e) {
    echo $e-&gt;printMessage();
}</code></pre>

<p>
 It is also possible to return an array of errors by passing <code>TRUE</code> to the first parameter of <a href="#fActiveRecord-api-validate"><code>validate()</code></a>, <code>$return_messages</code>. This prevents an exception from being thrown.
</p>
<pre class="block php"><code>$errors = $user-&gt;validate(TRUE);</code></pre>

<p>
 The returned array will have keys in the following format with the value being the error message.
</p>

<ul>
<li>Errors involving a single column: the key will be the database column name</li>
<li>Errors involving multiple columns: the key will be the database column names joined by <code>,</code></li>
<li>Errors involving related tables: the key will be the related table name</li>
<li>Errors involving columns in one-to-one related tables: the key will be the related table name ollowed by <code>::</code> followed by the column name (or column names joined by <code>,</code>)</li>
<li>Errors involving columns in one-to-many related tables: the key will be the related table name followed by <code>[</code> followed by the zero-based record number, followed by <code>]</code>. The value of this key will be an associative array containing two keys, name and errors. The name key will have a user-friendly name for the related record and the errors key will contain an array of error messages for the related record.</li>
</ul>

<p>
Below is an example of a returned array:
</p>
<pre class="block php"><code>array(
    // Regular columns in the users table
    'first_name'        =&gt; 'First Name: Please enter a value',
    'last_name'         =&gt; 'Last Name: Please enter a value',
    // A message involving multiple columns, from fORMValidate::addOneOrMoreRule()
    'email,phone'       =&gt; 'Email, Phone: Please enter at least one',
    // A message from fORMValidate::addManyToManyRule()
    'groups'            =&gt; 'Groups: Please select at least one',
    // A message from the bio column in the one-to-one related user_details table
    'user_details::bio' =&gt; 'User Details Bio: Please enter a value',
    // Messages from one-to-many related favorites table
    'favorites[0]'      =&gt; array(
        'name'   =&gt; 'Favorite #1',
        'errors' =&gt; array(
            'name' =&gt; 'Name: Please enter a value'
        )
    ),
    'favorites[2]'      =&gt; array(
        'name'   =&gt; 'Favorite #3',
        'errors' =&gt; array(
            'name' =&gt; 'Name: Please enter a value'
        )
    )
);</code></pre>

<p>
 <em>If you are interested in changing the <code>name</code> of a one-to-many child record, please see the <a href="#fORMRelated">fORMRelated</a> section <a href="#fORMRelated-docs-OverridingChildRecordValidationNames">Overriding Child Record Validation Names</a>.</em>
</p>

<p>
When passing <code>TRUE</code> to <code>$return_messages</code>, it is also possible to pass <code>TRUE</code> to the second parameter, <code>$remove_column_names</code>. This will remove the names of the columns from the error messages themselves, leaving the array with the regular keys, but anonymous messages useful for inclusion next to inputs.
</p>
<pre class="block php"><code>$errors = $user-&gt;validate(TRUE, TRUE);</code></pre>

<p>
 The returned array would look like:
</p>
<pre class="block php"><code>array(
    // Regular columns in the users table
    'first_name'        =&gt; 'Please enter a value',
    'last_name'         =&gt; 'Please enter a value',
    // A message involving multiple columns, from fORMValidate::addOneOrMoreRule()
    'email,phone'       =&gt; 'Please enter at least one',
    // A message from fORMValidate::addManyToManyRule()
    'groups'            =&gt; 'Please select at least one',
    // A message from the bio column in the one-to-one related user_details table
    'user_details::bio' =&gt; 'Please enter a value',
    // Messages from one-to-many related favorites table
    'favorites[0]'      =&gt; array(
        'name'   =&gt; 'Favorite #1',
        'errors' =&gt; array(
            'name' =&gt; 'Please enter a value'
        )
    ),
    'favorites[2]'      =&gt; array(
        'name'   =&gt; 'Favorite #3',
        'errors' =&gt; array(
            'name' =&gt; 'Please enter a value'
        )
    )
);</code></pre>

<h4 id="fActiveRecord-docs-delete">delete()</h4>

<p>
The <a href="#fActiveRecord-api-delete"><code>delete()</code></a> method will remove the record from the database. Obviously, any cascading <code>FOREIGN KEY</code> constraints could cause other records to be deleted as well. This method will throw an <a href="#fValidationException">fValidationException</a> if the record is referenced by another record via a <code>FOREIGN KEY</code> constraint with an <code>ON DELETE RESTRICT</code> or <code>ON DELETE NO ACTION</code> clause.
</p>
<pre class="block php"><code>try {
    $user-&gt;delete();
} catch (fValidationException $e) {
    echo $e-&gt;printMessage();
}</code></pre>

<p>
 There is an optional parameter, <code>$force_cascade</code>, that when set to <code>TRUE</code> will delete all records that reference the record being deleted, even if they have an <code>ON DELETE RESTRICT</code> or <code>ON DELETE NO ACTION</code> clause in the <code>FOREIGN KEY</code> constraint. By default this is set to <code>FALSE</code> to obey the restrictions in the database schema.
</p>
<pre class="block php"><code>$user-&gt;delete(TRUE);</code></pre>

<p>
 This is accomplished by first finding the related records and explicitly deleting them before the original record.
</p>

<h4 id="fActiveRecord-docs-load">load()</h4>

<p>
The <a href="#fActiveRecord-api-load"><code>load()</code></a> method causes the values for the record to be reloaded from the database, overwriting any values that have been changed since the object was first loaded.
</p>
<pre class="block php"><code>$user = new User(3);
$user-&gt;setFirstName('Joe');

// Reset the first name
$user-&gt;load();</code></pre>

<h4 id="fActiveRecord-docs-populate">populate()</h4>

<p>
The <a href="#fActiveRecord-api-populate"><code>populate()</code></a> method sets the values for a record from the fields and value contained in an HTTP request. For values to be pulled from the request, the HTML field names should be exactly the same as the database column names. Values from the form that are a blank strings are automatically converted to <code>NULL</code>.
</p>

<p>
The following HTML form when combined with the <code>populate()</code> method would cause the <code>first_name</code>, <code>last_name</code> and <code>email</code> column values to be set:
</p>
<pre class="block html"><code>&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;
    &lt;fieldset&gt;
        &lt;p&gt;
            &lt;label for=&quot;first_name&quot;&gt;First Name&lt;/label&gt;
            &lt;input type=&quot;text&quot; id=&quot;first_name&quot; name=&quot;first_name&quot; /&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;label for=&quot;last_name&quot;&gt;Last Name&lt;/label&gt;
            &lt;input type=&quot;text&quot; id=&quot;last_name&quot; name=&quot;last_name&quot; /&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;label for=&quot;email&quot;&gt;Email&lt;/label&gt;
            &lt;input type=&quot;text&quot; id=&quot;email&quot; name=&quot;email&quot; /&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;input type=&quot;submit&quot; value=&quot;Save&quot; /&gt;
        &lt;/p&gt;
    &lt;/fieldset&gt;
&lt;/form&gt;</code></pre>
<pre class="block php"><code>try {
    $user = new User();

    // This will set first_name, last_name and email
    $user-&gt;populate();
    $user-&gt;store();

} catch (fExpectedException $e) {
    echo $e-&gt;printMessage();
}</code></pre>

<h5 id="fActiveRecord-docs-BlankStrings">Blank Strings</h5>

<p>
By default, <a href="#fActiveRecord-api-populate"><code>populate()</code></a> calls the individual <code>set</code> methods for each column in a record. This ensures that overridden methods are correctly called. The <code>set</code> methods in fActiveRecord will by default convert an empty string value <code>''</code> to <code>NULL</code>. This treats empty HTML form input as if the user entered nothing.
</p>

<p>
Blank strings can be stored in a database columninstead of <code>NULL</code> by setting the column to <code>NOT NULL</code> and <code>DEFAULT ''</code>. When fActiveRecord finds a <code>NOT NULL</code> column with a <code>NULL</code> value and a non-<code>NULL</code> default, the default is substituted in place of the <code>NULL</code>.
</p>

<h5 id="fActiveRecord-docs-Checkboxes">Checkboxes</h5>

<p>
When using checkboxes in forms to be populated, it is best to preceed the checkbox input with a hidden input using the same name but a <code>FALSE</code> value. This way, if the checkbox is unchecked, PHP gets the value from the hidden input, changing the column to a <code>FALSE</code> value. When the checkbox is checked, PHP gets the value from the checkbox input, changing the column to a <code>TRUE</code> value.
</p>
<pre class="block html"><code>&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;
    &lt;fieldset&gt;
        &lt;p&gt;
            &lt;input type=&quot;hidden&quot; name=&quot;enroll_me&quot; value=&quot;0&quot; /&gt;
            &lt;label for=&quot;enroll_me&quot;&gt;Enroll Me&lt;/label&gt;
            &lt;input type=&quot;checkbox&quot; id=&quot;enroll_me&quot; name=&quot;enroll_me&quot; value=&quot;1&quot; /&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;input type=&quot;submit&quot; value=&quot;Save&quot; /&gt;
        &lt;/p&gt;
    &lt;/fieldset&gt;
&lt;/form&gt;</code></pre>

<p>
 Please note that there <strong><em>IS</em></strong> a difference between setting the hidden input to a blank string value and a <code>FALSE</code> value such as <code>0</code>. As mentioned in the previous section, empty strings are converted to <code>NULL</code>, whereas a value such as <code>0</code> or <code>false</code> would not be.
</p>

<p>
Certain <a href="#fORMValidation">fORMValidation</a> methods check to see if a column has a non-null value. If an empty string is used for the hidden input, the validation method would see that no value has been selected. If a non-null false value is used, the validation method would see that a non-null value has been selected. Depending on the requirements of the application, this distinction may be very important.
</p>

<h4 id="fActiveRecord-docs-replicateclone">replicate() / clone</h4>

<p>
The <a href="#fActiveRecord-api-replicate"><code>replicate()</code></a> method, passed no parameters is equivalent to a record being cloned. When an fActiveRecord object is cloned, all values and cache entries are copied (or cloned if the value is an object), all related records and old values are purged, any auto incrementing primary keys are erased and the record is changed to look as though it does not yet exist in the database.
</p>
<pre class="block php"><code>$user = new User(1);

// Both $user2 and $user3 will have no $user_id and will return FALSE from -&gt;exists()
$user2 = clone $user;
$user3 = $user-&gt;replicate();</code></pre>

<p>
 It is also possible to replicate related records along with a record by passing plural class names into <a href="#fActiveRecord-api-replicate"><code>replicate()</code></a>. There may be any number of class names and the classes must be for related records that are in a many-to-many or one-to-many relationship with the record. Below is an example of replicating a user and including all of their group memberships and favorites (see <a href="#fActiveRecord-docs-RelatedRecordsOperations">Related Records Operations</a> for the database schema).
</p>
<pre class="block php"><code>$user     = new User(1);
$new_user = $user-&gt;replicate('Groups', 'Favorites');</code></pre>

<p>
 If a record is has more than one relationship route to the related record class, the route should be specified between curly braces (<code>{</code> and <code>}</code>), like below:
</p>
<pre class="block php"><code>$user     = new User(1);
$new_user = $user-&gt;replicate('Resources{read_permissions}');</code></pre>

<h4 id="fActiveRecord-docs-exists">exists()</h4>

<p>
The <a href="#fActiveRecord-api-exists"><code>exists()</code></a> method simply returns a boolean indicating if the record was loaded from the database.
</p>
<pre class="block php"><code>if (!$user-&gt;exists()) {
    $user-&gt;sendWelcomeEmail();
}</code></pre>

<p>
 This function is mostly useful when dealing with an object in a different scope than that which it was created. For instance, checking a record that has been passed into a function or an <a href="#fORM-docs-AddingFunctionalitytofActiveRecord">fActiveRecord hook callback</a>.
</p>

<h5 id="fActiveRecord-docs-Warning">Warning</h5>

<p>
Please note that this only checks to see if the object was constructed by passing a primary or unique key into the constructor. It can <strong>not</strong> be used with <code>set</code> methods to check and see if a record exists in the database.
</p>

<p>
<strong>The following code will NOT check to see if a user with the id 3 exists in the database.</strong> This call to exists will always return <code>FALSE</code> since the object was constructed without any parameters.
</p>
<pre class="block php"><code>$user = new User();
$user-&gt;setUserId(3);
if ($user-&gt;exists()) {
    // 
}</code></pre>

<p>
 The proper way to check if a record exists in the database is to try and create an instance, catching an fNotFoundException:
</p>
<pre class="block php"><code>try {
    $user = new User(3);
} catch (fNotFoundException $e) {
    // 
}</code></pre>

<p>
 From a technical perspective, for the first example to work, fActiveRecord object would have to have a mutable identity, meaning the object would change what row it represented over its lifetime. This would likely cause many other unintended side effect in common code.
</p>

<h4 id="fActiveRecord-docs-reflect">reflect()</h4>

<p>
Since fActiveRecord classes have dynamic functionality based on the structure of a database table, sometimes it can be useful to check and see what exactly is available for a specific class. The <a href="#fActiveRecord-api-reflect"><code>reflect()</code></a> method returns a preformatted text block containing the method signature for every method, concrete and dynamic, in the class.
</p>
<pre class="block php"><code>echo '&lt;pre&gt;' . $user-&gt;reflect() . '&lt;/pre&gt;';</code></pre>

<p>
 would output something like
</p>
<pre><code>public function getFirstName();

public function setFirstName($first_name);

public function prepareFirstName();

public function encodeFirstName();

public function inspectFirstName($element=NULL);</code></pre>

<p>
 It is also possible to pass a <code>TRUE</code> parameter to <code>reflect()</code> to also return the PHPDoc doc block for a method.
</p>
<pre class="block php"><code>
// Request the PHPDoc doc block too
echo $user-&gt;reflect(TRUE);</code></pre>

<h3 id="fActiveRecord-docs-RelatedRecordsOperations">Related Records Operations</h3>

<p>
One of the useful features of fActiveRecord is that it automatically finds all related tables in a database schema by looking at <code>FOREIGN KEY</code> constraints. Absolutely no configuration is needed in the class.
</p>

<p>
The following tables definitions will be used for the examples below and are purposefully simple to help focus on the features, not the SQL.
</p>
<pre class="block sql"><code>CREATE TABLE groups (
    name VARCHAR(100) PRIMARY KEY
);

CREATE TABLE users (
    user_id SERIAL PRIMARY KEY,
    email VARCHAR(100) NOT NULL UNIQUE,
    password VARCHAR(100) NOT NULL,
    first_name VARCHAR(100) NOT NULL,
    last_name VARCHAR(100) NOT NULL
);

CREATE TABLE user_details (
    user_id INTEGER PRIMARY KEY REFERENCES users(user_id) ON DELETE CASCADE,
    photo VARCHAR(255) NOT NULL
);

CREATE TABLE users_groups (
    group VARCHAR(100) NOT NULL REFERENCES groups(name) ON DELETE CASCADE,
    user_id INTEGER NOT NULL REFERENCES users(user_id) ON DELETE CASCADE,
    PRIMARY KEY (group, user_id)
);

CREATE TABLE favorites (
    favorite_id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL REFERENCES users(user_id) ON DELETE CASCADE,
    url VARCHAR(255) NOT NULL
);

CREATE TABLE resources (
    resource_id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    owner INTEGER NOT NULL REFERENCES users(user_id) ON DELETE RESTRICT
);

CREATE TABLE read_permissions (
    resource_id INTEGER NOT NULL REFERENCES resources(resource_id) ON DELETE CASCADE,
    user_id INTEGER NOT NULL REFERENCES users(user_id) ON DELETE CASCADE,
    PRIMARY KEY (resource_id, user_id)
);</code></pre>

<p>
 For the sake of the examples below, assume that the following classes have been defined to extend fActiveRecord:
</p>
<pre><code>Favorite
Group
Resource
User
UserDetail</code></pre>

<p>
 Where there are multiple relationships between two table, such as from <code>users</code> to <code>resources</code>, fActiveRecord contains optional parameters for all related record methods that allows the proper <a href="#OrmConventions#RelationshipRoutes-docs">relationship route</a> to be specified. For details, please see the <a href="#fActiveRecord-docs-RelationshipRoutes">Relationship Routes</a> section.
</p>

<p>
The detection of related tables allows for the following functionality to be provided:
</p>

<h4 id="fActiveRecord-docs--to-oneRelationships">*-to-one Relationships</h4>

<p>
When a column in a table contains a <code>FOREIGN KEY</code> constraint to another table, the two tables are in either a many-to-one or one-to-one relationship. The relationship would only be one-to-one if there was a <code>UNIQUE</code> constraint on the column with the <code>FOREIGN KEY</code>.
</p>

<p>
For instance, the <code>resources</code> table references the <code>users</code> table via the <code>owner</code> column. Because this <code>FOREIGN KEY</code> exists, it is possible to call a <code>create</code> action to instantiate the related <code>User</code> object if one exists, or an empty <code>User</code> object if none exists.
</p>
<pre class="block php"><code>$resource = new Resource(1);
$user = $resource-&gt;createUser();</code></pre>

<p>
 <em>See <a href="#MethodNaming-docs">Method Naming</a> for info about <code>create</code> and other method verbs.</em>
</p>

<h5 id="fActiveRecord-docs-One-to-oneRelationships">One-to-one Relationships</h5>

<p>
Since the <code>user_details</code> table references the <code>user_id</code> as a <code>PRIMARY KEY</code>, there can only be a single <code>user_details</code> record for each entry in <code>users</code>. This makes it a one-to-one relationship. For one-to-one relationships, it is also possible to call the <a href="#fActiveRecord-docs-Populating"><code>populate</code></a> and <a href="#fActiveRecord-docs-BuildingListingCountingandHas"><code>has</code></a> actions just like *-to-many relationships. When working with one-to-one relationships, the related record name is singular rather than plural.
</p>
<pre class="block php"><code>$user = new User(1);
$user-&gt;populateUserDetail();</code></pre>
<pre class="block php"><code>if ($user-&gt;hasUserDetail()) {
    // 
}</code></pre>

<h4 id="fActiveRecord-docs--to-manyRelationships">*-to-many Relationships</h4>

<p>
When a column is referenced by a <code>FOREIGN KEY</code> constraint in another table, the two tables involved will end up being in either a one-to-many or many-to-many relationship. Many-to-many relationships happen when a <a href="#OrmConventions#JoiningTables-docs">joining table</a> is used and the <code>FOREIGN KEY</code> constraints live in the joining table.
</p>

<p>
For the examples below the one-to-many relationship between the <code>users</code> table and the <code>favorites</code> table will be used along with the many-to-many relationship between the <code>users</code> and <code>groups</code> tables.
</p>

<h5 id="fActiveRecord-docs-BuildingListingCountingandHas">Building, Listing, Counting and Has</h5>

<p>
Each user on the system can have multiple favorites simply by creating new favorites and having each one reference the same user. The <code>build</code> action will create an <a href="#fRecordSet">fRecordSet</a> of all records in such a relationship:
</p>
<pre class="block php"><code>$favorites = $user-&gt;buildFavorites();</code></pre>

<p>
 The <code>$favorites</code> record set may be empty, or it may contain quite a number of records.
</p>

<p>
In situations where the related records dont need to be created, but a primary key will suffice, it is also possible to <code>list</code> related records. This will return an array of related primary keys.
</p>
<pre class="block php"><code>$favorite_ids = $user-&gt;listFavorites();</code></pre>

<p>
 The <code>count</code> action can be called for any related record and it will return the number of related records.
</p>
<pre class="block php"><code>$number_of_favorites = $user-&gt;countFavorites();</code></pre>

<p>
 If a number of records is not required, but just that related records exist, the <code>has</code> action can be used.
</p>
<pre class="block php"><code>if ($user-&gt;hasFavorites()) {
    // 
}</code></pre>

<p>
 Both one-to-many and many-to-many relationships support the <code>build</code>, <code>count</code>, <code>list</code> and <code>has</code> actions.
</p>

<h5 id="fActiveRecord-docs-Associating">Associating</h5>

<p>
In many-to-many relationships, both types of records can exist without directly referencing each other. Thus often it is necessary to take one set of records and associate it with a specific record. The <code>associate</code> action will do this, such as below where a user is being associated with every group.
</p>
<pre class="block php"><code>$groups = fRecordSet::build('Group');
$user-&gt;associateGroups($groups);
$user-&gt;store();</code></pre>

<p>
 <code>associate</code> methods will accept an <a href="#fRecordSet">fRecordSet</a>, an array of fActiveRecord objects or an array of primary keys. <em>It is also possible to call <code>associate</code> methods to associate records in a one-to-many relationship, however the <code>link</code> action discussed next only works with many-to-many relationships.</em>
</p>

<p>
It is also possible to parse associations from the fields in an HTTP request. In that situation the HTML form fields must be named in the format <code>{plural_underscore_related_class}::{foreign_column}[]</code>. The <code>link</code> action will grab values from the HTTP request and use them for associating records in a many-to-many relationship.
</p>
<pre class="block html"><code>&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;
    &lt;fieldset&gt;
        &lt;p&gt;
            &lt;label for=&quot;first_name&quot;&gt;First Name&lt;/label&gt;
            &lt;input type=&quot;text&quot; id=&quot;first_name&quot; name=&quot;first_name&quot; /&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;label for=&quot;last_name&quot;&gt;Last Name&lt;/label&gt;
            &lt;input type=&quot;text&quot; id=&quot;last_name&quot; name=&quot;last_name&quot; /&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;label for=&quot;email&quot;&gt;Email&lt;/label&gt;
            &lt;input type=&quot;text&quot; id=&quot;email&quot; name=&quot;email&quot; /&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;label for=&quot;group_a&quot;&gt;Group A&lt;/label&gt;
            &lt;input type=&quot;checkbox&quot; id=&quot;group_a&quot; name=&quot;groups::name[]&quot; value=&quot;Group A&quot; /&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;label for=&quot;group_b&quot;&gt;Group B&lt;/label&gt;
            &lt;input type=&quot;checkbox&quot; id=&quot;group_b&quot; name=&quot;groups::name[]&quot; value=&quot;Group B&quot; /&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;label for=&quot;group_c&quot;&gt;Group C&lt;/label&gt;
            &lt;input type=&quot;checkbox&quot; id=&quot;group_c&quot; name=&quot;groups::name[]&quot; value=&quot;Group C&quot; /&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;input type=&quot;submit&quot; value=&quot;Save&quot; /&gt;
        &lt;/p&gt;
    &lt;/fieldset&gt;
&lt;/form&gt;</code></pre>
<pre class="block php"><code>$user-&gt;linkGroups();
$user-&gt;store();</code></pre>

<p>
 Please note that <a href="#fActiveRecord-api-store"><code>store()</code></a> must be called to actually save the new relationships between the two tables.
</p>

<h5 id="fActiveRecord-docs-Populating">Populating</h5>

<p>
For records that have &quot;child&quot; object in one-to-many relationships, the <code>populate</code> action will call the <a href="#fActiveRecord-api-populate"><code>populate()</code></a> method for each of a list of related records. In addition, when <a href="#fActiveRecord-api-store"><code>store()</code></a> is called on the master record, all of the child records will be saved too.
</p>

<p>
Below is an example of the kind of HTML form that is needed for creating and populating child objects. Normally the HTML for the child object would be added and removed from the page on the fly using javascript, otherwise the <a href="#fActiveRecord-api-validate"><code>validate()</code></a> method from a child object could stop the records from being saved when a child objects values are not complete. The initial printing of the HTML form elements is normally handled server side by iterating trough the <a href="#fRecordSet">fRecordSet</a> of related records.
</p>

<p>
Each set of inputs for child object should always contain the <code>PRIMARY KEY</code> column and the column with the <code>FOREIGN KEY</code> constraint that references this table. Any other columns should only be included if new data is desired.
</p>

<p>
Each input for a related record needs to be prefixed with the plural <code>underscore_notation</code> version of the class name plus <code>::</code>. In addition, each input should use array syntax at the end with a key shared for all inputs of the same record. The key can be any number or string, but must be the same for each input of the record. The example below uses <code>0</code>, <code>1</code> and <code>2</code> as a simple example.
</p>
<pre class="block html"><code>&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;
    &lt;fieldset&gt;
        &lt;p&gt;
            &lt;label for=&quot;first_name&quot;&gt;First Name&lt;/label&gt;
            &lt;input type=&quot;text&quot; id=&quot;first_name&quot; name=&quot;first_name&quot; /&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;label for=&quot;last_name&quot;&gt;Last Name&lt;/label&gt;
            &lt;input type=&quot;text&quot; id=&quot;last_name&quot; name=&quot;last_name&quot; /&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;label for=&quot;email&quot;&gt;Email&lt;/label&gt;
            &lt;input type=&quot;text&quot; id=&quot;email&quot; name=&quot;email&quot; /&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;label for=&quot;fav_1&quot;&gt;Favorite #1&lt;/label&gt;
            &lt;input type=&quot;name&quot; id=&quot;fav_1&quot; name=&quot;favorites::url[0]&quot; value=&quot;&quot; /&gt;
            &lt;input type=&quot;hidden&quot; name=&quot;favorites::user_id[0]&quot; value=&quot;2&quot; /&gt;
            &lt;input type=&quot;hidden&quot; name=&quot;favorites::favorite_id[0]&quot; value=&quot;&quot; /&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;label for=&quot;fav_2&quot;&gt;Favorite #2&lt;/label&gt;
            &lt;input type=&quot;checkbox&quot; id=&quot;fav_2&quot; name=&quot;favorites::url[1]&quot; value=&quot;&quot; /&gt;
            &lt;input type=&quot;hidden&quot; name=&quot;favorites::user_id[1]&quot; value=&quot;2&quot; /&gt;
            &lt;input type=&quot;hidden&quot; name=&quot;favorites::favorite_id[1]&quot; value=&quot;&quot; /&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;label for=&quot;fav_3&quot;&gt;Favorite #3&lt;/label&gt;
            &lt;input type=&quot;checkbox&quot; id=&quot;fav_3&quot; name=&quot;favorites::url[2]&quot; value=&quot;C&quot; /&gt;
            &lt;input type=&quot;hidden&quot; name=&quot;favorites::user_id[2]&quot; value=&quot;2&quot; /&gt;
            &lt;input type=&quot;hidden&quot; name=&quot;favorites::favorite_id[2]&quot; value=&quot;&quot; /&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;input type=&quot;submit&quot; value=&quot;Save&quot; /&gt;
        &lt;/p&gt;
    &lt;/fieldset&gt;
&lt;/form&gt;</code></pre>

<p>
 The following PHP would actually create 3 <code>Favorite</code> objects and would set them to be saved when <a href="#fActiveRecord-api-store"><code>store()</code></a> is called on the <code>User</code> object.
</p>
<pre class="block php"><code>try {
    $user-&gt;populate();
    $user-&gt;populateFavorites();
    $user-&gt;store();

} catch (fExpectedException $e) {
    echo $e-&gt;printMessage();
}</code></pre>

<h4 id="fActiveRecord-docs-RelationshipRoutes">Relationship Routes</h4>

<p>
When there are multiple one-to-many, many-to-many or *-to-one relationships for two tables, the proper route must be specified when calling the various related record methods. The appropriate route name can be determined by viewing the <a href="#OrmConventions#RelationshipRoutes-docs">Relationship Routes</a> section of the <a href="#OrmConventions-docs">ORM Conventions</a> page.
</p>

<p>
Routes can be specified in any of the following methods even if only one route exists, however that route will be automatically detected if not specified.
</p>

<p>
The <code>build</code>, <code>count</code>, <code>create</code>, <code>link</code>, <code>list</code> and <code>populate</code> action methods all optionally accept the route as the first parameter.
</p>
<pre class="block php"><code>$record-&gt;createRelatedRecord('route');

$record-&gt;buildRelatedRecords('route');

$record-&gt;countRelatedRecords('route');

$record-&gt;linkRelatedRecords('route');

$record-&gt;listRelatedRecords('route');

$record-&gt;populateRelatedRecords('route');</code></pre>

<p>
 <code>associate</code> action methods optionally accept the route as the second parameter.
</p>
<pre class="block php"><code>$record-&gt;associateRelatedRecords($related_records, 'route');</code></pre>

<p>
 When working with relationship routes in HTML forms, the relationship route name should be enclosed in <code>{}</code> directly after the foreign table name. This applies to forms being used with both the <code>link</code> and <code>populate</code> actions. Below is an example of a form for selecting the resources related to a user:
</p>
<pre class="block html"><code>&lt;p&gt;
    &lt;input type=&quot;checkbox&quot; id=&quot;resource_1&quot; name=&quot;resources{read_permissions}::resource_id[]&quot; value=&quot;1&quot; /&gt;
    &lt;label for=&quot;resource_1&quot;&gt;Resource 1&lt;/label&gt;
&lt;/p&gt;
&lt;p&gt;
    &lt;input type=&quot;checkbox&quot; id=&quot;resource_2&quot; name=&quot;resources{read_permissions}::resource_id[]&quot; value=&quot;2&quot; /&gt;
    &lt;label for=&quot;resource_2&quot;&gt;Resource 2&lt;/label&gt;
&lt;/p&gt;</code></pre>

<h3 id="fActiveRecord-docs-Configuration">Configuration</h3>

<p>
As mentioned in the <a href="#fActiveRecord-docs-Setup">Setup section</a>, the instance method <a href="#fActiveRecord-api-configure"><code>configure()</code></a> is called once per script execution for each classes that extends fActiveRecord. This method is designed to be the preferred place to execute any configuration code for an active record class.
</p>
<pre class="block php"><code>class User extends fActiveRecord
{
    protected function configure()
    {
        // Configure the extra feature and overrides using the supporting ORM classes
    }
}</code></pre>

<p>
 The following classes provide methods that extends and change the way that fActiveRecord classes work. Each classs documentation page will include the necessary details on how to configure each bit of functionality and how it affects the standard use of active record classes.
</p>
<table><tbody>
<tr>
<td><strong><a href="#fORM">fORM</a></strong></td>
<td>Provides functionality to override database table to class mapping, change the names used for records and column and extends fActiveRecord and <a href="#fRecordSet">fRecordSet</a> through registering callbacks for various hooks</td>
</tr>
<tr>
<td><strong><a href="#fORMColumn">fORMColumn</a></strong></td>
<td>Allows changing the validation of columns to require email addresses or links, can configure columns to always create <a href="#fNumber">fNumber</a> objects when loaded or have a column filled with a random string the first time a record is saved</td>
</tr>
<tr>
<td><strong><a href="#fORMDate">fORMDate</a></strong></td>
<td>Can set columns to automatically save the date a record was created or last updated and can tie a timestamp column to another column to allow for saving timezones</td>
</tr>
<tr>
<td><strong><a href="#fORMFile">fORMFile</a></strong></td>
<td>Provides functionality to automatically handle file or image uploads, including options to automatically duplicate and manipulate images</td>
</tr>
<tr>
<td><strong><a href="#fORMJSON">fORMJSON</a></strong></td>
<td>Extends both fActiveRecord and <a href="#fRecordSet">fRecordSet</a> to have <code>toJSON()</code> methods</td>
</tr>
<tr>
<td><strong><a href="#fORMMoney">fORMMoney</a></strong></td>
<td>Can set columns to be loaded out of the database as <a href="#fMoney">fMoney</a> objects and can tie <a href="#fMoney">fMoney</a> columns to a second column to store currencies</td>
</tr>
<tr>
<td><strong><a href="#fORMOrdering">fORMOrdering</a></strong></td>
<td>Allows configuring a column (either individually or in a group of columns) as the arbitrary ordering column for a class</td>
</tr>
<tr>
<td><strong><a href="#fORMRelated">fORMRelated</a></strong></td>
<td>Provides functionality to set the order in which related records are returned or modify what they are called (in context)</td>
</tr>
<tr>
<td><strong><a href="#fORMValidation">fORMValidation</a></strong></td>
<td>Allows setting additional validation rules (including conditional, one-or-more, many-to-many, etc), set the order for validation messages and configure <code>UNIQUE</code> constraints as case-insensitive</td>
</tr>
</tbody></table>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fActiveRecord-api">fActiveRecord API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fActiveRecord">Class Documentation</a></li>
		<li><strong><a href="#fActiveRecord-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="protected variables static">
<h4><a href="#fActiveRecord-api-class_vars_static">Static Variables</a></h4>
<ul>
  	   	 		<li class="protected"><a href="#fActiveRecord-api-callback_cache">$callback_cache</a></li>
	   	 		<li class="protected"><a href="#fActiveRecord-api-configured">$configured</a></li>
	   	 		<li class="protected"><a href="#fActiveRecord-api-identity_map">$identity_map</a></li>
	   	 		<li class="protected"><a href="#fActiveRecord-api-method_name_cache">$method_name_cache</a></li>
	   	   	   	 		<li class="protected"><a href="#fActiveRecord-api-replicate_level">$replicate_level</a></li>
	   	 		<li class="protected"><a href="#fActiveRecord-api-replicate_map">$replicate_map</a></li>
	   	 		<li class="protected"><a href="#fActiveRecord-api-unescape_map">$unescape_map</a></li>
	   	   </ul>
</div>
<div class="protected variables">
<h4><a href="#fActiveRecord-api-class_vars">Variables</a></h4>
<ul>
  	 		<li class="protected"><a href="#fActiveRecord-api-cache">$cache</a></li>
	   	   	   	   	   	 		<li class="protected"><a href="#fActiveRecord-api-old_values">$old_values</a></li>
	   	 		<li class="protected"><a href="#fActiveRecord-api-related_records">$related_records</a></li>
	   	   	   	   	 		<li class="protected"><a href="#fActiveRecord-api-values">$values</a></li>
	   </ul>
</div>
<div class="methods static">
<h4><a href="#fActiveRecord-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  	  	  	  			<li class="protected"><a href="#fActiveRecord-api-assign">assign()</a></li>
	  			<li class="protected"><a href="#fActiveRecord-api-changed">changed()</a></li>
	  			<li class="protected"><a href="#fActiveRecord-api-checkClass">checkClass()</a></li>
	  			<li class="protected"><a href="#fActiveRecord-api-checkConditions">checkConditions()</a></li>
	  			<li><a href="#fActiveRecord-api-clearIdentityMap">clearIdentityMap()</a></li>
	  			<li class="protected"><a href="#fActiveRecord-api-compose">compose()</a></li>
	  	  	  	  	  	  	  	  			<li class="protected"><a href="#fActiveRecord-api-forceConfigure">forceConfigure()</a></li>
	  	  			<li class="protected"><a href="#fActiveRecord-api-hash">hash()</a></li>
	  			<li class="protected"><a href="#fActiveRecord-api-hasOld">hasOld()</a></li>
	  	  	  	  	  	  	  	  	  			<li class="protected"><a href="#fActiveRecord-api-reset">reset()</a></li>
	  			<li class="protected"><a href="#fActiveRecord-api-retrieveOld">retrieveOld()</a></li>
	  	  	  	  			<li class="protected"><a href="#fActiveRecord-api-validateClass">validateClass()</a></li>
	  </ul>
</div>
<div class="methods">
<h4><a href="#fActiveRecord-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fActiveRecord-api-__construct">__construct()</a></li>
	  			<li><a href="#fActiveRecord-api-__call">__call()</a></li>
	  			<li class="protected"><a href="#fActiveRecord-api-__clone">__clone()</a></li>
	  			<li class="protected"><a href="#fActiveRecord-api-__get">__get()</a></li>
	  			<li class="protected"><a href="#fActiveRecord-api-__wakeup">__wakeup()</a></li>
	  	  	  	  	  	  	  			<li class="protected"><a href="#fActiveRecord-api-configure">configure()</a></li>
	  			<li class="protected"><a href="#fActiveRecord-api-constructInsertParams">constructInsertParams()</a></li>
	  			<li class="protected"><a href="#fActiveRecord-api-constructUpdateParams">constructUpdateParams()</a></li>
	  			<li><a href="#fActiveRecord-api-delete">delete()</a></li>
	  			<li class="protected"><a href="#fActiveRecord-api-encode">encode()</a></li>
	  			<li><a href="#fActiveRecord-api-exists">exists()</a></li>
	  			<li class="protected"><a href="#fActiveRecord-api-fetchResultFromUniqueKey">fetchResultFromUniqueKey()</a></li>
	  	  			<li class="protected"><a href="#fActiveRecord-api-get">get()</a></li>
	  	  	  			<li class="protected"><a href="#fActiveRecord-api-inspect">inspect()</a></li>
	  			<li><a href="#fActiveRecord-api-load">load()</a></li>
	  			<li class="protected"><a href="#fActiveRecord-api-loadFromIdentityMap">loadFromIdentityMap()</a></li>
	  			<li class="protected"><a href="#fActiveRecord-api-loadFromResult">loadFromResult()</a></li>
	  			<li><a href="#fActiveRecord-api-populate">populate()</a></li>
	  			<li class="protected"><a href="#fActiveRecord-api-prepare">prepare()</a></li>
	  			<li><a href="#fActiveRecord-api-reflect">reflect()</a></li>
	  			<li><a href="#fActiveRecord-api-replicate">replicate()</a></li>
	  	  	  			<li class="protected"><a href="#fActiveRecord-api-set">set()</a></li>
	  			<li><a href="#fActiveRecord-api-store">store()</a></li>
	  			<li><a href="#fActiveRecord-api-validate">validate()</a></li>
	  	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fExpectedException">fExpectedException</a></li>
		<li><a href="#fGrammar">fGrammar</a></li>
		<li><a href="#fHTML">fHTML</a></li>
		<li><a href="#fNotFoundException">fNotFoundException</a></li>
		<li><a href="#fORM">fORM</a></li>
		<li><a href="#fORMDatabase">fORMDatabase</a></li>
		<li><a href="#fORMRelated">fORMRelated</a></li>
		<li><a href="#fORMSchema">fORMSchema</a></li>
		<li><a href="#fORMValidation">fORMValidation</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fRecordSet">fRecordSet</a></li>
		<li><a href="#fRequest">fRequest</a></li>
		<li><a href="#fUTF8">fUTF8</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fORMColumn">fORMColumn</a></li>
		<li><a href="#fORMDatabase">fORMDatabase</a></li>
		<li><a href="#fORMDate">fORMDate</a></li>
		<li><a href="#fORMFile">fORMFile</a></li>
		<li><a href="#fORMMoney">fORMMoney</a></li>
		<li><a href="#fORMOrdering">fORMOrdering</a></li>
		<li><a href="#fORMRelated">fORMRelated</a></li>
		<li><a href="#fORMValidation">fORMValidation</a></li>
		<li><a href="#fRecordSet">fRecordSet</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">abstract class</span>,
		<span class="version">v1.0.0b81</span></div>
<p class="short_description">An <a class="ext-link" href="http://en.wikipedia.org/wiki/Active_record_pattern"><span class="icon">active record pattern</span></a> base class</p>
<div class="description"><p>This class uses <a href="#fORMSchema">fORMSchema</a> to inspect your database and provides an  OO interface to a single database table. The class dynamically handles  method calls for getting, setting and other operations on columns. It also  dynamically handles retrieving and storing related records.</p></div>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b81</th><td>Fixed a bug with updating a record that contains only an auto-incrementing primary key <span class="date">9/6/11</span></td></tr><tr><th>1.0.0b80</th><td>Added support to checkCondition() for the <tt>^~</tt> and <tt>$~</tt> operators <span class="date">6/20/11</span></td></tr><tr><th>1.0.0b79</th><td>Fixed some bugs in handling relationships between PHP 5.3 namespaced classes <span class="date">5/26/11</span></td></tr><tr><th>1.0.0b78</th><td>Backwards Compatibility Break - <a href="#fActiveRecord-api-reflect"><tt>reflect()</tt></a> now returns an associative array instead of a string <span class="date">5/10/11</span></td></tr><tr><th>1.0.0b77</th><td>Fixed <a href="#fActiveRecord-api-inspect"><tt>inspect()</tt></a> to not throw an <a href="#fProgrammerException">fProgrammerException</a> when a valid element has a <tt>NULL</tt> value <span class="date">5/10/11</span></td></tr><tr><th>1.0.0b76</th><td>Added <a href="#fActiveRecord-api-clearIdentityMap"><tt>clearIdentityMap()</tt></a> <span class="date">5/9/11</span></td></tr><tr><th>1.0.0b75</th><td>Fixed a bug where child records of a record with a non-auto-incrementing primary key would not be saved properly for a new record <span class="date">12/6/10</span></td></tr><tr><th>1.0.0b74</th><td>Updated <a href="#fActiveRecord-api-populate"><tt>populate()</tt></a> to use the <tt>binary</tt> type for <a href="#fRequest-api-get"><tt>fRequest::get()</tt></a> <span class="date">11/30/10</span></td></tr><tr><th>1.0.0b73</th><td>Backwards Compatibility Break - changed column set methods to treat strings of all whitespace the same as empty string and convert them to <tt>NULL</tt> <span class="date">11/29/10</span></td></tr><tr><th>1.0.0b72</th><td>Added the new <tt>comment</tt> element to the reflection signature for <tt>inspect</tt> methods <span class="date">11/28/10</span></td></tr><tr><th>1.0.0b71</th><td>Updated class to use <a href="#fORM-api-getRelatedClass"><tt>fORM::getRelatedClass()</tt></a> <span class="date">11/24/10</span></td></tr><tr><th>1.0.0b70</th><td>Added support for PHP 5.3 namespaced <a href="#fActiveRecord">fActiveRecord</a> classes <span class="date">11/11/10</span></td></tr><tr><th>1.0.0b69</th><td>Backwards Compatibility Break - changed <a href="#fActiveRecord-api-validate"><tt>validate()</tt></a> to return a nested array of validation messages when there are validation errors on child records <span class="date">10/3/10</span></td></tr><tr><th>1.0.0b68</th><td>Added hooks to <a href="#fActiveRecord-api-replicate"><tt>replicate()</tt></a> <span class="date">9/7/10</span></td></tr><tr><th>1.0.0b67</th><td>Updated code to work with the new <a href="#fORM">fORM</a> API <span class="date">8/6/10</span></td></tr><tr><th>1.0.0b66</th><td>Fixed a bug with <a href="#fActiveRecord-api-store"><tt>store()</tt></a> and non-primary key auto-incrementing columns <span class="date">7/5/10</span></td></tr><tr><th>1.0.0b65</th><td>Fixed bugs with <a href="#fActiveRecord-api-inspect"><tt>inspect()</tt></a> making some <tt>min_value</tt> and <tt>max_value</tt> elements available for non-numeric types, fixed <a href="#fActiveRecord-api-reflect"><tt>reflect()</tt></a> to list the <tt>min_value</tt> and <tt>max_value</tt> elements <span class="date">6/8/10</span></td></tr><tr><th>1.0.0b64</th><td>BackwardsCompatibilityBreak - changed <a href="#fActiveRecord-api-validate"><tt>validate()</tt></a>'s returned messages array to have field name keys - added the option to <a href="#fActiveRecord-api-validate"><tt>validate()</tt></a> to remove field names from messages <span class="date">5/26/10</span></td></tr><tr><th>1.0.0b63</th><td>Changed how is_subclass_of() is used to work around a bug in 5.2.x <span class="date">4/6/10</span></td></tr><tr><th>1.0.0b62</th><td>Fixed a bug that could cause infinite recursion starting in v1.0.0b60 <span class="date">4/2/10</span></td></tr><tr><th>1.0.0b61</th><td>Fixed issues with handling <tt>populate</tt> actions when working with mapped classes <span class="date">3/31/10</span></td></tr><tr><th>1.0.0b60</th><td>Fixed issues with handling <tt>associate</tt> and <tt>has</tt> actions when working with mapped classes, added <a href="#fActiveRecord-api-validateClass"><tt>validateClass()</tt></a> <span class="date">3/30/10</span></td></tr><tr><th>1.0.0b59</th><td>Changed an extended UTF-8 arrow character into the correct <tt>-&gt;</tt> <span class="date">3/29/10</span></td></tr><tr><th>1.0.0b58</th><td>Fixed <a href="#fActiveRecord-api-reflect"><tt>reflect()</tt></a> to specify the value returned from <tt>set</tt> methods <span class="date">3/15/10</span></td></tr><tr><th>1.0.0b57</th><td>Added the <tt>post::loadFromIdentityMap()</tt> hook and fixed <a href="#fActiveRecord-api-__construct"><tt>__construct()</tt></a> to always call the <tt>post::__construct()</tt> hook <span class="date">3/14/10</span></td></tr><tr><th>1.0.0b56</th><td>Fixed <tt>$force_cascade</tt> in <a href="#fActiveRecord-api-delete"><tt>delete()</tt></a> to work even when the restricted relationship is once-removed through an unrestricted relationship <span class="date">3/9/10</span></td></tr><tr><th>1.0.0b55</th><td>Fixed <a href="#fActiveRecord-api-load"><tt>load()</tt></a> to that related records are cleared, requiring them to be loaded from the database <span class="date">3/4/10</span></td></tr><tr><th>1.0.0b54</th><td>Fixed detection of route name for one-to-one relationships in <a href="#fActiveRecord-api-delete"><tt>delete()</tt></a> <span class="date">3/3/10</span></td></tr><tr><th>1.0.0b53</th><td>Fixed a bug where related records with a primary key that contained a foreign key with an on update cascade clause would be deleted when changing the value of the column referenced by the foreign key <span class="date">12/17/09</span></td></tr><tr><th>1.0.0b52</th><td>Backwards Compatibility Break - Added the $force_cascade parameter to <a href="#fActiveRecord-api-delete"><tt>delete()</tt></a> and <a href="#fActiveRecord-api-store"><tt>store()</tt></a> - enabled calling <a href="#fActiveRecord-api-prepare"><tt>prepare()</tt></a> and <a href="#fActiveRecord-api-encode"><tt>encode()</tt></a> for non-column get methods, added <tt>::has{RelatedRecords}()</tt> methods <span class="date">12/16/09</span></td></tr><tr><th>1.0.0b51</th><td>Made <a href="#fActiveRecord-api-changed"><tt>changed()</tt></a> properly recognize that a blank string and NULL are equivalent due to the way that <a href="#fActiveRecord-api-set"><tt>set()</tt></a> casts values <span class="date">11/14/09</span></td></tr><tr><th>1.0.0b50</th><td>Fixed a bug with trying to load by a multi-column primary key where one of the columns was not specified <span class="date">11/13/09</span></td></tr><tr><th>1.0.0b49</th><td>Fixed a bug affecting where conditions with columns that are not null but have a default value <span class="date">11/3/09</span></td></tr><tr><th>1.0.0b48</th><td>Updated code for the new <a href="#fORMDatabase">fORMDatabase</a> and <a href="#fORMSchema">fORMSchema</a> APIs <span class="date">10/28/09</span></td></tr><tr><th>1.0.0b47</th><td>Changed <tt>::associate{RelatedRecords}()</tt>, <tt>::link{RelatedRecords}()</tt> and <tt>::populate{RelatedRecords}()</tt> to allow for method chaining <span class="date">10/22/09</span></td></tr><tr><th>1.0.0b46</th><td>Changed SQL statements to use value placeholders and identifier escaping <span class="date">10/22/09</span></td></tr><tr><th>1.0.0b45</th><td>Added support for <tt>!~</tt>, <tt>&amp;~</tt>, <tt>&gt;&lt;</tt> and OR comparisons to <a href="#fActiveRecord-api-checkConditions"><tt>checkConditions()</tt></a>, made object handling in <a href="#fActiveRecord-api-checkConditions"><tt>checkConditions()</tt></a> more robust <span class="date">9/21/09</span></td></tr><tr><th>1.0.0b44</th><td>Updated code for new <a href="#fValidationException">fValidationException</a> API <span class="date">9/18/09</span></td></tr><tr><th>1.0.0b43</th><td>Updated code for new <a href="#fRecordSet">fRecordSet</a> API <span class="date">9/16/09</span></td></tr><tr><th>1.0.0b42</th><td>Corrected a grammar bug in <a href="#fActiveRecord-api-hash"><tt>hash()</tt></a> <span class="date">9/9/09</span></td></tr><tr><th>1.0.0b41</th><td>Fixed a bug in the last version that would cause issues with classes containing a custom class to table mapping <span class="date">9/1/09</span></td></tr><tr><th>1.0.0b40</th><td>Added a check to the configuration part of <a href="#fActiveRecord-api-__construct"><tt>__construct()</tt></a> to ensure modelled tables have primary keys <span class="date">8/26/09</span></td></tr><tr><th>1.0.0b39</th><td>Changed <tt>set{ColumnName}()</tt> methods to return the record for method chaining, fixed a bug with loading by multi-column unique constraints, fixed a bug with <a href="#fActiveRecord-api-load"><tt>load()</tt></a> <span class="date">8/26/09</span></td></tr><tr><th>1.0.0b38</th><td>Updated <a href="#fActiveRecord-api-changed"><tt>changed()</tt></a> to do a strict comparison when at least one value is NULL <span class="date">8/17/09</span></td></tr><tr><th>1.0.0b37</th><td>Changed <a href="#fActiveRecord-api-__construct"><tt>__construct()</tt></a> to allow any Iterator object instead of just <a href="#fResult">fResult</a> <span class="date">8/12/09</span></td></tr><tr><th>1.0.0b36</th><td>Fixed a bug with setting NULL values from v1.0.0b33 <span class="date">8/10/09</span></td></tr><tr><th>1.0.0b35</th><td>Fixed a bug with unescaping data in <a href="#fActiveRecord-api-loadFromResult"><tt>loadFromResult()</tt></a> from v1.0.0b33 <span class="date">8/10/09</span></td></tr><tr><th>1.0.0b34</th><td>Added the ability to compare <a href="#fActiveRecord">fActiveRecord</a> objects in <a href="#fActiveRecord-api-checkConditions"><tt>checkConditions()</tt></a> <span class="date">8/7/09</span></td></tr><tr><th>1.0.0b33</th><td>Performance enhancements to <a href="#fActiveRecord-api-__call"><tt>__call()</tt></a> and <a href="#fActiveRecord-api-__construct"><tt>__construct()</tt></a> <span class="date">8/7/09</span></td></tr><tr><th>1.0.0b32</th><td>Changed <a href="#fActiveRecord-api-delete"><tt>delete()</tt></a> to remove auto-incrementing primary keys after the post::delete() hook <span class="date">7/29/09</span></td></tr><tr><th>1.0.0b31</th><td>Fixed a bug with loading a record by a multi-column primary key, fixed one-to-one relationship API <span class="date">7/21/09</span></td></tr><tr><th>1.0.0b30</th><td>Updated <a href="#fActiveRecord-api-reflect"><tt>reflect()</tt></a> for new <a href="#fORM-api-callReflectCallbacks"><tt>fORM::callReflectCallbacks()</tt></a> API <span class="date">7/13/09</span></td></tr><tr><th>1.0.0b29</th><td>Updated to use new <a href="#fORM-api-callInspectCallbacks"><tt>fORM::callInspectCallbacks()</tt></a> method <span class="date">7/13/09</span></td></tr><tr><th>1.0.0b28</th><td>Fixed a bug where records would break the identity map at the end of <a href="#fActiveRecord-api-store"><tt>store()</tt></a> <span class="date">7/9/09</span></td></tr><tr><th>1.0.0b27</th><td>Changed <a href="#fActiveRecord-api-hash"><tt>hash()</tt></a> from a protected method to a static public/internal method that requires the class name for non-<a href="#fActiveRecord">fActiveRecord</a> values <span class="date">7/9/09</span></td></tr><tr><th>1.0.0b26</th><td>Added <a href="#fActiveRecord-api-checkConditions"><tt>checkConditions()</tt></a> from <a href="#fRecordSet">fRecordSet</a> <span class="date">7/8/09</span></td></tr><tr><th>1.0.0b25</th><td>Updated <a href="#fActiveRecord-api-validate"><tt>validate()</tt></a> to use new <a href="#fORMValidation">fORMValidation</a> API, including new message search/replace functionality <span class="date">7/1/09</span></td></tr><tr><th>1.0.0b24</th><td>Changed <a href="#fActiveRecord-api-validate"><tt>validate()</tt></a> to remove duplicate validation messages <span class="date">6/30/09</span></td></tr><tr><th>1.0.0b23</th><td>Updated code for new <a href="#fORMValidation-api-validateRelated"><tt>fORMValidation::validateRelated()</tt></a> API <span class="date">6/26/09</span></td></tr><tr><th>1.0.0b22</th><td>Added support for the $formatting parameter to encode methods on char, text and varchar columns <span class="date">6/19/09</span></td></tr><tr><th>1.0.0b21</th><td>Performance tweaks and updates for <a href="#fORM">fORM</a> and <a href="#fORMRelated">fORMRelated</a> API changes <span class="date">6/15/09</span></td></tr><tr><th>1.0.0b20</th><td>Changed replacement values in preg_replace() calls to be properly escaped <span class="date">6/11/09</span></td></tr><tr><th>1.0.0b19</th><td>Added <tt>list{RelatedRecords}()</tt> methods, updated code for new <a href="#fORMRelated">fORMRelated</a> API <span class="date">6/2/09</span></td></tr><tr><th>1.0.0b18</th><td>Changed <a href="#fActiveRecord-api-store"><tt>store()</tt></a> to use new <a href="#fORMRelated-api-store"><tt>fORMRelated::store()</tt></a> method <span class="date">6/2/09</span></td></tr><tr><th>1.0.0b17</th><td>Added some missing parameter information to <a href="#fActiveRecord-api-reflect"><tt>reflect()</tt></a> <span class="date">6/1/09</span></td></tr><tr><th>1.0.0b16</th><td>Fixed bugs in <a href="#fActiveRecord-api-__clone"><tt>__clone()</tt></a> and <a href="#fActiveRecord-api-replicate"><tt>replicate()</tt></a> related to recursive relationships <span class="date">5/20/09</span></td></tr><tr><th>1.0.0b15</th><td>Fixed an incorrect variable reference in <a href="#fActiveRecord-api-store"><tt>store()</tt></a> <span class="date">5/6/09</span></td></tr><tr><th>1.0.0b14</th><td><a href="#fActiveRecord-api-store"><tt>store()</tt></a> no longer tries to get an auto-incrementing ID from the database if a value was set <span class="date">5/2/09</span></td></tr><tr><th>1.0.0b13</th><td><a href="#fActiveRecord-api-delete"><tt>delete()</tt></a>, <a href="#fActiveRecord-api-load"><tt>load()</tt></a>, <a href="#fActiveRecord-api-populate"><tt>populate()</tt></a> and <a href="#fActiveRecord-api-store"><tt>store()</tt></a> now return the record to allow for method chaining <span class="date">3/23/09</span></td></tr><tr><th>1.0.0b12</th><td><a href="#fActiveRecord-api-set"><tt>set()</tt></a> now removes commas from integers and floats to prevent validation issues <span class="date">3/22/09</span></td></tr><tr><th>1.0.0b11</th><td><a href="#fActiveRecord-api-encode"><tt>encode()</tt></a> no longer adds commas to floats <span class="date">3/22/09</span></td></tr><tr><th>1.0.0b10</th><td><a href="#fActiveRecord-api-__wakeup"><tt>__wakeup()</tt></a> no longer registers the record as the definitive copy in the identity map <span class="date">3/22/09</span></td></tr><tr><th>1.0.0b9</th><td>Changed <a href="#fActiveRecord-api-__construct"><tt>__construct()</tt></a> to populate database default values when a non-existing record is instantiated <span class="date">1/12/09</span></td></tr><tr><th>1.0.0b8</th><td>Fixed <a href="#fActiveRecord-api-exists"><tt>exists()</tt></a> to properly detect cases when an existing record has one or more NULL values in the primary key <span class="date">1/11/09</span></td></tr><tr><th>1.0.0b7</th><td>Fixed <a href="#fActiveRecord-api-__construct"><tt>__construct()</tt></a> to not trigger the post::__construct() hook when force-configured <span class="date">12/30/08</span></td></tr><tr><th>1.0.0b6</th><td><a href="#fActiveRecord-api-__construct"><tt>__construct()</tt></a> now accepts an associative array matching any unique key or primary key, fixed the post::__construct() hook to be called once for each record <span class="date">12/26/08</span></td></tr><tr><th>1.0.0b5</th><td>Fixed <a href="#fActiveRecord-api-replicate"><tt>replicate()</tt></a> to use plural record names for related records <span class="date">12/12/08</span></td></tr><tr><th>1.0.0b4</th><td>Added <a href="#fActiveRecord-api-replicate"><tt>replicate()</tt></a> to allow cloning along with related records <span class="date">12/12/08</span></td></tr><tr><th>1.0.0b3</th><td>Changed <a href="#fActiveRecord-api-__clone"><tt>__clone()</tt></a> to clone objects contains in the values and cache arrays <span class="date">12/11/08</span></td></tr><tr><th>1.0.0b2</th><td>Added the <a href="#fActiveRecord-api-__clone"><tt>__clone()</tt></a> method to properly duplicate a record <span class="date">12/4/08</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">8/4/07</span></td></tr></table></div>
<div class="class_variables static" id="fActiveRecord-api-class_vars_static">
<h4>Static Variables</h4>
	<!-- start protected variable static -->
	<h5 id="fActiveRecord-api-callback_cache" class="protected variable static"><span class="resolution">::</span><span class="name">$callback_cache</span> <span class="visibility">protected</span></h5>
	<div class="protected variable static">    
					<div class="variable_description">
							<p>Caches callbacks for methods</p>
			</div>
		<h6>Type</h6>
		<p class="type">array</p>
	</div>
	<!-- end variable static -->
	<!-- start protected variable static -->
	<h5 id="fActiveRecord-api-configured" class="protected variable static"><span class="resolution">::</span><span class="name">$configured</span> <span class="visibility">protected</span></h5>
	<div class="protected variable static">    
					<div class="variable_description">
							<p>An array of flags indicating a class has been configured</p>
			</div>
		<h6>Type</h6>
		<p class="type">array</p>
	</div>
	<!-- end variable static -->
	<!-- start protected variable static -->
	<h5 id="fActiveRecord-api-identity_map" class="protected variable static"><span class="resolution">::</span><span class="name">$identity_map</span> <span class="visibility">protected</span></h5>
	<div class="protected variable static">    
					<div class="variable_description">
							<p>Maps objects via their primary key</p>
			</div>
		<h6>Type</h6>
		<p class="type">array</p>
	</div>
	<!-- end variable static -->
	<!-- start protected variable static -->
	<h5 id="fActiveRecord-api-method_name_cache" class="protected variable static"><span class="resolution">::</span><span class="name">$method_name_cache</span> <span class="visibility">protected</span></h5>
	<div class="protected variable static">    
					<div class="variable_description">
							<p>Caches method name parsings</p>
			</div>
		<h6>Type</h6>
		<p class="type">array</p>
	</div>
	<!-- end variable static -->
	<!-- start protected variable static -->
	<h5 id="fActiveRecord-api-replicate_level" class="protected variable static"><span class="resolution">::</span><span class="name">$replicate_level</span> <span class="visibility">protected</span></h5>
	<div class="protected variable static">    
					<div class="variable_description">
							<p>Keeps track of the recursive call level of replication so we can clear the map</p>
			</div>
		<h6>Type</h6>
		<p class="type">integer</p>
	</div>
	<!-- end variable static -->
	<!-- start protected variable static -->
	<h5 id="fActiveRecord-api-replicate_map" class="protected variable static"><span class="resolution">::</span><span class="name">$replicate_map</span> <span class="visibility">protected</span></h5>
	<div class="protected variable static">    
					<div class="variable_description">
							<p>Keeps a list of records that have been replicated</p>
			</div>
		<h6>Type</h6>
		<p class="type">array</p>
	</div>
	<!-- end variable static -->
	<!-- start protected variable static -->
	<h5 id="fActiveRecord-api-unescape_map" class="protected variable static"><span class="resolution">::</span><span class="name">$unescape_map</span> <span class="visibility">protected</span></h5>
	<div class="protected variable static">    
					<div class="variable_description">
							<p>Contains a list of what columns in each class need to be unescaped and what data type they are</p>
			</div>
		<h6>Type</h6>
		<p class="type">array</p>
	</div>
	<!-- end variable static -->
</div>
<div class="class_variables" id="fActiveRecord-api-class_vars">
<h4>Variables</h4>
	<!-- start protected variable -->
	<h5 id="fActiveRecord-api-cache" class="protected variable"><span class="resolution">-></span><span class="name">cache</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>A data store for caching data related to a record, the structure of this is completely up to the developer using it</p>
			</div>
		<h6>Type</h6>
		<p class="type">array</p>
	</div>
	<!-- end variable -->
	<!-- start protected variable -->
	<h5 id="fActiveRecord-api-old_values" class="protected variable"><span class="resolution">-></span><span class="name">old_values</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>The old values for this record</p>
						<p>Column names are the keys, but a column key will only be present if a  value has changed. The value associated with each key is an array of  old values with the first entry being the oldest value. The static  methods <a href="#fActiveRecord-api-assign"><tt>assign()</tt></a>, <a href="#fActiveRecord-api-changed"><tt>changed()</tt></a>, <a href="#fActiveRecord-api-hasOld"><tt>hasOld()</tt></a> and <a href="#fActiveRecord-api-retrieveOld"><tt>retrieveOld()</tt></a> are the  best way to interact with this array.</p>
			</div>
		<h6>Type</h6>
		<p class="type">array</p>
	</div>
	<!-- end variable -->
	<!-- start protected variable -->
	<h5 id="fActiveRecord-api-related_records" class="protected variable"><span class="resolution">-></span><span class="name">related_records</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>Records that are related to the current record via some relationship</p>
						<p>This array is used to cache related records so that a database query  is not required each time related records are accessed. The <a href="#fORMRelated">fORMRelated</a>  class handles most of the interaction with this array.</p>
			</div>
		<h6>Type</h6>
		<p class="type">array</p>
	</div>
	<!-- end variable -->
	<!-- start protected variable -->
	<h5 id="fActiveRecord-api-values" class="protected variable"><span class="resolution">-></span><span class="name">values</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>The values for this record</p>
						<p>This array always contains every column in the database table as a key  with the value being the current value.</p>
			</div>
		<h6>Type</h6>
		<p class="type">array</p>
	</div>
	<!-- end variable -->
</div>
<div class="class_methods static" id="fActiveRecord-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start protected method static -->
			<h5 id="fActiveRecord-api-assign" class="protected method static"><span class="resolution">::</span><span class="name">assign()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets a value to the <tt>$values</tt> array, preserving the old value in <tt>$old_values</tt></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">assign</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to set</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value to set</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fActiveRecord-api-changed" class="protected method static"><span class="resolution">::</span><span class="name">changed()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Checks to see if a value has changed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">changed</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to check</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the value for the column specified has changed
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fActiveRecord-api-checkClass" class="protected method static"><span class="resolution">::</span><span class="name">checkClass()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Ensures a class extends <a href="#fActiveRecord">fActiveRecord</a></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">checkClass</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to check</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the class is an <a href="#fActiveRecord">fActiveRecord</a> descendant
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fActiveRecord-api-checkConditions" class="protected method static"><span class="resolution">::</span><span class="name">checkConditions()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Checks to see if a record matches all of the conditions</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">checkConditions</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$record</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$conditions</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$record</td>
				<td class="param_description">The record to check</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$conditions</td>
				<td class="param_description">The conditions to check - see <a href="#fRecordSet-api-filter"><tt>fRecordSet::filter()</tt></a> for format details</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the record meets all conditions
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fActiveRecord-api-clearIdentityMap" class="method static"><span class="resolution">::</span><span class="name">clearIdentityMap()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Clears the identity map</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">clearIdentityMap</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fActiveRecord-api-compose" class="protected method static"><span class="resolution">::</span><span class="name">compose()</span> <span class="visibility">protected</span></h5>
			<div class="protected method static">
							<div class="method_description">
									<p>Composes text using <a href="#fText">fText</a> if loaded</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">compose</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$component</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message to compose</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$component <em>[, ... ]</em></td>
				<td class="param_description">A string or number to insert into the message</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The composed and possible translated message
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fActiveRecord-api-forceConfigure" class="protected method static"><span class="resolution">::</span><span class="name">forceConfigure()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Ensures that configure() has been called for the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">forceConfigure</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to configure</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fActiveRecord-api-hash" class="protected method static"><span class="resolution">::</span><span class="name">hash()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Takes a row of data or a primary key and makes a hash from the primary key</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string|NULL</span> <span class="php-identifier">hash</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a>|array|string|int</span> <span class="php-var">$record</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a>|array|string|int</td>
				<td class="param_name">$record</td>
				<td class="param_description">An <a href="#fActiveRecord">fActiveRecord</a> object, an array of the records data, an array of primary key data or a scalar primary key value</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name, if $record isn't an <a href="#fActiveRecord">fActiveRecord</a></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					A hash of the record's primary key value or NULL if the record doesn't exist yet
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fActiveRecord-api-hasOld" class="protected method static"><span class="resolution">::</span><span class="name">hasOld()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Checks to see if an old value exists for a column</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">hasOld</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to set</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If an old value for that column exists
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fActiveRecord-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fActiveRecord-api-retrieveOld" class="protected method static"><span class="resolution">::</span><span class="name">retrieveOld()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Retrieves the oldest value for a column or all old values</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">retrieveOld</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$default</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$return_all</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to get</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$default</td>
				<td class="param_description">The default value to return if no value exists</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$return_all</td>
				<td class="param_description">Return the array of all old values for this column instead of just the oldest</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The old value for the column
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fActiveRecord-api-validateClass" class="protected method static"><span class="resolution">::</span><span class="name">validateClass()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Ensures a class extends <a href="#fActiveRecord">fActiveRecord</a></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">validateClass</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to verify</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
	</div>
<div class="class_methods" id="fActiveRecord-api-class_methods">
<h4>Methods</h4>
						<!-- start method -->
			<h5 id="fActiveRecord-api-__construct" class="method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Creates a new record or loads one from the database - if a primary key or unique key is provided the record will be loaded</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$key</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$key</td>
				<td class="param_description">The primary key or unique key value(s) - single column primary keys will accept a scalar value, all others must be an associative array of <tt>(string) {column} =&gt; (mixed) {value}</tt></td>
			  </tr>
						</table>
			</div>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fNotFoundException">fNotFoundException</a></dt><dd>When the record specified by <tt>$key</tt> can not be found in the database</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fActiveRecord-api-__call" class="method"><span class="resolution">-></span><span class="name">__call()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Handles all method calls for columns, related records and hook callbacks</p>
								<p>Dynamically handles <tt>get</tt>, <tt>set</tt>, <tt>prepare</tt>, <tt>encode</tt> and <tt>inspect</tt>  methods for each column in this record. Method names are in the form  <tt>verbColumName()</tt>.</p><p>This method also handles <tt>associate</tt>, <tt>build</tt>, <tt>count</tt>, <tt>has</tt>, and <tt>link</tt>  verbs for records in many-to-many relationships; <tt>build</tt>, <tt>count</tt>, <tt>has</tt>  and <tt>populate</tt> verbs for all related records in one-to-many relationships  and <tt>create</tt>, <tt>has</tt> and <tt>populate</tt> verbs for all related records in  one-to-one relationships, and the <tt>create</tt> verb for all related records  in many-to-one relationships.</p><p>Method callbacks registered through <a href="#fORM-api-registerActiveRecordMethod"><tt>fORM::registerActiveRecordMethod()</tt></a>  will be delegated via this method.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">__call</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method_name</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method_name</td>
				<td class="param_description">The name of the method called</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters passed</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The value returned by the method called
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fActiveRecord-api-__clone" class="protected method"><span class="resolution">-></span><span class="name">__clone()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Creates a clone of a record</p>
								<p>If the record has an auto incrementing primary key, the primary key will  be erased in the clone. If the primary key is not auto incrementing,  the primary key will be left as-is in the clone. In either situation the  clone will return <tt>FALSE</tt> from the <a href="#fActiveRecord-api-exists"><tt>exists()</tt></a> method until <a href="#fActiveRecord-api-store"><tt>store()</tt></a> is  called.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-identifier">__clone</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fActiveRecord-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fActiveRecord-api-__wakeup" class="protected method"><span class="resolution">-></span><span class="name">__wakeup()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Configure itself when coming out of the session. Records from the session are NOT hooked into the identity map.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">__wakeup</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fActiveRecord-api-configure" class="protected method"><span class="resolution">-></span><span class="name">configure()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Allows the programmer to set features for the class</p>
								<p>This method is only called once per page load for each class.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">configure</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fActiveRecord-api-constructInsertParams" class="protected method"><span class="resolution">-></span><span class="name">constructInsertParams()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Creates the <a href="#fDatabase-api-translatedQuery"><tt>fDatabase::translatedQuery()</tt></a> insert statement params</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">constructInsertParams</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The parameters for an <a href="#fDatabase-api-translatedQuery"><tt>fDatabase::translatedQuery()</tt></a> SQL insert statement
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fActiveRecord-api-constructUpdateParams" class="protected method"><span class="resolution">-></span><span class="name">constructUpdateParams()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Creates the <a href="#fDatabase-api-translatedQuery"><tt>fDatabase::translatedQuery()</tt></a> update statement params</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">constructUpdateParams</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The parameters for an <a href="#fDatabase-api-translatedQuery"><tt>fDatabase::translatedQuery()</tt></a> SQL update statement
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fActiveRecord-api-delete" class="method"><span class="resolution">-></span><span class="name">delete()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Deletes a record from the database, but does not destroy the object</p>
								<p>This method will start a database transaction if one is not already active.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-identifier">delete</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$force_cascade</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$force_cascade</td>
				<td class="param_description">When TRUE, this will cause all child objects to be deleted, even if the ON DELETE clause is RESTRICT or NO ACTION</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The record object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fActiveRecord-api-encode" class="protected method"><span class="resolution">-></span><span class="name">encode()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Retrieves a value from the record and prepares it for output into an HTML form element.</p>
								<p>Below are the transformations performed:   </p><ul><li><strong>varchar, char, text</strong>: will run through <a href="#fHTML-api-encode"><tt>fHTML::encode()</tt></a>, if <tt>TRUE</tt> is passed the text will be run through <a href="#fHTML">fHTML</a>convertNewLinks() and <a href="#fHTML-api-makeLinks"><tt>fHTML::makeLinks()</tt></a></li><li><strong>float</strong>: takes 1 parameter to specify the number of decimal places</li><li><strong>date, time, timestamp</strong>: <tt>format()</tt> will be called on the <a href="#fDate">fDate</a>/<a href="#fTime">fTime</a>/<a href="#fTimestamp">fTimestamp</a> object with the 1 parameter specified</li><li><strong>objects</strong>: the object will be converted to a string by <tt>__toString()</tt> or a <tt>(string)</tt> cast and then will be run through <a href="#fHTML-api-encode"><tt>fHTML::encode()</tt></a></li><li><strong>all other data types</strong>: the value will be run through <a href="#fHTML-api-encode"><tt>fHTML::encode()</tt></a></li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">encode</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$formatting</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The name of the column to retrieve</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$formatting</td>
				<td class="param_description">The formatting string</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The encoded value for the column specified
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fActiveRecord-api-exists" class="method"><span class="resolution">-></span><span class="name">exists()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Checks to see if the record exists in the database</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">exists</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 If the record exists in the database
				</p>
		</div>
		<!-- end method -->	
						<!-- start protected method -->
			<h5 id="fActiveRecord-api-fetchResultFromUniqueKey" class="protected method"><span class="resolution">-></span><span class="name">fetchResultFromUniqueKey()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Loads a record from the database based on a UNIQUE key</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">fetchResultFromUniqueKey</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$values</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$values</td>
				<td class="param_description">The UNIQUE key values to try and load with</td>
			  </tr>
						</table>
			</div>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fNotFoundException">fNotFoundException</a></dt></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fActiveRecord-api-get" class="protected method"><span class="resolution">-></span><span class="name">get()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Retrieves a value from the record</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$column</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The name of the column to retrieve</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The value for the column specified
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fActiveRecord-api-inspect" class="protected method"><span class="resolution">-></span><span class="name">inspect()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Retrieves information about a column</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">inspect</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$element</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The name of the column to inspect</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$element</td>
				<td class="param_description">The metadata element to retrieve</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The metadata array for the column, or the metadata element specified
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fActiveRecord-api-load" class="method"><span class="resolution">-></span><span class="name">load()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Loads a record from the database</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-identifier">load</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The record object, to allow for method chaining
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fNotFoundException">fNotFoundException</a></dt><dd>When the record could not be found in the database</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fActiveRecord-api-loadFromIdentityMap" class="protected method"><span class="resolution">-></span><span class="name">loadFromIdentityMap()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Tries to load the object (via references to class vars) from the <a href="#fORM">fORM</a> identity map</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">loadFromIdentityMap</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$row</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$hash</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$row</td>
				<td class="param_description">The data source for the primary key values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$hash</td>
				<td class="param_description">The unique hash for this record</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If the load was successful
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fActiveRecord-api-loadFromResult" class="protected method"><span class="resolution">-></span><span class="name">loadFromResult()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Loads a record from the database directly from a result object</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">loadFromResult</span><span class="php-brackets">(</span> <span class="php-vartype">Iterator</span> <span class="php-var">$result</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$ignore_identity_map</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">Iterator</td>
				<td class="param_name">$result</td>
				<td class="param_description">The result object to use for loading the current object</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$ignore_identity_map</td>
				<td class="param_description">If the identity map should be ignored and the values loaded no matter what</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If the record was loaded from the identity map
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fActiveRecord-api-populate" class="method"><span class="resolution">-></span><span class="name">populate()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the values for this record by getting values from the request through the <a href="#fRequest">fRequest</a> class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-identifier">populate</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The record object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fActiveRecord-api-prepare" class="protected method"><span class="resolution">-></span><span class="name">prepare()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Retrieves a value from the record and prepares it for output into html.</p>
								<p>Below are the transformations performed:  </p><ul><li><strong>varchar, char, text</strong>: will run through <a href="#fHTML-api-prepare"><tt>fHTML::prepare()</tt></a>, if <tt>TRUE</tt> is passed the text will be run through <a href="#fHTML">fHTML</a>convertNewLinks() and <a href="#fHTML-api-makeLinks"><tt>fHTML::makeLinks()</tt></a></li><li><strong>boolean</strong>: will return <tt>'Yes'</tt> or <tt>'No'</tt></li><li><strong>integer</strong>: will add thousands/millions/etc. separators</li><li><strong>float</strong>: will add thousands/millions/etc. separators and takes 1 parameter to specify the number of decimal places</li><li><strong>date, time, timestamp</strong>: <tt>format()</tt> will be called on the <a href="#fDate">fDate</a>/<a href="#fTime">fTime</a>/<a href="#fTimestamp">fTimestamp</a> object with the 1 parameter specified</li><li><strong>objects</strong>: the object will be converted to a string by <tt>__toString()</tt> or a <tt>(string)</tt> cast and then will be run through <a href="#fHTML-api-prepare"><tt>fHTML::prepare()</tt></a></li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">prepare</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$formatting</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The name of the column to retrieve</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$formatting</td>
				<td class="param_description">The formatting parameter, if applicable</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The formatted value for the column specified
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fActiveRecord-api-reflect" class="method"><span class="resolution">-></span><span class="name">reflect()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Generates the method signatures for all methods (including dynamic ones)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">reflect</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$include_doc_comments</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$include_doc_comments</td>
				<td class="param_description">If the doc block comments for each method should be included</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 An associative array of method name =&gt; method signature
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fActiveRecord-api-replicate" class="method"><span class="resolution">-></span><span class="name">replicate()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Generates a clone of the current record, removing any auto incremented primary key value and allowing for replicating related records</p>
								<p>This method will accept three different sets of parameters:  </p><ul><li>No parameters: this object will be cloned</li><li>A single <tt>TRUE</tt> value: this object plus all many-to-many associations and all child records (recursively) will be cloned</li><li>Any number of plural related record class names: the many-to-many associations or child records that correspond to the classes specified will be cloned</li></ul><p>The class names specified can be a simple class name if there is only a  single route between the two corresponding database tables. If there is  more than one route between the two tables, the class name should be  substituted with a string in the format <tt>'RelatedClass{route}'</tt>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-identifier">replicate</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">=</span>NULL [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class <em>[, ... ]</em></td>
				<td class="param_description">The plural related class to replicate - see method description for details</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The cloned record
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fActiveRecord-api-set" class="protected method"><span class="resolution">-></span><span class="name">set()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Sets a value to the record</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-identifier">set</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to set the value to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value to set</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 This record, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fActiveRecord-api-store" class="method"><span class="resolution">-></span><span class="name">store()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Stores a record in the database, whether existing or new</p>
								<p>This method will start database and filesystem transactions if they have  not already been started.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-identifier">store</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$force_cascade</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$force_cascade</td>
				<td class="param_description">When storing related records, this will force deleting child records even if they have their own children in a relationship with an RESTRICT or NO ACTION for the ON DELETE clause</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The record object, to allow for method chaining
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <a href="#fActiveRecord-api-validate"><tt>validate()</tt></a> throws an exception</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fActiveRecord-api-validate" class="method"><span class="resolution">-></span><span class="name">validate()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Validates the values of the record against the database and any additional validation rules</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void|array</span> <span class="php-identifier">validate</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$return_messages</span><span class="php-code">=</span>FALSE<span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$remove_column_names</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$return_messages</td>
				<td class="param_description">If an array of validation messages should be returned instead of an exception being thrown</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$remove_column_names</td>
				<td class="param_description">If column names should be removed from the returned messages, leaving just the message itself</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If $return_messages is TRUE, an array of validation messages will be returned
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When the record, or one of the associated records, violates one of the validation rules for the class or can not be properly stored in the database</dd></dl>
		</div>
		<!-- end method -->	
				</div>		</section>
		</div>
		<section class="main">
<h2 id="fAuthorization">fAuthorization</h2>
<div class="sidebar">
<h3 id="fAuthorization-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fAuthorization">Class Documentation</a></strong></li>
<li><a href="#fAuthorization-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fAuthorization-docs-Setup">Setup</a></li>
<li><a href="#fAuthorization-docs-AuthorizationLevels">Authorization Levels</a></li>
<li><a href="#fAuthorization-docs-AccessControlLists">Access Control Lists</a></li>
<li><a href="#fAuthorization-docs-LoggingIn">Logging In</a></li>
<li><a href="#fAuthorization-docs-CheckingStatus">Checking Status</a></li>
<li><a href="#fAuthorization-docs-RemoteIPChecking">Remote IP Checking</a></li>
<li><a href="#fAuthorization-docs-LoggingOut">Logging Out</a></li>
<li><a href="#fAuthorization-docs-PreventingPrivilegeEscalationSecurity">Preventing Privilege Escalation (Security)</a></li>
</ul>
</div>

<p>
The fAuthorization class is a static class provides functionality to restrict access to pages based on either simple a authorization level or more complex access control lists (ACLs).
</p>

<h3 id="fAuthorization-docs-Setup">Setup</h3>

<p>
Since the class is static, no instantiation is required, however to use the features some setup will need to be performed. The only setup common to using either authorization levels or ACLs is to set up a login page. For maintainability, I recommend you perform your setup in a common configuration like described on the <a href="#GettingStarted#CreateaConfigurationScript-docs">Getting Started</a> page:
</p>
<pre class="block php"><code>// Set up a login page in your local.config.php
fAuthorization::setLoginPage('/login/');</code></pre>

<p>
The login page URL should be an absolute URL, relative to the domain name.
</p>

<p>
If need be, the login page URL can be retrieved with the static method <a href="#fAuthorization-api-getLoginPage"><code>getLoginPage()</code></a>.
</p>
<pre><code>fURL::redirect(fAuthorization::getLoginPage());</code></pre>

<h3 id="fAuthorization-docs-AuthorizationLevels">Authorization Levels</h3>

<p>
The simplest way to control access to pages is to use authorization levels. Each user is assigned a single authorization level and can view any page that requires that level or a level below. 
</p>

<p>
After you have <a href="#fAuthorization-docs-Setup">setup your login page</a>, you are going to need to define the different authorization levels. Just like with the login page, you will probably want to place these in a common configuration file. Here is a simple example:
</p>
<pre class="block php"><code>fAuthorization::setAuthLevels(
    array(
        'admin' =&gt; 100,
        'user'  =&gt; 50,
        'guest' =&gt; 25
    )
);</code></pre>

<p>
 Youll notice that each authorization level is assigned a number. If a user has a number that is the same or above the required level, they can view a page. If not, they will be redirected to the login page.
</p>

<p>
The <a href="#fAuthorization-api-setUserAuthLevel"><code>setUserAuthLevel()</code></a> method provides the functionality to assign an authorization level to a user when they log in:
</p>
<pre class="block php"><code>// This would be executed after the username and password were verified
fAuthorization::setUserAuthLevel('admin');</code></pre>

<p>
 To actually require an authorization level you will need to call <a href="#fAuthorization-api-requireAuthLevel"><code>requireAuthLevel()</code></a> at the top of your page:
</p>
<pre class="block php"><code>fAuthorization::requireAuthLevel('user');</code></pre>

<p>
 If you wish to use a users authorization level to control other aspects of your site, you can use the <a href="#fAuthorization-api-checkAuthLevel"><code>checkAuthLevel()</code></a> method:
</p>
<pre class="block php"><code>if (fAuthorization::checkAuthLevel('admin')) {
    // Execute admin specific code
}</code></pre>

<p>
 Last, but not least, if you need to get the users authorization level, that can be accomplished by calling <a href="#fAuthorization-api-getUserAuthLevel"><code>getUserAuthLevel()</code></a>:
</p>
<pre class="block php"><code>$auth_level = fAuthorization::getUserAuthLevel();</code></pre>

<h3 id="fAuthorization-docs-AccessControlLists">Access Control Lists</h3>

<p>
Access control lists (ACLs) allow for more fine-grained permissions than authorization levels. With ACLs you associate resource names with specific permissions. For a user to be able to access a page they need to have the required permission for the resource specified. 
</p>

<p>
ACLs do not require any setup beyond assigning the users ACLs when they log in. Also note that the string <code>'*'</code> acts as a wildcard when doing resource and permission comparisons.
</p>
<pre class="block php"><code>// This would be executed after the username and password were verified
fAuthorization::setUserACLs(
    array(
        'posts'  =&gt; array('*'),
        'users'  =&gt; array('add', 'edit', 'delete'),
        'groups' =&gt; array('add'),
        '*'      =&gt; array('list')
    )
);</code></pre>

<p>
 The above user ACLs would imply the user has permissions to: do anything with posts; add, edit and delete users; add groups and list anything.
</p>

<p>
To require a user have a specific ACL to view a page, use the method <a href="#fAuthorization-api-requireACL"><code>requireACL()</code></a> at the top of a page:
</p>
<pre class="block php"><code>fAuthorization::requireACL('users', 'list');</code></pre>

<p>
 The above code would require a user to have the <code>list</code> permission for the <code>users</code> resource in order to view the page.
</p>

<p>
In addition to control page views, ACLs can be useful for controlling access on a smaller level. If you wish to perform a conditional branch based on a users ACLs you can use the <a href="#fAuthorization-api-checkACL"><code>checkACL()</code></a> method:
</p>
<pre class="block php"><code>if (fAuthorization::checkACL('users', 'edit')) {
    // Code to be executed for users who can edit users
}</code></pre>

<p>
 If you need to get a list of all ACLs assigned to the current user (in the same array format they are set), you can use the <a href="#fAuthorization-api-getUserACLs"><code>getUserACLs()</code></a> method:
</p>
<pre class="block php"><code>$user_acls = fAuthorization::getUserACLs();</code></pre>

<h3 id="fAuthorization-docs-LoggingIn">Logging In</h3>

<p>
Once you have decided if you wish to go with authorization levels or ACLs you can move on to actually logging the user in.
</p>

<p>
Sometimes when a user visits the login page, they will have entered the URL manually, or will have followed a link. In this sort of situation you will need a default page to redirect them to. The rest of the time users will usually get directed to the login page because they tried to access a restricted page. You can get this information with the <a href="#fAuthorization-api-getRequestedURL"><code>getRequestedURL()</code></a> method. 
</p>

<p>
<a href="#fAuthorization-api-getRequestedURL"><code>getRequestedURL()</code></a> requires a single parameter, <code>$clear</code>, which controls if the requested URL is erased when returned, or if it is to be left for later access. A second, optional, parameter is the default URL to use if the user was not redirected to the login page.
</p>

<p>
Here is an example of logging a user in and redirecting them to the requested page (or the home page if no page was requested):
</p>
<pre class="block php"><code>if ('login' == $action &amp;&amp; fRequest::isPost()) {
    if ($email == 'john@example.com' &amp;&amp; sha1($password) == '5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8') {
        fAuthorization::setUserAuthLevel('admin');
        fURL::redirect(fAuthorization::getRequestedURL(TRUE, '/'));
    }
}</code></pre>

<p>
 Please note that the code above is simplified to demonstration, please check out the <a href="#fCryptography">fCryptography</a> Class for information on hashing passwords.
</p>

<p>
If for some reason you need to manually set the requested URL, that can be accomplished with the <a href="#fAuthorization-api-setRequestedURL"><code>setRequestedURL()</code></a> method.
</p>

<p>
In addition, it is usually necessary to remember some sort of information about the user that is logging in so you can retrieve their information on other pages. The <a href="#fAuthorization-api-setUserToken"><code>setUserToken()</code></a> and <a href="#fAuthorization-api-getUserToken"><code>getUserToken()</code></a> methods allow storing some sort of user identifier and getting it back later. Here is the above example with the user token code added:
</p>
<pre class="block php"><code>if ('login' == $action &amp;&amp; fRequest::isPost()) {
    if ($email == 'john@example.com' &amp;&amp; sha1($password) == '5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8') {
        fAuthorization::setUserAuthLevel('admin');
        fAuthorization::setUserToken('john@example.com');
        fURL::redirect(fAuthorization::getRequestedURL(TRUE, '/'));
    }
}</code></pre>

<h3 id="fAuthorization-docs-CheckingStatus">Checking Status</h3>

<p>
If you are using either authorization levels or access control lists, there are two simple methods that can be used to tell if a user is logged in. To require a user is logged in to view a page you will want to use the <a href="#fAuthorization-api-requireLoggedIn"><code>requireLoggedIn()</code></a>, whereas if you want to create conditions based on whether or not the user is logged in you can use the <a href="#fAuthorization-api-checkLoggedIn"><code>checkLoggedIn()</code></a> method:
</p>
<pre class="block php"><code>// Require a user is logged in
fAuthorization::requireLoggedIn();

// Branch based on the users login status
if (fAuthorization::checkLoggedIn()) {
    // Code to execute if the user is logged in
}</code></pre>

<h3 id="fAuthorization-docs-RemoteIPChecking">Remote IP Checking</h3>

<p>
Sometimes it may be a requirement to only execute code if the remote connection is coming from a specific IP address or range. The method <a href="#fAuthorization-api-checkIP"><code>checkIP()</code></a> provides this functionality. A single parameter <code>$ip_ranges</code> is required, which should like the IP address, <a class="ext-link" href="http://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing"><span class="icon">CIDR range</span></a> or IP/subnet-mask combination to check for. It is also possible to pass an array of any valid IP/range descriptors.
</p>
<pre class="block php"><code>// Check for the IP 192.168.1.1
if (fAuthorization::checkIP('192.168.1.1')) {
    // ...
}

// Check for the IPs 192.168.1.1-255
if (fAuthorization::checkIP('192.168.1.0/24')) {
    // ...
}

// Check for the IPs 192.168.1.1-255
if (fAuthorization::checkIP('192.168.1.0/255.255.255.0')) {
    // ...
}

// Check for the IPs 192.168.1.1-255 or 192.168.2.1
if (fAuthorization::checkIP(array('192.168.1.0/24', '192.168.2.1'))) {
    // ...
}</code></pre>

<p>
 It is also possible to create named IPs/ranges using the method <a href="#fAuthorization-api-addNamedIPRange"><code>addNamedIPRange()</code></a>. Simply define the <code>$name</code> and <code>$ip_ranges</code> and then you can use that name with <code>checkIP()</code>:
</p>
<pre class="block php"><code>// Create a named IP/range
fAuthorization::addNamedIPRange('office', '192.168.1.0/24');

// Check the named IP/range
if (fAuthorization::checkIP('office')) {
    // ...
}</code></pre>

<h3 id="fAuthorization-docs-LoggingOut">Logging Out</h3>

<p>
When a user logs out, it is important that their authorization level or ACLs are erased. This is quite simple to do using the <a href="#fAuthorization-api-destroyUserInfo"><code>destroyUserInfo()</code></a> method:
</p>
<pre class="block php"><code>fAuthorization::destroyUserInfo();</code></pre>

<h3 id="fAuthorization-docs-PreventingPrivilegeEscalationSecurity">Preventing Privilege Escalation (Security)</h3>

<p>
One of the simplest ways for an attacker to gain unauthorized privileges is via session fixation. An attack would be executed by sending a link with a known session ID to a user and then waiting for them to log in. Once the user has logged in, the attacker can send the same session ID and receive the privileges of the user. Below is an example:
</p>
<pre><code>http://example.com/login.php?PHPSESSID=abcdef1234567890</code></pre>

<p>
 <em>By default <a href="#fSession">fSession</a> prevents such an attack by <a href="#fSession-docs-PreventingSessionFixationSecurity">requiring that session IDs be passed in cookies</a>, however it is theoretically possible runtime configuration of the session.use_only_cookies INI setting could be disabled.</em>
</p>

<p>
To prevent attacks based on knowledge of the users session ID, fAuthorization automatically regenerates the session ID via <a class="ext-link" href="http://php.net/session_regenerate_id"><span class="icon"><code>session_regenerate_id()</code></span></a> whenever <a href="#fAuthorization-api-setUserACLs"><code>setUserACLs()</code></a>, <a href="#fAuthorization-api-setUserAuthLevel"><code>setUserAuthLevel()</code></a> or <a href="#fAuthorization-api-setUserToken"><code>setUserToken()</code></a> is called. The attacker wont know the newly regenerated ID, and wont be able to access the users account.
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fAuthorization-api">fAuthorization API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fAuthorization">Class Documentation</a></li>
		<li><strong><a href="#fAuthorization-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fAuthorization-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fAuthorization-api-addNamedIPRange">addNamedIPRange()</a></li>
	  			<li><a href="#fAuthorization-api-checkACL">checkACL()</a></li>
	  			<li><a href="#fAuthorization-api-checkAuthLevel">checkAuthLevel()</a></li>
	  			<li><a href="#fAuthorization-api-checkIP">checkIP()</a></li>
	  			<li><a href="#fAuthorization-api-checkLoggedIn">checkLoggedIn()</a></li>
	  			<li><a href="#fAuthorization-api-destroyUserInfo">destroyUserInfo()</a></li>
	  			<li><a href="#fAuthorization-api-getLoginPage">getLoginPage()</a></li>
	  			<li><a href="#fAuthorization-api-getRequestedURL">getRequestedURL()</a></li>
	  			<li><a href="#fAuthorization-api-getUserACLs">getUserACLs()</a></li>
	  			<li><a href="#fAuthorization-api-getUserAuthLevel">getUserAuthLevel()</a></li>
	  			<li><a href="#fAuthorization-api-getUserToken">getUserToken()</a></li>
	  			<li><a href="#fAuthorization-api-requireACL">requireACL()</a></li>
	  			<li><a href="#fAuthorization-api-requireAuthLevel">requireAuthLevel()</a></li>
	  			<li><a href="#fAuthorization-api-requireLoggedIn">requireLoggedIn()</a></li>
	  			<li class="protected"><a href="#fAuthorization-api-reset">reset()</a></li>
	  			<li><a href="#fAuthorization-api-setAuthLevels">setAuthLevels()</a></li>
	  			<li><a href="#fAuthorization-api-setLoginPage">setLoginPage()</a></li>
	  			<li><a href="#fAuthorization-api-setRequestedURL">setRequestedURL()</a></li>
	  			<li><a href="#fAuthorization-api-setUserACLs">setUserACLs()</a></li>
	  			<li><a href="#fAuthorization-api-setUserAuthLevel">setUserAuthLevel()</a></li>
	  			<li><a href="#fAuthorization-api-setUserToken">setUserToken()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fSession">fSession</a></li>
		<li><a href="#fURL">fURL</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b6</span></div>
<p class="short_description">Allows defining and checking user authentication via ACLs, authorization levels or a simple logged in/not logged in scheme</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b6</th><td>Fixed <a href="#fAuthorization-api-checkIP"><tt>checkIP()</tt></a> to not trigger a notice when <tt>$_SERVER['REMOTE_ADDR']</tt> is not set <span class="date">5/10/11</span></td></tr><tr><th>1.0.0b5</th><td>Added <a href="#fAuthorization-api-getLoginPage"><tt>getLoginPage()</tt></a> <span class="date">3/9/10</span></td></tr><tr><th>1.0.0b4</th><td>Updated class to use new <a href="#fSession">fSession</a> API <span class="date">10/23/09</span></td></tr><tr><th>1.0.0b3</th><td>Updated class to use new <a href="#fSession">fSession</a> API <span class="date">5/8/09</span></td></tr><tr><th>1.0.0b2</th><td>Fixed a bug with using named IP ranges in <a href="#fAuthorization-api-checkIP"><tt>checkIP()</tt></a> <span class="date">1/10/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="class_methods static" id="fAuthorization-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fAuthorization-api-addNamedIPRange" class="method static"><span class="resolution">::</span><span class="name">addNamedIPRange()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Adds a named IP address or range, or array of addresses and/or ranges</p>
								<p>This method allows <a href="#fAuthorization-api-checkIP"><tt>checkIP()</tt></a> to be called with a name instead of the  actual IPs.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">addNamedIPRange</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$ip_ranges</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The name to give the IP addresses/ranges</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$ip_ranges</td>
				<td class="param_description">This can be string (or array of strings) of the IPs or IP ranges to restrict to - please see <a href="#fAuthorization-api-checkIP"><tt>checkIP()</tt></a> for format details</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fAuthorization-api-checkACL" class="method static"><span class="resolution">::</span><span class="name">checkACL()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Checks to see if the logged in user meets the requirements of the ACL specified</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">checkACL</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$resource</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$permission</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$resource</td>
				<td class="param_description">The resource we are checking permissions for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$permission</td>
				<td class="param_description">The permission to require from the user</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the user has the required permissions
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fAuthorization-api-checkAuthLevel" class="method static"><span class="resolution">::</span><span class="name">checkAuthLevel()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Checks to see if the logged in user has the specified auth level</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">checkAuthLevel</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$level</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$level</td>
				<td class="param_description">The level to check against the logged in user's level</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the user has the required auth level
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fAuthorization-api-checkIP" class="method static"><span class="resolution">::</span><span class="name">checkIP()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Checks to see if the user is from the IPs or IP ranges specified</p>
								<p>The <tt>$ip_ranges</tt> parameter can be either a single string, or an array of  strings, each of which should be in one of the following formats:   </p><ul><li>A single IP address:
   <ul><li>192.168.1.1</li><li>208.77.188.166</li></ul></li><li>A CIDR range
   <ul><li>192.168.1.0/24</li><li>208.77.188.160/28</li></ul></li><li>An IP/subnet mask combination
   <ul><li>192.168.1.0/255.255.255.0</li><li>208.77.188.160/255.255.255.240</li></ul></li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">checkIP</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$ip_ranges</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$ip_ranges</td>
				<td class="param_description">A string (or array of strings) of the IPs or IP ranges to restrict to - see method description for details</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the user is coming from (one of) the IPs or ranges specified
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fAuthorization-api-checkLoggedIn" class="method static"><span class="resolution">::</span><span class="name">checkLoggedIn()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Checks to see if the user has an auth level or ACLs defined</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">checkLoggedIn</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					If the user is logged in
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fAuthorization-api-destroyUserInfo" class="method static"><span class="resolution">::</span><span class="name">destroyUserInfo()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Destroys the user's auth level and/or ACLs</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">destroyUserInfo</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fAuthorization-api-getLoginPage" class="method static"><span class="resolution">::</span><span class="name">getLoginPage()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns the login page set via setLoginPage()</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getLoginPage</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					The login page users are redirected to if they don't have the required authorization
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fAuthorization-api-getRequestedURL" class="method static"><span class="resolution">::</span><span class="name">getRequestedURL()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns the URL requested before the user was redirected to the login page</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getRequestedURL</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$clear</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$default_url</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$clear</td>
				<td class="param_description">If the requested url should be cleared from the session after it is retrieved</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$default_url</td>
				<td class="param_description">The default URL to return if the user was not redirected</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The URL that was requested before they were redirected to the login page
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fAuthorization-api-getUserACLs" class="method static"><span class="resolution">::</span><span class="name">getUserACLs()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Gets the ACLs for the logged in user</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">getUserACLs</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					The logged in user's ACLs
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fAuthorization-api-getUserAuthLevel" class="method static"><span class="resolution">::</span><span class="name">getUserAuthLevel()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Gets the authorization level for the logged in user</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getUserAuthLevel</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					The logged in user's auth level
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fAuthorization-api-getUserToken" class="method static"><span class="resolution">::</span><span class="name">getUserToken()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Gets the value that was set as the user token, <tt>NULL</tt> if no token has been set</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">getUserToken</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					The user token that had been set, <tt>NULL</tt> if none
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fAuthorization-api-requireACL" class="method static"><span class="resolution">::</span><span class="name">requireACL()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Redirect the user to the login page if they do not have the permissions required</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">requireACL</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$resource</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$permission</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$resource</td>
				<td class="param_description">The resource we are checking permissions for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$permission</td>
				<td class="param_description">The permission to require from the user</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fAuthorization-api-requireAuthLevel" class="method static"><span class="resolution">::</span><span class="name">requireAuthLevel()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Redirect the user to the login page if they do not have the auth level required</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">requireAuthLevel</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$level</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$level</td>
				<td class="param_description">The level to check against the logged in user's level</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fAuthorization-api-requireLoggedIn" class="method static"><span class="resolution">::</span><span class="name">requireLoggedIn()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Redirect the user to the login page if they do not have an auth level or ACLs</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">requireLoggedIn</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fAuthorization-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fAuthorization-api-setAuthLevels" class="method static"><span class="resolution">::</span><span class="name">setAuthLevels()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets the authorization levels to use for level checking</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setAuthLevels</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$levels</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$levels</td>
				<td class="param_description">An associative array of <tt>(string) {level} =&gt; (integer) {value}</tt>, for each level</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fAuthorization-api-setLoginPage" class="method static"><span class="resolution">::</span><span class="name">setLoginPage()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets the login page to redirect users to</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setLoginPage</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$url</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$url</td>
				<td class="param_description">The URL of the login page</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fAuthorization-api-setRequestedURL" class="method static"><span class="resolution">::</span><span class="name">setRequestedURL()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets the restricted URL requested by the user</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setRequestedURL</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$url</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$url</td>
				<td class="param_description">The URL to save as the requested URL</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fAuthorization-api-setUserACLs" class="method static"><span class="resolution">::</span><span class="name">setUserACLs()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets the ACLs for the logged in user.</p>
								<p>Array should be formatted like:</p><pre class="block "><code>array (
    (string) {resource name} => array(
        (mixed) {permission}, ...
    ), ...
)</code></pre><p>The resource name or the permission may be the single character <tt>'*'</tt>  which acts as a wildcard.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setUserACLs</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$acls</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$acls</td>
				<td class="param_description">The logged in user's ACLs - see method description for format</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fAuthorization-api-setUserAuthLevel" class="method static"><span class="resolution">::</span><span class="name">setUserAuthLevel()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets the authorization level for the logged in user</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setUserAuthLevel</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$level</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$level</td>
				<td class="param_description">The logged in user's auth level</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fAuthorization-api-setUserToken" class="method static"><span class="resolution">::</span><span class="name">setUserToken()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets some piece of information to use to identify the current user</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setUserToken</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$token</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$token</td>
				<td class="param_description">The user's token. This could be a user id, an email address, a user object, etc.</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fAuthorizationException">fAuthorizationException</h2>
<div class="sidebar">
<h3 id="fAuthorizationException-docs-ClassResources" toc-skip="1">Class Resources </h3>

<ul>
<li><strong><a href="#fAuthorizationException">Class Documentation</a></strong></li>
<li><a href="#fAuthorizationException-api">API Reference</a></li>
</ul>

<h3 id="fAuthorizationException-docs-ExceptionClasses" toc-skip="1">Exception Classes </h3>

<ul>
<li><a href="#fException">fException</a>
<ul>
<li><a href="#fExpectedException">fExpectedException</a>
<ul>
<li><strong>fAuthorizationException</strong></li>
<li><a href="#fEmptySetException">fEmptySetException</a></li>
<li><a href="#fNoRemainingException">fNoRemainingException</a></li>
<li><a href="#fNoRowsException">fNoRowsException</a></li>
<li><a href="#fNotFoundException">fNotFoundException</a></li>
<li><a href="#fValidationException">fValidationException</a></li>
</ul>
</li>
<li><a href="#fUnexpectedException">fUnexpectedException</a>
<ul>
<li><a href="#fConnectivityException">fConnectivityException</a></li>
<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
<li><a href="#fProgrammerException">fProgrammerException</a></li>
<li><a href="#fSQLException">fSQLException</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<p>
fAuthorizationException is a sub-class of <a href="#fExpectedException">fExpectedException</a> that indicates some sort of authorization error has occurred.
</p>

<p>
<em>This space intentionally left blank</em>
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fAuthorizationException-api">fAuthorizationException API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fAuthorizationException">Class Documentation</a></li>
		<li><strong><a href="#fAuthorizationException-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fExpectedException">fExpectedException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fDatabase">fDatabase</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b</span></div>
<p class="short_description">An exception caused by an authorization error</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b</th><td>The initial implementation <span class="date">5/9/11</span></td></tr></table></div>
<div class="genealogy">	
	<h4>Genealogy</h4>
		<div class="class_tree">
		<h5>Class Tree</h5>
		<pre class="class_tree">Exception
   |
   --<a href="#fException">fException</a>
      |
      --<a href="#fExpectedException">fExpectedException</a>
         |
         --fAuthorizationException</pre>
	</div>
		<div class="inherited_variables">
	<h5>Inherited Variables</h5>
		<dl>
		<dt class="protected">$code</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$file</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$line</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$message</dt>
	<dd class="protected"> </dd>
		<dt class="private">$previous</dt>
	<dd class="private"> </dd>
		<dt class="private">$string</dt>
	<dd class="private"> </dd>
		<dt class="private">$trace</dt>
	<dd class="private"> </dd>
		</dl>
		</div>
		<div class="inherited_methods">
	<h5>Inherited Methods</h5>
		<dl>
	  	  <dt class="public"><a href="#fException-api-__construct"><tt>fException::__construct()</tt></a></dt>
	  <dd class="public">Sets the message for the exception, allowing for string interpolation and internationalization</dd>
	  	  <dt class="public"><a href="#fException-api-__get"><tt>fException::__get()</tt></a></dt>
	  <dd class="public">All requests that hit this method should be requests for callbacks</dd>
	  	  <dt class="protected"><a href="#fException-api-compose"><tt>fException::compose()</tt></a></dt>
	  <dd class="protected">Composes text using <a href="#fText">fText</a> if loaded</dd>
	  	  <dt class="protected"><a href="#fException-api-dump"><tt>fException::dump()</tt></a></dt>
	  <dd class="protected">Creates a string representation of any variable using predefined strings for booleans, <tt>NULL</tt> and empty strings</dd>
	  	  <dt class="public"><a href="#fException-api-formatTrace"><tt>fException::formatTrace()</tt></a></dt>
	  <dd class="public">Gets the backtrace to currently called exception</dd>
	  	  <dt class="protected"><a href="#fException-api-getCSSClass"><tt>fException::getCSSClass()</tt></a></dt>
	  <dd class="protected">Returns the CSS class name for printing information about the exception</dd>
	  	  <dt class="protected"><a href="#fException-api-prepare"><tt>fException::prepare()</tt></a></dt>
	  <dd class="protected">Prepares content for output into HTML</dd>
	  	  <dt class="public"><a href="#fException-api-printMessage"><tt>fException::printMessage()</tt></a></dt>
	  <dd class="public">Prints the message inside of a div with the class being 'exception %THIS_EXCEPTION_CLASS_NAME%'</dd>
	  	  <dt class="public"><a href="#fException-api-printTrace"><tt>fException::printTrace()</tt></a></dt>
	  <dd class="public">Prints the backtrace to currently called exception inside of a pre tag with the class being 'exception %THIS_EXCEPTION_CLASS_NAME% trace'</dd>
	  	  <dt class="public"><a href="#fException-api-registerCallback"><tt>fException::registerCallback()</tt></a></dt>
	  <dd class="public">Adds a callback for when certain types of exceptions are created</dd>
	  	  <dt class="public"><a href="#fException-api-reorderMessage"><tt>fException::reorderMessage()</tt></a></dt>
	  <dd class="public">Reorders list items in the message based on simple string matching</dd>
	  	  <dt class="public"><a href="#fException-api-setMessage"><tt>fException::setMessage()</tt></a></dt>
	  <dd class="public">Allows the message to be overwriten</dd>
	  	  <dt class="public"><a href="#fException-api-splitMessage"><tt>fException::splitMessage()</tt></a></dt>
	  <dd class="public">Splits an exception with an HTML list into multiple strings each containing part of the original message</dd>
	  	</dl>
		<dl>
	  	  <dt class="public">constructor __construct ( [$message = ], [$code = ], [$previous = ] )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__clone (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__toString (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getCode (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getFile (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getLine (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getMessage (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getPrevious (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTrace (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTraceAsString (  )</dt>
	  <dd class="public"></dd>
	  	</dl>
		</div>
	</div>			</section>
		</div>
		<section class="main">
<h2 id="fBuffer">fBuffer</h2>
<div class="sidebar">
<h3 id="fBuffer-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fBuffer">Class Documentation</a></strong></li>
<li><a href="#fBuffer-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fBuffer-docs-StartingandStopping">Starting and Stopping</a></li>
<li><a href="#fBuffer-docs-GettingErasingandReplacing">Getting, Erasing and Replacing</a></li>
<li><a href="#fBuffer-docs-Capturing">Capturing</a></li>
</ul>
</div>

<p>
The fBuffer class is a fairly straight-forward static class designed to make the <a class="ext-link" href="http://php.net/outcontrol"><span class="icon">output buffer</span></a> functions in PHP a little more user-friendly. Only a single level of buffering is supported, however it has been supplemented with buffer capture support and replace functionality.
</p>

<p>
Output buffering is essential if you wish to change the headers a page sends after some of the output has been sent, and is also utilized by the <a href="#fTemplating">fTemplating</a> class for fully buffered output that allows changing values until right before the buffer is sent to the user.
</p>

<h3 id="fBuffer-docs-StartingandStopping">Starting and Stopping</h3>

<p>
Normally when using the output buffer function you call <a class="ext-link" href="http://php.net/ob_start"><span class="icon"><code>ob_start()</code></span></a> to start output buffering and one of the <code>ob_end_*()</code> methods to stop buffering. The fBuffer class instead uses the <a href="#fBuffer-api-start"><code>start()</code></a> and <a href="#fBuffer-api-stop"><code>stop()</code></a> methods. Here is an example:
</p>
<pre class="block php"><code>fBuffer::start();
// Execute code that produces output
// Send a header
// Execute more code that creates output
fBuffer::stop();</code></pre>

<p>
 Gzip compression of the output buffer can be turned (if the <a class="ext-link" href="http://php.net/zlib"><span class="icon">zlib extension</span></a> is installed) by passing <code>TRUE</code> to <code>start()</code>.
</p>
<pre class="block php"><code>// Start the output buffer with gzip compression
fBuffer::start(TRUE);</code></pre>

<p>
 You can check to see if buffering has been started by calling <a href="#fBuffer-api-isStarted"><code>isStarted()</code></a>:
</p>
<pre class="block php"><code>if (!fBuffer::isStarted()) {
    fBuffer::start();
}</code></pre>

<h3 id="fBuffer-docs-GettingErasingandReplacing">Getting, Erasing and Replacing</h3>

<p>
To get the current contents of the output buffer, simply call <a href="#fBuffer-api-get"><code>get()</code></a>:
</p>
<pre class="block php"><code>$current_buffer = fBuffer::get();</code></pre>

<p>
 If you wish to get rid of the buffered contents, call <a href="#fBuffer-api-erase"><code>erase()</code></a>:
</p>
<pre class="block php"><code>// Get rid of the current buffer contents
fBuffer::erase();</code></pre>

<p>
 Also sometimes useful is the ability to replace a given string in the buffer with another. In this situation you can use the <a href="#fBuffer-api-replace"><code>replace()</code></a> method:
</p>
<pre class="block php"><code>// Output stuff

// This would replace every instance of 'foo' with 'bar'
fBuffer::replace('foo', 'bar');</code></pre>

<h3 id="fBuffer-docs-Capturing">Capturing</h3>

<p>
Some of the built-in PHP functions (and other third party code) will only output content, as opposed to returning it for further processing. The fBuffer class provides two methods, <a href="#fBuffer-api-startCapture"><code>startCapture()</code></a> and <a href="#fBuffer-api-stopCapture"><code>stopCapture()</code></a>, that make it easy to intercept such output.
</p>
<pre class="block php"><code>// Begin capturing, everything passed to print or echo after here will be captured
fBuffer::startCapture();

// Execute code to output content
// ...

// Grab the captured output
$captured_content = fBuffer::stopCapture();</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fBuffer-api">fBuffer API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fBuffer">Class Documentation</a></li>
		<li><strong><a href="#fBuffer-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fBuffer-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fBuffer-api-erase">erase()</a></li>
	  			<li><a href="#fBuffer-api-get">get()</a></li>
	  			<li><a href="#fBuffer-api-isStarted">isStarted()</a></li>
	  			<li><a href="#fBuffer-api-replace">replace()</a></li>
	  			<li class="protected"><a href="#fBuffer-api-reset">reset()</a></li>
	  			<li><a href="#fBuffer-api-start">start()</a></li>
	  			<li><a href="#fBuffer-api-startCapture">startCapture()</a></li>
	  			<li><a href="#fBuffer-api-stop">stop()</a></li>
	  			<li><a href="#fBuffer-api-stopCapture">stopCapture()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fTemplating">fTemplating</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b3</span></div>
<p class="short_description">Provides a single, simplified interface for <a class="ext-link" href="http://php.net/outcontrol"><span class="icon">output buffering</span></a> to prevent nested buffering issues and provide a more logical API</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b3</th><td>Added a check to ensure the zlib extension is installd when doing gzipped buffering <span class="date">5/20/10</span></td></tr><tr><th>1.0.0b2</th><td>Added the <tt>$gzip</tt> parameter to <a href="#fBuffer-api-start"><tt>start()</tt></a> <span class="date">5/19/10</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">3/16/08</span></td></tr></table></div>
<div class="class_methods static" id="fBuffer-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fBuffer-api-erase" class="method static"><span class="resolution">::</span><span class="name">erase()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Erases the output buffer</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">erase</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fBuffer-api-get" class="method static"><span class="resolution">::</span><span class="name">get()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns the contents of output buffer</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">get</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					The contents of the output buffer
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fBuffer-api-isStarted" class="method static"><span class="resolution">::</span><span class="name">isStarted()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Checks if buffering has been started</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">isStarted</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					If buffering has been started
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fBuffer-api-replace" class="method static"><span class="resolution">::</span><span class="name">replace()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Replaces a value in the output buffer</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">replace</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$find</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$replace</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$find</td>
				<td class="param_description">The string to find</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$replace</td>
				<td class="param_description">The string to replace</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fBuffer-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration and buffer of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fBuffer-api-start" class="method static"><span class="resolution">::</span><span class="name">start()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Starts output buffering</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">start</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$gzip</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$gzip</td>
				<td class="param_description">If the buffered output should be gzipped using <a class="ext-link" href="http://php.net/ob_gzhandler"><span class="icon"><tt>ob_gzhandler()</tt></span></a></td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fBuffer-api-startCapture" class="method static"><span class="resolution">::</span><span class="name">startCapture()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Starts capturing output, should be used with stopCapture() to grab output from code that does not offer an option of returning a value instead of outputting it</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">startCapture</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fBuffer-api-stop" class="method static"><span class="resolution">::</span><span class="name">stop()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Stops output buffering, flushing everything to the browser</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">stop</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fBuffer-api-stopCapture" class="method static"><span class="resolution">::</span><span class="name">stopCapture()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Stops capturing output, returning what was captured</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">stopCapture</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					The captured output
				</p>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fCRUD">fCRUD</h2>
<div class="sidebar">
<h3 id="fCRUD-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fCRUD">Class Documentation</a></strong></li>
<li><a href="#fCRUD-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fCRUD-docs-StickySearchValues">Sticky Search Values</a></li>
<li><a href="#fCRUD-docs-SortableColumnsSticky">Sortable Columns (Sticky)</a></li>
<li><a href="#fCRUD-docs-ResettingStickyValues">Resetting Sticky Values</a></li>
<li><a href="#fCRUD-docs-RowColors">Row Colors</a></li>
</ul>
</div>

<p>
The fCRUD class is a static class that provides functionality for the CRUD (create, read, update, delete) pages that power most dynamic websites and online applications. The various methods have been implemented to help reduce the amount of code needed to a standard page, letting the developer focus on the unique aspects of sites.
</p>

<h3 id="fCRUD-docs-StickySearchValues">Sticky Search Values</h3>

<p>
When filtering the objects to display when executing the <code>list</code> action for a CRUD page, it will often times be required to remember the filtered values even after the user had edited or deleted an object. While it is possible to pass the filter values around in the URL, it leads to lots of extra code and more complex URLs.
</p>

<p>
As a solution, the <a href="#fCRUD-api-getSearchValue"><code>getSearchValue()</code></a> method will always return the last value selected by a user for a given <code>GET</code> or <code>POST</code> parameter. When a value is pulled out of <code>GET</code> or <code>POST</code> data, the value is saved in the users session. If the user then leaves the page and comes back without a value, the value will be looked up in the session. <strong>This method should be used in place of <a href="#fRequest-api-get">fRequest::get()</a>.</strong>
</p>

<p>
Here is an example of the usage:
</p>
<pre class="block php"><code>// Get the parameter search_terms from GET, POST or the session
$search_terms = fCRUD::getSearchValue('search_terms');

// Here $search_terms would be used to filter the objects being displayed
// The SetCreator class is not a real class, but used as an example
$results = SetCreator::findUsers($search_terms);</code></pre>

<p>
 In order to provide for accessibility and usability, it is recommended to redirect the user whenever values are pulled from a location other than <code>GET</code> data. This way the user can bookmark results, send a link via email, etc. The <a href="#fCRUD-api-redirectWithLoadedValues"><code>redirectWithLoadedValues()</code></a> method will take the currently requested URL and will redirect the user to a new URL that includes all of the search values (and sorting values) that were pulled from the session. If no values are pulled from the session, no redirection will happen.
</p>

<p>
Here is the example above with the redirection code added:
</p>
<pre class="block php"><code>// Get the parameter search_terms from GET, POST or the session
$search_terms = fCRUD::getSearchValue('search_terms');

// Redirect the user if any values were loaded from the session
fCRUD::redirectWithLoadedValues();

// Here $search_terms would be used to filter the objects being displayed
// The SetCreator class is not a real class, but used as an example
$results = SetCreator::findUsers($search_terms);</code></pre>

<h3 id="fCRUD-docs-SortableColumnsSticky">Sortable Columns (Sticky)</h3>

<p>
Having sortable columns on a CRUD page is often a huge usability boost. Unfortunately sortable columns can also be a pain to implement. The fCRUD class provides a few methods to help make it a little easier: <a href="#fCRUD-api-getSortColumn"><code>getSortColumn()</code></a>, <a href="#fCRUD-api-getSortDirection"><code>getSortDirection()</code></a>, <a href="#fCRUD-api-printSortableColumn"><code>printSortableColumn()</code></a> and <a href="#fCRUD-api-getColumnClass"><code>getColumnClass()</code></a>.
</p>

<p>
The <a href="#fCRUD-api-getSortColumn"><code>getSortColumn()</code></a> takes a single parameter, a <code>$possible_columns</code> array, and returns the one specified by the <code>GET</code> value for the parameter <code>sort</code>. The method also will save the last sort column and will reload it from the session if none is specified in the <code>GET</code> data. If neither of these methods can determine the sort column it will default to the first value in the <code>$possible_columns</code> array.
</p>

<p>
<a href="#fCRUD-api-getSortDirection"><code>getSortDirection()</code></a> takes a single parameter, <code>$default_direction</code>, and will return the sorting direction specified in the <code>GET</code> data for the parameter <code>dir</code>. The possible values for <code>$default_direction</code> (and the return value) are <code>'asc'</code> and <code>'desc'</code>. If no value is specified in the <code>GET</code> data, it will try to load the last sort direction from the session. If this can not be done the sort direction will default to the values specified in <code>$default_direction</code>.
</p>

<p>
These two methods work with the <a href="#fCRUD-api-redirectWithLoadedValues"><code>redirectWithLoadedValues()</code></a> method the same way that <a href="#fCRUD-api-getSearchValue"><code>getSearchValue()</code></a> does. Here is an example of the three methods being used:
</p>
<pre class="block php"><code>// Set the users to be sortable by name or email, defaulting to name
$sort = fCRUD::getSortColumn(array('name', 'email'));

// Set the sorting to default to ascending
$dir  = fCRUD::getSortDirection('asc');

// Redirect the user if one of the values was loaded from the session
fCRUD::redirectWithLoadedValues();

// Use the sort column and direction in your code to load the objects in the proper order
$users = SetCreator::findUsers($sort, $dir);</code></pre>

<p>
 The second step to getting sortable columns on CRUD pages is to create the links to allow sorting. The <a href="#fCRUD-api-printSortableColumn"><code>printSortableColumn()</code></a> method accomplishes this task.
</p>

<p>
<a href="#fCRUD-api-printSortableColumn"><code>printSortableColumn()</code></a> takes two parameters, with the second one being optional. The first is the <code>$column</code> to make sortable. This value will be returned when calling <a href="#fCRUD-api-getSortColumn"><code>getSortColumn()</code></a>. The second, optional, parameter <code>$column_name</code> allows you to specify a display name to be used for <code>$column</code>. If <code>$column_name</code> is not specified, the <a href="#fGrammar-api-humanize">fGrammar::humanize()</a>ed version of <code>$column</code> will be used instead.
</p>

<p>
<a href="#fCRUD-api-printSortableColumn"><code>printSortableColumn()</code></a> prints out an <code>a</code> tag containing a link to the current URL with the current query string, except the <code>sort</code> and <code>dir</code> parameters will be changed to the correct values for the link. If a user clicks a sortable column link that is already sorting the object, the direction will be reversed. In addition, the <code>a</code> tag will have the CSS class <code>sortable_column</code> applied to it. If the link being created is for the column currently being sorted, a second CSS class <code>asc</code> or <code>desc</code> will be added to the <code>a</code> tag as appropriate. Here is an example of the PHP and corresponding HTML:
</p>
<pre class="block html"><code>&lt;table&gt;
    &lt;tr&gt;
        &lt;th&gt;&lt;? fCRUD::printSortableColumn('name') ?&gt;&lt;/th&gt;
        &lt;th&gt;&lt;? fCRUD::printSortableColumn('email', 'E-Mail') ?&gt;&lt;/th&gt;
    &lt;/tr&gt;
    ...
&lt;/table&gt;</code></pre>
<pre class="block html"><code>&lt;!-- The following HTML is presented as if the name column is currently being sorted ascending --&gt;
&lt;table&gt;
    &lt;tr&gt;
        &lt;th&gt;&lt;a href=&quot;{current_url}?sort=name&amp;amp;dir=desc&quot; class=&quot;sortable_column asc&quot;&gt;Name&lt;/a&gt;&lt;/th&gt;
        &lt;th&gt;&lt;a href=&quot;{current_url}?sort=email&amp;amp;dir=asc&quot; class=&quot;sortable_column&quot;&gt;E-Mail&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
    ...
&lt;/table&gt;</code></pre>

<p>
 Finally, when displaying the object information it might be nice to include a visual indication of which column is sorted on each row. This way if the user has scrolled so the column headers are out of view, they can still remember which column is being sorted. This can be accomplished by using the <a href="#fCRUD-api-getColumnClass"><code>getColumnClass()</code></a> method:
</p>
<pre class="block html"><code>&lt;tr&gt;
    &lt;td class=&quot;&lt;? fCRUD::getColumnClass('name') ?&gt;&quot;&gt;&lt;?php echo $object-&gt;getName() ?&gt;&lt;/td&gt;
    &lt;td class=&quot;&lt;? fCRUD::getColumnClass('email') ?&gt;&quot;&gt;&lt;?php echo $object-&gt;getEmail() ?&gt;&lt;/td&gt;
&lt;/tr&gt;</code></pre>
<pre class="block html"><code>&lt;!-- The following HTML is presented as if the name column is currently being sorted ascending --&gt;
&lt;tr&gt;
    &lt;td class=&quot;sorted&quot;&gt;Will&lt;/th&gt;
    &lt;td class=&quot;&quot;&gt;will@example.com&lt;/td&gt;
&lt;/tr&gt;</code></pre>

<p>
 If you are using columns from related tables, simple include the table name and a <code>.</code> when passing the column name to <a href="#fCRUD-api-printSortableColumn"><code>printSortableColumn()</code></a> and <a href="#fCRUD-api-getColumnClass"><code>getColumnClass()</code></a>. To sort by the <code>name</code> column in the <code>groups</code> table, just use <code>groups.name</code>.
</p>

<h3 id="fCRUD-docs-ResettingStickyValues">Resetting Sticky Values</h3>

<p>
Since search values and sortable columns are saved in the sessions, whenever a user returns to the page the saved values will be loaded. If you want to allow the user to reset their stored values, simply add a <code>reset</code> parameter (without an <code>=</code> or a value) to the end of the query string. This will cause all stored values to be erased, and the user to be redirected to the same URL without the <code>reset</code> parameter. Here are a couple of examples:
</p>
<pre class="block html"><code>&lt;!--
All sticky search values and sorting information would be erased the the user would be redirected to /users/
--&gt;
&lt;a href=&quot;/users/?reset&quot;&gt;Users&lt;/a&gt;

&lt;!--
In this case the user would be redirected to /galleries/?gallery_id=3
--&gt;
&lt;a href=&quot;/galleries/?gallery_id=3&amp;reset&quot;&gt;Gallery&lt;/a&gt;

&lt;!--
This would do nothing since reset is not at the end of the query string
--&gt;
&lt;a href=&quot;/galleries/?reset&amp;gallery_id=3&quot;&gt;Gallery&lt;/a&gt;

&lt;!--
This would do nothing since reset is followed by =. By not allowing an =, we prevent the possibility of
conflicting with a real query string parameter called reset.
--&gt;
&lt;a href=&quot;/galleries/?gallery_id=3&amp;reset=&quot;&gt;Gallery&lt;/a&gt;</code></pre>

<h3 id="fCRUD-docs-RowColors">Row Colors</h3>

<p>
A common feature for list tables is to include alternating row colors (via CSS) to allow users to track rows across a table. The <a href="#fCRUD-api-getRowClass"><code>getRowClass()</code></a> method provides functionality to accomplish this in a dynamic way that will also highlight a row that has just been added or updated.
</p>

<p>
The method takes two parameters, <code>$row_value</code> and <code>$affected_value</code>. When these two values are not equal the method will return <code>'odd'</code> and <code>'even'</code> on an alternating basis. When the two parameters are equal the method will return <code>highlighted</code>.
</p>

<p>
Here is an example of usage:
</p>
<pre class="block php"><code>$user_id = fRequest::get('user_id');
$users   = SetCreator::findUsers();

foreach ($users as $user) {
    ?&gt;
    &lt;tr class=&quot;&lt;?php echo fCRUD::getRowClass($user-&gt;getUserId(), $user_id) ?&gt;&quot;&gt;
        &lt;td&gt;&lt;?php echo $user-&gt;getName() ?&gt;&lt;/td&gt;
        &lt;td&gt;&lt;?php echo $user-&gt;getEmail() ?&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;?
}</code></pre>

<p>
 The output from the above PHP would be:
</p>
<pre class="block html"><code>&lt;!-- The following HTML is presented as if $user_id = 1 and the user id for Will was 1 --&gt;
&lt;tr class=&quot;odd&quot;&gt;
    &lt;td&gt;Joe&lt;/td&gt;
    &lt;td&gt;joe@example.com&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;highlighted&quot;&gt;
    &lt;td&gt;Will&lt;/td&gt;
    &lt;td&gt;will@example.com&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&quot;even&quot;&gt;
    &lt;td&gt;Zach&lt;/td&gt;
    &lt;td&gt;zach@example.com&lt;/td&gt;
&lt;/tr&gt;</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fCRUD-api">fCRUD API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fCRUD">Class Documentation</a></li>
		<li><strong><a href="#fCRUD-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fCRUD-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fCRUD-api-getColumnClass">getColumnClass()</a></li>
	  			<li><a href="#fCRUD-api-getRowClass">getRowClass()</a></li>
	  			<li><a href="#fCRUD-api-getSearchValue">getSearchValue()</a></li>
	  			<li><a href="#fCRUD-api-getSortColumn">getSortColumn()</a></li>
	  			<li><a href="#fCRUD-api-getSortDirection">getSortDirection()</a></li>
	  			<li><a href="#fCRUD-api-printSortableColumn">printSortableColumn()</a></li>
	  			<li><a href="#fCRUD-api-redirectWithLoadedValues">redirectWithLoadedValues()</a></li>
	  			<li class="protected"><a href="#fCRUD-api-reset">reset()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fGrammar">fGrammar</a></li>
		<li><a href="#fHTML">fHTML</a></li>
		<li><a href="#fRequest">fRequest</a></li>
		<li><a href="#fSession">fSession</a></li>
		<li><a href="#fURL">fURL</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b5</span></div>
<p class="short_description">Provides miscellaneous functionality for <a class="ext-link" href="http://en.wikipedia.org/wiki/Create,_read,_update_and_delete"><span class="icon">CRUD-like</span></a> pages</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b5</th><td>Updated class to use new <a href="#fSession">fSession</a> API <span class="date">10/23/09</span></td></tr><tr><th>1.0.0b4</th><td>Updated class to use new <a href="#fSession">fSession</a> API <span class="date">5/8/09</span></td></tr><tr><th>1.0.0b3</th><td>Backwards Compatiblity Break - moved printOption() to <a href="#fHTML-api-printOption"><tt>fHTML::printOption()</tt></a>, showChecked() to <a href="#fHTML">fHTML</a>showChecked(), removeListItems() and reorderListItems() to <a href="#fException-api-splitMessage"><tt>fException::splitMessage()</tt></a>, generateRequestToken() to <a href="#fRequest">fRequest</a>generateCSRFToken(), and validateRequestToken() to <a href="#fRequest-api-validateCSRFToken"><tt>fRequest::validateCSRFToken()</tt></a> <span class="date">5/8/09</span></td></tr><tr><th>1.0.0b2</th><td>Fixed a bug preventing loaded search values from being included in redirects <span class="date">3/18/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="class_methods static" id="fCRUD-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fCRUD-api-getColumnClass" class="method static"><span class="resolution">::</span><span class="name">getColumnClass()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Return the string <tt>'sorted'</tt> if <tt>$column</tt> is the column that is currently being sorted by, otherwise returns <tt>''</tt></p>
								<p>This method will only be useful if used with the other sort methods  <a href="#fCRUD-api-printSortableColumn"><tt>printSortableColumn()</tt></a>, <a href="#fCRUD-api-getSortColumn"><tt>getSortColumn()</tt></a> and <a href="#fCRUD-api-getSortDirection"><tt>getSortDirection()</tt></a>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getColumnClass</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$column</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to check</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The CSS class for the column, either <tt>''</tt> or <tt>'sorted'</tt>
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCRUD-api-getRowClass" class="method static"><span class="resolution">::</span><span class="name">getRowClass()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns a CSS class name for a row</p>
								<p>Will return <tt>'even'</tt>, <tt>'odd'</tt>, or <tt>'highlighted'</tt> if the two parameters  are equal and not <tt>NULL</tt>. The first call to this method will return  the appropriate class concatenated with <tt>' first'</tt>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getRowClass</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$row_value</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$affected_value</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$row_value</td>
				<td class="param_description">The value from the row</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$affected_value</td>
				<td class="param_description">The value that was just added or updated</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The css class
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCRUD-api-getSearchValue" class="method static"><span class="resolution">::</span><span class="name">getSearchValue()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Gets the current value of a search field</p>
								<p>If a value is an empty string and no cast to is specified, the value will  become <tt>NULL</tt>.</p><p>If a query string of <tt>?reset</tt> is passed, all previous search values will  be erased.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">getSearchValue</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$cast_to</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$default</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column that is being pulled back</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$cast_to</td>
				<td class="param_description">The data type to cast to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$default</td>
				<td class="param_description">The default value</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The current value
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCRUD-api-getSortColumn" class="method static"><span class="resolution">::</span><span class="name">getSortColumn()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Gets the current column to sort by, defaults to first one specified</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getSortColumn</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$possible_column</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$possible_column <em>[, ... ]</em></td>
				<td class="param_description">The columns that can be sorted by, defaults to first</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The column to sort by
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCRUD-api-getSortDirection" class="method static"><span class="resolution">::</span><span class="name">getSortDirection()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Gets the current sort direction</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getSortDirection</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$default_direction</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$default_direction</td>
				<td class="param_description">The default direction, <tt>'asc'</tt> or <tt>'desc'</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The direction, <tt>'asc'</tt> or <tt>'desc'</tt>
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCRUD-api-printSortableColumn" class="method static"><span class="resolution">::</span><span class="name">printSortableColumn()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Prints a sortable column header <tt>a</tt> tag</p>
								<p>The a tag will include the CSS class <tt>'sortable_column'</tt> and the  direction being sorted, <tt>'asc'</tt> or <tt>'desc'</tt>.</p><pre class="block php"><code>fCRUD::printSortableColumn('name', 'Name');</code></pre><p>would create the following HTML based on the page context</p><pre class="block html"><code><!-- If name is the current sort column in the asc direction, the output would be -->
<a href="?sort=name&dir=desc" class="sorted_column asc">Name</a>
<!-- If name is not the current sort column, the output would be -->
<a href="?sort-name&dir=asc" class="sorted_column">Name</a></code></pre>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">printSortableColumn</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column_name</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to create the sortable header for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column_name</td>
				<td class="param_description">This will override the humanized version of the column</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCRUD-api-redirectWithLoadedValues" class="method static"><span class="resolution">::</span><span class="name">redirectWithLoadedValues()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Checks to see if any values (search or sort) were loaded from the session, and if so redirects the user to the current URL with those values added</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">redirectWithLoadedValues</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fCRUD-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration and data of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fCache">fCache</h2>
<div class="sidebar">
<h3 id="fCache-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fCache">Class Documentation</a></strong></li>
<li><a href="#fCache-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fCache-docs-Instantiation">Instantiation</a>
<ul>
<li><a href="#fCache-docs-APCBackend">APC Backend</a></li>
<li><a href="#fCache-docs-DatabaseBackend">Database Backend</a></li>
<li><a href="#fCache-docs-DirectoryBackend">Directory Backend</a></li>
<li><a href="#fCache-docs-FileBackend">File Backend</a></li>
<li><a href="#fCache-docs-MemcacheBackend">Memcache Backend</a></li>
<li><a href="#fCache-docs-RedisBackend">Redis Backend</a></li>
<li><a href="#fCache-docs-XCacheBackend">XCache Backend</a></li>
</ul>
</li>
<li><a href="#fCache-docs-SettingValues">Setting Values</a></li>
<li><a href="#fCache-docs-GettingValues">Getting Values</a></li>
<li><a href="#fCache-docs-DeletingValues">Deleting Values</a></li>
<li><a href="#fCache-docs-ClearingtheCache">Clearing the Cache</a></li>
</ul>
</div>

<p>
The fCache class provides a consistent caching interface that can use the <a href="#fCache-docs-APCBackend">APC</a>, <a href="#fCache-docs-DatabaseBackend">database</a>, <a href="#fCache-docs-DirectoryBackend">directory</a>, <a href="#fCache-docs-FileBackend">file</a>, <a href="#fCache-docs-MemcacheBackend">Memcache</a>, <a href="#fCache-docs-RedisBackend">Redis</a> or <a href="#fCache-docs-XCacheBackend">XCache</a> backends. It can be used to cache any end-developer data, but can also be used by the <a href="#fDatabase">fDatabase</a>, <a href="#fSQLTranslation">fSQLTranslation</a> and <a href="#fSchema">fSchema</a> classes.
</p>

<h3 id="fCache-docs-Instantiation">Instantiation</h3>

<p>
Creating an instance of fCache requires a <code>$type</code>, and possibly a <code>$data_store</code> and <code>$options</code>. The following types are supported. The <code>$data_store</code> and <code>$config</code> parameters are explained for each backend separately.
</p>

<ul>
<li><a href="#fCache-docs-APCBackend"><code>apc</code></a></li>
<li><a href="#fCache-docs-DatabaseBackend"><code>database</code></a></li>
<li><a href="#fCache-docs-DirectoryBackend"><code>directory</code></a></li>
<li><a href="#fCache-docs-FileBackend"><code>file</code></a></li>
<li><a href="#fCache-docs-MemcacheBackend"><code>memcache</code></a></li>
<li><a href="#fCache-docs-RedisBackend"><code>redis</code></a></li>
<li><a href="#fCache-docs-XCacheBackend"><code>xcache</code></a></li>
</ul>

<h4 id="fCache-docs-APCBackend">APC Backend</h4>

<p>
Using <a class="ext-link" href="http://us.php.net/ref.apc"><span class="icon">APC</span></a> for the backend only requires the <code>$type</code> parameter be set to <code>'apc'</code>. The <code>$data_store</code> and <code>$config</code> parameters are unused.
</p>
<pre class="block php"><code>$cache = new fCache('apc');</code></pre>

<p>
 APC is best suited for smaller values where performance is of utmost concern.
</p>

<p>
<em>Please note that APC shares values server-wide, so cache keys should be appropriately unique in case there are multiple sites being hosted on the same server.</em>
</p>

<h4 id="fCache-docs-DatabaseBackend">Database Backend</h4>

<p>
Using a database for the backend requires the <code>$type</code> parameter be set to <code>'database'</code> and the <code>$data_store</code> be an <a href="#fDatabase">fDatabase</a> object. The <code>$config</code> parameter must be an array with the following keys:
</p>

<ul>
<li><code>table</code>: The database table to use for caching</li>
<li><code>key_column</code>: The column to store the cache key in - must support at least 250 character strings</li>
<li><code>value_column</code>: The column to store the serialized value in - this should probably be a TEXT column to support large values, or BLOB if binary serialization is used</li>
<li><code>value_data_type</code>: If a BLOB column is being used for the <code>value_column</code>, this should be set to <code>'blob'</code>, otherwise <code>'string'</code></li>
<li><code>ttl_column</code>: The column to store the expiration timestamp of the cached entry - this should be an integer</li>
</ul>
<pre class="block php"><code>$db = new fDatabase('mysql', 'mydb', 'username', 'password');
$config = array(
    'table'           =&gt; 'sessions',
    'key_column'      =&gt; 'session_id',
    'value_column'    =&gt; 'values',
    'value_data_type' =&gt; 'string',
    'ttl_column'      =&gt; 'expiration'
);
$cache = new fCache('database', $db, $config);</code></pre>

<p>
 Each value is stored in a separate row in the table. A database backend is useful for caching values that need to be shared across servers.
</p>

<h4 id="fCache-docs-DirectoryBackend">Directory Backend</h4>

<p>
Using a directory for the backend requires the <code>$type</code> parameter be set to <code>'directory'</code> and the <code>$data_store</code> be the path to a directory that is writable. The <code>$config</code> parameter is unused.
</p>
<pre class="block php"><code>$cache = new fCache('directory', '/path/to/dir');</code></pre>

<p>
 A directory backend is generally useful for caching larger values on a single server.
</p>

<p>
Each value in a directory cache is stored in a separate file, with the filenames being hashes of the cache key. The first line of the file is the integer unix timestamp of when the value expires. All subsequent lines in the file are part of the value. An expiration timestamp of <code>0</code> indicates no expiration.
</p>

<h4 id="fCache-docs-FileBackend">File Backend</h4>

<p>
For file caches, the <code>$type</code> should be <code>'file'</code> and the <code>$data_store</code> should be a file path. The <code>$config</code> parameter is unused. 
</p>
<pre class="block php"><code>$cache = new fCache('file', '/path/to/cache');</code></pre>

<p>
 A file backend is most useful for simple single-server caching that requires no extra hosting infrastructure or uncommon PHP extensions.
</p>

<p>
All values are stored in a serialized array containing the keys, values and expiration timestamps. 
</p>

<h4 id="fCache-docs-MemcacheBackend">Memcache Backend</h4>

<p>
For <a class="ext-link" href="http://www.danga.com/memcached/"><span class="icon">memcache</span></a> caches, the <code>$type</code> should be set to <code>'memcache'</code> and the <code>$data_store</code> should be a <a class="ext-link" href="http://php.net/memcache"><span class="icon">Memcache</span></a> or <a class="ext-link" href="http://php.net/memcached"><span class="icon">Memcached</span></a> object. The <code>$config</code> parameter is unused.
</p>
<pre class="block php"><code>// Using the memcache extension
$memcache = new Memcache();
$memcache-&gt;connect('localhost', 11211);
$cache = new fCache('memcache', $memcache);

// Using the memcached extension
$memcached = new Memcached();
$memcached-&gt;addServer('localhost', 11211);
$cache = new fCache('memcache', $memcached);</code></pre>

<p>
 A memcache backend is useful for caching all sorts of different values, often for larger sites or sites with multiple web servers.
</p>

<h4 id="fCache-docs-RedisBackend">Redis Backend</h4>

<p>
For <a class="ext-link" href="http://redis.io"><span class="icon">Redis</span></a> caches, the <code>$type</code> should be set to <code>'redis'</code> and the <code>$data_store</code> should be an instance of the <code>Redis</code> class from the <a class="ext-link" href="https://github.com/nicolasff/phpredis"><span class="icon">phpredis extension</span></a>. The <code>$config</code> parameter is unused.
</p>
<pre class="block php"><code>$redis = new Redis();
$redis-&gt;connect('localhost');
$cache = new fCache('redis', $redis);</code></pre>

<p>
 A redis backend is useful for caching all sorts of different values, often for larger sites or sites with multiple web servers.
</p>

<h4 id="fCache-docs-XCacheBackend">XCache Backend</h4>

<p>
For <a class="ext-link" href="http://xcache.lighttpd.net/"><span class="icon">XCache</span></a> caches, the <code>$type</code> should be set to <code>'xcache'</code>. The <code>$data_store</code> and <code>$config</code> parameters are unused.
</p>
<pre class="block php"><code>$cache = new fCache('xcache');</code></pre>

<p>
 XCache is best suited for smaller values where performance is of utmost concern.
</p>

<p>
<em>Please note that XCache shares values server-wide, so cache keys should be appropriately unique in case there are multiple sites being hosted on the same server.</em>
</p>

<h3 id="fCache-docs-SettingValues">Setting Values</h3>

<p>
The method <a href="#fCache-api-set"><code>set()</code></a> accepts a <code>$key</code>, <code>$value</code> and optional <code>$ttl</code> (time-to-live). The <code>$key</code> should be a string of 250 characters or less, and the <code>$value</code> should be any PHP data type that can be serialized. <em>The main PHP data type that can not be serialized in a <code>resource</code>.</em>
</p>

<p>
The <code>$key</code> and <code>$value</code> combination will be stored in the cache permanently, unless a <code>$ttl</code> is provided. The <code>$ttl</code> is the number of seconds the cached <code>$value</code> will be accessible. Values with a <code>$ttl</code> will be cleaned up by whatever back-end is providing the cache. <em>Warning: the APC back-end currently functions in such a way that the <code>$ttl</code> will be ignored when getting a value in the same script execution that it is set.</em>
</p>

<p>
<em>Please note that all PHP values are serialized before being stored in the cache. This ensures that the exact same value that goes into the cache will come back out, even if the back-end only supports basic types such as strings and integers.</em>
</p>
<pre class="block php"><code>// This value will last until explicitly deleted or the cache is cleared
$cache-&gt;set('computed_value', $computed_value);

// This value will last for 60 seconds
$cache-&gt;set('other_computed_value', $other_computed_value, 60);</code></pre>

<p>
 It is also possible to only set a value if the <code>$key</code> does not already exist in the cache. This is performed using the <a href="#fCache-api-add"><code>add()</code></a> method. <code>add()</code> takes the exact same parameters as <code>set()</code>, however it returns a boolean indicating if the value was added.
</p>
<pre class="block php"><code>if ($cache-&gt;add('master_value', $master_value)) {
    // Compute a related value and store it also
}</code></pre>

<h3 id="fCache-docs-GettingValues">Getting Values</h3>

<p>
The method <a href="#fCache-api-get"><code>get()</code></a> takes the <code>$key</code> to retrieve the value for, and an optional <code>$default</code> to return if the <code>$key</code> is not set. If <code>$default</code> is not specified, <code>NULL</code> will be returned for any <code>$key</code> that is not currently set.
</p>
<pre class="block php"><code>// This will return NULL if there is no value for 'computed_value'
$cached_value = $cache-&gt;get('computed_value');

// This will return 10 if there is no value for 'computed_value'
$cached_value = $cache-&gt;get('computed_value', 10);</code></pre>

<h3 id="fCache-docs-DeletingValues">Deleting Values</h3>

<p>
Values can be deleted individually from the cache by calling the method <a href="#fCache-api-delete"><code>delete()</code></a> and passing the <code>$key</code> to delete.
</p>
<pre class="block php"><code>$cache-&gt;delete('computed_value');</code></pre>

<h3 id="fCache-docs-ClearingtheCache">Clearing the Cache</h3>

<p>
In addition to deleting specific cache entries, it is also possible to clear all of the entries in the cache. <strong>This will <em>delete all key/value pairs in your cache</em>, and depending on your cache type, may affect all other websites on the same server or all web servers.</strong>
</p>

<p>
<em>Please note that the XCache back-end may require an administrator login and password to clear the cache. This setting, and the login/password settings are controlled by ini settings.</em>
</p>
<pre class="block php"><code>$cache-&gt;clear();</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fCache-api">fCache API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fCache">Class Documentation</a></li>
		<li><strong><a href="#fCache-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="protected variables">
<h4><a href="#fCache-api-class_vars">Variables</a></h4>
<ul>
  	 		<li class="protected"><a href="#fCache-api-config">$config</a></li>
	   	 		<li class="protected"><a href="#fCache-api-data_store">$data_store</a></li>
	   	 		<li class="protected"><a href="#fCache-api-type">$type</a></li>
	   </ul>
</div>
<div class="methods">
<h4><a href="#fCache-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fCache-api-__construct">__construct()</a></li>
	  			<li class="protected"><a href="#fCache-api-__destruct">__destruct()</a></li>
	  			<li><a href="#fCache-api-add">add()</a></li>
	  			<li><a href="#fCache-api-clean">clean()</a></li>
	  			<li><a href="#fCache-api-clear">clear()</a></li>
	  			<li><a href="#fCache-api-delete">delete()</a></li>
	  			<li><a href="#fCache-api-get">get()</a></li>
	  			<li><a href="#fCache-api-save">save()</a></li>
	  			<li class="protected"><a href="#fCache-api-serialize">serialize()</a></li>
	  			<li><a href="#fCache-api-set">set()</a></li>
	  			<li class="protected"><a href="#fCache-api-unserialize">unserialize()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b6</span></div>
<p class="short_description">A simple interface to cache data using different backends</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b6</th><td>Fixed a bug with <a href="#fCache-api-add"><tt>add()</tt></a> setting a value when it shouldn't if no ttl was given for the file backend <span class="date">1/12/12</span></td></tr><tr><th>1.0.0b5</th><td>Added missing documentation for using Redis as a backend <span class="date">8/25/11</span></td></tr><tr><th>1.0.0b4</th><td>Added the <tt>database</tt>, <tt>directory</tt> and <tt>redis</tt> types, added support for the memcached extention and support for custom serialization callbacks <span class="date">6/21/11</span></td></tr><tr><th>1.0.0b3</th><td>Added <tt>0</tt> to the memcache delete method call since otherwise the method triggers notices on some installs <span class="date">5/10/11</span></td></tr><tr><th>1.0.0b2</th><td>Fixed API calls to the memcache extension to pass the TTL as the correct parameter <span class="date">2/1/11</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">4/28/09</span></td></tr></table></div>
<div class="class_variables" id="fCache-api-class_vars">
<h4>Variables</h4>
	<!-- start protected variable -->
	<h5 id="fCache-api-config" class="protected variable"><span class="resolution">-></span><span class="name">config</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>The cache configuration, used for database, directory and file caches</p>
						<p>The array structure for database caches is:  <pre class="block "><code>array(
    'table'        => (string) {the database table to use},
    'key_column'   => (string) {the varchar column to store the key in, should be able to handle at least 250 characters},
    'value_column' => (string) {the text/varchar column to store the value in},
    'ttl_column'   => (string) {the integer column to store the expiration time in}
)</code></pre><p>The array structure for directory caches:  <pre class="block "><code>array(
    'path' => (string) {the directory path with trailing slash}
)</code></pre><p>The array structure for file caches:  <pre class="block "><code>array(
    'path'  => (string) {the file path},
    'state' => (string) {clean or dirty, used to appropriately save}
)</code></pre>
			</div>
		<h6>Type</h6>
		<p class="type">array</p>
	</div>
	<!-- end variable -->
	<!-- start protected variable -->
	<h5 id="fCache-api-data_store" class="protected variable"><span class="resolution">-></span><span class="name">data_store</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>The data store to use</p>
						<p>Either the:</p><ul><li>array structure for file cache</li><li>Memcache or Memcached object for memcache</li><li><a href="#fDatabase">fDatabase</a> object for database</li><li>Redis object for redis</li></ul><p>Not used for apc, directory or xcache</p>
			</div>
		<h6>Type</h6>
		<p class="type">mixed</p>
	</div>
	<!-- end variable -->
	<!-- start protected variable -->
	<h5 id="fCache-api-type" class="protected variable"><span class="resolution">-></span><span class="name">type</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>The type of cache</p>
						<p>The valid values are:</p><ul><li><tt>'apc'</tt></li><li><tt>'database'</tt></li><li><tt>'directory'</tt></li><li><tt>'file'</tt></li><li><tt>'memcache'</tt></li><li><tt>'redis'</tt></li><li><tt>'xcache'</tt></li></ul>
			</div>
		<h6>Type</h6>
		<p class="type">string</p>
	</div>
	<!-- end variable -->
</div>
<div class="class_methods" id="fCache-api-class_methods">
<h4>Methods</h4>
			  			  									<!-- start method -->
			<h5 id="fCache-api-__construct" class="method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Set the type and master key for the cache</p>
								<p>A <tt>file</tt> cache uses a single file to store values in an associative  array and is probably not suitable for a large number of keys.</p><p>Using an <tt>apc</tt> or <tt>xcache</tt> cache will have far better performance  than a file or directory, however please remember that keys are shared  server-wide.</p><p><tt>$config</tt> is an associative array of configuration options for the various  backends. Some backend require additional configuration, while others  provide provide optional settings.</p><p>The following <tt>$config</tt> options must be set for the <tt>database</tt> backend: </p><ul><li><tt>table</tt>: The database table to use for caching</li><li><tt>key_column</tt>: The column to store the cache key in - must support at least 250 character strings</li><li><tt>value_column</tt>: The column to store the serialized value in - this should probably be a <tt>TEXT</tt> column to support large values, or <tt>BLOB</tt> if binary serialization is used</li><li><tt>value_data_type</tt>: If a <tt>BLOB</tt> column is being used for the <tt>value_column</tt>, this should be set to 'blob', otherwise <tt>string</tt></li><li><tt>ttl_column</tt>: The column to store the expiration timestamp of the cached entry - this should be an integer</li></ul><p>The following <tt>$config</tt> for the following items can be set for all backends:  </p><ul><li><tt>serializer</tt>: A callback to serialize data with, defaults to the PHP function <tt>serialize()</tt></li><li><tt>unserializer</tt>: A callback to unserialize data with, defaults to the PHP function <tt>unserialize()</tt></li></ul><p>Common serialization callbacks include:  </p><ul><li><tt>json_encode</tt>/<tt>json_decode</tt></li><li><tt>igbinary_serialize</tt>/<tt>igbinary_unserialize</tt></li></ul><p>Please note that using JSON for serialization will exclude all non-public  properties of objects from being serialized.</p><p>A custom <tt>serialize</tt> and <tt>unserialze</tt> option is <tt>string</tt>, which will cast  all values to a string when storing, instead of serializing them. If a  <tt>__toString()</tt> method is provided for objects, it will be called.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fCache">fCache</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$type</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$data_store</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$config</span><span class="php-code">=</span>array() <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$type</td>
				<td class="param_description">The type of caching to use: <tt>'apc'</tt>, <tt>'database'</tt>, <tt>'directory'</tt>, <tt>'file'</tt>, <tt>'memcache'</tt>, <tt>'redis'</tt>, <tt>'xcache'</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$data_store</td>
				<td class="param_description">The path for a <tt>file</tt> or <tt>directory</tt> cache, an <tt>Memcache</tt> or <tt>Memcached</tt> object for a <tt>memcache</tt> cache, an <a href="#fDatabase">fDatabase</a> object for a <tt>database</tt> cache or a <tt>Redis</tt> object for a <tt>redis</tt> cache - not used for <tt>apc</tt> or <tt>xcache</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$config</td>
				<td class="param_description">Configuration options - see method description for details</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fCache-api-__destruct" class="protected method"><span class="resolution">-></span><span class="name">__destruct()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Cleans up after the cache object</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">__destruct</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fCache-api-add" class="method"><span class="resolution">-></span><span class="name">add()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Tries to set a value to the cache, but stops if a value already exists</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">add</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$key</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$ttl</span><span class="php-code">=</span>0 <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key</td>
				<td class="param_description">The key to store as, this should not exceed 250 characters</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value to store, this will be serialized</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$ttl</td>
				<td class="param_description">The number of seconds to keep the cache valid for, 0 for no limit</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If the key/value pair were added successfully
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fCache-api-clean" class="method"><span class="resolution">-></span><span class="name">clean()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Removes all cache entries that have expired</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">clean</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fCache-api-clear" class="method"><span class="resolution">-></span><span class="name">clear()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Clears the WHOLE cache of every key, use with caution!</p>
								<p>xcache may require a login or password depending on your ini settings.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">clear</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 If the cache was successfully cleared
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fCache-api-delete" class="method"><span class="resolution">-></span><span class="name">delete()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Deletes a value from the cache</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">delete</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$key</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key</td>
				<td class="param_description">The key to delete</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If the delete succeeded
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fCache-api-get" class="method"><span class="resolution">-></span><span class="name">get()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns a value from the cache</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$key</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$default</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key</td>
				<td class="param_description">The key to return the value for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$default</td>
				<td class="param_description">The value to return if the key did not exist</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The cached value or the default value if no cached value was found
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fCache-api-save" class="method"><span class="resolution">-></span><span class="name">save()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Only valid for <tt>file</tt> caches, saves the file to disk</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">save</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fCache-api-serialize" class="protected method"><span class="resolution">-></span><span class="name">serialize()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Serializes a value before storing it in the cache</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">serialize</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value to serialize</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The serialized value
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fCache-api-set" class="method"><span class="resolution">-></span><span class="name">set()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets a value to the cache, overriding any previous value</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">set</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$key</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$ttl</span><span class="php-code">=</span>0 <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key</td>
				<td class="param_description">The key to store as, this should not exceed 250 characters</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value to store, this will be serialized</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$ttl</td>
				<td class="param_description">The number of seconds to keep the cache valid for, 0 for no limit</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If the value was successfully saved
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fCache-api-unserialize" class="protected method"><span class="resolution">-></span><span class="name">unserialize()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Unserializes a value before returning it</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">unserialize</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$value</td>
				<td class="param_description">The serialized value</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The PHP value
				</p>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="fConnectivityException">fConnectivityException</h2>
<div class="sidebar">
<h3 id="fConnectivityException-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fConnectivityException">Class Documentation</a></strong></li>
<li><a href="#fConnectivityException-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<h3 id="fConnectivityException-docs-ExceptionClasses">Exception Classes </h3>

<ul>
<li><a href="#fException">fException</a>
<ul>
<li><a href="#fExpectedException">fExpectedException</a>
<ul>
<li><a href="#fAuthorizationException">fAuthorizationException</a></li>
<li><a href="#fEmptySetException">fEmptySetException</a></li>
<li><a href="#fNoRemainingException">fNoRemainingException</a></li>
<li><a href="#fNoRowsException">fNoRowsException</a></li>
<li><a href="#fNotFoundException">fNotFoundException</a></li>
<li><a href="#fValidationException">fValidationException</a></li>
</ul>
</li>
<li><a href="#fUnexpectedException">fUnexpectedException</a>
<ul>
<li><strong>fConnectivityException</strong></li>
<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
<li><a href="#fProgrammerException">fProgrammerException</a></li>
<li><a href="#fSQLException">fSQLException</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<p>
fConnectivityException is a sub-class of <a href="#fUnexpectedException">fUnexpectedException</a> that indicates some sort of unrecoverable connection error has occurred. This could be used in situations where a database server is not reachable, a remote API could not be contacted, or an FTP connection timed out.
</p>

<p>
<em>This space intentionally left blank</em>
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fConnectivityException-api">fConnectivityException API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fConnectivityException">Class Documentation</a></li>
		<li><strong><a href="#fConnectivityException-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fUnexpectedException">fUnexpectedException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fDatabase">fDatabase</a></li>
		<li><a href="#fEmail">fEmail</a></li>
		<li><a href="#fMailbox">fMailbox</a></li>
		<li><a href="#fSMTP">fSMTP</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b</span></div>
<p class="short_description">An exception caused by a connectivity error</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="genealogy">	
	<h4>Genealogy</h4>
		<div class="class_tree">
		<h5>Class Tree</h5>
		<pre class="class_tree">Exception
   |
   --<a href="#fException">fException</a>
      |
      --<a href="#fUnexpectedException">fUnexpectedException</a>
         |
         --fConnectivityException</pre>
	</div>
		<div class="inherited_variables">
	<h5>Inherited Variables</h5>
		<dl>
		<dt class="protected">$code</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$file</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$line</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$message</dt>
	<dd class="protected"> </dd>
		<dt class="private">$previous</dt>
	<dd class="private"> </dd>
		<dt class="private">$string</dt>
	<dd class="private"> </dd>
		<dt class="private">$trace</dt>
	<dd class="private"> </dd>
		</dl>
		</div>
		<div class="inherited_methods">
	<h5>Inherited Methods</h5>
		<dl>
	  	  <dt class="public"><a href="#fUnexpectedException-api-printMessage"><tt>fUnexpectedException::printMessage()</tt></a></dt>
	  <dd class="public">Prints out a generic error message inside of a <tt>div</tt> with the class being <tt>'exception {exception_class_name}'</tt></dd>
	  	</dl>
		<dl>
	  	  <dt class="public"><a href="#fException-api-__construct"><tt>fException::__construct()</tt></a></dt>
	  <dd class="public">Sets the message for the exception, allowing for string interpolation and internationalization</dd>
	  	  <dt class="public"><a href="#fException-api-__get"><tt>fException::__get()</tt></a></dt>
	  <dd class="public">All requests that hit this method should be requests for callbacks</dd>
	  	  <dt class="protected"><a href="#fException-api-compose"><tt>fException::compose()</tt></a></dt>
	  <dd class="protected">Composes text using <a href="#fText">fText</a> if loaded</dd>
	  	  <dt class="protected"><a href="#fException-api-dump"><tt>fException::dump()</tt></a></dt>
	  <dd class="protected">Creates a string representation of any variable using predefined strings for booleans, <tt>NULL</tt> and empty strings</dd>
	  	  <dt class="public"><a href="#fException-api-formatTrace"><tt>fException::formatTrace()</tt></a></dt>
	  <dd class="public">Gets the backtrace to currently called exception</dd>
	  	  <dt class="protected"><a href="#fException-api-getCSSClass"><tt>fException::getCSSClass()</tt></a></dt>
	  <dd class="protected">Returns the CSS class name for printing information about the exception</dd>
	  	  <dt class="protected"><a href="#fException-api-prepare"><tt>fException::prepare()</tt></a></dt>
	  <dd class="protected">Prepares content for output into HTML</dd>
	  	  <dt class="public"><a href="#fException-api-printMessage"><tt>fException::printMessage()</tt></a></dt>
	  <dd class="public">Prints the message inside of a div with the class being 'exception %THIS_EXCEPTION_CLASS_NAME%'</dd>
	  	  <dt class="public"><a href="#fException-api-printTrace"><tt>fException::printTrace()</tt></a></dt>
	  <dd class="public">Prints the backtrace to currently called exception inside of a pre tag with the class being 'exception %THIS_EXCEPTION_CLASS_NAME% trace'</dd>
	  	  <dt class="public"><a href="#fException-api-registerCallback"><tt>fException::registerCallback()</tt></a></dt>
	  <dd class="public">Adds a callback for when certain types of exceptions are created</dd>
	  	  <dt class="public"><a href="#fException-api-reorderMessage"><tt>fException::reorderMessage()</tt></a></dt>
	  <dd class="public">Reorders list items in the message based on simple string matching</dd>
	  	  <dt class="public"><a href="#fException-api-setMessage"><tt>fException::setMessage()</tt></a></dt>
	  <dd class="public">Allows the message to be overwriten</dd>
	  	  <dt class="public"><a href="#fException-api-splitMessage"><tt>fException::splitMessage()</tt></a></dt>
	  <dd class="public">Splits an exception with an HTML list into multiple strings each containing part of the original message</dd>
	  	</dl>
		<dl>
	  	  <dt class="public">constructor __construct ( [$message = ], [$code = ], [$previous = ] )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__clone (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__toString (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getCode (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getFile (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getLine (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getMessage (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getPrevious (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTrace (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTraceAsString (  )</dt>
	  <dd class="public"></dd>
	  	</dl>
		</div>
	</div>			</section>
		</div>
		<section class="main">
<h2 id="fCookie">fCookie</h2>
<div class="sidebar">
<h3 id="fCookie-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fCookie">Class Documentation</a></strong></li>
<li><a href="#fCookie-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fCookie-docs-SettingValues">Setting Values</a></li>
<li><a href="#fCookie-docs-GettingValues">Getting Values</a></li>
<li><a href="#fCookie-docs-DefaultParameters">Default Parameters</a></li>
</ul>
</div>

<p>
The fCookie class helps to make PHPs cookie API more consistent, while adding the ability to set default parameters and create httponly cookies in older versions of PHP 5.
</p>

<h3 id="fCookie-docs-SettingValues">Setting Values</h3>

<p>
The static method <a href="#fCookie-api-set"><code>set()</code></a> is a wrapper around the function <a class="ext-link" href="http://php.net/setcookie"><span class="icon"><code>setcookie()</code></span></a>, with the addition of optional <a href="#fCookie-docs-DefaultParameters">default parameters</a> and backwards compatibility for creating <a class="ext-link" href="https://www.owasp.org/index.php/HTTPOnly"><span class="icon">httponly cookies</span></a> in PHP 5.1 and earlier. In addition, the expires parameter has been extended to allow any valid <a class="ext-link" href="http://php.net/strtotime"><span class="icon"><code>strtotime()</code></span></a> string or a timestamp. Below are some examples of using <code>set()</code>:
</p>
<pre class="block php"><code>// Set a cookie for the current path
fCookie::set('my_cookie', 'my_value');

// Set a cookie to expire in 1 week
fCookie::set('my_cookie', 'my_value', '+1 week');

// Set a cookie for the whole site
fCookie::set('my_cookie', 'my_value', '+1 week', '/');

// Set a cookie for the whole site that expires when the browser is closed
fCookie::set('my_cookie', 'my_value', 0, '/');

// Set a cookie for all subdomains of example.com
fCookie::set('my_cookie', 'my_value', '+1 week', '/', '.example.com');

// Ensure that the cookie is only set over a secure connection (https://)
fCookie::set('my_cookie', 'my_value', '+1 week', '/', '.example.com', TRUE);

// Set the cookie to only be accessible to HTTP (not javascript)
fCookie::set('my_cookie', 'my_value', '+1 week', '/', '.example.com', TRUE, TRUE);</code></pre>

<p>
 Please note that <code>set()</code> follows the same functionality as <code>setcookie()</code> when it comes to deleting cookies and storing boolean values. Any value that is set to a cookie that is equal to <code>FALSE</code> will cause the cookie to be deleted. This means storing boolean values in a cookie is not recommended since a <code>FALSE</code> value will cause the cookie to be erased - instead use <code>'0'</code> and <code>'1'</code>. Also, setting the expiration date to a time in the past will cause the cookie to be deleted. 
</p>

<h3 id="fCookie-docs-GettingValues">Getting Values</h3>

<p>
The static method <a href="#fCookie-api-get"><code>get()</code></a> replaces direct access to the <code>$_COOKIE</code> superglobal and adds the ability to specify default values if no cookie is found:
</p>
<pre class="block php"><code>// Get the value 'default_value' if no cookie of that name exists
$value = fCookie::get('my_cookie', 'default_value');</code></pre>

<p>
 <code>get()</code> will also remove any slashes added by the ini setting <code>magic_quotes_gpc</code> being enabled.
</p>

<h3 id="fCookie-docs-DefaultParameters">Default Parameters</h3>

<p>
The fCookie class also allows defining default parameters to use for <a href="#fCookie-api-set"><code>set()</code></a>. Since most sites will often use the same <code>$path</code>, <code>$domain</code>, <code>$secure</code> and <code>$httponly</code> parameters for cookies, setting default eliminates unnecessary duplication throughout the code. If a parameter is passed as <code>NULL</code> to <code>set()</code> and a default is defined, the default will be used. Here are the methods to set default parameters:
</p>
<table><tbody>
<tr>
<td><strong>Parameter</strong></td>
<td><strong>Method</strong></td>
</tr>
<tr>
<td><code>$expires</code></td>
<td><a href="#fCookie-api-setDefaultExpires"><code>setDefaultExpires()</code></a></td>
</tr>
<tr>
<td><code>$path</code></td>
<td><a href="#fCookie-api-setDefaultPath"><code>setDefaultPath()</code></a></td>
</tr>
<tr>
<td><code>$domain</code></td>
<td><a href="#fCookie-api-setDefaultDomain"><code>setDefaultDomain()</code></a></td>
</tr>
<tr>
<td><code>$secure</code></td>
<td><a href="#fCookie-api-setDefaultSecure"><code>setDefaultSecure()</code></a></td>
</tr>
<tr>
<td><code>$httponly</code></td>
<td><a href="#fCookie-api-setDefaultHTTPOnly"><code>setDefaultHTTPOnly()</code></a></td>
</tr>
</tbody></table>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fCookie-api">fCookie API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fCookie">Class Documentation</a></li>
		<li><strong><a href="#fCookie-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fCookie-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fCookie-api-delete">delete()</a></li>
	  			<li><a href="#fCookie-api-get">get()</a></li>
	  			<li class="protected"><a href="#fCookie-api-reset">reset()</a></li>
	  			<li><a href="#fCookie-api-set">set()</a></li>
	  			<li><a href="#fCookie-api-setDefaultDomain">setDefaultDomain()</a></li>
	  			<li><a href="#fCookie-api-setDefaultExpires">setDefaultExpires()</a></li>
	  			<li><a href="#fCookie-api-setDefaultHTTPOnly">setDefaultHTTPOnly()</a></li>
	  			<li><a href="#fCookie-api-setDefaultPath">setDefaultPath()</a></li>
	  			<li><a href="#fCookie-api-setDefaultSecure">setDefaultSecure()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fUTF8">fUTF8</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b3</span></div>
<p class="short_description">Provides a consistent cookie API, HTTPOnly compatibility with older PHP versions and default parameters</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b3</th><td>Added the <a href="#fCookie-api-delete"><tt>delete()</tt></a> method <span class="date">9/30/09</span></td></tr><tr><th>1.0.0b2</th><td>Updated for new <a href="#fCore">fCore</a> API <span class="date">2/16/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">9/1/08</span></td></tr></table></div>
<div class="class_methods static" id="fCookie-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fCookie-api-delete" class="method static"><span class="resolution">::</span><span class="name">delete()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Deletes a cookie - uses default parameters set by the other set methods of this class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">delete</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$path</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$domain</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$secure</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The cookie name to delete</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$path</td>
				<td class="param_description">The path of the cookie to delete</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$domain</td>
				<td class="param_description">The domain of the cookie to delete</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$secure</td>
				<td class="param_description">If the cookie is a secure-only cookie</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCookie-api-get" class="method static"><span class="resolution">::</span><span class="name">get()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Gets a cookie value from <tt>$_COOKIE</tt>, while allowing a default value to be provided</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$default_value</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The name of the cookie to retrieve</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$default_value</td>
				<td class="param_description">If there is no cookie with the name provided, return this value instead</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The value
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fCookie-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCookie-api-set" class="method static"><span class="resolution">::</span><span class="name">set()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets a cookie to be sent back to the browser - uses default parameters set by the other set methods of this class</p>
								<p>The following methods allow for setting default parameters for this method:    </p><ul><li><a href="#fCookie-api-setDefaultExpires">setDefaultExpires()</a>:  Sets the default for the <tt>$expires</tt> parameter</li><li><a href="#fCookie-api-setDefaultPath">setDefaultPath()</a>:     Sets the default for the <tt>$path</tt> parameter</li><li><a href="#fCookie-api-setDefaultDomain">setDefaultDomain()</a>:   Sets the default for the <tt>$domain</tt> parameter</li><li><a href="#fCookie-api-setDefaultSecure">setDefaultSecure()</a>:   Sets the default for the <tt>$secure</tt> parameter</li><li><a href="#fCookie-api-setDefaultHTTPOnly">setDefaultHTTPOnly()</a>: Sets the default for the <tt>$httponly</tt> parameter</li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">set</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span><span class="php-code">,</span> <span class="php-vartype">string|integer</span> <span class="php-var">$expires</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$path</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$domain</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$secure</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$httponly</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The name of the cookie to set</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value of the cookie to set</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string|integer</td>
				<td class="param_name">$expires</td>
				<td class="param_description">A relative string to be interpreted by <a class="ext-link" href="http://php.net/strtotime"><span class="icon"><tt>strtotime()</tt></span></a> or an integer unix timestamp</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$path</td>
				<td class="param_description">The path this cookie applies to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$domain</td>
				<td class="param_description">The domain this cookie applies to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$secure</td>
				<td class="param_description">If the cookie should only be transmitted over a secure connection</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$httponly</td>
				<td class="param_description">If the cookie should only be readable by HTTP connection, not javascript</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCookie-api-setDefaultDomain" class="method static"><span class="resolution">::</span><span class="name">setDefaultDomain()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets the default domain to use for cookies</p>
								<p>This value will be used when the <tt>$domain</tt> parameter of the <a href="#fCookie-api-set"><tt>set()</tt></a>  method is not specified or is set to <tt>NULL</tt>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setDefaultDomain</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$domain</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$domain</td>
				<td class="param_description">The default domain to use for cookies</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCookie-api-setDefaultExpires" class="method static"><span class="resolution">::</span><span class="name">setDefaultExpires()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets the default expiration date to use for cookies</p>
								<p>This value will be used when the <tt>$expires</tt> parameter of the <a href="#fCookie-api-set"><tt>set()</tt></a>  method is not specified or is set to <tt>NULL</tt>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setDefaultExpires</span><span class="php-brackets">(</span> <span class="php-vartype">string|integer</span> <span class="php-var">$expires</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string|integer</td>
				<td class="param_name">$expires</td>
				<td class="param_description">The default expiration date to use for cookies</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCookie-api-setDefaultHTTPOnly" class="method static"><span class="resolution">::</span><span class="name">setDefaultHTTPOnly()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets the default httponly flag to use for cookies</p>
								<p>This value will be used when the <tt>$httponly</tt> parameter of the <a href="#fCookie-api-set"><tt>set()</tt></a>  method is not specified or is set to <tt>NULL</tt>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setDefaultHTTPOnly</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$httponly</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$httponly</td>
				<td class="param_description">The default httponly flag to use for cookies</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCookie-api-setDefaultPath" class="method static"><span class="resolution">::</span><span class="name">setDefaultPath()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets the default path to use for cookies</p>
								<p>This value will be used when the <tt>$path</tt> parameter of the <a href="#fCookie-api-set"><tt>set()</tt></a>  method is not specified or is set to <tt>NULL</tt>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setDefaultPath</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$path</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$path</td>
				<td class="param_description">The default path to use for cookies</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCookie-api-setDefaultSecure" class="method static"><span class="resolution">::</span><span class="name">setDefaultSecure()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets the default secure flag to use for cookies</p>
								<p>This value will be used when the <tt>$secure</tt> parameter of the <a href="#fCookie-api-set"><tt>set()</tt></a>  method is not specified or is set to <tt>NULL</tt>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setDefaultSecure</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$secure</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$secure</td>
				<td class="param_description">The default secure flag to use for cookies</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fCore">fCore</h2>
<div class="sidebar">
<h3 id="fCore-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fCore">Class Documentation</a></strong></li>
<li><a href="#fCore-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fCore-docs-ErrorExceptionHandling">Error/Exception Handling</a>
<ul>
<li><a href="#fCore-docs-UsinganSMTPConnection">Using an SMTP Connection</a></li>
</ul>
</li>
<li><a href="#fCore-docs-CapturingErrors">Capturing Errors</a></li>
<li><a href="#fCore-docs-Debugging">Debugging</a></li>
<li><a href="#fCore-docs-EnvironmentHandling">Environment Handling</a></li>
</ul>
</div>

<p>
The fCore class centralizes debugging, error and exception handling and more.
</p>

<h3 id="fCore-docs-ErrorExceptionHandling">Error/Exception Handling</h3>

<p>
When maintaining production systems, knowing about errors and unhandled exceptions that have occurred is key. The fCore class provides two handy methods to simply this task. 
</p>

<p>
The <a href="#fCore-api-enableErrorHandling"><code>enableErrorHandling()</code></a> and <a href="#fCore-api-enableExceptionHandling"><code>enableExceptionHandling()</code></a> methods each take a first parameter that is the destination for errors and unhandled exceptions respectively. The options are an email address, a file, or the string <code>'html'</code> for output into the currently rendering page.
</p>

<p>
Since unhandled exceptions cause the page execution to stop immediately, <a href="#fCore-api-enableExceptionHandling"><code>enableExceptionHandling()</code></a> takes a callback as a second parameter to allow you to cleanly finish HTML output. The optional third parameter is an array of parameters to send to the callback. 
</p>

<p>
Both the error and exception handling provide full backtraces, allowing for an easy time finding bugs.
</p>
<pre class="block php"><code>// Set the site to send me an email every time an error or unhandled exception gets thrown
fCore::enableErrorHandling('will@flourishlib.com');
fCore::enableExceptionHandling('will@flourishlib.com', array($templating, 'place'), array('footer'));

// Set the site to log errors and exceptions to my logs dir
fCore::enableErrorHandling($_SERVER['DOCUMENT_ROOT'] . '/writable/logs/errors.log');
fCore::enableExceptionHandling($_SERVER['DOCUMENT_ROOT'] . '/writable/logs/exceptions.log', array($templating, 'place'), array('footer'));

// Set the site to display errors and exception in the html
fCore::enableErrorHandling('html');
fCore::enableExceptionHandling('html', array($templating, 'place'), array('footer'));</code></pre>

<p>
 Multiple email addresses may be specified, separated by commas.
</p>
<pre class="block php"><code>fCore::enableErrorHandling('will@flourishlib.com,john.smith@example.com');</code></pre>

<p>
 By default, error and exception output includes a dump of the state of a number of PHP superglobals including <code>$_GET</code>, <code>$_POST</code>, <code>$_FILES</code>, <code>$_COOKIE</code>, <code>$_SESSION</code> and <code>$_SERVER</code> to aid in debugging. It is possible to disable this functionality by calling <a href="#fCore-api-disableContext"><code>disableContext()</code></a>.
</p>
<pre class="block php"><code>// Disable the context dumps that happen with error and exception handling
fCore::disableContext();</code></pre>

<h4 id="fCore-docs-UsinganSMTPConnection">Using an SMTP Connection</h4>

<p>
By default, error and exception emails are sent using the <code>mail()</code> function. An SMTP server may be used by passing an instance of <a href="#fSMTP">fSMTP</a> and a <code>From</code> email address to <a href="#fCore-api-configureSMTP"><code>configureSMTP()</code></a>.
</p>
<pre class="block php"><code>$smtp = new fSMTP('server.example.com');
$smtp-&gt;authenticate('username', 'password');
fCore::configureSMTP($smtp, 'noreply@example.com');</code></pre>

<h3 id="fCore-docs-CapturingErrors">Capturing Errors</h3>

<p>
While exceptions are fairly easy to use due to the way they bubble up to the closest matching <code>catch</code> block, errors in PHP are not as simple. Errors don't interrupt program flow and can only be captured by an error handler. <a href="#fCore-api-startErrorCapture"><code>startErrorCapture()</code></a> and <a href="#fCore-api-stopErrorCapture"><code>stopErrorCapture()</code></a> provide functionality that allows capturing errors and returning them in an array for futher processing.
</p>
<pre class="block php"><code>// Here we don't need warning messages if this fails, we can just check to see if $result is FALSE
fCore::startErrorCapture();
$result = file_get_contents('http://example.com');
$errors = fCore::stopErrorCapture();</code></pre>

<p>
 While a similar result can be accomplished by using the <a class="ext-link" href="http://php.net/error_reporting"><span class="icon"><code>error_reporting()</code></span></a> function and simplying lowering the error reporting level, this may not be available if it has been set via the <code>php_admin_value</code> Apache configuration directive.
</p>

<p>
In addition, turning down <code>error_reporting()</code> does not allow for acting upon errors, just silencing them. Since <code>stopErrorCapture()</code> returns an array of information about each error that occurred, the messages can be used to determine the next course of action or combined into an exception.
</p>
<pre class="block php"><code>fCore::startErrorCapture();
$connection = pg_connect('dbname=example');
$errors = fCore::stopErrorCapture();
if (!$connection) {
    $error_strings = array();
    foreach ($errors as $error) {
         $error_strings[] = $error['string'];
    }
    throw new fConnectivityException(&quot;Unable to connect to the PostgreSQL database:\n%s&quot;, join(&quot;\n&quot;, $error_strings));
}</code></pre>

<p>
 It is possible to capture only specific <code>$types</code> of errors by passing them as the first parameter to <code>startErrorCapture()</code>. The values are the same as those passed to <code>error_reporting()</code>, a bitmask of the desired error types. The captured messages can be further restricted by passing a PCRE <code>$regex</code> as the second parameter. Any errors that are not captured are passed on to the normal error handler.
</p>

<p>
<em>Please note that all errors that match <code>$types</code> will be captured, even if they are excluded by the current <code>error_reporting()</code> setting.</em>
</p>
<pre class="block php"><code>// Capture only warnings about SSL
fCore::startErrorCapture(E_WARNING, '#ssl#i');</code></pre>

<p>
 It is also possible to capture all errors, but only return some from <code>stopErrorCapture()</code>. This is accomplished by by passing a PCRE <code>$regex</code> as the first parameter.
</p>
<pre class="block php"><code>// Capture all warnings, but only return errors about SSL
fCore::startErrorCapture(E_WARNING);
// 
$errors = fCore::stopErrorCapture('#ssl#i');</code></pre>

<h3 id="fCore-docs-Debugging">Debugging</h3>

<p>
fCore provides a few useful functions when you are trying to debug code. The simplest way to debug is to use the <a href="#fCore-api-expose"><code>expose()</code></a> method to show the contents of a file. <a href="#fCore-api-expose"><code>expose()</code></a> creates output similar to <a class="ext-link" href="http://php.net/print_r"><span class="icon"><code>print_r()</code></span></a>, however it uses symbols to differentiate between <code>''</code>, <code>NULL</code> and <code>FALSE</code>. Here is a usage example.
</p>
<pre class="block php"><code>fCore::expose(array('foo', 1, '', NULL, FALSE, TRUE));</code></pre>

<p>
 The above call to <a href="#fCore-api-expose"><code>expose()</code></a> would create the following HTML:
</p>
<pre class="block html"><code>&lt;pre class=&quot;exposed&quot;&gt;Array
(
    [0] =&gt; foo
    [1] =&gt; 1
    [2] =&gt; {empty_string}
    [3] =&gt; {null}
    [4] =&gt; {false}
    [5] =&gt; {true}
)&lt;/pre&gt;</code></pre>

<p>
 If you want to set your code up to conditionally display debugging information, youll want to use the <a href="#fCore-api-debug"><code>debug()</code></a> method. Content sent to <a href="#fCore-api-debug"><code>debug()</code></a> is displayed via <a href="#fCore-api-expose"><code>expose()</code></a> only if <a href="#fCore-api-enableDebugging"><code>enableDebugging()</code></a> has been passed <code>TRUE</code> or if the second parameter, <code>$force</code>, is <code>TRUE</code>. 
</p>
<pre class="block php"><code>// Enable debugging
fCore::enableDebugging(TRUE);

// Display a debugging message only when fCore::enableDebugging() has been called
fCore::debug('This is only shown when fCore::enableDebugging(TRUE) is called before this code', FALSE);

// Display a debugging message even if fCore::enableDebugging() has not been called
fCore::debug('This will always be shown', TRUE);</code></pre>

<p>
 If you wish to pass debug information to another debugging or logging system, a callback can be registered via the static method <a href="#fCore-api-registerDebugCallback"><code>registerDebugCallback()</code></a>. This method accepts a single parameter, the <code>$callback</code> to send all debug messages to. The <code>$callback</code> should accept a single parameter, a string debug message.
</p>
<pre class="block php"><code>// Create a function to handle debug messages
function handleDebug($message)
{
    // Code to pass message to another debugging or logging system
}
 
// Register the function as the message handler
fCore::registerDebugCallback('handleDebug');</code></pre>

<p>
 The <a href="#fCore-api-backtrace"><code>backtrace()</code></a> method provides a compact and nicely formatted version of <a class="ext-link" href="http://php.net/debug_backtrace"><span class="icon"><code>debug_backtrace()</code></span></a>. Below is an example of usage:
</p>
<pre class="block php"><code>class Example {
    static public function backtrace()
    {
        fCore::expose(fCore::backtrace());
    }
}

Example::backtrace();</code></pre>

<p>
 Which would produce the following HTML:
</p>
<pre class="block html"><code>&lt;pre class=&quot;exposed&quot;&gt;
{doc_root}/example.php(8): Example::backtrace()
{doc_root}/example.php(4): fCore::backtrace()
&lt;/pre&gt;</code></pre>

<h3 id="fCore-docs-EnvironmentHandling">Environment Handling</h3>

<p>
In some situations it is necessary to write code based on the version of PHP or the operating system the code is running on.
</p>

<p>
The static method <a href="#fCore-api-checkVersion"><code>checkVersion()</code></a> will return <code>TRUE</code> if the currently running version of PHP is greater or equal to the version string passed in.
</p>
<pre class="block php"><code>if (fCore::checkVersion('5.1')) {
    echo 'You are running PHP version 5.1 or newer';
}</code></pre>

<p>
 The static method <a href="#fCore-api-checkOS"><code>checkOS()</code></a> will return <code>TRUE</code> if the current operating system is one of the OSes passed in as a parameter. Valid operating system strings include:
</p>

<ul>
<li><code>'linux'</code></li>
<li><code>'bsd'</code></li>
<li><code>'osx'</code></li>
<li><code>'solaris'</code></li>
<li><code>'windows'</code></li>
</ul>
<pre class="block php"><code>if (fCore::checkOS('bsd', 'osx')) {
    echo 'You are running either a BSD or OSX';
}</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fCore-api">fCore API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fCore">Class Documentation</a></li>
		<li><strong><a href="#fCore-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fCore-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fCore-api-backtrace">backtrace()</a></li>
	  			<li><a href="#fCore-api-call">call()</a></li>
	  			<li><a href="#fCore-api-callback">callback()</a></li>
	  			<li><a href="#fCore-api-checkOS">checkOS()</a></li>
	  			<li><a href="#fCore-api-checkVersion">checkVersion()</a></li>
	  			<li><a href="#fCore-api-configureSMTP">configureSMTP()</a></li>
	  			<li><a href="#fCore-api-debug">debug()</a></li>
	  			<li><a href="#fCore-api-disableContext">disableContext()</a></li>
	  			<li><a href="#fCore-api-dump">dump()</a></li>
	  			<li><a href="#fCore-api-enableDebugging">enableDebugging()</a></li>
	  			<li><a href="#fCore-api-enableDynamicConstants">enableDynamicConstants()</a></li>
	  			<li><a href="#fCore-api-enableErrorHandling">enableErrorHandling()</a></li>
	  			<li><a href="#fCore-api-enableExceptionHandling">enableExceptionHandling()</a></li>
	  			<li><a href="#fCore-api-expose">expose()</a></li>
	  			<li><a href="#fCore-api-getDebug">getDebug()</a></li>
	  			<li class="protected"><a href="#fCore-api-handleError">handleError()</a></li>
	  			<li class="protected"><a href="#fCore-api-handleException">handleException()</a></li>
	  			<li><a href="#fCore-api-registerDebugCallback">registerDebugCallback()</a></li>
	  			<li class="protected"><a href="#fCore-api-reset">reset()</a></li>
	  			<li class="protected"><a href="#fCore-api-sendMessagesOnShutdown">sendMessagesOnShutdown()</a></li>
	  			<li><a href="#fCore-api-startErrorCapture">startErrorCapture()</a></li>
	  			<li><a href="#fCore-api-stopErrorCapture">stopErrorCapture()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fEmail">fEmail</a></li>
		<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fCache">fCache</a></li>
		<li><a href="#fCookie">fCookie</a></li>
		<li><a href="#fCryptography">fCryptography</a></li>
		<li><a href="#fDatabase">fDatabase</a></li>
		<li><a href="#fDate">fDate</a></li>
		<li><a href="#fDirectory">fDirectory</a></li>
		<li><a href="#fEmail">fEmail</a></li>
		<li><a href="#fFile">fFile</a></li>
		<li><a href="#fImage">fImage</a></li>
		<li><a href="#fMailbox">fMailbox</a></li>
		<li><a href="#fORMDatabase">fORMDatabase</a></li>
		<li><a href="#fResult">fResult</a></li>
		<li><a href="#fSMTP">fSMTP</a></li>
		<li><a href="#fSQLTranslation">fSQLTranslation</a></li>
		<li><a href="#fStatement">fStatement</a></li>
		<li><a href="#fTemplating">fTemplating</a></li>
		<li><a href="#fTime">fTime</a></li>
		<li><a href="#fTimestamp">fTimestamp</a></li>
		<li><a href="#fUTF8">fUTF8</a></li>
		<li><a href="#fUnbufferedResult">fUnbufferedResult</a></li>
		<li><a href="#fXML">fXML</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b24</span></div>
<p class="short_description">Provides low-level debugging, error and exception functionality</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b24</th><td>Backwards Compatibility Break - moved detectOpcodeCache() to <a href="#fLoader-api-hasOpcodeCache"><tt>fLoader::hasOpcodeCache()</tt></a> <span class="date">8/26/11</span></td></tr><tr><th>1.0.0b23</th><td>Backwards Compatibility Break - changed the email subject of error/exception emails to include relevant file info, instead of the timestamp, for better email message threading <span class="date">6/20/11</span></td></tr><tr><th>1.0.0b22</th><td>Fixed a bug with dumping arrays containing integers <span class="date">5/26/11</span></td></tr><tr><th>1.0.0b21</th><td>Changed <a href="#fCore-api-startErrorCapture"><tt>startErrorCapture()</tt></a> to allow &quot;stacking&quot; it via multiple calls, fixed a couple of bugs with <a href="#fCore-api-dump"><tt>dump()</tt></a> mangling strings in the form <tt>int(1)</tt>, fixed mispelling of <tt>occurred</tt> <span class="date">5/9/11</span></td></tr><tr><th>1.0.0b20</th><td>Backwards Compatibility Break - Updated <a href="#fCore-api-expose"><tt>expose()</tt></a> to not wrap the data in HTML when running via CLI, and instead just append a newline <span class="date">2/24/11</span></td></tr><tr><th>1.0.0b19</th><td>Added detection of AIX to <a href="#fCore-api-checkOS"><tt>checkOS()</tt></a> <span class="date">1/19/11</span></td></tr><tr><th>1.0.0b18</th><td>Updated <a href="#fCore-api-expose"><tt>expose()</tt></a> to be able to accept multiple parameters <span class="date">1/10/11</span></td></tr><tr><th>1.0.0b17</th><td>Fixed a bug with <a href="#fCore-api-backtrace"><tt>backtrace()</tt></a> triggering notices when an argument is not UTF-8 <span class="date">8/17/10</span></td></tr><tr><th>1.0.0b16</th><td>Added the <tt>$types</tt> and <tt>$regex</tt> parameters to <a href="#fCore-api-startErrorCapture"><tt>startErrorCapture()</tt></a> and the <tt>$regex</tt> parameter to <a href="#fCore-api-stopErrorCapture"><tt>stopErrorCapture()</tt></a> <span class="date">8/9/10</span></td></tr><tr><th>1.0.0b15</th><td>Added <a href="#fCore-api-startErrorCapture"><tt>startErrorCapture()</tt></a> and <a href="#fCore-api-stopErrorCapture"><tt>stopErrorCapture()</tt></a> <span class="date">7/5/10</span></td></tr><tr><th>1.0.0b14</th><td>Changed <a href="#fCore-api-enableExceptionHandling"><tt>enableExceptionHandling()</tt></a> to only call <a href="#fException-api-printMessage"><tt>fException::printMessage()</tt></a> when the destination is not <tt>html</tt> and no callback has been defined, added <a href="#fCore-api-configureSMTP"><tt>configureSMTP()</tt></a> to allow using <a href="#fSMTP">fSMTP</a> for error and exception emails <span class="date">6/4/10</span></td></tr><tr><th>1.0.0b13</th><td>Added the <tt>$backtrace</tt> parameter to <a href="#fCore-api-backtrace"><tt>backtrace()</tt></a> <span class="date">3/5/10</span></td></tr><tr><th>1.0.0b12</th><td>Added <a href="#fCore-api-getDebug"><tt>getDebug()</tt></a> to check for the global debugging flag, added more specific BSD checks to <a href="#fCore-api-checkOS"><tt>checkOS()</tt></a> <span class="date">3/2/10</span></td></tr><tr><th>1.0.0b11</th><td>Added detectOpcodeCache() <span class="date">10/6/09</span></td></tr><tr><th>1.0.0b10</th><td>Fixed <a href="#fCore-api-expose"><tt>expose()</tt></a> to properly display when output includes non-UTF-8 binary data <span class="date">6/29/09</span></td></tr><tr><th>1.0.0b9</th><td>Added <a href="#fCore-api-disableContext"><tt>disableContext()</tt></a> to remove context info for exception/error handling, tweaked output for exceptions/errors <span class="date">6/28/09</span></td></tr><tr><th>1.0.0b8</th><td><a href="#fCore-api-enableErrorHandling"><tt>enableErrorHandling()</tt></a> and <a href="#fCore-api-enableExceptionHandling"><tt>enableExceptionHandling()</tt></a> now accept multiple email addresses, and a much wider range of emails <span class="date">6/1/09</span></td></tr><tr><th>1.0.0b7</th><td><a href="#fCore-api-backtrace"><tt>backtrace()</tt></a> now properly replaces document root with {doc_root} on Windows <span class="date">5/2/09</span></td></tr><tr><th>1.0.0b6</th><td>Fixed a bug with getting the server name for error messages when running on the command line <span class="date">3/11/09</span></td></tr><tr><th>1.0.0b5</th><td>Fixed a bug with checking the error/exception destination when a log file is specified <span class="date">3/7/09</span></td></tr><tr><th>1.0.0b4</th><td>Backwards compatibility break - getOS() and getPHPVersion() removed, replaced with <a href="#fCore-api-checkOS"><tt>checkOS()</tt></a> and <a href="#fCore-api-checkVersion"><tt>checkVersion()</tt></a> <span class="date">2/16/09</span></td></tr><tr><th>1.0.0b3</th><td><a href="#fCore-api-handleError"><tt>handleError()</tt></a> now displays what kind of error occurred as the heading <span class="date">2/15/09</span></td></tr><tr><th>1.0.0b2</th><td>Added <a href="#fCore-api-registerDebugCallback"><tt>registerDebugCallback()</tt></a> <span class="date">2/7/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">9/25/07</span></td></tr></table></div>
<div class="class_methods static" id="fCore-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fCore-api-backtrace" class="method static"><span class="resolution">::</span><span class="name">backtrace()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Creates a nicely formatted backtrace to the the point where this method is called</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">backtrace</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$remove_lines</span><span class="php-code">=</span>0<span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$backtrace</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$remove_lines</td>
				<td class="param_description">The number of trailing lines to remove from the backtrace</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$backtrace</td>
				<td class="param_description">A backtrace from <a class="ext-link" href="http://php.net/backtrace"><span class="icon"><tt>debug_backtrace()</tt></span></a> to format - this is not usually required or desired</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The formatted backtrace
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCore-api-call" class="method static"><span class="resolution">::</span><span class="name">call()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Performs a <a class="ext-link" href="http://php.net/call_user_func"><span class="icon"><tt>call_user_func()</tt></span></a>, while translating PHP 5.2 static callback syntax for PHP 5.1 and 5.0</p>
								<p>Parameters can be passed either as a single array of parameters or as  multiple parameters.</p><pre class="block php"><code>// Passing multiple parameters in a normal fashion
fCore::call('Class::method', TRUE, 0, 'test');
// Passing multiple parameters in a parameters array
fCore::call('Class::method', array(TRUE, 0, 'test'));</code></pre><p>To pass parameters by reference they must be assigned to an  array by reference and the function/method being called must accept those  parameters by reference. If either condition is not met, the parameter  will be passed by value.</p><pre class="block php"><code>// Passing parameters by reference
fCore::call('Class::method', array(&$var1, &$var2));</code></pre>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">call</span><span class="php-brackets">(</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span><span class="php-code">=</span>array() <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The function or method to call</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters to pass to the function/method</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The return value of the called function/method
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCore-api-callback" class="method static"><span class="resolution">::</span><span class="name">callback()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Translates a Class::method style static method callback to array style for compatibility with PHP 5.0 and 5.1 and built-in PHP functions</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">callback</span><span class="php-brackets">(</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback to translate</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The translated callback
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCore-api-checkOS" class="method static"><span class="resolution">::</span><span class="name">checkOS()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns is the current OS is one of the OSes passed as a parameter</p>
								<p>Valid OS strings are:</p><ul><li><tt>'linux'</tt></li><li><tt>'aix'</tt></li><li><tt>'bsd'</tt></li><li><tt>'freebsd'</tt></li><li><tt>'netbsd'</tt></li><li><tt>'openbsd'</tt></li><li><tt>'osx'</tt></li><li><tt>'solaris'</tt></li><li><tt>'windows'</tt></li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">checkOS</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$os</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$os <em>[, ... ]</em></td>
				<td class="param_description">The operating system to check - see method description for valid OSes</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the current OS is included in the list of OSes passed as parameters
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCore-api-checkVersion" class="method static"><span class="resolution">::</span><span class="name">checkVersion()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Checks to see if the running version of PHP is greater or equal to the version passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">checkVersion</span><span class="php-brackets">(</span> <span class="php-vartype"></span> <span class="php-var">$version</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"></td>
				<td class="param_name">$version</td>
				<td class="param_description"></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the running version of PHP is greater or equal to the version passed
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCore-api-configureSMTP" class="method static"><span class="resolution">::</span><span class="name">configureSMTP()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets an <a href="#fSMTP">fSMTP</a> object to be used for sending error and exception emails</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">configureSMTP</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fSMTP">fSMTP</a></span> <span class="php-var">$smtp</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$from_email</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fSMTP">fSMTP</a></td>
				<td class="param_name">$smtp</td>
				<td class="param_description">The SMTP connection to send emails over</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$from_email</td>
				<td class="param_description">The email address to use in the <tt>From:</tt> header</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCore-api-debug" class="method static"><span class="resolution">::</span><span class="name">debug()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Prints a debugging message if global or code-specific debugging is enabled</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">debug</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$force</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The debug message</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$force</td>
				<td class="param_description">If debugging should be forced even when global debugging is off</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCore-api-disableContext" class="method static"><span class="resolution">::</span><span class="name">disableContext()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Disables including the context information with exception and error messages</p>
								<p>The context information includes the following superglobals:  </p><ul><li><tt>$_SERVER</tt></li><li><tt>$_POST</tt></li><li><tt>$_GET</tt></li><li><tt>$_SESSION</tt></li><li><tt>$_FILES</tt></li><li><tt>$_COOKIE</tt></li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">disableContext</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCore-api-dump" class="method static"><span class="resolution">::</span><span class="name">dump()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Creates a string representation of any variable using predefined strings for booleans, <tt>NULL</tt> and empty strings</p>
								<p>The string output format of this method is very similar to the output of  <a class="ext-link" href="http://php.net/print_r"><span class="icon"><tt>print_r()</tt></span></a> except that the following values  are represented as special strings:    </p><ul><li><tt>TRUE</tt>: <tt>'{true}'</tt></li><li><tt>FALSE</tt>: <tt>'{false}'</tt></li><li><tt>NULL</tt>: <tt>'{null}'</tt></li><li><tt>''</tt>: <tt>'{empty_string}'</tt></li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">dump</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$data</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$data</td>
				<td class="param_description">The value to dump</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The string representation of the value
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCore-api-enableDebugging" class="method static"><span class="resolution">::</span><span class="name">enableDebugging()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Enables debug messages globally, i.e. they will be shown for any call to debug()</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">enableDebugging</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$flag</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$flag</td>
				<td class="param_description">If debugging messages should be shown</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCore-api-enableDynamicConstants" class="method static"><span class="resolution">::</span><span class="name">enableDynamicConstants()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Turns on a feature where undefined constants are automatically created with the string value equivalent to the name</p>
								<p>This functionality only works if <a href="#fCore-api-enableErrorHandling"><tt>enableErrorHandling()</tt></a> has been  called first. This functionality may have a very slight performance  impact since a <tt>E_STRICT</tt> error message must be captured and then a  call to <a class="ext-link" href="http://php.net/define"><span class="icon"><tt>define()</tt></span></a> is made.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">enableDynamicConstants</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCore-api-enableErrorHandling" class="method static"><span class="resolution">::</span><span class="name">enableErrorHandling()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Turns on developer-friendly error handling that includes context information including a backtrace and superglobal dumps</p>
								<p>All errors that match the current  <a class="ext-link" href="http://php.net/error_reporting"><span class="icon"><tt>error_reporting()</tt></span></a> level will be  redirected to the destination and will include a full backtrace. In  addition, dumps of the following superglobals will be made to aid in  debugging:  </p><ul><li><tt>$_SERVER</tt></li><li><tt>$_POST</tt></li><li><tt>$_GET</tt></li><li><tt>$_SESSION</tt></li><li><tt>$_FILES</tt></li><li><tt>$_COOKIE</tt></li></ul><p>The superglobal dumps are only done once per page, however a backtrace  in included for each error.</p><p>If an email address is specified for the destination, only one email  will be sent per script execution. If both error and  <a href="#fCore-api-enableExceptionHandling">exception handling</a> are set to the same  email address, the email will contain both errors and exceptions.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">enableErrorHandling</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$destination</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$destination</td>
				<td class="param_description">The destination for the errors and context information - an email address, a file path or the string <tt>'html'</tt></td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCore-api-enableExceptionHandling" class="method static"><span class="resolution">::</span><span class="name">enableExceptionHandling()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Turns on developer-friendly uncaught exception handling that includes context information including a backtrace and superglobal dumps</p>
								<p>Any uncaught exception will be redirected to the destination specified,  and the page will execute the <tt>$closing_code</tt> callback before exiting.  The destination will receive a message with the exception messaage, a  full backtrace and dumps of the following superglobals to aid in  debugging:  </p><ul><li><tt>$_SERVER</tt></li><li><tt>$_POST</tt></li><li><tt>$_GET</tt></li><li><tt>$_SESSION</tt></li><li><tt>$_FILES</tt></li><li><tt>$_COOKIE</tt></li></ul><p>The superglobal dumps are only done once per page, however a backtrace  in included for each error.</p><p>If an email address is specified for the destination, only one email  will be sent per script execution.</p><p>If an email address is specified for the destination, only one email  will be sent per script execution. If both exception and  <a href="#fCore-api-enableErrorHandling">error handling</a> are set to the same  email address, the email will contain both exceptions and errors.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">enableExceptionHandling</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$destination</span><span class="php-code">,</span> <span class="php-vartype">callback</span> <span class="php-var">$closing_code</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span><span class="php-code">=</span>array() <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$destination</td>
				<td class="param_description">The destination for the exception and context information - an email address, a file path or the string <tt>'html'</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$closing_code</td>
				<td class="param_description">This callback will happen after the exception is handled and before page execution stops. Good for printing a footer. If no callback is provided and the exception extends <a href="#fException">fException</a>, <a href="#fException-api-printMessage"><tt>fException::printMessage()</tt></a> will be called.</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters to send to <tt>$closing_code</tt></td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCore-api-expose" class="method static"><span class="resolution">::</span><span class="name">expose()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Prints the dump() of a value</p>
								<p>The dump will be printed in a <tt>&lt;pre&gt;</tt> tag with the class <tt>exposed</tt> if  PHP is running anywhere but via the command line (cli). If PHP is  running via the cli, the data will be printed, followed by a single  line break (<tt>\n</tt>).</p><p>If multiple parameters are passed, they are exposed as an array.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">expose</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$data</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$data <em>[, ... ]</em></td>
				<td class="param_description">The value to show</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCore-api-getDebug" class="method static"><span class="resolution">::</span><span class="name">getDebug()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>If debugging is enabled</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">getDebug</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$force</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$force</td>
				<td class="param_description">If debugging is forced</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If debugging is enabled
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fCore-api-handleError" class="protected method static"><span class="resolution">::</span><span class="name">handleError()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Handles an error, creating the necessary context information and sending it to the specified destination</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">handleError</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$error_number</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$error_string</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$error_file</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$error_line</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$error_context</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$error_number</td>
				<td class="param_description">The error type</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$error_string</td>
				<td class="param_description">The message for the error</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$error_file</td>
				<td class="param_description">The file the error occurred in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$error_line</td>
				<td class="param_description">The line the error occurred on</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$error_context</td>
				<td class="param_description">A references to all variables in scope at the occurence of the error</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fCore-api-handleException" class="protected method static"><span class="resolution">::</span><span class="name">handleException()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Handles an uncaught exception, creating the necessary context information, sending it to the specified destination and finally executing the closing callback</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">handleException</span><span class="php-brackets">(</span> <span class="php-vartype">object</span> <span class="php-var">$exception</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">object</td>
				<td class="param_name">$exception</td>
				<td class="param_description">The uncaught exception to handle</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCore-api-registerDebugCallback" class="method static"><span class="resolution">::</span><span class="name">registerDebugCallback()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Registers a callback to handle debug messages instead of the default action of calling expose() on the message</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">registerDebugCallback</span><span class="php-brackets">(</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">A callback that accepts a single parameter, the string debug message to handle</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fCore-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fCore-api-sendMessagesOnShutdown" class="protected method static"><span class="resolution">::</span><span class="name">sendMessagesOnShutdown()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sends an email or writes a file with messages generated during the page execution</p>
								<p>This method prevents multiple emails from being sent or a log file from  being written multiple times for one script execution.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">sendMessagesOnShutdown</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCore-api-startErrorCapture" class="method static"><span class="resolution">::</span><span class="name">startErrorCapture()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Temporarily enables capturing error messages</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">startErrorCapture</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$types</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$regex</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$types</td>
				<td class="param_description">The error types to capture - this should be as specific as possible - defaults to all (E_ALL | E_STRICT)</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$regex</td>
				<td class="param_description">A PCRE regex to match against the error message</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCore-api-stopErrorCapture" class="method static"><span class="resolution">::</span><span class="name">stopErrorCapture()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Stops capturing error messages, returning all that have been captured</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">stopErrorCapture</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$regex</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$regex</td>
				<td class="param_description">A PCRE regex to filter messages by</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The captured error messages
				</p>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fCryptography">fCryptography</h2>
<div class="sidebar">
<h3 id="fCryptography-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fCryptography">Class Documentation</a></strong></li>
<li><a href="#fCryptography-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fCryptography-docs-RandomNumbersandStrings">Random Numbers and Strings</a></li>
<li><a href="#fCryptography-docs-PasswordHashing">Password Hashing</a>
<ul>
<li><a href="#fCryptography-docs-GeneralInformation">General Information</a></li>
<li><a href="#fCryptography-docs-HashingandChecking">Hashing and Checking</a></li>
</ul>
</li>
<li><a href="#fCryptography-docs-Symmetric-KeyEncryption">Symmetric-Key Encryption</a>
<ul>
<li><a href="#fCryptography-docs-GeneralInformation">General Information</a></li>
<li><a href="#fCryptography-docs-EncryptionandDecryption">Encryption and Decryption</a></li>
</ul>
</li>
<li><a href="#fCryptography-docs-Public-KeyEncryptionandSigning">Public-Key Encryption and Signing</a>
<ul>
<li><a href="#fCryptography-docs-GeneralInformation">General Information</a></li>
<li><a href="#fCryptography-docs-Encryption">Encryption</a></li>
<li><a href="#fCryptography-docs-Decryption">Decryption</a></li>
<li><a href="#fCryptography-docs-SigningandVerification">Signing and Verification</a></li>
</ul>
</li>
<li><a href="#fCryptography-docs-HashandCiphertextFormats">Hash and Ciphertext Formats</a>
<ul>
<li><a href="#fCryptography-docs-hashPassword">hashPassword()</a></li>
<li><a href="#fCryptography-docs-symmetricKeyEncrypt">symmetricKeyEncrypt()</a></li>
<li><a href="#fCryptography-docs-publicKeyEncrypt">publicKeyEncrypt()</a></li>
<li><a href="#fCryptography-docs-publicKeySign">publicKeySign()</a></li>
</ul>
</li>
</ul>
</div>

<p>
The fCryptography class provides a simple interface for password hashing, symmetric key encryption and public key encryption. All of the cryptographic methods have been chosen since they are considered to be best practices and fairly secure (which is obviously a relative term). In each section the general algorithm will be explained to help in understanding what level of security is afforded.
</p>

<p>
Also note that all of the method return values will contain only ASCII characters &amp;mdash; base64 encoding is used to ensure this.
</p>

<p>
Please do note that this is not meant to be a definitive resource for cryptographic information, I highly recommend reading more about <a class="ext-link" href="http://en.wikipedia.org/wiki/Cryptography"><span class="icon">cryptography</span></a> from other sources.
</p>

<h3 id="fCryptography-docs-RandomNumbersandStrings">Random Numbers and Strings</h3>

<p>
The built in random number generator in PHP, <a class="ext-link" href="http://php.net/rand"><span class="icon">rand()</span></a> can suffer from a number of attacks, such as outlined by Steffan Esser in his article <a class="ext-link" href="http://www.suspekt.org/2008/08/17/mt_srand-and-not-so-random-numbers/"><span class="icon">mt_srand and not so random numbers</span></a>. To help combat this issue, the fCryptography class provides a <a href="#fCryptography-api-random"><code>random()</code></a> method that will ensure that the random number generator has been seeded with a good seed value. <strong><em>Be sure not to call the PHP functions <code>srand()</code> or <code>mt_srand()</code> in your code.</em></strong>
</p>
<pre class="block php"><code>// Get a random number
$rand = fCryptography::random();

// Get a random number between 1 and 100
$rand = fCryptography::random(1, 100);</code></pre>

<p>
 If you need a random string (such as for an authentication code), you can use the method <a href="#fCryptography-api-randomString"><code>randomString()</code></a>. It requires one parameter, <code>$length</code>, which is the desired string length. A second optional parameter, <code>$type</code>, allows specifying what set of characters will be used in the string. Options include <code>'alphanumeric'</code> (the default), <code>'alpha'</code>, <code>'numeric'</code>, and <code>'hexadecimal'</code>.
</p>
<pre class="block php"><code>// Generate an 8 character alphanumeric string
$code = fCryptography::randomString(8);

// Generate a 32 character hexadecimal string
$code = fCryptography::randomString(32, 'hexadecimal');</code></pre>

<h3 id="fCryptography-docs-PasswordHashing">Password Hashing</h3>

<h4 id="fCryptography-docs-GeneralInformation">General Information</h4>

<p>
Password security is easy to overlook when you dont have the whole picture. Even if your site doesnt store any vital information, most users use the same password for most if not all of their accounts, possibly even the email account they used on your site. Because of this fact password security is a big deal for all sites, and storing passwords in plain text is a very insecure practice.
</p>

<p>
A common practice is to <a class="ext-link" href="http://en.wikipedia.org/wiki/Hash_function"><span class="icon">hash</span></a> a users password using a method such as MD5. Passwords that have been hashed this way are susceptible to <a class="ext-link" href="http://en.wikipedia.org/wiki/Rainbow_table"><span class="icon">rainbow table</span></a> attacks. In order to provide a reasonable amount of security, all passwords should be hashed using a <a class="ext-link" href="http://en.wikipedia.org/wiki/Salt_(cryptography)"><span class="icon">salt</span></a>.
</p>

<p>
By using a salt when hashing the password you pretty much require that a hacker use brute force to decrypt the password. As processors have been increasing in speed the number of hashes that can be checked per second  is constantly increasing, not to mention that hardware exists specially built for hashing. Thus to help prevent brute force attacks it is a common practice to make the hash take a significant enough amount of computation so that brute force attacks take even longer.
</p>

<p>
The key is to balance the computation time to be short enough that a normal user logging in would not notice a performance issue, while a hacker would be significantly slowed in their task of generating millions of hashes.
</p>

<p>
The <a href="#fCryptography-api-hashPassword"><code>hashPassword()</code></a> method takes the provided password and runs it through a non-trivial number of rounds of SHA-1 hashing, alternating including and excluding a random salt from the value being hashed.
</p>

<p>
The output of includes an indicator that the fCryptography class was used for hashing, the salt used (which is unique for each invocation of the method), and the hashed password. The password can be verified by sending this return value and the password to test to the <a href="#fCryptography-api-checkPasswordHash"><code>checkPasswordHash()</code></a>.
</p>

<h4 id="fCryptography-docs-HashingandChecking">Hashing and Checking</h4>

<p>
Here is an example of using the methods:
</p>
<pre class="block php"><code>$hash = fCryptography::hashPassword('Example password');
// ...
if (fCryptography::checkPasswordHash('Example password', $hash)) {
    echo 'The correct password was entered';
}</code></pre>

<p>
 Here is what the output of <code>hashPassword()</code> looks like:
</p>
<pre><code>fCryptography::password_hash#Gu19bpZN94#ac74c4ad9ed7103e051e583af86599b95237e9af</code></pre>

<h3 id="fCryptography-docs-Symmetric-KeyEncryption">Symmetric-Key Encryption</h3>

<h4 id="fCryptography-docs-GeneralInformation">General Information</h4>

<p>
<a class="ext-link" href="http://en.wikipedia.org/wiki/Symmetric_key"><span class="icon">Symmetric key encryption</span></a> is encryption where the same secret key is used for both encryption and decryption. This type of encryption can easily be thwarted if the secret key is stored on the server and that machine is compromised. Because of this it is not recommended as a transparent encryption happening behind the scenes, but rather when a user will provide the secret key each time they access a site.
</p>

<p>
The <a href="#fCryptography-api-symmetricKeyEncrypt"><code>symmetricKeyEncrypt()</code></a> method uses the Rijndael block cipher, which is the basis of the <a class="ext-link" href="http://en.wikipedia.org/wiki/Advanced_Encryption_Standard"><span class="icon">Advanced Encryption Standard</span></a> (or AES). The Rijndael cipher is used with a 192 bit block size and a 256 bit key in <a class="ext-link" href="http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Cipher_feedback_.28CFB.29"><span class="icon">cipher feedback mode</span></a> with a random <a class="ext-link" href="http://en.wikipedia.org/wiki/Initialization_vector"><span class="icon">IV</span></a>. The encrypted plain text and IV are then run through <a class="ext-link" href="http://en.wikipedia.org/wiki/HMAC"><span class="icon">HMAC-SHA-1</span></a> for data integrity checking during decryption.
</p>

<p>
When decrypting using <a href="#fCryptography-api-symmetricKeyDecrypt"><code>symmetricKeyDecrypt()</code></a>, the HMAC is verified to ensure the encrypted value has not been corrupted or altered. The secret key and IV are then used to decrypt the original plain text.
</p>

<p>
If you arent familiar with cryptography or the algorithms mentioned, you can rest assured that the technique and algorithms used are approved for use by the U.S. government when storing TOP SECRET documents.
</p>

<p>
The fCryptography class does enforce the requirement that the secret key is at least 8 characters long. In addition, the return value from <code>symmetricKeyEncrypt()</code> is not simply an encrypted string, but also contains information indicating the encrypted text came from Flourish, the IV, the encrypted plain text and the HMAC.
</p>

<h4 id="fCryptography-docs-EncryptionandDecryption">Encryption and Decryption</h4>

<p>
Here is an example of using <code>symmetricKeyEncrypt()</code> and <code>symmetricKeyDecrypt()</code>:
</p>
<pre class="block php"><code>// Encrypt the data
$ciphertext = fCryptography::symmetricKeyEncrypt('This is a secret message to be encrypted', 'Secret Key');

// Decrypt the data
$plaintext  = fCryptography::symmetricKeyDecrypt($ciphertext, 'Secret Key');</code></pre>

<p>
 Here is an example of what the ciphertext would look like:
</p>
<pre><code>fCryptography::symmetric#1l2rt6kP0kqdIDuSVpGrSoTy08sE33fAMf6Y0M0CtOU=#csRlMH6l6dnks6hCOhI+IxDAA69GAI/d5L3L77G0parEdlc/dDDz1z/ASX/I8suj/uAEXjxShhcrEwo0IzYODuoeSdmJvGKZJtquCWkKPg==#ef5973e32808e01f5be2745a0a9ef61396992ddf</code></pre>

<p>
 <em>Please note that the symmetric key methods require both the mcrypt and hash extensions for PHP to be installed.</em>
</p>

<h3 id="fCryptography-docs-Public-KeyEncryptionandSigning">Public-Key Encryption and Signing</h3>

<h4 id="fCryptography-docs-GeneralInformation">General Information</h4>

<p>
<a class="ext-link" href="http://en.wikipedia.org/wiki/Public-key_cryptography"><span class="icon">Public-key encryption</span></a> is encryption where a readily available public key can be used by anyone to encrypt data that only the corresponding private key can decrypt. The private key is usually protected by a password, allowing for it to be stored on a server without fear of compromise by simply reading it.
</p>

<p>
Public-key cryptography would allow for encryption to happen behind the scenes on the front-end of a web site, while requiring users decrypting the information to provide the private-key password.
</p>

<p>
To perform public-key encryption you will need an X.509 public-key certificate and private key in PEM format. Please visit the <a href="#ObtainingaSecureCertificateKeyPair-docs">Obtaining a Secure Certificate Key Pair</a> page for more information.
</p>

<p>
The public certificate is not actually used to do the encryption, but rather a randomly generated 128-bit key  is used for the encryption process and then the public certificate (which is 1024 or 2048 bits in length) is used to encrypt that random key. The cipher used for the encryption is the <a class="ext-link" href="http://en.wikipedia.org/wiki/RC4"><span class="icon">RC4 stream cipher</span></a>. On the receiving end the private key is used to decrypt the random RC4 key and then that is in turn used to decrypt the actual data.
</p>

<p>
To ensure that the data is not tampered with between encryption and decryption, the encrypted random key and the ciphertext are run through HMAC-SHA-1 and included in the output. This HMAC is verified when the data is decrypted.
</p>

<h4 id="fCryptography-docs-Encryption">Encryption</h4>

<p>
To encrypt a string you will need the public certificate and the method <a href="#fCryptography-api-publicKeyEncrypt"><code>publicKeyEncrypt()</code></a>. Simply pass the message and the path to the public certificate to the method and you will receive an encrypted string:
</p>
<pre class="block php"><code>$ciphertext = fCrytography::publicKeyEncrypt('This is a secret message!', './public.cer');</code></pre>

<p>
 Here is an example of what the ciphertext would look like:
</p>
<pre><code>fCryptography::public#VHpfAoWC2h2sqFtdRy7Ihv7P2C1VPQ0SQduHT5div6+nq8Y0o6+sM5XgLDl+zXMnmY4+xOtohsBaFQ/MDiWA7VI5vXgK0j04vv6bcnkGwFz1M+o3Tuyo8Yu152Gj7iajJz9S1fiLOo4PMiRnafxbtfyExMFKJ6wiyc7AfjiGUUM=#YLehWyfNOvUEPrsFtRFeBHtvKJOy#4258dbd7e6bd144ab1aa98a0f5d2a9f8be9fb231</code></pre>

<h4 id="fCryptography-docs-Decryption">Decryption</h4>

<p>
To decrypt the ciphertext the private key and private key password are required to be passed with the ciphertext to the <a href="#fCryptography-api-publicKeyDecrypt"><code>publicKeyDecrypt()</code></a> method. If the private key in unencrypted (not recommended when placed on the same server as the encrypted data) then an empty string can be passed as the password parameter:
</p>
<pre class="block php"><code>// Using a private key that is encrypted with a password
$plaintext = fCryptography::publicKeyDecrypt($ciphertext, './private.key', 'private key password');

// Using a private key that is not encrypted
$plaintext = fCryptography::publicKeyDecrypt($ciphertext, './private.key', '');</code></pre>

<h4 id="fCryptography-docs-SigningandVerification">Signing and Verification</h4>

<p>
Public-key cryptography also provides functionality to verify that a message has originated from a specific author through signing and verification. The private key can be used to create a secure message digest of a message or string and then the public key can be used to verify it.
</p>

<p>
The method <a href="#fCryptography-api-publicKeySign"><code>publicKeySign()</code></a> will create the signature for a plaintext source. It takes three parameters, the <code>$plaintext</code> to create a signature for, the <code>$private_key_file</code> path and the <code>$password</code> for the private key. The signature will be returned by the method in base-64 encoding to allow for transmission over channels that may not properly transmit binary data.
</p>
<pre class="block php"><code>$signature = fCryptography::publicKeySign($plaintext, './private.key', 'private key password');</code></pre>

<p>
The signature of any plaintext can be authenticated by using the authors public key and the method <a href="#fCryptography-api-publicKeyVerify"><code>publicKeyVerify()</code></a>. This method will return a boolean indicating if the claimed author actually created the plaintext in question. The three parameters are the <code>$plaintext</code>, the base-64 encoded <code>$signature</code> and the authors <code>$public_key_file</code>.
</p>
<pre class="block php"><code>if (fCryptography::publicKeyVerify($plaintext, $signature, './public.cer')) {
   echo 'This message has been verified authentic!';
}</code></pre>

<h3 id="fCryptography-docs-HashandCiphertextFormats">Hash and Ciphertext Formats</h3>

<p>
If you are hashing or encrypting data using the fCryptography class but need to reverse the process on another system you will probably want to refer to this section as a starting point, and then look at the <a class="ext-link" href="https://github.com/flourishlib/flourish-classes/blob/master/fCryptography.php"><span class="icon">source code</span></a>.
</p>

<p>
If you simply wish to decrypt data encrypted with or check a hash created by the fCryptography class, please check the appropriate section above the relevant decrypt or check method. 
</p>

<h4 id="fCryptography-docs-hashPassword">hashPassword()</h4>

<p>
<code>hashPassword()</code> outputs a string in the following format:
</p>
<pre><code>fCryptography::password_hash#{salt}#{hash}</code></pre>

<p>
 <code>{salt}</code> is a random 10 character alphanumeric string that prepended to the password before being run through  <code>sha1()</code>. <code>{hash}</code> is a result of another non-trivial number of iterations of executing <code>sha1()</code> on the result of the last <code>sha1()</code> call appended with the original password or salt in alternating fashion.
</p>

<h4 id="fCryptography-docs-symmetricKeyEncrypt">symmetricKeyEncrypt()</h4>

<p>
<code>symmetricKeyEncrypt()</code> outputs a string in the following format:
</p>
<pre><code>fCryptography::symmetric#{iv}#{ciphertext}#{hmac}</code></pre>

<p>
 The <code>{iv}</code> is the randomly generated initialization vector that has been base-64 encoded.
</p>

<p>
The <code>{ciphertext}</code> is the provided plaintext that has been encrypted using Rijndael-192 in CFB mode using the initialization vector and then base-64 encoded.
</p>

<p>
The <code>{hmac}</code> is the encrypted initialization vector concatenated with the encrypted plaintext (neither having been base-64 encoded yet). It is then run through a SHA-1 HMAC using the secret key provided.
</p>

<h4 id="fCryptography-docs-publicKeyEncrypt">publicKeyEncrypt()</h4>

<p>
<code>publicKeyEncrypt()</code> outputs a string in the following format:
</p>
<pre><code>fCrytography::public#{secret_key}#{ciphertext}#{hmac}</code></pre>

<p>
 The <code>{secret_key}</code> is a random 128-bit RC4 secret key that has been encrypted (via RSA) using provided public certificate. It is base64-encoded before added to the output string.
</p>

<p>
<code>{ciphertext}</code> is the plaintext that has been encrypted via the RC4 stream cipher using the random RC4 key and is encoded using base64.
</p>

<p>
<code>{hmac}</code> is a SHA-1 HMAC of the concatenated encrypted secret key and the ciphertext generated using the plaintext as the key. Neither the encrypted secret key, nor the ciphertext is base64 encoded before the HMAC is calculated.
</p>

<h4 id="fCryptography-docs-publicKeySign">publicKeySign()</h4>

<p>
<code>publicKeySign()</code> returns a base-64 encoded SHA-1 hash of the plaintext that has been encrypted using the private key.
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fCryptography-api">fCryptography API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fCryptography">Class Documentation</a></li>
		<li><strong><a href="#fCryptography-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fCryptography-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fCryptography-api-checkPasswordHash">checkPasswordHash()</a></li>
	  			<li class="protected"><a href="#fCryptography-api-hashHMAC">hashHMAC()</a></li>
	  			<li><a href="#fCryptography-api-hashPassword">hashPassword()</a></li>
	  			<li><a href="#fCryptography-api-publicKeyDecrypt">publicKeyDecrypt()</a></li>
	  			<li><a href="#fCryptography-api-publicKeyEncrypt">publicKeyEncrypt()</a></li>
	  			<li><a href="#fCryptography-api-publicKeySign">publicKeySign()</a></li>
	  			<li><a href="#fCryptography-api-publicKeyVerify">publicKeyVerify()</a></li>
	  			<li><a href="#fCryptography-api-random">random()</a></li>
	  			<li><a href="#fCryptography-api-randomString">randomString()</a></li>
	  			<li><a href="#fCryptography-api-symmetricKeyDecrypt">symmetricKeyDecrypt()</a></li>
	  			<li><a href="#fCryptography-api-symmetricKeyEncrypt">symmetricKeyEncrypt()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fEmail">fEmail</a></li>
		<li><a href="#fORMColumn">fORMColumn</a></li>
		<li><a href="#fRequest">fRequest</a></li>
		<li><a href="#fSMTP">fSMTP</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b14</span></div>
<p class="short_description">Provides cryptography functionality, including hashing, symmetric-key encryption and public-key encryption</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b14</th><td>Added the <tt>base36</tt>, <tt>base56</tt> and custom types to <a href="#fCryptography-api-randomString"><tt>randomString()</tt></a> <span class="date">8/25/11</span></td></tr><tr><th>1.0.0b13</th><td>Updated documentation about symmetric-key encryption to explicitly state block and key sizes, added base64 type to <a href="#fCryptography-api-randomString"><tt>randomString()</tt></a> <span class="date">11/6/10</span></td></tr><tr><th>1.0.0b12</th><td>Fixed an inline comment that incorrectly references AES-256 <span class="date">11/4/10</span></td></tr><tr><th>1.0.0b11</th><td>Updated class to use <a href="#fCore-api-startErrorCapture"><tt>fCore::startErrorCapture()</tt></a> instead of <tt>error_reporting()</tt> <span class="date">8/9/10</span></td></tr><tr><th>1.0.0b10</th><td>Added a missing parameter to an <a href="#fProgrammerException">fProgrammerException</a> in <a href="#fCryptography-api-randomString"><tt>randomString()</tt></a> <span class="date">7/29/10</span></td></tr><tr><th>1.0.0b9</th><td>Added <a href="#fCryptography-api-hashHMAC"><tt>hashHMAC()</tt></a> <span class="date">4/20/10</span></td></tr><tr><th>1.0.0b8</th><td>Fixed seedRandom() to pass a directory instead of a file to <a class="ext-link" href="http://php.net/disk_free_space"><span class="icon"><tt>disk_free_space()</tt></span></a> <span class="date">3/9/10</span></td></tr><tr><th>1.0.0b7</th><td>SECURITY FIX: fixed issue with <a href="#fCryptography-api-random"><tt>random()</tt></a> and <a href="#fCryptography-api-randomString"><tt>randomString()</tt></a> not producing random output on OSX, made seedRandom() more robust <span class="date">10/6/09</span></td></tr><tr><th>1.0.0b6</th><td>Changed <a href="#fCryptography-api-symmetricKeyEncrypt"><tt>symmetricKeyEncrypt()</tt></a> to throw an <a href="#fValidationException">fValidationException</a> when the $secret_key is less than 8 characters <span class="date">9/30/09</span></td></tr><tr><th>1.0.0b5</th><td>Fixed a bug where some windows machines would throw an exception when generating random strings or numbers <span class="date">6/9/09</span></td></tr><tr><th>1.0.0b4</th><td>Updated for new <a href="#fCore">fCore</a> API <span class="date">2/16/09</span></td></tr><tr><th>1.0.0b3</th><td>Changed @ error suppression operator to <tt>error_reporting()</tt> calls <span class="date">1/26/09</span></td></tr><tr><th>1.0.0b2</th><td>Backwards compatibility break - changed <a href="#fCryptography-api-symmetricKeyEncrypt"><tt>symmetricKeyEncrypt()</tt></a> to not encrypt the IV since we are using HMAC on it <span class="date">1/26/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">11/27/07</span></td></tr></table></div>
<div class="class_methods static" id="fCryptography-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fCryptography-api-checkPasswordHash" class="method static"><span class="resolution">::</span><span class="name">checkPasswordHash()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Checks a password against a hash created with hashPassword()</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">checkPasswordHash</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$password</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$hash</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$password</td>
				<td class="param_description">The password to check</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$hash</td>
				<td class="param_description">The hash to check against</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the password matches the hash
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fCryptography-api-hashHMAC" class="protected method static"><span class="resolution">::</span><span class="name">hashHMAC()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Provides a pure PHP implementation of <tt>hash_hmac()</tt> for when the hash extension is not installed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">hashHMAC</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$algorithm</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$data</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$key</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$algorithm</td>
				<td class="param_description">The hashing algorithm to use: <tt>'md5'</tt> or <tt>'sha1'</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$data</td>
				<td class="param_description">The data to create an HMAC for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key</td>
				<td class="param_description">The key to generate the HMAC with</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The HMAC
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCryptography-api-hashPassword" class="method static"><span class="resolution">::</span><span class="name">hashPassword()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Hashes a password using a loop of sha1 hashes and a salt, making rainbow table attacks infeasible</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">hashPassword</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$password</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$password</td>
				<td class="param_description">The password to hash</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					An 80 character string of the Flourish fingerprint, salt and hashed password
				</p>
			</div>
			<!-- end method static -->
						<!-- start method static -->
			<h5 id="fCryptography-api-publicKeyDecrypt" class="method static"><span class="resolution">::</span><span class="name">publicKeyDecrypt()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Decrypts ciphertext encrypted using public-key encryption via publicKeyEncrypt()</p>
								<p>A public key (X.509 certificate) is required for encryption and a  private key (PEM) is required for decryption.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">publicKeyDecrypt</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$ciphertext</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$private_key_file</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$password</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$ciphertext</td>
				<td class="param_description">The content to be decrypted</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$private_key_file</td>
				<td class="param_description">The path to a PEM-encoded private key</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$password</td>
				<td class="param_description">The password for the private key</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The decrypted plaintext
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When the ciphertext appears to be corrupted</dd></dl>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCryptography-api-publicKeyEncrypt" class="method static"><span class="resolution">::</span><span class="name">publicKeyEncrypt()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Encrypts the passed data using public key encryption via OpenSSL</p>
								<p>A public key (X.509 certificate) is required for encryption and a  private key (PEM) is required for decryption.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">publicKeyEncrypt</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$plaintext</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$public_key_file</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$plaintext</td>
				<td class="param_description">The content to be encrypted</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$public_key_file</td>
				<td class="param_description">The path to an X.509 public key certificate</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					A base-64 encoded result containing a Flourish fingerprint and suitable for decryption using <a href="#fCryptography-api-publicKeyDecrypt"><tt>publicKeyDecrypt()</tt></a>
				</p>
			</div>
			<!-- end method static -->
						<!-- start method static -->
			<h5 id="fCryptography-api-publicKeySign" class="method static"><span class="resolution">::</span><span class="name">publicKeySign()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Creates a signature for plaintext to allow verification of the creator</p>
								<p>A private key (PEM) is required for signing and a public key  (X.509 certificate) is required for verification.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">publicKeySign</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$plaintext</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$private_key_file</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$password</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$plaintext</td>
				<td class="param_description">The content to be signed</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$private_key_file</td>
				<td class="param_description">The path to a PEM-encoded private key</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$password</td>
				<td class="param_description">The password for the private key</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The base64-encoded signature suitable for verification using <a href="#fCryptography-api-publicKeyVerify"><tt>publicKeyVerify()</tt></a>
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When the private key is invalid</dd></dl>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCryptography-api-publicKeyVerify" class="method static"><span class="resolution">::</span><span class="name">publicKeyVerify()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Checks a signature for plaintext to verify the creator - works with publicKeySign()</p>
								<p>A private key (PEM) is required for signing and a public key  (X.509 certificate) is required for verification.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">publicKeyVerify</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$plaintext</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$signature</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$public_key_file</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$plaintext</td>
				<td class="param_description">The content to check</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$signature</td>
				<td class="param_description">The base64-encoded signature for the plaintext</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$public_key_file</td>
				<td class="param_description">The path to an X.509 public key certificate</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the public key file is the public key of the user who signed the plaintext
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCryptography-api-random" class="method static"><span class="resolution">::</span><span class="name">random()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Generates a random number using <a class="ext-link" href="http://php.net/mt_rand"><span class="icon"><tt>mt_rand()</tt></span></a> after ensuring a good PRNG seed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">random</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$min</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$max</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$min</td>
				<td class="param_description">The minimum number to return</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$max</td>
				<td class="param_description">The maximum number to return</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The psuedo-random number
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fCryptography-api-randomString" class="method static"><span class="resolution">::</span><span class="name">randomString()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns a random string of the type and length specified</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">randomString</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$length</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$type</span><span class="php-code">=</span>'alphanumeric' <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$length</td>
				<td class="param_description">The length of string to return</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$type</td>
				<td class="param_description">The type of string to return: <tt>'base64'</tt>, <tt>'base56'</tt>, <tt>'base36'</tt>, <tt>'alphanumeric'</tt>, <tt>'alpha'</tt>, <tt>'numeric'</tt>, or <tt>'hexadecimal'</tt>, if a different string is provided, it will be used for the alphabet</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					A random string of the type and length specified
				</p>
			</div>
			<!-- end method static -->
						<!-- start method static -->
			<h5 id="fCryptography-api-symmetricKeyDecrypt" class="method static"><span class="resolution">::</span><span class="name">symmetricKeyDecrypt()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Decrypts ciphertext encrypted using symmetric-key encryption via symmetricKeyEncrypt()</p>
								<p>Since this is symmetric-key cryptography, the same key is used for  encryption and decryption.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">symmetricKeyDecrypt</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$ciphertext</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$secret_key</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$ciphertext</td>
				<td class="param_description">The content to be decrypted</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$secret_key</td>
				<td class="param_description">The secret key to use for decryption</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The decrypted plaintext
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When the ciphertext appears to be corrupted</dd></dl>
			</div>
			<!-- end method static -->
						<!-- start method static -->
			<h5 id="fCryptography-api-symmetricKeyEncrypt" class="method static"><span class="resolution">::</span><span class="name">symmetricKeyEncrypt()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Encrypts the passed data using symmetric-key encryption</p>
								<p>Since this is symmetric-key cryptography, the same key is used for  encryption and decryption.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">symmetricKeyEncrypt</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$plaintext</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$secret_key</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$plaintext</td>
				<td class="param_description">The content to be encrypted</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$secret_key</td>
				<td class="param_description">The secret key to use for encryption - must be at least 8 characters</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					An encrypted and base-64 encoded result containing a Flourish fingerprint and suitable for decryption using <a href="#fCryptography-api-symmetricKeyDecrypt"><tt>symmetricKeyDecrypt()</tt></a>
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When the $secret_key is less than 8 characters long</dd></dl>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fDatabase">fDatabase</h2>
<div class="sidebar">
<h3 id="fDatabase-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fDatabase">Class Documentation</a></strong></li>
<li><a href="#fDatabase-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fDatabase-docs-SupportedDatabases">Supported Databases</a></li>
<li><a href="#fDatabase-docs-Connecting">Connecting</a>
<ul>
<li><a href="#fDatabase-docs-LazyConnections">Lazy Connections</a></li>
<li><a href="#fDatabase-docs-ConnectionExceptions">Connection Exceptions</a></li>
<li><a href="#fDatabase-docs-LoginInformationSecurity">Login Information (Security)</a></li>
</ul>
</li>
<li><a href="#fDatabase-docs-Queries">Queries</a></li>
<li><a href="#fDatabase-docs-UnbufferedQueries">Unbuffered Queries</a></li>
<li><a href="#fDatabase-docs-Non-Queries">Non-Queries</a></li>
<li><a href="#fDatabase-docs-Cross-DatabaseSQL">Cross-Database SQL</a></li>
<li><a href="#fDatabase-docs-Transactions">Transactions</a></li>
<li><a href="#fDatabase-docs-EscapingDataSecurity">Escaping Data (Security)</a></li>
<li><a href="#fDatabase-docs-EscapingIdentifiers">Escaping Identifiers</a></li>
<li><a href="#fDatabase-docs-UnescapingData">Unescaping Data</a></li>
<li><a href="#fDatabase-docs-PreparedStatements">Prepared Statements</a>
<ul>
<li><a href="#fDatabase-docs-Performance">Performance</a></li>
<li><a href="#fDatabase-docs-Limitations">Limitations</a></li>
</ul>
</li>
<li><a href="#fDatabase-docs-Debugging">Debugging</a></li>
<li><a href="#fDatabase-docs-Caching">Caching</a></li>
<li><a href="#fDatabase-docs-Hooks">Hooks</a></li>
</ul>

<h3 id="fDatabase-docs-DatabaseClasses">Database Classes </h3>

<ul>
<li><strong>fDatabase</strong></li>
<li><a href="#fNoRowsException">fNoRowsException</a></li>
<li><a href="#fResult">fResult</a></li>
<li><a href="#fSQLException">fSQLException</a></li>
<li><a href="#fSQLTranslation">fSQLTranslation</a></li>
<li><a href="#fSQLSchemaTranslation">fSQLSchemaTranslation</a></li>
<li><a href="#fSchema">fSchema</a></li>
<li><a href="#fStatement">fStatement</a></li>
<li><a href="#fUnbufferedResult">fUnbufferedResult</a></li>
</ul>
</div>

<p>
The fDatabase class abstracts interaction with <a class="ext-link" href="http://mysql.com"><span class="icon">MySQL</span></a>, <a class="ext-link" href="http://postgresql.org"><span class="icon">PostgreSQL</span></a>, <a class="ext-link" href="http://sqlite.org"><span class="icon">SQLite</span></a>, <a class="ext-link" href="http://microsoft.com/sql/"><span class="icon">Microsoft SQL Server</span></a> (MSSQL), <a class="ext-link" href="http://www.oracle.com/database/index.html"><span class="icon">Oracle</span></a> and <a class="ext-link" href="http://www.ibm.com/db2"><span class="icon">IBM DB2</span></a> databases.
</p>

<h3 id="fDatabase-docs-SupportedDatabases">Supported Databases</h3>

<p>
The fDatabase class allows for interaction with a number of popular <a class="ext-link" href="http://en.wikipedia.org/wiki/Comparison_of_relational_database_management_systems"><span class="icon">relational database management systems</span></a>. Rather than requiring a specific PHP extension to interact with each of these DBs, Flourish shows its portable nature by automatically detecting and using the installed extension for the database type specified.
</p>

<p>
Here is a list of the supported DBs and the PHP extensions that are currently supported:
</p>
<table><tbody>
<tr>
<td><strong>DB</strong></td>
<td><strong>PHP Extensions</strong></td>
</tr>
<tr>
<td><a class="ext-link" href="http://microsoft.com/sql/"><span class="icon">MSSQL</span></a></td>
<td><a class="ext-link" href="http://msdn.microsoft.com/en-us/library/cc296221.aspx"><span class="icon">sqlsrv</span></a>, <a class="ext-link" href="http://php.net/pdo_dblib"><span class="icon">pdo_dblib</span></a>, <a class="ext-link" href="http://php.net/mssql"><span class="icon">mssql</span></a> (or <a class="ext-link" href="http://php.net/sybase"><span class="icon">sybase</span></a>)</td>
</tr>
<tr>
<td><a class="ext-link" href="http://mysql.com"><span class="icon">MySQL</span></a></td>
<td><a class="ext-link" href="http://php.net/mysql"><span class="icon">mysql</span></a>, <a class="ext-link" href="http://php.net/mysqli"><span class="icon">mysqli</span></a>, <a class="ext-link" href="http://php.net/pdo_mysql"><span class="icon">pdo_mysql</span></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://www.oracle.com/database/index.html"><span class="icon">Oracle</span></a></td>
<td><a class="ext-link" href="http://php.net/oci8"><span class="icon">oci8</span></a>, <a class="ext-link" href="http://php.net/pdo_oci"><span class="icon">pdo_oci</span></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://postgresql.org"><span class="icon">PostgreSQL</span></a></td>
<td><a class="ext-link" href="http://php.net/pgsql"><span class="icon">pgsql</span></a>, <a class="ext-link" href="http://php.net/pdo_pgsql"><span class="icon">pdo_pgsql</span></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://sqlite.org"><span class="icon">SQLite</span></a></td>
<td><a class="ext-link" href="http://php.net/pdo_sqlite"><span class="icon">pdo_sqlite</span></a> (for v3.x), <a class="ext-link" href="http://php.net/sqlite"><span class="icon">sqlite</span></a> (for v2.x)</td>
</tr>
<tr>
<td><a class="ext-link" href="http://www.ibm.com/db2"><span class="icon">DB2</span></a></td>
<td><a class="ext-link" href="http://php.net/ibm_db2"><span class="icon">ibm_db2</span></a>, <a class="ext-link" href="http://php.net/pdo_ibm"><span class="icon">pdo_ibm</span></a></td>
</tr>
</tbody></table>

<h3 id="fDatabase-docs-Connecting">Connecting</h3>

<p>
As a first step to interacting with a database, a connection needs to be made. This is done by creating a new instance of the fDatabase class. The <a href="#fDatabase-api-__consruct">constructor</a> takes the database <code>$type</code>, <code>$name</code>, <code>$username</code>, <code>$password</code>, <code>$server</code>, <code>$port</code> and <code>$timeout</code> as parameters. MSSQL, MySQL, Oracle and PostgreSQL databases require all parameters except for the <code>$server</code>, <code>$port</code> and <code>$timeout</code>. SQLite databases only require the <code>$type</code> and <code>$name</code> parameters.
</p>
<pre class="block php"><code>// Connecting to a MSSQL database on localhost running on the default port
$mssql_db  = new fDatabase('mssql', 'my_database', 'username', 'password');

// Connecting to a MySQL database on the server example.com
$mysql_db  = new fDatabase('mysql', 'my_database', 'username', 'password', 'example.com');

// Connecting to an Oracle database on localhost
$oracle_db = new fDatabase('oracle', 'my_database', 'username', 'password');

// Connecting to a PostgreSQL database on the current server using a non-standard port
$pgsql_db  = new fDatabase('postgresql', 'my_database', 'username', 'password', 'localhost', 1234);

// Connection to an SQLite database
$sqlite_db = new fDatabase('sqlite', '/path/to/database/file');

// Connecting to a remote DB2 server
$db2_db    = new fDatabase('db2', 'my_database', 'username', 'password', 'remote.host.com', 60000);

// Connect on the default port with a timeout of 1 second
$pgsql_db  = new fDatabase('postgresql', 'my_database', 'username', 'password', 'localhost', NULL, 1);</code></pre>

<p>
 It is possible to connect to a MySQL database using a socket connection by passing <code>sock:/path/to/the/socket</code> as the <code>$server</code> parameter. For a PostgreSQL socket connection, simply pass <code>sock:</code> in the <code>$server</code> parameter.
</p>

<p>
The <code>$timeout</code> parameter accepts integers, and represents the number of seconds after which to stop trying to connect to the database.
</p>

<h4 id="fDatabase-docs-LazyConnections">Lazy Connections</h4>

<p>
When creating an fDatabase instance, a connection to the server is not automatically established. Instead, once a response is required from the server, then fDatabase will establish the connection. To force a connection at a specific time, usually for the sake of handling connection exceptions, call the method <a href="#fDatabase-api-connect"><code>connect()</code></a>.
</p>
<pre class="block php"><code>try {
    $db = new fDatabase('postgresql', 'my_database', 'username', 'password');
    // Please note that calling this method is not required, and simply
    // causes an exception to be thrown if the connection can not be made
    $db-&gt;connect();

} catch (fAuthorizationException $e) {
    $e-&gt;printMessage();
}</code></pre>

<h4 id="fDatabase-docs-ConnectionExceptions">Connection Exceptions</h4>

<p>
When connecting to a server, fDatabase can throw either an <a href="#fAuthorizationException">fAuthorizationException</a> when a username or password is incorrect, or an <a href="#fConnectivityException">fConnectivityException</a> when a server does not respond, a hostname lookup fails, or the database specified can not be accessed.
</p>

<p>
Catching both <a href="#fAuthorizationException">fAuthorizationException</a> and <a href="#fConnectivityException">fConnectivityException</a> objects can be useful for handling validation of user-supplied connection parameters. 
</p>
<pre class="block php"><code>try {
    $db = new fDatabase($type, $database, $username, $password, $server, $port);
    $db-&gt;connect();
} catch (fAuthorizationException $e) {
    fMessaging::create('error', $e-&gt;getMessage());
} catch (fConnectivityException $e) {
    fMessaging::create('error', $e-&gt;getMessage());
}</code></pre>

<p>
 Catching <a href="#fConnectivityException">fConnectivityException</a> objects can also be used to handle failover in replicated database environments.
</p>
<pre class="block php"><code>// Use APC to cache the server status
$cache = new fCache('apc');

$servers = array('server1', 'server2', 'server3');
foreach ($servers as $server) {
    try {
        // Skip servers that are down
        if ($cache-&gt;get($server . '-down')) { continue; }

        // Use a one second timeout for fast failover
        $db = new fDatabase('postgresql', 'my_database', 'username', 'password', $server, NULL, 1);
        $db-&gt;connect();
        break;
    
    // If the connection failed, mark the server as down for 5 minutes
    } catch (fConnectivityException $e) {
        $cache-&gt;set($server . '-down', TRUE, 300);
    }
}</code></pre>

<h4 id="fDatabase-docs-LoginInformationSecurity">Login Information (Security)</h4>

<p>
<em>Please note that the database password is stored in the object, and may be exposed via <a class="ext-link" href="http://php.net/print_r"><span class="icon"><code>print_r()</code></span></a>, <a href="#fCore-api-expose">fCore::expose()</a>, or similar methods. <a href="#fResult">fResult</a>, <a href="#fUnbufferedResult">fUnbufferedResult</a>, <a href="#fSchema">fSchema</a>, <a href="#fStatement">fStatement</a> and <a href="#fSQLTranslation">fSQLTranslation</a> objects also contain a reference to an fDatabase object and thus could expose password data in a similar fashion.</em>
</p>

<h3 id="fDatabase-docs-Queries">Queries</h3>

<p>
Once you have established a databases connection you can start executing queries using the <a href="#fDatabase-api-query"><code>query()</code></a> method. This method executes a query and returns an instance of the <a href="#fResult">fResult</a> class to access returned rows and get information about the query that was executed.
</p>

<p>
<em>Please note this method executes queries in a buffered manner. This means that all results are loaded into PHP memory, which can cause performance issues for very large result sets (in the order of 500+ rows). For large result sets, <a href="#fDatabase-docs-UnbufferedQueries">unbuffered queries</a> will generally yield better performance (at the cost of certain other restrictions).</em>
</p>
<pre class="block php"><code>// Execute a SQL query and retrieve all returned rows
$result = $mysql_db-&gt;query('SELECT * FROM users LIMIT 5');
foreach ($result as $row) {
    // Access the row
}</code></pre>

<p>
 For more information about what can be done with a query result, please see the <a href="#fResult">fResult</a> page.
</p>

<h3 id="fDatabase-docs-UnbufferedQueries">Unbuffered Queries</h3>

<p>
Unbuffered queries will often have better performance for large results sets, however the exact details can vary from database driver to driver. Many database drivers will only allow a single unbuffered query to be active at any point. If another database query is called, it will either cause the previous call to close or will fail itself.
</p>

<p>
Calling <a href="#fDatabase-api-unbufferedQuery"><code>unbufferedQuery()</code></a> will return an instance of <a href="#fUnbufferedResult">fUnbufferedResult</a>. This is similar to an <a href="#fResult">fResult</a> object, however does not have the ability to retrieve the number of returned rows, or seek to different rows in the set.
</p>

<p>
<em>Please note that some database/extension combinations do not provide unbuffered query functionality, and thus will not necessarily gain the same performance benefits as others. The following database extensions are known to have unbuffered benefits: pdo_*, mysql, mysqli, sqlite.</em>
</p>
<pre class="block php"><code>$result = $mysql_db-&gt;unbufferedQuery('SELECT * FROM users');
foreach ($result as $row) {
    // Don't execute another query in here or the original result will be destroyed
}</code></pre>

<h3 id="fDatabase-docs-Non-Queries">Non-Queries</h3>

<p>
In situations where no result is required to be iterated over, such as an <code>UPDATE</code> statement, the <a href="#fDatabase-api-execute"><code>execute()</code></a> method can be used. This method takes all of the same parameters as <a href="#fDatabase-api-query"><code>query()</code></a>, however it does not return an <a href="#fResult">fResult</a> object.
</p>
<pre class="block php"><code>$db-&gt;execute(&quot;UPDATE users SET name = %s WHERE name = %s&quot;, 'Will', 'William');</code></pre>

<p>
 Like the <a href="#fDatabase-api-query"><code>query()</code></a> and <a href="#fDatabase-api-unbufferedQuery"><code>unbufferedQuery()</code></a> methods, an <a href="#fSQLException">fSQLException</a> will be thrown if a SQL error occurs.
</p>

<h3 id="fDatabase-docs-Cross-DatabaseSQL">Cross-Database SQL</h3>

<p>
One of the features fDatabase provides for portable code is the ability to run SQL queries that work across all supported databases. The <a href="#FlourishSql-docs">Flourish SQL</a> page includes a list of all supported SQL syntax and what it is translated into for each different database engine.
</p>

<p>
The two methods <a href="#fDatabase-api-translatedQuery"><code>translatedQuery()</code></a> and <a href="#fDatabase-api-unbufferedTranslatedQuery"><code>unbufferedTranslatedQuery()</code></a> work exactly the same as <a href="#fDatabase-api-query"><code>query()</code></a> and <a href="#fDatabase-api-unbufferedQuery"><code>unbufferedQuery()</code></a> except that the SQL statements are translated from <a href="#FlourishSql-docs">Flourish SQL</a> into the SQL dialect supported by the current database.
</p>

<p>
For instance, if you are familiar with MSSQL databases, you will know that the <code>LIMIT</code> syntax is not valid, but instead it required you to use the <code>TOP</code> keyword. The following PHP:
</p>
<pre class="block php"><code>$result = $mssql_db-&gt;translatedQuery(&quot;SELECT * FROM users LIMIT 5&quot;);</code></pre>

<p>
 Would actually be executed as the following SQL:
</p>
<pre class="block sql"><code>SELECT TOP 5 * FROM users</code></pre>

<h3 id="fDatabase-docs-Transactions">Transactions</h3>

<p>
<em>If you aren't familiar with what database transactions are, please read the Wikipedia page <a class="ext-link" href="http://en.wikipedia.org/wiki/Database_transaction"><span class="icon">Database transaction</span></a> first.</em>
</p>

<p>
The fDatabase class by default executes all SQL queries immediately, in what is referred to as auto-commit mode. To perform one or more queries in a transaction that can be rolled back or commited, basic SQL queries are used instead of method calls.
</p>

<p>
fDatabase does <em>minimal</em> translation of transaction SQL queries since there isn't a single consistent set of commands for all supported databases. Each of these queries will work with any of the supported databases.
</p>
<pre class="block php"><code>// Start a transaction
$db-&gt;query('BEGIN');

// Commit changes made during this transaction
$db-&gt;query('COMMIT');

// Rollback changes that have not been committed
$db-&gt;query('ROLLBACK');</code></pre>

<p>
 <em>Please note that MySQL MyISAM tables do <strong>not</strong> support transactions and will auto-commit even if a transaction has been started. Please see the <a href="#OrmConventions#MySQLStorageEngine-docs">ORM Conventions: MySQL Storage Engine</a> section for details about this and other drawbacks to using MyISAM.</em>
</p>

<h3 id="fDatabase-docs-EscapingDataSecurity">Escaping Data (Security)</h3>

<p>
If you have any experience with database interaction you are probably familiar with <a class="ext-link" href="http://en.wikipedia.org/wiki/SQL_injection"><span class="icon">SQL injection</span></a> attacks. For this reason, and the fact that the supported databases have varying representations for the various data types, it is recommended that all data going in and coming out of the database be escaped and unescaped respectively.
</p>

<p>
Arbitrary SQL escaping data can be done at any point by the <a href="#fDatabase-api-escape"><code>escape()</code></a> method, but should normally be done when calling <a href="#fDatabase-api-query"><code>query()</code></a> (also <code>translatedQuery()</code>, <code>unbufferedQuery()</code>, <code>unbufferedTranslatedQuery()</code>).
</p>

<p>
The <code>query</code> methods accept <code>$sql</code> as the first parameter, followed by the required number of values to bind/inject into the query. This injection is done via data type placeholders in the <code>$sql</code>, and fully escapes the values based on the data type. These placeholder are similar to some of the formatting strings in <a class="ext-link" href="http://php.net/sprintf"><span class="icon">sprintf()</span></a>. Here is a list of the various placeholders and what data type the value will be escaped as:
</p>

<ul>
<li><code>'%l'</code>: <em>blob</em></li>
<li><code>'%b'</code>: <em>boolean</em></li>
<li><code>'%d'</code>: <em>date</em></li>
<li><code>'%f'</code>: <em>float</em></li>
<li><code>'%i'</code>: <em>integer</em></li>
<li><code>'%s'</code>: <em>string</em></li>
<li><code>'%t'</code>: <em>time</em></li>
<li><code>'%p'</code>: <em>timestamp</em></li>
</ul>
<pre class="block php"><code>// Escape a user id and name into the SQL statement and execute it
$result = $db-&gt;query('SELECT * FROM users WHERE age = %i AND last_name = %s', 18, &quot;O'Shea&quot;);</code></pre>

<p>
 The query methods by default do <em>not</em> use prepared statements, but instead create fully escaped SQL commands and execute them. For repeat queries or large string/binary values, 32k+ for Oracle/DB2, larger for other databases, a <a href="#fDatabase-docs-PreparedStatements">prepared fStatement object</a> should be passed in place of the SQL string.
</p>

<p>
When using the <code>escape()</code> method, two or more parameters are required. The first, <code>$sql_or_type</code>, allows passing the data type to be escaped, or an SQL statement with data type placeholders. The second (and subsequent) parameter, <code>$value</code> is the PHP value to escape.
</p>

<p>
The permissible data types to pass into <code>$sql_or_type</code> include:
</p>

<ul>
<li><code>'blob'</code></li>
<li><code>'boolean'</code></li>
<li><code>'date'</code></li>
<li><code>'float'</code></li>
<li><code>'integer'</code></li>
<li><code>'string'</code></li>
<li><code>'time'</code></li>
<li><code>'timestamp'</code></li>
</ul>

<p>
Escaping not only protects against SQL injection attacks, but also ensures that you are comparing proper data types in your SQL since all values are validated before being escaped. Below are some examples using <code>escape()</code> in various ways:
</p>
<pre class="block php"><code>// Escape a string
$sql_string = $db-&gt;escape('string', &quot;This ain't gonna break your SQL&quot;);

// Escape a boolean
$sql_boolean = $db-&gt;escape('boolean', TRUE);

// Escape a float
$sql_float   = $db-&gt;escape('%f', '12.39');</code></pre>

<p>
 The above statements would produce the following SQL (in a SQLite database):
</p>
<pre class="block sql"><code>'This ain''t gonna break your SQL'

'1'

12.39</code></pre>

<p>
 In addition to escaping single values for SQL, it is also possible to escape an array of values. When passing a data type or placeholder as the first parameter and the array of values as the second, an array of escaped values will be returned.
</p>
<pre class="block php"><code>$escaped_integers = $db-&gt;escape('integer', array(1, 5, 'not an int'));</code></pre>

<p>
 If the first parameter is a SQL string, the array of values will be inserted into the SQL, separated by commas.
</p>
<pre class="block php"><code>// This will return &quot;SELECT * FROM users WHERE user_id IN (1, 3, 7, 10)&quot;
$sql = $db-&gt;escape(
    &quot;SELECT * FROM users WHERE user_id IN (%i)&quot;,
    array(1, 3, 7, 10)
);</code></pre>

<h3 id="fDatabase-docs-EscapingIdentifiers">Escaping Identifiers</h3>

<p>
All databases support quoting table and columns to allow SQL reserved words to be used as identifiers. The SQL standard is to use double quotes. Just like data-type placeholders, there is an identifier placeholder, <code>%r</code>, that can be used with <a href="#fDatabase-api-escape"><code>escape()</code></a> and the various <a href="#fDatabase-api-query"><code>query()</code></a> methods.
</p>
<pre class="block php"><code>$result = $db-&gt;query(&quot;SELECT * FROM %r WHERE %r = %i&quot;, 'users', 'user_id', 1);</code></pre>

<p>
 This functionality will only be useful when dynamically creating SQL commands. With static SQL, developers can simply wrap identifiers in double quotes themselves.
</p>
<pre class="block php"><code>$result = $db-&gt;query('SELECT * FROM &quot;users&quot; WHERE &quot;user_id&quot; = %i', 1);</code></pre>

<h3 id="fDatabase-docs-UnescapingData">Unescaping Data</h3>

<p>
In addition to databases requiring that data going in be formatted a certain way, many database/driver combinations in PHP dont deliver values back in the appropriate PHP data type. The <a href="#fDatabase-api-unescape"><code>unescape()</code></a> method provides a consistent way to ensure that all data coming out of the database is stored correctly in PHP.
</p>

<p>
The first parameter, <code>$data_type</code>, should be one of the string data type names or a data type placeholder as convered with the <code>escape()</code> method. The second parameter, <code>$value</code>, is the value being returned from the database.
</p>

<p>
Here are some examples of using the <code>unescape()</code> method:
</p>
<pre class="block php"><code>
$is_authorized = $db-&gt;unescape('boolean', $row['is_authorized']);

$date_created  = $db-&gt;unescape('%d', $row['date_created']);</code></pre>

<p>
 <em>Please note that if you are using the <a href="#ObjectRelationalMapping-docs">ORM</a> in Flourish, unescaping will be done automatically.</em>
</p>

<h3 id="fDatabase-docs-PreparedStatements">Prepared Statements</h3>

<p>
Prepared statements can improve performance when working with a query that will be executed multiple times with different sets of data. The <a href="#fDatabase-api-prepare"><code>prepare()</code></a> and  <a href="#fDatabase-api-translatedPrepare"><code>translatedPrepare()</code></a> methods accept a single parameter, <code>$sql</code>, which should contain the SQL statement to prepare. They both return an <a href="#fStatement">fStatement</a> object which can in turn be passed to <a href="#fDatabase-api-execute"><code>execute()</code></a>, <a href="#fDatabase-api-query"><code>query()</code></a> or <a href="#fDatabase-api-unbufferedQuery"><code>unbufferedQuery()</code></a> in place of a SQL string.
</p>
<pre class="block php"><code>$statement = $db-&gt;prepare(&quot;INSERT INTO users (first_name, last_name) VALUES (%s, %s)&quot;);

$db-&gt;query($statement, 'Will', 'Bond');
$db-&gt;query($statement, 'John', 'Smith');</code></pre>

<p>
 Just like with <a href="#fDatabase-api-query"><code>query()</code></a> and <a href="#fDatabase-api-translatedQuery"><code>translatedQuery()</code></a>, the values for the placeholders are passed as parameters after the <a href="#fStatement">fStatement</a> object.
</p>

<h4 id="fDatabase-docs-Performance">Performance</h4>

<p>
Computation is saved since the placeholders are parsed only when the statement is created, instead of upon every execution. If <a href="#fDatabase-api-translatedPrepare"><code>translatedPrepare()</code></a> is called, the SQL translation is also performed only once.
</p>

<p>
In addition to Flourish level optimizations, many databases and PHP database extensions support prepared statements and may improve performance by caching query plans. For the databases/extensions that don't support prepared statements, a prepared statement will be executed behind the scenes using the normal <a href="#fDatabase-api-query"><code>query()</code></a> method.
</p>

<p>
<em>Please note, due to the way that fDatabase is written, prepared statements are <strong>not necessary</strong> to prevent SQL injection attacks.</em>
</p>

<h4 id="fDatabase-docs-Limitations">Limitations</h4>

<p>
The one limitation of using prepared statements instead of a normal query is that multiple values can not be passed for a placeholder. For those situations, <a href="#fDatabase-api-execute"><code>execute()</code></a>, <a href="#fDatabase-api-query"><code>query()</code></a> or <a href="#fDatabase-api-translatedQuery"><code>translatedQuery()</code></a> should be used instead.
</p>
<pre class="block php"><code>// This will NOT work
$statement = $db-&gt;prepare(&quot;SELECT * FROM users WHERE user_id IN (%i)&quot;);
$res       = $db-&gt;query($statement, array(1, 2, 3));
foreach (res as $row) {
    // 
}</code></pre>

<h3 id="fDatabase-docs-Debugging">Debugging</h3>

<p>
There is some useful debugging functionality built into the class that can help when diagnosing SQL issues. If <a href="#fDatabase-api-enableDebugging"><code>enableDebugging()</code></a> or <a href="#fCore-api-enableDebugging">fCore::enableDebugging()</a> (for global debugging) is called with <code>TRUE</code>, the fDatabase class will display each SQL statement and how long it took to perform. In addition, when the class is destructed, a total SQL execution time will be output.
</p>
<pre class="block php"><code>// Enable SQL statement printing
$db-&gt;enableDebugging(TRUE);</code></pre>

<h3 id="fDatabase-docs-Caching">Caching</h3>

<p>
Both PostgreSQL and Oracle databases require some schema information about the database to properly fetch the last generated auto-incrementing primary key that is generated from an <code>INSERT</code> SQL statement. The fDatabase class will automatically retrieve that schema information, however in the interest of performance, you may wish to cache the results.
</p>

<p>
Along a similar vein, MSSQL databases don't support UTF-8 as the character set for non-national data types, so the fDatabase class will determine the databases character set to ensure proper transcoding to UTF-8 is performed.
</p>

<p>
The <a href="#fDatabase-api-enableCaching"><code>enableCaching()</code></a> method accepts an instance of the <a href="#fCache">fCache</a> class, and will save this schema information so it does not need to be fetched on each page load.
</p>
<pre class="block php"><code>$db-&gt;enableCaching(new fCache('file', '/path/to/db.cache'));</code></pre>

<p>
 The method <a href="#fDatabase-api-clearCache"><code>clearCache()</code></a> will clear out the cached information, which would be useful when the database schema changes.
</p>

<p>
When using the <a href="#ObjectRelationalMapping-docs">Flourish ORM</a>, the <a href="#fORM">fORM</a> class provides some <a href="#fORM-docs-SchemaCaching">useful caching functionality</a> that will automatically clear the cache when database errors occur.
</p>

<h3 id="fDatabase-docs-Hooks">Hooks</h3>

<p>
One of the most advanced features of fDatabase is the ability to be able to pass all SQL to a callback at various points in execution to allow for modification or logging. The method <a href="#fDatabase-api-registerHookCallback"><code>registerHookCallback()</code></a> accepts two parameters, the <code>$hook</code> to register for and the <code>$callback</code> to register.
</p>

<p>
There are three different hooks avaliable, <code>'unmodified'</code>, <code>'extracted'</code> and <code>'run'</code>. The <code>'unmodified'</code> hook is called with the raw SQL passed to fDatabase, the <code>'extracted'</code> hooks provides the SQL with all string literals extracted, and the <code>'run'</code> hook provides the SQL after it has been executed.
</p>

<p>
The <a href="#fDatabase-api-registerHookCallback">API documentation</a> has details about the required method signatures for each callback. Below are some examples of usage:
</p>
<pre class="block php"><code>// Using the 'extracted' hook to collapsing excess whitespace for easier to read logs
function trim_sql($db, &amp;$sql, &amp;$values) {
    $sql = preg_replace('#\s+#', ' ', $sql);
}
$db-&gt;registerHookCallback('extracted', 'trim_sql');


// Using the 'run' hook for logging of slow queries
function log_sql($db, $statement, $query_time, $result) {
    // Don't log queries unless they take half a second or more
    if ($query_time &lt; 0.5) { return; }
    
    // This handles prepared statements since the statement and values are separate
    if (is_array($statement)) {
        $sql = '&quot;' . $statement[0]-&gt;getSQL() . '&quot; with the values: ' . join(&quot;, &quot;, array_map('fCore::dump', $values));
    } else {
        $sql = '&quot;' . $statement . '&quot;';
    }
    echo 'The following query took ' . $query_time . &quot; seconds: \n&quot; . $sql;
}
$db-&gt;registerHookCallback('run', 'log_sql');</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fDatabase-api">fDatabase API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fDatabase">Class Documentation</a></li>
		<li><strong><a href="#fDatabase-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="protected variables">
<h4><a href="#fDatabase-api-class_vars">Variables</a></h4>
<ul>
  	 		<li class="protected"><a href="#fDatabase-api-extension">$extension</a></li>
	   	 		<li class="protected"><a href="#fDatabase-api-schema_info">$schema_info</a></li>
	   </ul>
</div>
<div class="protected methods static">
<h4><a href="#fDatabase-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  	  	  	  			<li class="protected"><a href="#fDatabase-api-compose">compose()</a></li>
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  </ul>
</div>
<div class="methods">
<h4><a href="#fDatabase-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fDatabase-api-__construct">__construct()</a></li>
	  			<li class="protected"><a href="#fDatabase-api-__destruct">__destruct()</a></li>
	  			<li class="protected"><a href="#fDatabase-api-__get">__get()</a></li>
	  			<li><a href="#fDatabase-api-clearCache">clearCache()</a></li>
	  			<li><a href="#fDatabase-api-close">close()</a></li>
	  	  			<li><a href="#fDatabase-api-connect">connect()</a></li>
	  			<li class="protected"><a href="#fDatabase-api-determineCharacterSet">determineCharacterSet()</a></li>
	  			<li class="protected"><a href="#fDatabase-api-determineExtension">determineExtension()</a></li>
	  			<li><a href="#fDatabase-api-enableCaching">enableCaching()</a></li>
	  			<li><a href="#fDatabase-api-enableDebugging">enableDebugging()</a></li>
	  			<li><a href="#fDatabase-api-escape">escape()</a></li>
	  			<li><a href="#fDatabase-api-execute">execute()</a></li>
	  			<li><a href="#fDatabase-api-getConnection">getConnection()</a></li>
	  			<li><a href="#fDatabase-api-getDatabase">getDatabase()</a></li>
	  			<li class="protected"><a href="#fDatabase-api-getExtension">getExtension()</a></li>
	  			<li><a href="#fDatabase-api-getHost">getHost()</a></li>
	  			<li><a href="#fDatabase-api-getPort">getPort()</a></li>
	  			<li><a href="#fDatabase-api-getSQLTranslation">getSQLTranslation()</a></li>
	  			<li><a href="#fDatabase-api-getType">getType()</a></li>
	  			<li><a href="#fDatabase-api-getUsername">getUsername()</a></li>
	  			<li><a href="#fDatabase-api-getVersion">getVersion()</a></li>
	  			<li class="protected"><a href="#fDatabase-api-inject">inject()</a></li>
	  			<li><a href="#fDatabase-api-isInsideTransaction">isInsideTransaction()</a></li>
	  			<li><a href="#fDatabase-api-prepare">prepare()</a></li>
	  			<li class="protected"><a href="#fDatabase-api-preprocess">preprocess()</a></li>
	  			<li><a href="#fDatabase-api-query">query()</a></li>
	  			<li><a href="#fDatabase-api-registerHookCallback">registerHookCallback()</a></li>
	  			<li><a href="#fDatabase-api-translatedExecute">translatedExecute()</a></li>
	  			<li><a href="#fDatabase-api-translatedPrepare">translatedPrepare()</a></li>
	  			<li><a href="#fDatabase-api-translatedQuery">translatedQuery()</a></li>
	  			<li><a href="#fDatabase-api-unbufferedQuery">unbufferedQuery()</a></li>
	  			<li><a href="#fDatabase-api-unbufferedTranslatedQuery">unbufferedTranslatedQuery()</a></li>
	  			<li><a href="#fDatabase-api-unescape">unescape()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fAuthorizationException">fAuthorizationException</a></li>
		<li><a href="#fConnectivityException">fConnectivityException</a></li>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fDate">fDate</a></li>
		<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
		<li><a href="#fNotFoundException">fNotFoundException</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fSQLException">fSQLException</a></li>
		<li><a href="#fSQLTranslation">fSQLTranslation</a></li>
		<li><a href="#fStatement">fStatement</a></li>
		<li><a href="#fTime">fTime</a></li>
		<li><a href="#fTimestamp">fTimestamp</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b41</span></div>
<p class="short_description">Provides a common API for different databases - will automatically use any installed extension</p>
<div class="description"><p>This class is implemented to use the UTF-8 character encoding. Please see  <a href="#UTF-8-docs">UTF-8</a> for more information.</p><p>The following databases are supported:  </p><ul><li><a class="ext-link" href="http://ibm.com/db2"><span class="icon">DB2</span></a></li><li><a class="ext-link" href="http://microsoft.com/sql/"><span class="icon">MSSQL</span></a></li><li><a class="ext-link" href="http://mysql.com"><span class="icon">MySQL</span></a></li><li><a class="ext-link" href="http://oracle.com"><span class="icon">Oracle</span></a></li><li><a class="ext-link" href="http://postgresql.org"><span class="icon">PostgreSQL</span></a></li><li><a class="ext-link" href="http://sqlite.org"><span class="icon">SQLite</span></a></li></ul><p>The class will automatically use the first of the following extensions it finds:  </p><ul><li>DB2
   <ul><li><a class="ext-link" href="http://php.net/ibm_db2"><span class="icon">ibm_db2</span></a></li><li><a class="ext-link" href="http://php.net/pdo_ibm"><span class="icon">pdo_ibm</span></a></li></ul></li><li>MSSQL
   <ul><li><a class="ext-link" href="http://msdn.microsoft.com/en-us/library/cc296221.aspx"><span class="icon">sqlsrv</span></a></li><li><a class="ext-link" href="http://php.net/pdo_dblib"><span class="icon">pdo_dblib</span></a></li><li><a class="ext-link" href="http://php.net/mssql"><span class="icon">mssql</span></a> (or <a class="ext-link" href="http://php.net/sybase"><span class="icon">sybase</span></a>)</li></ul></li><li>MySQL
   <ul><li><a class="ext-link" href="http://php.net/mysql"><span class="icon">mysql</span></a></li><li><a class="ext-link" href="http://php.net/mysqli"><span class="icon">mysqli</span></a></li><li><a class="ext-link" href="http://php.net/pdo_mysql"><span class="icon">pdo_mysql</span></a></li></ul></li><li>Oracle
   <ul><li><a class="ext-link" href="http://php.net/oci8"><span class="icon">oci8</span></a></li><li><a class="ext-link" href="http://php.net/pdo_oci"><span class="icon">pdo_oci</span></a></li></ul></li><li>PostgreSQL
   <ul><li><a class="ext-link" href="http://php.net/pgsql"><span class="icon">pgsql</span></a></li><li><a class="ext-link" href="http://php.net/pdo_pgsql"><span class="icon">pdo_pgsql</span></a></li></ul></li><li>SQLite
   <ul><li><a class="ext-link" href="http://php.net/pdo_sqlite"><span class="icon">pdo_sqlite</span></a> (for v3.x)</li><li><a class="ext-link" href="http://php.net/sqlite"><span class="icon">sqlite</span></a> (for v2.x)</li></ul></li></ul><p>The <tt>odbc</tt> and <tt>pdo_odbc</tt> extensions are not supported due to character  encoding and stability issues on Windows, and functionality on non-Windows  operating systems.</p></div>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b41</th><td>Fixed an array to string conversion notice <span class="date">9/21/12</span></td></tr><tr><th>1.0.0b40</th><td>Fixed a bug with notices being triggered when failing to connect to a SQLite database <span class="date">6/20/11</span></td></tr><tr><th>1.0.0b39</th><td>Fixed a bug with detecting some MySQL database version numbers <span class="date">5/24/11</span></td></tr><tr><th>1.0.0b38</th><td>Backwards Compatibility Break - callbacks registered to the <tt>extracted</tt> hook via <a href="#fDatabase-api-registerHookCallback"><tt>registerHookCallback()</tt></a> no longer receive the <tt>$strings</tt> parameter, instead all strings are added into the <tt>$values</tt> parameter - added <a href="#fDatabase-api-getVersion"><tt>getVersion()</tt></a>, fixed a bug with SQLite messaging, fixed a bug with <a href="#fDatabase-api-__destruct"><tt>__destruct()</tt></a>, improved handling of transactional queries, added <a href="#fDatabase-api-close"><tt>close()</tt></a>, enhanced class to throw four different exceptions for different connection errors, silenced PHP warnings upon connection error <span class="date">5/9/11</span></td></tr><tr><th>1.0.0b37</th><td>Fixed usage of the mysqli extension to only call mysqli_set_charset() if it exists <span class="date">3/4/11</span></td></tr><tr><th>1.0.0b36</th><td>Updated <a href="#fDatabase-api-escape"><tt>escape()</tt></a> and methods that use <a href="#fDatabase-api-escape"><tt>escape()</tt></a> to handle float values that don't contain a digit before or after the . <span class="date">2/1/11</span></td></tr><tr><th>1.0.0b35</th><td>Updated the class to replace <tt>LIMIT</tt> and <tt>OFFSET</tt> value placeholders in the SQL with their values before translating since most databases that translate <tt>LIMIT</tt> statements need to move or add values together <span class="date">1/11/11</span></td></tr><tr><th>1.0.0b34</th><td>Fixed a bug with creating translated prepared statements <span class="date">1/9/11</span></td></tr><tr><th>1.0.0b33</th><td>Added code to explicitly set the connection encoding for the mysql and mysqli extensions since some PHP installs don't see to fully respect <tt>SET NAMES</tt> <span class="date">12/6/10</span></td></tr><tr><th>1.0.0b32</th><td>Fixed handling auto-incrementing values for Oracle when the trigger was on <tt>INSERT OR UPDATE</tt> instead of just <tt>INSERT</tt> <span class="date">12/4/10</span></td></tr><tr><th>1.0.0b31</th><td>Fixed handling auto-incrementing values for MySQL when the <tt>INTO</tt> keyword is left out of an <tt>INSERT</tt> statement <span class="date">11/4/10</span></td></tr><tr><th>1.0.0b30</th><td>Fixed the pgsql, mssql and mysql extensions to force a new connection instead of reusing an existing one <span class="date">8/17/10</span></td></tr><tr><th>1.0.0b29</th><td>Backwards Compatibility Break - removed enableSlowQueryWarnings(), added ability to replicate via <a href="#fDatabase-api-registerHookCallback"><tt>registerHookCallback()</tt></a> <span class="date">8/10/10</span></td></tr><tr><th>1.0.0b28</th><td>Backwards Compatibility Break - removed ODBC support. Added support for the <tt>pdo_ibm</tt> extension. <span class="date">7/31/10</span></td></tr><tr><th>1.0.0b27</th><td>Fixed a bug with running multiple copies of a SQL statement with string values through a single <a href="#fDatabase-api-translatedQuery"><tt>translatedQuery()</tt></a> call <span class="date">7/14/10</span></td></tr><tr><th>1.0.0b26</th><td>Updated the class to use new <a href="#fCore">fCore</a> functionality <span class="date">7/5/10</span></td></tr><tr><th>1.0.0b25</th><td>Added IBM DB2 support <span class="date">4/13/10</span></td></tr><tr><th>1.0.0b24</th><td>Fixed an auto-incrementing transaction bug with Oracle and debugging issues with all databases <span class="date">3/17/10</span></td></tr><tr><th>1.0.0b23</th><td>Resolved another bug with capturing auto-incrementing values for PostgreSQL and Oracle <span class="date">3/15/10</span></td></tr><tr><th>1.0.0b22</th><td>Changed <a href="#fDatabase-api-clearCache"><tt>clearCache()</tt></a> to also clear the cache on the <a href="#fSQLTranslation">fSQLTranslation</a> <span class="date">3/9/10</span></td></tr><tr><th>1.0.0b21</th><td>Added <a href="#fDatabase-api-execute"><tt>execute()</tt></a> for result-less SQL queries, <a href="#fDatabase-api-prepare"><tt>prepare()</tt></a> and <a href="#fDatabase-api-translatedPrepare"><tt>translatedPrepare()</tt></a> to create <a href="#fStatement">fStatement</a> objects for prepared statements, support for prepared statements in <a href="#fDatabase-api-query"><tt>query()</tt></a> and <a href="#fDatabase-api-unbufferedQuery"><tt>unbufferedQuery()</tt></a>, fixed default caching key for <a href="#fDatabase-api-enableCaching"><tt>enableCaching()</tt></a> <span class="date">3/2/10</span></td></tr><tr><th>1.0.0b20</th><td>Added a parameter to <a href="#fDatabase-api-enableCaching"><tt>enableCaching()</tt></a> to provide a key token that will allow cached values to be shared between multiple databases with the same schema <span class="date">10/28/09</span></td></tr><tr><th>1.0.0b19</th><td>Added support for escaping identifiers (column and table names) to <a href="#fDatabase-api-escape"><tt>escape()</tt></a>, added support for database schemas, rewrote internal SQL string spliting <span class="date">10/22/09</span></td></tr><tr><th>1.0.0b18</th><td>Updated the class for the new <a href="#fResult">fResult</a> and <a href="#fUnbufferedResult">fUnbufferedResult</a> APIs, fixed <a href="#fDatabase-api-unescape"><tt>unescape()</tt></a> to not touch NULLs <span class="date">8/12/09</span></td></tr><tr><th>1.0.0b17</th><td>Added the ability to pass an array of all values as a single parameter to <a href="#fDatabase-api-escape"><tt>escape()</tt></a> instead of one value per parameter <span class="date">8/11/09</span></td></tr><tr><th>1.0.0b16</th><td>Fixed PostgreSQL and Oracle from trying to get auto-incrementing values on inserts when explicit values were given <span class="date">8/6/09</span></td></tr><tr><th>1.0.0b15</th><td>Fixed a bug where auto-incremented values would not be detected when table names were quoted <span class="date">7/15/09</span></td></tr><tr><th>1.0.0b14</th><td>Changed <a href="#fDatabase-api-determineExtension"><tt>determineExtension()</tt></a> and <a href="#fDatabase-api-determineCharacterSet"><tt>determineCharacterSet()</tt></a> to be protected instead of private <span class="date">7/8/09</span></td></tr><tr><th>1.0.0b13</th><td>Updated <a href="#fDatabase-api-escape"><tt>escape()</tt></a> to accept arrays of values for insertion into full SQL strings <span class="date">7/6/09</span></td></tr><tr><th>1.0.0b12</th><td>Updates to <a href="#fDatabase-api-unescape"><tt>unescape()</tt></a> to improve performance <span class="date">6/15/09</span></td></tr><tr><th>1.0.0b11</th><td>Changed replacement values in preg_replace() calls to be properly escaped <span class="date">6/11/09</span></td></tr><tr><th>1.0.0b10</th><td>Changed date/time/timestamp escaping from <tt>strtotime()</tt> to <a href="#fDate">fDate</a>/<a href="#fTime">fTime</a>/<a href="#fTimestamp">fTimestamp</a> for better localization support <span class="date">6/1/09</span></td></tr><tr><th>1.0.0b9</th><td>Fixed a bug with <a href="#fDatabase-api-escape"><tt>escape()</tt></a> where floats that start with a . were encoded as <tt>NULL</tt> <span class="date">5/9/09</span></td></tr><tr><th>1.0.0b8</th><td>Added Oracle support, change PostgreSQL code to no longer cause lastval() warnings, added support for arrays of values to <a href="#fDatabase-api-escape"><tt>escape()</tt></a> <span class="date">5/3/09</span></td></tr><tr><th>1.0.0b7</th><td>Updated for new <a href="#fCore">fCore</a> API <span class="date">2/16/09</span></td></tr><tr><th>1.0.0b6</th><td>Fixed a bug with executing transaction queries when using the mysqli extension <span class="date">2/12/09</span></td></tr><tr><th>1.0.0b5</th><td>Changed @ error suppression operator to <tt>error_reporting()</tt> calls <span class="date">1/26/09</span></td></tr><tr><th>1.0.0b4</th><td>Added a few error suppression operators back in so that developers don't get errors and exceptions <span class="date">1/14/09</span></td></tr><tr><th>1.0.0b3</th><td>Removed some unnecessary error suppresion operators <span class="date">12/11/08</span></td></tr><tr><th>1.0.0b2</th><td>Fixed a bug with PostgreSQL when using the PDO extension and executing an INSERT statement <span class="date">12/11/08</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">9/25/07</span></td></tr></table></div>
<div class="class_variables" id="fDatabase-api-class_vars">
<h4>Variables</h4>
	<!-- start protected variable -->
	<h5 id="fDatabase-api-extension" class="protected variable"><span class="resolution">-></span><span class="name">extension</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>The extension to use for the database specified</p>
						<p>Options include:  </p><ul><li><tt>'ibm_db2'</tt></li><li><tt>'mssql'</tt></li><li><tt>'mysql'</tt></li><li><tt>'mysqli'</tt></li><li><tt>'oci8'</tt></li><li><tt>'pgsql'</tt></li><li><tt>'sqlite'</tt></li><li><tt>'sqlsrv'</tt></li><li><tt>'pdo'</tt></li></ul>
			</div>
		<h6>Type</h6>
		<p class="type">string</p>
	</div>
	<!-- end variable -->
	<!-- start protected variable -->
	<h5 id="fDatabase-api-schema_info" class="protected variable"><span class="resolution">-></span><span class="name">schema_info</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>A cache of database-specific code</p>
			</div>
		<h6>Type</h6>
		<p class="type">array</p>
	</div>
	<!-- end variable -->
</div>
<div class="class_methods static" id="fDatabase-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start protected method static -->
			<h5 id="fDatabase-api-compose" class="protected method static"><span class="resolution">::</span><span class="name">compose()</span> <span class="visibility">protected</span></h5>
			<div class="protected method static">
							<div class="method_description">
									<p>Composes text using <a href="#fText">fText</a> if loaded</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">compose</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$component</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message to compose</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$component <em>[, ... ]</em></td>
				<td class="param_description">A string or number to insert into the message</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The composed and possible translated message
				</p>
			</div>
			<!-- end method static -->
																													</div>
<div class="class_methods" id="fDatabase-api-class_methods">
<h4>Methods</h4>
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-__construct" class="method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Configures the connection to a database - connection is not made until the first query is executed</p>
								<p>Passing <tt>NULL</tt> to any parameter other than <tt>$type</tt> and <tt>$database</tt> will  cause the default value to be used.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fDatabase">fDatabase</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$type</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$database</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$username</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$password</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$host</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$port</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$timeout</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$type</td>
				<td class="param_description">The type of the database: <tt>'db2'</tt>, <tt>'mssql'</tt>, <tt>'mysql'</tt>, <tt>'oracle'</tt>, <tt>'postgresql'</tt>, <tt>'sqlite'</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$database</td>
				<td class="param_description">Name of the database. If SQLite the path to the database file.</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$username</td>
				<td class="param_description">Database username - not used for SQLite</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$password</td>
				<td class="param_description">The password for the username specified - not used for SQLite</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$host</td>
				<td class="param_description">Database server host or IP, defaults to localhost - not used for SQLite. MySQL socket connection can be made by entering <tt>'sock:'</tt> followed by the socket path. PostgreSQL socket connection can be made by passing just <tt>'sock:'</tt>.</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$port</td>
				<td class="param_description">The port to connect to, defaults to the standard port for the database type specified - not used for SQLite</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$timeout</td>
				<td class="param_description">The number of seconds to timeout after if a connection can not be made - not used for SQLite</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fDatabase-api-__destruct" class="protected method"><span class="resolution">-></span><span class="name">__destruct()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Closes the open database connection</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">__destruct</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fDatabase-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-clearCache" class="method"><span class="resolution">-></span><span class="name">clearCache()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Clears all of the schema info out of the object and, if set, the <a href="#fCache">fCache</a> object</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">clearCache</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-close" class="method"><span class="resolution">-></span><span class="name">close()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Closes the database connection</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">close</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fDatabase-api-connect" class="method"><span class="resolution">-></span><span class="name">connect()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Connects to the database specified, if no connection exists</p>
								<p>This method is only intended to force a connection, all operations that  require a database connection will automatically call this method.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">connect</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fAuthorizationException">fAuthorizationException</a></dt><dd>When the username and password are not accepted</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fDatabase-api-determineCharacterSet" class="protected method"><span class="resolution">-></span><span class="name">determineCharacterSet()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Determines the character set of a SQL Server database</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">determineCharacterSet</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fDatabase-api-determineExtension" class="protected method"><span class="resolution">-></span><span class="name">determineExtension()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Figures out which extension to use for the database type selected</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">determineExtension</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-enableCaching" class="method"><span class="resolution">-></span><span class="name">enableCaching()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the schema info to be cached to the <a href="#fCache">fCache</a> object specified</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">enableCaching</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fCache">fCache</a></span> <span class="php-var">$cache</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$key_token</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fCache">fCache</a></td>
				<td class="param_name">$cache</td>
				<td class="param_description">The cache to cache to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key_token</td>
				<td class="param_description">Internal use only! (this will be used in the cache key to uniquely identify the cache for this <a href="#fDatabase">fDatabase</a> object)</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-enableDebugging" class="method"><span class="resolution">-></span><span class="name">enableDebugging()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets if debug messages should be shown</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">enableDebugging</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$flag</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$flag</td>
				<td class="param_description">If debugging messages should be shown</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-escape" class="method"><span class="resolution">-></span><span class="name">escape()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Escapes a value for insertion into SQL</p>
								<p>The valid data types are:  </p><ul><li><tt>'blob'</tt></li><li><tt>'boolean'</tt></li><li><tt>'date'</tt></li><li><tt>'float'</tt></li><li><tt>'identifier'</tt></li><li><tt>'integer'</tt></li><li><tt>'string'</tt> (also varchar, char or text)</li><li><tt>'varchar'</tt></li><li><tt>'char'</tt></li><li><tt>'text'</tt></li><li><tt>'time'</tt></li><li><tt>'timestamp'</tt></li></ul><p>In addition to being able to specify the data type, you can also pass  in an SQL statement with data type placeholders in the following form:    </p><ul><li><tt>%l</tt> for a blob</li><li><tt>%b</tt> for a boolean</li><li><tt>%d</tt> for a date</li><li><tt>%f</tt> for a float</li><li><tt>%r</tt> for an indentifier (table or column name)</li><li><tt>%i</tt> for an integer</li><li><tt>%s</tt> for a string</li><li><tt>%t</tt> for a time</li><li><tt>%p</tt> for a timestamp</li></ul><p>Depending on what <tt>$sql_or_type</tt> and <tt>$value</tt> are, the output will be  slightly different. If <tt>$sql_or_type</tt> is a data type or a single  placeholder and <tt>$value</tt> is:  </p><ul><li>a scalar value - an escaped SQL string is returned</li><li>an array - an array of escaped SQL strings is returned</li></ul><p>If <tt>$sql_or_type</tt> is a SQL string and <tt>$value</tt> is:  </p><ul><li>a scalar value - the escaped value is inserted into the SQL string</li><li>an array - the escaped values are inserted into the SQL string separated by commas</li></ul><p>If <tt>$sql_or_type</tt> is a SQL string, it is also possible to pass an array  of all values as a single parameter instead of one value per parameter.  An example would look like the following:</p><pre class="block php"><code>$db->escape(
    "SELECT * FROM users WHERE status = %s AND authorization_level = %s",
    array('Active', 'Admin')
);</code></pre>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">escape</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$sql_or_type</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$sql_or_type</td>
				<td class="param_description">This can either be the data type to escape or an SQL string with a data type placeholder - see method description</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value <em>[, ... ]</em></td>
				<td class="param_description">The value to escape - both single values and arrays of values are supported, see method description for details</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The escaped value/SQL or an array of the escaped values
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-execute" class="method"><span class="resolution">-></span><span class="name">execute()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Executes one or more SQL queries without returning any results</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">execute</span><span class="php-brackets">(</span> <span class="php-vartype">string|<a href="#fStatement">fStatement</a></span> <span class="php-var">$statement</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string|<a href="#fStatement">fStatement</a></td>
				<td class="param_name">$statement</td>
				<td class="param_description">One or more SQL statements in a string or an <a href="#fStatement">fStatement</a> prepared statement</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value <em>[, ... ]</em></td>
				<td class="param_description">The optional value(s) to place into any placeholders in the SQL - see <a href="#fDatabase-api-escape"><tt>escape()</tt></a> for details</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-getConnection" class="method"><span class="resolution">-></span><span class="name">getConnection()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the database connection resource or object</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">getConnection</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The database connection
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-getDatabase" class="method"><span class="resolution">-></span><span class="name">getDatabase()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the name of the database currently connected to</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getDatabase</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The name of the database currently connected to
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fDatabase-api-getExtension" class="protected method"><span class="resolution">-></span><span class="name">getExtension()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Gets the php extension being used</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getExtension</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The php extension used for database interaction
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-getHost" class="method"><span class="resolution">-></span><span class="name">getHost()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the host for this database</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getHost</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The host
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-getPort" class="method"><span class="resolution">-></span><span class="name">getPort()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the port for this database</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getPort</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The port
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-getSQLTranslation" class="method"><span class="resolution">-></span><span class="name">getSQLTranslation()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the <a href="#fSQLTranslation">fSQLTranslation</a> object used for translated queries</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fSQLTranslation">fSQLTranslation</a></span> <span class="php-identifier">getSQLTranslation</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The SQL translation object
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-getType" class="method"><span class="resolution">-></span><span class="name">getType()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the database type</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getType</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The database type: <tt>'mssql'</tt>, <tt>'mysql'</tt>, <tt>'postgresql'</tt> or <tt>'sqlite'</tt>
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-getUsername" class="method"><span class="resolution">-></span><span class="name">getUsername()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the username for this database</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getUsername</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The username
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-getVersion" class="method"><span class="resolution">-></span><span class="name">getVersion()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the version of the database system</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getVersion</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The database system version
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fDatabase-api-inject" class="protected method"><span class="resolution">-></span><span class="name">inject()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Injects an <a href="#fSQLTranslation">fSQLTranslation</a> object to handle translation</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">inject</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fSQLTranslation">fSQLTranslation</a></span> <span class="php-var">$sql_translation</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fSQLTranslation">fSQLTranslation</a></td>
				<td class="param_name">$sql_translation</td>
				<td class="param_description">The SQL translation object</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-isInsideTransaction" class="method"><span class="resolution">-></span><span class="name">isInsideTransaction()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Will indicate if a transaction is currently in progress</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">isInsideTransaction</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 If a transaction has been started and not yet rolled back or committed
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-prepare" class="method"><span class="resolution">-></span><span class="name">prepare()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Prepares a single <a href="#fStatement">fStatement</a> object to execute prepared statements</p>
								<p>Identifier placeholders (%r) are not supported with prepared statements.  In addition, multiple values can not be escaped by a placeholder - only  a single value can be provided.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fStatement">fStatement</a></span> <span class="php-identifier">prepare</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$sql</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$sql</td>
				<td class="param_description">The SQL to prepare</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 A prepared statement object that can be passed to <a href="#fDatabase-api-query"><tt>query()</tt></a>, <a href="#fDatabase-api-unbufferedQuery"><tt>unbufferedQuery()</tt></a> or <a href="#fDatabase-api-execute"><tt>execute()</tt></a>
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fDatabase-api-preprocess" class="protected method"><span class="resolution">-></span><span class="name">preprocess()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Preprocesses SQL by escaping values, spliting queries, cleaning escaped semicolons, fixing backslashed single quotes and translating</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">preprocess</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$sql</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$values</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$translate</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$rollback_queries</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$sql</td>
				<td class="param_description">The SQL to process</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$values</td>
				<td class="param_description">Literal values to escape into the SQL</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$translate</td>
				<td class="param_description">If the SQL should be translated</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$rollback_queries</td>
				<td class="param_description">MySQL doesn't allow transactions around <tt>ALTER TABLE</tt> statements, and some of those require multiple statements, so this is an array of &quot;undo&quot; SQL statements</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The split out SQL queries, queries that have been translated will have a string key of a number, <tt>:</tt> and the original SQL, non-translated SQL will have a numeric key
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-query" class="method"><span class="resolution">-></span><span class="name">query()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Executes one or more SQL queries and returns the result(s)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fResult">fResult</a>|array</span> <span class="php-identifier">query</span><span class="php-brackets">(</span> <span class="php-vartype">string|<a href="#fStatement">fStatement</a></span> <span class="php-var">$statement</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string|<a href="#fStatement">fStatement</a></td>
				<td class="param_name">$statement</td>
				<td class="param_description">One or more SQL statements in a string or a single <a href="#fStatement">fStatement</a> prepared statement</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value <em>[, ... ]</em></td>
				<td class="param_description">The optional value(s) to place into any placeholders in the SQL - see <a href="#fDatabase-api-escape"><tt>escape()</tt></a> for details</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The <a href="#fResult">fResult</a> object(s) for the query
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-registerHookCallback" class="method"><span class="resolution">-></span><span class="name">registerHookCallback()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Registers a callback for one of the various query hooks - multiple callbacks can be registered for each hook</p>
								<p>The following hooks are available:</p><ul><li><tt>'unmodified'</tt>: The original SQL passed to <a href="#fDatabase">fDatabase</a>, for prepared statements this is called just once before the <a href="#fStatement">fStatement</a> object is created</li><li><tt>'extracted'</tt>: The SQL after all non-empty strings have been extracted and replaced with ordered sprintf-style placeholders</li><li><tt>'run'</tt>: After the SQL has been run</li></ul><p>Methods for the <tt>'unmodified'</tt> hook should have the following signature:  </p><ul><li><strong><tt>$database</tt></strong>:  The <a href="#fDatabase">fDatabase</a> instance</li><li><strong><tt>&amp;$sql</tt></strong>:      The original, unedited SQL</li><li><strong><tt>&amp;$values</tt></strong>:   The values to be escaped into the placeholders in the SQL</li></ul><p>Methods for the <tt>'extracted'</tt> hook should have the following signature:  </p><ul><li><strong><tt>$database</tt></strong>:  The <a href="#fDatabase">fDatabase</a> instance</li><li><strong><tt>&amp;$sql</tt></strong>:      The SQL with all strings removed and replaced with <tt>%1$s</tt>-style placeholders</li><li><strong><tt>&amp;$values</tt></strong>:   The values to be escaped into the placeholders in the SQL</li></ul><p>The <tt>extracted</tt> hook is the best place to modify the SQL since there is  no risk of breaking string literals. Please note that there may be empty  strings (<tt>''</tt>) present in the SQL since some databases treat those as  <tt>NULL</tt>.</p><p>Methods for the <tt>'run'</tt> hook should have the following signature:  </p><ul><li><strong><tt>$database</tt></strong>:    The <a href="#fDatabase">fDatabase</a> instance</li><li><strong><tt>$query</tt></strong>:       The (string) SQL or <tt>array(0 =&gt; {<a href="#fStatement">fStatement</a> object}, 1 =&gt; {values array})</tt></li><li><strong><tt>$query_time</tt></strong>:  The (float) number of seconds the query took</li><li><strong><tt>$result</tt></strong>       The <a href="#fResult">fResult</a> or <a href="#fUnbufferedResult">fUnbufferedResult</a> object, or <tt>FALSE</tt> if no result</li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">registerHookCallback</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$hook</span><span class="php-code">,</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$hook</td>
				<td class="param_description">The hook to register for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback to register - see the method description for details about the method signature</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-translatedExecute" class="method"><span class="resolution">-></span><span class="name">translatedExecute()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Translates one or more SQL statements using <a href="#fSQLTranslation">fSQLTranslation</a> and executes them without returning any results</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">translatedExecute</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$sql</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$sql</td>
				<td class="param_description">One or more SQL statements</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value <em>[, ... ]</em></td>
				<td class="param_description">The optional value(s) to place into any placeholders in the SQL - see <a href="#fDatabase-api-escape"><tt>escape()</tt></a> for details</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-translatedPrepare" class="method"><span class="resolution">-></span><span class="name">translatedPrepare()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Translates a SQL statement and creates an <a href="#fStatement">fStatement</a> object from it</p>
								<p>Identifier placeholders (%r) are not supported with prepared statements.  In addition, multiple values can not be escaped by a placeholder - only  a single value can be provided.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fStatement">fStatement</a></span> <span class="php-identifier">translatedPrepare</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$sql</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$sql</td>
				<td class="param_description">The SQL to prepare</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 A prepared statement object that can be passed to <a href="#fDatabase-api-query"><tt>query()</tt></a>, <a href="#fDatabase-api-unbufferedQuery"><tt>unbufferedQuery()</tt></a> or <a href="#fDatabase-api-execute"><tt>execute()</tt></a>
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-translatedQuery" class="method"><span class="resolution">-></span><span class="name">translatedQuery()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Translates one or more SQL statements using <a href="#fSQLTranslation">fSQLTranslation</a> and executes them</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fResult">fResult</a>|array</span> <span class="php-identifier">translatedQuery</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$sql</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$sql</td>
				<td class="param_description">One or more SQL statements</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value <em>[, ... ]</em></td>
				<td class="param_description">The optional value(s) to place into any placeholders in the SQL - see <a href="#fDatabase-api-escape"><tt>escape()</tt></a> for details</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The <a href="#fResult">fResult</a> object(s) for the query
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-unbufferedQuery" class="method"><span class="resolution">-></span><span class="name">unbufferedQuery()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Executes a single SQL statement in unbuffered mode. This is optimal for</p>
								<p>large results sets since it does not load the whole result set into  memory first. The gotcha is that only one unbuffered result can exist at  one time. If another unbuffered query is executed, the old result will  be deleted.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fUnbufferedResult">fUnbufferedResult</a></span> <span class="php-identifier">unbufferedQuery</span><span class="php-brackets">(</span> <span class="php-vartype">string|<a href="#fStatement">fStatement</a></span> <span class="php-var">$statement</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string|<a href="#fStatement">fStatement</a></td>
				<td class="param_name">$statement</td>
				<td class="param_description">A single SQL statement</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value <em>[, ... ]</em></td>
				<td class="param_description">The optional value(s) to place into any placeholders in the SQL - see <a href="#fDatabase-api-escape"><tt>escape()</tt></a> for details</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The result object for the unbuffered query
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-unbufferedTranslatedQuery" class="method"><span class="resolution">-></span><span class="name">unbufferedTranslatedQuery()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Translates the SQL statement using <a href="#fSQLTranslation">fSQLTranslation</a> and then executes it</p>
								<p>in unbuffered mode. This is optimal for large results sets since it does  not load the whole result set into memory first. The gotcha is that only  one unbuffered result can exist at one time. If another unbuffered query  is executed, the old result will be deleted.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fUnbufferedResult">fUnbufferedResult</a></span> <span class="php-identifier">unbufferedTranslatedQuery</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$sql</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$sql</td>
				<td class="param_description">A single SQL statement</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value <em>[, ... ]</em></td>
				<td class="param_description">The optional value(s) to place into any placeholders in the SQL - see <a href="#fDatabase-api-escape"><tt>escape()</tt></a> for details</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The result object for the unbuffered query
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDatabase-api-unescape" class="method"><span class="resolution">-></span><span class="name">unescape()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Unescapes a value coming out of a database based on its data type</p>
								<p>The valid data types are:  </p><ul><li><tt>'blob'</tt> (or <tt>'%l'</tt>)</li><li><tt>'boolean'</tt> (or <tt>'%b'</tt>)</li><li><tt>'date'</tt> (or <tt>'%d'</tt>)</li><li><tt>'float'</tt> (or <tt>'%f'</tt>)</li><li><tt>'integer'</tt> (or <tt>'%i'</tt>)</li><li><tt>'string'</tt> (also <tt>'%s'</tt>, <tt>'varchar'</tt>, <tt>'char'</tt> or <tt>'text'</tt>)</li><li><tt>'time'</tt> (or <tt>'%t'</tt>)</li><li><tt>'timestamp'</tt> (or <tt>'%p'</tt>)</li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">unescape</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$data_type</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$data_type</td>
				<td class="param_description">The data type being unescaped - see method description for valid values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value or array of values to unescape</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The unescaped value
				</p>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="fDate">fDate</h2>
<div class="sidebar">
<h3 id="fDate-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fDate">Class Documentation</a></strong></li>
<li><a href="#fDate-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fDate-docs-Instantiation">Instantiation</a></li>
<li><a href="#fDate-docs-Modification">Modification</a></li>
<li><a href="#fDate-docs-Adjustments">Adjustments</a></li>
<li><a href="#fDate-docs-Formatting">Formatting</a></li>
<li><a href="#fDate-docs-Comparing">Comparing</a></li>
<li><a href="#fDate-docs-FuzzyDifferences">Fuzzy Differences</a></li>
</ul>

<h3 id="fDate-docs-DateTimeClasses">Date/Time Classes </h3>

<ul>
<li><strong>fDate</strong></li>
<li><a href="#fTime">fTime</a></li>
<li><a href="#fTimestamp">fTimestamp</a></li>
</ul>

<h3 id="fDate-docs-ValueObjects">Value Objects </h3>

<ul>
<li><strong>fDate</strong></li>
<li><a href="#fMoney">fMoney</a></li>
<li><a href="#fNumber">fNumber</a></li>
<li><a href="#fTime">fTime</a></li>
<li><a href="#fTimestamp">fTimestamp</a></li>
</ul>
</div>

<p>
The fDate class is a <a href="#ValueObjects-docs">value object</a> representation of a date. One of the primary attributes of the object is that its value can not be changed, but instead a new object is created.
</p>

<p>
This class is built on top of the PHP date/time functions and can only handle dates ranging from 1901&amp;ndash;2038.
</p>

<h3 id="fDate-docs-Instantiation">Instantiation</h3>

<p>
The fDate constructor takes a single argument, either a string, integer or object (with a <code>__toString()</code> method) representing a date. Any string format accepted by <a class="ext-link" href="http://php.net/strtotime"><span class="icon"><code>strtotime()</code></span></a> will work.
</p>
<pre class="block php"><code>$date1 = new fDate('today');
$date2 = new fDate('sunday');
$date3 = new fDate('3 Feb 2008');
$date4 = new fDate('2005-01-02');</code></pre>

<h3 id="fDate-docs-Modification">Modification</h3>

<p>
Rather than allowing an fDate object value to be modified, which can create issues since objects are passed by reference, all changes to a date create a new object.
</p>

<p>
Usually when modifying a date, only one or two components (such as month or year) of the date will change. The <a href="#fDate-api-modify"><code>modify()</code></a> method leverages the formatting codes from the <a class="ext-link" href="http://php.net/function.date"><span class="icon"><code>date()</code></span></a> function to keep parts of the existing date while replacing others.
</p>

<p>
Here are some examples of <code>modify()</code>:
</p>
<pre class="block php"><code>// The new dates year would be 2007 while the month and day would be the same
$new_date = $date1-&gt;modify('2007-m-d');

// The new date would be the 1st day (Monday) of the 9th week of the year
$new_date = $date2-&gt;modify('Y-\W9-1');

// The new date would simply change the day of the month to the 1st
$new_date = $date3-&gt;modify('Y-m-01');

// The new date would have the same year and day, but the month would be June
$new_date = $date4-&gt;modify('Y-06-d');</code></pre>

<h3 id="fDate-docs-Adjustments">Adjustments</h3>

<p>
Occasionally you may have the need to adjust a date. The <a href="#fDate-api-adjust"><code>adjust()</code></a> method takes a single parameter which can contain any relative time measurement that <a class="ext-link" href="http://php.net/strtotime"><span class="icon"><code>strtotime()</code></span></a> accepts. Since the fDate class is an immutable value object, calls to <code>adjust()</code> return a new fDate object.
</p>
<pre class="block php"><code>$new_date = $date1-&gt;adjust('tomorrow');
$new_date = $date2-&gt;adjust('+1 day');
$new_date = $date3-&gt;adjust('-2 years +1 week');
$new_date = $date4-&gt;adjust('next wednesday');</code></pre>

<h3 id="fDate-docs-Formatting">Formatting</h3>

<p>
To format the date, simply call the <a href="#fDate-api-format"><code>format()</code></a> method with any valid date formatting string from <a class="ext-link" href="http://php.net/date"><span class="icon"><code>date()</code></span></a>. Here are some examples:
</p>
<pre class="block php"><code>// Normal date formatting
echo $date1-&gt;format('Y-m-d');
echo $date2-&gt;format('n/j/y');</code></pre>

<h3 id="fDate-docs-Comparing">Comparing</h3>

<p>
There are five different methods available to compare dates, <a href="#fDate-api-eq"><code>eq()</code></a>, <a href="#fDate-api-gt"><code>gt()</code></a>, <a href="#fDate-api-gte"><code>gte()</code></a>, <a href="#fDate-api-lt"><code>lt()</code></a> and <a href="#fDate-api-lte"><code>lte()</code></a>. Each method optionally accepts a parameter <code>$other_date</code>. If no <code>$other_date</code> is specified, the date is compared to the current date. If <code>$other_date</code> is specified, the two are compared. <code>$other_date</code> accepts any valid date descriptor that works with <a href="#fDate-api-__construct"><code>__construct()</code></a>.
</p>

<p>
Here are some examples:
</p>
<pre class="block php"><code>$today    = new fDate();
$tomorrow = new fDate('+1 day');

// These return TRUE
$today-&gt;eq();
$today-&gt;eq('now');
$today-&gt;lt($tomorrow);
$today-&gt;lte($tomorrow);
$today-&gt;lt('+1 year');

// These calls return FALSE
$tomorrow-&gt;lt($today);
$today-&gt;gt($tomorrow);
$today-&gt;gte($tomorrow);</code></pre>

<h3 id="fDate-docs-FuzzyDifferences">Fuzzy Differences</h3>

<p>
If you are looking to get a fuzzy difference between two dates for display, youll want to use the <a href="#fDate-api-getFuzzyDifference"><code>getFuzzyDifference()</code></a> method. The first parameter, <code>$other_date</code>, optionally accepts a valid date descriptor that can be passed to <a href="#fDate-api-__construct"><code>__construct()</code></a>. If one is passed, the difference will be between the two dates, if nothing is passed, the difference will be between the fDate and the current date.
</p>

<p>
The value returned by <code>getFuzzyDifference()</code> will be a string representing the most broad time measurement between the two dates. In addition, if the difference is just shy of the next largest time measurement, it will be rounded up. Thus 3.5 weeks would become 1 month.
</p>

<p>
Here are some examples to clarify. The following examples are comparing two date descriptors:
</p>
<pre class="block php"><code>$date1 = new fDate('2008-01-01');
$date2 = new fDate('2008-01-04');

echo $date1-&gt;getFuzzyDifference($date2);
// Output: 3 days before

echo $date2-&gt;getFuzzyDifference($date1);
// Output: 3 days after

$date3 = new fDate('2008-01-10');

echo $date3-&gt;getFuzzyDifference('2008-01-01');
// Output: 1 week after

$date4 = new fDate('2008-01-28');

echo $date4-&gt;getFuzzyDifference('2008-01-01');
// Output: 1 month after</code></pre>

<p>
 These examples show output when comparing an fDate object with the current date:
</p>
<pre class="block php"><code>// First, lets assume today is January 1st, 2008.

$date1 = new fDate('2008-01-04');
$date2 = new fDate('2008-01-09');
$date2 = new fDate('2007-12-02');

echo $date1-&gt;getFuzzyDifference();
// Output: 3 days from now

echo $date2-&gt;getFuzzyDifference();
// Output: 1 week from now

echo $date3-&gt;getFuzzyDifference();
// Output: 1 month ago</code></pre>

<p>
 An optional boolean parameter, <code>$simple</code>, can also be passed to <code>getFuzzyDifference()</code>. When <code>TRUE</code>, this parameter causes the method to return the difference in time, but not the direction.
</p>
<pre class="block php"><code>$date1 = new fDate('2008-01-01');
$date2 = new fDate('2008-01-04');

echo $date1-&gt;getFuzzyDifference($date2, TRUE);
// Output: 3 days

echo $date2-&gt;getFuzzyDifference($date1, TRUE);
// Output: 3 days

$date3 = new fDate('2008-01-10');

echo $date3-&gt;getFuzzyDifference('2008-01-01', TRUE);
// Output: 1 week</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fDate-api">fDate API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fDate">Class Documentation</a></li>
		<li><strong><a href="#fDate-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="protected variables">
<h4><a href="#fDate-api-class_vars">Variables</a></h4>
<ul>
  	 		<li class="protected"><a href="#fDate-api-date">$date</a></li>
	   </ul>
</div>
<div class="protected methods static">
<h4><a href="#fDate-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  	  	  			<li class="protected"><a href="#fDate-api-compose">compose()</a></li>
	  	  	  	  	  	  	  	  	  </ul>
</div>
<div class="methods">
<h4><a href="#fDate-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fDate-api-__construct">__construct()</a></li>
	  			<li class="protected"><a href="#fDate-api-__get">__get()</a></li>
	  			<li><a href="#fDate-api-__toString">__toString()</a></li>
	  			<li><a href="#fDate-api-adjust">adjust()</a></li>
	  	  			<li><a href="#fDate-api-eq">eq()</a></li>
	  			<li><a href="#fDate-api-format">format()</a></li>
	  			<li><a href="#fDate-api-getFuzzyDifference">getFuzzyDifference()</a></li>
	  			<li><a href="#fDate-api-gt">gt()</a></li>
	  			<li><a href="#fDate-api-gte">gte()</a></li>
	  			<li><a href="#fDate-api-lt">lt()</a></li>
	  			<li><a href="#fDate-api-lte">lte()</a></li>
	  			<li><a href="#fDate-api-modify">modify()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fGrammar">fGrammar</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fTimestamp">fTimestamp</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fDatabase">fDatabase</a></li>
		<li><a href="#fLoader">fLoader</a></li>
		<li><a href="#fORM">fORM</a></li>
		<li><a href="#fORMValidation">fORMValidation</a></li>
		<li><a href="#fRequest">fRequest</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b11</span></div>
<p class="short_description">Represents a date as a value object</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b11</th><td>Fixed a method signature <span class="date">8/24/11</span></td></tr><tr><th>1.0.0b10</th><td>Fixed a bug with the constructor not properly handling unix timestamps that are negative integers <span class="date">6/2/11</span></td></tr><tr><th>1.0.0b9</th><td>Changed the <tt>$date</tt> attribute to be protected <span class="date">3/20/11</span></td></tr><tr><th>1.0.0b8</th><td>Added the <tt>$simple</tt> parameter to <a href="#fDate-api-getFuzzyDifference"><tt>getFuzzyDifference()</tt></a> <span class="date">3/15/10</span></td></tr><tr><th>1.0.0b7</th><td>Added a call to <a href="#fTimestamp-api-callUnformatCallback"><tt>fTimestamp::callUnformatCallback()</tt></a> in <a href="#fDate-api-__construct"><tt>__construct()</tt></a> for localization support <span class="date">6/1/09</span></td></tr><tr><th>1.0.0b6</th><td>Backwards compatibility break - Removed getSecondsDifference(), added <a href="#fDate-api-eq"><tt>eq()</tt></a>, <a href="#fDate-api-gt"><tt>gt()</tt></a>, <a href="#fDate-api-gte"><tt>gte()</tt></a>, <a href="#fDate-api-lt"><tt>lt()</tt></a>, <a href="#fDate-api-lte"><tt>lte()</tt></a> <span class="date">3/5/09</span></td></tr><tr><th>1.0.0b5</th><td>Updated for new <a href="#fCore">fCore</a> API <span class="date">2/16/09</span></td></tr><tr><th>1.0.0b4</th><td>Fixed <a href="#fDate-api-__construct"><tt>__construct()</tt></a> to properly handle the 5.0 to 5.1 change in strtotime() <span class="date">1/21/09</span></td></tr><tr><th>1.0.0b3</th><td>Added support for CURRENT_TIMESTAMP and CURRENT_DATE SQL keywords <span class="date">1/11/09</span></td></tr><tr><th>1.0.0b2</th><td>Removed the adjustment amount check from <a href="#fDate-api-adjust"><tt>adjust()</tt></a> <span class="date">12/31/08</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">2/10/08</span></td></tr></table></div>
<div class="class_variables" id="fDate-api-class_vars">
<h4>Variables</h4>
	<!-- start protected variable -->
	<h5 id="fDate-api-date" class="protected variable"><span class="resolution">-></span><span class="name">date</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>A timestamp of the date</p>
			</div>
		<h6>Type</h6>
		<p class="type">integer</p>
	</div>
	<!-- end variable -->
</div>
<div class="class_methods static" id="fDate-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start protected method static -->
			<h5 id="fDate-api-compose" class="protected method static"><span class="resolution">::</span><span class="name">compose()</span> <span class="visibility">protected</span></h5>
			<div class="protected method static">
							<div class="method_description">
									<p>Composes text using <a href="#fText">fText</a> if loaded</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">compose</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$component</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message to compose</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$component <em>[, ... ]</em></td>
				<td class="param_description">A string or number to insert into the message</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The composed and possible translated message
				</p>
			</div>
			<!-- end method static -->
									</div>
<div class="class_methods" id="fDate-api-class_methods">
<h4>Methods</h4>
						<!-- start method -->
			<h5 id="fDate-api-__construct" class="method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Creates the date to represent, no timezone is allowed since dates don't have timezones</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fDate">fDate</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fDate">fDate</a>|object|string|integer</span> <span class="php-var">$date</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fDate">fDate</a>|object|string|integer</td>
				<td class="param_name">$date</td>
				<td class="param_description">The date to represent, <tt>NULL</tt> is interpreted as today</td>
			  </tr>
						</table>
			</div>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$date</tt> is not a valid date</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fDate-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDate-api-__toString" class="method"><span class="resolution">-></span><span class="name">__toString()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns this date in <tt>Y-m-d</tt> format</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">__toString</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The <tt>Y-m-d</tt> format of this date
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fDate-api-adjust" class="method"><span class="resolution">-></span><span class="name">adjust()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Changes the date by the adjustment specified, only adjustments of a day or more will be made</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fDate">fDate</a></span> <span class="php-identifier">adjust</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$adjustment</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$adjustment</td>
				<td class="param_description">The adjustment to make</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The adjusted date
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$adjustment</tt> is not a relative date measurement</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDate-api-eq" class="method"><span class="resolution">-></span><span class="name">eq()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>If this date is equal to the date passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">eq</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fDate">fDate</a>|object|string|integer</span> <span class="php-var">$other_date</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fDate">fDate</a>|object|string|integer</td>
				<td class="param_name">$other_date</td>
				<td class="param_description">The date to compare with, <tt>NULL</tt> is interpreted as today</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this date is equal to the one passed
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fDate-api-format" class="method"><span class="resolution">-></span><span class="name">format()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Formats the date</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">format</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$format</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$format</td>
				<td class="param_description">The <a class="ext-link" href="http://php.net/date"><span class="icon"><tt>date()</tt></span></a> function compatible formatting string, or a format name from <a href="#fTimestamp-api-defineFormat"><tt>fTimestamp::defineFormat()</tt></a></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The formatted date
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When a non-date formatting character is included in <tt>$format</tt></dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDate-api-getFuzzyDifference" class="method"><span class="resolution">-></span><span class="name">getFuzzyDifference()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the approximate difference in time, discarding any unit of measure but the least specific.</p>
								<p>The output will read like:  </p><ul><li>&quot;This date is <tt>{return value}</tt> the provided one&quot; when a date it passed</li><li>&quot;This date is <tt>{return value}</tt>&quot; when no date is passed and comparing with today</li></ul><p>Examples of output for a date passed might be:  </p><ul><li><tt>'2 days after'</tt></li><li><tt>'1 year before'</tt></li><li><tt>'same day'</tt></li></ul><p>Examples of output for no date passed might be:  </p><ul><li><tt>'2 days from now'</tt></li><li><tt>'1 year ago'</tt></li><li><tt>'today'</tt></li></ul><p>You would never get the following output since it includes more than one unit of time measurement:  </p><ul><li><tt>'3 weeks and 1 day'</tt></li><li><tt>'1 year and 2 months'</tt></li></ul><p>Values that are close to the next largest unit of measure will be rounded up:  </p><ul><li><tt>6 days</tt> would be represented as <tt>1 week</tt>, however <tt>5 days</tt> would not</li><li><tt>29 days</tt> would be represented as <tt>1 month</tt>, but <tt>21 days</tt> would be shown as <tt>3 weeks</tt></li></ul>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getFuzzyDifference</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fDate">fDate</a>|object|string|integer</span> <span class="php-var">$other_date</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$simple</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype">string</span> <span class="php-identifier">getFuzzyDifference</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$simple</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fDate">fDate</a>|object|string|integer</td>
				<td class="param_name">$other_date</td>
				<td class="param_description">The date to create the difference with, <tt>NULL</tt> is interpreted as today</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$simple</td>
				<td class="param_description">When <tt>TRUE</tt>, the returned value will only include the difference in the two dates, but not <tt>from now</tt>, <tt>ago</tt>, <tt>after</tt> or <tt>before</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The fuzzy difference in time between the this date and the one provided
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDate-api-gt" class="method"><span class="resolution">-></span><span class="name">gt()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>If this date is greater than the date passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">gt</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fDate">fDate</a>|object|string|integer</span> <span class="php-var">$other_date</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fDate">fDate</a>|object|string|integer</td>
				<td class="param_name">$other_date</td>
				<td class="param_description">The date to compare with, <tt>NULL</tt> is interpreted as today</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this date is greater than the one passed
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDate-api-gte" class="method"><span class="resolution">-></span><span class="name">gte()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>If this date is greater than or equal to the date passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">gte</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fDate">fDate</a>|object|string|integer</span> <span class="php-var">$other_date</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fDate">fDate</a>|object|string|integer</td>
				<td class="param_name">$other_date</td>
				<td class="param_description">The date to compare with, <tt>NULL</tt> is interpreted as today</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this date is greater than or equal to the one passed
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDate-api-lt" class="method"><span class="resolution">-></span><span class="name">lt()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>If this date is less than the date passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">lt</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fDate">fDate</a>|object|string|integer</span> <span class="php-var">$other_date</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fDate">fDate</a>|object|string|integer</td>
				<td class="param_name">$other_date</td>
				<td class="param_description">The date to compare with, <tt>NULL</tt> is interpreted as today</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this date is less than the one passed
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDate-api-lte" class="method"><span class="resolution">-></span><span class="name">lte()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>If this date is less than or equal to the date passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">lte</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fDate">fDate</a>|object|string|integer</span> <span class="php-var">$other_date</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fDate">fDate</a>|object|string|integer</td>
				<td class="param_name">$other_date</td>
				<td class="param_description">The date to compare with, <tt>NULL</tt> is interpreted as today</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this date is less than or equal to the one passed
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDate-api-modify" class="method"><span class="resolution">-></span><span class="name">modify()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Modifies the current date, creating a new <a href="#fDate">fDate</a> object</p>
								<p>The purpose of this method is to allow for easy creation of a date  based on this date. Below are some examples of formats to  modify the current date:  </p><ul><li><tt>'Y-m-01'</tt> to change the date to the first of the month</li><li><tt>'Y-m-t'</tt> to change the date to the last of the month</li><li><tt>'Y-\W5-N'</tt> to change the date to the 5th week of the year</li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fDate">fDate</a></span> <span class="php-identifier">modify</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$format</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$format</td>
				<td class="param_description">The current date will be formatted with this string, and the output used to create a new object</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The new date
				</p>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="fDirectory">fDirectory</h2>
<div class="sidebar">
<h3 id="fDirectory-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fDirectory">Class Documentation</a></strong></li>
<li><a href="#fDirectory-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fDirectory-docs-Instantiation">Instantiation</a></li>
<li><a href="#fDirectory-docs-GettingInformation">Getting Information</a></li>
<li><a href="#fDirectory-docs-Manipulation">Manipulation</a></li>
<li><a href="#fDirectory-docs-ListingChildren">Listing Children</a></li>
</ul>

<h3 id="fDirectory-docs-FilesystemClasses">Filesystem Classes </h3>

<ul>
<li><a href="#fFilesystem">fFilesystem</a></li>
<li><a href="#fFile">fFile</a>
<ul>
<li><a href="#fImage">fImage</a></li>
</ul>
</li>
<li><strong>fDirectory</strong></li>
<li><a href="#fUpload">fUpload</a></li>
</ul>
</div>

<p>
The fDirectory class is a simple object representation of a directory on the filesystem. It provides an object-based interface to common directory functions and allows actions to be grouped into transactions via the <a href="#fFilesystem">fFilesystem</a> class.
</p>

<h3 id="fDirectory-docs-Instantiation">Instantiation</h3>

<p>
The fDirectory constructor takes a single argument, the filesystem path to a directory. The path can be absolute or relative.
</p>
<pre class="block php"><code>$directory1 = new fDirectory('/var/www/vhosts/examples.com/httpdocs/images/');
$directory2 = new fDirectory('./output/');
$directory3 = new fDirectory('../uploads/documents/');</code></pre>

<p>
 It is also possible to create a directory on the filesystem and instantiate an fDirectory object for that new directory by calling the static method <a href="#fDirectory-api-create"><code>create()</code></a>. <code>create()</code> takes up to two parameters, with the first being <code>$directory_path</code> and the second optional parameter being <code>$mode</code>. The <code>$mode</code> parameter allows setting the permissions for the new directory, and usually is set using an octal number (represented by a number with a leading zero such as 0777).
</p>

<p>
Please note that directory creation is recursive, so any non-existant parent directories will also be created as needed.
</p>
<pre class="block php"><code>$new_directory = fDirectory::create('./logs/');</code></pre>

<h3 id="fDirectory-docs-GettingInformation">Getting Information</h3>

<p>
The fDirectory class includes a few methods to grab some basic information about a directory. These include:
</p>
<table><tbody>
<tr>
<td><strong>Method</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td><a href="#fDirectory-api-getName"><code>getName()</code></a></td>
<td>Returns the name of the directory as a string - does not include the full path</td>
</tr>
<tr>
<td><a href="#fDirectory-api-getSize"><code>getSize()</code></a></td>
<td>Returns the size of the directory and all contents in bytes as an integer, or optionally formatted for easy human readability</td>
</tr>
<tr>
<td><a href="#fDirectory-api-getParent"><code>getParent()</code></a></td>
<td>Returns the fDirectory object for the directorys parent directory</td>
</tr>
<tr>
<td><a href="#fDirectory-api-getPath"><code>getPath()</code></a></td>
<td>Returns the full path to the directory as a string</td>
</tr>
<tr>
<td><a href="#fDirectory-api-isWritable"><code>isWritable()</code></a></td>
<td>Indicates if the directory can be written to by the current user</td>
</tr>
</tbody></table>

<p>
If you want more specific information about a directory, you can pass the output of <code>getPath()</code> into the various <a class="ext-link" href="http://php.net/filesystem"><span class="icon">PHP filesystem functions</span></a>. 
</p>

<h3 id="fDirectory-docs-Manipulation">Manipulation</h3>

<p>
The following methods provide a straight-forward interface for some standard manipulation of directories. Also note that these manipulations can be wrapped in a <a href="#fFilesystem-docs-Transactions">filesystem transactions</a> to allow for rolling back changes in the event of a later error.
</p>
<table><tbody>
<tr>
<td><strong>Method</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td><a href="#fDirectory-api-rename"><code>rename()</code></a></td>
<td>Renames the directory to a new path</td>
</tr>
<tr>
<td><a href="#fDirectory-api-move"><code>move()</code></a></td>
<td>Moves the directory into a different parent directory, keeping the current name</td>
</tr>
<tr>
<td><a href="#fDirectory-api-delete"><code>delete()</code></a></td>
<td>Removes the directory and all contained files and folders from the filesystem. Please note that if inside of a filesystem transaction, this event will be deferred until commit is called, but instances of fDirectory and <a href="#fFile">fFile</a> for all affected files and directories will act as if the directory/file no longer exists.</td>
</tr>
<tr>
<td><a href="#fDirectory-api-clear"><code>clear()</code></a></td>
<td>Removes all contained files and folders from the filesystem. Please note that if inside of a filesystem transaction, this event will be deferred until commit is called, but instances of fDirectory and <a href="#fFile">fFile</a> for all affected files and directories will act as if the directory/file no longer exists.</td>
</tr>
</tbody></table>

<h3 id="fDirectory-docs-ListingChildren">Listing Children</h3>

<p>
The <a href="#fDirectory-api-scan"><code>scan()</code></a> and <a href="#fDirectory-api-scanRecursive"><code>scanRecursive()</code></a> method provide functionality for listing all <a href="#fFile">fFile</a>, <a href="#fImage">fImage</a> and fDirectory children of an fDirectory object. Both return an array of objects, however <code>scan()</code> returns only direct children, whereas <code>scanRecursive()</code> returns all descendants.
</p>
<pre class="block php"><code>$children = $dir-&gt;scan();

$descendants = $dir-&gt;scanRecursive();</code></pre>

<p>
 Both methods accept a single optional parameter, <code>$filter</code>. The filter can be a valid <a class="ext-link" href="http://php.net/pcre"><span class="icon">PCRE regex pattern</span></a>, or a string pattern containing <code>*</code> and <code>?</code> wildcards. <code>*</code> will match zero or more characters, while <code>?</code> will match zero or one characters. When matching the <code>$filter</code>, all file paths will have <code>/</code> directory separators, and all directories will end in <code>/</code>.
</p>
<pre class="block php"><code>// This will list all directory children
$directories = $dir-&gt;scan('*/');

// This will find all jpg and gif files under the current directory
$images = $dir-&gt;scanRecursive('#\.(jpe?g|gif)$#i');</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fDirectory-api">fDirectory API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fDirectory">Class Documentation</a></li>
		<li><strong><a href="#fDirectory-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="protected variables">
<h4><a href="#fDirectory-api-class_vars">Variables</a></h4>
<ul>
  	 		<li class="protected"><a href="#fDirectory-api-deleted">$deleted</a></li>
	   	 		<li class="protected"><a href="#fDirectory-api-directory">$directory</a></li>
	   </ul>
</div>
<div class="methods static">
<h4><a href="#fDirectory-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  	  	  			<li><a href="#fDirectory-api-create">create()</a></li>
	  	  	  	  	  	  	  			<li><a href="#fDirectory-api-makeCanonical">makeCanonical()</a></li>
	  	  	  	  	  	  </ul>
</div>
<div class="methods">
<h4><a href="#fDirectory-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fDirectory-api-__construct">__construct()</a></li>
	  			<li class="protected"><a href="#fDirectory-api-__get">__get()</a></li>
	  			<li><a href="#fDirectory-api-__toString">__toString()</a></li>
	  			<li><a href="#fDirectory-api-clear">clear()</a></li>
	  	  			<li><a href="#fDirectory-api-delete">delete()</a></li>
	  			<li><a href="#fDirectory-api-getName">getName()</a></li>
	  			<li><a href="#fDirectory-api-getParent">getParent()</a></li>
	  			<li><a href="#fDirectory-api-getPath">getPath()</a></li>
	  			<li><a href="#fDirectory-api-getSize">getSize()</a></li>
	  			<li><a href="#fDirectory-api-isWritable">isWritable()</a></li>
	  	  			<li><a href="#fDirectory-api-move">move()</a></li>
	  			<li><a href="#fDirectory-api-rename">rename()</a></li>
	  			<li><a href="#fDirectory-api-scan">scan()</a></li>
	  			<li><a href="#fDirectory-api-scanRecursive">scanRecursive()</a></li>
	  			<li class="protected"><a href="#fDirectory-api-tossIfDeleted">tossIfDeleted()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
		<li><a href="#fFilesystem">fFilesystem</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fFile">fFile</a></li>
		<li><a href="#fFilesystem">fFilesystem</a></li>
		<li><a href="#fImage">fImage</a></li>
		<li><a href="#fLoader">fLoader</a></li>
		<li><a href="#fORMFile">fORMFile</a></li>
		<li><a href="#fSession">fSession</a></li>
		<li><a href="#fTemplating">fTemplating</a></li>
		<li><a href="#fUpload">fUpload</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b14</span></div>
<p class="short_description">Represents a directory on the filesystem, also provides static directory-related methods</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b14</th><td>Fixed a bug in <a href="#fDirectory-api-delete"><tt>delete()</tt></a> where a non-existent method was being called on <a href="#fFilesystem">fFilesystem</a>, added a permission check to <a href="#fDirectory-api-delete"><tt>delete()</tt></a> <span class="date">8/23/11</span></td></tr><tr><th>1.0.0b13</th><td>Added the <a href="#fDirectory-api-clear"><tt>clear()</tt></a> method <span class="date">1/10/11</span></td></tr><tr><th>1.0.0b12</th><td>Fixed <a href="#fDirectory-api-scanRecursive"><tt>scanRecursive()</tt></a> to not add duplicate entries for certain nested directory structures <span class="date">8/10/10</span></td></tr><tr><th>1.0.0b11</th><td>Fixed <a href="#fDirectory-api-scan"><tt>scan()</tt></a> to properly add trailing /s for directories <span class="date">3/16/10</span></td></tr><tr><th>1.0.0b10</th><td>BackwardsCompatibilityBreak - Fixed <a href="#fDirectory-api-scan"><tt>scan()</tt></a> and <a href="#fDirectory-api-scanRecursive"><tt>scanRecursive()</tt></a> to strip the current directory's path before matching, added support for glob style matching <span class="date">3/5/10</span></td></tr><tr><th>1.0.0b9</th><td>Changed the way directories deleted in a filesystem transaction are handled, including improvements to the exception that is thrown <span class="date">3/5/10</span></td></tr><tr><th>1.0.0b8</th><td>Backwards Compatibility Break - renamed getFilesize() to <a href="#fDirectory-api-getSize"><tt>getSize()</tt></a>, added <a href="#fDirectory-api-move"><tt>move()</tt></a> <span class="date">12/16/09</span></td></tr><tr><th>1.0.0b7</th><td>Fixed <a href="#fDirectory-api-__construct"><tt>__construct()</tt></a> to throw an <a href="#fValidationException">fValidationException</a> when the directory does not exist <span class="date">8/21/09</span></td></tr><tr><th>1.0.0b6</th><td>Fixed a bug where deleting a directory would prevent any future operations in the same script execution on a file or directory with the same path <span class="date">8/20/09</span></td></tr><tr><th>1.0.0b5</th><td>Added the ability to skip checks in <a href="#fDirectory-api-__construct"><tt>__construct()</tt></a> for better performance in conjunction with <a href="#fFilesystem-api-createObject"><tt>fFilesystem::createObject()</tt></a> <span class="date">8/6/09</span></td></tr><tr><th>1.0.0b4</th><td>Refactored <a href="#fDirectory-api-scan"><tt>scan()</tt></a> to use the new <a href="#fFilesystem-api-createObject"><tt>fFilesystem::createObject()</tt></a> method <span class="date">1/21/09</span></td></tr><tr><th>1.0.0b3</th><td>Added the $regex_filter parameter to <a href="#fDirectory-api-scan"><tt>scan()</tt></a> and <a href="#fDirectory-api-scanRecursive"><tt>scanRecursive()</tt></a>, fixed bug in <a href="#fDirectory-api-scanRecursive"><tt>scanRecursive()</tt></a> <span class="date">1/5/09</span></td></tr><tr><th>1.0.0b2</th><td>Removed some unnecessary error suppresion operators <span class="date">12/11/08</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">12/21/07</span></td></tr></table></div>
<div class="class_variables" id="fDirectory-api-class_vars">
<h4>Variables</h4>
	<!-- start protected variable -->
	<h5 id="fDirectory-api-deleted" class="protected variable"><span class="resolution">-></span><span class="name">deleted</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>A backtrace from when the file was deleted</p>
			</div>
		<h6>Type</h6>
		<p class="type">array</p>
	</div>
	<!-- end variable -->
	<!-- start protected variable -->
	<h5 id="fDirectory-api-directory" class="protected variable"><span class="resolution">-></span><span class="name">directory</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>The full path to the directory</p>
			</div>
		<h6>Type</h6>
		<p class="type">string</p>
	</div>
	<!-- end variable -->
</div>
<div class="class_methods static" id="fDirectory-api-class_methods_static">
<h4>Static Methods</h4>
						<!-- start method static -->
			<h5 id="fDirectory-api-create" class="method static"><span class="resolution">::</span><span class="name">create()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Creates a directory on the filesystem and returns an object representing it</p>
								<p>The directory creation is done recursively, so if any of the parent  directories do not exist, they will be created.</p><p>This operation will be reverted by a filesystem transaction being rolled back.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fDirectory">fDirectory</a></span> <span class="php-identifier">create</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$directory</span><span class="php-code">,</span> <span class="php-vartype">numeric</span> <span class="php-var">$mode</span><span class="php-code">=</span>0777 <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$directory</td>
				<td class="param_description">The path to the new directory</td>
			  </tr>
						  <tr>
				<td class="param_data_type">numeric</td>
				<td class="param_name">$mode</td>
				<td class="param_description">The mode (permissions) to use when creating the directory. This should be an octal number (requires a leading zero). This has no effect on the Windows platform.</td>
			  </tr>
						</table>
			</div>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When no directory was specified, or the directory already exists</dd></dl>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fDirectory-api-makeCanonical" class="method static"><span class="resolution">::</span><span class="name">makeCanonical()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Makes sure a directory has a <tt>/</tt> or <tt>\</tt> at the end</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">makeCanonical</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$directory</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$directory</td>
				<td class="param_description">The directory to check</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The directory name in canonical form
				</p>
			</div>
			<!-- end method static -->
						</div>
<div class="class_methods" id="fDirectory-api-class_methods">
<h4>Methods</h4>
						<!-- start method -->
			<h5 id="fDirectory-api-__construct" class="method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Creates an object to represent a directory on the filesystem</p>
								<p>If multiple <a href="#fDirectory">fDirectory</a> objects are created for a single directory,  they will reflect changes in each other including rename and delete  actions.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fDirectory">fDirectory</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$directory</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$skip_checks</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$directory</td>
				<td class="param_description">The path to the directory</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$skip_checks</td>
				<td class="param_description">If file checks should be skipped, which improves performance, but may cause undefined behavior - only skip these if they are duplicated elsewhere</td>
			  </tr>
						</table>
			</div>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When no directory was specified, when the directory does not exist or when the path specified is not a directory</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fDirectory-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDirectory-api-__toString" class="method"><span class="resolution">-></span><span class="name">__toString()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the full filesystem path for the directory</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">__toString</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The full filesystem path
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDirectory-api-clear" class="method"><span class="resolution">-></span><span class="name">clear()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Removes all files and directories inside of the directory</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">clear</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDirectory-api-delete" class="method"><span class="resolution">-></span><span class="name">delete()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Will delete a directory and all files and directories inside of it</p>
								<p>This operation will not be performed until the filesystem transaction  has been committed, if a transaction is in progress. Any non-Flourish  code (PHP or system) will still see this directory and all contents as  existing until that point.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">delete</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDirectory-api-getName" class="method"><span class="resolution">-></span><span class="name">getName()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the name of the directory</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getName</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The name of the directory
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDirectory-api-getParent" class="method"><span class="resolution">-></span><span class="name">getParent()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the parent directory</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fDirectory">fDirectory</a></span> <span class="php-identifier">getParent</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The object representing the parent directory
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDirectory-api-getPath" class="method"><span class="resolution">-></span><span class="name">getPath()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the directory's current path</p>
								<p>If the web path is requested, uses translations set with  <a href="#fFilesystem-api-addWebPathTranslation"><tt>fFilesystem::addWebPathTranslation()</tt></a></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getPath</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$translate_to_web_path</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$translate_to_web_path</td>
				<td class="param_description">If the path should be the web path</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The path for the directory
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDirectory-api-getSize" class="method"><span class="resolution">-></span><span class="name">getSize()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the disk usage of the directory and all files and folders contained within</p>
								<p>This method may return incorrect results if files over 2GB exist and the  server uses a 32 bit operating system</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer|string</span> <span class="php-identifier">getSize</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$format</span><span class="php-code">=</span>FALSE<span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$decimal_places</span><span class="php-code">=</span>1 <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$format</td>
				<td class="param_description">If the filesize should be formatted for human readability</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$decimal_places</td>
				<td class="param_description">The number of decimal places to format to (if enabled)</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If formatted, a string with filesize in b/kb/mb/gb/tb, otherwise an integer
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDirectory-api-isWritable" class="method"><span class="resolution">-></span><span class="name">isWritable()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Check to see if the current directory is writable</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">isWritable</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 If the directory is writable
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fDirectory-api-move" class="method"><span class="resolution">-></span><span class="name">move()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Moves the current directory into a different directory</p>
								<p>Please note that <a href="#fDirectory-api-rename"><tt>rename()</tt></a> will rename a directory in its current  parent directory or rename it into a different parent directory.</p><p>If the current directory's name already exists in the new parent  directory and the overwrite flag is set to false, the name will be  changed to a unique name.</p><p>This operation will be reverted if a filesystem transaction is in  progress and is later rolled back.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fDirectory">fDirectory</a></span> <span class="php-identifier">move</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fDirectory">fDirectory</a>|string</span> <span class="php-var">$new_parent_directory</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$overwrite</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fDirectory">fDirectory</a>|string</td>
				<td class="param_name">$new_parent_directory</td>
				<td class="param_description">The directory to move this directory into</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$overwrite</td>
				<td class="param_description">If the current filename already exists in the new directory, <tt>TRUE</tt> will cause the file to be overwritten, <tt>FALSE</tt> will cause the new filename to change</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The directory object, to allow for method chaining
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When the new parent directory passed is not a directory, is not readable or is a sub-directory of this directory</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDirectory-api-rename" class="method"><span class="resolution">-></span><span class="name">rename()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Renames the current directory</p>
								<p>This operation will NOT be performed until the filesystem transaction  has been committed, if a transaction is in progress. Any non-Flourish  code (PHP or system) will still see this directory (and all contained  files/dirs) as existing with the old paths until that point.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">rename</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$new_dirname</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$overwrite</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$new_dirname</td>
				<td class="param_description">The new full path to the directory or a new name in the current parent directory</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$overwrite</td>
				<td class="param_description">If the new dirname already exists, TRUE will cause the file to be overwritten, FALSE will cause the new filename to change</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDirectory-api-scan" class="method"><span class="resolution">-></span><span class="name">scan()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Performs a <a class="ext-link" href="http://php.net/scandir"><span class="icon"><tt>scandir()</tt></span></a> on a directory, removing the <tt>.</tt> and <tt>..</tt> entries</p>
								<p>If the <tt>$filter</tt> looks like a valid PCRE pattern - matching delimeters  (a delimeter can be any non-alphanumeric, non-backslash, non-whitespace  character) followed by zero or more of the flags <tt>i</tt>, <tt>m</tt>, <tt>s</tt>, <tt>x</tt>,  <tt>e</tt>, <tt>A</tt>, <tt>D</tt>,  <tt>S</tt>, <tt>U</tt>, <tt>X</tt>, <tt>J</tt>, <tt>u</tt> - then  <a class="ext-link" href="http://php.net/preg_match"><span class="icon"><tt>preg_match()</tt></span></a> will be used.</p><p>Otherwise the <tt>$filter</tt> will do a case-sensitive match with <tt>*</tt> matching  zero or more characters and <tt>?</tt> matching a single character.</p><p>On all OSes (even Windows), directories will be separated by <tt>/</tt>s when  comparing with the <tt>$filter</tt>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">scan</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$filter</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$filter</td>
				<td class="param_description">A PCRE or glob pattern to filter files/directories by path - directories can be detected by checking for a trailing / (even on Windows)</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The <a href="#fFile">fFile</a> (or <a href="#fImage">fImage</a>) and <a href="#fDirectory">fDirectory</a> objects for the files/directories in this directory
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fDirectory-api-scanRecursive" class="method"><span class="resolution">-></span><span class="name">scanRecursive()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Performs a <strong>recursive</strong> <a class="ext-link" href="http://php.net/scandir"><span class="icon"><tt>scandir()</tt></span></a> on a directory, removing the <tt>.</tt> and <tt>..</tt> entries</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">scanRecursive</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$filter</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$filter</td>
				<td class="param_description">A PCRE or glob pattern to filter files/directories by path - see <a href="#fDirectory-api-scan"><tt>scan()</tt></a> for details</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The <a href="#fFile">fFile</a> (or <a href="#fImage">fImage</a>) and <a href="#fDirectory">fDirectory</a> objects for the files/directories (listed recursively) in this directory
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fDirectory-api-tossIfDeleted" class="protected method"><span class="resolution">-></span><span class="name">tossIfDeleted()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Throws an exception if the directory has been deleted</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">tossIfDeleted</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="fEmail">fEmail</h2>
<div class="sidebar">
<h3 id="fEmail-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fEmail">Class Documentation</a></strong></li>
<li><a href="#fEmail-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fEmail-docs-Instantiation">Instantiation</a></li>
<li><a href="#fEmail-docs-Recipients">Recipients</a></li>
<li><a href="#fEmail-docs-FromHeaders">From Headers</a></li>
<li><a href="#fEmail-docs-SubjectandBody">Subject and Body</a>
<ul>
<li><a href="#fEmail-docs-InlineBodyTemplating">Inline Body Templating</a></li>
<li><a href="#fEmail-docs-LoadingaBodyTemplate">Loading a Body Template</a></li>
</ul>
</li>
<li><a href="#fEmail-docs-HTMLBody">HTML Body</a>
<ul>
<li><a href="#fEmail-docs-LoadinganHTMLBodyTemplate">Loading an HTML Body Template</a></li>
</ul>
</li>
<li><a href="#fEmail-docs-Self-ContainedHTMLImagesRelatedFiles">Self-Contained HTML Images (Related Files)</a></li>
<li><a href="#fEmail-docs-Attachments">Attachments</a></li>
<li><a href="#fEmail-docs-SMIMEEncryptionandSigning">S/MIME Encryption and Signing</a></li>
<li><a href="#fEmail-docs-Sending">Sending</a></li>
<li><a href="#fEmail-docs-CustomHeaders">Custom Headers</a></li>
<li><a href="#fEmail-docs-FixingFormattingIssues">Fixing Formatting Issues</a></li>
<li><a href="#fEmail-docs-ValidatingEmailAddresses">Validating Email Addresses</a></li>
</ul>

<h3 id="fEmail-docs-EmailClasses">Email Classes </h3>

<ul>
<li><strong>fEmail</strong></li>
<li><a href="#fMailbox">fMailbox</a></li>
<li><a href="#fSMTP">fSMTP</a></li>
</ul>
</div>

<p>
The fEmail class provides an interface to very easily send well-formed emails with UTF-8 content, HTML, attachments and S/MIME encryption and signing. fEmail uses PHPs built-in <a class="ext-link" href="http://php.net/function.mail"><span class="icon"><code>mail()</code></span></a> function by default, but can be used with <a href="#fSMTP">fSMTP</a> for mass emailing or mailing via a remote mail server.
</p>

<h3 id="fEmail-docs-Instantiation">Instantiation</h3>

<p>
Creating a new email is as simple as making a new instance of fEmail:
</p>
<pre class="block php"><code>$email = new fEmail();</code></pre>

<h3 id="fEmail-docs-Recipients">Recipients</h3>

<p>
fEmail supports <code>To:</code>, <code>CC:</code> and <code>BCC:</code> recipients through the methods <a href="#fEmail-api-addRecipient"><code>addRecipient()</code></a>, <a href="#fEmail-api-addCCRecipient"><code>addCCRecipient()</code></a> and <a href="#fEmail-api-addBCCRecipient"><code>addBCCRecipient()</code></a>. Each method requires a single parameter <code>$email</code> and accepts a second optional parameter <code>$name</code>. The add methods can be called any number of times to add any number of recipients:
</p>
<pre class="block php"><code>// Add our recipient
$email-&gt;addRecipient('will@example.com', 'Will');

// Add a few people to the CC and BCC lists
$email-&gt;addCCRecipient('john@example.com');
$email-&gt;addCCRecipient('bob@example.com', 'Bob Smith, Jr.');

$email-&gt;addBCCRecipient('alice@example.com');</code></pre>

<p>
 If need be, all regular, CC and BCC recipients can be cleared by calling the method <a href="#fEmail-api-clearRecipients"><code>clearRecipients()</code></a>.
</p>
<pre class="block php"><code>$email-&gt;clearRecipients();</code></pre>

<h3 id="fEmail-docs-FromHeaders">From Headers</h3>

<p>
When sending a message you will also need to set the <code>From:</code> address via the method <a href="#fEmail-api-setFromEmail"><code>setFromEmail()</code></a>. The first parameter, <code>$email</code>, is required, however the second parameter, <code>$name</code>, is optional. Unfortunately the implementation of <code>mail()</code> on Windows does not allow setting the <code>$name</code> parameter. <em>A <code>$name</code> will work on Windows if you use <a href="#fSMTP">fSMTP</a>.</em>
</p>
<pre class="block php"><code>// Set who the email is from
$email-&gt;setFromEmail('will@example.com');

// Include the users name
$email-&gt;setFromEmail('will@example.com', 'Will');</code></pre>

<p>
 It is also possible to set the <code>Return-Path:</code> header on almost all servers. This email address is listed as the true source of the email and will be the recipient of any bounces or delivery notifications. The method <a href="#fEmail-api-setBounceToEmail"><code>setBounceToEmail()</code></a> sets this address with just a single parameter <code>$email</code>:
</p>
<pre class="block php"><code>$email-&gt;setBounceToEmail('will@example.com');</code></pre>

<h3 id="fEmail-docs-SubjectandBody">Subject and Body</h3>

<p>
All email must have a subject and body set by the methods <a href="#fEmail-api-setSubject"><code>setSubject()</code></a> and <a href="#fEmail-api-setBody"><code>setBody()</code></a>. Both of these methods accept a single parameter, a UTF-8 string.
</p>
<pre class="block php"><code>// Set the subject include UTF-8 curly quotes
$email-&gt;setSubject('This wont break email programs because it is properly encoded by the class');

// Set the body to include a string containing UTF-8
$email-&gt;setBody('This is the body of the email');</code></pre>

<h4 id="fEmail-docs-InlineBodyTemplating">Inline Body Templating</h4>

<p>
The <a href="#fEmail-api-setBody"><code>setBody()</code></a> method can also take a second parameter, <code>$unindent_expand_constants</code>, which is a boolean. When this parameter is <code>TRUE</code>, the body will be unindented as much as possible, and will have all <code>{CONSTANT_NAME}</code> strings replaced with the constants value, if defined. This parameter is useful for inline generation of bodies where you dont want to deal with the issues of having a fully unindented end to a <code>HEREDOC</code> string.
</p>

<p>
For example, the following PHP:
</p>
<pre class="block php"><code>// Unindenting the body and exapanding curly-braced constant names
if ($email_address) {
    $email = new fEmail();
    $email-&gt;addRecipient($email_address);
    // 
    $email-&gt;setBody(&quot;
        Hello $name,
        
        Thanks for submitting your request, well get back to you as soon as we can!

        {EMAIL_SIGNATURE}
    &quot;, TRUE);
}</code></pre>

<p>
 would create the email body:
</p>
<pre><code>Hello John Smith,

Thanks for submitting your request, well get back to you as soon as we can!

Sincerely,
The ACME Co. Team</code></pre>

<p>
 Without the parameter, the body would be:
</p>
<pre><code> 
        Hello John Smith,

        Thanks for submitting your request, well get back to you as soon as we can!

        {EMAIL_SIGNATURE}
 </code></pre>

<p>
 The <code>HEREDOC</code> equivalent of our desired output would be:
</p>
<pre class="block php"><code>if ($email_address) {
    $email = new fEmail();
    // 
    $signature = EMAIL_SIGNATURE;
    $email-&gt;setBody(&lt;&lt;&lt;EOF
Hello $name,

Thanks for submitting your request, well get back to you as soon as we can!

$signature
EOF
    , TRUE);
}</code></pre>

<p>
 In short, the <code>$unindent_expand_constants</code> parameter allows for cleaner PHP with logical indentation levels.
</p>

<h4 id="fEmail-docs-LoadingaBodyTemplate">Loading a Body Template</h4>

<p>
When dealing with a more complex body example, or wishing to separate the email templates from your PHP, the method <a href="#fEmail-api-loadBody"><code>loadBody()</code></a> can be used. This methods accepts two parameters, the <code>$file</code> to load the body from and an array of <code>$replacements</code> to be performed.
</p>

<p>
The <code>$file</code> parameter can be either a file path or an <a href="#fFile">fFile</a> object. The <code>$replacements</code> parameter should be an associative array with the terms to search for being the keys and the strings to replace them with being the values.
</p>
<pre class="block php"><code>$email-&gt;loadBody(
    './email_templates/welcome.txt',
    array(
        '{NAME}'  =&gt; $name,
        '{LOGIN}' =&gt; $login
    )
);</code></pre>

<p>
 <em>Please note that the terms to search for do not have to be in any particular format, a simple <a class="ext-link" href="http://php.net/str_replace"><span class="icon"><code>str_replace()</code></span></a> call is used to do the replacements.</em>
</p>

<h3 id="fEmail-docs-HTMLBody">HTML Body</h3>

<p>
It is also possible to add an HTML version of the body by passing it to <a href="#fEmail-api-setHTMLBody"><code>setHTMLBody()</code></a>. This HTML content should be encoded using UTF-8:
</p>
<pre class="block php"><code>$email-&gt;setHTMLBody('&lt;p&gt;This it the HTML version of the body&lt;/p&gt;');</code></pre>

<h4 id="fEmail-docs-LoadinganHTMLBodyTemplate">Loading an HTML Body Template</h4>

<p>
Just like <a href="#fEmail-api-loadBody"><code>loadBody()</code></a> for the plaintext body, the HTML body can be loaded from a file via <a href="#fEmail-api-loadHTMLBody"><code>loadHTMLBody()</code></a>. This methods accepts two parameters, the <code>$file</code> to load the body from and an array of <code>$replacements</code> to be performed.
</p>

<p>
The <code>$file</code> parameter can be either a file path or an <a href="#fFile">fFile</a> object. The <code>$replacements</code> parameter should be an associative array with the terms to search for being the keys and the strings to replace them with being the values.
</p>
<pre class="block php"><code>$email-&gt;loadHTMLBody(
    './email_templates/welcome.html',
    array(
        '{NAME}'  =&gt; $name,
        '{LOGIN}' =&gt; $login
    )
);</code></pre>

<p>
 <em>Please note that the terms to search for do not have to be in any particular format, a simple <a class="ext-link" href="http://php.net/str_replace"><span class="icon"><code>str_replace()</code></span></a> call is used to do the replacements.</em>
</p>

<h3 id="fEmail-docs-Self-ContainedHTMLImagesRelatedFiles">Self-Contained HTML Images (Related Files)</h3>

<p>
When using an HTML body, it is possible to add files to the email that can be referenced in the HTML, but do not appear as an attachment. Such related files are added by the <a href="#fEmail-api-addRelatedFile"><code>addRelatedFile()</code></a> method. This method requires either one or two parameters: <code>$contents</code>, or <code>$contents</code> and <code>$filename</code>. If <code>$contents</code> is an <a href="#fFile">fFile</a> object, no <code>$filename</code> is necessary. A URL will be returned for direct embedding into HTML <code>src</code> or <code>href</code> attributes.
</p>
<pre class="block php"><code>$logo_url = $email-&gt;addRelatedFile(new fFile('./images/logo.gif'));
$email-&gt;setHTMLBody(&quot;&lt;p&gt;Thanks for your input!&lt;/p&gt;&lt;p&gt;ACME Corp.&lt;img src='$logo_url' alt='ACME Corp'&gt;&lt;/p&gt;&quot;);</code></pre>

<p>
 There is an optional third parameter, <code>$mime_type</code>, which can be used to fix incorrect detection of the mime type of a related file.
</p>
<pre class="block php"><code>$logo_url = $email-&gt;addRelatedFile(new fFile('./images/logo.gif'), 'email_logo.gif', 'image/gif');</code></pre>

<h3 id="fEmail-docs-Attachments">Attachments</h3>

<p>
Attachments can be added to an email by calling the method <a href="#fEmail-api-addAttachment"><code>addAttachment()</code></a>. The method requires either one or two parameters: <code>$contents</code>, or <code>$contents</code> and <code>$filename</code>. If <code>$contents</code> is an <a href="#fFile">fFile</a> object, no <code>$filename</code> is necessary.
</p>
<pre class="block php"><code>foreach ($result as $row) {
    $csv_contents .= join(&quot;,&quot;, $row) . &quot;\n&quot;;
}

// Pass in the contents of the file, plus a filename for it
$email-&gt;addAttachment($csv_contents, 'report.csv');

// Passing an fFile object
$email-&gt;addAttachment(new fFile('./report.pdf'));</code></pre>

<p>
 There is an optional third parameter, <code>$mime_type</code>, which can be used to fix incorrect detection of the mime type of an attachment.
</p>
<pre class="block php"><code>$email-&gt;addAttachment($file_contents, 'filename.tab', 'text/csv');</code></pre>

<p>
 There is no limit to the number of attachments.
</p>

<h3 id="fEmail-docs-SMIMEEncryptionandSigning">S/MIME Encryption and Signing</h3>

<p>
The fEmail class provides support for encrypting and signing messages using S/MIME. To encrypt a message, the PEM-encoded public certificate will be needed. To sign a message, the PEM-encoded private key will be needed. To encrypt and sign you will need both (but not for the user). Please see <a href="#ObtainingaSecureCertificateKeyPair-docs">Obtaining a Secure Certificate/Key Pair</a> for information about how to get the necessary files.
</p>

<p>
To encrypt a message, call the method <a href="#fEmail-api-encrypt"><code>encrypt()</code></a> and pass the path to the recipients PEM-encoded public certificate:
</p>
<pre class="block php"><code>$email-&gt;encrypt('/path/to/recipients.cer');</code></pre>

<p>
 To sign a message, call <a href="#fEmail-api-sign"><code>sign()</code></a> and pass in the senders public certificate path, private key path and private key password (if applicable):
</p>
<pre class="block php"><code>$email-&gt;sign('/path/to/senders.cer', '/path/to/senders.key', 'key_password');</code></pre>

<p>
 If you call both <code>sign()</code> and <code>encrypt()</code> (in either order), the message will be signed, then encrypted and then signed again. This is the most secure method, however certain older email clients may not open such emails. 
</p>

<h3 id="fEmail-docs-Sending">Sending</h3>

<p>
To send an email, simply call the <a href="#fEmail-api-send"><code>send()</code></a> method.
</p>
<pre class="block php"><code>$message_id = $email-&gt;send();</code></pre>

<p>
 The return value is the generated <code>Message-ID</code> header for the email, which can be used with the <code>In-Reply-To</code> header for tracking replies. <em>The <a href="#fMailbox">fMailbox</a> class provides functionality for checking and parsing email.</em>
</p>

<h3 id="fEmail-docs-CustomHeaders">Custom Headers</h3>

<p>
If there is a need to add custom headers to an email message, the method <a href="#fEmail-api-addCustomHeader"><code>addCustomHeader()</code></a> will accept the header <code>$name</code> and <code>$value</code>. The <code>$value</code> should be a plain string - the method will handle any necessary encoding or line wrapping necessary to keep the headers standards-compliant.
</p>
<pre class="block php"><code>$email-&gt;addCustomHeader('X-My-Header', 'This is the value I want to send!');</code></pre>

<p>
 It is possible to set multiple headers at once by passing an associative array to <a href="#fEmail-api-addCustomHeader"><code>addCustomHeader()</code></a>.
</p>
<pre class="block php"><code>// Set headers that some programs use to indicate priority
$email-&gt;addCustomHeader(array(
    'X-Priority' =&gt; '1',
    'Importance' =&gt; 'High'
));</code></pre>

<h3 id="fEmail-docs-FixingFormattingIssues">Fixing Formatting Issues</h3>

<p>
On some linux/unix server running <a class="ext-link" href="http://en.wikipedia.org/wiki/Qmail"><span class="icon">qmail</span></a> as the sendmail replacement, you may experience issues with emails looking corrupted to the recipients. This will often take the form of equal signs (=) appearing throughout the content and lines being wrapped in odd places.
</p>

<p>
The technical cause of the issue is that the qmail sendmail binary is automatically replacing every line feed (\n) with a CR-LF (\r\n) because the email specifications require emails use CR-LF and linux uses LF as the line ending. Qmail is trying to ensure you are sending emails that meet specifications, however it is not checking to see if the email already has the proper line endings.
</p>

<p>
The first way to try and solve this issue is to use <a href="#fSMTP">fSMTP</a> and connect to the SMTP server on <code>localhost</code>. This by-passes the command-line interface to qmail:
</p>
<pre class="block php"><code>$smtp = new fSMTP('localhost');
$email-&gt;send($smtp);</code></pre>

<p>
 If that is not possible, the static method <a href="#fEmail-api-fixQmail"><code>fixQmail()</code></a> should fix the issue. On servers where <code>open_basedir</code> and <code>safe_mode</code> are not in effect, fEmail will make a commandline call to sendmail and will replace all CR-LF with just LF. If that is not possible, fEmail will simply replace all CR-LFs with LF, however emails with long headers may still have issues. 
</p>

<p>
Normally you would only enable this fix if you experience the issue. Since the fix affects all instances of fEmail, youll normally want to call it in a configuration file.
</p>
<pre class="block php"><code>fEmail::fixQmail();</code></pre>

<h3 id="fEmail-docs-ValidatingEmailAddresses">Validating Email Addresses</h3>

<p>
In certain situations it may be necessary to validate an email address when not using <a href="#fValidation">fValidation</a> or <a href="#fORMValidation">fORMValidation</a> with the ORM. The fEmail class provides two regular expression constants to help with the task.
</p>

<p>
These regular expressions are designed to fully match the <code>mailbox</code> specification of <a class="ext-link" href="http://tools.ietf.org/html/rfc2822#section-3.4"><span class="icon">RFC2822 Section 3.4</span></a> <strong>except</strong> for allowing comments and folding white space. Quoted strings <strong>are</strong> supported along with the <code>+</code>, <code>-</code> and other special characters.
</p>

<p>
Below is an example of some of the various <em>valid</em> email address formats that are supported:
</p>
<pre><code># regular address
will@example.com

# with + suffix
will+foo@example.com

# with - suffix
will-foo@example.com

# periods
will.foo@example.com

# quoted strings
&quot;will foo&quot;@example.com

# combinations
&quot;will foo&quot;.bar+baz@example.com</code></pre>

<p>
The two constants are <a href="#fEmail-api-EMAIL_REGEX"><code>EMAIL_REGEX</code></a> and <a href="#fEmail-api-NAME_EMAIL_REGEX"><code>NAME_EMAIL_REGEX</code></a>. <code>EMAIL_REGEX</code> will match an email address, while <code>NAME_EMAIL_REGEX</code> will match a <code>name &lt;email&gt;</code> string.
</p>

<p>
<code>EMAIL_REGEX</code> captures 3 subpatterns in the following format:
</p>

<ul>
<li>!<a href="0">0</a>: The whole email address</li>
<li>!<a href="1">1</a>: The part of the email before the @</li>
<li>!<a href="2">2</a>: The part of the email after the @</li>
</ul>

<p>
For example:
</p>
<pre class="block php"><code>preg_match(fEmail::EMAIL_REGEX, 'will@example.com', $matches);

echo $matches[0] . &quot;\n&quot;;
echo $matches[1] . &quot;\n&quot;;
echo $matches[2];</code></pre>

<p>
 will output the following:
</p>
<pre><code>will@example.com
will
example.com</code></pre>

<p>
 <code>NAME EMAIL_REGEX</code> captures 5 subpatterns in the following format:
</p>

<ul>
<li>!<a href="0">0</a>: The whole name and email address</li>
<li>!<a href="1">1</a>: The name</li>
<li>!<a href="2">2</a>: The whole email address</li>
<li>!<a href="3">3</a>: The part of the email before the @</li>
<li>!<a href="4">4</a>: The part of the email after the @</li>
</ul>

<p>
For example:
</p>
<pre class="block php"><code>preg_match(fEmail::NAME_EMAIL_REGEX, 'Will &lt;will@example.com&gt;', $matches);

echo $matches[0] . &quot;\n&quot;;
echo $matches[1] . &quot;\n&quot;;
echo $matches[2] . &quot;\n&quot;;
echo $matches[3] . &quot;\n&quot;;
echo $matches[4];</code></pre>

<p>
 will output the following:
</p>
<pre><code>Will &lt;will@example.com&gt;
Will
will@example.com
will
example.com</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fEmail-api">fEmail API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fEmail">Class Documentation</a></li>
		<li><strong><a href="#fEmail-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="consts">
<h4><a href="#fEmail-api-class_consts">Constants</a></h4>
<ul>
    <li><a href="#fEmail-api-EMAIL_REGEX">EMAIL_REGEX</a></li>
    <li><a href="#fEmail-api-NAME_EMAIL_REGEX">NAME_EMAIL_REGEX</a></li>
  </ul>
</div>
<div class="methods static">
<h4><a href="#fEmail-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  	  	  	  	  	  	  	  			<li class="protected"><a href="#fEmail-api-combineNameEmail">combineNameEmail()</a></li>
	  			<li class="protected"><a href="#fEmail-api-compose">compose()</a></li>
	  	  			<li><a href="#fEmail-api-fixQmail">fixQmail()</a></li>
	  			<li class="protected"><a href="#fEmail-api-getFQDN">getFQDN()</a></li>
	  	  	  			<li class="protected"><a href="#fEmail-api-reset">reset()</a></li>
	  	  	  	  	  	  	  	  	  	  			<li class="protected"><a href="#fEmail-api-stringlike">stringlike()</a></li>
	  			<li><a href="#fEmail-api-unindentExpand">unindentExpand()</a></li>
	  </ul>
</div>
<div class="methods">
<h4><a href="#fEmail-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fEmail-api-__construct">__construct()</a></li>
	  			<li class="protected"><a href="#fEmail-api-__get">__get()</a></li>
	  			<li><a href="#fEmail-api-addAttachment">addAttachment()</a></li>
	  			<li><a href="#fEmail-api-addBCCRecipient">addBCCRecipient()</a></li>
	  			<li><a href="#fEmail-api-addCCRecipient">addCCRecipient()</a></li>
	  			<li><a href="#fEmail-api-addCustomHeader">addCustomHeader()</a></li>
	  			<li><a href="#fEmail-api-addRecipient">addRecipient()</a></li>
	  			<li><a href="#fEmail-api-addRelatedFile">addRelatedFile()</a></li>
	  			<li><a href="#fEmail-api-clearRecipients">clearRecipients()</a></li>
	  	  	  			<li><a href="#fEmail-api-encrypt">encrypt()</a></li>
	  	  	  			<li><a href="#fEmail-api-loadBody">loadBody()</a></li>
	  			<li><a href="#fEmail-api-loadHTMLBody">loadHTMLBody()</a></li>
	  	  			<li><a href="#fEmail-api-send">send()</a></li>
	  			<li><a href="#fEmail-api-setBody">setBody()</a></li>
	  			<li><a href="#fEmail-api-setBounceToEmail">setBounceToEmail()</a></li>
	  			<li><a href="#fEmail-api-setFromEmail">setFromEmail()</a></li>
	  			<li><a href="#fEmail-api-setHTMLBody">setHTMLBody()</a></li>
	  			<li><a href="#fEmail-api-setReplyToEmail">setReplyToEmail()</a></li>
	  			<li><a href="#fEmail-api-setSenderEmail">setSenderEmail()</a></li>
	  			<li><a href="#fEmail-api-setSubject">setSubject()</a></li>
	  			<li><a href="#fEmail-api-sign">sign()</a></li>
	  	  	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fConnectivityException">fConnectivityException</a></li>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fCryptography">fCryptography</a></li>
		<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
		<li><a href="#fFile">fFile</a></li>
		<li><a href="#fFilesystem">fFilesystem</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fUTF8">fUTF8</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fLoader">fLoader</a></li>
		<li><a href="#fMailbox">fMailbox</a></li>
		<li><a href="#fSMTP">fSMTP</a></li>
		<li><a href="#fValidation">fValidation</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b30</span></div>
<p class="short_description">Allows creating and sending a single email containing plaintext, HTML, attachments and S/MIME encryption</p>
<div class="description"><p>Please note that this class uses the <a class="ext-link" href="http://php.net/function.mail"><span class="icon"><tt>mail()</tt></span></a>  function by default. Developers that are sending multiple emails, or need  SMTP support, should use <a href="#fSMTP">fSMTP</a> with this class.</p><p>This class is implemented to use the UTF-8 character encoding. Please see  <a href="#UTF-8-docs">UTF-8</a> for more information.</p></div>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b30</th><td>Changed methods to return instance for method chaining <span class="date">9/12/11</span></td></tr><tr><th>1.0.0b29</th><td>Changed <a href="#fEmail-api-combineNameEmail"><tt>combineNameEmail()</tt></a> to be a static method and to be exposed publicly for use by other classes <span class="date">7/26/11</span></td></tr><tr><th>1.0.0b28</th><td>Fixed <a href="#fEmail-api-addAttachment"><tt>addAttachment()</tt></a> and <a href="#fEmail-api-addRelatedFile"><tt>addRelatedFile()</tt></a> to properly handle duplicate filenames <span class="date">5/17/11</span></td></tr><tr><th>1.0.0b27</th><td>Fixed a bug with generating FQDNs on some Windows machines <span class="date">2/24/11</span></td></tr><tr><th>1.0.0b26</th><td>Added addCustomerHeader() <span class="date">2/2/11</span></td></tr><tr><th>1.0.0b25</th><td>Fixed a bug with finding the FQDN on non-Windows machines <span class="date">1/19/11</span></td></tr><tr><th>1.0.0b24</th><td>Backwards Compatibility Break - the <tt>$contents</tt> parameter of <a href="#fEmail-api-addAttachment"><tt>addAttachment()</tt></a> is now first instead of third, <a href="#fEmail-api-addAttachment"><tt>addAttachment()</tt></a> will now accept <a href="#fFile">fFile</a> objects for the <tt>$contents</tt> parameter, added <a href="#fEmail-api-addRelatedFile"><tt>addRelatedFile()</tt></a> <span class="date">12/1/10</span></td></tr><tr><th>1.0.0b23</th><td>Fixed a bug on Windows where emails starting with a <tt>.</tt> would have the <tt>.</tt> removed <span class="date">9/11/10</span></td></tr><tr><th>1.0.0b22</th><td>Revamped the FQDN code and added <a href="#fEmail-api-getFQDN"><tt>getFQDN()</tt></a> <span class="date">9/7/10</span></td></tr><tr><th>1.0.0b21</th><td>Added a check to prevent permissions warnings when getting the FQDN on Windows machines <span class="date">9/2/10</span></td></tr><tr><th>1.0.0b20</th><td>Fixed <a href="#fEmail-api-send"><tt>send()</tt></a> to only remove the name of a recipient when dealing with the <tt>mail()</tt> function on Windows and to leave it when using <a href="#fSMTP">fSMTP</a> <span class="date">6/22/10</span></td></tr><tr><th>1.0.0b19</th><td>Changed <a href="#fEmail-api-send"><tt>send()</tt></a> to return the message id for the email, fixed the email regexes to require [] around IPs <span class="date">5/5/10</span></td></tr><tr><th>1.0.0b18</th><td>Fixed the name of the static method <a href="#fEmail-api-unindentExpand"><tt>unindentExpand()</tt></a> <span class="date">4/28/10</span></td></tr><tr><th>1.0.0b17</th><td>Added the static method <a href="#fEmail-api-unindentExpand"><tt>unindentExpand()</tt></a> <span class="date">4/26/10</span></td></tr><tr><th>1.0.0b16</th><td>Added support for sending emails via <a href="#fSMTP">fSMTP</a> <span class="date">4/20/10</span></td></tr><tr><th>1.0.0b15</th><td>Added the <tt>$unindent_expand_constants</tt> parameter to <a href="#fEmail-api-setBody"><tt>setBody()</tt></a>, added <a href="#fEmail-api-loadBody"><tt>loadBody()</tt></a> and <a href="#fEmail-api-loadHTMLBody"><tt>loadHTMLBody()</tt></a>, fixed HTML emails with attachments <span class="date">3/14/10</span></td></tr><tr><th>1.0.0b14</th><td>Changed <a href="#fEmail-api-send"><tt>send()</tt></a> to not double <tt>.</tt>s at the beginning of lines on Windows since it seemed to break things rather than fix them <span class="date">3/5/10</span></td></tr><tr><th>1.0.0b13</th><td>Fixed the class to work when safe mode is turned on <span class="date">10/23/09</span></td></tr><tr><th>1.0.0b12</th><td>Removed duplicate MIME-Version headers that were being included in S/MIME encrypted emails <span class="date">10/5/09</span></td></tr><tr><th>1.0.0b11</th><td>Updated to use the new <a href="#fValidationException">fValidationException</a> API <span class="date">9/17/09</span></td></tr><tr><th>1.0.0b10</th><td>Fixed a bug with sending both an HTML and a plaintext body <span class="date">6/18/09</span></td></tr><tr><th>1.0.0b9</th><td>Fixed a bug where the MIME headers were not being set for all emails <span class="date">6/12/09</span></td></tr><tr><th>1.0.0b8</th><td>Added the method <a href="#fEmail-api-clearRecipients"><tt>clearRecipients()</tt></a> <span class="date">5/29/09</span></td></tr><tr><th>1.0.0b7</th><td>Email names with UTF-8 characters are now properly encoded <span class="date">5/8/09</span></td></tr><tr><th>1.0.0b6</th><td>Fixed a bug where &lt;&gt; quoted email addresses in validation messages were not showing <span class="date">3/27/09</span></td></tr><tr><th>1.0.0b5</th><td>Updated for new <a href="#fCore">fCore</a> API <span class="date">2/16/09</span></td></tr><tr><th>1.0.0b4</th><td>The recipient error message in validate() no longer contains a typo <span class="date">2/9/09</span></td></tr><tr><th>1.0.0b3</th><td>Fixed a bug with missing content in the <a href="#fValidationException">fValidationException</a> thrown by validate() <span class="date">1/14/09</span></td></tr><tr><th>1.0.0b2</th><td>Fixed a few bugs with sending S/MIME encrypted/signed emails <span class="date">1/10/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/23/08</span></td></tr></table></div>
<div class="class_consts" id="fEmail-api-class_consts">
<h4>Constants</h4>
<!-- start constant -->
<h5 id="fEmail-api-EMAIL_REGEX" class="constant"><span class="resolution">::</span><span class="name">EMAIL_REGEX</span></h5>
<div class="constant">
			<div class="constant_description">
					<p>A regular expression to match an email address, exluding those with comments and folding whitespace</p>
				<p>The matches will be:   </p><ul><li><tt>[0]</tt>: The whole email address</li><li><tt>[1]</tt>: The name before the <tt>@</tt></li><li><tt>[2]</tt>: The domain/ip after the <tt>@</tt></li></ul>
		</div>
</div>
<!-- end constant -->
<!-- start constant -->
<h5 id="fEmail-api-NAME_EMAIL_REGEX" class="constant"><span class="resolution">::</span><span class="name">NAME_EMAIL_REGEX</span></h5>
<div class="constant">
			<div class="constant_description">
					<p>A regular expression to match a <tt>name &lt;email&gt;</tt> string, exluding those with comments and folding whitespace</p>
				<p>The matches will be:  </p><ul><li><tt>[0]</tt>: The whole name and email address</li><li><tt>[1]</tt>: The name</li><li><tt>[2]</tt>: The whole email address</li><li><tt>[3]</tt>: The email username before the <tt>@</tt></li><li><tt>[4]</tt>: The email domain/ip after the <tt>@</tt></li></ul>
		</div>
</div>
<!-- end constant -->
</div>
<div class="class_methods static" id="fEmail-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start protected method static -->
			<h5 id="fEmail-api-combineNameEmail" class="protected method static"><span class="resolution">::</span><span class="name">combineNameEmail()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Turns a name and email into a <tt>&quot;name&quot; &lt;email&gt;</tt> string, or just <tt>email</tt> if no name is provided</p>
								<p>This method will remove newline characters from the name and email, and  will remove any backslash (<tt>\</tt>) and double quote (<tt>&quot;</tt>) characters from  the name.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">combineNameEmail</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$email</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The name associated with the email address</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$email</td>
				<td class="param_description">The email address</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The '&quot;name&quot; &lt;email&gt;' or 'email' string
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fEmail-api-compose" class="protected method static"><span class="resolution">::</span><span class="name">compose()</span> <span class="visibility">protected</span></h5>
			<div class="protected method static">
							<div class="method_description">
									<p>Composes text using <a href="#fText">fText</a> if loaded</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">compose</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$component</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message to compose</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$component <em>[, ... ]</em></td>
				<td class="param_description">A string or number to insert into the message</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The composed and possible translated message
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fEmail-api-fixQmail" class="method static"><span class="resolution">::</span><span class="name">fixQmail()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets the class to try and fix broken qmail implementations that add <tt>\r</tt> to <tt>\r\n</tt></p>
								<p>Before trying to fix qmail with this method, please try using <a href="#fSMTP">fSMTP</a>  to connect to <tt>localhost</tt> and pass the <a href="#fSMTP">fSMTP</a> object to <a href="#fEmail-api-send"><tt>send()</tt></a>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">fixQmail</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fEmail-api-getFQDN" class="protected method static"><span class="resolution">::</span><span class="name">getFQDN()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns the fully-qualified domain name of the server</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getFQDN</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					The fully-qualified domain name of the server
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fEmail-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fEmail-api-stringlike" class="protected method static"><span class="resolution">::</span><span class="name">stringlike()</span> <span class="visibility">protected</span></h5>
			<div class="protected method static">
							<div class="method_description">
									<p>Returns <tt>TRUE</tt> for non-empty strings, numbers, objects, empty numbers and string-like numbers (such as <tt>0</tt>, <tt>0.0</tt>, <tt>'0'</tt>)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">stringlike</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value to check</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the value is string-like
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fEmail-api-unindentExpand" class="method static"><span class="resolution">::</span><span class="name">unindentExpand()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Takes a block of text, unindents it and replaces {CONSTANT} tokens with the constant's value</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">unindentExpand</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$text</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$text</td>
				<td class="param_description">The text to unindent and replace constants in</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The unindented text
				</p>
			</div>
			<!-- end method static -->
	</div>
<div class="class_methods" id="fEmail-api-class_methods">
<h4>Methods</h4>
			  			  									<!-- start method -->
			<h5 id="fEmail-api-__construct" class="method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Initializes <a href="#fEmail">fEmail</a> for creating message ids</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fEmail">fEmail</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fEmail-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fEmail-api-addAttachment" class="method"><span class="resolution">-></span><span class="name">addAttachment()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds an attachment to the email</p>
								<p>If a duplicate filename is detected, it will be changed to be unique.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fEmail">fEmail</a></span> <span class="php-identifier">addAttachment</span><span class="php-brackets">(</span> <span class="php-vartype">string|<a href="#fFile">fFile</a></span> <span class="php-var">$contents</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$filename</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$mime_type</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string|<a href="#fFile">fFile</a></td>
				<td class="param_name">$contents</td>
				<td class="param_description">The contents of the file</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$filename</td>
				<td class="param_description">The name to give the attachement - optional if <tt>$contents</tt> is an <a href="#fFile">fFile</a> object</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$mime_type</td>
				<td class="param_description">The mime type of the file - this allows overriding the mime type of the file if incorrectly detected</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The email object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fEmail-api-addBCCRecipient" class="method"><span class="resolution">-></span><span class="name">addBCCRecipient()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds a blind carbon copy (BCC) email recipient</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fEmail">fEmail</a></span> <span class="php-identifier">addBCCRecipient</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$email</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$email</td>
				<td class="param_description">The email address to BCC</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The recipient's name</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The email object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fEmail-api-addCCRecipient" class="method"><span class="resolution">-></span><span class="name">addCCRecipient()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds a carbon copy (CC) email recipient</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fEmail">fEmail</a></span> <span class="php-identifier">addCCRecipient</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$email</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$email</td>
				<td class="param_description">The email address to BCC</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The recipient's name</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The email object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fEmail-api-addCustomHeader" class="method"><span class="resolution">-></span><span class="name">addCustomHeader()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Allows adding a custom header to the email</p>
								<p>If the method is called multiple times with the same name, the last  value will be used.</p><p>Please note that this class will properly format the header, including  adding the <tt>:</tt> between the name and value and wrapping values that are  too long for a single line.</p>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fEmail">fEmail</a></span> <span class="php-identifier">addCustomHeader</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype"><a href="#fEmail">fEmail</a></span> <span class="php-identifier">addCustomHeader</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$headers</span> <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The name of the header</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value of the header</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$headers</td>
				<td class="param_description">An associative array of <tt>{name} =&gt; {value}</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The email object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fEmail-api-addRecipient" class="method"><span class="resolution">-></span><span class="name">addRecipient()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds an email recipient</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fEmail">fEmail</a></span> <span class="php-identifier">addRecipient</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$email</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$email</td>
				<td class="param_description">The email address to send to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The recipient's name</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The email object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fEmail-api-addRelatedFile" class="method"><span class="resolution">-></span><span class="name">addRelatedFile()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds a related file to the email, returning the <tt>Content-ID</tt> for use in HTML</p>
								<p>The purpose of a related file is to be able to reference it in part of  the HTML body. Image <tt>src</tt> URLs can reference a related file by starting  the URL with <tt>cid:</tt> and then inserting the <tt>Content-ID</tt>.</p><p>If a duplicate filename is detected, it will be changed to be unique.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">addRelatedFile</span><span class="php-brackets">(</span> <span class="php-vartype">string|<a href="#fFile">fFile</a></span> <span class="php-var">$contents</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$filename</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$mime_type</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string|<a href="#fFile">fFile</a></td>
				<td class="param_name">$contents</td>
				<td class="param_description">The contents of the file</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$filename</td>
				<td class="param_description">The name to give the attachement - optional if <tt>$contents</tt> is an <a href="#fFile">fFile</a> object</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$mime_type</td>
				<td class="param_description">The mime type of the file - this allows overriding the mime type of the file if incorrectly detected</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The fully-formed <tt>cid:</tt> URL for use in HTML <tt>src</tt> attributes
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fEmail-api-clearRecipients" class="method"><span class="resolution">-></span><span class="name">clearRecipients()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Removes all To, CC and BCC recipients from the email</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fEmail">fEmail</a></span> <span class="php-identifier">clearRecipients</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The email object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fEmail-api-encrypt" class="method"><span class="resolution">-></span><span class="name">encrypt()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the email to be encrypted with S/MIME</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fEmail">fEmail</a></span> <span class="php-identifier">encrypt</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$recipients_smime_cert_file</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$recipients_smime_cert_file</td>
				<td class="param_description">The file path to the PEM-encoded S/MIME certificate for the recipient</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The email object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fEmail-api-loadBody" class="method"><span class="resolution">-></span><span class="name">loadBody()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Loads the plaintext version of the email body from a file and applies replacements</p>
								<p>The should contain either ASCII or UTF-8 encoded text. Please see  <a href="#UTF-8-docs">UTF-8</a> for more information.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fEmail">fEmail</a></span> <span class="php-identifier">loadBody</span><span class="php-brackets">(</span> <span class="php-vartype">string|<a href="#fFile">fFile</a></span> <span class="php-var">$file</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$replacements</span><span class="php-code">=</span>array() <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string|<a href="#fFile">fFile</a></td>
				<td class="param_name">$file</td>
				<td class="param_description">The plaintext version of the email body</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$replacements</td>
				<td class="param_description">The method will search the contents of the file for each key and replace it with the corresponding value</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The email object, to allow for method chaining
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When no file was specified, the file does not exist or the path specified is not a file</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fEmail-api-loadHTMLBody" class="method"><span class="resolution">-></span><span class="name">loadHTMLBody()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Loads the plaintext version of the email body from a file and applies replacements</p>
								<p>The should contain either ASCII or UTF-8 encoded text. Please see  <a href="#UTF-8-docs">UTF-8</a> for more information.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fEmail">fEmail</a></span> <span class="php-identifier">loadHTMLBody</span><span class="php-brackets">(</span> <span class="php-vartype">string|<a href="#fFile">fFile</a></span> <span class="php-var">$file</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$replacements</span><span class="php-code">=</span>array() <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string|<a href="#fFile">fFile</a></td>
				<td class="param_name">$file</td>
				<td class="param_description">The plaintext version of the email body</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$replacements</td>
				<td class="param_description">The method will search the contents of the file for each key and replace it with the corresponding value</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The email object, to allow for method chaining
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When no file was specified, the file does not exist or the path specified is not a file</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fEmail-api-send" class="method"><span class="resolution">-></span><span class="name">send()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sends the email</p>
								<p>The return value is the message id, which should be included as the  <tt>Message-ID</tt> header of the email. While almost all SMTP servers will not  modify this value, testing has indicated at least one (smtp.live.com  for Windows Live Mail) does.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">send</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fSMTP">fSMTP</a></span> <span class="php-var">$connection</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fSMTP">fSMTP</a></td>
				<td class="param_name">$connection</td>
				<td class="param_description">The SMTP connection to send the message over</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The message id for the message - see method description for details
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When validate() throws an exception</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fEmail-api-setBody" class="method"><span class="resolution">-></span><span class="name">setBody()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the plaintext version of the email body</p>
								<p>This method accepts either ASCII or UTF-8 encoded text. Please see  <a href="#UTF-8-docs">UTF-8</a> for more information.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fEmail">fEmail</a></span> <span class="php-identifier">setBody</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$plaintext</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$unindent_expand_constants</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$plaintext</td>
				<td class="param_description">The plaintext version of the email body</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$unindent_expand_constants</td>
				<td class="param_description">If this is <tt>TRUE</tt>, the body will be unindented as much as possible and {CONSTANT_NAME} will be replaced with the value of the constant</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The email object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fEmail-api-setBounceToEmail" class="method"><span class="resolution">-></span><span class="name">setBounceToEmail()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds the email address the email will be bounced to</p>
								<p>This email address will be set to the <tt>Return-Path</tt> header.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fEmail">fEmail</a></span> <span class="php-identifier">setBounceToEmail</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$email</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$email</td>
				<td class="param_description">The email address to bounce to</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The email object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fEmail-api-setFromEmail" class="method"><span class="resolution">-></span><span class="name">setFromEmail()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds the <tt>From:</tt> email address to the email</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fEmail">fEmail</a></span> <span class="php-identifier">setFromEmail</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$email</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$email</td>
				<td class="param_description">The email address being sent from</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The from email user's name - unfortunately on windows this is ignored</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The email object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fEmail-api-setHTMLBody" class="method"><span class="resolution">-></span><span class="name">setHTMLBody()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the HTML version of the email body</p>
								<p>This method accepts either ASCII or UTF-8 encoded text. Please see  <a href="#UTF-8-docs">UTF-8</a> for more information.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fEmail">fEmail</a></span> <span class="php-identifier">setHTMLBody</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$html</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$html</td>
				<td class="param_description">The HTML version of the email body</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The email object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fEmail-api-setReplyToEmail" class="method"><span class="resolution">-></span><span class="name">setReplyToEmail()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds the <tt>Reply-To:</tt> email address to the email</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fEmail">fEmail</a></span> <span class="php-identifier">setReplyToEmail</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$email</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$email</td>
				<td class="param_description">The email address to reply to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The reply-to email user's name</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The email object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fEmail-api-setSenderEmail" class="method"><span class="resolution">-></span><span class="name">setSenderEmail()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds the <tt>Sender:</tt> email address to the email</p>
								<p>The <tt>Sender:</tt> header is used to indicate someone other than the <tt>From:</tt>  address is actually submitting the message to the network.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fEmail">fEmail</a></span> <span class="php-identifier">setSenderEmail</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$email</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$email</td>
				<td class="param_description">The email address the message is actually being sent from</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The sender email user's name</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The email object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fEmail-api-setSubject" class="method"><span class="resolution">-></span><span class="name">setSubject()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the subject of the email</p>
								<p>This method accepts either ASCII or UTF-8 encoded text. Please see  <a href="#UTF-8-docs">UTF-8</a> for more information.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fEmail">fEmail</a></span> <span class="php-identifier">setSubject</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$subject</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$subject</td>
				<td class="param_description">The subject of the email</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The email object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fEmail-api-sign" class="method"><span class="resolution">-></span><span class="name">sign()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the email to be signed with S/MIME</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fEmail">fEmail</a></span> <span class="php-identifier">sign</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$senders_smime_cert_file</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$senders_smime_pk_file</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$senders_smime_pk_password</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$senders_smime_cert_file</td>
				<td class="param_description">The file path to the sender's PEM-encoded S/MIME certificate</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$senders_smime_pk_file</td>
				<td class="param_description">The file path to the sender's S/MIME private key</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$senders_smime_pk_password</td>
				<td class="param_description">The password for the sender's S/MIME private key</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The email object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
					</div>		</section>
		</div>
		<section class="main">
<h2 id="fEmptySetException">fEmptySetException</h2>
<div class="sidebar">
<h3 id="fEmptySetException-docs-ClassResources" toc-skip="1">Class Resources </h3>

<ul>
<li><strong><a href="#fEmptySetException">Class Documentation</a></strong></li>
<li><a href="#fEmptySetException-api">API Reference</a></li>
</ul>

<h3 id="fEmptySetException-docs-ExceptionClasses" toc-skip="1">Exception Classes </h3>

<ul>
<li><a href="#fException">fException</a>
<ul>
<li><a href="#fExpectedException">fExpectedException</a>
<ul>
<li><a href="#fAuthorizationException">fAuthorizationException</a></li>
<li><strong>fEmptySetException</strong></li>
<li><a href="#fNoRemainingException">fNoRemainingException</a></li>
<li><a href="#fNoRowsException">fNoRowsException</a></li>
<li><a href="#fNotFoundException">fNotFoundException</a></li>
<li><a href="#fValidationException">fValidationException</a></li>
</ul>
</li>
<li><a href="#fUnexpectedException">fUnexpectedException</a>
<ul>
<li><a href="#fConnectivityException">fConnectivityException</a></li>
<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
<li><a href="#fProgrammerException">fProgrammerException</a></li>
<li><a href="#fSQLException">fSQLException</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<p>
fEmptySetException is a sub-class of <a href="#fExpectedException">fExpectedException</a> that indicates an <a href="#fRecordSet">fRecordSet</a> does not contain any records. This type of exception will only be thrown by Flourish code when requested via the <code>tossIfEmpty()</code> method. 
</p>

<p>
<em>This space intentionally left blank</em>
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fEmptySetException-api">fEmptySetException API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fEmptySetException">Class Documentation</a></li>
		<li><strong><a href="#fEmptySetException-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fExpectedException">fExpectedException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fRecordSet">fRecordSet</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b</span></div>
<p class="short_description">An exception when an <a href="#fRecordSet">fRecordSet</a> does not contain any elements</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="genealogy">	
	<h4>Genealogy</h4>
		<div class="class_tree">
		<h5>Class Tree</h5>
		<pre class="class_tree">Exception
   |
   --<a href="#fException">fException</a>
      |
      --<a href="#fExpectedException">fExpectedException</a>
         |
         --fEmptySetException</pre>
	</div>
		<div class="inherited_variables">
	<h5>Inherited Variables</h5>
		<dl>
		<dt class="protected">$code</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$file</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$line</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$message</dt>
	<dd class="protected"> </dd>
		<dt class="private">$previous</dt>
	<dd class="private"> </dd>
		<dt class="private">$string</dt>
	<dd class="private"> </dd>
		<dt class="private">$trace</dt>
	<dd class="private"> </dd>
		</dl>
		</div>
		<div class="inherited_methods">
	<h5>Inherited Methods</h5>
		<dl>
	  	  <dt class="public"><a href="#fException-api-__construct"><tt>fException::__construct()</tt></a></dt>
	  <dd class="public">Sets the message for the exception, allowing for string interpolation and internationalization</dd>
	  	  <dt class="public"><a href="#fException-api-__get"><tt>fException::__get()</tt></a></dt>
	  <dd class="public">All requests that hit this method should be requests for callbacks</dd>
	  	  <dt class="protected"><a href="#fException-api-compose"><tt>fException::compose()</tt></a></dt>
	  <dd class="protected">Composes text using <a href="#fText">fText</a> if loaded</dd>
	  	  <dt class="protected"><a href="#fException-api-dump"><tt>fException::dump()</tt></a></dt>
	  <dd class="protected">Creates a string representation of any variable using predefined strings for booleans, <tt>NULL</tt> and empty strings</dd>
	  	  <dt class="public"><a href="#fException-api-formatTrace"><tt>fException::formatTrace()</tt></a></dt>
	  <dd class="public">Gets the backtrace to currently called exception</dd>
	  	  <dt class="protected"><a href="#fException-api-getCSSClass"><tt>fException::getCSSClass()</tt></a></dt>
	  <dd class="protected">Returns the CSS class name for printing information about the exception</dd>
	  	  <dt class="protected"><a href="#fException-api-prepare"><tt>fException::prepare()</tt></a></dt>
	  <dd class="protected">Prepares content for output into HTML</dd>
	  	  <dt class="public"><a href="#fException-api-printMessage"><tt>fException::printMessage()</tt></a></dt>
	  <dd class="public">Prints the message inside of a div with the class being 'exception %THIS_EXCEPTION_CLASS_NAME%'</dd>
	  	  <dt class="public"><a href="#fException-api-printTrace"><tt>fException::printTrace()</tt></a></dt>
	  <dd class="public">Prints the backtrace to currently called exception inside of a pre tag with the class being 'exception %THIS_EXCEPTION_CLASS_NAME% trace'</dd>
	  	  <dt class="public"><a href="#fException-api-registerCallback"><tt>fException::registerCallback()</tt></a></dt>
	  <dd class="public">Adds a callback for when certain types of exceptions are created</dd>
	  	  <dt class="public"><a href="#fException-api-reorderMessage"><tt>fException::reorderMessage()</tt></a></dt>
	  <dd class="public">Reorders list items in the message based on simple string matching</dd>
	  	  <dt class="public"><a href="#fException-api-setMessage"><tt>fException::setMessage()</tt></a></dt>
	  <dd class="public">Allows the message to be overwriten</dd>
	  	  <dt class="public"><a href="#fException-api-splitMessage"><tt>fException::splitMessage()</tt></a></dt>
	  <dd class="public">Splits an exception with an HTML list into multiple strings each containing part of the original message</dd>
	  	</dl>
		<dl>
	  	  <dt class="public">constructor __construct ( [$message = ], [$code = ], [$previous = ] )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__clone (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__toString (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getCode (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getFile (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getLine (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getMessage (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getPrevious (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTrace (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTraceAsString (  )</dt>
	  <dd class="public"></dd>
	  	</dl>
		</div>
	</div>			</section>
		</div>
		<section class="main">
<h2 id="fEnvironmentException">fEnvironmentException</h2>
<div class="sidebar">
<h3 id="fEnvironmentException-docs-ClassResources" toc-skip="1">Class Resources </h3>

<ul>
<li><strong><a href="#fEnvironmentException">Class Documentation</a></strong></li>
<li><a href="#fEnvironmentException-api">API Reference</a></li>
</ul>

<h3 id="fEnvironmentException-docs-ExceptionClasses" toc-skip="1">Exception Classes </h3>

<ul>
<li><a href="#fException">fException</a>
<ul>
<li><a href="#fExpectedException">fExpectedException</a>
<ul>
<li><a href="#fAuthorizationException">fAuthorizationException</a></li>
<li><a href="#fEmptySetException">fEmptySetException</a></li>
<li><a href="#fNoRemainingException">fNoRemainingException</a></li>
<li><a href="#fNoRowsException">fNoRowsException</a></li>
<li><a href="#fNotFoundException">fNotFoundException</a></li>
<li><a href="#fValidationException">fValidationException</a></li>
</ul>
</li>
<li><a href="#fUnexpectedException">fUnexpectedException</a>
<ul>
<li><a href="#fConnectivityException">fConnectivityException</a></li>
<li><strong>fEnvironmentException</strong></li>
<li><a href="#fProgrammerException">fProgrammerException</a></li>
<li><a href="#fSQLException">fSQLException</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<p>
fEnvironmentException is a sub-class of <a href="#fUnexpectedException">fUnexpectedException</a> that indicates some sort of required code, extension or other server environment issue has prevented futher execution of the code. Examples of this type of exception being tossed include a missing PHP extension for cryptography, no image manipulation library present, or an outdated version of PHP being used.
</p>

<p>
<em>This space intentionally left blank</em>
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fEnvironmentException-api">fEnvironmentException API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fEnvironmentException">Class Documentation</a></li>
		<li><strong><a href="#fEnvironmentException-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fUnexpectedException">fUnexpectedException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fBuffer">fBuffer</a></li>
		<li><a href="#fCache">fCache</a></li>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fCryptography">fCryptography</a></li>
		<li><a href="#fDatabase">fDatabase</a></li>
		<li><a href="#fDirectory">fDirectory</a></li>
		<li><a href="#fEmail">fEmail</a></li>
		<li><a href="#fFile">fFile</a></li>
		<li><a href="#fImage">fImage</a></li>
		<li><a href="#fMailbox">fMailbox</a></li>
		<li><a href="#fORMFile">fORMFile</a></li>
		<li><a href="#fSMTP">fSMTP</a></li>
		<li><a href="#fSession">fSession</a></li>
		<li><a href="#fTemplating">fTemplating</a></li>
		<li><a href="#fTimestamp">fTimestamp</a></li>
		<li><a href="#fUpload">fUpload</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b</span></div>
<p class="short_description">An exception caused by an environment error such a file permissions</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="genealogy">	
	<h4>Genealogy</h4>
		<div class="class_tree">
		<h5>Class Tree</h5>
		<pre class="class_tree">Exception
   |
   --<a href="#fException">fException</a>
      |
      --<a href="#fUnexpectedException">fUnexpectedException</a>
         |
         --fEnvironmentException</pre>
	</div>
		<div class="inherited_variables">
	<h5>Inherited Variables</h5>
		<dl>
		<dt class="protected">$code</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$file</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$line</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$message</dt>
	<dd class="protected"> </dd>
		<dt class="private">$previous</dt>
	<dd class="private"> </dd>
		<dt class="private">$string</dt>
	<dd class="private"> </dd>
		<dt class="private">$trace</dt>
	<dd class="private"> </dd>
		</dl>
		</div>
		<div class="inherited_methods">
	<h5>Inherited Methods</h5>
		<dl>
	  	  <dt class="public"><a href="#fUnexpectedException-api-printMessage"><tt>fUnexpectedException::printMessage()</tt></a></dt>
	  <dd class="public">Prints out a generic error message inside of a <tt>div</tt> with the class being <tt>'exception {exception_class_name}'</tt></dd>
	  	</dl>
		<dl>
	  	  <dt class="public"><a href="#fException-api-__construct"><tt>fException::__construct()</tt></a></dt>
	  <dd class="public">Sets the message for the exception, allowing for string interpolation and internationalization</dd>
	  	  <dt class="public"><a href="#fException-api-__get"><tt>fException::__get()</tt></a></dt>
	  <dd class="public">All requests that hit this method should be requests for callbacks</dd>
	  	  <dt class="protected"><a href="#fException-api-compose"><tt>fException::compose()</tt></a></dt>
	  <dd class="protected">Composes text using <a href="#fText">fText</a> if loaded</dd>
	  	  <dt class="protected"><a href="#fException-api-dump"><tt>fException::dump()</tt></a></dt>
	  <dd class="protected">Creates a string representation of any variable using predefined strings for booleans, <tt>NULL</tt> and empty strings</dd>
	  	  <dt class="public"><a href="#fException-api-formatTrace"><tt>fException::formatTrace()</tt></a></dt>
	  <dd class="public">Gets the backtrace to currently called exception</dd>
	  	  <dt class="protected"><a href="#fException-api-getCSSClass"><tt>fException::getCSSClass()</tt></a></dt>
	  <dd class="protected">Returns the CSS class name for printing information about the exception</dd>
	  	  <dt class="protected"><a href="#fException-api-prepare"><tt>fException::prepare()</tt></a></dt>
	  <dd class="protected">Prepares content for output into HTML</dd>
	  	  <dt class="public"><a href="#fException-api-printMessage"><tt>fException::printMessage()</tt></a></dt>
	  <dd class="public">Prints the message inside of a div with the class being 'exception %THIS_EXCEPTION_CLASS_NAME%'</dd>
	  	  <dt class="public"><a href="#fException-api-printTrace"><tt>fException::printTrace()</tt></a></dt>
	  <dd class="public">Prints the backtrace to currently called exception inside of a pre tag with the class being 'exception %THIS_EXCEPTION_CLASS_NAME% trace'</dd>
	  	  <dt class="public"><a href="#fException-api-registerCallback"><tt>fException::registerCallback()</tt></a></dt>
	  <dd class="public">Adds a callback for when certain types of exceptions are created</dd>
	  	  <dt class="public"><a href="#fException-api-reorderMessage"><tt>fException::reorderMessage()</tt></a></dt>
	  <dd class="public">Reorders list items in the message based on simple string matching</dd>
	  	  <dt class="public"><a href="#fException-api-setMessage"><tt>fException::setMessage()</tt></a></dt>
	  <dd class="public">Allows the message to be overwriten</dd>
	  	  <dt class="public"><a href="#fException-api-splitMessage"><tt>fException::splitMessage()</tt></a></dt>
	  <dd class="public">Splits an exception with an HTML list into multiple strings each containing part of the original message</dd>
	  	</dl>
		<dl>
	  	  <dt class="public">constructor __construct ( [$message = ], [$code = ], [$previous = ] )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__clone (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__toString (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getCode (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getFile (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getLine (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getMessage (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getPrevious (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTrace (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTraceAsString (  )</dt>
	  <dd class="public"></dd>
	  	</dl>
		</div>
	</div>			</section>
		</div>
		<section class="main">
<h2 id="fException">fException</h2>
<div class="sidebar">
<h3 id="fException-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fException">Class Documentation</a></strong></li>
<li><a href="#fException-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fException-docs-Instantiation">Instantiation</a></li>
<li><a href="#fException-docs-Printing">Printing</a></li>
<li><a href="#fException-docs-Modification">Modification</a></li>
<li><a href="#fException-docs-ReorderingMessages">Reordering Messages</a></li>
<li><a href="#fException-docs-SplittingMessages">Splitting Messages</a></li>
<li><a href="#fException-docs-Backtraces">Backtraces</a></li>
</ul>

<h3 id="fException-docs-ExceptionClasses">Exception Classes </h3>

<ul>
<li><strong>fException</strong>
<ul>
<li><a href="#fExpectedException">fExpectedException</a>
<ul>
<li><a href="#fAuthorizationException">fAuthorizationException</a></li>
<li><a href="#fEmptySetException">fEmptySetException</a></li>
<li><a href="#fNoRemainingException">fNoRemainingException</a></li>
<li><a href="#fNoRowsException">fNoRowsException</a></li>
<li><a href="#fNotFoundException">fNotFoundException</a></li>
<li><a href="#fValidationException">fValidationException</a></li>
</ul>
</li>
<li><a href="#fUnexpectedException">fUnexpectedException</a>
<ul>
<li><a href="#fConnectivityException">fConnectivityException</a></li>
<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
<li><a href="#fProgrammerException">fProgrammerException</a></li>
<li><a href="#fSQLException">fSQLException</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<p>
fException is the base Flourish exception class. It supplements the standard Exception class methods most notably with the ability to easily print the exception to the screen, but it also adds the ability to change the exception message after the object is created.
</p>

<p>
Exceptions are used throughout Flourish in an attempt to fail as noisily and quickly as possible when the code can not repair the situations. This follows the <a class="ext-link" href="http://www.faqs.org/docs/artu/ch01s06.html#id2878538"><span class="icon">Rule of Repair</span></a> from the <a class="ext-link" href="http://www.faqs.org/docs/artu/"><span class="icon">Art of Unix Programming</span></a>.
</p>

<p>
The exceptions in Flourish purposefully use inheritance to allow for classification of exceptions when catching them. You probably dont ever really want to toss an fException, and normally wouldnt want to toss an <a href="#fExpectedException">fExpectedException</a> or <a href="#fUnexpectedException">fUnexpectedException</a>, but instead should use one of the specific sub-classes. However, when creating <code>catch</code> statements it may be beneficial to catch one of the generalized higher-level exception classes.
</p>

<p>
<em>To the right you will see a list of all of the Flourish exception classes.</em>
</p>

<h3 id="fException-docs-Instantiation">Instantiation</h3>

<p>
fException has a constructor that is compatible with a normal exception class, but also adds the ability to be able to perform <a class="ext-link" href="http://php.net/sprintf"><span class="icon"><code>sprintf()</code></span></a> interpolation and hooks in with the <a href="#fText">fText</a> class to allow for easy localization.
</p>

<p>
The constructor requires just a single parameter, the message to be thrown. If that message contains any formatting codes that are compatible with <code>sprintf()</code>, additional parameters will be used for the values. If an extra parameters is passed, it will be set as the exception code.
</p>

<p>
<em>Please note all of these example use <a href="#fProgrammerException">fProgrammerException</a> since fException is abstract.</em>
</p>
<pre class="block php"><code>// Simple usage
throw new fProgrammerException('The method specified does not exist');

// Using sprintf for interpolation
throw new fProgrammerException('The method specified, %s, does not exist', $method);

// Adding an exception code
throw new fProgrammerException('The method specified, %s, does not exist', $method, 1234);

// An exception code without interpolation
throw new fProgrammerException('The method specified does not exist', 1234);</code></pre>

<p>
 One of the main benefits of using interpolation is that the non-interpolated message will be passed to <a href="#fText-api-compose">fText::compose()</a> if <a href="#fText">fText</a> has been loaded, which allows for localization of exception messages. This technique is used throughout Flourish.
</p>

<h3 id="fException-docs-Printing">Printing</h3>

<p>
The method <a href="#fException-api-printMessage"><code>printMessage()</code></a> allows for easy display and formatting of the message. It will echo a <code>&lt;p&gt;</code> tag containing the message if the message has no block-level HTML tags, or a <code>&lt;div&gt;</code> tag if the message contains block-level HTML. The tag will have a <code>class</code> attribute that is set to <code>exception {exception_class_name}</code>.
</p>

<p>
The examples below use sub-classes of fException since it is abstract and thus can not be instantiated.
</p>
<pre class="block php"><code>$exception = new fValidationException('This is the message');
$exception-&gt;printMessage();

$exception2 = new fValidationException('&lt;p&gt;This is the message&lt;/p&gt;');
$exception2-&gt;printMessage();</code></pre>

<p>
 Would output the following HTML:
</p>
<pre class="block html"><code>&lt;p class=&quot;exception validation_exception&quot;&gt;
    This is the message
&lt;/p&gt;
&lt;div class=&quot;exception validation_exception&quot;&gt;
    &lt;p&gt;This is the message&lt;/p&gt;
&lt;/div&gt;</code></pre>

<h3 id="fException-docs-Modification">Modification</h3>

<p>
Sometimes when handling an error you need to modify the message in an exception, without losing the backtrace information. If you were to get the message from one exception, modify it, and then create a new exception with that message, the whole backtrace would be lost.
</p>

<p>
In these situations it is essential to be able to modify the exception message. This can be done by passing the new message to the method <a href="#fException-api-setMessage"><code>setMessage()</code></a>. Here is an example:
</p>
<pre class="block php"><code>$exception = new fValidationException('This is a test');
$exception-&gt;setMessage('This is the test');
$exception-&gt;printMessage();</code></pre>

<p>
 The PHP above would echo the following HTML:
</p>
<pre class="block html"><code>&lt;p class=&quot;exception validation_exception&quot;&gt;
    This is the test
&lt;/p&gt;</code></pre>

<h3 id="fException-docs-ReorderingMessages">Reordering Messages</h3>

<p>
Most of the validation in Flourish, such as <a href="#fValidation">fValidation</a> and <a href="#fActiveRecord">fActiveRecord</a>, create exception messages containing a list of all of the encountered errors. Sometimes it is necessary to reorder the list of errors so they coincide with the order of HTML form inputs.
</p>

<p>
The method <a href="#fException-api-reorderMessage"><code>reorderMessage()</code></a> accepts any number of strings to match, and reorders the list items in the message based on the parameter order. Below is an example to show how it works. First, assume the exception contains the following message:
</p>
<pre class="block html"><code>&lt;p&gt;The following problems were found:&lt;/p&gt;
&lt;ul&gt;
    &lt;li&gt;Address: Please enter a value&lt;/li&gt;
    &lt;li&gt;Email: Please enter a value&lt;/li&gt;
    &lt;li&gt;City: Please enter a value&lt;/li&gt;
    &lt;li&gt;State: Please enter a value&lt;/li&gt;
    &lt;li&gt;Zip Code: Please enter a value&lt;/li&gt;
    &lt;li&gt;Last Name: Please enter a value&lt;/li&gt;
    &lt;li&gt;First Name: Please enter a value&lt;/li&gt;
&lt;/ul&gt;</code></pre>

<p>
 The following PHP would reorder the list items:
</p>
<pre class="block php"><code>$exception-&gt;reorderMessage('First Name', 'Last', 'Email', 'Address');</code></pre>

<p>
 The exception message would then be changed to:
</p>
<pre class="block html"><code>&lt;p&gt;The following problems were found:&lt;/p&gt;
&lt;ul&gt;
    &lt;li&gt;First Name: Please enter a value&lt;/li&gt;
    &lt;li&gt;Last Name: Please enter a value&lt;/li&gt;
    &lt;li&gt;Email: Please enter a value&lt;/li&gt;
    &lt;li&gt;Address: Please enter a value&lt;/li&gt;
    &lt;li&gt;City: Please enter a value&lt;/li&gt;
    &lt;li&gt;State: Please enter a value&lt;/li&gt;
    &lt;li&gt;Zip Code: Please enter a value&lt;/li&gt;
&lt;/ul&gt;</code></pre>

<p>
 Any list items that do not match a parameter will be included at the end of the list, in the same order they existed in the original message.
</p>

<p>
The matching of strings in done in a case-sensitive manner and the most-specific strings are matched first. Thus if the parameters to <code>reorderMessage()</code> were <code>Name</code> and <code>Last Name</code>, <code>Last Name:</code> would be matched first and placed as the second list item. Then the <code>Name</code> string would match against <code>First Name:</code> and it would be set as the first list item.
</p>

<h3 id="fException-docs-SplittingMessages">Splitting Messages</h3>

<p>
Most of the validation in Flourish, such as <a href="#fValidation">fValidation</a> and <a href="#fActiveRecord">fActiveRecord</a>, create exception messages containing a list of all of the encountered errors. These lists are built using HTML unordered lists. Sometimes when creating long forms, it is more usable to split the messages into multiple parts to display in the appropriate places on the form.
</p>

<p>
The instance method <a href="#fException-api-splitMessage"><code>splitMessage()</code></a> accepts any number of arrays of strings, <code>$list_item_matches</code>, and returns an array of filtered messages. Any list item that contains one of the strings will be included in the corresponding filtered message, with the non-list portions of the message also being included in each filtered message.
</p>

<p>
The easiest way to understand the functionality is to see an example. First, assume the exception contains the following message:
</p>
<pre class="block html"><code>&lt;p&gt;The following problems were found:&lt;/p&gt;
&lt;ul&gt;
    &lt;li&gt;First Name: Please enter a value&lt;/li&gt;
    &lt;li&gt;Last Name: Please enter a value&lt;/li&gt;
    &lt;li&gt;Email: Please enter a value&lt;/li&gt;
    &lt;li&gt;Address: Please enter a value&lt;/li&gt;
    &lt;li&gt;City: Please enter a value&lt;/li&gt;
    &lt;li&gt;State: Please enter a value&lt;/li&gt;
    &lt;li&gt;Zip Code: Please enter a value&lt;/li&gt;
&lt;/ul&gt;</code></pre>

<p>
 Passing these two <code>$list_item_matches</code> to <code>splitMessage()</code> would split the exception into two strings:
</p>
<pre class="block php"><code>list ($name_exception, $address_exception) = $exception-&gt;splitMessage(
    array('First Name', 'Last Name', 'Email'),
    array('Address', 'City', 'State', 'Zip Code')
);</code></pre>

<p>
 The resulting strings would be:
</p>
<pre class="block html"><code>&lt;p&gt;The following problems were found:&lt;/p&gt;
&lt;ul&gt;
    &lt;li&gt;First Name: Please enter a value&lt;/li&gt;
    &lt;li&gt;Last Name: Please enter a value&lt;/li&gt;
    &lt;li&gt;Email: Please enter a value&lt;/li&gt;
&lt;/ul&gt;</code></pre>

<p>
 and
</p>
<pre class="block html"><code>&lt;p&gt;The following problems were found:&lt;/p&gt;
&lt;ul&gt;
    &lt;li&gt;Address: Please enter a value&lt;/li&gt;
    &lt;li&gt;City: Please enter a value&lt;/li&gt;
    &lt;li&gt;State: Please enter a value&lt;/li&gt;
    &lt;li&gt;Zip Code: Please enter a value&lt;/li&gt;
&lt;/ul&gt;</code></pre>

<p>
 Notice that the resulting strings will contain the list items in the same order that the strings are set to the <code>$list_item_matches</code> arrays. This allows re-ordering the list items while also filtering them.
</p>

<p>
It is possible to pass any number of <code>$list_item_matches</code> to <code>splitMessage()</code>, resulting in an equal number of strings in the array result.
</p>

<p>
If no list items are found in the message, the first value in the returned array will contain the original message and all other array values will be an empty string.
</p>

<h3 id="fException-docs-Backtraces">Backtraces</h3>

<p>
Every exception that is thrown include a full backtrace of all of the function and methods calls that lead up to the point when the exception was thrown. The base Exception class includes two methods to access the backtrace, <code>getTrace()</code> and <code>getTraceAsString()</code>. <code>getTrace()</code> returns an array of the information for each step in the backtrace, while <code>getTraceAsString()</code> formats all of the backtrace information into a string.
</p>

<p>
fException includes two methods to supplement the built-in backtrace support, <a href="#fException-api-formatTrace"><code>formatTrace()</code></a> and <a href="#fException-api-printTrace"><code>printTrace()</code></a>. <code>formatTrace()</code> takes the formatted backtrace string and modifies it to be a little more readable. Below is an example of the type of output created.
</p>
<pre><code>{doc_root}/example.php(326): fActiveRecord-&gt;store()
{doc_root}/inc/classes/trunk/classes/fActiveRecord.php(1386): fActiveRecord-&gt;validate()
{doc_root}/inc/classes/trunk/classes/fActiveRecord.php(1564): fCore::toss('fValidationExce...', 'The followin...')</code></pre>

<p>
 The method <a href="#fException-api-printTrace"><code>printTrace()</code></a> takes the formatted trace and displays it inside of a <code>pre</code> tag with CSS classes in the format <code>exception {exception_class_name} trace</code>.
</p>
<pre class="block html"><code>&lt;pre class=&quot;exception validation_exception trace&quot;&gt;
{doc_root}/example.php(326): fActiveRecord-&gt;store()
{doc_root}/inc/classes/trunk/classes/fActiveRecord.php(1386): fActiveRecord-&gt;validate()
{doc_root}/inc/classes/trunk/classes/fActiveRecord.php(1564): fCore::toss('fValidationExce...', 'The followin...')
&lt;/pre&gt;</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fException-api">fException API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fException">Class Documentation</a></li>
		<li><strong><a href="#fException-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fException-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  			<li class="protected"><a href="#fException-api-compose">compose()</a></li>
	  			<li class="protected"><a href="#fException-api-dump">dump()</a></li>
	  	  	  	  	  	  			<li><a href="#fException-api-registerCallback">registerCallback()</a></li>
	  	  	  	  </ul>
</div>
<div class="methods">
<h4><a href="#fException-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fException-api-__construct">__construct()</a></li>
	  			<li class="protected"><a href="#fException-api-__get">__get()</a></li>
	  	  	  			<li><a href="#fException-api-formatTrace">formatTrace()</a></li>
	  			<li class="protected"><a href="#fException-api-getCSSClass">getCSSClass()</a></li>
	  			<li class="protected"><a href="#fException-api-prepare">prepare()</a></li>
	  			<li><a href="#fException-api-printMessage">printMessage()</a></li>
	  			<li><a href="#fException-api-printTrace">printTrace()</a></li>
	  	  			<li><a href="#fException-api-reorderMessage">reorderMessage()</a></li>
	  			<li><a href="#fException-api-setMessage">setMessage()</a></li>
	  			<li><a href="#fException-api-splitMessage">splitMessage()</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fExpectedException">fExpectedException</a></li>
		<li><a href="#fORM">fORM</a></li>
		<li><a href="#fUnexpectedException">fUnexpectedException</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">abstract class</span>,
		<span class="version">v1.0.0b8</span></div>
<p class="short_description">An exception that allows for easy l10n, printing, tracing and hooking</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b8</th><td>Added a missing line of backtrace to <a href="#fException-api-formatTrace"><tt>formatTrace()</tt></a> <span class="date">6/28/09</span></td></tr><tr><th>1.0.0b7</th><td>Updated <a href="#fException-api-__construct"><tt>__construct()</tt></a> to no longer require a message, like the Exception class, and allow for non-integer codes <span class="date">6/26/09</span></td></tr><tr><th>1.0.0b6</th><td>Fixed <a href="#fException-api-splitMessage"><tt>splitMessage()</tt></a> so that the original message is returned if no list items are found, added <a href="#fException-api-reorderMessage"><tt>reorderMessage()</tt></a> <span class="date">6/2/09</span></td></tr><tr><th>1.0.0b5</th><td>Added <a href="#fException-api-splitMessage"><tt>splitMessage()</tt></a> to replace <a href="#fCRUD">fCRUD</a>removeListItems() and fCRUD::reorderListItems() <span class="date">5/8/09</span></td></tr><tr><th>1.0.0b4</th><td>Added a check to <a href="#fException-api-__construct"><tt>__construct()</tt></a> to ensure that the <tt>$code</tt> parameter is numeric <span class="date">5/4/09</span></td></tr><tr><th>1.0.0b3</th><td>Fixed a bug with <a href="#fException-api-printMessage"><tt>printMessage()</tt></a> messing up some HTML messages <span class="date">3/27/09</span></td></tr><tr><th>1.0.0b2</th><td><a href="#fException-api-compose"><tt>compose()</tt></a> more robustly handles <tt>$components</tt> passed as an array, <a href="#fException-api-__construct"><tt>__construct()</tt></a> now detects stray <tt>%</tt> characters <span class="date">2/5/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="genealogy">	
	<h4>Genealogy</h4>
		<div class="class_tree">
		<h5>Class Tree</h5>
		<pre class="class_tree">Exception
   |
   --fException</pre>
	</div>
		<div class="child_classes">
	<h5>Child Classes</h5>
	<dl>
		<dt><a href="#fExpectedException">fExpectedException</a></dt>
	<dd>An exception that should be handled by the display code</dd>
		<dt><a href="#fUnexpectedException">fUnexpectedException</a></dt>
	<dd>An exception that should probably not be handled by the display code, fCore::enableExceptionHandler() is recommended</dd>
		</dl>
	</div>
		<div class="inherited_variables">
	<h5>Inherited Variables</h5>
		<dl>
		<dt class="protected">$code</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$file</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$line</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$message</dt>
	<dd class="protected"> </dd>
		<dt class="private">$previous</dt>
	<dd class="private"> </dd>
		<dt class="private">$string</dt>
	<dd class="private"> </dd>
		<dt class="private">$trace</dt>
	<dd class="private"> </dd>
		</dl>
		</div>
		<div class="inherited_methods">
	<h5>Inherited Methods</h5>
		<dl>
	  	  <dt class="public">constructor __construct ( [$message = ], [$code = ], [$previous = ] )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__clone (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__toString (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getCode (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getFile (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getLine (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getMessage (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getPrevious (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTrace (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTraceAsString (  )</dt>
	  <dd class="public"></dd>
	  	</dl>
		</div>
	</div>	
<div class="class_methods static" id="fException-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start protected method static -->
			<h5 id="fException-api-compose" class="protected method static"><span class="resolution">::</span><span class="name">compose()</span> <span class="visibility">protected</span></h5>
			<div class="protected method static">
							<div class="method_description">
									<p>Composes text using <a href="#fText">fText</a> if loaded</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">compose</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$component</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message to compose</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$component <em>[, ... ]</em></td>
				<td class="param_description">A string or number to insert into the message</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The composed and possible translated message
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fException-api-dump" class="protected method static"><span class="resolution">::</span><span class="name">dump()</span> <span class="visibility">protected</span></h5>
			<div class="protected method static">
							<div class="method_description">
									<p>Creates a string representation of any variable using predefined strings for booleans, <tt>NULL</tt> and empty strings</p>
								<p>The string output format of this method is very similar to the output of  <a class="ext-link" href="http://php.net/print_r"><span class="icon"><tt>print_r()</tt></span></a> except that the following values  are represented as special strings:    </p><ul><li><tt>TRUE</tt>: <tt>'{true}'</tt></li><li><tt>FALSE</tt>: <tt>'{false}'</tt></li><li><tt>NULL</tt>: <tt>'{null}'</tt></li><li><tt>''</tt>: <tt>'{empty_string}'</tt></li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">dump</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$data</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$data</td>
				<td class="param_description">The value to dump</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The string representation of the value
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fException-api-registerCallback" class="method static"><span class="resolution">::</span><span class="name">registerCallback()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Adds a callback for when certain types of exceptions are created</p>
								<p>The callback will be called when any exception of this class, or any  child class, specified is tossed. A single parameter will be passed  to the callback, which will be the exception object.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">registerCallback</span><span class="php-brackets">(</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$exception_type</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$exception_type</td>
				<td class="param_description">The type of exception to call the callback for</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
				</div>
<div class="class_methods" id="fException-api-class_methods">
<h4>Methods</h4>
			  			  									<!-- start method -->
			<h5 id="fException-api-__construct" class="method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the message for the exception, allowing for string interpolation and internationalization</p>
								<p>The <tt>$message</tt> can contain any number of formatting placeholders for  string and number interpolation via <a class="ext-link" href="http://php.net/sprintf"><span class="icon"><tt>sprintf()</tt></span></a>.  Any <tt>%</tt> signs that do not appear to be part of a valid formatting  placeholder will be automatically escaped with a second <tt>%</tt>.</p><p>The following aspects of valid <tt>sprintf()</tt> formatting codes are not  accepted since they are redundant and restrict the non-formatting use of  the <tt>%</tt> sign in exception messages:</p><ul><li><tt>% 2d</tt>: Using a literal space as a padding character - a space will be used if no padding character is specified</li><li><tt>%'.d</tt>: Providing a padding character but no width - no padding will be applied without a width</li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fException">fException</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">=</span>''<span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$component</span> [<span class="php-code">, ... </span>]<span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$code</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message for the exception. This accepts a subset of <a class="ext-link" href="http://php.net/sprintf"><span class="icon"><tt>sprintf()</tt></span></a> strings - see method description for more details.</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$component <em>[, ... ]</em></td>
				<td class="param_description">A string or number to insert into the message</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$code</td>
				<td class="param_description">The exception code to set</td>
			  </tr>
						</table>
			</div>
							<h6>Overridden By</h6>
				<div class="overridden">
					<dl>
												<dt><a href="#fValidationException-api-__construct"><tt>fValidationException::__construct()</tt></a></dt>
												<dd>Sets the message for the exception, allowing for custom formatting beyond <a href="#fException">fException</a></dd>
																	</dl>
				</div>
							<h6>Overrides</h6>
				<div class="overrides">
					<dl>
						<dt>Exception::constructor __construct ( [$message = ], [$code = ], [$previous = ] )</dt>
											</dl>
				</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fException-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fException-api-formatTrace" class="method"><span class="resolution">-></span><span class="name">formatTrace()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the backtrace to currently called exception</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">formatTrace</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 A nicely formatted backtrace to this exception
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fException-api-getCSSClass" class="protected method"><span class="resolution">-></span><span class="name">getCSSClass()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Returns the CSS class name for printing information about the exception</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">getCSSClass</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fException-api-prepare" class="protected method"><span class="resolution">-></span><span class="name">prepare()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Prepares content for output into HTML</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">prepare</span><span class="php-brackets">(</span> <span class="php-vartype"></span> <span class="php-var">$content</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"></td>
				<td class="param_name">$content</td>
				<td class="param_description"></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The prepared content
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fException-api-printMessage" class="method"><span class="resolution">-></span><span class="name">printMessage()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Prints the message inside of a div with the class being 'exception %THIS_EXCEPTION_CLASS_NAME%'</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">printMessage</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
							<h6>Overridden By</h6>
				<div class="overridden">
					<dl>
												<dt><a href="#fUnexpectedException-api-printMessage"><tt>fUnexpectedException::printMessage()</tt></a></dt>
												<dd>Prints out a generic error message inside of a <tt>div</tt> with the class being <tt>'exception {exception_class_name}'</tt></dd>
																	</dl>
				</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fException-api-printTrace" class="method"><span class="resolution">-></span><span class="name">printTrace()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Prints the backtrace to currently called exception inside of a pre tag with the class being 'exception %THIS_EXCEPTION_CLASS_NAME% trace'</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">printTrace</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fException-api-reorderMessage" class="method"><span class="resolution">-></span><span class="name">reorderMessage()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Reorders list items in the message based on simple string matching</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fException">fException</a></span> <span class="php-identifier">reorderMessage</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$match</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$match <em>[, ... ]</em></td>
				<td class="param_description">This should be a string to match to one of the list items - whatever the order this is in the parameter list will be the order of the list item in the adjusted message</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The exception object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fException-api-setMessage" class="method"><span class="resolution">-></span><span class="name">setMessage()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Allows the message to be overwriten</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setMessage</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$new_message</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$new_message</td>
				<td class="param_description">The new message for the exception</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fException-api-splitMessage" class="method"><span class="resolution">-></span><span class="name">splitMessage()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Splits an exception with an HTML list into multiple strings each containing part of the original message</p>
								<p>This method should be called with two or more parameters of arrays of  string to match. If any of the provided strings are matching in a list  item in the exception message, a new copy of the message will be created  containing just the matching list items.</p><p>Here is an exception message to be split:</p><pre class="block html"><code><p>The following problems were found:</p>
<ul>
    <li>First Name: Please enter a value</li>
    <li>Last Name: Please enter a value</li>
    <li>Email: Please enter a value</li>
    <li>Address: Please enter a value</li>
    <li>City: Please enter a value</li>
    <li>State: Please enter a value</li>
    <li>Zip Code: Please enter a value</li>
</ul></code></pre><p>The following PHP would split the exception into two messages:</p><pre class="block php"><code>list ($name_exception, $address_exception) = $exception->splitMessage(
    array('First Name', 'Last Name', 'Email'),
    array('Address', 'City', 'State', 'Zip Code')
);</code></pre><p>The resulting messages would be:</p><pre class="block html"><code><p>The following problems were found:</p>
<ul>
    <li>First Name: Please enter a value</li>
    <li>Last Name: Please enter a value</li>
    <li>Email: Please enter a value</li>
</ul></code></pre><p>and</p><pre class="block html"><code><p>The following problems were found:</p>
<ul>
    <li>Address: Please enter a value</li>
    <li>City: Please enter a value</li>
    <li>State: Please enter a value</li>
    <li>Zip Code: Please enter a value</li>
</ul></code></pre><p>If no list items match the strings in a parameter, the result will be  an empty string, allowing for simple display:</p><pre class="block php"><code>fHTML::show($name_exception, 'error');</code></pre><p>An empty string is returned when none of the list items matched the  strings in the parameter. If no list items are found, the first value in  the returned array will be the existing message and all other array  values will be an empty string.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">splitMessage</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$list_item_matches</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$list_item_matches <em>[, ... ]</em></td>
				<td class="param_description">An array of strings to filter the list items by, list items will be ordered in the same order as this array</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 This will contain an array of strings corresponding to the parameters passed - see method description for details
				</p>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="fExpectedException">fExpectedException</h2>
<div class="sidebar">
<h3 id="fExpectedException-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fExpectedException">Class Documentation</a></strong></li>
<li><a href="#fExpectedException-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fExpectedException-docs-ChildClasses">Child Classes</a></li>
</ul>

<h3 id="fExpectedException-docs-ExceptionClasses">Exception Classes </h3>

<ul>
<li><a href="#fException">fException</a>
<ul>
<li><strong>fExpectedException</strong>
<ul>
<li><a href="#fAuthorizationException">fAuthorizationException</a></li>
<li><a href="#fEmptySetException">fEmptySetException</a></li>
<li><a href="#fNoRemainingException">fNoRemainingException</a></li>
<li><a href="#fNoRowsException">fNoRowsException</a></li>
<li><a href="#fNotFoundException">fNotFoundException</a></li>
<li><a href="#fValidationException">fValidationException</a></li>
</ul>
</li>
<li><a href="#fUnexpectedException">fUnexpectedException</a>
<ul>
<li><a href="#fConnectivityException">fConnectivityException</a></li>
<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
<li><a href="#fProgrammerException">fProgrammerException</a></li>
<li><a href="#fSQLException">fSQLException</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<p>
fExpectedException is a sub-class of <a href="#fException">fException</a> meant to provide a common parent class for all exceptions that should be expected and handled in the site/application code. There are no special features or functionality for this class.
</p>

<h3 id="fExpectedException-docs-ChildClasses">Child Classes</h3>

<p>
Below is a list of all child classes that extend fExpectedException. If any of these classes are tossed by a Flourish method, there will be a <em>Throws:</em> entry in the methods API documentation. Note that exceptions that extend <a href="#fUnexpectedException">fUnexpectedException</a> are <em>not</em> documented in the same way.
</p>
<table><tbody>
<tr>
<td><strong>Class</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td><a href="#fEmptySetException">fEmptySetException</a></td>
<td>This type of exception indicates an <a href="#fRecordSet">fRecordSet</a> is empty, and will only be thrown when requested via <code>tossIfEmpty()</code>.</td>
</tr>
<tr>
<td><a href="#fNoRemainingException">fNoRemainingException</a></td>
<td>This type of exception indicates that a element was requested even though an iterator has iterated over all existing elements.</td>
</tr>
<tr>
<td><a href="#fNoRowsException">fNoRowsException</a></td>
<td>This type of exception is for use when no rows are returned by a SQL query.</td>
</tr>
<tr>
<td><a href="#fNotFoundException">fNotFoundException</a></td>
<td>This type of exception indicates that something could not be found and should include the item type in the message.</td>
</tr>
<tr>
<td><a href="#fValidationException">fValidationException</a></td>
<td>This type of exception indicates there was an error when checking data input. The message will indicate what could not be validated.</td>
</tr>
</tbody></table>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fExpectedException-api">fExpectedException API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fExpectedException">Class Documentation</a></li>
		<li><strong><a href="#fExpectedException-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fException">fException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fAuthorizationException">fAuthorizationException</a></li>
		<li><a href="#fEmptySetException">fEmptySetException</a></li>
		<li><a href="#fNoRemainingException">fNoRemainingException</a></li>
		<li><a href="#fNoRowsException">fNoRowsException</a></li>
		<li><a href="#fNotFoundException">fNotFoundException</a></li>
		<li><a href="#fORMFile">fORMFile</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
		<li><a href="#fXML">fXML</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b</span></div>
<p class="short_description">An exception that should be handled by the display code</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="genealogy">	
	<h4>Genealogy</h4>
		<div class="class_tree">
		<h5>Class Tree</h5>
		<pre class="class_tree">Exception
   |
   --<a href="#fException">fException</a>
      |
      --fExpectedException</pre>
	</div>
		<div class="child_classes">
	<h5>Child Classes</h5>
	<dl>
		<dt><a href="#fNoRemainingException">fNoRemainingException</a></dt>
	<dd>An exception caused when trying to get a value from an iterator and there is nothing left</dd>
		<dt><a href="#fEmptySetException">fEmptySetException</a></dt>
	<dd>An exception when an <a href="#fRecordSet">fRecordSet</a> does not contain any elements</dd>
		<dt><a href="#fAuthorizationException">fAuthorizationException</a></dt>
	<dd>An exception caused by an authorization error</dd>
		<dt><a href="#fValidationException">fValidationException</a></dt>
	<dd>An exception caused by a data not matching a rule or set of rules</dd>
		<dt><a href="#fNoRowsException">fNoRowsException</a></dt>
	<dd>An exception when no rows are returned from a SQL query</dd>
		<dt><a href="#fNotFoundException">fNotFoundException</a></dt>
	<dd>An exception when an <a href="#fActiveRecord">fActiveRecord</a> is not found in the database</dd>
		</dl>
	</div>
		<div class="inherited_variables">
	<h5>Inherited Variables</h5>
		<dl>
		<dt class="protected">$code</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$file</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$line</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$message</dt>
	<dd class="protected"> </dd>
		<dt class="private">$previous</dt>
	<dd class="private"> </dd>
		<dt class="private">$string</dt>
	<dd class="private"> </dd>
		<dt class="private">$trace</dt>
	<dd class="private"> </dd>
		</dl>
		</div>
		<div class="inherited_methods">
	<h5>Inherited Methods</h5>
		<dl>
	  	  <dt class="public"><a href="#fException-api-__construct"><tt>fException::__construct()</tt></a></dt>
	  <dd class="public">Sets the message for the exception, allowing for string interpolation and internationalization</dd>
	  	  <dt class="public"><a href="#fException-api-__get"><tt>fException::__get()</tt></a></dt>
	  <dd class="public">All requests that hit this method should be requests for callbacks</dd>
	  	  <dt class="protected"><a href="#fException-api-compose"><tt>fException::compose()</tt></a></dt>
	  <dd class="protected">Composes text using <a href="#fText">fText</a> if loaded</dd>
	  	  <dt class="protected"><a href="#fException-api-dump"><tt>fException::dump()</tt></a></dt>
	  <dd class="protected">Creates a string representation of any variable using predefined strings for booleans, <tt>NULL</tt> and empty strings</dd>
	  	  <dt class="public"><a href="#fException-api-formatTrace"><tt>fException::formatTrace()</tt></a></dt>
	  <dd class="public">Gets the backtrace to currently called exception</dd>
	  	  <dt class="protected"><a href="#fException-api-getCSSClass"><tt>fException::getCSSClass()</tt></a></dt>
	  <dd class="protected">Returns the CSS class name for printing information about the exception</dd>
	  	  <dt class="protected"><a href="#fException-api-prepare"><tt>fException::prepare()</tt></a></dt>
	  <dd class="protected">Prepares content for output into HTML</dd>
	  	  <dt class="public"><a href="#fException-api-printMessage"><tt>fException::printMessage()</tt></a></dt>
	  <dd class="public">Prints the message inside of a div with the class being 'exception %THIS_EXCEPTION_CLASS_NAME%'</dd>
	  	  <dt class="public"><a href="#fException-api-printTrace"><tt>fException::printTrace()</tt></a></dt>
	  <dd class="public">Prints the backtrace to currently called exception inside of a pre tag with the class being 'exception %THIS_EXCEPTION_CLASS_NAME% trace'</dd>
	  	  <dt class="public"><a href="#fException-api-registerCallback"><tt>fException::registerCallback()</tt></a></dt>
	  <dd class="public">Adds a callback for when certain types of exceptions are created</dd>
	  	  <dt class="public"><a href="#fException-api-reorderMessage"><tt>fException::reorderMessage()</tt></a></dt>
	  <dd class="public">Reorders list items in the message based on simple string matching</dd>
	  	  <dt class="public"><a href="#fException-api-setMessage"><tt>fException::setMessage()</tt></a></dt>
	  <dd class="public">Allows the message to be overwriten</dd>
	  	  <dt class="public"><a href="#fException-api-splitMessage"><tt>fException::splitMessage()</tt></a></dt>
	  <dd class="public">Splits an exception with an HTML list into multiple strings each containing part of the original message</dd>
	  	</dl>
		<dl>
	  	  <dt class="public">constructor __construct ( [$message = ], [$code = ], [$previous = ] )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__clone (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__toString (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getCode (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getFile (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getLine (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getMessage (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getPrevious (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTrace (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTraceAsString (  )</dt>
	  <dd class="public"></dd>
	  	</dl>
		</div>
	</div>			</section>
		</div>
		<section class="main">
<h2 id="fFile">fFile</h2>
<div class="sidebar">
<h3 id="fFile-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fFile">Class Documentation</a></strong></li>
<li><a href="#fFile-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fFile-docs-Instantiation">Instantiation</a></li>
<li><a href="#fFile-docs-GettingInformation">Getting Information</a></li>
<li><a href="#fFile-docs-Manipulation">Manipulation</a></li>
<li><a href="#fFile-docs-Outputting">Outputting</a>
<ul>
<li><a href="#fFile-docs-PerformanceIssues">Performance Issues</a></li>
</ul>
</li>
<li><a href="#fFile-docs-Cloning">Cloning</a></li>
<li><a href="#fFile-docs-Iteration">Iteration</a></li>
</ul>

<h3 id="fFile-docs-FilesystemClasses">Filesystem Classes </h3>

<ul>
<li><a href="#fFilesystem">fFilesystem</a></li>
<li><strong>fFile</strong>
<ul>
<li><a href="#fImage">fImage</a></li>
</ul>
</li>
<li><a href="#fDirectory">fDirectory</a></li>
<li><a href="#fUpload">fUpload</a></li>
</ul>
</div>

<p>
The fFile class is a simple object representation of a file on the filesystem. It provides an object-based interface to common file functions and allows actions to be grouped into transactions via the <a href="#fFilesystem">fFilesystem</a> class.
</p>

<h3 id="fFile-docs-Instantiation">Instantiation</h3>

<p>
The fFile constructor normally takes a single argument, the filesystem path to a file.
</p>
<pre class="block php"><code>$file1 = new fFile('/var/www/vhosts/examples.com/httpdocs/images/example.gif');
$file2 = new fFile('./output.txt');
$file3 = new fFile('../uploads/documents/example.doc');</code></pre>

<p>
 A second argument can be passed to the constructor allowing for an exception object to be set for the file, however this is primarily for use by the <a href="#fUpload">fUpload</a> class.
</p>

<p>
It is also possible to create an fFile object by calling the static <a href="#fFile-api-create"><code>create()</code></a> method. Not only does it create an instance of fFile, but also allows creates a new file on the filesystem. This method requires two parameters, the <code>$file_path</code> and the <code>$contents</code> to write. 
</p>
<pre class="block php"><code>$new_file = fFile::create('./output.log', 'This is the string to be stored in the new file.');</code></pre>

<h3 id="fFile-docs-GettingInformation">Getting Information</h3>

<p>
The fFile class includes a few methods to grab some basic information about a file. These include:
</p>
<table><tbody>
<tr>
<td><strong>Method</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td><a href="#fFile-api-getName"><code>getName()</code></a></td>
<td>Returns the filename of the file as a string</td>
</tr>
<tr>
<td><a href="#fFile-api-getExtension"><code>getExtension()</code></a></td>
<td>Returns the extension of the file</td>
</tr>
<tr>
<td><a href="#fFile-api-getParent"><code>getParent()</code></a></td>
<td>Returns the <a href="#fDirectory">fDirectory</a> object for the directory containing this file</td>
</tr>
<tr>
<td><a href="#fFile-api-getPath"><code>getPath()</code></a></td>
<td>Returns a string with the full path to the file</td>
</tr>
<tr>
<td><a href="#fFile-api-getSize"><code>getSize()</code></a></td>
<td>Returns the size in bytes as an integer, or optionally formatted for easy human readability</td>
</tr>
<tr>
<td><a href="#fFile-api-getMimeType"><code>getMimeType()</code></a></td>
<td>Returns the mime type of the file, see the <a href="#fFile-api-getMimeType">API docs</a> for a list of all supported file types</td>
</tr>
<tr>
<td><a href="#fFile-api-getMTime"><code>getMTime()</code></a></td>
<td>Returns an <a href="#fTimestamp">fTimestamp</a> object representing the date and time the file was last modified</td>
</tr>
<tr>
<td><a href="#fFile-api-isWritable"><code>isWritable()</code></a></td>
<td>Indicates if the file can be written to by the current user</td>
</tr>
</tbody></table>

<p>
If you want more specific information about a file, you can pass the output of <code>getPath()</code> into the various <a class="ext-link" href="http://php.net/filesystem"><span class="icon">PHP filesystem functions</span></a>. 
</p>

<h3 id="fFile-docs-Manipulation">Manipulation</h3>

<p>
In most situations, manipulation of a file is going to be a requirement. The following methods provide a straight-forward interface for standard manipulation. Also note that these manipulations can be wrapped in a <a href="#fFilesystem-docs-Transactions">filesystem transactions</a> to allow for rolling back changes in the event of a later error.
</p>
<table><tbody>
<tr>
<td><strong>Method</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td><a href="#fFile-api-read"><code>read()</code></a></td>
<td>Returns the contents of the file as a string</td>
</tr>
<tr>
<td><a href="#fFile-api-write"><code>write()</code></a></td>
<td>Accepts a string to overwrite the file contents with</td>
</tr>
<tr>
<td><a href="#fFile-api-append"><code>append()</code></a></td>
<td>Appends content to the file</td>
</tr>
<tr>
<td><a href="#fFile-api-rename"><code>rename()</code></a></td>
<td>Renames the file to a new filename/path - if no directory <code>/</code> is found in the new path, the file is renamed in the current directory</td>
</tr>
<tr>
<td><a href="#fFile-api-move"><code>move()</code></a></td>
<td>Moves the file to a new directory, keeping the existing filename</td>
</tr>
<tr>
<td><a href="#fFile-api-duplicate"><code>duplicate()</code></a></td>
<td>Will create a copy of the file, optionally in a different directory. If in a different directory, you can specify if you want an existing file with the same name to be overwritten.</td>
</tr>
<tr>
<td><a href="#fFile-api-delete"><code>delete()</code></a></td>
<td>Removes the file from the filesystem. Please note that if inside of a filesystem transaction, this event will be deferred until commit is called, but instances of fFile will act as if the file no longer exists.</td>
</tr>
<tr>
<td><a href="#fFile-api-output"><code>output()</code></a></td>
<td>Will echo the contents of the file to the user, optionally including the appropriate HTTP headers</td>
</tr>
</tbody></table>

<h3 id="fFile-docs-Outputting">Outputting</h3>

<p>
When it is necessary to use PHP to control access to files, a file can be sent to a user via the <a href="#fFile-api-output"><code>output()</code></a> method. The first parameters, <code>$headers</code>, is required and controls whether or not mime-type and filesize headers are included with the file contents. If this is set to <code>FALSE</code>, the headers should be manually sent before calling the method.
</p>
<pre class="block php"><code>// Output the file with relevant headers
$file-&gt;output(TRUE);</code></pre>

<p>
 If included, the second parameter, <code>$filename</code>, will send the file as an attachment to the current page instead of using the filename from the current URL.
</p>
<pre class="block php"><code>// If on index.php, this file will be sent to the user as index.php
$file-&gt;output(TRUE);

// This file will be sent as document.doc
$file-&gt;output(TRUE, 'document.doc');</code></pre>

<h4 id="fFile-docs-PerformanceIssues">Performance Issues</h4>

<p>
When outputting a file, please be certain to turn off any output buffering, whether it be controller by <a class="ext-link" href="http://php.net/ob_start"><span class="icon"><code>ob_start()</code></span></a>, <a href="#fTemplating">fTemplating</a> or <a href="#fBuffer">fBuffer</a>. If output buffering is turned on, the whole contents of the file will be stored in web server memory before being sent to the user. This can obviously cause issues with large files.
</p>

<p>
Due to the way that PHP prevents overwriting session values, only one page can access the session at a time. If the session was opened on the page before calling <code>output()</code> and is not explicitly closed via <a href="#fSession-api-close">fSession::close()</a>, the user will not be able to visit any other pages on the site until the download completes. This is obviously more of an issue with large files or slow connections.
</p>

<h3 id="fFile-docs-Cloning">Cloning</h3>

<p>
When an fFile object is cloned, a duplicate of the file is created on the filesystem in the files current directory. Essentially <code>clone</code> is the same as calling <a href="#fFile-api-duplicate"><code>duplicate()</code></a> with no parameters.
</p>
<pre class="block php"><code>$file  = new fFile('/path/to/file.txt');
// $file2 will be a new file with the path /path/to/file_copy1.txt
$file2 = clone $file;</code></pre>

<h3 id="fFile-docs-Iteration">Iteration</h3>

<p>
fFile implements the Iterator interface, meaning that ever fFile object can be used in a foreach loop, with each iteration returning a line from the line. Each line <strong>will</strong> include the original line break.
</p>
<pre class="block php"><code>$file = new fFile('report.csv');
foreach ($file as $line) {
    $fields = str_getcsv($line);
    // 
}</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fFile-api">fFile API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fFile">Class Documentation</a></li>
		<li><strong><a href="#fFile-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="protected variables">
<h4><a href="#fFile-api-class_vars">Variables</a></h4>
<ul>
  	 		<li class="protected"><a href="#fFile-api-deleted">$deleted</a></li>
	   	 		<li class="protected"><a href="#fFile-api-file">$file</a></li>
	   </ul>
</div>
<div class="methods static">
<h4><a href="#fFile-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  	  	  	  	  	  	  			<li><a href="#fFile-api-create">create()</a></li>
	  	  	  			<li class="protected"><a href="#fFile-api-determineMimeType">determineMimeType()</a></li>
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  </ul>
</div>
<div class="methods">
<h4><a href="#fFile-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fFile-api-__construct">__construct()</a></li>
	  			<li class="protected"><a href="#fFile-api-__clone">__clone()</a></li>
	  			<li class="protected"><a href="#fFile-api-__get">__get()</a></li>
	  			<li class="protected"><a href="#fFile-api-__sleep">__sleep()</a></li>
	  			<li><a href="#fFile-api-__toString">__toString()</a></li>
	  			<li class="protected"><a href="#fFile-api-__wakeup">__wakeup()</a></li>
	  			<li><a href="#fFile-api-append">append()</a></li>
	  			<li><a href="#fFile-api-count">count()</a></li>
	  	  			<li class="protected"><a href="#fFile-api-current">current()</a></li>
	  			<li><a href="#fFile-api-delete">delete()</a></li>
	  	  			<li><a href="#fFile-api-duplicate">duplicate()</a></li>
	  			<li><a href="#fFile-api-getExtension">getExtension()</a></li>
	  			<li><a href="#fFile-api-getMimeType">getMimeType()</a></li>
	  			<li><a href="#fFile-api-getMTime">getMTime()</a></li>
	  			<li><a href="#fFile-api-getName">getName()</a></li>
	  			<li><a href="#fFile-api-getParent">getParent()</a></li>
	  			<li><a href="#fFile-api-getPath">getPath()</a></li>
	  			<li><a href="#fFile-api-getSize">getSize()</a></li>
	  			<li><a href="#fFile-api-isWritable">isWritable()</a></li>
	  			<li class="protected"><a href="#fFile-api-key">key()</a></li>
	  			<li><a href="#fFile-api-move">move()</a></li>
	  			<li class="protected"><a href="#fFile-api-next">next()</a></li>
	  			<li><a href="#fFile-api-output">output()</a></li>
	  			<li><a href="#fFile-api-read">read()</a></li>
	  			<li><a href="#fFile-api-rename">rename()</a></li>
	  			<li class="protected"><a href="#fFile-api-rewind">rewind()</a></li>
	  			<li class="protected"><a href="#fFile-api-tossIfDeleted">tossIfDeleted()</a></li>
	  			<li class="protected"><a href="#fFile-api-valid">valid()</a></li>
	  			<li><a href="#fFile-api-write">write()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fDirectory">fDirectory</a></li>
		<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
		<li><a href="#fFilesystem">fFilesystem</a></li>
		<li><a href="#fNoRemainingException">fNoRemainingException</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fTimestamp">fTimestamp</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fEmail">fEmail</a></li>
		<li><a href="#fFilesystem">fFilesystem</a></li>
		<li><a href="#fImage">fImage</a></li>
		<li><a href="#fLoader">fLoader</a></li>
		<li><a href="#fMailbox">fMailbox</a></li>
		<li><a href="#fUpload">fUpload</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
	<span class="implements"> implements Iterator Countable </span>,	<span class="version">v1.0.0b39</span></div>
<p class="short_description">Represents a file on the filesystem, also provides static file-related methods</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b39</th><td>Backwards Compatibility Break - <a href="#fFile-api-output"><tt>output()</tt></a> now automatically ends any open output buffering and discards the contents <span class="date">8/24/11</span></td></tr><tr><th>1.0.0b38</th><td>Added the Countable interface to the class <span class="date">6/3/11</span></td></tr><tr><th>1.0.0b37</th><td>Fixed mime type detection of BMP images <span class="date">3/7/11</span></td></tr><tr><th>1.0.0b36</th><td>Added the <tt>$remove_extension</tt> parameter to <a href="#fFile-api-getName"><tt>getName()</tt></a> <span class="date">1/10/11</span></td></tr><tr><th>1.0.0b35</th><td>Added calls to clearstatcache() in <a href="#fFile-api-append"><tt>append()</tt></a> and <a href="#fFile-api-write"><tt>write()</tt></a> to prevent incorrect data from being returned by <a href="#fFile-api-getMTime"><tt>getMTime()</tt></a> and <a href="#fFile-api-getSize"><tt>getSize()</tt></a> <span class="date">11/27/10</span></td></tr><tr><th>1.0.0b34</th><td>Added <a href="#fFile-api-getExtension"><tt>getExtension()</tt></a> <span class="date">5/10/10</span></td></tr><tr><th>1.0.0b33</th><td>Fixed another situation where <a href="#fFile-api-rename"><tt>rename()</tt></a> with the same name would cause the file to be deleted <span class="date">4/13/10</span></td></tr><tr><th>1.0.0b32</th><td>Fixed <a href="#fFile-api-rename"><tt>rename()</tt></a> to not fail when the new and old filename are the same <span class="date">3/16/10</span></td></tr><tr><th>1.0.0b31</th><td>Added <a href="#fFile-api-append"><tt>append()</tt></a> <span class="date">3/15/10</span></td></tr><tr><th>1.0.0b30</th><td>Changed the way files deleted in a filesystem transaction are handled, including improvements to the exception that is thrown <span class="date">3/5/10</span></td></tr><tr><th>1.0.0b29</th><td>Fixed a couple of undefined variable errors in determineMimeTypeByContents() <span class="date">3/3/10</span></td></tr><tr><th>1.0.0b28</th><td>Added support for some JPEG files created by Photoshop <span class="date">12/16/09</span></td></tr><tr><th>1.0.0b27</th><td>Backwards Compatibility Break - renamed getFilename() to <a href="#fFile-api-getName"><tt>getName()</tt></a>, getFilesize() to <a href="#fFile-api-getSize"><tt>getSize()</tt></a>, getDirectory() to <a href="#fFile-api-getParent"><tt>getParent()</tt></a>, added <a href="#fFile-api-move"><tt>move()</tt></a> <span class="date">12/16/09</span></td></tr><tr><th>1.0.0b26</th><td>getDirectory(), getFilename() and <a href="#fFile-api-getPath"><tt>getPath()</tt></a> now all work even if the file has been deleted <span class="date">10/22/09</span></td></tr><tr><th>1.0.0b25</th><td>Fixed <a href="#fFile-api-__construct"><tt>__construct()</tt></a> to throw an <a href="#fValidationException">fValidationException</a> when the file does not exist <span class="date">8/21/09</span></td></tr><tr><th>1.0.0b24</th><td>Fixed a bug where deleting a file would prevent any future operations in the same script execution on a file or directory with the same path <span class="date">8/20/09</span></td></tr><tr><th>1.0.0b23</th><td>Added the ability to skip checks in <a href="#fFile-api-__construct"><tt>__construct()</tt></a> for better performance in conjunction with <a href="#fFilesystem-api-createObject"><tt>fFilesystem::createObject()</tt></a> <span class="date">8/6/09</span></td></tr><tr><th>1.0.0b22</th><td>Fixed <a href="#fFile-api-__toString"><tt>__toString()</tt></a> to never throw an exception <span class="date">8/6/09</span></td></tr><tr><th>1.0.0b21</th><td>Fixed a bug in <a href="#fFile-api-determineMimeType"><tt>determineMimeType()</tt></a> <span class="date">7/21/09</span></td></tr><tr><th>1.0.0b20</th><td>Fixed the exception message thrown by <a href="#fFile-api-output"><tt>output()</tt></a> when output buffering is turned on <span class="date">6/26/09</span></td></tr><tr><th>1.0.0b19</th><td><a href="#fFile-api-rename"><tt>rename()</tt></a> will now rename the file in its current directory if the new filename has no directory separator <span class="date">5/4/09</span></td></tr><tr><th>1.0.0b18</th><td>Changed <a href="#fFile-api-__sleep"><tt>__sleep()</tt></a> to not reset the iterator since it can cause side-effects <span class="date">5/4/09</span></td></tr><tr><th>1.0.0b17</th><td>Added <a href="#fFile-api-__sleep"><tt>__sleep()</tt></a> and <a href="#fFile-api-__wakeup"><tt>__wakeup()</tt></a> for proper serialization with the filesystem map <span class="date">5/3/09</span></td></tr><tr><th>1.0.0b16</th><td><a href="#fFile-api-output"><tt>output()</tt></a> now accepts <tt>TRUE</tt> in the second parameter to use the current filename as the attachment filename <span class="date">3/23/09</span></td></tr><tr><th>1.0.0b15</th><td>Added support for mime type detection of MP3s based on the MPEG-2 (as opposed to MPEG-1) standard <span class="date">3/23/09</span></td></tr><tr><th>1.0.0b14</th><td>Fixed a bug with detecting the mime type of some MP3s <span class="date">3/22/09</span></td></tr><tr><th>1.0.0b13</th><td>Fixed a bug with overwriting files via <a href="#fFile-api-rename"><tt>rename()</tt></a> on Windows <span class="date">3/11/09</span></td></tr><tr><th>1.0.0b12</th><td>Backwards compatibility break - Changed the second parameter of <a href="#fFile-api-output"><tt>output()</tt></a> from <tt>$ignore_output_buffer</tt> to <tt>$filename</tt> <span class="date">3/5/09</span></td></tr><tr><th>1.0.0b11</th><td>Changed <a href="#fFile-api-__clone"><tt>__clone()</tt></a> and <a href="#fFile-api-duplicate"><tt>duplicate()</tt></a> to copy file permissions to the new file <span class="date">1/5/09</span></td></tr><tr><th>1.0.0b10</th><td>Fixed <a href="#fFile-api-duplicate"><tt>duplicate()</tt></a> so an exception is not thrown when no parameters are passed <span class="date">1/5/09</span></td></tr><tr><th>1.0.0b9</th><td>Removed the dependency on <a href="#fBuffer">fBuffer</a> <span class="date">1/5/09</span></td></tr><tr><th>1.0.0b8</th><td>Added the Iterator interface, <a href="#fFile-api-output"><tt>output()</tt></a> and <a href="#fFile-api-getMTime"><tt>getMTime()</tt></a> <span class="date">12/17/08</span></td></tr><tr><th>1.0.0b7</th><td>Removed some unnecessary error suppresion operators <span class="date">12/11/08</span></td></tr><tr><th>1.0.0b6</th><td>Added the <a href="#fFile-api-__clone"><tt>__clone()</tt></a> method that duplicates the file on the filesystem when cloned <span class="date">12/11/08</span></td></tr><tr><th>1.0.0b5</th><td>Fixed detection of mime type for JPEG files with Exif information <span class="date">12/4/08</span></td></tr><tr><th>1.0.0b4</th><td>Changed the constructor to ensure the path is to a file and not directory <span class="date">11/24/08</span></td></tr><tr><th>1.0.0b3</th><td>Fixed mime type detection of Microsoft Office files <span class="date">11/23/08</span></td></tr><tr><th>1.0.0b2</th><td>Made <a href="#fFile-api-rename"><tt>rename()</tt></a> and <a href="#fFile-api-write"><tt>write()</tt></a> return the object for method chaining <span class="date">11/22/08</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="genealogy">	
	<h4>Genealogy</h4>
		<div class="child_classes">
	<h5>Child Classes</h5>
	<dl>
		<dt><a href="#fImage">fImage</a></dt>
	<dd>Represents an image on the filesystem, also provides image manipulation functionality</dd>
		</dl>
	</div>
	</div>	
<div class="class_variables" id="fFile-api-class_vars">
<h4>Variables</h4>
	<!-- start protected variable -->
	<h5 id="fFile-api-deleted" class="protected variable"><span class="resolution">-></span><span class="name">deleted</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>A backtrace from when the file was deleted</p>
			</div>
		<h6>Type</h6>
		<p class="type">array</p>
	</div>
	<!-- end variable -->
	<!-- start protected variable -->
	<h5 id="fFile-api-file" class="protected variable"><span class="resolution">-></span><span class="name">file</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>The full path to the file</p>
			</div>
		<h6>Type</h6>
		<p class="type">string</p>
	</div>
	<!-- end variable -->
</div>
<div class="class_methods static" id="fFile-api-class_methods_static">
<h4>Static Methods</h4>
						<!-- start method static -->
			<h5 id="fFile-api-create" class="method static"><span class="resolution">::</span><span class="name">create()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Creates a file on the filesystem and returns an object representing it.</p>
								<p>This operation will be reverted by a filesystem transaction being rolled back.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fFile">fFile</a></span> <span class="php-identifier">create</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$file_path</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$contents</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$file_path</td>
				<td class="param_description">The path to the new file</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$contents</td>
				<td class="param_description">The contents to write to the file, must be a non-NULL value to be written</td>
			  </tr>
						</table>
			</div>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When no file was specified or the file already exists</dd></dl>
							<h6>Overridden By</h6>
				<div class="overridden">
					<dl>
												<dt><a href="#fImage-api-create"><tt>fImage::create()</tt></a></dt>
												<dd>Creates an image on the filesystem and returns an object representing it</dd>
																	</dl>
				</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fFile-api-determineMimeType" class="protected method static"><span class="resolution">::</span><span class="name">determineMimeType()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Determines the file's mime type by either looking at the file contents or matching the extension</p>
								<p>Please see the <a href="#fFile-api-getMimeType"><tt>getMimeType()</tt></a> description for details about how the  mime type is determined and what mime types are detected.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">determineMimeType</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$file</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$contents</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$file</td>
				<td class="param_description">The file to check the mime type for - must be a valid filesystem path if no <tt>$contents</tt> are provided, otherwise just a filename</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$contents</td>
				<td class="param_description">The first 4096 bytes of the file content - the <tt>$file</tt> parameter only need be a filename if this is provided</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The mime type of the file
				</p>
			</div>
			<!-- end method static -->
																				</div>
<div class="class_methods" id="fFile-api-class_methods">
<h4>Methods</h4>
						<!-- start method -->
			<h5 id="fFile-api-__construct" class="method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Creates an object to represent a file on the filesystem</p>
								<p>If multiple <a href="#fFile">fFile</a> objects are created for a single file, they will  reflect changes in each other including rename and delete actions.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fFile">fFile</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$file</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$skip_checks</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$file</td>
				<td class="param_description">The path to the file</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$skip_checks</td>
				<td class="param_description">If file checks should be skipped, which improves performance, but may cause undefined behavior - only skip these if they are duplicated elsewhere</td>
			  </tr>
						</table>
			</div>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When no file was specified, the file does not exist or the path specified is not a file</dd></dl>
							<h6>Overridden By</h6>
				<div class="overridden">
					<dl>
												<dt><a href="#fImage-api-__construct"><tt>fImage::__construct()</tt></a></dt>
												<dd>Creates an object to represent an image on the filesystem</dd>
																	</dl>
				</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fFile-api-__clone" class="protected method"><span class="resolution">-></span><span class="name">__clone()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Duplicates a file in the current directory when the object is cloned</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fFile">fFile</a></span> <span class="php-identifier">__clone</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The new <a href="#fFile">fFile</a> object
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fFile-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fFile-api-__sleep" class="protected method"><span class="resolution">-></span><span class="name">__sleep()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>The iterator information doesn't need to be serialized since a resource can't be</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">__sleep</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The instance variables to serialize
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fFile-api-__toString" class="method"><span class="resolution">-></span><span class="name">__toString()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the filename of the file</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">__toString</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The filename
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fFile-api-__wakeup" class="protected method"><span class="resolution">-></span><span class="name">__wakeup()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Re-inserts the file back into the filesystem map when unserialized</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">__wakeup</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fFile-api-append" class="method"><span class="resolution">-></span><span class="name">append()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Appends the provided data to the file</p>
								<p>If a filesystem transaction is in progress and is rolled back, this  data will be removed.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fFile">fFile</a></span> <span class="php-identifier">append</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$data</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$data</td>
				<td class="param_description">The data to append to the file</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The file object, to allow for method chaining
				</p>
							<h6>Overridden By</h6>
				<div class="overridden">
					<dl>
												<dt><a href="#fImage-api-append"><tt>fImage::append()</tt></a></dt>
												<dd>Prevents a programmer from trying to append an image</dd>
																	</dl>
				</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fFile-api-count" class="method"><span class="resolution">-></span><span class="name">count()</span> <span class="visibility">public</span><span class="implements"> implements Countable</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the number of lines in the file</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">count</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The number of lines in the file
				</p>
		</div>
		<!-- end method -->	
						<!-- start protected method -->
			<h5 id="fFile-api-current" class="protected method"><span class="resolution">-></span><span class="name">current()</span> <span class="visibility">internal public</span><span class="implements"> implements Iterator</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns the current line of the file (required by iterator interface)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">current</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The current row
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fNoRemainingException">fNoRemainingException</a></dt><dd>When there are no remaining lines in the file</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fFile-api-delete" class="method"><span class="resolution">-></span><span class="name">delete()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Deletes the current file</p>
								<p>This operation will NOT be performed until the filesystem transaction  has been committed, if a transaction is in progress. Any non-Flourish  code (PHP or system) will still see this file as existing until that  point.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">delete</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fFile-api-duplicate" class="method"><span class="resolution">-></span><span class="name">duplicate()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Creates a new file object with a copy of this file</p>
								<p>If no directory is specified, the file is created with a new name in  the current directory. If a new directory is specified, you must also  indicate if you wish to overwrite an existing file with the same name  in the new directory or create a unique name.</p><p>This operation will be reverted by a filesystem transaction being rolled  back.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fFile">fFile</a></span> <span class="php-identifier">duplicate</span><span class="php-brackets">(</span> <span class="php-vartype">string|<a href="#fDirectory">fDirectory</a></span> <span class="php-var">$new_directory</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$overwrite</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string|<a href="#fDirectory">fDirectory</a></td>
				<td class="param_name">$new_directory</td>
				<td class="param_description">The directory to duplicate the file into if different than the current directory</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$overwrite</td>
				<td class="param_description">If a new directory is specified, this indicates if a file with the same name should be overwritten.</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The new <a href="#fFile">fFile</a> object
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fFile-api-getExtension" class="method"><span class="resolution">-></span><span class="name">getExtension()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the file extension</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getExtension</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The extension of the file
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fFile-api-getMimeType" class="method"><span class="resolution">-></span><span class="name">getMimeType()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the file's mime type</p>
								<p>This method will attempt to look at the file contents and the file  extension to determine the mime type. If the file contains binary  information, the contents will be used for mime type verification,  however if the contents appear to be plain text, the file extension  will be used.</p><p>The following mime types are supported. All other binary file types  will be returned as <tt>application/octet-stream</tt> and all other text files  will be returned as <tt>text/plain</tt>.</p><p><strong>Archive:</strong>  </p><ul><li><tt>application/x-bzip2</tt> BZip2 file</li><li><tt>application/x-compress</tt> Compress (*nix) file</li><li><tt>application/x-gzip</tt> GZip file</li><li><tt>application/x-rar-compressed</tt> Rar file</li><li><tt>application/x-stuffit</tt> StuffIt file</li><li><tt>application/x-tar</tt> Tar file</li><li><tt>application/zip</tt> Zip file</li></ul><p><strong>Audio:</strong>  </p><ul><li><tt>audio/x-flac</tt> FLAC audio</li><li><tt>audio/mpeg</tt> MP3 audio</li><li><tt>audio/mp4</tt> MP4 (AAC) audio</li><li><tt>audio/vorbis</tt> Ogg Vorbis audio</li><li><tt>audio/x-wav</tt> WAV audio</li><li><tt>audio/x-ms-wma</tt> Windows media audio</li></ul><p><strong>Document:</strong>  </p><ul><li><tt>application/vnd.ms-excel</tt> Excel (2000, 2003 and 2007) file</li><li><tt>application/pdf</tt> PDF file</li><li><tt>application/vnd.ms-powerpoint</tt> Powerpoint (2000, 2003, 2007) file</li><li><tt>text/rtf</tt> RTF file</li><li><tt>application/msword</tt> Word (2000, 2003 and 2007) file</li></ul><p><strong>Image:</strong>  </p><ul><li><tt>image/x-ms-bmp</tt> BMP file</li><li><tt>application/postscript</tt> EPS file</li><li><tt>image/gif</tt> GIF file</li><li><tt>application/vnd.microsoft.icon</tt> ICO file</li><li><tt>image/jpeg</tt> JPEG file</li><li><tt>image/png</tt> PNG file</li><li><tt>image/tiff</tt> TIFF file</li><li><tt>image/svg+xml</tt> SVG file</li></ul><p><strong>Text:</strong>  </p><ul><li><tt>text/css</tt> CSS file</li><li><tt>text/csv</tt> CSV file</li><li><tt>text/html</tt> (X)HTML file</li><li><tt>text/calendar</tt> iCalendar file</li><li><tt>application/javascript</tt> Javascript file</li><li><tt>application/x-perl</tt> Perl file</li><li><tt>application/x-httpd-php</tt> PHP file</li><li><tt>application/x-python</tt> Python file</li><li><tt>application/rss+xml</tt> RSS feed</li><li><tt>application/x-ruby</tt> Ruby file</li><li><tt>text/tab-separated-values</tt> TAB file</li><li><tt>text/x-vcard</tt> VCard file</li><li><tt>application/xhtml+xml</tt> XHTML (Real) file</li><li><tt>application/xml</tt> XML file</li></ul><p><strong>Video/Animation:</strong>  </p><ul><li><tt>video/x-msvideo</tt> AVI video</li><li><tt>application/x-shockwave-flash</tt> Flash movie</li><li><tt>video/x-flv</tt> Flash video</li><li><tt>video/x-ms-asf</tt> Microsoft ASF video</li><li><tt>video/mp4</tt> MP4 video</li><li><tt>video/ogg</tt> OGM and Ogg Theora video</li><li><tt>video/quicktime</tt> Quicktime video</li><li><tt>video/x-ms-wmv</tt> Windows media video</li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getMimeType</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The mime type of the file
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fFile-api-getMTime" class="method"><span class="resolution">-></span><span class="name">getMTime()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the last modification time of the file</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fTimestamp">fTimestamp</a></span> <span class="php-identifier">getMTime</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The timestamp of when the file was last modified
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fFile-api-getName" class="method"><span class="resolution">-></span><span class="name">getName()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the filename (i.e. does not include the directory)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getName</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$remove_extension</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$remove_extension</td>
				<td class="param_description">If the extension should be removed from the filename</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The filename of the file
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fFile-api-getParent" class="method"><span class="resolution">-></span><span class="name">getParent()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the directory the file is located in</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fDirectory">fDirectory</a></span> <span class="php-identifier">getParent</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The directory containing the file
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fFile-api-getPath" class="method"><span class="resolution">-></span><span class="name">getPath()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the file's current path (directory and filename)</p>
								<p>If the web path is requested, uses translations set with  <a href="#fFilesystem-api-addWebPathTranslation"><tt>fFilesystem::addWebPathTranslation()</tt></a></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getPath</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$translate_to_web_path</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$translate_to_web_path</td>
				<td class="param_description">If the path should be the web path</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The path (directory and filename) for the file
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fFile-api-getSize" class="method"><span class="resolution">-></span><span class="name">getSize()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the size of the file</p>
								<p>The return value may be incorrect for files over 2GB on 32-bit OSes.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer|string</span> <span class="php-identifier">getSize</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$format</span><span class="php-code">=</span>FALSE<span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$decimal_places</span><span class="php-code">=</span>1 <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$format</td>
				<td class="param_description">If the filesize should be formatted for human readability</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$decimal_places</td>
				<td class="param_description">The number of decimal places to format to (if enabled)</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If formatted a string with filesize in b/kb/mb/gb/tb, otherwise an integer
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fFile-api-isWritable" class="method"><span class="resolution">-></span><span class="name">isWritable()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Check to see if the current file is writable</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">isWritable</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 If the file is writable
				</p>
		</div>
		<!-- end method -->	
						<!-- start protected method -->
			<h5 id="fFile-api-key" class="protected method"><span class="resolution">-></span><span class="name">key()</span> <span class="visibility">internal public</span><span class="implements"> implements Iterator</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns the current one-based line number (required by iterator interface)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">key</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The current line number
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fNoRemainingException">fNoRemainingException</a></dt><dd>When there are no remaining lines in the file</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fFile-api-move" class="method"><span class="resolution">-></span><span class="name">move()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Moves the current file to a different directory</p>
								<p>Please note that <a href="#fFile-api-rename"><tt>rename()</tt></a> will rename a file in its directory or rename  it into a different directory.</p><p>If the current file's filename already exists in the new directory and  the overwrite flag is set to false, the filename will be changed to a  unique name.</p><p>This operation will be reverted if a filesystem transaction is in  progress and is later rolled back.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fFile">fFile</a></span> <span class="php-identifier">move</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fDirectory">fDirectory</a>|string</span> <span class="php-var">$new_directory</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$overwrite</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fDirectory">fDirectory</a>|string</td>
				<td class="param_name">$new_directory</td>
				<td class="param_description">The directory to move this file into</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$overwrite</td>
				<td class="param_description">If the current filename already exists in the new directory, <tt>TRUE</tt> will cause the file to be overwritten, <tt>FALSE</tt> will cause the new filename to change</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The file object, to allow for method chaining
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When the directory passed is not a directory or is not readable</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start protected method -->
			<h5 id="fFile-api-next" class="protected method"><span class="resolution">-></span><span class="name">next()</span> <span class="visibility">internal public</span><span class="implements"> implements Iterator</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Advances to the next line in the file (required by iterator interface)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">next</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fNoRemainingException">fNoRemainingException</a></dt><dd>When there are no remaining lines in the file</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fFile-api-output" class="method"><span class="resolution">-></span><span class="name">output()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Prints the contents of the file</p>
								<p>This method is primarily intended for when PHP is used to control access  to files.</p><p>Be sure to close the session, if open, to prevent performance issues.  Any open output buffers are automatically closed and discarded.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fFile">fFile</a></span> <span class="php-identifier">output</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$headers</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$filename</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$headers</td>
				<td class="param_description">If HTTP headers for the file should be included</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$filename</td>
				<td class="param_description">Present the file as an attachment instead of just outputting type headers - if a string is passed, that will be used for the filename, if <tt>TRUE</tt> is passed, the current filename will be used</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The file object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fFile-api-read" class="method"><span class="resolution">-></span><span class="name">read()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Reads the data from the file</p>
								<p>Reads all file data into memory, use with caution on large files!</p><p>This operation will read the data that has been written during the  current transaction if one is in progress.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">read</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The contents of the file
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fFile-api-rename" class="method"><span class="resolution">-></span><span class="name">rename()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Renames the current file</p>
								<p>If the filename already exists and the overwrite flag is set to false,  a new filename will be created.</p><p>This operation will be reverted if a filesystem transaction is in  progress and is later rolled back.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fFile">fFile</a></span> <span class="php-identifier">rename</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$new_filename</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$overwrite</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$new_filename</td>
				<td class="param_description">The new full path to the file or a new filename in the current directory</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$overwrite</td>
				<td class="param_description">If the new filename already exists, <tt>TRUE</tt> will cause the file to be overwritten, <tt>FALSE</tt> will cause the new filename to change</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The file object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fFile-api-rewind" class="protected method"><span class="resolution">-></span><span class="name">rewind()</span> <span class="visibility">internal public</span><span class="implements"> implements Iterator</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Rewinds the file handle (required by iterator interface)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">rewind</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fFile-api-tossIfDeleted" class="protected method"><span class="resolution">-></span><span class="name">tossIfDeleted()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Throws an <a href="#fProgrammerException">fProgrammerException</a> if the file has been deleted</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">tossIfDeleted</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fFile-api-valid" class="protected method"><span class="resolution">-></span><span class="name">valid()</span> <span class="visibility">internal public</span><span class="implements"> implements Iterator</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns if the file has any lines left (required by iterator interface)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">valid</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 If the iterator is still valid
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fFile-api-write" class="method"><span class="resolution">-></span><span class="name">write()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Writes the provided data to the file</p>
								<p>Requires all previous data to be stored in memory if inside a  transaction, use with caution on large files!</p><p>If a filesystem transaction is in progress and is rolled back, the  previous data will be restored.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fFile">fFile</a></span> <span class="php-identifier">write</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$data</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$data</td>
				<td class="param_description">The data to write to the file</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The file object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="fFilesystem">fFilesystem</h2>
<div class="sidebar">
<h3 id="fFilesystem-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fFilesystem">Class Documentation</a></strong></li>
<li><a href="#fFilesystem-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fFilesystem-docs-CreatingObjects">Creating Objects</a></li>
<li><a href="#fFilesystem-docs-Transactions">Transactions</a></li>
<li><a href="#fFilesystem-docs-FilePaths">File Paths</a>
<ul>
<li><a href="#fFilesystem-docs-HelperMethods">Helper Methods</a></li>
<li><a href="#fFilesystem-docs-Translation">Translation</a></li>
</ul>
</li>
<li><a href="#fFilesystem-docs-FileSizes">File Sizes</a></li>
</ul>

<h3 id="fFilesystem-docs-FilesystemClasses">Filesystem Classes </h3>

<ul>
<li><strong>fFilesystem</strong></li>
<li><a href="#fFile">fFile</a>
<ul>
<li><a href="#fImage">fImage</a></li>
</ul>
</li>
<li><a href="#fDirectory">fDirectory</a></li>
<li><a href="#fUpload">fUpload</a></li>
</ul>
</div>

<p>
The fFilesystem class is a static class that provides filesystem level functionality, including the ability to bundle operations into transactions.
</p>

<h3 id="fFilesystem-docs-CreatingObjects">Creating Objects</h3>

<p>
The static method <a href="#fFilesystem-api-createObject"><code>createObject()</code></a> acts as a factory to create the appropriate filesystem object when dealing with paths that may contain a directory, image or file.
</p>

<p>
In the case that a directory is detected, an <a href="#fDirectory">fDirectory</a> object will be returned. In the case that a file that is compatible with the <a href="#fImage">fImage</a> object is detected, an <a href="#fImage">fImage</a> object will be returned. If neither of those conditions hold true, an <a href="#fFile">fFile</a> object will be returned.
</p>
<pre class="block php"><code>// This would return an fImage object
$file = fFilesystem::createObject('./path/to/image.jpg');

// This would return an fFile object
$file = fFilesystem::createObject('./path/to/info.txt');

// This would return an fDirectory object
$dir  = fFilesystem::createObject('./path/to/dir/');</code></pre>

<h3 id="fFilesystem-docs-Transactions">Transactions</h3>

<p>
When speaking of ACID-compliant relational databases, transactions are one of the key elements. The fFilesystem class provides transaction-like functionality for filesystem operations. <em>Please note that the level of transactional features is <strong>nothing</strong> like an ACID-compliant RDBMS. If the web server crashes or exits in the middle of a transaction, the changes made to that point will be permanent. Please see below for a list of exactly what is affected by filesystem transactions.</em> 
</p>

<p>
There are four methods used when dealing with filesystem transactions:
</p>
<table><tbody>
<tr>
<td><strong>Method</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td><a href="#fFilesystem-api-begin"><code>begin()</code></a></td>
<td>Begins a transaction, indicating that all following Flourish filesystem operations should be grouped together for the purposes of rolling back or committing them.</td>
</tr>
<tr>
<td><a href="#fFilesystem-api-rollback"><code>rollback()</code></a></td>
<td>Allows all changes since the transaction was started to be reversed.</td>
</tr>
<tr>
<td><a href="#fFilesystem-api-commit"><code>commit()</code></a></td>
<td>Causes all pending operations (such as deletes) to actually be performed.</td>
</tr>
<tr>
<td><a href="#fFilesystem-api-isInsideTransaction"><code>isInsideTransaction()</code></a></td>
<td>Indicates if a transaction has been started but not rolled back or committed yet.</td>
</tr>
</tbody></table>

<p>
Here is a list of how the various <a href="#fDirectory">fDirectory</a>, <a href="#fFile">fFile</a> and <a href="#fImage">fImage</a> methods are affected by filesystem transactions:
</p>
<table><tbody>
<tr>
<td><strong>Method</strong></td>
<td><strong>Active Transaction Behaviour</strong></td>
</tr>
<tr>
<td><a href="#fDirectory-api-delete">fDirectory::delete()</a></td>
<td>Directory will not be deleted from the filesystem until transaction is committed, however trying to manipulate the directory (or an sub-files or directories) via the Flourish filesystem classes will result in an exception being thrown.</td>
</tr>
<tr>
<td><a href="#fDirectory-api-getSize">fDirectory::getSize()</a></td>
<td>The disk usage returned will include files that have been deleted during the current transaction and also placeholder files that have not yet been deleted.</td>
</tr>
<tr>
<td><a href="#fDirectory-api-rename">fDirectory::rename()</a></td>
<td>Directory will be renamed immediately, however a small file will be written to the old directory name to allow for a rollback to revert the directory name. The small placeholder file is deleted when a transaction is committed.</td>
</tr>
<tr>
<td><a href="#fDirectory-api-scan">fDirectory::scan()</a></td>
<td>A list of all file and folders contained within the directory will be returned, including files that have been deleted and placeholder files.</td>
</tr>
<tr>
<td><a href="#fDirectory-api-scanRecursive">fDirectory::scanRecursive()</a></td>
<td>A list of all file and folders contained within the directory (and all sub-directories) will be returned, including files that have been deleted and placeholder files.</td>
</tr>
<tr>
<td><a href="#fFile-api-delete">fFile::delete()</a></td>
<td>File will not be deleted from the filesystem until transaction is committed, however trying to manipulate the file via the Flourish filesystem classes will result in an exception being thrown.</td>
</tr>
<tr>
<td><a href="#fFile-api-duplicate">fFile::duplicate()</a></td>
<td>File will be duplicated immediately, however the copy will be deleted if the transaction is rolled back.</td>
</tr>
<tr>
<td><a href="#fFile-api-read">fFile::read()</a></td>
<td>Will always read the most recently written file contents.</td>
</tr>
<tr>
<td><a href="#fFile-api-rename">fFile::rename()</a></td>
<td>File will be renamed immediately, however a small file will be written to the old filename to allow for a rollback to revert the filename. The small placeholder file is deleted when a transaction is committed.</td>
</tr>
<tr>
<td><a href="#fFile-api-write">fFile::write()</a></td>
<td>The new file contents will be written to the file immediately, however the old file contents are saved to allow a rollback to restore the file to its original state. Warning: Large file contents can quickly increase the memory usage of PHP since the original contents are stored in memory.</td>
</tr>
<tr>
<td><a href="#fImage-api-saveChanges">fImage::saveChanges()</a></td>
<td>The image changes will be written to disk immediately. If the new image name is the same as the old one, the old file contents will be kept in memory in case of a rollback. If the new image name is different than the old one, the old file will be kept until the transaction is committed.</td>
</tr>
</tbody></table>

<h3 id="fFilesystem-docs-FilePaths">File Paths</h3>

<h4 id="fFilesystem-docs-HelperMethods">Helper Methods</h4>

<p>
fFilesystem provides three helper functions for dealing with file paths, <a href="#fFilesystem-api-getPathInfo"><code>getPathInfo()</code></a>, <a href="#fFilesystem-api-makeUniqueName"><code>makeUniqueName()</code></a> and <a href="#fFilesystem-api-makeURLSafe"><code>makeURLSafe()</code></a>.
</p>

<p>
<code>getPathInfo()</code> provides basically the same functionality as the PHP function <a class="ext-link" href="http://php.net/pathinfo"><span class="icon">pathinfo()</span></a>, however it provides the <code>filename</code> element for PHP 5.1 and also returns the <code>dirname</code> element with a trailing slash.
</p>

<p>
<code>makeUniqueName()</code> requires a single parameter, <code>$file</code>, to specify the desired filename, and optionally allows a second parameter, <code>$extension</code>, which allows a new file extension to be specified. If a file (or directory) with the path of <code>$file</code> exists, a new filename will be created by appending <code>_copy#</code>. If <code>$extension</code> is provided, the desired filename will use that extension instead of the one included in <code>$file</code>.
</p>

<p>
<code>makeURLSafe()</code> accepts a <code>$filename</code> and changes it to only include lower case characters, numbers and the <code>_</code>, <code>-</code> and <code>.</code> characters.
</p>

<h4 id="fFilesystem-docs-Translation">Translation</h4>

<p>
When displaying filesystem paths to access resources on the web, translation must occur. The static method <a href="#fFilesystem-api-translateToWebPath"><code>translateToWebPath()</code></a> accepts a filesystem path and returns the equivalent web server path. By default it simply removes the <code>$_SERVER['DOCUMENT_ROOT']</code>. Additional translations can be set up by passing the <code>$search</code> string and <code>$replace</code> strings to the static method <a href="#fFilesystem-api-addWebPathTranslation"><code>addWebPathTranslation()</code></a>.
</p>

<p>
Normally it would make sense to define the translations in the site config file, while <code>translateToWebPath()</code> would be used in the page code.
</p>
<pre class="block php"><code>// Config file
fFilesystem::addWebPathTranslation('/var/www/vhosts/example.com/assets', '');</code></pre>
<pre class="block html"><code>&lt;ul&gt;
    &lt;?
    foreach ($files as $file) {
        ?&gt;
        &lt;li&gt;&lt;a href=&quot;&lt;?php echo fFilesystem::translateToWebPath($file-&gt;getPath()) ?&gt;&quot;&gt;&lt;?php echo $file-&gt;getName() ?&gt;&lt;/a&gt;&lt;/li&gt;
        &lt;?
    }
    ?&gt;
&lt;/ul&gt;</code></pre>

<h3 id="fFilesystem-docs-FileSizes">File Sizes</h3>

<p>
In addition to some file path helpers, fFilesystem provides two methods to assist with file size manipulation. The method <a href="#fFilesystem-api-formatFilesize"><code>formatFilesize()</code></a> accepts a filesize in bytes and will return a human-readable size such as <code>2.1tb</code> or <code>5.6mb</code>. <a href="#fFilesystem-api-convertToBytes"><code>convertToBytes()</code></a> takes a human-readable filesize such as <code>200k</code> or <code>1.3GB</code> and converts it into bytes.
</p>

<p>
<code>formatFilesize()</code> accepts up to two parameters with the first, <code>$bytes</code>, being the filesize of the file/directory in bytes and the second optional parameter, <code>$decimal_places</code>, being the number of decimal places to show for the formatted file size.
</p>

<p>
<code>convertToBytes()</code> accepts just a single parameters, <code>$size</code>, which can be any human-readable filesize that includes units of measure such as <code>k</code>, <code>kilo</code>, <code>m</code>, <code>mega</code>, <code>g</code>, <code>giga</code>, <code>t</code>, <code>tera</code>, <code>b</code> and <code>bytes</code>. The result of the method is the filesize converted into bytes.
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fFilesystem-api">fFilesystem API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fFilesystem">Class Documentation</a></li>
		<li><strong><a href="#fFilesystem-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fFilesystem-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fFilesystem-api-addWebPathTranslation">addWebPathTranslation()</a></li>
	  			<li><a href="#fFilesystem-api-begin">begin()</a></li>
	  			<li><a href="#fFilesystem-api-commit">commit()</a></li>
	  			<li><a href="#fFilesystem-api-convertToBytes">convertToBytes()</a></li>
	  			<li><a href="#fFilesystem-api-createObject">createObject()</a></li>
	  			<li><a href="#fFilesystem-api-formatFilesize">formatFilesize()</a></li>
	  			<li><a href="#fFilesystem-api-getPathInfo">getPathInfo()</a></li>
	  			<li class="protected"><a href="#fFilesystem-api-hookDeletedMap">hookDeletedMap()</a></li>
	  			<li class="protected"><a href="#fFilesystem-api-hookFilenameMap">hookFilenameMap()</a></li>
	  			<li><a href="#fFilesystem-api-isInsideTransaction">isInsideTransaction()</a></li>
	  			<li><a href="#fFilesystem-api-makeUniqueName">makeUniqueName()</a></li>
	  			<li><a href="#fFilesystem-api-makeURLSafe">makeURLSafe()</a></li>
	  			<li class="protected"><a href="#fFilesystem-api-recordAppend">recordAppend()</a></li>
	  			<li class="protected"><a href="#fFilesystem-api-recordCreate">recordCreate()</a></li>
	  			<li class="protected"><a href="#fFilesystem-api-recordDelete">recordDelete()</a></li>
	  			<li class="protected"><a href="#fFilesystem-api-recordDuplicate">recordDuplicate()</a></li>
	  			<li class="protected"><a href="#fFilesystem-api-recordRename">recordRename()</a></li>
	  			<li class="protected"><a href="#fFilesystem-api-recordWrite">recordWrite()</a></li>
	  			<li class="protected"><a href="#fFilesystem-api-reset">reset()</a></li>
	  			<li><a href="#fFilesystem-api-rollback">rollback()</a></li>
	  			<li><a href="#fFilesystem-api-translateToWebPath">translateToWebPath()</a></li>
	  			<li class="protected"><a href="#fFilesystem-api-updateDeletedMap">updateDeletedMap()</a></li>
	  			<li class="protected"><a href="#fFilesystem-api-updateFilenameMap">updateFilenameMap()</a></li>
	  			<li class="protected"><a href="#fFilesystem-api-updateFilenameMapForDirectory">updateFilenameMapForDirectory()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fDirectory">fDirectory</a></li>
		<li><a href="#fFile">fFile</a></li>
		<li><a href="#fImage">fImage</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fDirectory">fDirectory</a></li>
		<li><a href="#fEmail">fEmail</a></li>
		<li><a href="#fFile">fFile</a></li>
		<li><a href="#fImage">fImage</a></li>
		<li><a href="#fORMFile">fORMFile</a></li>
		<li><a href="#fSMTP">fSMTP</a></li>
		<li><a href="#fTemplating">fTemplating</a></li>
		<li><a href="#fUpload">fUpload</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b16</span></div>
<p class="short_description">Handles filesystem-level tasks including filesystem transactions and the reference map to keep all <a href="#fFile">fFile</a> and <a href="#fDirectory">fDirectory</a> objects in sync</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b16</th><td>Added a call to clearstatcache() to <a href="#fFilesystem-api-rollback"><tt>rollback()</tt></a> to prevent incorrect data from being returned by <a href="#fFile">fFile</a>getMTime() and <a href="#fFile-api-getSize"><tt>fFile::getSize()</tt></a> <span class="date">11/27/10</span></td></tr><tr><th>1.0.0b15</th><td>Fixed <a href="#fFilesystem-api-translateToWebPath"><tt>translateToWebPath()</tt></a> to handle Windows \s <span class="date">4/9/10</span></td></tr><tr><th>1.0.0b14</th><td>Added <a href="#fFilesystem-api-recordAppend"><tt>recordAppend()</tt></a> <span class="date">3/15/10</span></td></tr><tr><th>1.0.0b13</th><td>Changed the way files/directories deleted in a filesystem transaction are handled, including improvements to the exception that is thrown <span class="date">3/5/10</span></td></tr><tr><th>1.0.0b12</th><td>Updated <a href="#fFilesystem-api-convertToBytes"><tt>convertToBytes()</tt></a> to properly handle integers without a suffix and sizes with fractions <span class="date">11/14/09</span></td></tr><tr><th>1.0.0b11</th><td>Corrected the API documentation for <a href="#fFilesystem-api-getPathInfo"><tt>getPathInfo()</tt></a> <span class="date">9/9/09</span></td></tr><tr><th>1.0.0b10</th><td>Updated updateExceptionMap() to not contain the Exception class parameter hint, allowing NULL to be passed <span class="date">8/20/09</span></td></tr><tr><th>1.0.0b9</th><td>Added some performance tweaks to <a href="#fFilesystem-api-createObject"><tt>createObject()</tt></a> <span class="date">8/6/09</span></td></tr><tr><th>1.0.0b8</th><td>Changed <a href="#fFilesystem-api-formatFilesize"><tt>formatFilesize()</tt></a> to not use decimal places for bytes, add a space before and drop the <tt>B</tt> in suffixes <span class="date">7/12/09</span></td></tr><tr><th>1.0.0b7</th><td>Fixed <a href="#fFilesystem-api-formatFilesize"><tt>formatFilesize()</tt></a> to work when <tt>$bytes</tt> equals zero <span class="date">7/8/09</span></td></tr><tr><th>1.0.0b6</th><td>Changed replacement values in preg_replace() calls to be properly escaped <span class="date">6/11/09</span></td></tr><tr><th>1.0.0b5</th><td>Changed <a href="#fFilesystem-api-formatFilesize"><tt>formatFilesize()</tt></a> to use proper uppercase letters instead of lowercase <span class="date">6/2/09</span></td></tr><tr><th>1.0.0b4</th><td>Added the <a href="#fFilesystem-api-createObject"><tt>createObject()</tt></a> method <span class="date">1/21/09</span></td></tr><tr><th>1.0.0b3</th><td>Removed some unnecessary error suppresion operators <span class="date">12/11/08</span></td></tr><tr><th>1.0.0b2</th><td>Fixed a bug where the filepath and exception maps weren't being updated after a rollback <span class="date">12/11/08</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">3/24/08</span></td></tr></table></div>
<div class="class_methods static" id="fFilesystem-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fFilesystem-api-addWebPathTranslation" class="method static"><span class="resolution">::</span><span class="name">addWebPathTranslation()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Adds a directory to the web path translation list</p>
								<p>The web path conversion list is a list of directory paths that will be  converted (from the beginning of filesystem paths) when preparing a path  for output into HTML.</p><p>By default the <tt>$_SERVER['DOCUMENT_ROOT']</tt> will be converted to a blank  string, in essence stripping it from filesystem paths.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">addWebPathTranslation</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$search_path</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$replace_path</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$search_path</td>
				<td class="param_description">The path to look for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$replace_path</td>
				<td class="param_description">The path to replace with</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fFilesystem-api-begin" class="method static"><span class="resolution">::</span><span class="name">begin()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Starts a filesystem pseudo-transaction, should only be called when no transaction is in progress.</p>
								<p>Flourish filesystem transactions are NOT full ACID-compliant  transactions, but rather more of an filesystem undo buffer which can  return the filesystem to the state when <a href="#fFilesystem-api-begin"><tt>begin()</tt></a> was called. If your PHP  script dies in the middle of an operation this functionality will do  nothing for you and all operations will be retained, except for deletes  which only occur once the transaction is committed.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">begin</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fFilesystem-api-commit" class="method static"><span class="resolution">::</span><span class="name">commit()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Commits a filesystem transaction, should only be called when a transaction is in progress</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">commit</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fFilesystem-api-convertToBytes" class="method static"><span class="resolution">::</span><span class="name">convertToBytes()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Takes a file size including a unit of measure (i.e. kb, GB, M) and converts it to bytes</p>
								<p>Sizes are interpreted using base 2, not base 10. Sizes above 2GB may not  be accurately represented on 32 bit operating systems.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">convertToBytes</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$size</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$size</td>
				<td class="param_description">The size to convert to bytes</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The number of bytes represented by the size
				</p>
			</div>
			<!-- end method static -->
						<!-- start method static -->
			<h5 id="fFilesystem-api-createObject" class="method static"><span class="resolution">::</span><span class="name">createObject()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Takes a filesystem path and creates either an <a href="#fDirectory">fDirectory</a>, <a href="#fFile">fFile</a> or <a href="#fImage">fImage</a> object from it</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fDirectory">fDirectory</a>|<a href="#fFile">fFile</a>|<a href="#fImage">fImage</a></span> <span class="php-identifier">createObject</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$path</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$path</td>
				<td class="param_description">The path to the filesystem object</td>
			  </tr>
						</table>
			</div>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When no path was specified or the path specified does not exist</dd></dl>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fFilesystem-api-formatFilesize" class="method static"><span class="resolution">::</span><span class="name">formatFilesize()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Takes the size of a file in bytes and returns a friendly size in B/K/M/G/T</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">formatFilesize</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$bytes</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$decimal_places</span><span class="php-code">=</span>1 <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$bytes</td>
				<td class="param_description">The size of the file in bytes</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$decimal_places</td>
				<td class="param_description">The number of decimal places to display</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fFilesystem-api-getPathInfo" class="method static"><span class="resolution">::</span><span class="name">getPathInfo()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns info about a path including dirname, basename, extension and filename</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">getPathInfo</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$path</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$element</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$path</td>
				<td class="param_description">The file/directory path to retrieve information about</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$element</td>
				<td class="param_description">The piece of information to return: <tt>'dirname'</tt>, <tt>'basename'</tt>, <tt>'extension'</tt>, or <tt>'filename'</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The file's dirname, basename, extension and filename
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fFilesystem-api-hookDeletedMap" class="protected method static"><span class="resolution">::</span><span class="name">hookDeletedMap()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Hooks a file/directory into the deleted backtrace map entry for that filename</p>
								<p>Since the value is returned by reference, all objects that represent  this file/directory always see the same backtrace.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> &amp;<span class="php-identifier">hookDeletedMap</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$file</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$file</td>
				<td class="param_description">The name of the file or directory</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					Will return <tt>NULL</tt> if no match, or the backtrace array if a match occurs
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fFilesystem-api-hookFilenameMap" class="protected method static"><span class="resolution">::</span><span class="name">hookFilenameMap()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Hooks a file/directory name to the filename map</p>
								<p>Since the value is returned by reference, all objects that represent  this file/directory will always be update on a rename.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> &amp;<span class="php-identifier">hookFilenameMap</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$file</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$file</td>
				<td class="param_description">The name of the file or directory</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					Will return <tt>NULL</tt> if no match, or the exception object if a match occurs
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fFilesystem-api-isInsideTransaction" class="method static"><span class="resolution">::</span><span class="name">isInsideTransaction()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Indicates if a transaction is in progress</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">isInsideTransaction</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fFilesystem-api-makeUniqueName" class="method static"><span class="resolution">::</span><span class="name">makeUniqueName()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns a unique name for a file</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">makeUniqueName</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$file</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$new_extension</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$file</td>
				<td class="param_description">The filename to check</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$new_extension</td>
				<td class="param_description">The new extension for the filename, should not include <tt>.</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The unique file name
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fFilesystem-api-makeURLSafe" class="method static"><span class="resolution">::</span><span class="name">makeURLSafe()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Changes a filename to be safe for URLs by making it all lower case and changing everything but letters, numers, - and . to _</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">makeURLSafe</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$filename</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$filename</td>
				<td class="param_description">The filename to clean up</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The cleaned up filename
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fFilesystem-api-recordAppend" class="protected method static"><span class="resolution">::</span><span class="name">recordAppend()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Stores what data has been added to a file so it can be removed if there is a rollback</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">recordAppend</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fFile">fFile</a></span> <span class="php-var">$file</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$data</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fFile">fFile</a></td>
				<td class="param_name">$file</td>
				<td class="param_description">The file that is being written to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$data</td>
				<td class="param_description">The data being appended to the file</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fFilesystem-api-recordCreate" class="protected method static"><span class="resolution">::</span><span class="name">recordCreate()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Keeps a record of created files so they can be deleted up in case of a rollback</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">recordCreate</span><span class="php-brackets">(</span> <span class="php-vartype">object</span> <span class="php-var">$object</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">object</td>
				<td class="param_name">$object</td>
				<td class="param_description">The new file or directory to get rid of on rollback</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fFilesystem-api-recordDelete" class="protected method static"><span class="resolution">::</span><span class="name">recordDelete()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Keeps track of file and directory names to delete when a transaction is committed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">recordDelete</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fFile">fFile</a>|<a href="#fDirectory">fDirectory</a></span> <span class="php-var">$object</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fFile">fFile</a>|<a href="#fDirectory">fDirectory</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The filesystem object to delete</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fFilesystem-api-recordDuplicate" class="protected method static"><span class="resolution">::</span><span class="name">recordDuplicate()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Keeps a record of duplicated files so they can be cleaned up in case of a rollback</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">recordDuplicate</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fFile">fFile</a></span> <span class="php-var">$file</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fFile">fFile</a></td>
				<td class="param_name">$file</td>
				<td class="param_description">The duplicate file to get rid of on rollback</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fFilesystem-api-recordRename" class="protected method static"><span class="resolution">::</span><span class="name">recordRename()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Keeps a temp file in place of the old filename so the file can be restored during a rollback</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">recordRename</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$old_name</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$new_name</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$old_name</td>
				<td class="param_description">The old file or directory name</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$new_name</td>
				<td class="param_description">The new file or directory name</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fFilesystem-api-recordWrite" class="protected method static"><span class="resolution">::</span><span class="name">recordWrite()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Keeps backup copies of files so they can be restored if there is a rollback</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">recordWrite</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fFile">fFile</a></span> <span class="php-var">$file</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fFile">fFile</a></td>
				<td class="param_name">$file</td>
				<td class="param_description">The file that is being written to</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fFilesystem-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fFilesystem-api-rollback" class="method static"><span class="resolution">::</span><span class="name">rollback()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Rolls back a filesystem transaction, it is safe to rollback when no transaction is in progress</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">rollback</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fFilesystem-api-translateToWebPath" class="method static"><span class="resolution">::</span><span class="name">translateToWebPath()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Takes a filesystem path and translates it to a web path using the rules added</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">translateToWebPath</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$path</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$path</td>
				<td class="param_description">The path to translate</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The filesystem path translated to a web path
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fFilesystem-api-updateDeletedMap" class="protected method static"><span class="resolution">::</span><span class="name">updateDeletedMap()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Updates the deleted backtrace for a file or directory</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">updateDeletedMap</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$file</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$backtrace</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$file</td>
				<td class="param_description">A file or directory name, directories should end in <tt>/</tt> or <tt>\</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$backtrace</td>
				<td class="param_description">The backtrace for this file/directory</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fFilesystem-api-updateFilenameMap" class="protected method static"><span class="resolution">::</span><span class="name">updateFilenameMap()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Updates the filename map, causing all objects representing a file/directory to be updated</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">updateFilenameMap</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$existing_filename</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$new_filename</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$existing_filename</td>
				<td class="param_description">The existing filename</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$new_filename</td>
				<td class="param_description">The new filename</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fFilesystem-api-updateFilenameMapForDirectory" class="protected method static"><span class="resolution">::</span><span class="name">updateFilenameMapForDirectory()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Updates the filename map recursively, causing all objects representing a directory to be updated</p>
								<p>Also updates all files and directories in the specified directory to the new paths.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">updateFilenameMapForDirectory</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$existing_dirname</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$new_dirname</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$existing_dirname</td>
				<td class="param_description">The existing directory name</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$new_dirname</td>
				<td class="param_description">The new dirname</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fGrammar">fGrammar</h2>
<div class="sidebar">
<h3 id="fGrammar-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fGrammar">Class Documentation</a></strong></li>
<li><a href="#fGrammar-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fGrammar-docs-QuantitiesandLists">Quantities and Lists</a></li>
<li><a href="#fGrammar-docs-PluralsandSingulars">Plurals and Singulars</a></li>
<li><a href="#fGrammar-docs-NotationConversion">Notation Conversion</a>
<ul>
<li><a href="#fGrammar-docs-underscore_notation">underscore_notation</a></li>
<li><a href="#fGrammar-docs-CamelCase">CamelCase</a></li>
<li><a href="#fGrammar-docs-HumanFriendlyStrings">Human Friendly Strings</a></li>
<li><a href="#fGrammar-docs-FixingNotationConversionIssues">Fixing Notation Conversion Issues</a></li>
</ul>
</li>
<li><a href="#fGrammar-docs-Localization">Localization</a></li>
</ul>
</div>

<p>
The fGrammar class was built to handle various grammar tasks. English is the default language, however there is functionality to allow for some localization.
</p>

<h3 id="fGrammar-docs-QuantitiesandLists">Quantities and Lists</h3>

<p>
Due to the way the English language works, most messages and output that references quantities will need to change when there is a single item in question, or a quantity other than one. For instance, you may have a message say:
</p>
<pre><code>There are currently 15 users.</code></pre>

<p>
 Which is great as long as your quantity is zero or greater than one. If there is only a single user, the message should change to:
</p>
<pre><code>There is currently one user.</code></pre>

<p>
 Certainly some conditional code could be written to handle the situation, but why introduce a big <code>if</code> statement (or worse, an unreadable tertiary statement) in the middle of display code? The fGrammar class provides a convenient method to handle such situations, <a href="#fGrammar-api-inflectOnQuantity"><code>inflectOnQuantity()</code></a>. 
</p>

<p>
<code>inflectOnQuantity()</code> has three required parameters and one optional one we will talk about in a minute. The first parameter is the quantity being measured. This can be an integer, or an array of items. If an array is passed, the size of the array will be used for the quantity. The second parameter is the string to be selected if quantity is one, the third parameter is the string to be selected if the quantity is not one. The third parameter can include <code>%d</code> to be replaced with the actual quantity.
</p>
<pre class="block php"><code>echo 'There ' . fGrammar::inflectOnQuantity(1, 'is one user', 'are %d users') . &quot;.\n&quot;;
echo 'There ' . fGrammar::inflectOnQuantity(5, 'is one user', 'are %d users') . &quot;.&quot;;</code></pre>

<p>
 The output from the code above would be:
</p>
<pre class="block html"><code>There is one user.
There are 5 users.</code></pre>

<p>
 The optional fourth parameter is a flag to indicate if you want single digit quantities to be replaced by the word for that quantity:
</p>
<pre class="block php"><code>echo 'There ' . fGrammar::inflectOnQuantity(5, 'is one user', 'are %d users', TRUE) . &quot;.&quot;;</code></pre>

<p>
 Would result in:
</p>
<pre class="block html"><code>There are five users.</code></pre>

<p>
 Another common situation is to have a variable number of terms to display, however it is desirable to produce a well-formed sentence. The <a href="#fGrammar-api-joinArray"><code>joinArray()</code></a> method will take an array of strings and will return the string in a well-formed manner. Here are some examples:
</p>
<pre class="block php"><code>echo fGrammar::joinArray(array()) . &quot;\n&quot;;
echo fGrammar::joinArray(array('one')) . &quot;\n&quot;;
echo fGrammar::joinArray(array('one', 'two')) . &quot;\n&quot;;
echo fGrammar::joinArray(array('one', 'two', 'three')) . &quot;\n&quot;;
echo fGrammar::joinArray(array('one', 'two', 'three', 'four'));</code></pre>

<p>
 Here would be the HTML output:
</p>
<pre class="block html"><code>one
one and two
one, two, and three
one, two, three, and four</code></pre>

<h3 id="fGrammar-docs-PluralsandSingulars">Plurals and Singulars</h3>

<p>
Although it is unlikely that this functionality will be necessary for the majority of web sites and applications, it is good to talk a little about plurals and singulars. Most of the ORM code in Flourish uses the <a href="#fGrammar-api-pluralize"><code>pluralize()</code></a> and <a href="#fGrammar-api-singularize"><code>singularize()</code></a> methods to handle detecting what a developer is trying to do.
</p>

<p>
Here are some examples of how <code>pluralize()</code> and <code>singularize()</code> can be used:
</p>
<pre class="block php"><code>// Simple plural and singular forms
echo fGrammar::pluralize('user') . &quot;\n&quot;;
echo fGrammar::singularize('users') . &quot;\n&quot;;

// Most irregular forms are automatically handed
echo fGrammar::pluralize('person') . &quot;\n&quot;;
echo fGrammar::singularize('people');</code></pre>

<p>
 The output would be:
</p>
<pre><code>users
user
people
person</code></pre>

<p>
 Unfortunately the English language has some rather complex rules about pluralization with quite a number of exceptions. To compound the matter further, singularization rules are almost non-existent in a formalized nature, and mostly have to be reverse engineered from the pluralization rules. Finally, many website and applications use acronyms heavily, which often times do not follow the same rules as words with similar structures.
</p>

<p>
Because of these issues, a day will come when fGrammar will not get a pluralization or singularization of a noun correct. As a fall-back, the static method <a href="#fGrammar-api-addSingularPluralRule"><code>addSingularPluralRule()</code></a> has been included. Simply pass the singular form of a noun as the first parameter and the plural form as the second parameter. All subsequent requests to <code>singularize()</code> and <code>pluralize()</code> will check this rule before the default rules. 
</p>

<p>
Here is a rather contrived example of when to use <code>addSingularPluralRule()</code>:
</p>
<pre class="block php"><code>// These will produce incorrect results
echo fGrammar::pluralize('phalanx') . &quot;\n&quot;;
echo fGrammar::singularize('phalanxes') . &quot;\n&quot;;

// Add a custom rule for phalanx
fGrammar::addSingularPluralRule('phalanx', 'phalanxes');

// Now the singularization and pluralization work properly
echo fGrammar::pluralize('phalanx') . &quot;\n&quot;;
echo fGrammar::singularize('phalanxes') . &quot;\n&quot;;</code></pre>

<p>
 The output of the PHP above would be:
</p>
<pre><code>phalanxs
phalanxe
phalanxes
phalanx</code></pre>

<h3 id="fGrammar-docs-NotationConversion">Notation Conversion</h3>

<p>
Notation conversion is also used heavily by the ORM code in Flourish to translate between the various coding standards that exist.
</p>

<h4 id="fGrammar-docs-underscore_notation">underscore_notation</h4>

<p>
Underscore notation is characterized by all lower-case letters with underscores separating words, like <code>underscore_notation</code>.
</p>

<p>
The method <a href="#fGrammar-api-underscorize"><code>underscorize()</code></a> will convert camel case notation or space separated words to underscore notation.
</p>
<pre class="block php"><code>echo fGrammar::underscorize('FirstName') . &quot;\n&quot;;
echo fGrammar::underscorize('Last Name') . &quot;\n&quot;;
echo fGrammar::underscorize('middleInitial');</code></pre>

<p>
 would produce the following output:
</p>
<pre><code>first_name
last_name
middle_initial</code></pre>

<h4 id="fGrammar-docs-CamelCase">CamelCase</h4>

<p>
Camel case notation uses upper and lower-case letters, with words being separated by a capital letter, like <code>CamelCase</code>. Lower camel case is identical to camel case, except the first letter is always lower-case, like <code>lowerCamelCase</code>.
</p>

<p>
The method <a href="#fGrammar-api-camelize"><code>camelize()</code></a> will convert underscore notation or space separated words to camelCase. The first parameter, <code>$string</code> is the string to be converted and the second parameter <code>$upper</code> indicates if the output should be UpperCamelCase instead of lowerCamelCase.
</p>
<pre class="block php"><code>echo fGrammar::camelize('first_name', FALSE) . &quot;\n&quot;;
echo fGrammar::camelize('Last name', FALSE) . &quot;\n&quot;;
echo fGrammar::camelize('MIDDLE INITIAL', TRUE);</code></pre>

<p>
 would produce the following output:
</p>
<pre><code>firstName
lastName
MiddleInitial</code></pre>

<h4 id="fGrammar-docs-HumanFriendlyStrings">Human Friendly Strings</h4>

<p>
In addition to converting between these two formats, it is sometimes required to convert from underscore or camel case notation to a human friendly form. <a href="#fGrammar-api-humanize"><code>humanize()</code></a> will take any underscore notation or camelCase string and produce output containing spaces and the first letter of each word being capitalized. For specific words know to be all capitals, it will change those words to all capitals. 
</p>
<pre class="block php"><code>echo fGrammar::humanize('first_name') . &quot;\n&quot;;
echo fGrammar::humanize('LastName') . &quot;\n&quot;;
echo fGrammar::humanize('middleInitial') . &quot;\n&quot;;
echo fGrammar::humanize('PdfUpload');</code></pre>

<p>
 would produce the following output:
</p>
<pre><code>First Name
Last Name
Middle Initial
PDF Upload</code></pre>

<h4 id="fGrammar-docs-FixingNotationConversionIssues">Fixing Notation Conversion Issues</h4>

<p>
Occasionally conversion from camelCase to underscore_notation doesnt work properly due to the splitting dynamics. In <code>underscorize()</code>, any number or capital letter following a lower-case letter will cause an <code>_</code> to be inserted. Thus, if a number exists in the middle of an acronym, the conversion will not occur correctly.
</p>

<p>
To fix such situation, pass the <code>$camel_case</code> version of the string and the <code>$underscore_notation</code> version of the string to <a href="#fGrammar-api-addCamelUnderscoreRule"><code>addCamelUnderscoreRule()</code></a>:
</p>
<pre class="block php"><code>// In this situation the underscores are put in the wrong place
echo fGrammar::underscorize('w3cCompliant') . &quot;\n&quot;;

fGrammar::addCamelUnderscoreRule('W3cCompliant', 'w3c_compliant');

// In this situation the underscores are put in the right place
echo fGrammar::underscorize('w3cCompliant');</code></pre>

<p>
 The above PHP would output:
</p>
<pre><code>w_3c_compliant
w3c_compliant</code></pre>

<p>
 In addition, calling <code>humanize()</code> can sometimes create results that are not desired. The method uses a simple system of splitting words and capitalizing the first letter. In some situations more than one letter need to be capitalized. The method <a href="#fGrammar-api-addHumanizeRule"><code>addHumanizeRule()</code></a> allows fixing incorrect results.
</p>
<pre class="block php"><code>echo fGrammar::humanize('w3c_compliant') . &quot;\n&quot;;

fGrammar::addHumanizeRule('w3c_compliant', 'W3C Compliant');

echo fGrammar::humanize('w3c_compliant');</code></pre>

<p>
 would output the following:
</p>
<pre><code>W3c Compliant
W3C Compliant</code></pre>

<h3 id="fGrammar-docs-Localization">Localization</h3>

<p>
Localization of the method <a href="#fGrammar-api-joinArray"><code>joinArray()</code></a> can be accomplished by using <a href="#fGrammar-api-registerJoinArrayCallback"><code>registerJoinArrayCallback()</code></a>. This method accepts a single callback and all calls made to <code>joinArray()</code> are then sent to the registered callback. Obviously the method parameters and return value of the callback should match the real method.
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fGrammar-api">fGrammar API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fGrammar">Class Documentation</a></li>
		<li><strong><a href="#fGrammar-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fGrammar-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fGrammar-api-addCamelUnderscoreRule">addCamelUnderscoreRule()</a></li>
	  			<li><a href="#fGrammar-api-addHumanizeRule">addHumanizeRule()</a></li>
	  			<li><a href="#fGrammar-api-addSingularPluralRule">addSingularPluralRule()</a></li>
	  			<li><a href="#fGrammar-api-camelize">camelize()</a></li>
	  			<li class="protected"><a href="#fGrammar-api-compose">compose()</a></li>
	  			<li><a href="#fGrammar-api-humanize">humanize()</a></li>
	  			<li><a href="#fGrammar-api-inflectOnQuantity">inflectOnQuantity()</a></li>
	  			<li><a href="#fGrammar-api-joinArray">joinArray()</a></li>
	  			<li><a href="#fGrammar-api-pluralize">pluralize()</a></li>
	  			<li><a href="#fGrammar-api-registerJoinArrayCallback">registerJoinArrayCallback()</a></li>
	  			<li class="protected"><a href="#fGrammar-api-reset">reset()</a></li>
	  			<li><a href="#fGrammar-api-singularize">singularize()</a></li>
	  			<li><a href="#fGrammar-api-stem">stem()</a></li>
	  			<li><a href="#fGrammar-api-underscorize">underscorize()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fUTF8">fUTF8</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fCRUD">fCRUD</a></li>
		<li><a href="#fDate">fDate</a></li>
		<li><a href="#fImage">fImage</a></li>
		<li><a href="#fORM">fORM</a></li>
		<li><a href="#fORMColumn">fORMColumn</a></li>
		<li><a href="#fORMDate">fORMDate</a></li>
		<li><a href="#fORMFile">fORMFile</a></li>
		<li><a href="#fORMMoney">fORMMoney</a></li>
		<li><a href="#fORMOrdering">fORMOrdering</a></li>
		<li><a href="#fORMRelated">fORMRelated</a></li>
		<li><a href="#fORMValidation">fORMValidation</a></li>
		<li><a href="#fPagination">fPagination</a></li>
		<li><a href="#fRecordSet">fRecordSet</a></li>
		<li><a href="#fTemplating">fTemplating</a></li>
		<li><a href="#fTime">fTime</a></li>
		<li><a href="#fTimestamp">fTimestamp</a></li>
		<li><a href="#fValidation">fValidation</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b15</span></div>
<p class="short_description">Provides english word inflection, notation conversion, grammar helpers and internationlization support</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b15</th><td>Added length checking to ensure blank strings are not being passed to various methods <span class="date">6/20/11</span></td></tr><tr><th>1.0.0b14</th><td>Fixed a bug in singularization that would affect words containing the substring <tt>mice</tt> or <tt>lice</tt> <span class="date">2/24/11</span></td></tr><tr><th>1.0.0b13</th><td>Fixed the pluralization of video <span class="date">8/10/10</span></td></tr><tr><th>1.0.0b12</th><td>Updated <a href="#fGrammar-api-singularize"><tt>singularize()</tt></a> and <a href="#fGrammar-api-pluralize"><tt>pluralize()</tt></a> to be able to handle underscore_CamelCase <span class="date">8/6/10</span></td></tr><tr><th>1.0.0b11</th><td>Fixed custom camelCase to underscore_notation rules <span class="date">6/23/10</span></td></tr><tr><th>1.0.0b10</th><td>Removed <tt>e</tt> flag from preg_replace() calls <span class="date">6/8/10</span></td></tr><tr><th>1.0.0b9</th><td>Fixed a bug with <a href="#fGrammar-api-camelize"><tt>camelize()</tt></a> and human-friendly strings <span class="date">6/8/10</span></td></tr><tr><th>1.0.0b8</th><td>Added the <a href="#fGrammar-api-stem"><tt>stem()</tt></a> method <span class="date">5/27/10</span></td></tr><tr><th>1.0.0b7</th><td>Added the <tt>$return_error</tt> parameter to <a href="#fGrammar-api-pluralize"><tt>pluralize()</tt></a> and <a href="#fGrammar-api-singularize"><tt>singularize()</tt></a> <span class="date">3/30/10</span></td></tr><tr><th>1.0.0b6</th><td>Added missing <a href="#fGrammar-api-compose"><tt>compose()</tt></a> method <span class="date">3/3/10</span></td></tr><tr><th>1.0.0b5</th><td>Fixed <a href="#fGrammar-api-reset"><tt>reset()</tt></a> to properly reset the singularization and pluralization rules <span class="date">10/28/09</span></td></tr><tr><th>1.0.0b4</th><td>Added caching for various methods - provided significant performance boost to ORM <span class="date">6/15/09</span></td></tr><tr><th>1.0.0b3</th><td>Changed replacement values in preg_replace() calls to be properly escaped <span class="date">6/11/09</span></td></tr><tr><th>1.0.0b2</th><td>Fixed a bug where some words would lose capitalization with <a href="#fGrammar-api-pluralize"><tt>pluralize()</tt></a> and <a href="#fGrammar-api-singularize"><tt>singularize()</tt></a> <span class="date">1/25/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">9/25/07</span></td></tr></table></div>
<div class="class_methods static" id="fGrammar-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fGrammar-api-addCamelUnderscoreRule" class="method static"><span class="resolution">::</span><span class="name">addCamelUnderscoreRule()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Adds a custom <tt>camelCase</tt> to <tt>underscore_notation</tt> and <tt>underscore_notation</tt> to <tt>camelCase</tt> rule</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">addCamelUnderscoreRule</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$camel_case</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$underscore_notation</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$camel_case</td>
				<td class="param_description">The lower <tt>camelCase</tt> version of the string</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$underscore_notation</td>
				<td class="param_description">The <tt>underscore_notation</tt> version of the string</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fGrammar-api-addHumanizeRule" class="method static"><span class="resolution">::</span><span class="name">addHumanizeRule()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Adds a custom mapping of a non-humanized string to a humanized string for humanize()</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">addHumanizeRule</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$non_humanized_string</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$humanized_string</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$non_humanized_string</td>
				<td class="param_description">The non-humanized string</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$humanized_string</td>
				<td class="param_description">The humanized string</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fGrammar-api-addSingularPluralRule" class="method static"><span class="resolution">::</span><span class="name">addSingularPluralRule()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Adds a custom singular to plural and plural to singular rule for pluralize() and singularize()</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">addSingularPluralRule</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$singular</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$plural</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$singular</td>
				<td class="param_description">The singular version of the noun</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$plural</td>
				<td class="param_description">The plural version of the noun</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fGrammar-api-camelize" class="method static"><span class="resolution">::</span><span class="name">camelize()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Converts an <tt>underscore_notation</tt>, human-friendly or <tt>camelCase</tt> string to <tt>camelCase</tt></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">camelize</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$upper</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to convert</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$upper</td>
				<td class="param_description">If the camel case should be <tt>UpperCamelCase</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The converted string
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fGrammar-api-compose" class="protected method static"><span class="resolution">::</span><span class="name">compose()</span> <span class="visibility">protected</span></h5>
			<div class="protected method static">
							<div class="method_description">
									<p>Composes text using <a href="#fText">fText</a> if loaded</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">compose</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$component</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message to compose</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$component <em>[, ... ]</em></td>
				<td class="param_description">A string or number to insert into the message</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The composed and possible translated message
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fGrammar-api-humanize" class="method static"><span class="resolution">::</span><span class="name">humanize()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Makes an <tt>underscore_notation</tt>, <tt>camelCase</tt>, or human-friendly string into a human-friendly string</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">humanize</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to humanize</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The converted string
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fGrammar-api-inflectOnQuantity" class="method static"><span class="resolution">::</span><span class="name">inflectOnQuantity()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns the singular or plural form of the word or based on the quantity specified</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">inflectOnQuantity</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$quantity</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$singular_form</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$plural_form</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$use_words_for_single_digits</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$quantity</td>
				<td class="param_description">The quantity (integer) or an array of objects to count</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$singular_form</td>
				<td class="param_description">The string to be returned for when <tt>$quantity = 1</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$plural_form</td>
				<td class="param_description">The string to be returned for when <tt>$quantity != 1</tt>, use <tt>%d</tt> to place the quantity in the string</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$use_words_for_single_digits</td>
				<td class="param_description">If the numbers 0 to 9 should be written out as words</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fGrammar-api-joinArray" class="method static"><span class="resolution">::</span><span class="name">joinArray()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns the passed terms joined together using rule 2 from Strunk &amp; White's 'The Elements of Style'</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">joinArray</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$strings</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$type</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$strings</td>
				<td class="param_description">An array of strings to be joined together</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$type</td>
				<td class="param_description">The type of join to perform, <tt>'and'</tt> or <tt>'or'</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The terms joined together
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fGrammar-api-pluralize" class="method static"><span class="resolution">::</span><span class="name">pluralize()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns the plural version of a singular noun</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">pluralize</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$singular_noun</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$return_error</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$singular_noun</td>
				<td class="param_description">The singular noun to pluralize</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$return_error</td>
				<td class="param_description">If this is <tt>TRUE</tt> and the noun can't be pluralized, <tt>FALSE</tt> will be returned instead</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The pluralized noun
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fGrammar-api-registerJoinArrayCallback" class="method static"><span class="resolution">::</span><span class="name">registerJoinArrayCallback()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Allows replacing the joinArray() function with a user defined function</p>
								<p>This would be most useful for changing <a href="#fGrammar-api-joinArray"><tt>joinArray()</tt></a> to work with  languages other than English.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">registerJoinArrayCallback</span><span class="php-brackets">(</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The function to replace <a href="#fGrammar-api-joinArray"><tt>joinArray()</tt></a> with - should accept the same parameters and return the same type</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fGrammar-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fGrammar-api-singularize" class="method static"><span class="resolution">::</span><span class="name">singularize()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns the singular version of a plural noun</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">singularize</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$plural_noun</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$return_error</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$plural_noun</td>
				<td class="param_description">The plural noun to singularize</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$return_error</td>
				<td class="param_description">If this is <tt>TRUE</tt> and the noun can't be pluralized, <tt>FALSE</tt> will be returned instead</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The singularized noun
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fGrammar-api-stem" class="method static"><span class="resolution">::</span><span class="name">stem()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Uses the Porter Stemming algorithm to create the stem of a word, which is useful for searching</p>
								<p>See <a class="ext-link" href="http://tartarus.org/~martin/PorterStemmer/"><span class="icon">http://tartarus.org/~martin/PorterStemmer/</span></a> for details about the  algorithm.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">stem</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$word</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$word</td>
				<td class="param_description">The word to get the stem of</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The stem of the word
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fGrammar-api-underscorize" class="method static"><span class="resolution">::</span><span class="name">underscorize()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Converts a <tt>camelCase</tt>, human-friendly or <tt>underscore_notation</tt> string to <tt>underscore_notation</tt></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">underscorize</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to convert</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The converted string
				</p>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fHTML">fHTML</h2>
<div class="sidebar">
<h3 id="fHTML-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fHTML">Class Documentation</a></strong></li>
<li><a href="#fHTML-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fHTML-docs-EscapingContentSecurity">Escaping Content (Security)</a>
<ul>
<li><a href="#fHTML-docs-DisallowingHTML">Disallowing HTML</a></li>
<li><a href="#fHTML-docs-AllowingHTML">Allowing HTML</a></li>
</ul>
</li>
<li><a href="#fHTML-docs-Formatting">Formatting</a></li>
<li><a href="#fHTML-docs-SelectOptionsandCheckboxes">Select Options and Checkboxes</a></li>
<li><a href="#fHTML-docs-SendingtheContentTypeHeader">Sending the Content Type Header</a></li>
</ul>
</div>

<p>
The fHTML class helps to manipulate text so that it can be reliably converted for HTML display.
</p>

<h3 id="fHTML-docs-EscapingContentSecurity">Escaping Content (Security)</h3>

<p>
When developing websites that allow for user-generated content, it can be challenging to ensure that all content entered is displayed as it was intended to be displayed. Certain content may allow HTML, while other may not. The fHTML class provides two static methods for escaping data to be displayed, <a href="#fHTML-api-encode"><code>encode()</code></a> and <a href="#fHTML-api-prepare"><code>prepare()</code></a>. Both methods treat all content as UTF-8.
</p>

<h4 id="fHTML-docs-DisallowingHTML">Disallowing HTML</h4>

<p>
If there is a need to escape content that does not allow HTML, the static method <a href="#fHTML-api-encode"><code>encode()</code></a> should be used. This method will encode special characters, including the &lt; and &gt; characters used for HTML tags. Because of this, all HTML tags will be displayed as plain text, and will not function as HTML.
</p>

<p>
<strong>It is very important that all untrusted user input be escaped using this method to prevent cross-site scripting attacks.</strong> See the <a href="#Security-docs">security page</a> for more information.
</p>
<pre class="block php"><code>echo fHTML::encode($form_submitted_content);</code></pre>

<p>
 <code>encode()</code> also properly escapes characters for display inside of HTML <code>input</code>, <code>textarea</code> and <code>select</code> tags.
</p>

<h4 id="fHTML-docs-AllowingHTML">Allowing HTML</h4>

<p>
<code>prepare()</code> will ensure that all special characters in the provided content will be properly displayed, while allowing HTML tags and entities. <strong>This method should only be used for content coming from trusted sources otherwise the code will be vulnerable to cross-site scripting attacks.</strong>
</p>
<pre class="block php"><code>echo fHTML::prepare($trusted_content);</code></pre>

<h3 id="fHTML-docs-Formatting">Formatting</h3>

<p>
In addition to preparing content for valid display by encoding content, often times content needs to have some basic HTML formatting applied to it. The fHTML class provides two methods, <a href="#fHTML-api-convertNewlines"><code>convertNewlines()</code></a> and <a href="#fHTML-api-makeLinks"><code>makeLinks()</code></a>, to help with common formatting tasks.
</p>

<p>
<code>convertNewlines()</code> will look at content as a mixture of plain text and HTML. If neither the <code>&lt;br /&gt;</code> or any block-level HTML tags are found, the content will have all newline characters converted to <code>&lt;br /&gt;</code>. If the converse is true, the content will be returned as is.
</p>

<p>
Below is an example of the conversion happening:
</p>
<pre class="block php"><code>// First example, no block-level HTML
$content = &lt;&lt;&lt;TEXT
Here is content to be formatted.

Newline characters will be converted into HTML break tags.
TEXT;
echo fHTML::convertNewlines($content);</code></pre>

<p>
 The output from above would be:
</p>
<pre class="block html"><code>Here is content to be formatted.&lt;br /&gt;
&lt;br /&gt;
Newline characters will be converted into HTML break tags.</code></pre>

<p>
 Here is an example of newlines being left as-is due to block-level HTML:
</p>
<pre class="block php"><code>// Second example, block-level HTML present
$content2 = &lt;&lt;&lt;TEXT
&lt;p&gt;
    Here is content to be formatted.
&lt;/p&gt;
&lt;p&gt;
   Newline characters will be left alone since there are block-level HTML tags present.
&lt;/p&gt;
TEXT;
echo fHTML::convertNewlines($content2);</code></pre>

<p>
 The output from above would be:
</p>
<pre class="block html"><code>&lt;p&gt;
    Here is content to be formatted.
&lt;/p&gt;
&lt;p&gt;
   Newline characters will be left alone since there are block-level HTML tags present.
&lt;/p&gt;</code></pre>

<p>
 The <a href="#fHTML-api-makeLinks"><code>makeLinks()</code></a> method will parse through a string and create HTML links out of anything that resembles a URL or email address, as long as it is not already part of an <code>&lt;a&gt;</code> tag.
</p>

<p>
Here is an example of it in action:
</p>
<pre class="block php"><code>$content  = &quot;Example 1: www.example.com.\n&quot;;
$content .= &quot;Example 2: https://example.com.\n&quot;;
$content .= &quot;Example 3: john@example.com.\n&quot;;
$content .= &quot;Example 4: ftp://john:password@example.com.\n&quot;;
$content .= &quot;Example 5: www.example.co.uk.\n&quot;;
$content .= &quot;Example 6: john@example.co.uk.\n&quot;;
$content .= 'Example 7: &lt;a href=&quot;http://example.com&quot;&gt;http://example.com&lt;/a&gt;.';

echo fHTML::makeLinks($content);</code></pre>

<p>
 The output would be:
</p>
<pre class="block html"><code>Example 1: &lt;a href=&quot;http://www.example.com&quot;&gt;www.example.com&lt;/a&gt;.
Example 2: &lt;a href=&quot;https://example.com&quot;&gt;https://example.com&lt;/a&gt;.
Example 3: &lt;a href=&quot;mailto:john@example.com&quot;&gt;john@example.com&lt;/a&gt;.
Example 4: &lt;a href=&quot;ftp://john:password@example.com&quot;&gt;ftp://john:password@example.com&lt;/a&gt;.
Example 5: &lt;a href=&quot;http://www.example.co.uk&quot;&gt;www.example.co.uk&lt;/a&gt;.
Example 6: &lt;a href=&quot;mailto:john@example.co.uk&quot;&gt;john@example.co.uk&lt;/a&gt;.
Example 7: &lt;a href=&quot;http://example.com&quot;&gt;http://example.com&lt;/a&gt;.</code></pre>

<h3 id="fHTML-docs-SelectOptionsandCheckboxes">Select Options and Checkboxes</h3>

<p>
When displaying <code>select</code> and <code>checkbox</code> inputs it is necessary to print specific attributes to specify the current state of the inputs. The fHTML class provides two helper methods to simply this process: <a href="#fHTML-api-printOption"><code>printOption()</code></a> and <a href="#fHTML-api-showChecked"><code>showChecked()</code></a>.
</p>

<p>
<a href="#fHTML-api-printOption"><code>printOption()</code></a> will display a <code>select</code> input <code>option</code> tag while marking it with <code>selected=&quot;selected&quot;</code> if the options value equals the currently selected value. The following PHP:
</p>
<pre class="block html"><code>&lt;select name=&quot;status&quot;&gt;
    &lt;?
    $statuses = array(
        'active'   =&gt; 'Active',
        'inactive' =&gt; 'Inactive',
        'pending'  =&gt; 'Pending'
    );
    $current_status = 'active';
    
    foreach ($statuses as $value =&gt; $text) {
        fHTML::printOption($text, $value, $current_status);
    }
    ?&gt;
&lt;/select&gt;</code></pre>

<p>
 would produce the following HTML:
</p>
<pre class="block html"><code>&lt;select name=&quot;status&quot;&gt;
    &lt;option value=&quot;active&quot; selected=&quot;selected&quot;&gt;Active&lt;/option&gt;
    &lt;option value=&quot;inactive&quot;&gt;Inactive&lt;/option&gt;
    &lt;option value=&quot;pending&quot;&gt;Pending&lt;/option&gt;
&lt;/select&gt;</code></pre>

<p>
 <a href="#fHTML-api-showChecked"><code>showChecked()</code></a> provides similar functionality for checkboxes, however since checkboxes can include many different attributes, <code>showChecked()</code> only handles printing the <code>checked=&quot;checked&quot;</code> part. Here is an example of using <code>showChecked()</code>:
</p>
<pre class="block html"><code>&lt;?php
$is_authenticated = TRUE;
$is_super_admin   = FALSE;
?&gt;
&lt;p&gt;
    &lt;label for=&quot;form-is_authenticated&quot;&gt;Is Authenticated&lt;/label&gt;&lt;br /&gt;
    &lt;input type=&quot;checkbox&quot; id=&quot;form-is_authenticated&quot; name=&quot;is_authenticated&quot; value=&quot;1&quot; &lt;? fHTML::showChecked($is_authenticated, TRUE) ?&gt; /&gt;
&lt;/p&gt;
&lt;p&gt;
    &lt;label for=&quot;form-is_super_admin&quot;&gt;Is Super Admin&lt;/label&gt;&lt;br /&gt;
    &lt;input type=&quot;checkbox&quot; id=&quot;form-is_super_admin&quot; name=&quot;is_super_admin&quot; value=&quot;1&quot; &lt;? fHTML::showChecked($is_super_admin, TRUE) ?&gt; /&gt;
&lt;/p&gt;</code></pre>

<p>
 would produce the following output:
</p>
<pre class="block html"><code>&lt;p&gt;
    &lt;label for=&quot;form-is_authenticated&quot;&gt;Is Authenticated&lt;/label&gt;&lt;br /&gt;
    &lt;input type=&quot;checkbox&quot; id=&quot;form-is_authenticated&quot; name=&quot;is_authenticated&quot; value=&quot;1&quot; checked=&quot;checked&quot; /&gt;
&lt;/p&gt;
&lt;p&gt;
    &lt;label for=&quot;form-is_super_admin&quot;&gt;Is Super Admin&lt;/label&gt;&lt;br /&gt;
    &lt;input type=&quot;checkbox&quot; id=&quot;form-is_super_admin&quot; name=&quot;is_super_admin&quot; value=&quot;1&quot; /&gt;
&lt;/p&gt;</code></pre>

<h3 id="fHTML-docs-SendingtheContentTypeHeader">Sending the Content Type Header</h3>

<p>
If you default content is HTML, the method <a href="#fHTML-api-sendHeader"><code>sendHeader()</code></a> should be called ensure that the <code>Content-Type</code> header is set to the correct value of <code>text/html; charset=utf-8</code>. The <code>utf-8</code> character set encoding is specified since all of Flourish is built to work with UTF-8.
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fHTML-api">fHTML API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fHTML">Class Documentation</a></li>
		<li><strong><a href="#fHTML-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fHTML-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fHTML-api-containsBlockLevelHTML">containsBlockLevelHTML()</a></li>
	  			<li><a href="#fHTML-api-convertNewlines">convertNewlines()</a></li>
	  			<li><a href="#fHTML-api-decode">decode()</a></li>
	  			<li><a href="#fHTML-api-encode">encode()</a></li>
	  			<li><a href="#fHTML-api-makeLinks">makeLinks()</a></li>
	  			<li><a href="#fHTML-api-prepare">prepare()</a></li>
	  			<li><a href="#fHTML-api-printOption">printOption()</a></li>
	  			<li><a href="#fHTML-api-sendHeader">sendHeader()</a></li>
	  			<li><a href="#fHTML-api-show">show()</a></li>
	  			<li><a href="#fHTML-api-showChecked">showChecked()</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fCRUD">fCRUD</a></li>
		<li><a href="#fMessaging">fMessaging</a></li>
		<li><a href="#fORMColumn">fORMColumn</a></li>
		<li><a href="#fORMFile">fORMFile</a></li>
		<li><a href="#fORMMoney">fORMMoney</a></li>
		<li><a href="#fPagination">fPagination</a></li>
		<li><a href="#fRequest">fRequest</a></li>
		<li><a href="#fTemplating">fTemplating</a></li>
		<li><a href="#fURL">fURL</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b8</span></div>
<p class="short_description">Provides HTML-related methods</p>
<div class="description"><p>This class is implemented to use the UTF-8 character encoding. Please see  <a href="#UTF-8-docs">UTF-8</a> for more information.</p></div>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b8</th><td>Changed <a href="#fHTML-api-encode"><tt>encode()</tt></a> and <a href="#fHTML-api-prepare"><tt>prepare()</tt></a> to handle arrays of strings <span class="date">5/19/10</span></td></tr><tr><th>1.0.0b7</th><td>Fixed a bug where some conditional comments were causing the regex in <a href="#fHTML-api-prepare"><tt>prepare()</tt></a> to break <span class="date">11/4/09</span></td></tr><tr><th>1.0.0b6</th><td>Updated <a href="#fHTML-api-showChecked"><tt>showChecked()</tt></a> to require strict equality if one parameter is <tt>NULL</tt> <span class="date">6/2/09</span></td></tr><tr><th>1.0.0b5</th><td>Fixed <a href="#fHTML-api-prepare"><tt>prepare()</tt></a> so it does not encode multi-line HTML comments <span class="date">5/9/09</span></td></tr><tr><th>1.0.0b4</th><td>Added methods <a href="#fHTML-api-printOption"><tt>printOption()</tt></a> and <a href="#fHTML-api-showChecked"><tt>showChecked()</tt></a> that were in <a href="#fCRUD">fCRUD</a> <span class="date">5/8/09</span></td></tr><tr><th>1.0.0b3</th><td>Fixed a bug where <a href="#fHTML-api-makeLinks"><tt>makeLinks()</tt></a> would double-link some URLs <span class="date">1/8/09</span></td></tr><tr><th>1.0.0b2</th><td>Fixed a bug where <a href="#fHTML-api-makeLinks"><tt>makeLinks()</tt></a> would create links out of URLs in HTML tags <span class="date">12/5/08</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">9/25/07</span></td></tr></table></div>
<div class="class_methods static" id="fHTML-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fHTML-api-containsBlockLevelHTML" class="method static"><span class="resolution">::</span><span class="name">containsBlockLevelHTML()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Checks a string of HTML for block level elements</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">containsBlockLevelHTML</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$content</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$content</td>
				<td class="param_description">The HTML content to check</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the content contains a block level tag
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fHTML-api-convertNewlines" class="method static"><span class="resolution">::</span><span class="name">convertNewlines()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Converts newlines into <tt>br</tt> tags as long as there aren't any block-level HTML tags present</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">convertNewlines</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$content</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$content</td>
				<td class="param_description">The content to display</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fHTML-api-decode" class="method static"><span class="resolution">::</span><span class="name">decode()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Converts all HTML entities to normal characters, using UTF-8</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">decode</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$content</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$content</td>
				<td class="param_description">The content to decode</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The decoded content
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fHTML-api-encode" class="method static"><span class="resolution">::</span><span class="name">encode()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Converts all special characters to entites, using UTF-8.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">encode</span><span class="php-brackets">(</span> <span class="php-vartype">string|array</span> <span class="php-var">$content</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string|array</td>
				<td class="param_name">$content</td>
				<td class="param_description">The content to encode</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The encoded content
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fHTML-api-makeLinks" class="method static"><span class="resolution">::</span><span class="name">makeLinks()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Takes a block of text and converts all URLs into HTML links</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">makeLinks</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$content</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$link_text_length</span><span class="php-code">=</span>0 <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$content</td>
				<td class="param_description">The content to parse for links</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$link_text_length</td>
				<td class="param_description">If non-zero, all link text will be truncated to this many characters</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The content with all URLs converted to HTML link
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fHTML-api-prepare" class="method static"><span class="resolution">::</span><span class="name">prepare()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Prepares content for display in UTF-8 encoded HTML - allows HTML tags</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">prepare</span><span class="php-brackets">(</span> <span class="php-vartype">string|array</span> <span class="php-var">$content</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string|array</td>
				<td class="param_name">$content</td>
				<td class="param_description">The content to prepare</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The encoded html
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fHTML-api-printOption" class="method static"><span class="resolution">::</span><span class="name">printOption()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Prints an <tt>option</tt> tag with the provided value, using the selected value to determine if the option should be marked as selected</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">printOption</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$text</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$value</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$selected_value</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$text</td>
				<td class="param_description">The text to display in the option tag</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value for the option</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$selected_value</td>
				<td class="param_description">If the value is the same as this, the option will be marked as selected</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fHTML-api-sendHeader" class="method static"><span class="resolution">::</span><span class="name">sendHeader()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets the proper Content-Type header for a UTF-8 HTML (or pseudo-XHTML) page</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">sendHeader</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fHTML-api-show" class="method static"><span class="resolution">::</span><span class="name">show()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Prints a <tt>p</tt> (or <tt>div</tt> if the content has block-level HTML) tag with the contents and the class specified - will not print if no content</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">show</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$content</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$css_class</span><span class="php-code">=</span>'' <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$content</td>
				<td class="param_description">The content to display</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$css_class</td>
				<td class="param_description">The CSS class to apply</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the content was shown
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fHTML-api-showChecked" class="method static"><span class="resolution">::</span><span class="name">showChecked()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Prints a <tt>checked=&quot;checked&quot;</tt> HTML input attribute if <tt>$value</tt> equals <tt>$checked_value</tt>, or if <tt>$value</tt> is in <tt>$checked_value</tt></p>
								<p>Please note that if either <tt>$value</tt> or <tt>$checked_value</tt> is <tt>NULL</tt>, a  strict comparison will be performed, whereas normally a non-strict  comparison is made. Thus <tt>0</tt> and <tt>FALSE</tt> will cause the checked  attribute to be printed, but <tt>0</tt> and <tt>NULL</tt> will not.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">showChecked</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$value</span><span class="php-code">,</span> <span class="php-vartype">string|array</span> <span class="php-var">$checked_value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value for the current HTML input tag</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string|array</td>
				<td class="param_name">$checked_value</td>
				<td class="param_description">The value (or array of values) that has been checked</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the checked attribute was printed
				</p>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fImage">fImage</h2>
<div class="sidebar">
<h3 id="fImage-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fImage">Class Documentation</a></strong></li>
<li><a href="#fImage-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fImage-docs-Configuration">Configuration</a></li>
<li><a href="#fImage-docs-ImageInformation">Image Information</a></li>
<li><a href="#fImage-docs-Modification">Modification</a>
<ul>
<li><a href="#fImage-docs-Cropping">Cropping</a></li>
<li><a href="#fImage-docs-Desaturating">Desaturating</a></li>
<li><a href="#fImage-docs-Resizing">Resizing</a></li>
</ul>
</li>
<li><a href="#fImage-docs-SavingChanges">Saving Changes</a></li>
</ul>

<h3 id="fImage-docs-FilesystemClasses">Filesystem Classes </h3>

<ul>
<li><a href="#fFilesystem">fFilesystem</a></li>
<li><a href="#fFile">fFile</a>
<ul>
<li><strong>fImage</strong></li>
</ul>
</li>
<li><a href="#fDirectory">fDirectory</a></li>
<li><a href="#fUpload">fUpload</a></li>
</ul>
</div>

<p>
The fImage class is a representation of an image file on the filesystem. It provides all of the functionality of the <a href="#fFile">fFile</a> class and adds the ability to perform image manipulation via GD or ImageMagick.
</p>

<h3 id="fImage-docs-Configuration">Configuration</h3>

<p>
As mentioned above, the fImage class provide image manipulation by using either the command line program <a class="ext-link" href="http://imagemagick.org"><span class="icon">ImageMagick</span></a> or the <a class="ext-link" href="http://php.net/gd"><span class="icon">PHP GD extension</span></a>. fImage prefers ImageMagick since it provides superior performance and does not have the restriction of the PHP memory limit, like the GD extension does.
</p>

<p>
If the GD extension is not installed and ImageMagick can not be found in a standard location, fImage will need to be configured with the location of ImageMagick. This can be done by passing the ImageMagick binarys directory to the static method <a href="#fImage-api-setImageMagickDirectory"><code>setImageMagickDirectory()</code></a>.
</p>
<pre class="block php"><code>// An example of manually configuring ImageMagick
fImage::setImageMagickDirectory('/usr/local/imagemagick/bin');</code></pre>

<p>
 In addition to configuring the path to the ImageMagick binaries, it is also possible to set a temporary directory for ImageMagick to use when processing files. The <a href="#fImage-api-setImageMagickTempDir"><code>setImageMagickTempDir()</code></a> static method performs this task and takes a single parameter <code>$temp_dir</code>.
</p>
<pre class="block php"><code>// Setting a custom temporary directory for ImageMagick
fImage::setImageMagickTempDir('/tmp/imagemagick');</code></pre>

<h3 id="fImage-docs-ImageInformation">Image Information</h3>

<p>
The fImage class includes a few methods to provide basic metadata about the image. <a href="#fImage-api-getWidth"><code>getWidth()</code></a> and <a href="#fImage-api-getHeight"><code>getHeight()</code></a> provide straight-forward access to image dimensions. <a href="#fImage-api-getDimensions"><code>getDimensions()</code></a> returns a two-element array of the width, then the height.
</p>
<pre class="block php"><code>$width  = $image-&gt;getWidth();
$height = $image-&gt;getHeight();

list($witdh, $height) = $image-&gt;getDimensions();</code></pre>

<p>
 The method <a href="#fImage-api-getType"><code>getType()</code></a> will return a string with the image type. Types include: <code>'jpg'</code>, <code>'gif'</code>, <code>'png'</code> and <code>'tif'</code>.
</p>
<pre class="block php"><code>$type = $image-&gt;getType();</code></pre>

<h3 id="fImage-docs-Modification">Modification</h3>

<p>
Probably the most significant functionality of the fImage class is the ability to modify an image. There are currently three different modifications that can be performed: <a href="#fImage-api-crop"><code>crop()</code></a>, <a href="#fImage-api-cropToRatio"><code>cropToRatio()</code></a>, <a href="#fImage-api-resize"><code>resize()</code></a> and <a href="#fImage-api-desaturate"><code>desaturate()</code></a>.
</p>

<p>
Calling any of these modifications will not actually cause the changes to be written to disk until <a href="#fImage-docs-SavingChanges"><code>saveChanges()</code></a> is called.
</p>

<h4 id="fImage-docs-Cropping">Cropping</h4>

<p>
<a href="#fImage-api-crop"><code>crop()</code></a> accepts four parameters, the pixels dimensions for <code>$new_width</code> and <code>$new_height</code>, <code>$crop_from_x</code>, <code>$crop_from_y</code>, and will perform pixel-specific cropping.
</p>
<pre class="block php"><code>// Create a 16x16 icon from the top left of an image
$image1 = new fImage('./example.gif');
$image1-&gt;crop(16, 16, 0, 0);
$image1-&gt;saveChanges();</code></pre>

<p>
 It is also possible to crop with <code>$crop_from_x</code> and <code>$crop_from_y</code> being a string position. The possible values for <code>$crop_from_x</code> are <code>left</code>, <code>center</code> and <code>right</code>. The possible values for <code>$crop_from_y</code> are <code>top</code>, <code>center</code> and <code>bottom</code>.
</p>
<pre class="block php"><code>// Create a 16x16 icon from the top right of an image
$image1 = new fImage('./example.gif');
$image1-&gt;crop(16, 16, 'right', 'top');
$image1-&gt;saveChanges();</code></pre>

<p>
 <a href="#fImage-api-cropToRatio"><code>cropToRatio()</code></a> will crop the largest rectangle our of an image that conforms to the ratio passed in via <code>$ratio_width</code> and <code>$ratio_height</code>. By default, the crop is made from the center of the image.
</p>
<pre class="block php"><code>// Create a 32x32 icon from an image
$image3 = new fImage('./example.gif');
$image3-&gt;cropToRatio(1, 1);
$image3-&gt;resize(32, 32);
$image3-&gt;saveChanges();</code></pre>

<p>
 Similar to <a href="#fImage-api-crop"><code>crop()</code></a>, it is possible to crop to a ratio from a specific position in the image. The third parameter, <code>$horizontal_position</code> accepts either <code>left</code>, <code>center</code> or <code>right</code>. The fourth parameter, <code>$vertical_position</code>, accepts <code>top</code>, <code>center</code> or <code>bottom</code>.
</p>
<pre class="block php"><code>// Create a 32x32 icon from the bottom right of an image
$image3 = new fImage('./example.gif');
$image3-&gt;cropToRatio(1, 1, 'right', 'bottom');
$image3-&gt;resize(32, 32);
$image3-&gt;saveChanges();</code></pre>

<h4 id="fImage-docs-Desaturating">Desaturating</h4>

<p>
<a href="#fImage-api-desaturate"><code>desaturate()</code></a> will cause the image to lose all color information and become grayscale.
</p>
<pre class="block php"><code>// Change the image to be grayscale
$image3 = new fImage('./example.gif');
$image3-&gt;desaturate();
$image3-&gt;saveChanges();</code></pre>

<h4 id="fImage-docs-Resizing">Resizing</h4>

<p>
<a href="#fImage-api-resize"><code>resize()</code></a> will scale the image proportionally to fit the canvas size defined by the parameters <code>$canvas_width</code> and <code>$canvas_height</code>. That is to say, the aspect ratio of the image will be retained, and it will not be stretched in either dimension. If either parameter is <code>empty()</code> or <code>0</code>, the image will be resized to fit the one specified dimension.
</p>
<pre class="block php"><code>// Ensure an image is never wider than 250 pixels
$image4 = new fImage('./example.gif');
$image4-&gt;resize(250, 0);
$image4-&gt;saveChanges();</code></pre>

<p>
 <code>resize()</code> can also accept an optional third parameter, <code>$allow_upsizing</code>. By default <code>resize()</code> will only make the image smaller, but when this is <code>TRUE</code> the image will be made to fit the dimensions even if it must be increased in size.
</p>
<pre class="block php"><code>// Make an image exactly 100 pixels wide
$image5 = new fImage('./example.gif');
$image5-&gt;resize(100, 0, TRUE);
$image5-&gt;saveChanges();</code></pre>

<h3 id="fImage-docs-SavingChanges">Saving Changes</h3>

<p>
<a href="#fImage-api-saveChanges"><code>saveChanges()</code></a> can accept from zero to three parameters. The first optional parameter is the <code>$new_image_type</code> which can be <code>'jpg'</code>, <code>'gif'</code> or <code>'png'</code>. If no <code>$new_image_type</code> is specified, the image will be resaved in the current format.
</p>
<pre class="block php"><code>// Saving as a PNG
$image2 = new fImage('./example.gif');
$image2-&gt;resize(250, 0);
$image2-&gt;saveChanges('png');</code></pre>

<p>
 If the <code>'jpg'</code> image type is specified, there is a second optional parameter, the <code>$jpeg_quality</code> to use. If no <code>$jpeg_quality</code> is specified, <code>90</code> is used as the default.
</p>
<pre class="block php"><code>// Saving as a 60 quality JPEG
$image2 = new fImage('./example.gif');
$image2-&gt;resize(250, 0);
$image2-&gt;saveChanges('jpeg', 60);</code></pre>

<p>
 A third optional parameter, <code>$overwrite</code>, accepts a boolean and will cause a file with the same name and type to be overwritten. For example, if the file is currently <code>image.gif</code> and you call <code>saveChanges()</code> with the parameter <code>'jpg'</code> and another file named <code>image.jpg</code> exists, by default <code>image.gif</code> will be saved with changes as <code>image_copy1.jpg</code>. When <code>$overwrite</code> is <code>TRUE</code>, <code>image.jpg</code> will be overwritten.
</p>
<pre class="block php"><code>// Saving as a PNG and overwrite any existing example.png
$image2 = new fImage('./example.gif');
$image2-&gt;resize(250, 0);
$image2-&gt;saveChanges('png', TRUE);</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fImage-api">fImage API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fImage">Class Documentation</a></li>
		<li><strong><a href="#fImage-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fImage-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  			<li><a href="#fImage-api-create">create()</a></li>
	  	  	  	  			<li class="protected"><a href="#fImage-api-getCompatibleMimetypes">getCompatibleMimetypes()</a></li>
	  	  	  			<li class="protected"><a href="#fImage-api-getInfo">getInfo()</a></li>
	  	  	  			<li class="protected"><a href="#fImage-api-isImageCompatible">isImageCompatible()</a></li>
	  			<li class="protected"><a href="#fImage-api-reset">reset()</a></li>
	  	  	  	  			<li><a href="#fImage-api-setImageMagickDirectory">setImageMagickDirectory()</a></li>
	  			<li><a href="#fImage-api-setImageMagickTempDir">setImageMagickTempDir()</a></li>
	  </ul>
</div>
<div class="methods">
<h4><a href="#fImage-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fImage-api-__construct">__construct()</a></li>
	  			<li><a href="#fImage-api-append">append()</a></li>
	  	  			<li><a href="#fImage-api-crop">crop()</a></li>
	  			<li><a href="#fImage-api-cropToRatio">cropToRatio()</a></li>
	  			<li><a href="#fImage-api-desaturate">desaturate()</a></li>
	  	  			<li><a href="#fImage-api-getDimensions">getDimensions()</a></li>
	  			<li><a href="#fImage-api-getHeight">getHeight()</a></li>
	  	  			<li><a href="#fImage-api-getType">getType()</a></li>
	  			<li><a href="#fImage-api-getWidth">getWidth()</a></li>
	  	  	  			<li><a href="#fImage-api-resize">resize()</a></li>
	  			<li><a href="#fImage-api-rotate">rotate()</a></li>
	  			<li><a href="#fImage-api-saveChanges">saveChanges()</a></li>
	  	  	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fDirectory">fDirectory</a></li>
		<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
		<li><a href="#fFile">fFile</a></li>
		<li><a href="#fFilesystem">fFilesystem</a></li>
		<li><a href="#fGrammar">fGrammar</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fFilesystem">fFilesystem</a></li>
		<li><a href="#fLoader">fLoader</a></li>
		<li><a href="#fUpload">fUpload</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b33</span></div>
<p class="short_description">Represents an image on the filesystem, also provides image manipulation functionality</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b33</th><td>Fixed a method signature <span class="date">8/24/11</span></td></tr><tr><th>1.0.0b32</th><td>Added a call to clearstatcache() to <a href="#fImage-api-saveChanges"><tt>saveChanges()</tt></a> to solve a bug when <a href="#fFile-api-output"><tt>fFile::output()</tt></a> is called in the same script execution <span class="date">5/23/11</span></td></tr><tr><th>1.0.0b31</th><td>Fixed a bug in using ImageMagick to convert files with a colon in the filename <span class="date">3/20/11</span></td></tr><tr><th>1.0.0b30</th><td>Added a check for systems using the GD extension and no memory limit, plus a check for ImageMagick's convert command failing <span class="date">3/20/11</span></td></tr><tr><th>1.0.0b29</th><td>Added checks for AIX <span class="date">1/19/11</span></td></tr><tr><th>1.0.0b28</th><td>Added the <a href="#fImage-api-rotate"><tt>rotate()</tt></a> method, added code to try and prevent fatal errors due to hitting the memory limit when using GD <span class="date">11/29/10</span></td></tr><tr><th>1.0.0b27</th><td>Backwards Compatibility Break - changed the parameter order in <a href="#fImage-api-crop"><tt>crop()</tt></a> from <tt>$crop_from_x</tt>, <tt>$crop_from_y</tt>, <tt>$new_width</tt>, <tt>$new_height</tt> to <tt>$new_width</tt>, <tt>$new_height</tt>, <tt>$crop_from_x</tt>, <tt>$crop_from_y</tt> - added <tt>$horizontal_position</tt> and <tt>$vertical_position</tt> parameters to <a href="#fImage-api-cropToRatio"><tt>cropToRatio()</tt></a> <span class="date">11/9/10</span></td></tr><tr><th>1.0.0b26</th><td>Fixed a bug where processing via ImageMagick was not properly setting the default RGB colorspace <span class="date">10/19/10</span></td></tr><tr><th>1.0.0b25</th><td>Fixed the class to not generate multiple files when saving a JPG from an animated GIF or a TIF with a thumbnail <span class="date">9/12/10</span></td></tr><tr><th>1.0.0b24</th><td>Updated class to use <a href="#fCore-api-startErrorCapture"><tt>fCore::startErrorCapture()</tt></a> instead of <tt>error_reporting()</tt> <span class="date">8/9/10</span></td></tr><tr><th>1.0.0b23</th><td>Fixed the class to detect when exec() is disabled and the function has a space before or after in the list <span class="date">7/21/10</span></td></tr><tr><th>1.0.0b22</th><td>Fixed <a href="#fImage-api-isImageCompatible"><tt>isImageCompatible()</tt></a> to handle certain JPGs created with Photoshop <span class="date">4/3/10</span></td></tr><tr><th>1.0.0b21</th><td>Fixed <a href="#fImage-api-resize"><tt>resize()</tt></a> to allow dimensions to be numeric strings instead of just integers <span class="date">4/9/10</span></td></tr><tr><th>1.0.0b20</th><td>Added <a href="#fImage-api-append"><tt>append()</tt></a> <span class="date">3/15/10</span></td></tr><tr><th>1.0.0b19</th><td>Updated for the new <a href="#fFile">fFile</a> API <span class="date">3/5/10</span></td></tr><tr><th>1.0.0b18</th><td>Fixed a bug in <a href="#fImage-api-saveChanges"><tt>saveChanges()</tt></a> that would incorrectly cause new filenames to be created, added the $overwrite parameter to <a href="#fImage-api-saveChanges"><tt>saveChanges()</tt></a>, added the $allow_upsizing parameter to <a href="#fImage-api-resize"><tt>resize()</tt></a> <span class="date">3/3/10</span></td></tr><tr><th>1.0.0b17</th><td>Fixed a couple of bug with using ImageMagick on Windows and BSD machines <span class="date">3/2/10</span></td></tr><tr><th>1.0.0b16</th><td>Fixed some bugs with GD not properly handling transparent backgrounds and desaturation of .gif files <span class="date">10/27/09</span></td></tr><tr><th>1.0.0b15</th><td>Added <a href="#fImage-api-getDimensions"><tt>getDimensions()</tt></a> <span class="date">8/7/09</span></td></tr><tr><th>1.0.0b14</th><td>Performance updates for checking image type and compatiblity <span class="date">7/31/09</span></td></tr><tr><th>1.0.0b13</th><td>Updated class to work even if the file extension is wrong or not present, <a href="#fImage-api-saveChanges"><tt>saveChanges()</tt></a> detects files that aren't writable <span class="date">7/29/09</span></td></tr><tr><th>1.0.0b12</th><td>Fixed a bug where calling <a href="#fImage-api-saveChanges"><tt>saveChanges()</tt></a> after unserializing would throw an exception related to the image processor <span class="date">5/27/09</span></td></tr><tr><th>1.0.0b11</th><td>Added a <a href="#fImage-api-crop"><tt>crop()</tt></a> method <span class="date">5/27/09</span></td></tr><tr><th>1.0.0b10</th><td>Fixed a bug with GD not saving changes to files ending in .jpeg <span class="date">3/18/09</span></td></tr><tr><th>1.0.0b9</th><td>Changed processWithGD() to explicitly free the image resource <span class="date">3/18/09</span></td></tr><tr><th>1.0.0b8</th><td>Updated for new <a href="#fCore">fCore</a> API <span class="date">2/16/09</span></td></tr><tr><th>1.0.0b7</th><td>Changed @ error suppression operator to <tt>error_reporting()</tt> calls <span class="date">1/26/09</span></td></tr><tr><th>1.0.0b6</th><td>Fixed <a href="#fImage-api-cropToRatio"><tt>cropToRatio()</tt></a> and <a href="#fImage-api-resize"><tt>resize()</tt></a> to always return the object even if nothing is to be done <span class="date">1/5/09</span></td></tr><tr><th>1.0.0b5</th><td>Added check to see if exec() is disabled, which causes ImageMagick to not work <span class="date">1/3/09</span></td></tr><tr><th>1.0.0b4</th><td>Fixed <a href="#fImage-api-saveChanges"><tt>saveChanges()</tt></a> to not delete the image if no changes have been made <span class="date">12/18/08</span></td></tr><tr><th>1.0.0b3</th><td>Fixed a bug with $jpeg_quality in <a href="#fImage-api-saveChanges"><tt>saveChanges()</tt></a> from 1.0.0b2 <span class="date">12/16/08</span></td></tr><tr><th>1.0.0b2</th><td>Changed some int casts to round() to fix <a href="#fImage-api-resize"><tt>resize()</tt></a> dimension issues <span class="date">12/11/08</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">12/19/07</span></td></tr></table></div>
<div class="genealogy">	
	<h4>Genealogy</h4>
		<div class="class_tree">
		<h5>Class Tree</h5>
		<pre class="class_tree"><a href="#fFile">fFile</a>
   |
   --fImage</pre>
	</div>
		<div class="protected inherited_variables">
	<h5>Inherited Variables</h5>
		<dl>
		<dt class="protected"><a href="#fFile-api-deleted">fFile::$deleted</a></dt>
	<dd class="protected">A backtrace from when the file was deleted </dd>
		<dt class="protected"><a href="#fFile-api-file">fFile::$file</a></dt>
	<dd class="protected">The full path to the file </dd>
		</dl>
		</div>
		<div class="inherited_methods">
	<h5>Inherited Methods</h5>
		<dl>
	  	  <dt class="public"><a href="#fFile-api-__construct"><tt>fFile::__construct()</tt></a></dt>
	  <dd class="public">Creates an object to represent a file on the filesystem</dd>
	  	  <dt class="public"><a href="#fFile-api-__clone"><tt>fFile::__clone()</tt></a></dt>
	  <dd class="public">Duplicates a file in the current directory when the object is cloned</dd>
	  	  <dt class="public"><a href="#fFile-api-__get"><tt>fFile::__get()</tt></a></dt>
	  <dd class="public">All requests that hit this method should be requests for callbacks</dd>
	  	  <dt class="public"><a href="#fFile-api-__sleep"><tt>fFile::__sleep()</tt></a></dt>
	  <dd class="public">The iterator information doesn't need to be serialized since a resource can't be</dd>
	  	  <dt class="public"><a href="#fFile-api-__toString"><tt>fFile::__toString()</tt></a></dt>
	  <dd class="public">Returns the filename of the file</dd>
	  	  <dt class="public"><a href="#fFile-api-__wakeup"><tt>fFile::__wakeup()</tt></a></dt>
	  <dd class="public">Re-inserts the file back into the filesystem map when unserialized</dd>
	  	  <dt class="public"><a href="#fFile-api-append"><tt>fFile::append()</tt></a></dt>
	  <dd class="public">Appends the provided data to the file</dd>
	  	  <dt class="public"><a href="#fFile-api-count"><tt>fFile::count()</tt></a></dt>
	  <dd class="public">Returns the number of lines in the file</dd>
	  	  <dt class="public"><a href="#fFile-api-create"><tt>fFile::create()</tt></a></dt>
	  <dd class="public">Creates a file on the filesystem and returns an object representing it.</dd>
	  	  <dt class="public"><a href="#fFile-api-current"><tt>fFile::current()</tt></a></dt>
	  <dd class="public">Returns the current line of the file (required by iterator interface)</dd>
	  	  <dt class="public"><a href="#fFile-api-delete"><tt>fFile::delete()</tt></a></dt>
	  <dd class="public">Deletes the current file</dd>
	  	  <dt class="public"><a href="#fFile-api-determineMimeType"><tt>fFile::determineMimeType()</tt></a></dt>
	  <dd class="public">Determines the file's mime type by either looking at the file contents or matching the extension</dd>
	  	  <dt class="public"><a href="#fFile-api-duplicate"><tt>fFile::duplicate()</tt></a></dt>
	  <dd class="public">Creates a new file object with a copy of this file</dd>
	  	  <dt class="public"><a href="#fFile-api-getExtension"><tt>fFile::getExtension()</tt></a></dt>
	  <dd class="public">Gets the file extension</dd>
	  	  <dt class="public"><a href="#fFile-api-getMimeType"><tt>fFile::getMimeType()</tt></a></dt>
	  <dd class="public">Gets the file's mime type</dd>
	  	  <dt class="public"><a href="#fFile-api-getMTime"><tt>fFile::getMTime()</tt></a></dt>
	  <dd class="public">Returns the last modification time of the file</dd>
	  	  <dt class="public"><a href="#fFile-api-getName"><tt>fFile::getName()</tt></a></dt>
	  <dd class="public">Gets the filename (i.e. does not include the directory)</dd>
	  	  <dt class="public"><a href="#fFile-api-getParent"><tt>fFile::getParent()</tt></a></dt>
	  <dd class="public">Gets the directory the file is located in</dd>
	  	  <dt class="public"><a href="#fFile-api-getPath"><tt>fFile::getPath()</tt></a></dt>
	  <dd class="public">Gets the file's current path (directory and filename)</dd>
	  	  <dt class="public"><a href="#fFile-api-getSize"><tt>fFile::getSize()</tt></a></dt>
	  <dd class="public">Gets the size of the file</dd>
	  	  <dt class="public"><a href="#fFile-api-isWritable"><tt>fFile::isWritable()</tt></a></dt>
	  <dd class="public">Check to see if the current file is writable</dd>
	  	  <dt class="public"><a href="#fFile-api-key"><tt>fFile::key()</tt></a></dt>
	  <dd class="public">Returns the current one-based line number (required by iterator interface)</dd>
	  	  <dt class="public"><a href="#fFile-api-move"><tt>fFile::move()</tt></a></dt>
	  <dd class="public">Moves the current file to a different directory</dd>
	  	  <dt class="public"><a href="#fFile-api-next"><tt>fFile::next()</tt></a></dt>
	  <dd class="public">Advances to the next line in the file (required by iterator interface)</dd>
	  	  <dt class="public"><a href="#fFile-api-output"><tt>fFile::output()</tt></a></dt>
	  <dd class="public">Prints the contents of the file</dd>
	  	  <dt class="public"><a href="#fFile-api-read"><tt>fFile::read()</tt></a></dt>
	  <dd class="public">Reads the data from the file</dd>
	  	  <dt class="public"><a href="#fFile-api-rename"><tt>fFile::rename()</tt></a></dt>
	  <dd class="public">Renames the current file</dd>
	  	  <dt class="public"><a href="#fFile-api-rewind"><tt>fFile::rewind()</tt></a></dt>
	  <dd class="public">Rewinds the file handle (required by iterator interface)</dd>
	  	  <dt class="protected"><a href="#fFile-api-tossIfDeleted"><tt>fFile::tossIfDeleted()</tt></a></dt>
	  <dd class="protected">Throws an <a href="#fProgrammerException">fProgrammerException</a> if the file has been deleted</dd>
	  	  <dt class="public"><a href="#fFile-api-valid"><tt>fFile::valid()</tt></a></dt>
	  <dd class="public">Returns if the file has any lines left (required by iterator interface)</dd>
	  	  <dt class="public"><a href="#fFile-api-write"><tt>fFile::write()</tt></a></dt>
	  <dd class="public">Writes the provided data to the file</dd>
	  	</dl>
		</div>
	</div>	
<div class="class_methods static" id="fImage-api-class_methods_static">
<h4>Static Methods</h4>
						<!-- start method static -->
			<h5 id="fImage-api-create" class="method static"><span class="resolution">::</span><span class="name">create()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Creates an image on the filesystem and returns an object representing it</p>
								<p>This operation will be reverted by a filesystem transaction being rolled  back.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fImage">fImage</a></span> <span class="php-identifier">create</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$file_path</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$contents</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$file_path</td>
				<td class="param_description">The path to the new image</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$contents</td>
				<td class="param_description">The contents to write to the image</td>
			  </tr>
						</table>
			</div>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When no image was specified or when the image already exists</dd></dl>
							<h6>Overrides</h6>
				<div class="overrides">
					<dl>
						<dt><a href="#fFile-api-create"><tt>fFile::create()</tt></a></dt>
												<dd>Creates a file on the filesystem and returns an object representing it.</dd>
											</dl>
				</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fImage-api-getCompatibleMimetypes" class="protected method static"><span class="resolution">::</span><span class="name">getCompatibleMimetypes()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns an array of acceptable mime types for the processor that was detected</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">getCompatibleMimetypes</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					The mime types that the detected image processor can manipulate
				</p>
			</div>
			<!-- end method static -->
						<!-- start protected method static -->
			<h5 id="fImage-api-getInfo" class="protected method static"><span class="resolution">::</span><span class="name">getInfo()</span> <span class="visibility">protected</span></h5>
			<div class="protected method static">
							<div class="method_description">
									<p>Gets the dimensions and type of an image stored on the filesystem</p>
								<p>The <tt>'type'</tt> key will have one of the following values:  </p><ul><li><tt>{null}</tt> (File type is not supported)</li><li><tt>'jpg'</tt></li><li><tt>'gif'</tt></li><li><tt>'png'</tt></li><li><tt>'tif'</tt></li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">getInfo</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$image_path</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$element</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$image_path</td>
				<td class="param_description">The path to the image to get stats for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$element</td>
				<td class="param_description">The element to retrieve: <tt>'type'</tt>, <tt>'width'</tt>, <tt>'height'</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					An associative array: <tt>'type' =&gt; {mixed}, 'width' =&gt; {integer}, 'height' =&gt; {integer}</tt>, or the element specified
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When the file specified is not an image</dd></dl>
			</div>
			<!-- end method static -->
						<!-- start protected method static -->
			<h5 id="fImage-api-isImageCompatible" class="protected method static"><span class="resolution">::</span><span class="name">isImageCompatible()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Checks to make sure the class can handle the image file specified</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">isImageCompatible</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$image</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$image</td>
				<td class="param_description">The image to check for incompatibility</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the image is compatible with the detected image processor
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When the image specified does not exist</dd></dl>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fImage-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fImage-api-setImageMagickDirectory" class="method static"><span class="resolution">::</span><span class="name">setImageMagickDirectory()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets the directory the ImageMagick binary is installed in and tells the class to use ImageMagick even if GD is installed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setImageMagickDirectory</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$directory</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$directory</td>
				<td class="param_description">The directory ImageMagick is installed in</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fImage-api-setImageMagickTempDir" class="method static"><span class="resolution">::</span><span class="name">setImageMagickTempDir()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets a custom directory to use for the ImageMagick temporary files</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setImageMagickTempDir</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$temp_dir</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$temp_dir</td>
				<td class="param_description">The directory to use for the ImageMagick temp dir</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
	</div>
<div class="class_methods" id="fImage-api-class_methods">
<h4>Methods</h4>
						<!-- start method -->
			<h5 id="fImage-api-__construct" class="method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Creates an object to represent an image on the filesystem</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fImage">fImage</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$file_path</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$skip_checks</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$file_path</td>
				<td class="param_description">The path to the image</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$skip_checks</td>
				<td class="param_description">If file checks should be skipped, which improves performance, but may cause undefined behavior - only skip these if they are duplicated elsewhere</td>
			  </tr>
						</table>
			</div>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When no image was specified, when the image does not exist or when the path specified is not an image</dd></dl>
							<h6>Overrides</h6>
				<div class="overrides">
					<dl>
						<dt><a href="#fFile-api-__construct"><tt>fFile::__construct()</tt></a></dt>
												<dd>Creates an object to represent a file on the filesystem</dd>
											</dl>
				</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fImage-api-append" class="method"><span class="resolution">-></span><span class="name">append()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Prevents a programmer from trying to append an image</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">append</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$data</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$data</td>
				<td class="param_description">The data to append to the image</td>
			  </tr>
						</table>
			</div>
							<h6>Overrides</h6>
				<div class="overrides">
					<dl>
						<dt><a href="#fFile-api-append"><tt>fFile::append()</tt></a></dt>
												<dd>Appends the provided data to the file</dd>
											</dl>
				</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fImage-api-crop" class="method"><span class="resolution">-></span><span class="name">crop()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Crops the image by the exact pixel dimensions specified</p>
								<p>The crop does not occur until <a href="#fImage-api-saveChanges"><tt>saveChanges()</tt></a> is called.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fImage">fImage</a></span> <span class="php-identifier">crop</span><span class="php-brackets">(</span> <span class="php-vartype">numeric</span> <span class="php-var">$new_width</span><span class="php-code">,</span> <span class="php-vartype">numeric</span> <span class="php-var">$new_height</span><span class="php-code">,</span> <span class="php-vartype">numeric|string</span> <span class="php-var">$crop_from_x</span><span class="php-code">,</span> <span class="php-vartype">numeric|string</span> <span class="php-var">$crop_from_y</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">numeric</td>
				<td class="param_name">$new_width</td>
				<td class="param_description">The width in pixels to crop the image to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">numeric</td>
				<td class="param_name">$new_height</td>
				<td class="param_description">The height in pixels to crop the image to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">numeric|string</td>
				<td class="param_name">$crop_from_x</td>
				<td class="param_description">The number of pixels from the left of the image to start the crop from, or a horizontal position of <tt>'left'</tt>, <tt>'center'</tt> or <tt>'right'</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">numeric|string</td>
				<td class="param_name">$crop_from_y</td>
				<td class="param_description">The number of pixels from the top of the image to start the crop from, or a vertical position of <tt>'top'</tt>, <tt>'center'</tt> or <tt>'bottom'</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The image object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fImage-api-cropToRatio" class="method"><span class="resolution">-></span><span class="name">cropToRatio()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Crops the biggest area possible from the center of the image that matches the ratio provided</p>
								<p>The crop does not occur until <a href="#fImage-api-saveChanges"><tt>saveChanges()</tt></a> is called.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fImage">fImage</a></span> <span class="php-identifier">cropToRatio</span><span class="php-brackets">(</span> <span class="php-vartype">numeric</span> <span class="php-var">$ratio_width</span><span class="php-code">,</span> <span class="php-vartype">numeric</span> <span class="php-var">$ratio_height</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$horizontal_position</span><span class="php-code">=</span>'center'<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$vertical_position</span><span class="php-code">=</span>'center' <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">numeric</td>
				<td class="param_name">$ratio_width</td>
				<td class="param_description">The width ratio to crop the image to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">numeric</td>
				<td class="param_name">$ratio_height</td>
				<td class="param_description">The height ratio to crop the image to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$horizontal_position</td>
				<td class="param_description">A horizontal position of <tt>'left'</tt>, <tt>'center'</tt> or <tt>'right'</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$vertical_position</td>
				<td class="param_description">A vertical position of <tt>'top'</tt>, <tt>'center'</tt> or <tt>'bottom'</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The image object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fImage-api-desaturate" class="method"><span class="resolution">-></span><span class="name">desaturate()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Converts the image to grayscale</p>
								<p>Desaturation does not occur until <a href="#fImage-api-saveChanges"><tt>saveChanges()</tt></a> is called.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fImage">fImage</a></span> <span class="php-identifier">desaturate</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The image object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fImage-api-getDimensions" class="method"><span class="resolution">-></span><span class="name">getDimensions()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the width and height of the image as a two element array</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">getDimensions</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 In the format <tt>0 =&gt; (integer) {width}, 1 =&gt; (integer) {height}</tt>
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fImage-api-getHeight" class="method"><span class="resolution">-></span><span class="name">getHeight()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the height of the image</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">getHeight</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The height of the image in pixels
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fImage-api-getType" class="method"><span class="resolution">-></span><span class="name">getType()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the type of the image</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getType</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The type of the image: <tt>'jpg'</tt>, <tt>'gif'</tt>, <tt>'png'</tt>, <tt>'tif'</tt>
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fImage-api-getWidth" class="method"><span class="resolution">-></span><span class="name">getWidth()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the width of the image</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">getWidth</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The width of the image in pixels
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fImage-api-resize" class="method"><span class="resolution">-></span><span class="name">resize()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the image to be resized proportionally to a specific size canvas</p>
								<p>Will only size down an image. This method uses resampling to ensure the  resized image is smooth in appearance. Resizing does not occur until  <a href="#fImage-api-saveChanges"><tt>saveChanges()</tt></a> is called.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fImage">fImage</a></span> <span class="php-identifier">resize</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$canvas_width</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$canvas_height</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$allow_upsizing</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$canvas_width</td>
				<td class="param_description">The width of the canvas to fit the image on, <tt>0</tt> for no constraint</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$canvas_height</td>
				<td class="param_description">The height of the canvas to fit the image on, <tt>0</tt> for no constraint</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$allow_upsizing</td>
				<td class="param_description">If the image is smaller than the desired canvas, the image will be increased in size</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The image object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fImage-api-rotate" class="method"><span class="resolution">-></span><span class="name">rotate()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the image to be rotated</p>
								<p>Rotation does not occur until <a href="#fImage-api-saveChanges"><tt>saveChanges()</tt></a> is called.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">rotate</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$degrees</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$degrees</td>
				<td class="param_description">The number of degrees to rotate - 90, 180, or 270</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fImage-api-saveChanges" class="method"><span class="resolution">-></span><span class="name">saveChanges()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Saves any changes to the image</p>
								<p>If the file type is different than the current one, removes the current  file once the new one is created.</p><p>This operation will be reverted by a filesystem transaction being rolled  back. If a transaction is in progress and the new image type causes a  new file to be created, the old file will not be deleted until the  transaction is committed.</p>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fImage">fImage</a></span> <span class="php-identifier">saveChanges</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$new_image_type</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$jpeg_quality</span><span class="php-code">=</span>90<span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$overwrite</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype"><a href="#fImage">fImage</a></span> <span class="php-identifier">saveChanges</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$new_image_type</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$overwrite</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$new_image_type</td>
				<td class="param_description">The new file format for the image: 'NULL<tt> (no change), </tt>'jpg'<tt>, </tt>'gif'<tt>, </tt>'png'`</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$jpeg_quality</td>
				<td class="param_description">The quality setting to use for JPEG images - this may be ommitted</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$overwrite</td>
				<td class="param_description">If an existing file with the same name and extension should be overwritten</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The image object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
					</div>		</section>
		</div>
		<section class="main">
<h2 id="fJSON">fJSON</h2>
<div class="sidebar">
<h3 id="fJSON-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fJSON">Class Documentation</a></strong></li>
<li><a href="#fJSON-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fJSON-docs-EncodingandDecoding">Encoding and Decoding</a>
<ul>
<li><a href="#fJSON-docs-Encoding">Encoding</a></li>
<li><a href="#fJSON-docs-Decoding">Decoding</a></li>
</ul>
</li>
<li><a href="#fJSON-docs-SendingtheContentTypeHeader">Sending the Content Type Header</a></li>
<li><a href="#fJSON-docs-Outputting">Outputting</a></li>
</ul>
</div>

<p>
The fJSON class is primarily a compatibility class to allow for encoding and decoding JSON strings on server running PHP 5.0 and 5.1PHP 5.2 comes bundled with <a class="ext-link" href="http://php.net/json_encode"><span class="icon"><code>json_encode()</code></span></a> and <a class="ext-link" href="http://php.net/json_decode"><span class="icon"><code>json_decode()</code></span></a>. In addition, the class provides a simple method to send the proper headers with a JSON response.
</p>

<h3 id="fJSON-docs-EncodingandDecoding">Encoding and Decoding</h3>

<p>
The methods <a href="#fJSON-api-encode"><code>encode()</code></a> and <a href="#fJSON-api-decode"><code>decode()</code></a> allow for encoding and decoding JSON respectively. For servers that do have the <code>json</code> PHP extension, the <code>json</code> extension functions will be used. A native PHP implementation will automatically be used for server that do not have the <code>json</code> extension installed.
</p>

<h4 id="fJSON-docs-Encoding">Encoding</h4>

<p>
<code>encode()</code> takes a single parameter, the PHP value to encode. Associative arrays will be encoded as JSON objects, with the rest of PHP data types being converted into the equivalent JSON data type. <em>Technically all valid JSON needs to be either an array or an object, however the PHP <code>json</code> extension does not follow this restriction.</em>
</p>

<p>
The following PHP
</p>
<pre class="block php"><code>echo fJSON::encode(array());
echo &quot;\n\n&quot;;

echo fJSON::encode(
    array(1, 2, 3, 4, 'Hello!', TRUE, FALSE, NULL)
);
echo &quot;\n\n&quot;;

echo fJSON::encode(
    array('foo' =&gt; 'bar', 'key' =&gt; TRUE
);</code></pre>

<p>
 would output the following JSON:
</p>
<pre><code>[]

[1,2,3,4,&quot;Hello!&quot;,true,false,null]

{&quot;foo&quot;:&quot;bar&quot;,&quot;key&quot;:true}</code></pre>

<h4 id="fJSON-docs-Decoding">Decoding</h4>

<p>
<code>decode()</code> takes a JSON string and will convert it into the equivalent PHP data types. An optional second parameter <code>$assoc</code> when set to <code>TRUE</code> will cause JSON objects to be converted to associative arrays instead of an instance of the PHP class <code>stdClass</code>.
</p>

<p>
The following PHP
</p>
<pre class="block php"><code>echo fCore::dump(fJSON::decode('[]'));
echo &quot;\n\n&quot;;

echo fCore::dump(fJSON::decode('[1,2,3,4,&quot;Hello!&quot;,true,false,null]'));
echo &quot;\n\n&quot;;

echo fCore::dump(fJSON::decode('{&quot;foo&quot;:&quot;bar&quot;,&quot;key&quot;:true}'));
echo &quot;\n\n&quot;;

echo fCore::dump(fJSON::decode('{&quot;foo&quot;:&quot;bar&quot;,&quot;key&quot;:true}', TRUE));</code></pre>

<p>
 would output the following text:
</p>
<pre><code>Array
(
)

Array
(
    [0] =&gt; 1
    [1] =&gt; 2
    [2] =&gt; 3
    [3] =&gt; 4
    [4] =&gt; Hello!
    [5] =&gt; {true}
    [6] =&gt; {false}
    [7] =&gt; {null}
)

stdClass Object
(
    [foo] =&gt; bar
    [key] =&gt; {true}
)

Array
(
    [foo] =&gt; bar
    [key] =&gt; {true}
)</code></pre>

<h3 id="fJSON-docs-SendingtheContentTypeHeader">Sending the Content Type Header</h3>

<p>
If you are returning JSON in a response, calling the <a href="#fJSON-api-sendHeader"><code>sendHeader()</code></a> mehod will ensure that the <code>Content-Type</code> header is set to the correct value of <code>application/json; charset=utf-8</code>.
</p>

<h3 id="fJSON-docs-Outputting">Outputting</h3>

<p>
Usually when writing a script that creates JSON, the header will need to be sent and a PHP value will need to be encoded and output. The static method <a href="#fJSON-api-output"><code>output()</code></a> does all of this.
</p>
<pre class="block php"><code>// These two blocks are equivalent
fJSON::sendHeader();
echo fJSON::encode($value);

fJSON::output($value);</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fJSON-api">fJSON API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fJSON">Class Documentation</a></li>
		<li><strong><a href="#fJSON-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="protected consts">
<h4><a href="#fJSON-api-class_consts">Constants</a></h4>
<ul>
    <li class="protected"><a href="#fJSON-api-J_ARRAY_CLOSE">J_ARRAY_CLOSE</a></li>
    <li class="protected"><a href="#fJSON-api-J_ARRAY_COMMA">J_ARRAY_COMMA</a></li>
    <li class="protected"><a href="#fJSON-api-J_ARRAY_OPEN">J_ARRAY_OPEN</a></li>
    <li class="protected"><a href="#fJSON-api-J_COLON">J_COLON</a></li>
    <li class="protected"><a href="#fJSON-api-J_FALSE">J_FALSE</a></li>
    <li class="protected"><a href="#fJSON-api-J_FLOAT">J_FLOAT</a></li>
    <li class="protected"><a href="#fJSON-api-J_INTEGER">J_INTEGER</a></li>
    <li class="protected"><a href="#fJSON-api-J_KEY">J_KEY</a></li>
    <li class="protected"><a href="#fJSON-api-J_NULL">J_NULL</a></li>
    <li class="protected"><a href="#fJSON-api-J_OBJ_CLOSE">J_OBJ_CLOSE</a></li>
    <li class="protected"><a href="#fJSON-api-J_OBJ_COMMA">J_OBJ_COMMA</a></li>
    <li class="protected"><a href="#fJSON-api-J_OBJ_OPEN">J_OBJ_OPEN</a></li>
    <li class="protected"><a href="#fJSON-api-J_STRING">J_STRING</a></li>
    <li class="protected"><a href="#fJSON-api-J_TRUE">J_TRUE</a></li>
  </ul>
</div>
<div class="methods static">
<h4><a href="#fJSON-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fJSON-api-decode">decode()</a></li>
	  			<li><a href="#fJSON-api-encode">encode()</a></li>
	  			<li><a href="#fJSON-api-output">output()</a></li>
	  			<li><a href="#fJSON-api-sendHeader">sendHeader()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fUTF8">fUTF8</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fORMJSON">fORMJSON</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b6</span></div>
<p class="short_description">Provides encoding and decoding for JSON</p>
<div class="description"><p>This class is a compatibility class for the  <a class="ext-link" href="http://php.net/json"><span class="icon">json extension</span></a> on servers with PHP 5.0 or 5.1, or  servers with the json extension compiled out.</p><p>This class will handle JSON values that are not contained in an array or  object - such values are not valid according to the JSON spec, but the  functionality is included for compatiblity with the json extension.</p></div>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b6</th><td>Removed <tt>e</tt> flag from preg_replace() calls <span class="date">6/8/10</span></td></tr><tr><th>1.0.0b5</th><td>Added the <a href="#fJSON-api-output"><tt>output()</tt></a> method <span class="date">3/15/10</span></td></tr><tr><th>1.0.0b4</th><td>Fixed a bug with <a href="#fJSON-api-decode"><tt>decode()</tt></a> where JSON objects could lose all but the first key: value pair <span class="date">5/6/09</span></td></tr><tr><th>1.0.0b3</th><td>Updated the class to be consistent with PHP 5.2.9+ for encoding and decoding invalid data <span class="date">5/4/09</span></td></tr><tr><th>1.0.0b2</th><td>Changed @ error suppression operator to <tt>error_reporting()</tt> calls <span class="date">1/26/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">7/12/08</span></td></tr></table></div>
<div class="class_consts" id="fJSON-api-class_consts">
<h4>Constants</h4>
  <!-- start protected constant -->
<h5 id="fJSON-api-J_ARRAY_CLOSE" class="protected constant"><span class="resolution">::</span><span class="name">J_ARRAY_CLOSE</span> <span class="visibility">internal</span></h5>
<div class="protected constant">
		<div class="internal_notice">
		<p>
			<em>Please note: this constant is primarily intended for internal 
			use by Flourish and will normally not be useful in site/application
			code</em>
		</p>
	</div>
			<div class="constant_description">
					<p>An abstract representation of ]</p>
		</div>
</div>
<!-- end constant -->
  <!-- start protected constant -->
<h5 id="fJSON-api-J_ARRAY_COMMA" class="protected constant"><span class="resolution">::</span><span class="name">J_ARRAY_COMMA</span> <span class="visibility">internal</span></h5>
<div class="protected constant">
		<div class="internal_notice">
		<p>
			<em>Please note: this constant is primarily intended for internal 
			use by Flourish and will normally not be useful in site/application
			code</em>
		</p>
	</div>
			<div class="constant_description">
					<p>An abstract representation of , in a JSON array</p>
		</div>
</div>
<!-- end constant -->
  <!-- start protected constant -->
<h5 id="fJSON-api-J_ARRAY_OPEN" class="protected constant"><span class="resolution">::</span><span class="name">J_ARRAY_OPEN</span> <span class="visibility">internal</span></h5>
<div class="protected constant">
		<div class="internal_notice">
		<p>
			<em>Please note: this constant is primarily intended for internal 
			use by Flourish and will normally not be useful in site/application
			code</em>
		</p>
	</div>
			<div class="constant_description">
					<p>An abstract representation of [</p>
		</div>
</div>
<!-- end constant -->
  <!-- start protected constant -->
<h5 id="fJSON-api-J_COLON" class="protected constant"><span class="resolution">::</span><span class="name">J_COLON</span> <span class="visibility">internal</span></h5>
<div class="protected constant">
		<div class="internal_notice">
		<p>
			<em>Please note: this constant is primarily intended for internal 
			use by Flourish and will normally not be useful in site/application
			code</em>
		</p>
	</div>
			<div class="constant_description">
					<p>An abstract representation of :</p>
		</div>
</div>
<!-- end constant -->
  <!-- start protected constant -->
<h5 id="fJSON-api-J_FALSE" class="protected constant"><span class="resolution">::</span><span class="name">J_FALSE</span> <span class="visibility">internal</span></h5>
<div class="protected constant">
		<div class="internal_notice">
		<p>
			<em>Please note: this constant is primarily intended for internal 
			use by Flourish and will normally not be useful in site/application
			code</em>
		</p>
	</div>
			<div class="constant_description">
					<p>An abstract representation of a boolean false</p>
		</div>
</div>
<!-- end constant -->
  <!-- start protected constant -->
<h5 id="fJSON-api-J_FLOAT" class="protected constant"><span class="resolution">::</span><span class="name">J_FLOAT</span> <span class="visibility">internal</span></h5>
<div class="protected constant">
		<div class="internal_notice">
		<p>
			<em>Please note: this constant is primarily intended for internal 
			use by Flourish and will normally not be useful in site/application
			code</em>
		</p>
	</div>
			<div class="constant_description">
					<p>An abstract representation of a floating value</p>
		</div>
</div>
<!-- end constant -->
  <!-- start protected constant -->
<h5 id="fJSON-api-J_INTEGER" class="protected constant"><span class="resolution">::</span><span class="name">J_INTEGER</span> <span class="visibility">internal</span></h5>
<div class="protected constant">
		<div class="internal_notice">
		<p>
			<em>Please note: this constant is primarily intended for internal 
			use by Flourish and will normally not be useful in site/application
			code</em>
		</p>
	</div>
			<div class="constant_description">
					<p>An abstract representation of an integer</p>
		</div>
</div>
<!-- end constant -->
  <!-- start protected constant -->
<h5 id="fJSON-api-J_KEY" class="protected constant"><span class="resolution">::</span><span class="name">J_KEY</span> <span class="visibility">internal</span></h5>
<div class="protected constant">
		<div class="internal_notice">
		<p>
			<em>Please note: this constant is primarily intended for internal 
			use by Flourish and will normally not be useful in site/application
			code</em>
		</p>
	</div>
			<div class="constant_description">
					<p>An abstract representation of a JSON object key</p>
		</div>
</div>
<!-- end constant -->
  <!-- start protected constant -->
<h5 id="fJSON-api-J_NULL" class="protected constant"><span class="resolution">::</span><span class="name">J_NULL</span> <span class="visibility">internal</span></h5>
<div class="protected constant">
		<div class="internal_notice">
		<p>
			<em>Please note: this constant is primarily intended for internal 
			use by Flourish and will normally not be useful in site/application
			code</em>
		</p>
	</div>
			<div class="constant_description">
					<p>An abstract representation of null</p>
		</div>
</div>
<!-- end constant -->
  <!-- start protected constant -->
<h5 id="fJSON-api-J_OBJ_CLOSE" class="protected constant"><span class="resolution">::</span><span class="name">J_OBJ_CLOSE</span> <span class="visibility">internal</span></h5>
<div class="protected constant">
		<div class="internal_notice">
		<p>
			<em>Please note: this constant is primarily intended for internal 
			use by Flourish and will normally not be useful in site/application
			code</em>
		</p>
	</div>
			<div class="constant_description">
					<p>An abstract representation of }</p>
		</div>
</div>
<!-- end constant -->
  <!-- start protected constant -->
<h5 id="fJSON-api-J_OBJ_COMMA" class="protected constant"><span class="resolution">::</span><span class="name">J_OBJ_COMMA</span> <span class="visibility">internal</span></h5>
<div class="protected constant">
		<div class="internal_notice">
		<p>
			<em>Please note: this constant is primarily intended for internal 
			use by Flourish and will normally not be useful in site/application
			code</em>
		</p>
	</div>
			<div class="constant_description">
					<p>An abstract representation of , in a JSON object</p>
		</div>
</div>
<!-- end constant -->
  <!-- start protected constant -->
<h5 id="fJSON-api-J_OBJ_OPEN" class="protected constant"><span class="resolution">::</span><span class="name">J_OBJ_OPEN</span> <span class="visibility">internal</span></h5>
<div class="protected constant">
		<div class="internal_notice">
		<p>
			<em>Please note: this constant is primarily intended for internal 
			use by Flourish and will normally not be useful in site/application
			code</em>
		</p>
	</div>
			<div class="constant_description">
					<p>An abstract representation of {</p>
		</div>
</div>
<!-- end constant -->
  <!-- start protected constant -->
<h5 id="fJSON-api-J_STRING" class="protected constant"><span class="resolution">::</span><span class="name">J_STRING</span> <span class="visibility">internal</span></h5>
<div class="protected constant">
		<div class="internal_notice">
		<p>
			<em>Please note: this constant is primarily intended for internal 
			use by Flourish and will normally not be useful in site/application
			code</em>
		</p>
	</div>
			<div class="constant_description">
					<p>An abstract representation of a string</p>
		</div>
</div>
<!-- end constant -->
  <!-- start protected constant -->
<h5 id="fJSON-api-J_TRUE" class="protected constant"><span class="resolution">::</span><span class="name">J_TRUE</span> <span class="visibility">internal</span></h5>
<div class="protected constant">
		<div class="internal_notice">
		<p>
			<em>Please note: this constant is primarily intended for internal 
			use by Flourish and will normally not be useful in site/application
			code</em>
		</p>
	</div>
			<div class="constant_description">
					<p>An abstract representation of a boolean true</p>
		</div>
</div>
<!-- end constant -->
</div>
<div class="class_methods static" id="fJSON-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fJSON-api-decode" class="method static"><span class="resolution">::</span><span class="name">decode()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Decodes a JSON string into native PHP data types</p>
								<p>This function is very strict about the format of JSON. If the string is  not a valid JSON string, <tt>NULL</tt> will be returned.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array|stdClass</span> <span class="php-identifier">decode</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$json</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$assoc</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$json</td>
				<td class="param_description">This should be the name of a related class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$assoc</td>
				<td class="param_description">If this is TRUE, JSON objects will be represented as an assocative array instead of a <tt>stdClass</tt> object</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					A PHP equivalent of the JSON string
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fJSON-api-encode" class="method static"><span class="resolution">::</span><span class="name">encode()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Encodes a PHP value into a JSON string</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">encode</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The PHP value to encode</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The JSON string that is equivalent to the PHP value
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fJSON-api-output" class="method static"><span class="resolution">::</span><span class="name">output()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets the proper <tt>Content-Type</tt> header and outputs the value, encoded as JSON</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">output</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The PHP value to output as JSON</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fJSON-api-sendHeader" class="method static"><span class="resolution">::</span><span class="name">sendHeader()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets the proper <tt>Content-Type</tt> header for UTF-8 encoded JSON</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">sendHeader</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fLoader">fLoader</h2>
<div class="sidebar">
<h3 id="fLoader-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fLoader">Class Documentation</a></strong></li>
<li><a href="#fLoader-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fLoader-docs-StandardUsage">Standard Usage</a></li>
<li><a href="#fLoader-docs-ConstructorFunctions">Constructor Functions</a></li>
<li><a href="#fLoader-docs-DetectingOpcodeCaches">Detecting Opcode Caches</a></li>
</ul>
</div>

<p>
The fLoader class is designed to load Flourish class. By default it detects the optimal type of loading to perform based on the server environment. In addition to loading classes, it creates constructor functions for the various Flourish value object classes.
</p>

<h3 id="fLoader-docs-StandardUsage">Standard Usage</h3>

<p>
Loading Flourish should normally be performed by calling the static method <a href="#fLoader-api-best"><code>best()</code></a>.
</p>
<pre class="block php"><code>include './path/to/fLoader.php';
fLoader::best();</code></pre>

<p>
 If an opcode cache (e.g. APC, XCache, etc) is detected, all class file are immediately included. If an opcode cache is not detected, an autoload function is registered via <a class="ext-link" href="http://php.net/spl_autoload_register"><span class="icon"><code>spl_autoload_register()</code></span></a>.
</p>

<p>
If you need explicit control over what type of loading is performed, you should call one of the static methods <a href="#fLoader-api-eager"><code>eager()</code></a> or <a href="#fLoader-api-lazy"><code>lazy()</code></a> instead.
</p>

<h3 id="fLoader-docs-ConstructorFunctions">Constructor Functions</h3>

<p>
Constructor functions is a term used to refer to functions that simply call the constructor of a class. The functions have the same name as the class, which effectively means that the <code>new</code> keyword is not required, and that method calls may be changed off of the constructor.
</p>
<pre class="block php"><code>// Without constructor functions
$date = new fDate();
$date = $date-&gt;modify('Y-m-01');

// With constructor functions
$date = fDate()-&gt;modify('Y-m-01');</code></pre>

<p>
 fLoader automatically creates constructor functions for all <a href="#ValueObjects-docs">value object classes</a>:
</p>

<ul>
<li><a href="#fDate">fDate</a></li>
<li><a href="#fMoney">fMoney</a></li>
<li><a href="#fNumber">fNumber</a></li>
<li><a href="#fTime">fTime</a></li>
<li><a href="#fTimestamp">fTimestamp</a></li>
</ul>

<h3 id="fLoader-docs-DetectingOpcodeCaches">Detecting Opcode Caches</h3>

<p>
The static method <a href="#fLoader-api-hasOpcodeCache"><code>hasOpcodeCache()</code></a> can be used to create intelligent loading functionality for other code.
</p>
<pre class="block php"><code>include './other/project/Loader.php';
if (fLoader::hasOpcodeCache()) {
    Loader::includeAll();
} else {
    Loader::autoload();
}</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fLoader-api">fLoader API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fLoader">Class Documentation</a></li>
		<li><strong><a href="#fLoader-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fLoader-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li class="protected"><a href="#fLoader-api-autoload">autoload()</a></li>
	  			<li><a href="#fLoader-api-best">best()</a></li>
	  			<li><a href="#fLoader-api-eager">eager()</a></li>
	  			<li><a href="#fLoader-api-hasOpcodeCache">hasOpcodeCache()</a></li>
	  			<li><a href="#fLoader-api-lazy">lazy()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fDate">fDate</a></li>
		<li><a href="#fDirectory">fDirectory</a></li>
		<li><a href="#fEmail">fEmail</a></li>
		<li><a href="#fFile">fFile</a></li>
		<li><a href="#fImage">fImage</a></li>
		<li><a href="#fMoney">fMoney</a></li>
		<li><a href="#fNumber">fNumber</a></li>
		<li><a href="#fTime">fTime</a></li>
		<li><a href="#fTimestamp">fTimestamp</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b3</span></div>
<p class="short_description">A class that loads Flourish</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b3</th><td>Added <a href="#fEmail">fEmail</a>() constructor function <span class="date">9/12/11</span></td></tr><tr><th>1.0.0b2</th><td>Added <a href="#fPagination">fPagination</a> <span class="date">9/6/11</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">8/26/11</span></td></tr></table></div>
<div class="class_methods static" id="fLoader-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start protected method static -->
			<h5 id="fLoader-api-autoload" class="protected method static"><span class="resolution">::</span><span class="name">autoload()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Tries to load a Flourish class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">autoload</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to load</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fLoader-api-best" class="method static"><span class="resolution">::</span><span class="name">best()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Performs eager loading if an op-code cache is present, otherwise lazy</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">best</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fLoader-api-eager" class="method static"><span class="resolution">::</span><span class="name">eager()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Loads all Flourish classes when called</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">eager</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fLoader-api-hasOpcodeCache" class="method static"><span class="resolution">::</span><span class="name">hasOpcodeCache()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Check if a PHP opcode cache is installed</p>
								<p>The following opcode caches are currently detected:  </p><ul><li><a class="ext-link" href="http://pecl.php.net/package/APC"><span class="icon">APC</span></a></li><li><a class="ext-link" href="http://eaccelerator.net"><span class="icon">eAccelerator</span></a></li><li><a class="ext-link" href="http://www.nusphere.com/products/phpexpress.htm"><span class="icon">Nusphere PhpExpress</span></a></li><li><a class="ext-link" href="http://turck-mmcache.sourceforge.net/index_old"><span class="icon">Turck MMCache</span></a></li><li><a class="ext-link" href="http://xcache.lighttpd.net"><span class="icon">XCache</span></a></li><li><a class="ext-link" href="http://www.zend.com/en/products/server/"><span class="icon">Zend Server (Optimizer+)</span></a></li><li><a class="ext-link" href="http://www.zend.com/en/products/platform/"><span class="icon">Zend Platform (Code Acceleration)</span></a></li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">hasOpcodeCache</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					If a PHP opcode cache is loaded
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fLoader-api-lazy" class="method static"><span class="resolution">::</span><span class="name">lazy()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Registers an autoloader for Flourish via <a class="ext-link" href="http://php.net/spl_autoload_register"><span class="icon"><tt>spl_autoload_register()</tt></span></a></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">lazy</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fMailbox">fMailbox</h2>
<div class="sidebar">
<h3 id="fMailbox-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fMailbox">Class Documentation</a></strong></li>
<li><a href="#fMailbox-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fMailbox-docs-Instantiation">Instantiation</a></li>
<li><a href="#fMailbox-docs-Listing">Listing</a></li>
<li><a href="#fMailbox-docs-Fetching">Fetching</a></li>
<li><a href="#fMailbox-docs-Deleting">Deleting</a></li>
<li><a href="#fMailbox-docs-Parsing">Parsing</a></li>
<li><a href="#fMailbox-docs-SMIMEDecryptionandVerification">S/MIME Decryption and Verification</a></li>
</ul>

<h3 id="fMailbox-docs-EmailClasses">Email Classes </h3>

<ul>
<li><a href="#fEmail">fEmail</a></li>
<li><strong>fMailbox</strong></li>
<li><a href="#fSMTP">fSMTP</a></li>
</ul>
</div>

<p>
The fMailbox class provides an interface to list, fetch and delete emails from POP3 and IMAP servers. It fully parses the messages, handles attachments, related content and inline files. All text content is converted to UTF-8. <em>This class does <strong>not</strong> require the PHP <a class="ext-link" href="http://php.net/imap"><span class="icon">imap extension</span></a>.</em> Secure connections are supported if the <a class="ext-link" href="http://php.net/openssl"><span class="icon">openssl extension</span></a> is installed.
</p>

<h3 id="fMailbox-docs-Instantiation">Instantiation</h3>

<p>
To create a mailbox object, you must provide the <code>$type</code> (either <code>pop3</code> or <code>imap</code>), <code>$server</code>, <code>$username</code> and <code>$password</code>.
</p>
<pre class="block php"><code>// Connect to a local pop3 server
$mailbox = new fMailbox('pop3', 'localhost', 'user', 'password');

// Connect to a remote imap server
$mailbox = new fMailbox('imap', 'example.com', 'user', 'password');</code></pre>

<p>
 The <code>$port</code> is automatically determined by the type, but can be overridden as a fifth parameter.
</p>
<pre class="block php"><code>// Connect to an imap server on port 874
$mailbox = new fMailbox('imap', 'example.com', 'user', 'password', 874);</code></pre>

<p>
 If the connection needs to be <code>$secure</code>, pass <code>TRUE</code> to the sixth parameter.
</p>
<pre class="block php"><code>// Make a secure connection on the default secure IMAP port
$mailbox = new fMailbox('imap', 'example.com', 'user', 'password', NULL, TRUE);</code></pre>

<p>
 The default socket <code>$timeout</code> in seconds can be adjusted with the seventh parameter.
</p>
<pre class="block php"><code>// Timeout after 5 seconds
$mailbox = new fMailbox('imap', 'example.com', 'user', 'password', NULL, FALSE, 5);</code></pre>

<h3 id="fMailbox-docs-Listing">Listing</h3>

<p>
A list of messages can be retrieved from a mailbox by calling the <a href="#fMailbox-api-listMessages"><code>listMessages()</code></a> method.
</p>
<pre class="block php"><code>// Retrieve an overview of all messages
$messages = $mailbox-&gt;listMessages();</code></pre>

<p>
 The result in an array of messages, with the key being the message's unique identifier (UID) and the value being an array with the keys:
</p>

<ul>
<li><code>uid</code>: a unique identifier for this message on this server <em>integer</em></li>
<li><code>received</code>: date message was received <em>string</em></li>
<li><code>size</code>: size of message in bytes <em>integer</em></li>
<li><code>date</code>: date message was sent <em>string</em></li>
<li><code>from</code>: the <code>From:</code> header value <em>string</em></li>
<li><code>subject</code>: the message subject <em>string</em></li>
<li><code>message_id</code>: the message-id header value, should be globally unique <em>string, optional</em></li>
<li><code>to</code>: the to header value <em>string. optional</em></li>
<li><code>in_reply_to</code>: the in-reply-to header value <em>string, optional</em></li>
</ul>

<p>
Below is an example of a list containing a single example messages:
</p>
<pre class="block php"><code>array(
    7556 =&gt; array(
        'uid' =&gt; 7556,
        'received' =&gt; '28 Jan 2010 19:45:07 -400',
        'size' =&gt; 1735,
        'date' =&gt; '28 Jan 2010 19:44:48 -400',
        'from' =&gt; '&quot;John Smith&quot; &lt;john@example.com&gt;',
        'subject' =&gt; 'Thanks for Signing Up!',
        'message_id' =&gt; '&lt;788a8c8865e19b0c3243@example.com&gt;',
        'to' =&gt; 'will@flourishlib.com, Joe &lt;joe@example.com&gt;',
        'in_reply_to' =&gt; '',
    )
)</code></pre>

<p>
 <code>listMessages()</code> has two optional parameters, the <code>$limit</code> and <code>$page</code> which control how many and which messages should be retrieved.
</p>
<pre class="block php"><code>// Get the first five messages
$messages = $mailbox-&gt;listMessages(5);

// Get messages 11 to 15
$messages = $mailbox-&gt;listMessage(5, 3);</code></pre>

<h3 id="fMailbox-docs-Fetching">Fetching</h3>

<p>
Individual messages can be retrieved in a parsed format by calling the method <a href="#fMailbox-api-fetchMessage"><code>fetchMessage()</code></a>. It requires a single parameter, <code>$uid</code>, which can be retrieved by the <a href="#fMailbox-api-listMessages"><code>listMessages()</code></a> method.
</p>
<pre class="block php"><code>$message = $mailbox-&gt;fetchMessage(7556);</code></pre>

<p>
 The return value is an associative array containing information about the message. The array will always include the following keys:
</p>

<ul>
<li><code>uid</code>: The UID of the message</li>
<li><code>received</code>: The date the message was received by the server</li>
<li><code>headers</code>: An associative array of mail headers, the keys being the lowercase header names. By default the values are a string, but the following headers are further parsed:
<ul>
<li><code>received</code>: An array of the <code>Recieved</code> headers</li>
<li><code>to</code>: An array of parsed addressees, each being an associative array in the format:
<ul>
<li><code>mailbox</code>: The part before the <code>@</code></li>
<li><code>host</code>: The part after the <code>@</code></li>
<li><code>personal</code>: The addressee's name <em>optional</em></li>
</ul>
</li>
<li><code>cc</code>: An array of parsed addressees, in the same format as <code>to</code></li>
<li><code>from</code>: An associative array of the from address, in the same format as <code>to</code></li>
<li><code>sender</code>: An associative array of the sender address, in the same format as <code>to</code></li>
<li><code>reply-to</code>: An associative array of the address to reply to, in the same format as <code>to</code></li>
<li><code>content-type</code>: An associative array in the format:
<ul>
<li><code>value</code>: The main header value</li>
<li><code>fields</code>: An associative array of the <code>;</code> separated key=value pairs after the main value</li>
</ul>
</li>
<li><code>content-disposition</code>: An associative array in the same format as <code>content-type</code></li>
</ul>
</li>
</ul>

<p>
And one or more of the following keys:
</p>

<ul>
<li><code>text</code>: The plaintext body</li>
<li><code>html</code>: The HTML body</li>
<li><code>attachment</code>: An array of attachments, each containing:
<ul>
<li><code>filename</code>: The name of the file</li>
<li><code>mimetype</code>: The mimetype of the file</li>
<li><code>data</code>: The raw contents of the file</li>
</ul>
</li>
<li><code>inline</code>: An array of inline files, each containing:
<ul>
<li><code>filename</code>: The name of the file</li>
<li><code>mimetype</code>: The mimetype of the file</li>
<li><code>data</code>: The raw contents of the file</li>
</ul>
</li>
<li><code>related</code>: An associative array of related files, such as embedded images, with the key <code>cid:{content-id}</code> and an array value containing:
<ul>
<li><code>mimetype</code>: The mimetype of the file</li>
<li><code>data</code>: The raw contents of the file</li>
</ul>
</li>
<li><code>verified</code>: If the message contents were verified via an S/MIME certificate - if not verified the <code>smime.p7s</code> file will be listed as an attachment</li>
<li><code>decrypted</code>: If the message contents were decrypted via an S/MIME private key - if not decrypted the <code>smime.p7m</code> file will be listed as an attachment</li>
</ul>

<p>
All values in headers, text and body will have been decoded to UTF-8. Files in the attachment, inline and related array will all retain their original encodings.
</p>

<p>
Here is an example of a parsed message:
</p>
<pre class="block php"><code>array(
    'received' =&gt; '28 Apr 2010 22:00:38 -0400',
    'headers'  =&gt; array(
		'received' =&gt; array(
			0 =&gt; '(qmail 25838 invoked from network); 28 Apr 2010 22:00:38 -0400',
			1 =&gt; 'from example.com (HELO ?192.168.10.2?) (example) by example.com with (DHE-RSA-AES256-SHA encrypted) SMTP; 28 Apr 2010 22:00:38 -0400'
		),
		'message-id' =&gt; '&lt;4BD8E815.1050209@flourishlib.com&gt;',
		'date' =&gt; 'Wed, 28 Apr 2010 21:59:49 -0400',
		'from' =&gt; array(
			'personal' =&gt; 'Will Bond',
			'mailbox'  =&gt; 'tests',
			'host'     =&gt; 'flourishlib.com'
		),
		'user-agent'   =&gt; 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.9) Gecko/20100317 Thunderbird/3.0.4',
		'mime-version' =&gt; '1.0',
		'to' =&gt; array(
			0 =&gt; array(
				'mailbox' =&gt; 'tests',
				'host'    =&gt; 'flourishlib.com'
			)
		),
		'subject' =&gt; 'This message is encrypted'
    ),
    'text'      =&gt; 'This message is encrypted',
    'decrypted' =&gt; TRUE,
    'uid'       =&gt; 15
);</code></pre>

<p>
 The second, optional boolean parameter <code>$convert_newlines</code> will convert all <code>\r\n</code> line-endings to <code>\n</code> inside of the <code>text</code> and <code>html</code> elements when set to <code>TRUE</code>.
</p>
<pre class="block php"><code>// Convert all line-endings to \n for the text and html
$message = $mailbox-&gt;fetchMessage(7556, TRUE);</code></pre>

<h3 id="fMailbox-docs-Deleting">Deleting</h3>

<p>
One or more messages can be deleted at a time by calling <a href="#fMailbox-api-deleteMessages"><code>deleteMessages()</code></a> and passing a single UID, or an array of UIDs.
</p>
<pre class="block php"><code>// Delete a single message
$mailbox-&gt;deleteMessages(7556);

// Delete multiple messages
$mailbox-&gt;deleteMessages(array(54, 928, 892));</code></pre>

<h3 id="fMailbox-docs-Parsing">Parsing</h3>

<p>
The static method <a href="#fMailbox-api-parseMessage"><code>parseMessage()</code></a> can be used to parse a full MIME email message into the same format that <a href="#fMailbox-api-fetchMessage"><code>fetchMessage()</code></a> returns, minus the <code>uid</code> key.
</p>
<pre class="block php"><code>$parsed_message = fMailbox::parseMessage(file_get_contents('/path/to/email'));</code></pre>

<p>
 Like <code>fetchMessage()</code>, it also supports a second, optional boolean parameter <code>$convert_newlines</code> to change <code>\r\n</code> into <code>\n</code> for <code>text</code> and <code>html</code>.
</p>

<h3 id="fMailbox-docs-SMIMEDecryptionandVerification">S/MIME Decryption and Verification</h3>

<p>
One of the more advanced features of fMailbox is the ability to seamlessly handle S/MIME signed and encrypted messages. The static method <a href="#fMailbox-api-addSMIMEPair"><code>addSMIMEPair()</code></a> accepts an <code>$email_address</code> and either a single S/MIME <code>$certificate_file</code> path or that combined with an S/MIME <code>$private_key_file</code> path and <code>$private_key_password</code>.
</p>
<pre class="block php"><code>// Adds the certificate and private key for will@flourishlib.com
fMailbox::addSMIMEPair('will@flourishlib.com', '/path/to/will.crt', '/path/to/will.key', 'password');</code></pre>

<p>
 If the certificate is provided, messages coming from the <code>$email_address</code> and S/MIME signed will be checked for authenticity. Currently the class is configured to only verify messages with an explicitly added key, and will not use the certificate included in the signature.
</p>

<p>
If the private key and certificate are provided, any messages coming to the <code>$email_address</code> and S/MIME encrypted will be decrypted. The parsed message will contain the decrypted content in the appropriate <code>text</code>, <code>html</code>, <code>attachment</code>, etc. sections of the parsed message array.
</p>

<p>
If verification succeeds, the <code>verified</code> key will be set to <code>TRUE</code> in the parsed message array. If decryption is successful, the <code>decrypted</code> key will be set to <code>TRUE</code>. If either fail, or a certificate or key is not available for the specified email address, the S/MIME signature or encrypted message will appear as a file in the <code>attachment</code> element.
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fMailbox-api">fMailbox API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fMailbox">Class Documentation</a></li>
		<li><strong><a href="#fMailbox-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fMailbox-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  			<li><a href="#fMailbox-api-addSMIMEPair">addSMIMEPair()</a></li>
	  	  	  	  	  	  	  			<li><a href="#fMailbox-api-parseMessage">parseMessage()</a></li>
	  			<li class="protected"><a href="#fMailbox-api-reset">reset()</a></li>
	  </ul>
</div>
<div class="methods">
<h4><a href="#fMailbox-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fMailbox-api-__construct">__construct()</a></li>
	  			<li><a href="#fMailbox-api-__destruct">__destruct()</a></li>
	  	  			<li><a href="#fMailbox-api-close">close()</a></li>
	  			<li><a href="#fMailbox-api-deleteMessages">deleteMessages()</a></li>
	  			<li><a href="#fMailbox-api-enableDebugging">enableDebugging()</a></li>
	  			<li><a href="#fMailbox-api-fetchMessage">fetchMessage()</a></li>
	  			<li><a href="#fMailbox-api-fetchMessageSource">fetchMessageSource()</a></li>
	  			<li><a href="#fMailbox-api-listMessages">listMessages()</a></li>
	  	  	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fConnectivityException">fConnectivityException</a></li>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fEmail">fEmail</a></li>
		<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
		<li><a href="#fFile">fFile</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b18</span></div>
<p class="short_description">Retrieves and deletes messages from a email account via IMAP or POP3</p>
<div class="description"><p>All headers, text and html content returned by this class are encoded in  UTF-8. Please see <a href="#UTF-8-docs">UTF-8</a> for more information.</p></div>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b18</th><td>Fixed a bug in <a href="#fMailbox-api-fetchMessageSource"><tt>fetchMessageSource()</tt></a> where IMAP connections would add an extra <tt>\r\n</tt> to the end of the source <span class="date">9/16/12</span></td></tr><tr><th>1.0.0b17</th><td>Updated the class to be more forgiving when parsing the response for <tt>STATUS</tt> and <tt>FETCH</tt> IMAP commands <span class="date">9/15/12</span></td></tr><tr><th>1.0.0b16</th><td>Added method <a href="#fMailbox-api-fetchMessageSource"><tt>fetchMessageSource()</tt></a> <span class="date">9/15/12</span></td></tr><tr><th>1.0.0b15</th><td>Fixed handling of bounces with no headers <span class="date">9/15/12</span></td></tr><tr><th>1.0.0b14</th><td>Added a workaround for iconv having issues in MAMP 1.9.4+ <span class="date">7/26/11</span></td></tr><tr><th>1.0.0b13</th><td>Fixed handling of headers in relation to encoded-words being embedded inside of quoted strings <span class="date">7/26/11</span></td></tr><tr><th>1.0.0b12</th><td>Enhanced the error checking in write() <span class="date">6/3/11</span></td></tr><tr><th>1.0.0b11</th><td>Added code to work around PHP bug #42682 (<a class="ext-link" href="http://bugs.php.net/bug.php?id=42682)"><span class="icon">http://bugs.php.net/bug.php?id=42682)</span></a> where <tt>stream_select()</tt> doesn't work on 64bit machines from PHP 5.2.0 to 5.2.5, improved connectivity error handling and timeouts while reading data <span class="date">1/10/11</span></td></tr><tr><th>1.0.0b10</th><td>Fixed <a href="#fMailbox-api-parseMessage"><tt>parseMessage()</tt></a> to properly handle a header format edge case and properly set the <tt>text</tt> and <tt>html</tt> keys even when the email has an explicit <tt>Content-disposition: inline</tt> header <span class="date">11/25/10</span></td></tr><tr><th>1.0.0b9</th><td>Fixed a bug in <a href="#fMailbox-api-parseMessage"><tt>parseMessage()</tt></a> that could cause HTML alternate content to be included in the <tt>inline</tt> content array instead of the <tt>html</tt> element <span class="date">9/20/10</span></td></tr><tr><th>1.0.0b8</th><td>Fixed <a href="#fMailbox-api-parseMessage"><tt>parseMessage()</tt></a> to be able to handle non-text/non-html multipart parts that do not have a <tt>Content-disposition</tt> header <span class="date">9/18/10</span></td></tr><tr><th>1.0.0b7</th><td>Fixed a typo in read() <span class="date">9/7/10</span></td></tr><tr><th>1.0.0b6</th><td>Fixed a typo from 1.0.0b4 <span class="date">7/21/10</span></td></tr><tr><th>1.0.0b5</th><td>Fixes for increased compatibility with various IMAP and POP3 servers, hacked around a bug in PHP 5.3 on Windows <span class="date">6/22/10</span></td></tr><tr><th>1.0.0b4</th><td>Added code to handle emails without an explicit <tt>Content-type</tt> header <span class="date">6/4/10</span></td></tr><tr><th>1.0.0b3</th><td>Added missing static method callback constants <span class="date">5/11/10</span></td></tr><tr><th>1.0.0b2</th><td>Added the missing <a href="#fMailbox-api-enableDebugging"><tt>enableDebugging()</tt></a> <span class="date">5/5/10</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">5/5/10</span></td></tr></table></div>
<div class="class_methods static" id="fMailbox-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fMailbox-api-addSMIMEPair" class="method static"><span class="resolution">::</span><span class="name">addSMIMEPair()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Adds an S/MIME certificate, or certificate + private key pair for verification and decryption of S/MIME messages</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">addSMIMEPair</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$email_address</span><span class="php-code">,</span> <span class="php-vartype"><a href="#fFile">fFile</a>|string</span> <span class="php-var">$certificate_file</span><span class="php-code">,</span> <span class="php-vartype"><a href="#fFile">fFile</a></span> <span class="php-var">$private_key_file</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$private_key_password</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$email_address</td>
				<td class="param_description">The email address the certificate or private key is for</td>
			  </tr>
						  <tr>
				<td class="param_data_type"><a href="#fFile">fFile</a>|string</td>
				<td class="param_name">$certificate_file</td>
				<td class="param_description">The file the S/MIME certificate is stored in - required for verification and decryption</td>
			  </tr>
						  <tr>
				<td class="param_data_type"><a href="#fFile">fFile</a></td>
				<td class="param_name">$private_key_file</td>
				<td class="param_description">The file the S/MIME private key is stored in - required for decryption only</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$private_key_password</td>
				<td class="param_description">The password for the private key</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fMailbox-api-parseMessage" class="method static"><span class="resolution">::</span><span class="name">parseMessage()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Parses a MIME message into an associative array of information</p>
								<p>The output includes the following keys:  </p><ul><li><tt>'received'</tt>: The date the message was received by the server</li><li><tt>'headers'</tt>: An associative array of mail headers, the keys are the header names, in lowercase</li></ul><p>And one or more of the following:  </p><ul><li><tt>'text'</tt>: The plaintext body</li><li><tt>'html'</tt>: The HTML body</li><li><tt>'attachment'</tt>: An array of attachments, each containing:
   <ul><li><tt>'filename'</tt>: The name of the file</li><li><tt>'mimetype'</tt>: The mimetype of the file</li><li><tt>'data'</tt>: The raw contents of the file</li></ul></li><li><tt>'inline'</tt>: An array of inline files, each containing:
   <ul><li><tt>'filename'</tt>: The name of the file</li><li><tt>'mimetype'</tt>: The mimetype of the file</li><li><tt>'data'</tt>: The raw contents of the file</li></ul></li><li><tt>'related'</tt>: An associative array of related files, such as embedded images, with the key <tt>'cid:{content-id}'</tt> and an array value containing:
   <ul><li><tt>'mimetype'</tt>: The mimetype of the file</li><li><tt>'data'</tt>: The raw contents of the file</li></ul></li><li><tt>'verified'</tt>: If the message contents were verified via an S/MIME certificate - if not verified the smime.p7s will be listed as an attachment</li><li><tt>'decrypted'</tt>: If the message contents were decrypted via an S/MIME private key - if not decrypted the smime.p7m will be listed as an attachment</li></ul><p>All values in <tt>headers</tt>, <tt>text</tt> and <tt>body</tt> will have been decoded to  UTF-8. Files in the <tt>attachment</tt>, <tt>inline</tt> and <tt>related</tt> array will all  retain their original encodings.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">parseMessage</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$convert_newlines</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The full source of the email message</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$convert_newlines</td>
				<td class="param_description">If <tt>\r\n</tt> should be converted to <tt>\n</tt> in the <tt>text</tt> and <tt>html</tt> parts the message</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The parsed email message - see method description for details
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fMailbox-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
	</div>
<div class="class_methods" id="fMailbox-api-class_methods">
<h4>Methods</h4>
			  			  									<!-- start method -->
			<h5 id="fMailbox-api-__construct" class="method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Configures the connection to the server</p>
								<p>Please note that the GMail POP3 server does not act like other POP3  servers and the GMail IMAP server should be used instead. GMail POP3 only  allows retrieving a message once - during future connections the email  in question will no longer be available.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fMailbox">fMailbox</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$type</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$host</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$username</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$password</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$port</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$secure</span><span class="php-code">=</span>FALSE<span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$timeout</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$type</td>
				<td class="param_description">The type of mailbox, <tt>'pop3'</tt> or <tt>'imap'</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$host</td>
				<td class="param_description">The server hostname or IP address</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$username</td>
				<td class="param_description">The user to log in as</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$password</td>
				<td class="param_description">The user's password</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$port</td>
				<td class="param_description">The port to connect via - only required if non-standard</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$secure</td>
				<td class="param_description">If SSL should be used for the connection - this requires the <tt>openssl</tt> extension</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$timeout</td>
				<td class="param_description">The timeout to use when connecting</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fMailbox-api-__destruct" class="method"><span class="resolution">-></span><span class="name">__destruct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Disconnects from the server</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">__destruct</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fMailbox-api-close" class="method"><span class="resolution">-></span><span class="name">close()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Closes the connection to the server</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">close</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fMailbox-api-deleteMessages" class="method"><span class="resolution">-></span><span class="name">deleteMessages()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Deletes one or more messages from the server</p>
								<p>Passing more than one UID at a time is more efficient for IMAP mailboxes,  whereas POP3 mailboxes will see no difference in performance.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">deleteMessages</span><span class="php-brackets">(</span> <span class="php-vartype">integer|array</span> <span class="php-var">$uid</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer|array</td>
				<td class="param_name">$uid</td>
				<td class="param_description">The UID(s) of the message(s) to delete</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fMailbox-api-enableDebugging" class="method"><span class="resolution">-></span><span class="name">enableDebugging()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets if debug messages should be shown</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">enableDebugging</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$flag</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$flag</td>
				<td class="param_description">If debugging messages should be shown</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fMailbox-api-fetchMessage" class="method"><span class="resolution">-></span><span class="name">fetchMessage()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Retrieves a single message from the server</p>
								<p>The output includes the following keys:  </p><ul><li><tt>'uid'</tt>: The UID of the message</li><li><tt>'received'</tt>: The date the message was received by the server</li><li><tt>'headers'</tt>: An associative array of mail headers, the keys are the header names, in lowercase</li></ul><p>And one or more of the following:  </p><ul><li><tt>'text'</tt>: The plaintext body</li><li><tt>'html'</tt>: The HTML body</li><li><tt>'attachment'</tt>: An array of attachments, each containing:
   <ul><li><tt>'filename'</tt>: The name of the file</li><li><tt>'mimetype'</tt>: The mimetype of the file</li><li><tt>'data'</tt>: The raw contents of the file</li></ul></li><li><tt>'inline'</tt>: An array of inline files, each containing:
   <ul><li><tt>'filename'</tt>: The name of the file</li><li><tt>'mimetype'</tt>: The mimetype of the file</li><li><tt>'data'</tt>: The raw contents of the file</li></ul></li><li><tt>'related'</tt>: An associative array of related files, such as embedded images, with the key <tt>'cid:{content-id}'</tt> and an array value containing:
   <ul><li><tt>'mimetype'</tt>: The mimetype of the file</li><li><tt>'data'</tt>: The raw contents of the file</li></ul></li><li><tt>'verified'</tt>: If the message contents were verified via an S/MIME certificate - if not verified the smime.p7s will be listed as an attachment</li><li><tt>'decrypted'</tt>: If the message contents were decrypted via an S/MIME private key - if not decrypted the smime.p7m will be listed as an attachment</li></ul><p>All values in <tt>headers</tt>, <tt>text</tt> and <tt>body</tt> will have been decoded to  UTF-8. Files in the <tt>attachment</tt>, <tt>inline</tt> and <tt>related</tt> array will all  retain their original encodings.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">fetchMessage</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$uid</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$convert_newlines</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$uid</td>
				<td class="param_description">The UID of the message to retrieve</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$convert_newlines</td>
				<td class="param_description">If <tt>\r\n</tt> should be converted to <tt>\n</tt> in the <tt>text</tt> and <tt>html</tt> parts the message</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The parsed email message - see method description for details
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fMailbox-api-fetchMessageSource" class="method"><span class="resolution">-></span><span class="name">fetchMessageSource()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Retrieves the raw source of a single message from the server</p>
								<p>This method is primarily useful for storing the raw source of a message.  Normal use of <a href="#fMailbox">fMailbox</a> would involved calling <a href="#fMailbox-api-fetchMessage"><tt>fetchMessage()</tt></a>, which  calls this method and then <a href="#fMailbox-api-parseMessage"><tt>parseMessage()</tt></a>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">fetchMessageSource</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$uid</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$uid</td>
				<td class="param_description">The UID of the message to retrieve</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The raw message source of the email
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fMailbox-api-listMessages" class="method"><span class="resolution">-></span><span class="name">listMessages()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets a list of messages from the server</p>
								<p>The structure of the returned array is:</p><pre class="block "><code>array(
    (integer) {uid} => array(
        'uid'         => (integer) {a unique identifier for this message on this server},
        'received'    => (string) {date message was received},
        'size'        => (integer) {size of message in bytes},
        'date'        => (string) {date message was sent},
        'from'        => (string) {the from header value},
        'subject'     => (string) {the message subject},
        'message_id'  => (string) {optional - the message-id header value, should be globally unique},
        'to'          => (string) {optional - the to header value},
        'in_reply_to' => (string) {optional - the in-reply-to header value}
    ), ...
)</code></pre><p>All values will have been decoded to UTF-8.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">listMessages</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$limit</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$page</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$limit</td>
				<td class="param_description">The number of messages to retrieve</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$page</td>
				<td class="param_description">The page of messages to retrieve</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 A list of messages on the server - see method description for details
				</p>
		</div>
		<!-- end method -->	
					</div>		</section>
		</div>
		<section class="main">
<h2 id="fMessaging">fMessaging</h2>
<div class="sidebar">
<h3 id="fMessaging-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fMessaging">Class Documentation</a></strong></li>
<li><a href="#fMessaging-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fMessaging-docs-CreatingMessages">Creating Messages</a></li>
<li><a href="#fMessaging-docs-RetrievingMessages">Retrieving Messages</a></li>
<li><a href="#fMessaging-docs-DisplayingMessages">Displaying Messages</a></li>
<li><a href="#fMessaging-docs-UsingNoRecipient">Using No Recipient</a></li>
</ul>
</div>

<p>
The fMessaging class is a simple session-based messaging tool that allows for messaging to be pulled out of your URLs and kept behind the scenes. 
</p>

<h3 id="fMessaging-docs-CreatingMessages">Creating Messages</h3>

<p>
The method <a href="#fMessaging-api-create"><code>create()</code></a> will construct a message and save it for later retrieval. It accepts three parameters, the <code>$name</code> of the message, the <code>$recipient</code> and the <code>$message</code> itself. Here is an example of creating a message:
</p>
<pre class="block php"><code>fMessaging::create('success', '/admin/users', 'The user was successfully created');</code></pre>

<p>
 As you can see above, I used a URL as the recipient, however this is not a requirement. Any string can be used as a recipient, you will just need to use the same recipient when retrieving the message, as you will see below.
</p>

<h3 id="fMessaging-docs-RetrievingMessages">Retrieving Messages</h3>

<p>
Once a message has been created, it can then be retrieved. The action of retrieving a message deletes it from the session, thus messages are write-once/read-once. The <a href="#fMessaging-api-retrieve"><code>retrieve()</code></a> method requires two parameters, the <code>$name</code> of the message and the <code>$recipient</code>. Both parameters need to be the same as when the message was created.
</p>

<p>
If a message for the <code>$name</code> and <code>$recipient</code> combination has not been created, <code>NULL</code> will be returned instead.
</p>

<p>
Here is an example of retrieving a message and displaying it:
</p>
<pre class="block php"><code>if ($success = fMessaging::retrieve('success', '/admin/users')) {
    echo $success;
}</code></pre>

<p>
 Since calling <code>retrieve()</code> removes the message and prevents it from being retrieved on another page, sometimes it is more appropriate to call the method <a href="#fMessaging-api-check"><code>check()</code></a>. <code>check()</code> will return a boolean, indicating if a message with the <code>$name</code> and <code>$recipient</code> currently exists:
</p>
<pre class="block php"><code>if (fMessaging::check('success', '/admin/users')) {
    // ...
}</code></pre>

<h3 id="fMessaging-docs-DisplayingMessages">Displaying Messages</h3>

<p>
The <a href="#fMessaging-api-show"><code>show()</code></a> method will display any message with the <code>$name</code> and <code>$recipient</code> specified. If a message exists, it be displayed in a <code>p</code> or <code>div</code> tag. By default, the <code>$name</code> of the message will be used as the CSS class for the HTML tag, however if a different class is desired, the optional third parameter <code>$css_class</code> can be specified.
</p>

<p>
<code>show()</code> will only print the output if the string is not empty, and will detect if the provided content contains any block-level HTML tags, automatically switching from printing a <code>p</code> tag to a <code>div</code> tag.
</p>

<p>
Here are a few examples:
</p>
<pre class="block php"><code>// Example 1: Show the success message for /admin/users
fMessaging::show('success', '/admin/users');

// Example 2: Show the error message for /admin/users with the CSS class 'message'
fMessaging::show('error', '/admin/users', 'message');</code></pre>

<p>
 And here is the output for the two calls to <code>show()</code> (whitespace added to the HTML for readability):
</p>
<pre class="block html"><code>&lt;!-- Example 1 --&gt;
&lt;p class=&quot;success&quot;&gt;
    The user was successfully created!
&lt;/p&gt;

&lt;!-- Example 2 --&gt;
&lt;div class=&quot;message&quot;&gt;
    &lt;p&gt;
        The following fields need a value:
    &lt;/p&gt;
    &lt;ul&gt;
        &lt;li&gt;Name&lt;/li&gt;
        &lt;li&gt;Email&lt;/li&gt;
    &lt;/ul&gt;
&lt;/div&gt;</code></pre>

<p>
 It is also possible to show multiple messages with a single call by passing an array of message names or <code>'*'</code> for all messages. Please note that using either of these options will disable the functionality of the third parameter, <code>$css_class</code>, and the message names will be used for the CSS classes.
</p>
<pre class="block php"><code>// Show 'success' and 'error'
fMessaging::show(
    array('success', 'error'),
    '/admin/users'
);

// Show all messages for the recipient
fMessaging::show('*', '/admin/users');</code></pre>

<h3 id="fMessaging-docs-UsingNoRecipient">Using No Recipient</h3>

<p>
It is possible to use all of the fMessaging methods without a recipient. To do this, simply leave out the recipient parameter. Please note that this means each method will have one less parameter, it does <em>not</em> mean that <code>NULL</code> should be passed in instead.
</p>

<p>
Here are the methods without a recipient:
</p>
<pre class="block php"><code>fMessaging::create('success', 'The user was successfully created');
$success = fMessaging::retrieve('success');
if (fMessaging::check('success')) { }
fMessaging::show('success');</code></pre>

<p>
 The only downside to not specifying a recipient is the possibility of overwriting messages in a multi-tab browser environment.
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fMessaging-api">fMessaging API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fMessaging">Class Documentation</a></li>
		<li><strong><a href="#fMessaging-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fMessaging-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fMessaging-api-check">check()</a></li>
	  			<li><a href="#fMessaging-api-create">create()</a></li>
	  			<li class="protected"><a href="#fMessaging-api-reset">reset()</a></li>
	  			<li><a href="#fMessaging-api-retrieve">retrieve()</a></li>
	  			<li><a href="#fMessaging-api-show">show()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fHTML">fHTML</a></li>
		<li><a href="#fSession">fSession</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b7</span></div>
<p class="short_description">Provides session-based messaging for page-to-page communication</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b7</th><td>Fixed a small PHPDoc error <span class="date">3/15/10</span></td></tr><tr><th>1.0.0b6</th><td>Updated class to use new <a href="#fSession">fSession</a> API <span class="date">10/23/09</span></td></tr><tr><th>1.0.0b5</th><td>Made the <tt>$recipient</tt> parameter optional for all methods <span class="date">7/8/09</span></td></tr><tr><th>1.0.0b4</th><td>Added support for <tt>'*'</tt> and arrays of names to <a href="#fMessaging-api-check"><tt>check()</tt></a> <span class="date">6/2/09</span></td></tr><tr><th>1.0.0b3</th><td>Updated class to use new <a href="#fSession">fSession</a> API <span class="date">5/8/09</span></td></tr><tr><th>1.0.0b2</th><td>Changed <a href="#fMessaging-api-show"><tt>show()</tt></a> to accept more than one message name, or * for all messages <span class="date">1/12/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">3/5/08</span></td></tr></table></div>
<div class="class_methods static" id="fMessaging-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fMessaging-api-check" class="method static"><span class="resolution">::</span><span class="name">check()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Checks to see if a message exists of the name specified for the recipient specified</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">check</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$recipient</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The name or array of names of the message(s) to check for, or <tt>'*'</tt> to check for any</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$recipient</td>
				<td class="param_description">The intended recipient</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If a message of the name and recipient specified exists
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fMessaging-api-create" class="method static"><span class="resolution">::</span><span class="name">create()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Creates a message that is stored in the session and retrieved by another page</p>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">create</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$recipient</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$message</span> <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype">void</span> <span class="php-identifier">create</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$message</span> <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">A name for the message</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$recipient</td>
				<td class="param_description">The intended recipient - this may be ommitted</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message to send</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fMessaging-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the data of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fMessaging-api-retrieve" class="method static"><span class="resolution">::</span><span class="name">retrieve()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Retrieves and removes a message from the session</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">retrieve</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$recipient</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The name of the message to retrieve</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$recipient</td>
				<td class="param_description">The intended recipient</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The message contents
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fMessaging-api-show" class="method static"><span class="resolution">::</span><span class="name">show()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Retrieves a message, removes it from the session and prints it - will not print if no content</p>
								<p>The message will be printed in a <tt>p</tt> tag if it does not contain  any block level HTML, otherwise it will be printed in a <tt>div</tt> tag.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">show</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$name</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$recipient</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$css_class</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$name</td>
				<td class="param_description">The name or array of names of the message(s) to show, or <tt>'*'</tt> to show all</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$recipient</td>
				<td class="param_description">The intended recipient</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$css_class</td>
				<td class="param_description">Overrides using the <tt>$name</tt> as the CSS class when displaying the message - only used if a single <tt>$name</tt> is specified</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If one or more messages was shown
				</p>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fMoney">fMoney</h2>
<div class="sidebar">
<h3 id="fMoney-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fMoney">Class Documentation</a></strong></li>
<li><a href="#fMoney-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fMoney-docs-Currencies">Currencies</a>
<ul>
<li><a href="#fMoney-docs-ExchangeRates">Exchange Rates</a></li>
<li><a href="#fMoney-docs-DefiningaCurrency">Defining a Currency</a></li>
<li><a href="#fMoney-docs-DefaultCurrency">Default Currency</a></li>
</ul>
</li>
<li><a href="#fMoney-docs-Instantiation">Instantiation</a></li>
<li><a href="#fMoney-docs-Accessors">Accessors</a></li>
<li><a href="#fMoney-docs-Comparison">Comparison</a></li>
<li><a href="#fMoney-docs-Modification">Modification</a>
<ul>
<li><a href="#fMoney-docs-Addition">Addition</a></li>
<li><a href="#fMoney-docs-Subtraction">Subtraction</a></li>
<li><a href="#fMoney-docs-Multiplication">Multiplication</a></li>
<li><a href="#fMoney-docs-AllocationDivision">Allocation (Division)</a></li>
</ul>
</li>
<li><a href="#fMoney-docs-Conversion">Conversion</a></li>
<li><a href="#fMoney-docs-Formatting">Formatting</a></li>
<li><a href="#fMoney-docs-Localization">Localization</a></li>
</ul>

<h3 id="fMoney-docs-ValueObjects">Value Objects </h3>

<ul>
<li><a href="#fDate">fDate</a></li>
<li><strong>fMoney</strong></li>
<li><a href="#fNumber">fNumber</a></li>
<li><a href="#fTime">fTime</a></li>
<li><a href="#fTimestamp">fTimestamp</a></li>
</ul>
</div>

<p>
The fMoney class is a <a href="#ValueObjects-docs">value object</a> for representing a monetary value. There is support for precise calculation, multiple currencies and formatting.
</p>

<h3 id="fMoney-docs-Currencies">Currencies</h3>

<h4 id="fMoney-docs-ExchangeRates">Exchange Rates</h4>

<p>
By default the fMoney class comes with a single defined currency USD (United States Dollar). fMoney is built in such a way that multiple currencies can be used and converted between, however there is no built-in functionality to fetch exchange rate information. A few sources of free exchange rate information include:
</p>

<ul>
<li><a class="ext-link" href="http://foxrate.org"><span class="icon">FoxRate.org</span></a></li>
<li><a class="ext-link" href="http://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml"><span class="icon">European Central Bank</span></a></li>
<li><a class="ext-link" href="http://www.federalreserve.gov/releases/H10/update/h10daily.txt"><span class="icon">Federal Reserve Bank</span></a></li>
<li><a class="ext-link" href="http://www.imf.org/external/np/fin/data/rms_rep.aspx?tsvflag=Y"><span class="icon">International Monetary Fund</span></a></li>
</ul>

<p>
The rest of the documentation will assume that if multiple currencies are being used that the work has been done to fetch the appropriate exchange rate information in a regular fashion.
</p>

<h4 id="fMoney-docs-DefiningaCurrency">Defining a Currency</h4>

<p>
Whenever a system must use a currency other than USD, the new currency must be defined by calling <a href="#fMoney-api-defineCurrency"><code>defineCurrency()</code></a>. This method takes a total of five parameters that define all of the relevant information about a currency. The parameters are <code>$iso_code</code>, <code>$name</code>, <code>$symbol</code>, <code>$precision</code> and <code>$value</code>.
</p>

<p>
Here is an example of defining the currency Pound Sterling:
</p>
<pre class="block php"><code>fMoney::defineCurrency(
    'GBP',            // The three digit ISO code
    'Pound Sterling', // The name of the currency
    '',              // The currency symbol
    '2',              // The precision after the decimal point
    '1.91865000'      // The current exchange rate with USD
);</code></pre>

<p>
 The <code>$value</code> of a currency should be defined relative to USD, that is USD has a value of <code>1.00000000</code>.
</p>

<p>
Once a currency has been defined, information about it can be retrieved by using the method <a href="#fMoney-api-getCurrencyInfo"><code>getCurrencyInfo()</code></a>. There is one required parameter, <code>$iso_code</code>, which indicates what currency should be returned. A second optional parameter, <code>$element</code>, allows selecting a single piece of information including:
</p>

<ul>
<li><code>'name'</code></li>
<li><code>'symbol'</code></li>
<li><code>'precision'</code></li>
<li><code>'value'</code></li>
</ul>

<p>
It is also possible to get a list of all currencies by calling <a href="#fMoney-api-getCurrencies"><code>getCurrencies()</code></a>.
</p>

<h4 id="fMoney-docs-DefaultCurrency">Default Currency</h4>

<p>
While not required, setting a default currency is often useful, especially if only a single currency is supported. By setting the default currency, it is no longer necessary to specify the currency code when creating new fMoney objects.
</p>

<p>
The method <a href="#fMoney-api-setDefaultCurrency"><code>setDefaultCurrency()</code></a> accepts a single parameter, the <code>$iso_code</code> for the desired default currency. Below is an example of setting the default to United States Dollar:
</p>
<pre class="block php"><code>fMoney::setDefaultCurrency('USD');</code></pre>

<p>
 The default currency can be retrieved by calling <a href="#fMoney-api-getDefaultCurrency"><code>getDefaultCurrency()</code></a>.
</p>

<h3 id="fMoney-docs-Instantiation">Instantiation</h3>

<p>
Create an fMoney object requires either one or two parameters depending on whether or not a <a href="#fMoney-docs-DefaultCurrency">default currency</a> has been set. If a default <strong>has not</strong> been set, or a currency other than the default is desired, an <code>$amount</code> and a <code>$currency</code> must be specified:
</p>
<pre class="block php"><code>$price = new fMoney('12.25', 'USD');</code></pre>

<p>
 <em>When setting the amount of an fMoney object, a float value should never be used due to the inherit loss of precision when storing floating point values. Instead, always use an integer, or a floating point value in a string.</em>
</p>

<p>
If a default currency <strong>has</strong> been set and the default currency is desired, only a single parameter, <code>$amount</code> is required:
</p>
<pre class="block php"><code>fMoney::setDefaultCurrency('USD');

$twelve_dollars = new fMoney('12.00');
$five_dollars   = new fMoney('5.00');</code></pre>

<p>
 Note that by default the currency symbol and all commas (,) will be removed from any monetary value before parsing it as a number. For details about how to customize this behaviour, please see the <a href="#fMoney-docs-Localization">localization section</a>.
</p>

<h3 id="fMoney-docs-Accessors">Accessors</h3>

<p>
There are two accessors for the fMoney class, <a href="#fMoney-api-getAmount"><code>getAmount()</code></a> and <a href="#fMoney-api-getCurrency"><code>getCurrency()</code></a> which return the amount of the value and the currency respectively.
</p>
<pre class="block php"><code>echo $five_dollars-&gt;getAmount() . &quot;\n&quot;;
echo $five_dollars-&gt;getCurrency();</code></pre>

<p>
 will output the following:
</p>
<pre><code>5.00
USD</code></pre>

<h3 id="fMoney-docs-Comparison">Comparison</h3>

<p>
Comparison of fMoney objects is accomplished by the method <a href="#fMoney-api-eq"><code>eq()</code></a>, <a href="#fMoney-api-gt"><code>gt()</code></a>, <a href="#fMoney-api-gte"><code>gte()</code></a>, <a href="#fMoney-api-lt"><code>lt()</code></a> and <a href="#fMoney-api-lte"><code>lte()</code></a>. Each method will convert any non USD values to USD before comparison to ensure that comparisons are done correctly. Below is a table of the comparison methods:
</p>
<table><tbody>
<tr>
<td><strong>Method</strong></td>
<td><strong>Comparison</strong></td>
</tr>
<tr>
<td><a href="#fMoney-api-eq"><code>eq()</code></a></td>
<td>If the two values are equal</td>
</tr>
<tr>
<td><a href="#fMoney-api-gt"><code>gt()</code></a></td>
<td>If the object being called is greater than the value or object passed</td>
</tr>
<tr>
<td><a href="#fMoney-api-gte"><code>gte()</code></a></td>
<td>If the object being called is greater than or equal to the value or object passed</td>
</tr>
<tr>
<td><a href="#fMoney-api-lt"><code>lt()</code></a></td>
<td>If the object being called is less than the value or object passed</td>
</tr>
<tr>
<td><a href="#fMoney-api-lte"><code>lte()</code></a></td>
<td>If the object being called is less than or equal to the value being passed</td>
</tr>
</tbody></table>

<p>
It is possible to pass values other than an fMoney object for comparison. These values will be converted to an fMoney object using the default currency if defined. If no default currency is defined, an exception will be thrown.
</p>

<p>
Here are a few examples:
</p>
<pre class="block php"><code>if (!$twelve_dollars-&gt;eq($five_dollars)) {
    echo 'Twelve is not equal to five';
}

// Passing the string '5.00' only works because a default currency has been defined
if ($five_dollars-&gt;eq('5.00')) {
    echo 'Yes, five dollars is equal to five dollars';
}

if ($five_dollars-&gt;lte($twelve_dollars)) {
   echo 'Five dollars is less than or equal to twelve';
}</code></pre>

<h3 id="fMoney-docs-Modification">Modification</h3>

<p>
fMoney objects can be added, subtracted, multiplied and allocated (non-lossy division). All math operations are performed using an extra digit of precision and then the results are rounded using the <a class="ext-link" href="http://en.wikipedia.org/wiki/Rounding#Common_method"><span class="icon">common method</span></a>. All math operations also take into account different currencies, with the result being in the currency of the object being called.
</p>

<p>
<em>Please be sure to avoid floating point numbers in PHP when working with monetary values. Their inherent lack of precision make them a poor choice for precise calculations. Instead, use strings containing floating decimal values.</em>
</p>

<h4 id="fMoney-docs-Addition">Addition</h4>

<p>
Addition is accomplished using the method <a href="#fMoney-api-add"><code>add()</code></a>. A single parameter, <code>$addend</code>, is required. The addend may be an fMoney object, or a string or integer if a default currency is defined. 
</p>
<pre class="block php"><code>$seventeen_dollars  = $five_dollars-&gt;add($twelve_dollars);
$six_dollars        = $five_dollars-&gt;add('1.00');</code></pre>

<h4 id="fMoney-docs-Subtraction">Subtraction</h4>

<p>
Subtraction is accomplished by the method <a href="#fMoney-api-sub"><code>sub()</code></a>. A single parameter, <code>$subtrahend</code>, is required. The subtrahend may be an fMoney object, or a string or integer if a default currency is defined.
</p>
<pre class="block php"><code>$seven_dollars = $twelve_dollars-&gt;sub($five_dollars);
$four_dollars  = $five_dollars-&gt;sub('1.00');</code></pre>

<h4 id="fMoney-docs-Multiplication">Multiplication</h4>

<p>
To multiply a monetary value, simply pass a string, integer, or <a href="#fNumber">fNumber</a> multiplier to <a href="#fMoney-api-mul"><code>mul()</code></a>.
</p>
<pre class="block php"><code>$fourty_eight_dollars    = $twelve_dollars-&gt;mul(4);
$five_dollars_five_cents = $five_dollars-&gt;mul('1.1');

$number = new fNumber('+5.5');
$twenty_seven_dollars_fifty_cents = $five_dollars-&gt;mul($number);</code></pre>

<h4 id="fMoney-docs-AllocationDivision">Allocation (Division)</h4>

<p>
Instead of providing a division method, which can easily lead to missing pennies, the fMoney class provides the method <a href="#fMoney-api-allocate"><code>allocate()</code></a>. This method splits up a monetary value into chunks that total the original value.
</p>

<p>
<code>allocate()</code> accepts two or more parameters, each being a string or <a href="#fNumber">fNumber</a> fraction that represents the portion of the total each result should hold. The result is an array of fMoney objects with as many elements as parameters specified.
</p>
<pre class="block php"><code>list($four_dollars, $one_dollar) = $five_dollars-&gt;allocate('0.8', '0.2');</code></pre>

<p>
 The resulting monetary values will always add up to <strong>exactly</strong> the original value. This prevents money from being lost in calculations.
</p>
<pre class="block php"><code>// All three thirds will be equal to four dollars
list($first_third, $second_third, $fourth_third) = $twelve_dollars-&gt;allocate('0.333', '0.333', '0.334');</code></pre>

<h3 id="fMoney-docs-Conversion">Conversion</h3>

<p>
If you have defined at least one currency other than USD (such as we did with GBP in the <a href="#fMoney-docs-Currencies">Currencies section</a>) you can convert monetary values between currencies on the fly. The method <a href="#fMoney-api-convert"><code>convert()</code></a> requires a single parameter, the ISO code of the currency to convert to.
</p>
<pre class="block php"><code>$usd_price = new fMoney('5.00');
$gbp_price = $usd_price-&gt;convert('GBP');
$usd_price = $gbp_price-&gt;convert('USD');</code></pre>

<h3 id="fMoney-docs-Formatting">Formatting</h3>

<p>
Normally when displaying a monetary value it is desired to display the currency symbol and the value in a standard format with separators at the thousands, millions, etc. The method <a href="#fMoney-api-format"><code>format()</code></a> will perform such formatting.
</p>
<pre class="block php"><code>echo $five_dollars-&gt;format() . &quot;\n&quot;;

$one_thousand_two_hundred_dollars = new fMoney('1200.00');
echo $one_thousand_two_hundred_dollars-&gt;format() . &quot;\n&quot;;

$five_pounds = new fMoney('5.00', 'GBP');
echo $five_pounds-&gt;format();</code></pre>

<p>
 will output the following:
</p>
<pre><code>$5.00
$1,200.00
5.00</code></pre>

<p>
 If the parameter <code>$remove_zero_fraction</code> is set to <code>TRUE</code> and the value has a fraction that is just zeros, the resulting output will not contain a decimal point or a fraction.
</p>
<pre class="block php"><code>// This will print: $5
echo $five_dollars-&gt;format(TRUE);

$two_fifty_three = new fMoney('2.53');
// This will print: $2.53
echo $two_fifty_three-&gt;format(TRUE);</code></pre>

<p>
 The method <a href="#fMoney-api-__toString"><code>__toString()</code></a> will return the value without the currency symbol or the thousands separators.
</p>
<pre class="block php"><code>echo $five_dollars-&gt;__toString() . &quot;\n&quot;;
echo $one_thousand_two_hundred_dollars-&gt;__toString() . &quot;\n&quot;;
echo $five_pounds-&gt;__toString();</code></pre>

<p>
 will output the following:
</p>
<pre><code>5.00
1200.00
5.00</code></pre>

<h3 id="fMoney-docs-Localization">Localization</h3>

<p>
When formatting monetary values in different locales, it will often be the case that the thousands separator and decimal point are different than the one in the United States. The methods <a href="#fMoney-api-registerFormatCallback"><code>registerFormatCallback()</code></a> and <a href="#fMoney-api-registerUnformatCallback"><code>registerUnformatCallback()</code></a> allow for both creating a different formatting and also removing such formatting when creating a new fMoney object.
</p>
<pre class="block php"><code>// Function to format monetary values for Italian
function italian_money_format(fNumber $value, $currency, $remove_zero_fraction=FALSE)
{
    $info = fMoney::getCurrencyInfo($currency);
    if ($remove_zero_fraction &amp;&amp; $value-&gt;eq($value-&gt;trunc())) {
        $info['precision'] = 0;
    }
    return $info['symbol'] . number_format($value-&gt;__toString(), $info['precision'], ',', '.');
}

// Function to change a monetary value to a plain number
function italian_money_unformat($value, $currency)
{
    $symbol = fMoney::getCurrencyInfo($currency, 'symbol');
    return str_replace(
        array('.', ',', $symbol),
        array('', '.', ''),
        $value
    );
}

fMoney::registerFormatCallback('italian_money_format');
fMoney::registerUnformatCallback('italian_money_unformat');</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fMoney-api">fMoney API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fMoney">Class Documentation</a></li>
		<li><strong><a href="#fMoney-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fMoney-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  	  	  	  	  			<li><a href="#fMoney-api-defineCurrency">defineCurrency()</a></li>
	  	  	  	  			<li><a href="#fMoney-api-getCurrencies">getCurrencies()</a></li>
	  	  			<li><a href="#fMoney-api-getCurrencyInfo">getCurrencyInfo()</a></li>
	  			<li><a href="#fMoney-api-getDefaultCurrency">getDefaultCurrency()</a></li>
	  	  	  	  	  	  			<li><a href="#fMoney-api-registerFormatCallback">registerFormatCallback()</a></li>
	  			<li><a href="#fMoney-api-registerUnformatCallback">registerUnformatCallback()</a></li>
	  			<li class="protected"><a href="#fMoney-api-reset">reset()</a></li>
	  			<li><a href="#fMoney-api-setDefaultCurrency">setDefaultCurrency()</a></li>
	  	  </ul>
</div>
<div class="methods">
<h4><a href="#fMoney-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fMoney-api-__construct">__construct()</a></li>
	  			<li class="protected"><a href="#fMoney-api-__get">__get()</a></li>
	  			<li><a href="#fMoney-api-__toString">__toString()</a></li>
	  			<li><a href="#fMoney-api-add">add()</a></li>
	  			<li><a href="#fMoney-api-allocate">allocate()</a></li>
	  			<li><a href="#fMoney-api-convert">convert()</a></li>
	  	  			<li><a href="#fMoney-api-eq">eq()</a></li>
	  			<li><a href="#fMoney-api-format">format()</a></li>
	  			<li><a href="#fMoney-api-getAmount">getAmount()</a></li>
	  	  			<li><a href="#fMoney-api-getCurrency">getCurrency()</a></li>
	  	  	  			<li><a href="#fMoney-api-gt">gt()</a></li>
	  			<li><a href="#fMoney-api-gte">gte()</a></li>
	  			<li><a href="#fMoney-api-lt">lt()</a></li>
	  			<li><a href="#fMoney-api-lte">lte()</a></li>
	  			<li><a href="#fMoney-api-mul">mul()</a></li>
	  	  	  	  	  			<li><a href="#fMoney-api-sub">sub()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fNumber">fNumber</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fLoader">fLoader</a></li>
		<li><a href="#fORMMoney">fORMMoney</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b3</span></div>
<p class="short_description">Represents a monetary value - USD are supported by default and others can be added via defineCurrency()</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b3</th><td>Added the <tt>$remove_zero_fraction</tt> parameter to <a href="#fMoney-api-format"><tt>format()</tt></a> <span class="date">6/9/10</span></td></tr><tr><th>1.0.0b2</th><td>Fixed a bug with calling <a href="#fMoney-api-format"><tt>format()</tt></a> when a format callback is set, fixed <tt>NULL</tt> <tt>$element</tt> handling in <a href="#fMoney-api-getCurrencyInfo"><tt>getCurrencyInfo()</tt></a> <span class="date">3/24/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">8/10/08</span></td></tr></table></div>
<div class="class_methods static" id="fMoney-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fMoney-api-defineCurrency" class="method static"><span class="resolution">::</span><span class="name">defineCurrency()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Allows adding a new currency, or modifying an existing one</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">defineCurrency</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$iso_code</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$symbol</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$precision</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$iso_code</td>
				<td class="param_description">The ISO code (three letters, e.g. <tt>'USD'</tt>) for the currency</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The name of the currency</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$symbol</td>
				<td class="param_description">The symbol for the currency</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$precision</td>
				<td class="param_description">The number of digits after the decimal separator to store</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value of the currency relative to some common standard between all currencies</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fMoney-api-getCurrencies" class="method static"><span class="resolution">::</span><span class="name">getCurrencies()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Lists all of the defined currencies</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">getCurrencies</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					The 3 letter ISO codes for all of the defined currencies
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fMoney-api-getCurrencyInfo" class="method static"><span class="resolution">::</span><span class="name">getCurrencyInfo()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Allows retrieving information about a currency</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">getCurrencyInfo</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$iso_code</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$element</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$iso_code</td>
				<td class="param_description">The ISO code (three letters, e.g. <tt>'USD'</tt>) for the currency</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$element</td>
				<td class="param_description">The element to retrieve: <tt>'name'</tt>, <tt>'symbol'</tt>, <tt>'precision'</tt>, <tt>'value'</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					An associative array of the currency info, or the element specified
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fMoney-api-getDefaultCurrency" class="method static"><span class="resolution">::</span><span class="name">getDefaultCurrency()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Gets the default currency</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getDefaultCurrency</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					The ISO code of the default currency
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fMoney-api-registerFormatCallback" class="method static"><span class="resolution">::</span><span class="name">registerFormatCallback()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Allows setting a callback to translate or modify any return values from format()</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">registerFormatCallback</span><span class="php-brackets">(</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback to pass all <a href="#fNumber">fNumber</a> objects to. Should accept an <a href="#fNumber">fNumber</a> object, a string currency abbreviation and a boolean indicating if a zero-fraction should be removed - it should return a formatted string.</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fMoney-api-registerUnformatCallback" class="method static"><span class="resolution">::</span><span class="name">registerUnformatCallback()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Allows setting a callback to clean any formatted values so they can be passed to <a href="#fNumber">fNumber</a></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">registerUnformatCallback</span><span class="php-brackets">(</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback to pass formatted strings to. Should accept a formatted string and a currency code and return a string suitable to passing to the <a href="#fNumber">fNumber</a> constructor.</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fMoney-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fMoney-api-setDefaultCurrency" class="method static"><span class="resolution">::</span><span class="name">setDefaultCurrency()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets the default currency to use when creating <a href="#fMoney">fMoney</a> objects</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setDefaultCurrency</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$iso_code</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$iso_code</td>
				<td class="param_description">The ISO code (three letters, e.g. <tt>'USD'</tt>) for the new default currency</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
		</div>
<div class="class_methods" id="fMoney-api-class_methods">
<h4>Methods</h4>
						<!-- start method -->
			<h5 id="fMoney-api-__construct" class="method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Creates the monetary to represent, with an optional currency</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fMoney">fMoney</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fNumber">fNumber</a>|string</span> <span class="php-var">$amount</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$currency</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fNumber">fNumber</a>|string</td>
				<td class="param_name">$amount</td>
				<td class="param_description">The monetary value to represent, should never be a float since those are imprecise</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$currency</td>
				<td class="param_description">The currency ISO code (three letters, e.g. <tt>'USD'</tt>) for this value</td>
			  </tr>
						</table>
			</div>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$amount</tt> is not a valid number/monetary value</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fMoney-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fMoney-api-__toString" class="method"><span class="resolution">-></span><span class="name">__toString()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the monetary value without a currency symbol or thousand separator (e.g. <tt>2000.12</tt>)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">__toString</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The monetary value without currency symbol or thousands separator
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fMoney-api-add" class="method"><span class="resolution">-></span><span class="name">add()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds the passed monetary value to the current one</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fMoney">fMoney</a></span> <span class="php-identifier">add</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fMoney">fMoney</a>|string|integer</span> <span class="php-var">$addend</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fMoney">fMoney</a>|string|integer</td>
				<td class="param_name">$addend</td>
				<td class="param_description">The money object to add - a string or integer will be converted to the default currency (if defined)</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The sum of the monetary values in this currency
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$addend</tt> is not a valid number/monetary value</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fMoney-api-allocate" class="method"><span class="resolution">-></span><span class="name">allocate()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Splits the current value into multiple parts ensuring that the sum of the results is exactly equal to this amount</p>
								<p>This method takes two or more parameters. The parameters should each be  fractions that when added together equal 1.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">allocate</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fNumber">fNumber</a>|string</span> <span class="php-var">$ratio1</span><span class="php-code">,</span> <span class="php-vartype"><a href="#fNumber">fNumber</a>|string</span> <span class="php-var">$ratio2</span><span class="php-code">,</span> <span class="php-vartype"><a href="#fNumber">fNumber</a>|string</span> <span class="php-var">...</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fNumber">fNumber</a>|string</td>
				<td class="param_name">$ratio1</td>
				<td class="param_description">The ratio of the first amount to this amount</td>
			  </tr>
						  <tr>
				<td class="param_data_type"><a href="#fNumber">fNumber</a>|string</td>
				<td class="param_name">$ratio2 <em>[, ... ]</em></td>
				<td class="param_description">The ratio of the second amount to this amount</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 <a href="#fMoney">fMoney</a> objects each with the appropriate ratio of the current amount
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When one of the ratios is not a number</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fMoney-api-convert" class="method"><span class="resolution">-></span><span class="name">convert()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Converts this money amount to another currency</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fMoney">fMoney</a></span> <span class="php-identifier">convert</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$new_currency</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$new_currency</td>
				<td class="param_description">The ISO code (three letters, e.g. <tt>'USD'</tt>) for the new currency</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 A new <a href="#fMoney">fMoney</a> object representing this amount in the new currency
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fMoney-api-eq" class="method"><span class="resolution">-></span><span class="name">eq()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Checks to see if two monetary values are equal</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">eq</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fMoney">fMoney</a>|string|integer</span> <span class="php-var">$money</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fMoney">fMoney</a>|string|integer</td>
				<td class="param_name">$money</td>
				<td class="param_description">The money object to compare to - a string or integer will be converted to the default currency (if defined)</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If the monetary values are equal
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$money</tt> is not a valid number/monetary value</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fMoney-api-format" class="method"><span class="resolution">-></span><span class="name">format()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Formats the amount by preceeding the amount with the currency symbol and adding thousands separators</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">format</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$remove_zero_fraction</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$remove_zero_fraction</td>
				<td class="param_description">If <tt>TRUE</tt> and all digits after the decimal place are <tt>0</tt>, the decimal place and all zeros are removed</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The formatted (and possibly converted) value
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fMoney-api-getAmount" class="method"><span class="resolution">-></span><span class="name">getAmount()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the <a href="#fNumber">fNumber</a> object representing the amount</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fNumber">fNumber</a></span> <span class="php-identifier">getAmount</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The amount of this monetary value
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fMoney-api-getCurrency" class="method"><span class="resolution">-></span><span class="name">getCurrency()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the currency ISO code</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getCurrency</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The currency ISO code (three letters, e.g. <tt>'USD'</tt>)
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fMoney-api-gt" class="method"><span class="resolution">-></span><span class="name">gt()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Checks to see if this value is greater than the one passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">gt</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fMoney">fMoney</a>|string|integer</span> <span class="php-var">$money</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fMoney">fMoney</a>|string|integer</td>
				<td class="param_name">$money</td>
				<td class="param_description">The money object to compare to - a string or integer will be converted to the default currency (if defined)</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this value is greater than the one passed
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$money</tt> is not a valid number/monetary value</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fMoney-api-gte" class="method"><span class="resolution">-></span><span class="name">gte()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Checks to see if this value is greater than or equal to the one passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">gte</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fMoney">fMoney</a>|string|integer</span> <span class="php-var">$money</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fMoney">fMoney</a>|string|integer</td>
				<td class="param_name">$money</td>
				<td class="param_description">The money object to compare to - a string or integer will be converted to the default currency (if defined)</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this value is greater than or equal to the one passed
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$money</tt> is not a valid number/monetary value</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fMoney-api-lt" class="method"><span class="resolution">-></span><span class="name">lt()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Checks to see if this value is less than the one passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">lt</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fMoney">fMoney</a>|string|integer</span> <span class="php-var">$money</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fMoney">fMoney</a>|string|integer</td>
				<td class="param_name">$money</td>
				<td class="param_description">The money object to compare to - a string or integer will be converted to the default currency (if defined)</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this value is less than the one passed
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$money</tt> is not a valid number/monetary value</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fMoney-api-lte" class="method"><span class="resolution">-></span><span class="name">lte()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Checks to see if this value is less than or equal to the one passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">lte</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fMoney">fMoney</a>|string|integer</span> <span class="php-var">$money</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fMoney">fMoney</a>|string|integer</td>
				<td class="param_name">$money</td>
				<td class="param_description">The money object to compare to - a string or integer will be converted to the default currency (if defined)</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this value is less than or equal to the one passed
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$money</tt> is not a valid number/monetary value</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fMoney-api-mul" class="method"><span class="resolution">-></span><span class="name">mul()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Mupltiplies this monetary value times the number passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fMoney">fMoney</a></span> <span class="php-identifier">mul</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fNumber">fNumber</a>|string|integer</span> <span class="php-var">$multiplicand</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fNumber">fNumber</a>|string|integer</td>
				<td class="param_name">$multiplicand</td>
				<td class="param_description">The number of times to multiply this ammount - don't use a float since they are imprecise</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The product of the monetary value and the multiplicand passed
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$multiplicand</tt> is not a valid number</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fMoney-api-sub" class="method"><span class="resolution">-></span><span class="name">sub()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Subtracts the passed monetary value from the current one</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fMoney">fMoney</a></span> <span class="php-identifier">sub</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fMoney">fMoney</a>|string|integer</span> <span class="php-var">$subtrahend</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fMoney">fMoney</a>|string|integer</td>
				<td class="param_name">$subtrahend</td>
				<td class="param_description">The money object to subtract - a string or integer will be converted to the default currency (if defined)</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The difference of the monetary values in this currency
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$subtrahend</tt> is not a valid number/monetary value</dd></dl>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="fNoRemainingException">fNoRemainingException</h2>
<div class="sidebar">
<h3 id="fNoRemainingException-docs-ClassResources" toc-skip="1">Class Resources </h3>

<ul>
<li><strong><a href="#fNoRemainingException">Class Documentation</a></strong></li>
<li><a href="#fNoRemainingException-api">API Reference</a></li>
</ul>

<h3 id="fNoRemainingException-docs-ExceptionClasses" toc-skip="1">Exception Classes </h3>

<ul>
<li><a href="#fException">fException</a>
<ul>
<li><a href="#fExpectedException">fExpectedException</a>
<ul>
<li><a href="#fAuthorizationException">fAuthorizationException</a></li>
<li><a href="#fEmptySetException">fEmptySetException</a></li>
<li><strong>fNoRemainingException</strong></li>
<li><a href="#fNoRowsException">fNoRowsException</a></li>
<li><a href="#fNotFoundException">fNotFoundException</a></li>
<li><a href="#fValidationException">fValidationException</a></li>
</ul>
</li>
<li><a href="#fUnexpectedException">fUnexpectedException</a>
<ul>
<li><a href="#fConnectivityException">fConnectivityException</a></li>
<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
<li><a href="#fProgrammerException">fProgrammerException</a></li>
<li><a href="#fSQLException">fSQLException</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<p>
fNoRemainingException is a sub-class of <a href="#fExpectedException">fExpectedException</a> that indicates an iterator has reached the end, yet another element has been requested.
</p>

<p>
<em>This space intentionally left blank</em>
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fNoRemainingException-api">fNoRemainingException API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fNoRemainingException">Class Documentation</a></li>
		<li><strong><a href="#fNoRemainingException-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fExpectedException">fExpectedException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fFile">fFile</a></li>
		<li><a href="#fPagination">fPagination</a></li>
		<li><a href="#fRecordSet">fRecordSet</a></li>
		<li><a href="#fResult">fResult</a></li>
		<li><a href="#fUnbufferedResult">fUnbufferedResult</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b2</span></div>
<p class="short_description">An exception caused when trying to get a value from an iterator and there is nothing left</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b2</th><td>Fixed a typo in the documentation <span class="date">7/14/10</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="genealogy">	
	<h4>Genealogy</h4>
		<div class="class_tree">
		<h5>Class Tree</h5>
		<pre class="class_tree">Exception
   |
   --<a href="#fException">fException</a>
      |
      --<a href="#fExpectedException">fExpectedException</a>
         |
         --fNoRemainingException</pre>
	</div>
		<div class="inherited_variables">
	<h5>Inherited Variables</h5>
		<dl>
		<dt class="protected">$code</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$file</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$line</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$message</dt>
	<dd class="protected"> </dd>
		<dt class="private">$previous</dt>
	<dd class="private"> </dd>
		<dt class="private">$string</dt>
	<dd class="private"> </dd>
		<dt class="private">$trace</dt>
	<dd class="private"> </dd>
		</dl>
		</div>
		<div class="inherited_methods">
	<h5>Inherited Methods</h5>
		<dl>
	  	  <dt class="public"><a href="#fException-api-__construct"><tt>fException::__construct()</tt></a></dt>
	  <dd class="public">Sets the message for the exception, allowing for string interpolation and internationalization</dd>
	  	  <dt class="public"><a href="#fException-api-__get"><tt>fException::__get()</tt></a></dt>
	  <dd class="public">All requests that hit this method should be requests for callbacks</dd>
	  	  <dt class="protected"><a href="#fException-api-compose"><tt>fException::compose()</tt></a></dt>
	  <dd class="protected">Composes text using <a href="#fText">fText</a> if loaded</dd>
	  	  <dt class="protected"><a href="#fException-api-dump"><tt>fException::dump()</tt></a></dt>
	  <dd class="protected">Creates a string representation of any variable using predefined strings for booleans, <tt>NULL</tt> and empty strings</dd>
	  	  <dt class="public"><a href="#fException-api-formatTrace"><tt>fException::formatTrace()</tt></a></dt>
	  <dd class="public">Gets the backtrace to currently called exception</dd>
	  	  <dt class="protected"><a href="#fException-api-getCSSClass"><tt>fException::getCSSClass()</tt></a></dt>
	  <dd class="protected">Returns the CSS class name for printing information about the exception</dd>
	  	  <dt class="protected"><a href="#fException-api-prepare"><tt>fException::prepare()</tt></a></dt>
	  <dd class="protected">Prepares content for output into HTML</dd>
	  	  <dt class="public"><a href="#fException-api-printMessage"><tt>fException::printMessage()</tt></a></dt>
	  <dd class="public">Prints the message inside of a div with the class being 'exception %THIS_EXCEPTION_CLASS_NAME%'</dd>
	  	  <dt class="public"><a href="#fException-api-printTrace"><tt>fException::printTrace()</tt></a></dt>
	  <dd class="public">Prints the backtrace to currently called exception inside of a pre tag with the class being 'exception %THIS_EXCEPTION_CLASS_NAME% trace'</dd>
	  	  <dt class="public"><a href="#fException-api-registerCallback"><tt>fException::registerCallback()</tt></a></dt>
	  <dd class="public">Adds a callback for when certain types of exceptions are created</dd>
	  	  <dt class="public"><a href="#fException-api-reorderMessage"><tt>fException::reorderMessage()</tt></a></dt>
	  <dd class="public">Reorders list items in the message based on simple string matching</dd>
	  	  <dt class="public"><a href="#fException-api-setMessage"><tt>fException::setMessage()</tt></a></dt>
	  <dd class="public">Allows the message to be overwriten</dd>
	  	  <dt class="public"><a href="#fException-api-splitMessage"><tt>fException::splitMessage()</tt></a></dt>
	  <dd class="public">Splits an exception with an HTML list into multiple strings each containing part of the original message</dd>
	  	</dl>
		<dl>
	  	  <dt class="public">constructor __construct ( [$message = ], [$code = ], [$previous = ] )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__clone (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__toString (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getCode (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getFile (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getLine (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getMessage (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getPrevious (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTrace (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTraceAsString (  )</dt>
	  <dd class="public"></dd>
	  	</dl>
		</div>
	</div>			</section>
		</div>
		<section class="main">
<h2 id="fNoRowsException">fNoRowsException</h2>
<div class="sidebar">
<h3 id="fNoRowsException-docs-ClassResources" toc-skip="1">Class Resources </h3>

<ul>
<li><strong><a href="#fNoRowsException">Class Documentation</a></strong></li>
<li><a href="#fNoRowsException-api">API Reference</a></li>
</ul>

<h3 id="fNoRowsException-docs-ExceptionClasses" toc-skip="1">Exception Classes </h3>

<ul>
<li><a href="#fException">fException</a>
<ul>
<li><a href="#fExpectedException">fExpectedException</a>
<ul>
<li><a href="#fAuthorizationException">fAuthorizationException</a></li>
<li><a href="#fEmptySetException">fEmptySetException</a></li>
<li><a href="#fNoRemainingException">fNoRemainingException</a></li>
<li><strong>fNoRowsException</strong></li>
<li><a href="#fNotFoundException">fNotFoundException</a></li>
<li><a href="#fValidationException">fValidationException</a></li>
</ul>
</li>
<li><a href="#fUnexpectedException">fUnexpectedException</a>
<ul>
<li><a href="#fConnectivityException">fConnectivityException</a></li>
<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
<li><a href="#fProgrammerException">fProgrammerException</a></li>
<li><a href="#fSQLException">fSQLException</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<h3 id="fNoRowsException-docs-DatabaseClasses" toc-skip="1">Database Classes </h3>

<ul>
<li><a href="#fDatabase">fDatabase</a></li>
<li><strong>fNoRowsException</strong></li>
<li><a href="#fResult">fResult</a></li>
<li><a href="#fSQLException">fSQLException</a></li>
<li><a href="#fSQLTranslation">fSQLTranslation</a></li>
<li><a href="#fSQLSchemaTranslation">fSQLSchemaTranslation</a></li>
<li><a href="#fSchema">fSchema</a></li>
<li><a href="#fStatement">fStatement</a></li>
<li><a href="#fUnbufferedResult">fUnbufferedResult</a></li>
</ul>
</div>

<p>
fNoRowsException a sub-class of <a href="#fExpectedException">fExpectedException</a> that indicates a SQL query did not return any rows.
</p>

<p>
<em>This space intentionally left blank</em>
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fNoRowsException-api">fNoRowsException API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fNoRowsException">Class Documentation</a></li>
		<li><strong><a href="#fNoRowsException-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fExpectedException">fExpectedException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fResult">fResult</a></li>
		<li><a href="#fUnbufferedResult">fUnbufferedResult</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b</span></div>
<p class="short_description">An exception when no rows are returned from a SQL query</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="genealogy">	
	<h4>Genealogy</h4>
		<div class="class_tree">
		<h5>Class Tree</h5>
		<pre class="class_tree">Exception
   |
   --<a href="#fException">fException</a>
      |
      --<a href="#fExpectedException">fExpectedException</a>
         |
         --fNoRowsException</pre>
	</div>
		<div class="inherited_variables">
	<h5>Inherited Variables</h5>
		<dl>
		<dt class="protected">$code</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$file</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$line</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$message</dt>
	<dd class="protected"> </dd>
		<dt class="private">$previous</dt>
	<dd class="private"> </dd>
		<dt class="private">$string</dt>
	<dd class="private"> </dd>
		<dt class="private">$trace</dt>
	<dd class="private"> </dd>
		</dl>
		</div>
		<div class="inherited_methods">
	<h5>Inherited Methods</h5>
		<dl>
	  	  <dt class="public"><a href="#fException-api-__construct"><tt>fException::__construct()</tt></a></dt>
	  <dd class="public">Sets the message for the exception, allowing for string interpolation and internationalization</dd>
	  	  <dt class="public"><a href="#fException-api-__get"><tt>fException::__get()</tt></a></dt>
	  <dd class="public">All requests that hit this method should be requests for callbacks</dd>
	  	  <dt class="protected"><a href="#fException-api-compose"><tt>fException::compose()</tt></a></dt>
	  <dd class="protected">Composes text using <a href="#fText">fText</a> if loaded</dd>
	  	  <dt class="protected"><a href="#fException-api-dump"><tt>fException::dump()</tt></a></dt>
	  <dd class="protected">Creates a string representation of any variable using predefined strings for booleans, <tt>NULL</tt> and empty strings</dd>
	  	  <dt class="public"><a href="#fException-api-formatTrace"><tt>fException::formatTrace()</tt></a></dt>
	  <dd class="public">Gets the backtrace to currently called exception</dd>
	  	  <dt class="protected"><a href="#fException-api-getCSSClass"><tt>fException::getCSSClass()</tt></a></dt>
	  <dd class="protected">Returns the CSS class name for printing information about the exception</dd>
	  	  <dt class="protected"><a href="#fException-api-prepare"><tt>fException::prepare()</tt></a></dt>
	  <dd class="protected">Prepares content for output into HTML</dd>
	  	  <dt class="public"><a href="#fException-api-printMessage"><tt>fException::printMessage()</tt></a></dt>
	  <dd class="public">Prints the message inside of a div with the class being 'exception %THIS_EXCEPTION_CLASS_NAME%'</dd>
	  	  <dt class="public"><a href="#fException-api-printTrace"><tt>fException::printTrace()</tt></a></dt>
	  <dd class="public">Prints the backtrace to currently called exception inside of a pre tag with the class being 'exception %THIS_EXCEPTION_CLASS_NAME% trace'</dd>
	  	  <dt class="public"><a href="#fException-api-registerCallback"><tt>fException::registerCallback()</tt></a></dt>
	  <dd class="public">Adds a callback for when certain types of exceptions are created</dd>
	  	  <dt class="public"><a href="#fException-api-reorderMessage"><tt>fException::reorderMessage()</tt></a></dt>
	  <dd class="public">Reorders list items in the message based on simple string matching</dd>
	  	  <dt class="public"><a href="#fException-api-setMessage"><tt>fException::setMessage()</tt></a></dt>
	  <dd class="public">Allows the message to be overwriten</dd>
	  	  <dt class="public"><a href="#fException-api-splitMessage"><tt>fException::splitMessage()</tt></a></dt>
	  <dd class="public">Splits an exception with an HTML list into multiple strings each containing part of the original message</dd>
	  	</dl>
		<dl>
	  	  <dt class="public">constructor __construct ( [$message = ], [$code = ], [$previous = ] )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__clone (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__toString (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getCode (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getFile (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getLine (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getMessage (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getPrevious (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTrace (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTraceAsString (  )</dt>
	  <dd class="public"></dd>
	  	</dl>
		</div>
	</div>			</section>
		</div>
		<section class="main">
<h2 id="fNotFoundException">fNotFoundException</h2>
<div class="sidebar">
<h3 id="fNotFoundException-docs-ClassResources" toc-skip="1">Class Resources </h3>

<ul>
<li><strong><a href="#fNotFoundException">Class Documentation</a></strong></li>
<li><a href="#fNotFoundException-api">API Reference</a></li>
</ul>

<h3 id="fNotFoundException-docs-ExceptionClasses" toc-skip="1">Exception Classes </h3>

<ul>
<li><a href="#fException">fException</a>
<ul>
<li><a href="#fExpectedException">fExpectedException</a>
<ul>
<li><a href="#fAuthorizationException">fAuthorizationException</a></li>
<li><a href="#fEmptySetException">fEmptySetException</a></li>
<li><a href="#fNoRemainingException">fNoRemainingException</a></li>
<li><a href="#fNoRowsException">fNoRowsException</a></li>
<li><strong>fNotFoundException</strong></li>
<li><a href="#fValidationException">fValidationException</a></li>
</ul>
</li>
<li><a href="#fUnexpectedException">fUnexpectedException</a>
<ul>
<li><a href="#fConnectivityException">fConnectivityException</a></li>
<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
<li><a href="#fProgrammerException">fProgrammerException</a></li>
<li><a href="#fSQLException">fSQLException</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<p>
fNotFoundException is a sub-class of <a href="#fExpectedException">fExpectedException</a> that indicates an item could not be found, such as when using object relational mapping code. This class may also be suitable to toss in other situations where code is unable to find a specified element or item.
</p>

<p>
<em>This space intentionally left blank</em>
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fNotFoundException-api">fNotFoundException API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fNotFoundException">Class Documentation</a></li>
		<li><strong><a href="#fNotFoundException-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fExpectedException">fExpectedException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fDatabase">fDatabase</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b</span></div>
<p class="short_description">An exception when an <a href="#fActiveRecord">fActiveRecord</a> is not found in the database</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="genealogy">	
	<h4>Genealogy</h4>
		<div class="class_tree">
		<h5>Class Tree</h5>
		<pre class="class_tree">Exception
   |
   --<a href="#fException">fException</a>
      |
      --<a href="#fExpectedException">fExpectedException</a>
         |
         --fNotFoundException</pre>
	</div>
		<div class="inherited_variables">
	<h5>Inherited Variables</h5>
		<dl>
		<dt class="protected">$code</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$file</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$line</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$message</dt>
	<dd class="protected"> </dd>
		<dt class="private">$previous</dt>
	<dd class="private"> </dd>
		<dt class="private">$string</dt>
	<dd class="private"> </dd>
		<dt class="private">$trace</dt>
	<dd class="private"> </dd>
		</dl>
		</div>
		<div class="inherited_methods">
	<h5>Inherited Methods</h5>
		<dl>
	  	  <dt class="public"><a href="#fException-api-__construct"><tt>fException::__construct()</tt></a></dt>
	  <dd class="public">Sets the message for the exception, allowing for string interpolation and internationalization</dd>
	  	  <dt class="public"><a href="#fException-api-__get"><tt>fException::__get()</tt></a></dt>
	  <dd class="public">All requests that hit this method should be requests for callbacks</dd>
	  	  <dt class="protected"><a href="#fException-api-compose"><tt>fException::compose()</tt></a></dt>
	  <dd class="protected">Composes text using <a href="#fText">fText</a> if loaded</dd>
	  	  <dt class="protected"><a href="#fException-api-dump"><tt>fException::dump()</tt></a></dt>
	  <dd class="protected">Creates a string representation of any variable using predefined strings for booleans, <tt>NULL</tt> and empty strings</dd>
	  	  <dt class="public"><a href="#fException-api-formatTrace"><tt>fException::formatTrace()</tt></a></dt>
	  <dd class="public">Gets the backtrace to currently called exception</dd>
	  	  <dt class="protected"><a href="#fException-api-getCSSClass"><tt>fException::getCSSClass()</tt></a></dt>
	  <dd class="protected">Returns the CSS class name for printing information about the exception</dd>
	  	  <dt class="protected"><a href="#fException-api-prepare"><tt>fException::prepare()</tt></a></dt>
	  <dd class="protected">Prepares content for output into HTML</dd>
	  	  <dt class="public"><a href="#fException-api-printMessage"><tt>fException::printMessage()</tt></a></dt>
	  <dd class="public">Prints the message inside of a div with the class being 'exception %THIS_EXCEPTION_CLASS_NAME%'</dd>
	  	  <dt class="public"><a href="#fException-api-printTrace"><tt>fException::printTrace()</tt></a></dt>
	  <dd class="public">Prints the backtrace to currently called exception inside of a pre tag with the class being 'exception %THIS_EXCEPTION_CLASS_NAME% trace'</dd>
	  	  <dt class="public"><a href="#fException-api-registerCallback"><tt>fException::registerCallback()</tt></a></dt>
	  <dd class="public">Adds a callback for when certain types of exceptions are created</dd>
	  	  <dt class="public"><a href="#fException-api-reorderMessage"><tt>fException::reorderMessage()</tt></a></dt>
	  <dd class="public">Reorders list items in the message based on simple string matching</dd>
	  	  <dt class="public"><a href="#fException-api-setMessage"><tt>fException::setMessage()</tt></a></dt>
	  <dd class="public">Allows the message to be overwriten</dd>
	  	  <dt class="public"><a href="#fException-api-splitMessage"><tt>fException::splitMessage()</tt></a></dt>
	  <dd class="public">Splits an exception with an HTML list into multiple strings each containing part of the original message</dd>
	  	</dl>
		<dl>
	  	  <dt class="public">constructor __construct ( [$message = ], [$code = ], [$previous = ] )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__clone (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__toString (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getCode (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getFile (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getLine (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getMessage (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getPrevious (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTrace (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTraceAsString (  )</dt>
	  <dd class="public"></dd>
	  	</dl>
		</div>
	</div>			</section>
		</div>
		<section class="main">
<h2 id="fNumber">fNumber</h2>
<div class="sidebar">
<h3 id="fNumber-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fNumber">Class Documentation</a></strong></li>
<li><a href="#fNumber-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fNumber-docs-Instantiation">Instantiation</a></li>
<li><a href="#fNumber-docs-Arithmetic">Arithmetic</a>
<ul>
<li><a href="#fNumber-docs-Addition">Addition</a></li>
<li><a href="#fNumber-docs-Subtraction">Subtraction</a></li>
<li><a href="#fNumber-docs-Multiplication">Multiplication</a></li>
<li><a href="#fNumber-docs-Division">Division</a></li>
<li><a href="#fNumber-docs-Modulus">Modulus</a></li>
</ul>
</li>
<li><a href="#fNumber-docs-PowersandRoots">Powers and Roots</a></li>
<li><a href="#fNumber-docs-Comparison">Comparison</a></li>
<li><a href="#fNumber-docs-Formatting">Formatting</a></li>
<li><a href="#fNumber-docs-PrecisionOperations">Precision Operations</a></li>
<li><a href="#fNumber-docs-SignOperations">Sign Operations</a></li>
<li><a href="#fNumber-docs-Pi">Pi</a></li>
<li><a href="#fNumber-docs-BaseConversion">Base Conversion</a></li>
<li><a href="#fNumber-docs-Localization">Localization</a></li>
</ul>

<h3 id="fNumber-docs-ValueObjects">Value Objects </h3>

<ul>
<li><a href="#fDate">fDate</a></li>
<li><a href="#fMoney">fMoney</a></li>
<li><strong>fNumber</strong></li>
<li><a href="#fTime">fTime</a></li>
<li><a href="#fTimestamp">fTimestamp</a></li>
</ul>
</div>

<p>
The fNumber class is a <a href="#ValueObjects-docs">value object</a> to represent large integers and arbitrary precision decimal values. The fNumber class is essential when dealing with calculations that must be precise, such as monetary value (consequently the <a href="#fMoney">fMoney</a> class is built on top of fNumber). It supplies the same math functionality that is built into PHP, minus the trigonometric operations.
</p>

<h3 id="fNumber-docs-Instantiation">Instantiation</h3>

<p>
An fNumber object requires just a single parameter for the constructor, the value to represent. It can be a string, an object with a <code>__toString()</code> method, or an integer. If the value being represented is too large to store in an integer, the integer value should be enter via a string to prevent data loss. Also, float values should never be used since they have an inherent loss of precision that this class is designed to overcome.
</p>
<pre class="block php"><code>$five           = new fNumber(5);
$four_point_two = new fNumber('4.2');
$zero_point_one = new fNumber('0.1');</code></pre>

<p>
 There is a second optional parameter to the constructor that allows specifying the precision of the number. If no precision is specified, the precision of the value is used.
</p>
<pre class="block php"><code>// Represents 1.000
$one = new fNumber(1, 3);</code></pre>

<h3 id="fNumber-docs-Arithmetic">Arithmetic</h3>

<p>
Basic arithmetic is performed using the method <a href="#fNumber-api-add"><code>add()</code></a>, <a href="#fNumber-api-sub"><code>sub()</code></a>, <a href="#fNumber-api-mul"><code>mul()</code></a> and <a href="#fNumber-api-div"><code>div()</code></a>. Since the fNumber class is a value object, all operations return a new fNumber object instead of modifying the existing one. Also, all methods accept any valid number representation including strings, fNumber objects and integers.
</p>

<p>
The returned fNumber object will have the same precision as the object being called unless the optional parameter <code>$scale</code> is included.
</p>

<h4 id="fNumber-docs-Addition">Addition</h4>

<p>
Addition is performed by calling the method <a href="#fNumber-api-add"><code>add()</code></a> and providing an <code>$addend</code>.
</p>
<pre class="block php"><code>// Addition using different addend number forms
$six              = $five-&gt;add(1);
$six              = $five-&gt;add($one);
$eight_point_four = $four_point_two-&gt;add('4.2');

// Without scale the 0.1 is lost
$five             = $five-&gt;add('0.1');

// By specifying a scale of 1 we retain the 0.1
$five_point_one   = $five-&gt;add('0.1', 1); </code></pre>

<h4 id="fNumber-docs-Subtraction">Subtraction</h4>

<p>
Subtraction is performed by calling the method <a href="#fNumber-api-sub"><code>sub()</code></a> and providing a <code>$subtrahend</code>.
</p>
<pre class="block php"><code>// Basic subtraction
$two  = $five-&gt;sub(3);

// Since $five has a scale of zero, the result is still five
$five = $five-&gt;sub('0.3');

// All arithmetic methods support positive and negative numbers
$five_point_three = $five-&gt;sub('-0.3', 1);</code></pre>

<h4 id="fNumber-docs-Multiplication">Multiplication</h4>

<p>
Multiplication is performed by calling the method <a href="#fNumber-api-mul"><code>mul()</code></a> and providing a <code>$multiplicand</code>.
</p>
<pre class="block php"><code>// Simple multiplication
$ten = $five-&gt;mul(2);

// A comparison of multiplication with 0 and 1 scale
$twelve            = $five-&gt;mul('2.5');
$twelve_point_five = $five-&gt;mul('2.5', 1);</code></pre>

<h4 id="fNumber-docs-Division">Division</h4>

<p>
Division is performed by calling the method <a href="#fNumber-api-div"><code>div()</code></a> and providing a <code>$divisor</code>.
</p>
<pre class="block php"><code>// Basic division
$two = $five-&gt;div(2);

// Division with a specific scale
$two_point_five = $five-&gt;div(2, 1);</code></pre>

<h4 id="fNumber-docs-Modulus">Modulus</h4>

<p>
The remainder of integer division can be calculated by the method <a href="#fNumber-api-mod"><code>mod()</code></a> and the remainder of fractional division can be calculated by the method <a href="#fNumber-api-fmod"><code>fmod()</code></a>. 
</p>

<p>
The <code>mod()</code> method will convert the current number to an integer and then divide it by the single parameter, <code>$divisor</code>, that is passed to the method. The <code>$divisor</code> is also converted to an integer before the calculation is performed.
</p>
<pre class="block php"><code>// Simple integer division
$one = $three-&gt;mod('2');

// The number and divisor are both converted to integers first
$one = $three_point_two-&gt;mod('2.1');</code></pre>

<p>
 The <code>fmod()</code> method allows dividing a fractional number by another fractional number, returning the remainder. The first parameter is the <code>$divisor</code> to use, while a second optional parameter, <code>$scale</code>, allows specifying the scale of the remainder that is being returned.
</p>
<pre class="block php"><code>$zero_point_three    = $four_point_seven-&gt;fmod('1.1');
$one_point_four_zero = $four_point_four-&gt;fmod('1.5', 2);</code></pre>

<h3 id="fNumber-docs-PowersandRoots">Powers and Roots</h3>

<p>
The fNumber class provides functionality to calculate both square roots and integer powers via the <a href="#fNumber-api-sqrt"><code>sqrt()</code></a> and <a href="#fNumber-api-pow"><code>pow()</code></a> methods.
</p>

<p>
The <code>sqrt()</code> method accepts a single optional parameter, the <code>$scale</code> of the result.
</p>
<pre class="block php"><code>$three             = $nine-&gt;sqrt();
$three_point_eight = $fifteen-&gt;sqrt(1);</code></pre>

<p>
 The <code>pow()</code> method accepts two parameters, the required <code>$exponent</code> to raise the number to, and the optional <code>$scale</code> for the resulting number.
</p>
<pre class="block php"><code>$twenty_five        = $five-&gt;pow(2);
$nine_point_two_six = $two_point_one-&gt;pow(3, 2);</code></pre>

<p>
 Under certain situations, especially when dealing with cryptography, it is necessary to raise integers to large powers and then calculate the remainder of the division of that product by another integer. Normal calculation by raising the original number to a large power and then dividing to find the remainder often takes far too much computation. There are, however, some mathematical shortcuts to make such calculations significantly faster.
</p>

<p>
The <a href="#fNumber-api-powmod"><code>powmod()</code></a> method allows calculating the remainder of the original number raised to an <code>$exponent</code> and then divided by the <code>$modulus</code>.
</p>
<pre><code>$four_fourty_five = $four-&gt;powmod('13', '497');</code></pre>

<h3 id="fNumber-docs-Comparison">Comparison</h3>

<p>
The fNumber class include comparison methods for testing equality - <a href="#fNumber-api-eq"><code>eq()</code></a>, less than - <a href="#fNumber-api-lt"><code>lt()</code></a>, less than or equal - <a href="#fNumber-api-lte"><code>lte()</code></a>, greater than - <a href="#fNumber-api-gt"><code>gt()</code></a> and greater than or equal - <a href="#fNumber-api-gte"><code>gte()</code></a>. Each method accepts two parameters, the <code>$number</code> to compare to and an optional <code>$scale</code> to use for comparison.
</p>

<p>
The <code>$number</code> to compare to may be any valid fNumber object, string or integer. The <code>$scale</code> parameter sets how many digits after the decimal point to use during comparison. If no scale is specified, the highest scale of the two numbers will be used.
</p>
<pre class="block php"><code>$true  = $five-&gt;eq(5);
$false = $five-&gt;eq('5.1');
$true  = $five-&gt;eq('5.1', 0);

$true  = $five-&gt;lt($six);
$true  = $five-&gt;lte('5.00', 4);

$false = $five-&gt;gt($six, 0);
$false = $five-&gt;gte('5.1', 1);</code></pre>

<h3 id="fNumber-docs-Formatting">Formatting</h3>

<p>
There are two options to format fNumber objects, either <a href="#fNumber-api-__toString"><code>__toString()</code></a> or <a href="#fNumber-api-format"><code>format()</code></a>. The <code>format()</code> method will include thousands separators in the returned value, while <code>__toString()</code> will not. The inherent scale of the number will be used when displaying the value. To change the scale, use the <a href="#fNumber-api-trunc"><code>trunc()</code></a> or <a href="#fNumber-api-round"><code>round()</code></a> method first.
</p>
<pre class="block php"><code>echo $one_thousand_two_hundred-&gt;format() . &quot;\n&quot;;
echo $one_thousand_two_hundred-&gt;__toString() . &quot;\n&quot;;

echo $negative_five_point_two-&gt;format() . &quot;\n&quot;;
echo $negative_five_point_two-&gt;__toString() . &quot;\n&quot;;
echo $negative_five_point_two-&gt;trunc()-&gt;__toString();</code></pre>

<p>
 would output the following
</p>
<pre><code>1,200
1200
-5.2
-5.2
-5</code></pre>

<p>
 If the parameter <code>$remove_zero_fraction</code> is set to <code>TRUE</code> and the value has a fraction that is just zeros, the resulting output will not contain a decimal point or a fraction.
</p>
<pre class="block php"><code>// This will print: 5
$five = new fNumber('5.0');
echo $five-&gt;format(TRUE);

$two_fifty_three = new fNumber('2.53');
// This will print: 2.53
echo $two_fifty_three-&gt;format(TRUE);</code></pre>

<h3 id="fNumber-docs-PrecisionOperations">Precision Operations</h3>

<p>
The precision of an fNumber can be modified by using the <a href="#fNumber-api-ceil"><code>ceil()</code></a>, <a href="#fNumber-api-floor"><code>floor()</code></a>, <a href="#fNumber-api-round"><code>round()</code></a> and <a href="#fNumber-api-trunc"><code>trunc()</code></a> methods.
</p>

<p>
The <code>ceil()</code> method performs a ceiling operation, rounding up to the next highest integer.
</p>
<pre class="block php"><code>$six = $five_point_two-&gt;ceil();</code></pre>

<p>
 The <code>floor()</code> method preforms a floor operation, rounding down to the next lowest integer.
</p>
<pre class="block php"><code>$negative_six = $negative_five_point_two-&gt;floor();</code></pre>

<p>
 The <code>trunc()</code> method changes the scale of the number to 0 without performing any rounding.
</p>
<pre class="block php"><code>$five = $five_point_two-&gt;trunc();</code></pre>

<p>
 The <code>round()</code> method allows rounding a number to a specified number of decimal places, using the <code>$scale</code> parameter. It is even possible to round left of the decimal point using negative scales. Rounding is done using the common method, that is when the digit one place beyond the <code>$scale</code> is 5 or greater the <code>$scale</code> digit is increased vy 1, otherwise the digit is left the same.
</p>
<pre class="block php"><code>// Rounding positive numbers
$five = $five_point_two-&gt;round();
$six  = $five_point_five-&gt;round();

// Rounding negative numbers
$negative_two = $negative_one_point_six-&gt;round();
$negative_one = $negative_one_point_one-&gt;round();

// Rounding to a specific scale
$one_point_three = $one_point_three_three-&gt;round(1);
$ten             = $thirteen-&gt;round(-1);</code></pre>

<h3 id="fNumber-docs-SignOperations">Sign Operations</h3>

<p>
The fNumber class can calculate the absolute value of a number via the <a href="#fNumber-api-abs"><code>abs()</code></a> method, the negated value via the <a href="#fNumber-api-neg"><code>neg()</code></a> method and can return the sign of a number via the <a href="#fNumber-api-sign"><code>sign()</code></a> method.
</p>

<p>
Here are a few basic example of using the <code>abs()</code> and <code>neg()</code> methods:
</p>
<pre class="block php"><code>// Calculating the absolute value
$five = $five-&gt;abs();
$five = $negative_five-&gt;abs();

// Negating numbers
$negative_five = $five-&gt;neg();
$five          = $negative_five-&gt;neg();</code></pre>

<p>
 The <code>sign()</code> method will return <code>-1</code> if the number is negative, <code>0</code> if the number is zero and <code>1</code> if the number is positive.
</p>
<pre class="block php"><code>$true  = $five-&gt;sign() == 1;
$true  = $zero-&gt;sign() == 0;
$false = $zero-&gt;sign() == -1;
$true  = $negative_one-&gt;sign() == -1;</code></pre>

<h3 id="fNumber-docs-Pi">Pi</h3>

<p>
The value of pi can be obtained up to a scale of 500 by calling the static method <a href="#fNumber-api-pi"><code>pi()</code></a> and providing the desired <code>$scale</code>.
</p>
<pre class="block php"><code>// 3.14
$pi = fNumber::pi(2);

// 3.1415926535897932384626433
$pi = fNumber::pi(25);</code></pre>

<h3 id="fNumber-docs-BaseConversion">Base Conversion</h3>

<p>
For some calculations, representing numbers in a base other than base 10 is necessary. The static method <a href="#fNumber-api-baseConvert"><code>baseConvert()</code></a> allow converting integers between any two bases ranging from base 2 (binary) to base 16 (hexadecimal). Three parameters are required, the integer to convert, the base being converted from and the base being converted to.
</p>
<pre class="block php"><code>echo fNumber::baseConvert($five, 10, 2) . &quot;\n&quot;;
echo fNumber::baseConvert('10110100110', 2, 16) . &quot;\n&quot;;
echo fNumber::baseConvert('10110100110', 2, 8);</code></pre>

<p>
 would output the following
</p>
<pre><code>101
5A6
2646</code></pre>

<h3 id="fNumber-docs-Localization">Localization</h3>

<p>
When formatting numbers in different locales, it will often be the case that the thousands separator and decimal point are different than the one in the United States. The methods <a href="#fNumber-api-registerFormatCallback"><code>registerFormatCallback()</code></a> and <a href="#fNumber-api-registerUnformatCallback"><code>registerUnformatCallback()</code></a> allow for both creating a different formatting and also removing such formatting when creating a new fNumber object.
</p>
<pre class="block php"><code>// Function to format numbers for Italian
function italian_number_format($number, $remove_zero_fraction=FALSE)
{
    $parts = explode('.', $number);
    
    $integer  = $parts[0];
    $fraction = (isset($parts[1])) ? ',' . $parts[1] : '';
    
    if ($remove_zero_fraction &amp;&amp; rtrim($fraction, ',0') === '') {
        $fraction = '';
    }
    
    return number_format($integer, 0, ',', '.') . $fraction;
}

// Function to change a formatted to a plain number
function italian_number_unformat($value)
{
    return str_replace(array('.', ','), array('', '.'), $value);
}

fNumber::registerFormatCallback('italian_number_format');
fNumber::registerUnformatCallback('italian_number_unformat');</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fNumber-api">fNumber API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fNumber">Class Documentation</a></li>
		<li><strong><a href="#fNumber-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fNumber-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  	  	  	  			<li><a href="#fNumber-api-baseConvert">baseConvert()</a></li>
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  			<li><a href="#fNumber-api-pi">pi()</a></li>
	  	  	  			<li><a href="#fNumber-api-registerFormatCallback">registerFormatCallback()</a></li>
	  			<li><a href="#fNumber-api-registerUnformatCallback">registerUnformatCallback()</a></li>
	  			<li class="protected"><a href="#fNumber-api-reset">reset()</a></li>
	  	  	  	  	  	  </ul>
</div>
<div class="methods">
<h4><a href="#fNumber-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fNumber-api-__construct">__construct()</a></li>
	  			<li class="protected"><a href="#fNumber-api-__get">__get()</a></li>
	  			<li><a href="#fNumber-api-__toString">__toString()</a></li>
	  			<li><a href="#fNumber-api-abs">abs()</a></li>
	  			<li><a href="#fNumber-api-add">add()</a></li>
	  	  			<li><a href="#fNumber-api-ceil">ceil()</a></li>
	  			<li><a href="#fNumber-api-div">div()</a></li>
	  			<li><a href="#fNumber-api-eq">eq()</a></li>
	  			<li><a href="#fNumber-api-floor">floor()</a></li>
	  			<li><a href="#fNumber-api-fmod">fmod()</a></li>
	  			<li><a href="#fNumber-api-format">format()</a></li>
	  			<li><a href="#fNumber-api-getScale">getScale()</a></li>
	  			<li><a href="#fNumber-api-gt">gt()</a></li>
	  			<li><a href="#fNumber-api-gte">gte()</a></li>
	  			<li><a href="#fNumber-api-lt">lt()</a></li>
	  			<li><a href="#fNumber-api-lte">lte()</a></li>
	  			<li><a href="#fNumber-api-mod">mod()</a></li>
	  			<li><a href="#fNumber-api-mul">mul()</a></li>
	  			<li><a href="#fNumber-api-neg">neg()</a></li>
	  	  			<li><a href="#fNumber-api-pow">pow()</a></li>
	  			<li><a href="#fNumber-api-powmod">powmod()</a></li>
	  	  	  	  			<li><a href="#fNumber-api-round">round()</a></li>
	  			<li><a href="#fNumber-api-sign">sign()</a></li>
	  			<li><a href="#fNumber-api-sqrt">sqrt()</a></li>
	  			<li><a href="#fNumber-api-sub">sub()</a></li>
	  			<li><a href="#fNumber-api-trunc">trunc()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fLoader">fLoader</a></li>
		<li><a href="#fMoney">fMoney</a></li>
		<li><a href="#fORMColumn">fORMColumn</a></li>
		<li><a href="#fSchema">fSchema</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b3</span></div>
<p class="short_description">Provides large/precise number support</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b3</th><td>Added the <tt>$remove_zero_fraction</tt> parameter to <a href="#fNumber-api-format"><tt>format()</tt></a> <span class="date">2/2/11</span></td></tr><tr><th>1.0.0b2</th><td>Fixed a bug with parsing decimal numbers in scientific notation <span class="date">4/13/10</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">7/21/08</span></td></tr></table></div>
<div class="class_methods static" id="fNumber-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fNumber-api-baseConvert" class="method static"><span class="resolution">::</span><span class="name">baseConvert()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Converts any positive integer between any two bases ranging from <tt>2</tt> to <tt>16</tt></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">baseConvert</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fNumber">fNumber</a>|string</span> <span class="php-var">$number</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$from_base</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$to_base</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fNumber">fNumber</a>|string</td>
				<td class="param_name">$number</td>
				<td class="param_description">The positive integer to convert</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$from_base</td>
				<td class="param_description">The base to convert from - must be between <tt>2</tt> and <tt>16</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$to_base</td>
				<td class="param_description">The base to convert to - must be between <tt>2</tt> and <tt>16</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The number converted to the new base
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fNumber-api-pi" class="method static"><span class="resolution">::</span><span class="name">pi()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns the value for pi with a scale of up to 500</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fNumber">fNumber</a></span> <span class="php-identifier">pi</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$scale</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$scale</td>
				<td class="param_description">The number of places after the decimal to return</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					Pi
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fNumber-api-registerFormatCallback" class="method static"><span class="resolution">::</span><span class="name">registerFormatCallback()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Allows setting a callback to translate or modify any return values from format()</p>
								<p>The callback should accept two parameters:</p><ul><li><tt>$value</tt>: the string value of the number</li><li><tt>$remove_zero_fraction</tt>: a boolean indicating if a zero fraction should be removed</li></ul><p>The callback should return a string, the formatted <tt>$value</tt>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">registerFormatCallback</span><span class="php-brackets">(</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback to pass the <a href="#fNumber">fNumber</a> value to - see method description for parameters</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fNumber-api-registerUnformatCallback" class="method static"><span class="resolution">::</span><span class="name">registerUnformatCallback()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Allows setting a callback to clean any formatted values so they can be properly parsed - useful for languages where <tt>,</tt> is used as the decimal point</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">registerUnformatCallback</span><span class="php-brackets">(</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback to pass formatted strings to. Should accept a formatted string and return a string the is a valid number using <tt>.</tt> as the decimal point.</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fNumber-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
						</div>
<div class="class_methods" id="fNumber-api-class_methods">
<h4>Methods</h4>
						<!-- start method -->
			<h5 id="fNumber-api-__construct" class="method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Creates a large/precise number</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fNumber">fNumber</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$value</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$scale</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value for the number - any valid PHP integer or float format including values with <tt>e</tt> exponents</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$scale</td>
				<td class="param_description">The number of digits after the decimal place, defaults to number of digits in <tt>$value</tt></td>
			  </tr>
						</table>
			</div>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$value</tt> is not a valid number</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fNumber-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fNumber-api-__toString" class="method"><span class="resolution">-></span><span class="name">__toString()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Converts the object to an string</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">__toString</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fNumber-api-abs" class="method"><span class="resolution">-></span><span class="name">abs()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the absolute value of this number</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fNumber">fNumber</a></span> <span class="php-identifier">abs</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$scale</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$scale</td>
				<td class="param_description">The number of places after the decimal - overrides the scale for this number</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The absolute number
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fNumber-api-add" class="method"><span class="resolution">-></span><span class="name">add()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds two numbers together</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fNumber">fNumber</a></span> <span class="php-identifier">add</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fNumber">fNumber</a>|string</span> <span class="php-var">$addend</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$scale</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fNumber">fNumber</a>|string</td>
				<td class="param_name">$addend</td>
				<td class="param_description">The addend</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$scale</td>
				<td class="param_description">The number of places after the decimal - overrides the scale for this number</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The sum
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$addend</tt> is not a valid number</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fNumber-api-ceil" class="method"><span class="resolution">-></span><span class="name">ceil()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Rounds the number to the next highest integer</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fNumber">fNumber</a></span> <span class="php-identifier">ceil</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The next highest integer
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fNumber-api-div" class="method"><span class="resolution">-></span><span class="name">div()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Divides this number by the one passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fNumber">fNumber</a></span> <span class="php-identifier">div</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fNumber">fNumber</a>|string</span> <span class="php-var">$divisor</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$scale</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fNumber">fNumber</a>|string</td>
				<td class="param_name">$divisor</td>
				<td class="param_description">The divisor</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$scale</td>
				<td class="param_description">The number of places after the decimal - overrides the scale for this number</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The quotient
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$divisor</tt> is not a valid number</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fNumber-api-eq" class="method"><span class="resolution">-></span><span class="name">eq()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Indicates if this value is equal to the one passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">eq</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fNumber">fNumber</a>|string</span> <span class="php-var">$number</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$scale</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fNumber">fNumber</a>|string</td>
				<td class="param_name">$number</td>
				<td class="param_description">The number to compare to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$scale</td>
				<td class="param_description">The number of decimal places to compare - will use all available if not specified</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this number is equal to the one passed
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$number</tt> is not a valid number</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fNumber-api-floor" class="method"><span class="resolution">-></span><span class="name">floor()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Rounds the number to the next lowest integer</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fNumber">fNumber</a></span> <span class="php-identifier">floor</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The next lowest integer
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fNumber-api-fmod" class="method"><span class="resolution">-></span><span class="name">fmod()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the float remainder of dividing this number by the divisor provided</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fNumber">fNumber</a></span> <span class="php-identifier">fmod</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fNumber">fNumber</a>|string</span> <span class="php-var">$divisor</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$scale</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fNumber">fNumber</a>|string</td>
				<td class="param_name">$divisor</td>
				<td class="param_description">The divisor</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$scale</td>
				<td class="param_description">The number of places after the decimal - overrides the scale for this number</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The remainder
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$divisor</tt> is not a valid number</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fNumber-api-format" class="method"><span class="resolution">-></span><span class="name">format()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Formats the number to include thousands separators</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">format</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$remove_zero_fraction</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$remove_zero_fraction</td>
				<td class="param_description">If <tt>TRUE</tt> and all digits after the decimal place are <tt>0</tt>, the decimal place and all zeros are removed</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The formatted value
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fNumber-api-getScale" class="method"><span class="resolution">-></span><span class="name">getScale()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the scale of this number</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">getScale</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The scale of this number
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fNumber-api-gt" class="method"><span class="resolution">-></span><span class="name">gt()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Indicates if this value is greater than the one passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">gt</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fNumber">fNumber</a>|string</span> <span class="php-var">$number</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$scale</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fNumber">fNumber</a>|string</td>
				<td class="param_name">$number</td>
				<td class="param_description">The number to compare to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$scale</td>
				<td class="param_description">The number of decimal places to compare - will use all available if not specified</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this number is less than the one passed
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$number</tt> is not a valid number</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fNumber-api-gte" class="method"><span class="resolution">-></span><span class="name">gte()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Indicates if this value is greater than or equal to the one passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">gte</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fNumber">fNumber</a>|string</span> <span class="php-var">$number</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$scale</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fNumber">fNumber</a>|string</td>
				<td class="param_name">$number</td>
				<td class="param_description">The number to compare to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$scale</td>
				<td class="param_description">The number of decimal places to compare - will use all available if not specified</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this number is greater than or equal to the one passed
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$number</tt> is not a valid number</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fNumber-api-lt" class="method"><span class="resolution">-></span><span class="name">lt()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Indicates if this value is less than the one passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">lt</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fNumber">fNumber</a>|string</span> <span class="php-var">$number</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$scale</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fNumber">fNumber</a>|string</td>
				<td class="param_name">$number</td>
				<td class="param_description">The number to compare to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$scale</td>
				<td class="param_description">The number of decimal places to compare - will use all available if not specified</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this number is less than the one passed
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$number</tt> is not a valid number</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fNumber-api-lte" class="method"><span class="resolution">-></span><span class="name">lte()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Indicates if this value is less than or equal to the one passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">lte</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fNumber">fNumber</a>|string</span> <span class="php-var">$number</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$scale</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fNumber">fNumber</a>|string</td>
				<td class="param_name">$number</td>
				<td class="param_description">The number to compare to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$scale</td>
				<td class="param_description">The number of decimal places to compare - will use all available if not specified</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this number is less than or equal to the one passed
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$number</tt> is not a valid number</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fNumber-api-mod" class="method"><span class="resolution">-></span><span class="name">mod()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the remainder of dividing this number by the divisor provided. All floats are converted to integers.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fNumber">fNumber</a></span> <span class="php-identifier">mod</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fNumber">fNumber</a>|string</span> <span class="php-var">$divisor</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fNumber">fNumber</a>|string</td>
				<td class="param_name">$divisor</td>
				<td class="param_description">The divisor - will be converted to an integer if it is a float</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The remainder
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$divisor</tt> is not a valid number</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fNumber-api-mul" class="method"><span class="resolution">-></span><span class="name">mul()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Multiplies two numbers</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fNumber">fNumber</a></span> <span class="php-identifier">mul</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fNumber">fNumber</a>|string</span> <span class="php-var">$multiplier</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$scale</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fNumber">fNumber</a>|string</td>
				<td class="param_name">$multiplier</td>
				<td class="param_description">The multiplier</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$scale</td>
				<td class="param_description">The number of places after the decimal - overrides the scale for this number</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The product
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$multiplier</tt> is not a valid number</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fNumber-api-neg" class="method"><span class="resolution">-></span><span class="name">neg()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Negates this number</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fNumber">fNumber</a></span> <span class="php-identifier">neg</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$scale</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$scale</td>
				<td class="param_description">The number of places after the decimal - overrides the scale for this number</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The negated number
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fNumber-api-pow" class="method"><span class="resolution">-></span><span class="name">pow()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Raise this number to the power specified</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fNumber">fNumber</a></span> <span class="php-identifier">pow</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$exponent</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$scale</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$exponent</td>
				<td class="param_description">The power to raise to - all non integer values will be truncated to integers</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$scale</td>
				<td class="param_description">The number of places after the decimal - overrides the scale for this number</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The product
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$exponent</tt> is not a valid number</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fNumber-api-powmod" class="method"><span class="resolution">-></span><span class="name">powmod()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the remainder of this integer number raised to the integer <tt>$exponent</tt>, divided by the integer <tt>$modulus</tt></p>
								<p>This method is faster than doing <tt>$num-&gt;pow($exponent)-&gt;mod($modulus)</tt>  and is primarily useful for cryptographic functionality.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fNumber">fNumber</a></span> <span class="php-identifier">powmod</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fNumber">fNumber</a>|string</span> <span class="php-var">$exponent</span><span class="php-code">,</span> <span class="php-vartype"><a href="#fNumber">fNumber</a>|string</span> <span class="php-var">$modulus</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fNumber">fNumber</a>|string</td>
				<td class="param_name">$exponent</td>
				<td class="param_description">The power to raise to - all non integer values will be truncated to integers</td>
			  </tr>
						  <tr>
				<td class="param_data_type"><a href="#fNumber">fNumber</a>|string</td>
				<td class="param_name">$modulus</td>
				<td class="param_description">The value to divide by - all non integer values will be truncated to integers</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The remainder
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$exponent</tt> or <tt>$modulus</tt> is not a valid number</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fNumber-api-round" class="method"><span class="resolution">-></span><span class="name">round()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Rounds this number to the specified number of digits after the decimal - negative scales round the number by places to the left of the decimal</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fNumber">fNumber</a></span> <span class="php-identifier">round</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$scale</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$scale</td>
				<td class="param_description">The number of places after (or before if negative) the decimal to round to</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The rounded result
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fNumber-api-sign" class="method"><span class="resolution">-></span><span class="name">sign()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the sign of the number</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">sign</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 <tt>-1</tt> if negative, <tt>0</tt> if zero, <tt>1</tt> if positive
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fNumber-api-sqrt" class="method"><span class="resolution">-></span><span class="name">sqrt()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the square root of this number</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fNumber">fNumber</a></span> <span class="php-identifier">sqrt</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$scale</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$scale</td>
				<td class="param_description">The number of places after the decimal - overrides the scale for this number</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The square root
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fNumber-api-sub" class="method"><span class="resolution">-></span><span class="name">sub()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Subtracts two numbers</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fNumber">fNumber</a></span> <span class="php-identifier">sub</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fNumber">fNumber</a>|string</span> <span class="php-var">$subtrahend</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$scale</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fNumber">fNumber</a>|string</td>
				<td class="param_name">$subtrahend</td>
				<td class="param_description">The subtrahend</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$scale</td>
				<td class="param_description">The number of places after the decimal - overrides the scale for this number</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The difference
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$subtrahend</tt> is not a valid number</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fNumber-api-trunc" class="method"><span class="resolution">-></span><span class="name">trunc()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Scales (truncates or expands) the number to the specified number of digits after the decimal - negative scales round the number by places to the left of the decimal</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fNumber">fNumber</a></span> <span class="php-identifier">trunc</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$scale</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$scale</td>
				<td class="param_description">The number of places after (or before if negative) the decimal</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The square root
				</p>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="fORM">fORM</h2>
<div class="sidebar">
<h3 id="fORM-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fORM">Class Documentation</a></strong></li>
<li><a href="#fORM-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fORM-docs-MappingClassestoTables">Mapping Classes to Tables</a></li>
<li><a href="#fORM-docs-TablesinOtherSchemas">Tables in Other Schemas</a></li>
<li><a href="#fORM-docs-MultipleDatabases">Multiple Databases</a></li>
<li><a href="#fORM-docs-ColumnandRecordNames">Column and Record Names</a></li>
<li><a href="#fORM-docs-SchemaCaching">Schema Caching</a></li>
<li><a href="#fORM-docs-ExtendingtheORM">Extending the ORM</a>
<ul>
<li><a href="#fORM-docs-AddingMethodstofActiveRecord">Adding Methods to fActiveRecord</a></li>
<li><a href="#fORM-docs-AddingMethodstofRecordSet">Adding Methods to fRecordSet</a></li>
<li><a href="#fORM-docs-AddingFunctionalitytofActiveRecord">Adding Functionality to fActiveRecord</a>
<ul>
<li><a href="#fORM-docs-CustomValidationUsingaHook">Custom Validation Using a Hook</a></li>
</ul>
</li>
<li><a href="#fORM-docs-fActiveRecordArrayStructures">fActiveRecord Array Structures</a>
<ul>
<li><a href="#fORM-docs-values">$values</a></li>
<li><a href="#fORM-docs-old_values">$old_values</a></li>
<li><a href="#fORM-docs-related_records">$related_records</a></li>
<li><a href="#fORM-docs-cache">$cache</a></li>
<li><a href="#fORM-docs-validation_messages">$validation_messages</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#fORM-docs-DynamicfActiveRecordClasses">Dynamic fActiveRecord Classes</a></li>
</ul>

<h3 id="fORM-docs-ORMClasses">ORM Classes </h3>

<ul>
<li><a href="#fActiveRecord">fActiveRecord</a></li>
<li><a href="#fRecordSet">fRecordSet</a></li>
</ul>

<ul>
<li><strong>fORM</strong></li>
<li><a href="#fORMColumn">fORMColumn</a></li>
<li><a href="#fORMDatabase">fORMDatabase</a></li>
<li><a href="#fORMDate">fORMDate</a></li>
<li><a href="#fORMFile">fORMFile</a></li>
<li><a href="#fORMJSON">fORMJSON</a></li>
<li><a href="#fORMMoney">fORMMoney</a></li>
<li><a href="#fORMOrdering">fORMOrdering</a></li>
<li><a href="#fORMRelated">fORMRelated</a></li>
<li><a href="#fORMSchema">fORMSchema</a></li>
<li><a href="#fORMValidation">fORMValidation</a></li>
</ul>
</div>

<p>
The fORM class is a static class that implements core ORM functionality for much of the Flourish ORM. It provides means to configure and extend <a href="#fActiveRecord">fActiveRecord</a> classes.
</p>

<h3 id="fORM-docs-MappingClassestoTables">Mapping Classes to Tables</h3>

<p>
By default, when mapping <a href="#fActiveRecord">fActiveRecord</a> classes to database tables, an <code>UpperCamelCase</code> singular class name will be mapped the the <code>underscore_notation</code> plural database table of the same noun. For example, the <code>User</code> class is mapped to the <code>users</code> table. The static method <a href="#fORM-api-mapClassToTable"><code>mapClassToTable()</code></a> allows overriding this default by passing the <code>$class</code> and <code>$table</code> in.
</p>

<p>
The following example would set the <code>User</code> class to map to the <code>user</code> table instead of <code>users</code>. <em>This code should be executed during site-wide configuration and should <strong>not</strong> be placed inside of the <code>configure()</code> method for a class that extends <a href="#fActiveRecord">fActiveRecord</a>.</em>
</p>
<pre class="block php"><code>// Class to table mapping should occur before any classes are used
// such as when the database is attached via fORMDatabase::attach()
fORMDatabase::attach($db);
fORM::mapClassToTable('User', 'user');</code></pre>

<p>
 When writing custom ORM code, the class that is associated with a table can be determined by calling the static method <a href="#fORM-api-classize"><code>classize()</code></a> with the parameter <code>$table</code>.
</p>
<pre class="block php"><code>$class = fORM::classize($table);
return new $class();</code></pre>

<p>
 To translate from the class to the database table simply pass the class to the static method <a href="#fORM-api-tablize"><code>tablize()</code></a>. The class can be either a class name or an instance of the class.
</p>
<pre class="block php"><code>$object = new User();
$table  = fORM::tablize($object);</code></pre>

<h3 id="fORM-docs-TablesinOtherSchemas">Tables in Other Schemas</h3>

<p>
When a class models a table in a non-default schema (<code>public</code> for PostgreSQL, <code>dbo</code> for MSSQL and the username for Oracle and DB2), the static method <a href="#fORM-api-mapClassToTable"><code>mapClassToTable()</code></a> should be called with first parameter, the <code>$class</code> to map and the second parameter, <code>$table</code>, should be in the format <code>schema.table</code>.
</p>

<p>
<em>This code should be executed during site-wide configuration and should <strong>not</strong> be placed inside of the <code>configure()</code> method for a class that extends <a href="#fActiveRecord">fActiveRecord</a>.</em>
</p>
<pre class="block php"><code>// This maps the User class to the users table in the authorization schema
fORM::mapClassToTable('User', 'authorization.users');</code></pre>

<h3 id="fORM-docs-MultipleDatabases">Multiple Databases</h3>

<p>
When multiple databases are configured via <a href="#fORMDatabase">fORMDatabase</a>, classes can model tables on the non-<code>default</code> database by calling the method <a href="#fORM-api-mapClassToDatabase"><code>mapClassToDatabase()</code></a>. The first parameter is the <code>$class</code> to map, and the second is the <code>$name</code> of the database set in <a href="#fORMDatabase-api-attach">fORMDatabase::attach()</a>. 
</p>
<pre class="block php"><code>// Attach a second database as &quot;commerce_db&quot; and have the User class model the users table in it
fORMDatabase::attach($db, 'commerce_db');
fORM::mapClassToDatabase('User', 'commerce_db');</code></pre>

<p>
 <em>Like <a href="#fORM-api-mapClassToTable"><code>mapClassToTable()</code></a>, this code should be executed during site-wide configuration and should <strong>not</strong> be placed inside of the <code>configure()</code> method for a class that extends <a href="#fActiveRecord">fActiveRecord</a>. This method is not required for classes modeling tables in the default database  if no <code>$name</code> was provided to <a href="#fORMDatabase-api-attach">fORMDatabase::attach()</a>, then the database is the default.</em>
</p>

<h3 id="fORM-docs-ColumnandRecordNames">Column and Record Names</h3>

<p>
Whenever class and column names are used in messaging, such as in <a href="#fValidationException">fValidationException</a>, the class or column name is run through <a href="#fGrammar-api-humanize">fGrammar::humanize()</a> to create a human-friendly version. Obviously in some situations this technique will not get capitalization or punctuation correct. The static methods <a href="#fORM-api-overrideRecordName"><code>overrideRecordName()</code></a> and <a href="#fORM-api-overrideColumnName"><code>overrideColumnName()</code></a> allow setting custom names for classes and columns respectively. <em>It is also possible to set a class name in the context of being a related classsee the <a href="#fORMRelated-docs-OverridingRelatedRecordNames">fORMRelated class documentation</a> for more details.</em>
</p>

<p>
The example below shows changing the column <code>email</code> to display as <code>E-Mail</code> instead of <code>Email</code> and the <code>FaqEntry</code> class to display as <code>FAQ Entry</code> instead of <code>Faq Entry</code>.
</p>
<pre class="block php"><code>class User extends fActiveRecord
{
    protected function configure()
    {
        fORM::overrideColumnName($this, 'email', 'E-Mail');
    }
}

class FaqEntry extends fActiveRecord
{
    protected function configure()
    {
        fORM::overrideRecordName($this, 'FAQ Entry');
    }
}</code></pre>

<p>
 <em>If you are having issues with your column names not being properly converted from CamelCase (for methods) to underscore_notation (for your database and HTML), please see the <a href="#fGrammar-docs-FixingNotationConversionIssues">Fixing Notation Conversion Issues</a> section on the <a href="#fGrammar">fGrammar</a> page.</em>
</p>

<h3 id="fORM-docs-SchemaCaching">Schema Caching</h3>

<p>
Since the schema information is dynamically pulled out of the database, this can add at least a few database calls to each request that is processed. If the database schema is not changing on a regular basis and  better performance is required, the schema can be cached by calling the static method <a href="#fORM-api-enableSchemaCaching"><code>enableSchemaCaching()</code></a>.
</p>

<p>
<code>enableSchemaCaching()</code> accepts a single parameter, an <a href="#fCache">fCache</a> object to cache the schema information to. This enables caching on the <a href="#fDatabase">fDatabase</a>, <a href="#fSQLTranslation">fSQLTranslation</a> and <a href="#fSchema">fSchema</a> objects that are used for the ORM.
</p>

<p>
An additional feature is that the cached schema information will be cleared if an <a href="#fUnexpectedException">fUnexpectedException</a> is thrown. This would normally happen if a programmer tried to perform an action that was invalid based on the cached schema.
</p>
<pre class="block php"><code>fORM::enableSchemaCaching(new fCache('file', '/file/path/to/cache/file'));</code></pre>

<h3 id="fORM-docs-ExtendingtheORM">Extending the ORM</h3>

<p>
The Flourish ORM is built in such a way that it can be easily extended without having to actually extends individual classes. Both the <a href="#fActiveRecord">fActiveRecord</a> and <a href="#fRecordSet">fRecordSet</a> classes allow registering callbacks to handle methods that dont exist (and thus fall through to the <code>__call</code> magic method) while in addition, the <a href="#fActiveRecord">fActiveRecord</a> class includes a number of predefined &quot;hooks&quot; that allow for injecting functionality using callbacks. There is further functionality that allows defining callbacks to handle the tasks of translating objects to scalar values, scalar values to objects and method reflection.
</p>

<p>
A large part of the ORM classes built into Flourish use these features to implement their functionality:
</p>

<ul>
<li><a href="#fORMColumn">fORMColumn</a></li>
<li><a href="#fORMDate">fORMDate</a></li>
<li><a href="#fORMFile">fORMFile</a></li>
<li><a href="#fORMJSON">fORMJSON</a></li>
<li><a href="#fORMMoney">fORMMoney</a></li>
<li><a href="#fORMOrdering">fORMOrdering</a></li>
</ul>

<p>
The two static methods <a href="#fORM-api-registerActiveRecordMethod"><code>registerActiveRecordMethod()</code></a> and <a href="#fORM-api-registerRecordSetMethod"><code>registerRecordSetMethod()</code></a> allow for setting callbacks to handle method calls for methods that dont exist in the <a href="#fActiveRecord">fActiveRecord</a> and <a href="#fRecordSet">fRecordSet</a> classes respectively. The static method <a href="#fORM-api-registerHookCallback"><code>registerHookCallback()</code></a> allows setting a hook to be executed at one of the pre-defined hooks in <a href="#fActiveRecord">fActiveRecord</a>.
</p>

<p>
Once a callback has been registered to handle a method call or hook, it will be automatically called at the appropriate time and will be passed the pre-defined parameters listed below. The actual work of calling the callback and passing the parameters is handled by the <a href="#fActiveRecord">fActiveRecord</a> and <a href="#fRecordSet">fRecordSet</a> classes so all that the end-developer needs to worry about is the callback parameter signature and the functionality in the callback.
</p>

<h4 id="fORM-docs-AddingMethodstofActiveRecord">Adding Methods to fActiveRecord</h4>

<p>
<em>If you wish to add a method to a single <a href="#fActiveRecord">fActiveRecord</a> class, simply create the method inside of that class. The following functionality is for the purpose of dynamically adding methods to <a href="#fActiveRecord">fActiveRecord</a> at run time. This technique is used to create ORM plugins, such as <a href="#fORMFile">fORMFile</a>, <a href="#fORMOrdering">fORMOrdering</a>, etc.</em>
</p>

<p>
<code>registerActiveRecordMethod()</code> accepts the <code>$class</code> and <code>$method</code> to register for and the <code>$callback</code> to register. The <code>$class</code> can also be <code>'*'</code> to register the callback for all <a href="#fActiveRecord">fActiveRecord</a> classes. The <code>$callback</code> should be a callback for a method or function that accepts the following parameters:
</p>

<ul>
<li><strong><code>$object</code></strong>: The <a href="#fActiveRecord">fActiveRecord</a> instance</li>
<li><strong><code>&amp;$values</code></strong>: The values array for the record</li>
<li><strong><code>&amp;$old_values</code></strong>: The old values array for the record</li>
<li><strong><code>&amp;$related_records</code></strong>: The related records array for the record</li>
<li><strong><code>&amp;$cache</code></strong>: The cache array for the record</li>
<li><strong><code>$method_name</code></strong>: The method that was called</li>
<li><strong><code>$parameters</code></strong>: The parameters passed to the method</li>
</ul>

<p>
The following example registers the method <code>toXML()</code>:
</p>
<pre class="block php"><code>class User extends fActiveRecord
{
    protected function configure()
    {
        fORM::registerActiveRecordMethod($this, 'toXML', 'User::convertToXML');
    }

    public function convertToXML($object, &amp;$value, &amp;$old_values, &amp;$related_records, &amp;$cache, $method_name, $parameters)
    {
        // 
    }
}

$user = new User();
echo $user-&gt;toXML();</code></pre>

<h4 id="fORM-docs-AddingMethodstofRecordSet">Adding Methods to fRecordSet</h4>

<p>
<code>registerRecordSetMethod()</code> accepts the <code>$method</code> to register for and the <code>$callback</code> to register. The <code>$callback</code> should be a callback for a method or function that accepts the following parameters:
</p>

<ul>
<li><strong><code>$object</code></strong>: The actual record set</li>
<li><strong><code>$class</code></strong>: The class of each record</li>
<li><strong><code>&amp;$records</code></strong>: The ordered array of <a href="#fActiveRecord">fActiveRecord</a> objects</li>
<li><strong><code>$method_name</code></strong>: The name of the method that was called</li>
<li><strong><code>$parameters</code></strong>: The parameters passed to the method</li>
</ul>

<p>
The following example adds a method named <code>toXML()</code> to all <a href="#fRecordSet">fRecordSet</a> objects:
</p>
<pre class="block php"><code>class ORMXML
{
    public function extend()
    {
        fORM::registerRecordSetMethod('toXML', 'ORMXML::convertToXML');
    }

    public function convertToXML($object, $class, &amp;$records, $method_name, $parameters)
    {
        // 
    }
}

ORMXML::extend();

$users = fRecordSet::build('User');
echo $users-&gt;toXML();</code></pre>

<h4 id="fORM-docs-AddingFunctionalitytofActiveRecord">Adding Functionality to fActiveRecord</h4>

<p>
Rather than requiring all additional functionality for <a href="#fActiveRecord">fActiveRecord</a> classes to be defined in each class or requiring that methods be overridden in order to add functionality, the static method <a href="#fORM-api-registerHookCallback"><code>registerHookCallback()</code></a> allows callbacks to be registered that will be executed a predefined places. These hooks make it possible to write plugins for the ORM that can be easily reused.
</p>

<p>
<code>registerHookCallback()</code> accepts three parameters, the <code>$class</code> and <code>$hook</code> to register for and the <code>$callback</code> to register. The <code>$class</code> can be either a class name or <code>'*'</code> to register for all <a href="#fActiveRecord">fActiveRecord</a> classes. The <code>$hook</code> should be one of the hooks listed below:
</p>
<table><tbody>
<tr>
<td><strong>Hook</strong></td>
<td><strong>Location</strong></td>
</tr>
<tr>
<td><code>'post::__construct()'</code></td>
<td>At the very end of <code>__construct()</code></td>
</tr>
<tr>
<td><code>'pre::delete()'</code></td>
<td>At the very beginning <code>delete()</code></td>
</tr>
<tr>
<td><code>'post-begin::delete()'</code></td>
<td>After the database and filesystem transactions have been started</td>
</tr>
<tr>
<td><code>'pre-commit::delete()'</code></td>
<td>Just before the database and filesystem transactions are committed</td>
</tr>
<tr>
<td><code>'post-commit::delete()'</code></td>
<td>After the database and filesystem transactions have been committed</td>
</tr>
<tr>
<td><code>'post-rollback::delete()'</code></td>
<td>When an error occurs, right after the database and filesystem transactions are rolled back</td>
</tr>
<tr>
<td><code>'post::delete()'</code></td>
<td>At the very end of <code>delete()</code></td>
</tr>
<tr>
<td><code>'post::loadFromIdentityMap()'</code></td>
<td>Right after a record is attached to the identity map, is not triggered if loaded from a result</td>
</tr>
<tr>
<td><code>'post::loadFromResult()'</code></td>
<td>Right after a record is loaded from the database, is not triggered if loaded from the identity map</td>
</tr>
<tr>
<td><code>'pre::populate()'</code></td>
<td>At the very beginning of <code>populate()</code></td>
</tr>
<tr>
<td><code>'post::populate()'</code></td>
<td>At the very end of <code>populate()</code></td>
</tr>
<tr>
<td><code>'pre::replicate()'</code></td>
<td>At the very beginning of <code>replicate()</code>/<code>clone</code>, on the original record</td>
</tr>
<tr>
<td><code>'post::replicate()'</code></td>
<td>At the very end of <code>replicate()</code>/<code>clone</code>, on the original record</td>
</tr>
<tr>
<td><code>'cloned::replicate()'</code></td>
<td>At the very end of <code>replicate()</code>, on the newly cloned record</td>
</tr>
<tr>
<td><code>'pre::store()'</code></td>
<td>At the very beginning of <code>store()</code></td>
</tr>
<tr>
<td><code>'post-begin::store()'</code></td>
<td>After the database and filesystem transactions have been started</td>
</tr>
<tr>
<td><code>'post-validate::store()'</code></td>
<td>After validation successfully completes</td>
</tr>
<tr>
<td><code>'pre-commit::store()'</code></td>
<td>Just before the database and filesystem transactions are committed</td>
</tr>
<tr>
<td><code>'post-commit::store()'</code></td>
<td>After the database and filesystem transactions have been committed</td>
</tr>
<tr>
<td><code>'post-rollback::store()'</code></td>
<td>When an error occurs, right after the database and filesystem transactions are rolled back</td>
</tr>
<tr>
<td><code>'post::store()'</code></td>
<td>At the end of <code>store()</code>, just before the existence is changed, thus <code>$record-&gt;exists()</code> will still return <code>FALSE</code> for a new record</td>
</tr>
<tr>
<td><code>'pre::validate()'</code></td>
<td>Before any of the built-in validation is done, the <code>$validation_messages</code> array will be empty</td>
</tr>
<tr>
<td><code>'post::validate()'</code></td>
<td>After all of the built-in validation is done, the <code>$validation_messages</code> array will contain all of the messages, however the messages ordering is done <em>after</em> this hook</td>
</tr>
</tbody></table>

<p>
The <code>$callback</code> specified should have the following signature:
</p>

<ul>
<li><strong><code>$object</code></strong>: The <a href="#fActiveRecord">fActiveRecord</a> instance</li>
<li><strong><code>&amp;$values</code></strong>: The values array for the record - see <a href="#fORM-docs-values">$values</a> for details</li>
<li><strong><code>&amp;$old_values</code></strong>: The old values array for the record - see <a href="#fORM-docs-old_values">$old_values</a> for details</li>
<li><strong><code>&amp;$related_records</code></strong>: The related records array for the record - see <a href="#fORM-docs-related_records">$related_records</a> for details</li>
<li><strong><code>&amp;$cache</code></strong>: The cache array for the record - see <a href="#fORM-docs-cache">$cache</a> for details</li>
</ul>

<p>
The two hooks, <code>'pre::validate()'</code> and <code>'post::validate()'</code> accept one extra parameter:
</p>

<ul>
<li><strong><code>&amp;$validation_messages</code></strong>: An associative array of the error messages, with the keys being column or table names - see <a href="#fORM-docs-validation_messages">$validation_messages</a> for details</li>
</ul>

<p>
The three hooks, <code>'pre::replicate()'</code>, <code>'post::replicate()'</code> and <code>'cloned::replicate()'</code> accept one extra parameter:
</p>

<ul>
<li><strong><code>$replication_level</code></strong>: An integer representing the level of recursion - the object being replicated will be <code>0</code>, children will be <code>1</code>, grandchildren <code>2</code> and so on</li>
</ul>

<h5 id="fORM-docs-CustomValidationUsingaHook">Custom Validation Using a Hook</h5>

<p>
Below is an example of extending a <code>User</code> class to confirm that the password confirmation is identical to the password when using populate:
</p>
<pre class="block php"><code>class User extends fActiveRecord
{
    protected function configure()
    {
        fORM::registerHookCallback($this, 'post::validate()', 'User::validatePassword');
    }

    static public function validatePassword($object, &amp;$values, &amp;$old_values, &amp;$related_records, &amp;$cache, &amp;$validation_messages)
    {
        // If a new password was set, it came through the request and does not match the field password confirmation, add an error message
        if (fActiveRecord::hasOld($old_values, 'password') &amp;&amp; fRequest::get('password') &amp;&amp; fRequest::get('password') != fRequest::get('password_confirmation')) {
            $validation_messages['password'] = 'Password: The value entered does not match Password Confirmation';
        }     
    }
}</code></pre>

<h4 id="fORM-docs-fActiveRecordArrayStructures">fActiveRecord Array Structures</h4>

<p>
When writing callbacks for adding methods or functionality to <a href="#fActiveRecord">fActiveRecord</a>, most often there will be a need to work with the <code>$values</code>, <code>$old_values</code>, <code>$related_records</code> and <code>$cache</code> arrays.
</p>

<p>
Each of these arrays is implemented in such a way that all instances of an <a href="#fActiveRecord">fActiveRecord</a> class that represent the same record will share the arrays. If a change is made to the values for one instance of <code>User</code> with the ID <code>1</code>, all other instance of <code>User</code> <code>1</code> will also see those changes.
</p>

<p>
It is also important to note that all callbacks registered for <a href="#fActiveRecord">fActiveRecord</a> method calls and hooks should accept these arrays by reference, otherwise any changes to the arrays will be lost.
</p>

<h5 id="fORM-docs-values">$values</h5>

<p>
The <code>$values</code> array is an associative array of the current values for a record. Each column in the database is a key in the array and points to the current value for that column. Below is an example of what the <code>$values</code> array would look like for a simple <code>User</code> record with a <a href="#fCryptography-docs-PasswordHashing">hashed password</a>:
</p>
<pre><code>Array
(
    [user_id] =&gt; 1
    [first_name] =&gt; Will
    [last_name] =&gt; Bond
    [email] =&gt; will@flourishlib.com
    [password] =&gt; fCryptography::password_hash#Gu19bpZN94#ac74c4ad9ed7103e051e583af86599b95237e9af
)</code></pre>

<p>
 The best practice for assigning new values to the <code>$values</code> array is to use the static method <a href="#fActiveRecord?protected=true#assign-api"><code>assign()</code></a> since it will automatically move the old value into the <code>$old_values</code> array.
</p>

<h5 id="fORM-docs-old_values">$old_values</h5>

<p>
The <code>$old_values</code> array is an associative array of every previous value contained by each of the columns in the record since it was last loaded from the database. The original value will be at key <code>0</code>, and further revisions will be appended to the array.
</p>

<p>
The keys in the array are the database column names, however a column will only be present as a key if a value in the record has changed. The value associated with each key is an array of all of the old values. Below is an example of the <code>$old_values</code> array for a <code>User</code> object that has had the first name change twice and the email changed once.
</p>
<pre><code>Array
(
    [first_name] =&gt; Array
        (
            [0] =&gt; William
            [1] =&gt; will
        )
  
    [email] =&gt; Array
        (
            [0] =&gt; will@flourishlib.com
        )
  
)</code></pre>

<p>
 Records that are new and have not been stored in the database will have all values set to <code>NULL</code>, thus the <code>$old_values</code> array for a new <code>User</code> record that has had each field set once will look like the following:
</p>
<pre><code>Array
(
    [user_id] =&gt; Array
        (
            [0] =&gt; {null}
        )
  
    [first_name] =&gt; Array
        (
            [0] =&gt; {null}
        )
  
    [last_name] =&gt; Array
        (
            [0] =&gt; {null}
        )
  
    [email] =&gt; Array
        (
            [0] =&gt; {null}
        )
  
    [password] =&gt; Array
        (
            [0] =&gt; {null}
        )
  
)</code></pre>

<p>
 There are a few <a href="#fActiveRecord">fActiveRecord</a> static methods that make working with the <code>$old_values</code> array a little easier. <a href="#fActiveRecord?protected=true#changed-api"><code>changed()</code></a> will return a boolean indicating if the value of a column has actually changed<code>FALSE</code> will be returned if there is an old value and the old and current values match. <a class="ext-link" href="/api/http://flourishlib.com/api/fActiveRecord?protected=true#hasOld"><span class="icon"><code>hasOld()</code></span></a> returns a boolean indicating if there is an old value for a column and will return <code>TRUE</code> even if the old and current values are the same. <a href="#fActiveRecord?protected=true#retrieveOld-api"><code>retrieveOld()</code></a> will return either the oldest value for a column, or an array of all old values depending on what parameters are passed.
</p>

<h5 id="fORM-docs-related_records">$related_records</h5>

<p>
The <code>$related_records</code> associative array contains a cache of all related records that have been pulled out of the database. This array helps prevent lots of duplicate database queries from being executed.
</p>

<p>
The structure of the array is as follows:
</p>
<pre><code>Array
(
    [$related_table] =&gt; Array
        (
            [$route] =&gt; Array
                (
                    [record_set] =&gt; fRecordSet,
                    [primary_keys] =&gt; array(),
                    [associate] =&gt; boolean, 
                    [count] =&gt; integer
                )
        
        )
  
)</code></pre>

<p>
 The array is only populated as the related records are requested. The <code>$related_table</code> is the database table corresponding to the related record class. The <code>$route</code> is name of the <a href="#OrmConventions#RelationshipRoutes-docs">relationship route</a> between the table for the current class and the <code>$related_table</code>.
</p>

<p>
The <code>'record_set'</code> key (which will not be present if the record has only been counted, or if only the primary keys have been accessed) will point to an <a href="#fRecordSet">fRecordSet</a> object. The <code>'primary_keys'</code> key will point to an array of the primary keys for the related records, but will only be present if a <code>link</code> method has been called. The <code>'count'</code> key (which will always be present) will point to an integer containing the number of related records. The <code>'associate'</code> key points to a boolean indicating if the related records should be stored when the parent records <code>store()</code> method is executed.
</p>

<p>
In general, the <code>$related_records</code> array should not be manipulated directly, and may cause custom code to be more fragile in the face of future Flourish internal code updates. Instead, try to use the various static methods on the <a href="#fORMRelated">fORMRelated</a> class. For normal end-developer use, almost all of the <a href="#fORMRelated">fORMRelated</a> functionality is exposed through the <a href="#fActiveRecord-docs-RelatedRecordsOperations">fActiveRecord related records operations</a>.
</p>

<h5 id="fORM-docs-cache">$cache</h5>

<p>
The <code>$cache</code> array is an array implemented for use by end-developers or ORM plugins. The structure is completely up to the discretion of the programmer. This array can be useful for temporarily storing data, such as an unhashed password for the purposes of mailing to user, or for caching an expensive calculation.
</p>

<h5 id="fORM-docs-validation_messages">$validation_messages</h5>

<p>
The <code>$validation_messages</code> array keys are generated via the following rules. Whenever the array is modified, special care should be taken to add new entries properly. The <a href="#fActiveRecord-docs-validate">fActiveRecord::validate() documentation</a> has examples of each type of entry in the array.
</p>

<ul>
<li>Errors involving a single column: the key will be the database column name</li>
<li>Errors involving multiple columns: the key will be the database column names joined by <code>,</code></li>
<li>Errors involving related tables: the key will be the related table name</li>
<li>Errors involving columns in one-to-one related tables: the key will be the related table name ollowed by <code>::</code> followed by the column name (or column names joined by <code>,</code>)</li>
<li>Errors involving columns in one-to-many related tables: the key will be the related table name followed by <code>[</code> followed by the zero-based record number, followed by <code>]</code>. The value of this key will be an associative array containing two keys, <code>name</code> and <code>errors</code>. The <code>name</code> key will have a user-friendly name for the related record and the <code>errors</code> key will contain an array of error messages for the related record.</li>
</ul>

<h3 id="fORM-docs-DynamicfActiveRecordClasses">Dynamic fActiveRecord Classes</h3>

<p>
While not a feature that should normally be used in a production environment, the static method <a href="#fORM-api-defineActiveRecordClass"><code>defineActiveRecordClass()</code></a> will automatically create an <a href="#fActiveRecord">fActiveRecord</a> class for a class that properly maps to a database table. By placing this method call in an <code>__autoload</code> function, it is possible to start working with the ORM without having to create a class for each database table.
</p>
<pre class="block php"><code>function __autoload($class)
{
    $file = '/path/to/class/files/' . $class . '.php';
    
    if (file_exists($file)) {
        include($file);
        return;
    }

    try {
        fORM::defineActiveRecordClass($class);
    } catch (fProgrammerException $e) {
        fCore::toss('fProgrammerException', sprintf('The class %s could not be found', $class));
    }
}</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fORM-api">fORM API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fORM">Class Documentation</a></li>
		<li><strong><a href="#fORM-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fORM-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li class="protected"><a href="#fORM-api-callHookCallbacks">callHookCallbacks()</a></li>
	  			<li class="protected"><a href="#fORM-api-callInspectCallbacks">callInspectCallbacks()</a></li>
	  			<li class="protected"><a href="#fORM-api-callReflectCallbacks">callReflectCallbacks()</a></li>
	  			<li class="protected"><a href="#fORM-api-checkHookCallback">checkHookCallback()</a></li>
	  			<li><a href="#fORM-api-classize">classize()</a></li>
	  			<li><a href="#fORM-api-defineActiveRecordClass">defineActiveRecordClass()</a></li>
	  			<li><a href="#fORM-api-enableSchemaCaching">enableSchemaCaching()</a></li>
	  			<li class="protected"><a href="#fORM-api-getActiveRecordMethod">getActiveRecordMethod()</a></li>
	  			<li class="protected"><a href="#fORM-api-getClass">getClass()</a></li>
	  			<li class="protected"><a href="#fORM-api-getColumnName">getColumnName()</a></li>
	  			<li class="protected"><a href="#fORM-api-getDatabaseName">getDatabaseName()</a></li>
	  			<li class="protected"><a href="#fORM-api-getRecordName">getRecordName()</a></li>
	  			<li class="protected"><a href="#fORM-api-getRecordSetMethod">getRecordSetMethod()</a></li>
	  			<li class="protected"><a href="#fORM-api-getRelatedClass">getRelatedClass()</a></li>
	  			<li class="protected"><a href="#fORM-api-isClassMappedToTable">isClassMappedToTable()</a></li>
	  			<li><a href="#fORM-api-mapClassToDatabase">mapClassToDatabase()</a></li>
	  			<li><a href="#fORM-api-mapClassToTable">mapClassToTable()</a></li>
	  			<li class="protected"><a href="#fORM-api-objectify">objectify()</a></li>
	  			<li><a href="#fORM-api-overrideColumnName">overrideColumnName()</a></li>
	  			<li><a href="#fORM-api-overrideRecordName">overrideRecordName()</a></li>
	  			<li class="protected"><a href="#fORM-api-parseMethod">parseMethod()</a></li>
	  			<li><a href="#fORM-api-registerActiveRecordMethod">registerActiveRecordMethod()</a></li>
	  			<li><a href="#fORM-api-registerHookCallback">registerHookCallback()</a></li>
	  			<li><a href="#fORM-api-registerInspectCallback">registerInspectCallback()</a></li>
	  			<li><a href="#fORM-api-registerObjectifyCallback">registerObjectifyCallback()</a></li>
	  			<li><a href="#fORM-api-registerRecordSetMethod">registerRecordSetMethod()</a></li>
	  			<li><a href="#fORM-api-registerReflectCallback">registerReflectCallback()</a></li>
	  			<li><a href="#fORM-api-registerReplicateCallback">registerReplicateCallback()</a></li>
	  			<li><a href="#fORM-api-registerScalarizeCallback">registerScalarizeCallback()</a></li>
	  			<li class="protected"><a href="#fORM-api-replicate">replicate()</a></li>
	  			<li class="protected"><a href="#fORM-api-reset">reset()</a></li>
	  			<li class="protected"><a href="#fORM-api-scalarize">scalarize()</a></li>
	  			<li><a href="#fORM-api-tablize">tablize()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fDate">fDate</a></li>
		<li><a href="#fException">fException</a></li>
		<li><a href="#fGrammar">fGrammar</a></li>
		<li><a href="#fORMDatabase">fORMDatabase</a></li>
		<li><a href="#fORMSchema">fORMSchema</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fTime">fTime</a></li>
		<li><a href="#fTimestamp">fTimestamp</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fORMColumn">fORMColumn</a></li>
		<li><a href="#fORMDatabase">fORMDatabase</a></li>
		<li><a href="#fORMDate">fORMDate</a></li>
		<li><a href="#fORMFile">fORMFile</a></li>
		<li><a href="#fORMJSON">fORMJSON</a></li>
		<li><a href="#fORMMoney">fORMMoney</a></li>
		<li><a href="#fORMOrdering">fORMOrdering</a></li>
		<li><a href="#fORMRelated">fORMRelated</a></li>
		<li><a href="#fORMSchema">fORMSchema</a></li>
		<li><a href="#fORMValidation">fORMValidation</a></li>
		<li><a href="#fPagination">fPagination</a></li>
		<li><a href="#fRecordSet">fRecordSet</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b28</span></div>
<p class="short_description">Dynamically handles many centralized object-relational mapping tasks</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b28</th><td>Updated <a href="#fORM-api-getColumnName"><tt>getColumnName()</tt></a> and <a href="#fORM-api-getRecordName"><tt>getRecordName()</tt></a> to use <a href="#fText">fText</a> if loaded <span class="date">2/2/11</span></td></tr><tr><th>1.0.0b27</th><td>Added links to the detailed documentation for the parameters passed to hooks <span class="date">11/27/10</span></td></tr><tr><th>1.0.0b26</th><td>Added <a href="#fORM-api-getRelatedClass"><tt>getRelatedClass()</tt></a> for handling related classes in PHP 5.3 namespaces <span class="date">11/17/10</span></td></tr><tr><th>1.0.0b25</th><td>Added support for PHP 5.3 namespaced <a href="#fActiveRecord">fActiveRecord</a> classes <span class="date">11/11/10</span></td></tr><tr><th>1.0.0b24</th><td>Backwards Compatibility Break - Callbacks registered via <a href="#fORM-api-registerRecordSetMethod"><tt>registerRecordSetMethod()</tt></a> should now accept the <tt>$method_name</tt> in the position where the <tt>$pointer</tt> parameter used to be passed <span class="date">9/28/10</span></td></tr><tr><th>1.0.0b23</th><td>Added the <tt>'pre::replicate()'</tt>, <tt>'post::replicate()'</tt> and <tt>'cloned::replicate()'</tt> hooks <span class="date">9/7/10</span></td></tr><tr><th>1.0.0b22</th><td>Internal Backwards Compatibility Break - changed <a href="#fORM-api-parseMethod"><tt>parseMethod()</tt></a> to not underscorize the subject of the method <span class="date">8/6/10</span></td></tr><tr><th>1.0.0b21</th><td>Fixed some documentation to reflect the API changes from v1.0.0b9 <span class="date">7/14/10</span></td></tr><tr><th>1.0.0b20</th><td>Added the ability to register a wildcard active record method for all classes <span class="date">4/22/10</span></td></tr><tr><th>1.0.0b19</th><td>Added the method <a href="#fORM-api-isClassMappedToTable"><tt>isClassMappedToTable()</tt></a> <span class="date">3/30/10</span></td></tr><tr><th>1.0.0b18</th><td>Added the <tt>post::loadFromIdentityMap()</tt> hook <span class="date">3/14/10</span></td></tr><tr><th>1.0.0b17</th><td>Changed <a href="#fORM-api-enableSchemaCaching"><tt>enableSchemaCaching()</tt></a> to rely on <a href="#fDatabase">fDatabase</a>clearCache() instead of explicitly calling <a href="#fSQLTranslation-api-clearCache"><tt>fSQLTranslation::clearCache()</tt></a> <span class="date">3/9/10</span></td></tr><tr><th>1.0.0b16</th><td>Backwards Compatibility Break - renamed addCustomClassToTableMapping() to <a href="#fORM-api-mapClassToTable"><tt>mapClassToTable()</tt></a>. Added <a href="#fORM-api-getDatabaseName"><tt>getDatabaseName()</tt></a> and <a href="#fORM-api-mapClassToDatabase"><tt>mapClassToDatabase()</tt></a>. Updated code for new <a href="#fORMDatabase">fORMDatabase</a> and <a href="#fORMSchema">fORMSchema</a> APIs <span class="date">10/28/09</span></td></tr><tr><th>1.0.0b15</th><td>Added support for <a href="#fActiveRecord">fActiveRecord</a> to <a href="#fORM-api-getRecordName"><tt>getRecordName()</tt></a> <span class="date">10/6/09</span></td></tr><tr><th>1.0.0b14</th><td>Updated documentation for <a href="#fORM-api-registerActiveRecordMethod"><tt>registerActiveRecordMethod()</tt></a> to include info about prefix method matches <span class="date">8/7/09</span></td></tr><tr><th>1.0.0b13</th><td>Updated documentation for <a href="#fORM-api-registerRecordSetMethod"><tt>registerRecordSetMethod()</tt></a> <span class="date">7/14/09</span></td></tr><tr><th>1.0.0b12</th><td>Updated <a href="#fORM-api-callReflectCallbacks"><tt>callReflectCallbacks()</tt></a> to accept a class name instead of an object <span class="date">7/13/09</span></td></tr><tr><th>1.0.0b11</th><td>Added <a href="#fORM-api-registerInspectCallback"><tt>registerInspectCallback()</tt></a> and <a href="#fORM-api-callInspectCallbacks"><tt>callInspectCallbacks()</tt></a> <span class="date">7/13/09</span></td></tr><tr><th>1.0.0b10</th><td>Fixed a bug with <a href="#fORM-api-objectify"><tt>objectify()</tt></a> caching during NULL date/time/timestamp values and breaking further objectification <span class="date">6/18/09</span></td></tr><tr><th>1.0.0b9</th><td>Added caching for performance and changed some method APIs to only allow class names instead of instances <span class="date">6/15/09</span></td></tr><tr><th>1.0.0b8</th><td>Updated documentation to reflect removal of <tt>$associate</tt> parameter for callbacks passed to <a href="#fORM-api-registerRecordSetMethod"><tt>registerRecordSetMethod()</tt></a> <span class="date">6/2/09</span></td></tr><tr><th>1.0.0b7</th><td>Added <a href="#fORM-api-enableSchemaCaching"><tt>enableSchemaCaching()</tt></a> to replace fORMSchema::enableSmartCaching() <span class="date">5/4/09</span></td></tr><tr><th>1.0.0b6</th><td>Added the ability to pass a class instance to addCustomClassTableMapping() <span class="date">2/23/09</span></td></tr><tr><th>1.0.0b5</th><td>Backwards compatibility break - renamed addCustomTableClassMapping() to addCustomClassTableMapping() and swapped the parameters <span class="date">1/26/09</span></td></tr><tr><th>1.0.0b4</th><td>Fixed a bug with retrieving <a href="#fActiveRecord">fActiveRecord</a> methods registered for all classes <span class="date">1/14/09</span></td></tr><tr><th>1.0.0b3</th><td>Fixed a static method callback constant <span class="date">12/17/08</span></td></tr><tr><th>1.0.0b2</th><td>Added <a href="#fORM-api-replicate"><tt>replicate()</tt></a> and <a href="#fORM-api-registerReplicateCallback"><tt>registerReplicateCallback()</tt></a> for <a href="#fActiveRecord-api-replicate"><tt>fActiveRecord::replicate()</tt></a> <span class="date">12/12/08</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">8/4/07</span></td></tr></table></div>
<div class="class_methods static" id="fORM-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start protected method static -->
			<h5 id="fORM-api-callHookCallbacks" class="protected method static"><span class="resolution">::</span><span class="name">callHookCallbacks()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Calls the hook callbacks for the class and hook specified</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">callHookCallbacks</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$hook</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">&amp;$parameter</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The instance of the class to call the hook for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$hook</td>
				<td class="param_description">The hook to call</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values of the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values of the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Records related to the current record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array of the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">&amp;$parameter</td>
				<td class="param_description">The parameter to send the callback</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORM-api-callInspectCallbacks" class="protected method static"><span class="resolution">::</span><span class="name">callInspectCallbacks()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Calls all inspect callbacks for the class and column specified</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">callInspectCallbacks</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$metadata</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to inspect the column of</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to inspect</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$metadata</td>
				<td class="param_description">The associative array of data about the column</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORM-api-callReflectCallbacks" class="protected method static"><span class="resolution">::</span><span class="name">callReflectCallbacks()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Calls all reflect callbacks for the class passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">callReflectCallbacks</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$signatures</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$include_doc_comments</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to call the callbacks for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$signatures</td>
				<td class="param_description">The associative array of <tt>{method_name} =&gt; {signature}</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$include_doc_comments</td>
				<td class="param_description">If the doc comments should be included in the signature</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORM-api-checkHookCallback" class="protected method static"><span class="resolution">::</span><span class="name">checkHookCallback()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Checks to see if any (or a specific) callback has been registered for a specific hook</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">checkHookCallback</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$hook</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$callback</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The name of the class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$hook</td>
				<td class="param_description">The hook to check</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The specific callback to check for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the specified callback exists
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORM-api-classize" class="method static"><span class="resolution">::</span><span class="name">classize()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Takes a table and turns it into a class name - uses custom mapping if set</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">classize</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$table</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$table</td>
				<td class="param_description">The table name</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The class name
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORM-api-defineActiveRecordClass" class="method static"><span class="resolution">::</span><span class="name">defineActiveRecordClass()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Will dynamically create an <a href="#fActiveRecord">fActiveRecord</a>-based class for a database table</p>
								<p>Normally this would be called from an <tt>__autoload()</tt> function.</p><p>This method will only create classes for tables in the default ORM  database.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">defineActiveRecordClass</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The name of the class to create</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORM-api-enableSchemaCaching" class="method static"><span class="resolution">::</span><span class="name">enableSchemaCaching()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Enables caching on the <a href="#fDatabase">fDatabase</a>, <a href="#fSQLTranslation">fSQLTranslation</a> and <a href="#fSchema">fSchema</a> objects used for the ORM</p>
								<p>This method will cache database schema information to the three objects  that use it during normal ORM operation: <a href="#fDatabase">fDatabase</a>, <a href="#fSQLTranslation">fSQLTranslation</a> and  <a href="#fSchema">fSchema</a>. To allow for schema changes without having to manually clear  the cache, all cached information will be cleared if any  <a href="#fUnexpectedException">fUnexpectedException</a> objects are thrown.</p><p>This method should be called right after <a href="#fORMDatabase-api-attach"><tt>fORMDatabase::attach()</tt></a>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">enableSchemaCaching</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fCache">fCache</a></span> <span class="php-var">$cache</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$database_name</span><span class="php-code">=</span>'default'<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$key_token</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fCache">fCache</a></td>
				<td class="param_name">$cache</td>
				<td class="param_description">The object to cache schema information to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$database_name</td>
				<td class="param_description">The database to enable caching for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key_token</td>
				<td class="param_description">This is a token that is used in cache keys to prevent conflicts for server-wide caches - when non-NULL the document root is used</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORM-api-getActiveRecordMethod" class="protected method static"><span class="resolution">::</span><span class="name">getActiveRecordMethod()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns a matching callback for the class and method specified</p>
								<p>The callback returned will be determined by the following logic:</p><p>1. If an exact callback has been defined for the method, it will be returned   2. If a callback in the form <tt>{prefix}*</tt> has been defined that matches the method, it will be returned   3. <tt>NULL</tt> will be returned</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string|null</span> <span class="php-identifier">getActiveRecordMethod</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The name of the class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to get the callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The callback for the method or <tt>NULL</tt> if none exists - see method description for details
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORM-api-getClass" class="protected method static"><span class="resolution">::</span><span class="name">getClass()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Takes a class name or class and returns the class name</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getClass</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The object to get the name of, or possibly a string already containing the class</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The class name
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORM-api-getColumnName" class="protected method static"><span class="resolution">::</span><span class="name">getColumnName()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns the column name</p>
								<p>The default column name is the result of calling <a href="#fGrammar-api-humanize"><tt>fGrammar::humanize()</tt></a>  on the column.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getColumnName</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name the column is part of</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The database column</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The column name for the column specified
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORM-api-getDatabaseName" class="protected method static"><span class="resolution">::</span><span class="name">getDatabaseName()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns the name for the database used by the class specified</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getDatabaseName</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name to get the database name for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The name of the database to use
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORM-api-getRecordName" class="protected method static"><span class="resolution">::</span><span class="name">getRecordName()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns the record name for a class</p>
								<p>The default record name is the result of calling <a href="#fGrammar-api-humanize"><tt>fGrammar::humanize()</tt></a>  on the class.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getRecordName</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name to get the record name of</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The record name for the class specified
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORM-api-getRecordSetMethod" class="protected method static"><span class="resolution">::</span><span class="name">getRecordSetMethod()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns a matching callback for the method specified</p>
								<p>The callback returned will be determined by the following logic:</p><p>1. If an exact callback has been defined for the method, it will be returned   2. If a callback in the form <tt>{action}*</tt> has been defined that matches the method, it will be returned   3. <tt>NULL</tt> will be returned</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string|null</span> <span class="php-identifier">getRecordSetMethod</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to get the callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The callback for the method or <tt>NULL</tt> if none exists - see method description for details
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORM-api-getRelatedClass" class="protected method static"><span class="resolution">::</span><span class="name">getRelatedClass()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Takes a class name and related class name and ensures the related class has the appropriate namespace prefix</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getRelatedClass</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The primary class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The related class name</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The related class name, with the appropriate namespace prefix
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORM-api-isClassMappedToTable" class="protected method static"><span class="resolution">::</span><span class="name">isClassMappedToTable()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Checks if a class has been mapped to a table</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">isClassMappedToTable</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The name of the class</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the class has been mapped to a table
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORM-api-mapClassToDatabase" class="method static"><span class="resolution">::</span><span class="name">mapClassToDatabase()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets a class to use a database other than the &quot;default&quot;</p>
								<p>Multiple database objects can be attached for the ORM by passing a  unique <tt>$name</tt> to the attach() method.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">mapClassToDatabase</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$database_name</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The name of the class, or an instance of it</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$database_name</td>
				<td class="param_description">The name given to the database when passed to attach()</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORM-api-mapClassToTable" class="method static"><span class="resolution">::</span><span class="name">mapClassToTable()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Allows non-standard class to table mapping</p>
								<p>By default, all database tables are assumed to be plural nouns in  <tt>underscore_notation</tt> and all class names are assumed to be singular  nouns in <tt>UpperCamelCase</tt>. This method allows arbitrary class to  table mapping.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">mapClassToTable</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$table</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The name of the class, or an instance of it</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$table</td>
				<td class="param_description">The name of the database table</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORM-api-objectify" class="protected method static"><span class="resolution">::</span><span class="name">objectify()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Takes a scalar value and turns it into an object if applicable</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">objectify</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name of the class the column is part of</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The database column</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value to possibly objectify</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The scalar or object version of the value, depending on the column type and column options
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORM-api-overrideColumnName" class="method static"><span class="resolution">::</span><span class="name">overrideColumnName()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Allows overriding of default column names</p>
								<p>By default a column name is the result of <a href="#fGrammar-api-humanize"><tt>fGrammar::humanize()</tt></a> called  on the column.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">overrideColumnName</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column_name</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class the column is located in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The database column</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column_name</td>
				<td class="param_description">The name for the column</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORM-api-overrideRecordName" class="method static"><span class="resolution">::</span><span class="name">overrideRecordName()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Allows overriding of default record names</p>
								<p>By default a record name is the result of <a href="#fGrammar-api-humanize"><tt>fGrammar::humanize()</tt></a> called  on the class.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">overrideRecordName</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$record_name</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class to override the name of</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$record_name</td>
				<td class="param_description">The human version of the record</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORM-api-parseMethod" class="protected method static"><span class="resolution">::</span><span class="name">parseMethod()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Parses a <tt>camelCase</tt> method name for an action and subject in the form <tt>actionSubject()</tt></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">parseMethod</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method name to parse</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					An array of <tt>0 =&gt; {action}, 1 =&gt; {subject}</tt>
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORM-api-registerActiveRecordMethod" class="method static"><span class="resolution">::</span><span class="name">registerActiveRecordMethod()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Registers a callback for an <a href="#fActiveRecord">fActiveRecord</a> method that falls through to <a href="#fActiveRecord-api-__call"><tt>fActiveRecord::__call()</tt></a> or hits a predefined method hook</p>
								<p>The callback should accept the following parameters:  </p><ul><li><strong><tt>$object</tt></strong>:           The <a href="#fActiveRecord">fActiveRecord</a> instance</li><li><strong><tt>&amp;$values</tt></strong>:          The values array for the record</li><li><strong><tt>&amp;$old_values</tt></strong>:      The old values array for the record</li><li><strong><tt>&amp;$related_records</tt></strong>: The related records array for the record</li><li><strong><tt>&amp;$cache</tt></strong>:           The cache array for the record</li><li><strong><tt>$method_name</tt></strong>:      The method that was called</li><li><strong><tt>&amp;$parameters</tt></strong>:      The parameters passed to the method</li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">registerActiveRecordMethod</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method</span><span class="php-code">,</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class to register for, <tt>'*'</tt> will register for all classes</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to hook for - this can be a complete method name or <tt>{prefix}*</tt> where <tt>*</tt> will match any column name</td>
			  </tr>
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback to execute - see method description for parameter list</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORM-api-registerHookCallback" class="method static"><span class="resolution">::</span><span class="name">registerHookCallback()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Registers a callback for one of the various <a href="#fActiveRecord">fActiveRecord</a> hooks - multiple callbacks can be registered for each hook</p>
								<p>The method signature should include the follow parameters:  </p><ul><li><strong><tt>$object</tt></strong>:           The <a href="#fActiveRecord">fActiveRecord</a> instance</li><li><strong><tt>&amp;$values</tt></strong>:          The values array for the record - see the <a href="#fORM#values">$values</a> documentation for details</li><li><strong><tt>&amp;$old_values</tt></strong>:      The old values array for the record - see the <a href="#fORM#old_values">$old_values</a> documentation for details</li><li><strong><tt>&amp;$related_records</tt></strong>: The related records array for the record - see the <a href="#fORM#related_records">$related_records</a> documentation for details</li><li><strong><tt>&amp;$cache</tt></strong>:           The cache array for the record - see the <a href="#fORM#cache">$cache</a> documentation for details</li></ul><p>The <tt>'pre::validate()'</tt> and <tt>'post::validate()'</tt> hooks have an extra  parameter:  </p><ul><li><strong><tt>&amp;$validation_messages</tt></strong>: An ordered array of validation errors that will be returned or tossed as an <a href="#fValidationException">fValidationException</a> - see the <a href="#fORM#validation_messages">$validation_messages</a> documentation for details</li></ul><p>The <tt>'pre::replicate()'</tt>, <tt>'post::replicate()'</tt> and  <tt>'cloned::replicate()'</tt> hooks have an extra parameter:  </p><ul><li><strong><tt>$replication_level</tt></strong>: An integer representing the level of recursion - the object being replicated will be <tt>0</tt>, children will be <tt>1</tt>, grandchildren <tt>2</tt> and so on.</li></ul><p>Below is a list of all valid hooks:  </p><ul><li><tt>'post::__construct()'</tt></li><li><tt>'pre::delete()'</tt></li><li><tt>'post-begin::delete()'</tt></li><li><tt>'pre-commit::delete()'</tt></li><li><tt>'post-commit::delete()'</tt></li><li><tt>'post-rollback::delete()'</tt></li><li><tt>'post::delete()'</tt></li><li><tt>'post::loadFromIdentityMap()'</tt></li><li><tt>'post::loadFromResult()'</tt></li><li><tt>'pre::populate()'</tt></li><li><tt>'post::populate()'</tt></li><li><tt>'pre::replicate()'</tt></li><li><tt>'post::replicate()'</tt></li><li><tt>'cloned::replicate()'</tt></li><li><tt>'pre::store()'</tt></li><li><tt>'post-begin::store()'</tt></li><li><tt>'post-validate::store()'</tt></li><li><tt>'pre-commit::store()'</tt></li><li><tt>'post-commit::store()'</tt></li><li><tt>'post-rollback::store()'</tt></li><li><tt>'post::store()'</tt></li><li><tt>'pre::validate()'</tt></li><li><tt>'post::validate()'</tt></li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">registerHookCallback</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$hook</span><span class="php-code">,</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class to hook, <tt>'*'</tt> will hook all classes</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$hook</td>
				<td class="param_description">The hook to register for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback to register - see the method description for details about the method signature</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORM-api-registerInspectCallback" class="method static"><span class="resolution">::</span><span class="name">registerInspectCallback()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Registers a callback to modify the results of <a href="#fActiveRecord-api-inspect"><tt>fActiveRecord::inspect()</tt></a> methods</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">registerInspectCallback</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class to register for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to register for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback to register. Callback should accept a single parameter by reference, an associative array of the various metadata about a column.</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORM-api-registerObjectifyCallback" class="method static"><span class="resolution">::</span><span class="name">registerObjectifyCallback()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Registers a callback for when objectify() is called on a specific column</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">registerObjectifyCallback</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class to register for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to register for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback to register. Callback should accept a single parameter, the value to objectify and should return the objectified value.</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORM-api-registerRecordSetMethod" class="method static"><span class="resolution">::</span><span class="name">registerRecordSetMethod()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Registers a callback for an <a href="#fRecordSet">fRecordSet</a> method that fall through to <a href="#fRecordSet-api-__call"><tt>fRecordSet::__call()</tt></a></p>
								<p>The callback should accept the following parameters:  </p><ul><li><strong><tt>$object</tt></strong>:      The actual record set</li><li><strong><tt>$class</tt></strong>:       The class of each record</li><li><strong><tt>&amp;$records</tt></strong>:    The ordered array of <a href="#fActiveRecord">fActiveRecord</a> objects</li><li><strong><tt>$method_name</tt></strong>: The method name that was called</li><li><strong><tt>$parameters</tt></strong>:  Any parameters passed to the method</li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">registerRecordSetMethod</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span><span class="php-code">,</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to hook for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback to execute - see method description for parameter list</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORM-api-registerReflectCallback" class="method static"><span class="resolution">::</span><span class="name">registerReflectCallback()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Registers a callback to modify the results of <a href="#fActiveRecord-api-reflect"><tt>fActiveRecord::reflect()</tt></a></p>
								<p>Callbacks registered here can override default method signatures and add  method signatures, however any methods that are defined in the actual class  will override these signatures.</p><p>The callback should accept three parameters:  </p><ul><li><strong><tt>$class</tt></strong>: the class name</li><li><strong><tt>&amp;$signatures</tt></strong>: an associative array of <tt>{method_name} =&gt; {signature}</tt></li><li><strong><tt>$include_doc_comments</tt></strong>: a boolean indicating if the signature should include the doc comment for the method, or just the signature</li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">registerReflectCallback</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class to register for, <tt>'*'</tt> will register for all classes</td>
			  </tr>
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback to register. Callback should accept a three parameters - see method description for details.</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORM-api-registerReplicateCallback" class="method static"><span class="resolution">::</span><span class="name">registerReplicateCallback()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Registers a callback for when a value is replicated for a specific column</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">registerReplicateCallback</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class to register for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to register for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback to register. Callback should accept a single parameter, the value to replicate and should return the replicated value.</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORM-api-registerScalarizeCallback" class="method static"><span class="resolution">::</span><span class="name">registerScalarizeCallback()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Registers a callback for when scalarize() is called on a specific column</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">registerScalarizeCallback</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class to register for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to register for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback to register. Callback should accept a single parameter, the value to scalarize and should return the scalarized value.</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORM-api-replicate" class="protected method static"><span class="resolution">::</span><span class="name">replicate()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Takes and value and returns a copy is scalar or a clone if an object</p>
								<p>The <a href="#fORM-api-registerReplicateCallback"><tt>registerReplicateCallback()</tt></a> allows for custom replication code</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">replicate</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class the column is part of</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The database column</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value to copy/clone</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The copied/cloned value
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORM-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORM-api-scalarize" class="protected method static"><span class="resolution">::</span><span class="name">scalarize()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>If the value passed is an object, calls <tt>__toString()</tt> on it</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">scalarize</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class the column is part of</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The database column</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value to get the scalar value of</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The scalar value of the value
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORM-api-tablize" class="method static"><span class="resolution">::</span><span class="name">tablize()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Takes a class name (or class) and turns it into a table name - Uses custom mapping if set</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">tablize</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The table name
				</p>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fORMColumn">fORMColumn</h2>
<div class="sidebar">
<h3 id="fORMColumn-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fORMColumn">Class Documentation</a></strong></li>
<li><a href="#fORMColumn-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fORMColumn-docs-EmailColumns">Email Columns</a></li>
<li><a href="#fORMColumn-docs-LinkColumns">Link Columns</a></li>
<li><a href="#fORMColumn-docs-NumberColumns">Number Columns</a></li>
<li><a href="#fORMColumn-docs-RandomColumns">Random Columns</a></li>
</ul>

<h3 id="fORMColumn-docs-ORMClasses">ORM Classes </h3>

<ul>
<li><a href="#fActiveRecord">fActiveRecord</a></li>
<li><a href="#fRecordSet">fRecordSet</a></li>
</ul>

<ul>
<li><a href="#fORM">fORM</a></li>
<li><strong>fORMColumn</strong></li>
<li><a href="#fORMDatabase">fORMDatabase</a></li>
<li><a href="#fORMDate">fORMDate</a></li>
<li><a href="#fORMFile">fORMFile</a></li>
<li><a href="#fORMJSON">fORMJSON</a></li>
<li><a href="#fORMMoney">fORMMoney</a></li>
<li><a href="#fORMOrdering">fORMOrdering</a></li>
<li><a href="#fORMRelated">fORMRelated</a></li>
<li><a href="#fORMSchema">fORMSchema</a></li>
<li><a href="#fORMValidation">fORMValidation</a></li>
</ul>
</div>

<p>
The fORMColumn class is an ORM plugin to provide miscellaneous additional functionality to individual columns.
</p>

<h3 id="fORMColumn-docs-EmailColumns">Email Columns</h3>

<p>
The static method <a href="#fORMColumn-api-configureEmailColumn"><code>configureEmailColumn()</code></a> sets a column to be validated as an email address. The first parameter is the <code>$class</code> the column is located in and the second parameter is the <code>$column</code>. As with most active record plugins, this method should normally be called from the <code>configure()</code> method. 
</p>
<pre class="block php"><code>class User extends fActiveRecord
{
    protected function configure()
    {
        fORMColumn::configureEmailColumn($this, 'email');
    }
}</code></pre>

<h3 id="fORMColumn-docs-LinkColumns">Link Columns</h3>

<p>
Columns can be configured as a link column by passing the <code>$class</code> and <code>$column</code> to the static method <a href="#fORMColumn-api-configureLinkColumn">fORMColumn::configureLinkColumn()</a>. When the record is validated, the link will be checked to make sure it contains a valid domain name, however <code>http://</code> is not required. When calling the <code>prepare</code> method for the column, it will ensure that the link begings with <code>http://</code> for output into a HTML <code>&lt;a&gt;</code> tag.
</p>
<pre class="block php"><code>class NewsArticle extends fActiveRecord
{
    protected function configure()
    {
        fORMColumn::configureLinkColumn($this, 'link');
    }
}

$news_article = new NewsArticle();
$news_article-&gt;setLink('www.example.com');

echo $news_article-&gt;getLink();
echo $news_article-&gt;prepareLink();</code></pre>

<p>
 The above PHP would output the following:
</p>
<pre><code>www.example.com
http://www.example.com</code></pre>

<h3 id="fORMColumn-docs-NumberColumns">Number Columns</h3>

<p>
While <a href="#fActiveRecord">fActiveRecord</a> automatically handles both integer and floating point numbers, sometimes it is necessary to have a columns value be represented as an <a href="#fNumber">fNumber</a> object. The static method <a href="#fORMColumn-api-configureNumberColumn"><code>configureNumberColumn()</code></a> ensures that values loaded out of the database are automatically converted to an <a href="#fNumber">fNumber</a> object. The first parameter is the <code>$class</code> and the second parameter is the <code>$column</code>.
</p>
<pre class="block php"><code>class Product extends fActiveRecord
{
    protected function configure()
    {
        fORMColumn::configureNumberColumn($this, 'weight');
    }
}</code></pre>

<h3 id="fORMColumn-docs-RandomColumns">Random Columns</h3>

<p>
In some situations a random string is useful for providing security when resetting passwords, validating email accounts or establishing access authentication. The static method <a href="#fORMColumn-api-configureRandomColumn"><code>configureRandomColumn()</code></a> will cause a column to be set to a random string when the record is first saved and will allow generating a new random string at any time by calling <code>generateColumnName()</code>.
</p>

<p>
<a href="#fORMColumn-api-configureRandomColumn"><code>configureRandomColumn()</code></a> accepts four parameters, the <code>$class</code> to be configured, the <code>$column</code>, the <code>$type</code> of random string (see <a href="#fCryptography-api-randomString">fCryptography::randomString()</a> for options) and the <code>$length</code> of the string.
</p>
<pre class="block php"><code>class User extends fActiveRecord
{
    protected function configure()
    {
        fORMColumn::configureRandomColumn($this, 'access_code', 'alphanumeric', 16);
    }
}

// Create a new user and get their access code
$user = new User();
$user-&gt;store();
$access_code = $user-&gt;getAccessCode();

// Generate a new random string for the access code
$user-&gt;generateAccessCode();
$access_code = $user-&gt;getAccessCode();</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fORMColumn-api">fORMColumn API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fORMColumn">Class Documentation</a></li>
		<li><strong><a href="#fORMColumn-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fORMColumn-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fORMColumn-api-configureEmailColumn">configureEmailColumn()</a></li>
	  			<li><a href="#fORMColumn-api-configureLinkColumn">configureLinkColumn()</a></li>
	  			<li><a href="#fORMColumn-api-configureNumberColumn">configureNumberColumn()</a></li>
	  			<li><a href="#fORMColumn-api-configureRandomColumn">configureRandomColumn()</a></li>
	  			<li class="protected"><a href="#fORMColumn-api-encodeNumberColumn">encodeNumberColumn()</a></li>
	  			<li class="protected"><a href="#fORMColumn-api-generate">generate()</a></li>
	  			<li class="protected"><a href="#fORMColumn-api-inspect">inspect()</a></li>
	  			<li class="protected"><a href="#fORMColumn-api-objectifyNumber">objectifyNumber()</a></li>
	  			<li class="protected"><a href="#fORMColumn-api-prepareLinkColumn">prepareLinkColumn()</a></li>
	  			<li class="protected"><a href="#fORMColumn-api-prepareNumberColumn">prepareNumberColumn()</a></li>
	  			<li class="protected"><a href="#fORMColumn-api-reflect">reflect()</a></li>
	  			<li class="protected"><a href="#fORMColumn-api-reset">reset()</a></li>
	  			<li class="protected"><a href="#fORMColumn-api-setEmailColumn">setEmailColumn()</a></li>
	  			<li class="protected"><a href="#fORMColumn-api-setRandomStrings">setRandomStrings()</a></li>
	  			<li class="protected"><a href="#fORMColumn-api-validateEmailColumns">validateEmailColumns()</a></li>
	  			<li class="protected"><a href="#fORMColumn-api-validateLinkColumns">validateLinkColumns()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fCryptography">fCryptography</a></li>
		<li><a href="#fGrammar">fGrammar</a></li>
		<li><a href="#fHTML">fHTML</a></li>
		<li><a href="#fNumber">fNumber</a></li>
		<li><a href="#fORM">fORM</a></li>
		<li><a href="#fORMDatabase">fORMDatabase</a></li>
		<li><a href="#fORMSchema">fORMSchema</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b15</span></div>
<p class="short_description">Provides special column functionality for <a href="#fActiveRecord">fActiveRecord</a> classes</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b15</th><td>Fixed a bug with empty string email values passing through required validation <span class="date">7/29/11</span></td></tr><tr><th>1.0.0b14</th><td>Updated code to work with the new <a href="#fORM">fORM</a> API <span class="date">8/6/10</span></td></tr><tr><th>1.0.0b13</th><td>Fixed <a href="#fORMColumn-api-reflect"><tt>reflect()</tt></a> to include some missing parameters <span class="date">6/8/10</span></td></tr><tr><th>1.0.0b12</th><td>Changed validation messages array to use column name keys <span class="date">5/26/10</span></td></tr><tr><th>1.0.0b11</th><td>Fixed a bug with <a href="#fORMColumn-api-prepareLinkColumn"><tt>prepareLinkColumn()</tt></a> returning <tt>http://</tt> for empty link columns and not adding <tt>http://</tt> to links that contained a /, but did not start with it <span class="date">3/16/10</span></td></tr><tr><th>1.0.0b10</th><td>Fixed <a href="#fORMColumn-api-reflect"><tt>reflect()</tt></a> to specify the value returned from <tt>set</tt> and <tt>generate</tt> methods, changed <a href="#fORMColumn-api-generate"><tt>generate()</tt></a> methods to return the newly generated string <span class="date">3/15/10</span></td></tr><tr><th>1.0.0b9</th><td>Changed email columns to be automatically trimmed if they are a value email address surrounded by whitespace <span class="date">3/14/10</span></td></tr><tr><th>1.0.0b8</th><td>Made the validation on link columns a bit more strict <span class="date">3/9/10</span></td></tr><tr><th>1.0.0b7</th><td>Updated code for the new <a href="#fORMDatabase">fORMDatabase</a> and <a href="#fORMSchema">fORMSchema</a> APIs <span class="date">10/28/09</span></td></tr><tr><th>1.0.0b6</th><td>Changed SQL statements to use value placeholders, identifier escaping and schema support <span class="date">10/22/09</span></td></tr><tr><th>1.0.0b5</th><td>Updated to use new <a href="#fORM-api-registerInspectCallback"><tt>fORM::registerInspectCallback()</tt></a> method <span class="date">7/13/09</span></td></tr><tr><th>1.0.0b4</th><td>Updated code for new <a href="#fORM">fORM</a> API <span class="date">6/15/09</span></td></tr><tr><th>1.0.0b3</th><td>Updated code to use new <a href="#fValidationException-api-formatField"><tt>fValidationException::formatField()</tt></a> method <span class="date">6/4/09</span></td></tr><tr><th>1.0.0b2</th><td>Fixed a bug with objectifying number columns <span class="date">11/24/08</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">5/27/08</span></td></tr></table></div>
<div class="class_methods static" id="fORMColumn-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fORMColumn-api-configureEmailColumn" class="method static"><span class="resolution">::</span><span class="name">configureEmailColumn()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets a column to be formatted as an email address</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">configureEmailColumn</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class to set the column format</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to format as an email address</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMColumn-api-configureLinkColumn" class="method static"><span class="resolution">::</span><span class="name">configureLinkColumn()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets a column to be formatted as a link</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">configureLinkColumn</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class to set the column format</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to format as a link</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMColumn-api-configureNumberColumn" class="method static"><span class="resolution">::</span><span class="name">configureNumberColumn()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets a column to be returned as an <a href="#fNumber">fNumber</a> object from calls to <tt>get{ColumnName}()</tt></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">configureNumberColumn</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class to set the column format</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to return as an <a href="#fNumber">fNumber</a> object</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMColumn-api-configureRandomColumn" class="method static"><span class="resolution">::</span><span class="name">configureRandomColumn()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets a column to be a random string column - a random string will be generated when the record is saved</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">configureRandomColumn</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$type</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$length</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to set as a random column</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$type</td>
				<td class="param_description">The type of random string, must be one of: <tt>'alphanumeric'</tt>, <tt>'alpha'</tt>, <tt>'numeric'</tt>, <tt>'hexadecimal'</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$length</td>
				<td class="param_description">The length of the random string</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMColumn-api-encodeNumberColumn" class="protected method static"><span class="resolution">::</span><span class="name">encodeNumberColumn()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Encodes a number column by calling <a href="#fNumber-api-__toString"><tt>fNumber::__toString()</tt></a></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">encodeNumberColumn</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method_name</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method_name</td>
				<td class="param_description">The method that was called</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters passed to the method</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The encoded number
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMColumn-api-generate" class="protected method static"><span class="resolution">::</span><span class="name">generate()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Generates a new random value for the column</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">generate</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method_name</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method_name</td>
				<td class="param_description">The method that was called</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters passed to the method</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The newly generated random value
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMColumn-api-inspect" class="protected method static"><span class="resolution">::</span><span class="name">inspect()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Adds metadata about features added by this class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">inspect</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$metadata</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class being inspected</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column being inspected</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$metadata</td>
				<td class="param_description">The array of metadata about a column</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMColumn-api-objectifyNumber" class="protected method static"><span class="resolution">::</span><span class="name">objectifyNumber()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Turns a numeric value into an <a href="#fNumber">fNumber</a> object</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">objectifyNumber</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class this value is for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column the value is in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The <a href="#fNumber">fNumber</a> object or raw value
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMColumn-api-prepareLinkColumn" class="protected method static"><span class="resolution">::</span><span class="name">prepareLinkColumn()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Prepares a link column so that the link will work properly in an <tt>a</tt> tag</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">prepareLinkColumn</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method_name</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method_name</td>
				<td class="param_description">The method that was called</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters passed to the method</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The formatted link
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMColumn-api-prepareNumberColumn" class="protected method static"><span class="resolution">::</span><span class="name">prepareNumberColumn()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Prepares a number column by calling <a href="#fNumber-api-format"><tt>fNumber::format()</tt></a></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">prepareNumberColumn</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method_name</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method_name</td>
				<td class="param_description">The method that was called</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters passed to the method</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The formatted link
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMColumn-api-reflect" class="protected method static"><span class="resolution">::</span><span class="name">reflect()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Adjusts the <a href="#fActiveRecord-api-reflect"><tt>fActiveRecord::reflect()</tt></a> signatures of columns that have been configured in this class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reflect</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$signatures</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$include_doc_comments</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to reflect</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$signatures</td>
				<td class="param_description">The associative array of <tt>{method name} =&gt; {signature}</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$include_doc_comments</td>
				<td class="param_description">If doc comments should be included with the signature</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMColumn-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMColumn-api-setEmailColumn" class="protected method static"><span class="resolution">::</span><span class="name">setEmailColumn()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets the value for an email column, trimming the value if it is a valid email</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-identifier">setEmailColumn</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method_name</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method_name</td>
				<td class="param_description">The method that was called</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters passed to the method</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The record object, to allow for method chaining
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMColumn-api-setRandomStrings" class="protected method static"><span class="resolution">::</span><span class="name">setRandomStrings()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets the appropriate column values to a random string if the object is new</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">setRandomStrings</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The formatted link
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMColumn-api-validateEmailColumns" class="protected method static"><span class="resolution">::</span><span class="name">validateEmailColumns()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Validates all email columns</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">validateEmailColumns</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$validation_messages</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$validation_messages</td>
				<td class="param_description">An array of ordered validation messages</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMColumn-api-validateLinkColumns" class="protected method static"><span class="resolution">::</span><span class="name">validateLinkColumns()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Validates all link columns</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">validateLinkColumns</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$validation_messages</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$validation_messages</td>
				<td class="param_description">An array of ordered validation messages</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fORMDatabase">fORMDatabase</h2>
<div class="sidebar">
<h3 id="fORMDatabase-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fORMDatabase">Class Documentation</a></strong></li>
<li><a href="#fORMDatabase-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fORMDatabase-docs-fDatabaseRegistry">fDatabase Registry</a></li>
<li><a href="#fORMDatabase-docs-MultipleDatabaseSupport">Multiple Database Support</a>
<ul>
<li><a href="#fORMDatabase-docs-VerticalPartitioning">Vertical Partitioning</a></li>
<li><a href="#fORMDatabase-docs-Master-SlaveSetups">Master-Slave Setups</a></li>
</ul>
</li>
</ul>

<h3 id="fORMDatabase-docs-ORMClasses">ORM Classes </h3>

<ul>
<li><a href="#fActiveRecord">fActiveRecord</a></li>
<li><a href="#fRecordSet">fRecordSet</a></li>
</ul>

<ul>
<li><a href="#fORM">fORM</a></li>
<li><a href="#fORMColumn">fORMColumn</a></li>
<li><strong>fORMDatabase</strong></li>
<li><a href="#fORMDate">fORMDate</a></li>
<li><a href="#fORMFile">fORMFile</a></li>
<li><a href="#fORMJSON">fORMJSON</a></li>
<li><a href="#fORMMoney">fORMMoney</a></li>
<li><a href="#fORMOrdering">fORMOrdering</a></li>
<li><a href="#fORMRelated">fORMRelated</a></li>
<li><a href="#fORMSchema">fORMSchema</a></li>
<li><a href="#fORMValidation">fORMValidation</a></li>
</ul>
</div>

<p>
The fORMDatabase class provides database-related functionality to the Flourish ORM. End-developers will use the class to attach <a href="#fDatabase">fDatabase</a> objects for the rest of ORM.
</p>

<h3 id="fORMDatabase-docs-fDatabaseRegistry">fDatabase Registry</h3>

<p>
Since an ORM by definition maps objects to a database, it is obvious that an instance of the <a href="#fDatabase">fDatabase</a> class will be needed for all database operations. To make an instance of <a href="#fDatabase">fDatabase</a> available to all of the ORM classes, pass it to the static method <a href="#fORMDatabase-api-attach"><code>attach()</code></a>.
</p>
<pre class="block php"><code>fORMDatabase::attach(new fDatabase('postgresql', 'database', 'username', 'password'));</code></pre>

<p>
 When writing code for the ORM that requires use of the database class, the static method <a href="#fORMDatabase-api-retrieve"><code>retrieve()</code></a> will return the instance set with <code>attach()</code>.
</p>
<pre class="block php"><code>$result = fORMDatabase::retrieve()-&gt;translatedQuery(&quot;SELECT * FROM users&quot;);</code></pre>

<h3 id="fORMDatabase-docs-MultipleDatabaseSupport">Multiple Database Support</h3>

<p>
Multiple databases are support by the Flourish ORM, both in master-slave and vertical partitioning setups.
</p>

<h4 id="fORMDatabase-docs-VerticalPartitioning">Vertical Partitioning</h4>

<p>
Vertical partitioning is when different tables are split up over multiple databases or servers. For instance, perhaps all users and permissions are stored on one database server and all orders and products are stored on another.
</p>

<p>
In this type of a setup, it is possible to attach more than one databases for the ORM by passing a second parameter, <code>$name</code>, to the static method <a href="#fORMDatabase-api-attach"><code>attach()</code></a>.
</p>
<pre class="block php"><code>// Attach the users db as the default
fORMDatabase::attach($users_db);
// Attach the ecommerce db with the name &quot;ecommerce_db&quot;
fORMDatabase::attach($ecommerce_db, 'ecommerce_db');</code></pre>

<p>
 Now individual classes can be mapped to the database by calling <a href="#fORM-api-mapClassToDatabase">fORM::mapClassToDatabase()</a>.
</p>
<pre class="block php"><code>fORM::mapClassToDatabase('User', 'ecommerce_db');</code></pre>

<h4 id="fORMDatabase-docs-Master-SlaveSetups">Master-Slave Setups</h4>

<p>
When a database cluster is set up to use a master-slave setup, one database will be designated the master and one or more as slaves. Flourish allows for such a setup with <a href="#fORMDatabase-api-attach"><code>attach()</code></a> by specifying the third parameter, <code>$role</code>. The <code>$role</code> parameter defaults to <code>both</code>, which means the server will be used for reading and writing. To attach the master server, set the <code>$role</code> to <code>write</code>. For the slave, set the <code>$role</code> to <code>read</code>.
</p>
<pre class="block php"><code>// Attach the master for writing and a slave for reading
fORMDatabase::attach($master_db, 'default', 'write');
fORMDatabase::attach($random_slave_db, 'default', 'read');</code></pre>

<p>
 It is also possible to combine vertical partitioning with master-slave setups by specifying a <code>$name</code> for the database other than <code>default</code>.
</p>

<p>
As implied by the slave database variable <code>$random_slave_db</code> in the code example, <a href="#fORMDatabase-api-attach"><code>attach()</code></a> <strong>will not</strong> accept multiple databases for the <code>read</code> role and random pick one. For setups where there is more than one slave, code must be manually written to select a slave and provide it to the <code>attach()</code> method.
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fORMDatabase-api">fORMDatabase API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fORMDatabase">Class Documentation</a></li>
		<li><strong><a href="#fORMDatabase-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fORMDatabase-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li class="protected"><a href="#fORMDatabase-api-addHavingClause">addHavingClause()</a></li>
	  			<li class="protected"><a href="#fORMDatabase-api-addOrderByClause">addOrderByClause()</a></li>
	  			<li class="protected"><a href="#fORMDatabase-api-addPrimaryKeyWhereParams">addPrimaryKeyWhereParams()</a></li>
	  			<li class="protected"><a href="#fORMDatabase-api-addWhereClause">addWhereClause()</a></li>
	  			<li><a href="#fORMDatabase-api-attach">attach()</a></li>
	  			<li class="protected"><a href="#fORMDatabase-api-injectFromAndGroupByClauses">injectFromAndGroupByClauses()</a></li>
	  			<li class="protected"><a href="#fORMDatabase-api-makeCondition">makeCondition()</a></li>
	  			<li class="protected"><a href="#fORMDatabase-api-parseSearchTerms">parseSearchTerms()</a></li>
	  			<li class="protected"><a href="#fORMDatabase-api-reset">reset()</a></li>
	  			<li><a href="#fORMDatabase-api-retrieve">retrieve()</a></li>
	  			<li class="protected"><a href="#fORMDatabase-api-splitHavingConditions">splitHavingConditions()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fORM">fORM</a></li>
		<li><a href="#fORMSchema">fORMSchema</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fORM">fORM</a></li>
		<li><a href="#fORMColumn">fORMColumn</a></li>
		<li><a href="#fORMOrdering">fORMOrdering</a></li>
		<li><a href="#fORMRelated">fORMRelated</a></li>
		<li><a href="#fORMSchema">fORMSchema</a></li>
		<li><a href="#fORMValidation">fORMValidation</a></li>
		<li><a href="#fRecordSet">fRecordSet</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b32</span></div>
<p class="short_description">Holds a single instance of the <a href="#fDatabase">fDatabase</a> class and provides database manipulation functionality for ORM code</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b32</th><td>Added support to <a href="#fORMDatabase-api-addWhereClause"><tt>addWhereClause()</tt></a> for the <tt>^~</tt> and <tt>$~</tt> operators <span class="date">6/20/11</span></td></tr><tr><th>1.0.0b31</th><td>Fixed a bug with <a href="#fORMDatabase-api-addWhereClause"><tt>addWhereClause()</tt></a> generating invalid SQL <span class="date">5/10/11</span></td></tr><tr><th>1.0.0b30</th><td>Fixed insertFromAndGroupByClauses() to insert <tt>MAX()</tt> around columns in related tables in the <tt>ORDER BY</tt> clause when a <tt>GROUP BY</tt> is used <span class="date">2/3/11</span></td></tr><tr><th>1.0.0b29</th><td>Added code to handle old PCRE engines that don't support unicode character properties <span class="date">12/6/10</span></td></tr><tr><th>1.0.0b28</th><td>Fixed a bug in the <a href="#fProgrammerException">fProgrammerException</a> that is thrown when an improperly formatted OR condition is provided <span class="date">11/24/10</span></td></tr><tr><th>1.0.0b27</th><td>Fixed <a href="#fORMDatabase-api-addWhereClause"><tt>addWhereClause()</tt></a> to ignore fuzzy search clauses with no values to match <span class="date">10/19/10</span></td></tr><tr><th>1.0.0b26</th><td>Fixed insertFromAndGroupByClauses() to handle SQL where a table is references in more than one capitalization <span class="date">7/26/10</span></td></tr><tr><th>1.0.0b25</th><td>Fixed insertFromAndGroupByClauses() to properly handle recursive relationships <span class="date">7/22/10</span></td></tr><tr><th>1.0.0b24</th><td>Fixed <a href="#fORMDatabase-api-parseSearchTerms"><tt>parseSearchTerms()</tt></a> to work with non-ascii terms <span class="date">6/30/10</span></td></tr><tr><th>1.0.0b23</th><td>Fixed error messages in <a href="#fORMDatabase-api-retrieve"><tt>retrieve()</tt></a> <span class="date">4/23/10</span></td></tr><tr><th>1.0.0b22</th><td>Added support for IBM DB2, fixed an issue with building record sets or records that have recursive relationships <span class="date">4/13/10</span></td></tr><tr><th>1.0.0b21</th><td>Changed <a href="#fORMDatabase-api-injectFromAndGroupByClauses"><tt>injectFromAndGroupByClauses()</tt></a> to be able to handle table aliases that contain other aliases inside of them <span class="date">3/3/10</span></td></tr><tr><th>1.0.0b20</th><td>Fixed a bug where joining to a table two separate ways could cause table alias issues and incorrect SQL to be generated <span class="date">12/16/09</span></td></tr><tr><th>1.0.0b19</th><td>Added the ability to compare columns with the <tt>=:</tt>, <tt>!:</tt>, <tt>&lt;:</tt>, <tt>&lt;=:</tt>, <tt>&gt;:</tt> and <tt>&gt;=:</tt> operators <span class="date">12/8/09</span></td></tr><tr><th>1.0.0b18</th><td>Fixed a bug affecting where conditions with columns that are not null but have a default value <span class="date">11/3/09</span></td></tr><tr><th>1.0.0b17</th><td>Added support for multiple databases <span class="date">10/28/09</span></td></tr><tr><th>1.0.0b16</th><td>Internal Backwards Compatibility Break - Renamed methods and significantly changed parameters and functionality for SQL statements to use value placeholders, identifier escaping and to handle schemas <span class="date">10/22/09</span></td></tr><tr><th>1.0.0b15</th><td>Streamlined intersection operator SQL and added support for the second value being NULL <span class="date">9/21/09</span></td></tr><tr><th>1.0.0b14</th><td>Added support for the intersection operator <tt>&gt;&lt;</tt> to createWhereClause() <span class="date">7/13/09</span></td></tr><tr><th>1.0.0b13</th><td>Added support for the <tt>AND LIKE</tt> operator <tt>&amp;~</tt> to createWhereClause() <span class="date">7/9/09</span></td></tr><tr><th>1.0.0b12</th><td>Added support for the <tt>NOT LIKE</tt> operator <tt>!~</tt> to createWhereClause() <span class="date">7/8/09</span></td></tr><tr><th>1.0.0b11</th><td>Added support for concatenated columns to escapeBySchema() <span class="date">6/19/09</span></td></tr><tr><th>1.0.0b10</th><td>Updated createWhereClause() to properly handle NULLs for arrays of values when doing = and != comparisons <span class="date">6/17/09</span></td></tr><tr><th>1.0.0b9</th><td>Changed replacement values in preg_replace() calls to be properly escaped <span class="date">6/11/09</span></td></tr><tr><th>1.0.0b8</th><td>Fixed a bug with creatingWhereClause() where a null value would not be escaped property <span class="date">5/12/09</span></td></tr><tr><th>1.0.0b7</th><td>Fixed a bug where an OR condition in createWhereClause() could not have one of the values be an array <span class="date">4/22/09</span></td></tr><tr><th>1.0.0b6</th><td>insertFromAndGroupByClauses() will no longer wrap ungrouped columns if in a CAST or CASE statement for ORDER BY clauses of queries with a GROUP BY clause <span class="date">3/23/09</span></td></tr><tr><th>1.0.0b5</th><td>Fixed <a href="#fORMDatabase-api-parseSearchTerms"><tt>parseSearchTerms()</tt></a> to include stop words when they are the only thing in the search string <span class="date">12/31/08</span></td></tr><tr><th>1.0.0b4</th><td>Fixed a bug where loading a related record in the same table through a one-to-many relationship caused recursion <span class="date">12/24/08</span></td></tr><tr><th>1.0.0b3</th><td>Fixed a bug from 1.0.0b2 <span class="date">12/5/08</span></td></tr><tr><th>1.0.0b2</th><td>Added support for != and &lt;&gt; to createWhereClause() and createHavingClause() <span class="date">12/4/08</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">8/4/07</span></td></tr></table></div>
<div class="class_methods static" id="fORMDatabase-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start protected method static -->
			<h5 id="fORMDatabase-api-addHavingClause" class="protected method static"><span class="resolution">::</span><span class="name">addHavingClause()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Creates a <tt>HAVING</tt> clause from an array of conditions</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">addHavingClause</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fDatabase">fDatabase</a></span> <span class="php-var">$db</span><span class="php-code">,</span> <span class="php-vartype"><a href="#fSchema">fSchema</a></span> <span class="php-var">$schema</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$params</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$table</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$conditions</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fDatabase">fDatabase</a></td>
				<td class="param_name">$db</td>
				<td class="param_description">The database the query will be executed on</td>
			  </tr>
						  <tr>
				<td class="param_data_type"><a href="#fSchema">fSchema</a></td>
				<td class="param_name">$schema</td>
				<td class="param_description">The schema for the database</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$params</td>
				<td class="param_description">The params for the <a href="#fDatabase-api-query"><tt>fDatabase::query()</tt></a> call</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$table</td>
				<td class="param_description">The table the query is being executed on</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$conditions</td>
				<td class="param_description">The array of conditions - see <a href="#fRecordSet-api-build"><tt>fRecordSet::build()</tt></a> for format</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The params with the <tt>HAVING</tt> clause added
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMDatabase-api-addOrderByClause" class="protected method static"><span class="resolution">::</span><span class="name">addOrderByClause()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Adds an <tt>ORDER BY</tt> clause to an array of params for an <a href="#fDatabase-api-query"><tt>fDatabase::query()</tt></a> call</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">addOrderByClause</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fDatabase">fDatabase</a></span> <span class="php-var">$db</span><span class="php-code">,</span> <span class="php-vartype"><a href="#fSchema">fSchema</a></span> <span class="php-var">$schema</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$params</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$table</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$order_bys</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fDatabase">fDatabase</a></td>
				<td class="param_name">$db</td>
				<td class="param_description">The database the query will be executed on</td>
			  </tr>
						  <tr>
				<td class="param_data_type"><a href="#fSchema">fSchema</a></td>
				<td class="param_name">$schema</td>
				<td class="param_description">The schema object for the database the query will be executed on</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$params</td>
				<td class="param_description">The parameters for the <a href="#fDatabase-api-query"><tt>fDatabase::query()</tt></a> call</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$table</td>
				<td class="param_description">The table any ambigious column references will refer to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$order_bys</td>
				<td class="param_description">The array of order bys to use - see <a href="#fRecordSet-api-build"><tt>fRecordSet::build()</tt></a> for format</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The params with a SQL <tt>ORDER BY</tt> clause added
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMDatabase-api-addPrimaryKeyWhereParams" class="protected method static"><span class="resolution">::</span><span class="name">addPrimaryKeyWhereParams()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Add the appropriate SQL and params for a <tt>WHERE</tt> clause condition for primary keys of the table specified</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">addPrimaryKeyWhereParams</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fSchema">fSchema</a></span> <span class="php-var">$schema</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$params</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$table</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$table_alias</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fSchema">fSchema</a></td>
				<td class="param_name">$schema</td>
				<td class="param_description">The schema for the database the query will be run on</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$params</td>
				<td class="param_description">The currently constructed params for <a href="#fDatabase-api-query"><tt>fDatabase::query()</tt></a> - the first param should be a SQL statement</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$table</td>
				<td class="param_description">The table to build the where clause for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$table_alias</td>
				<td class="param_description">The alias for the table</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The values array for the <a href="#fActiveRecord">fActiveRecord</a> object</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values array for the <a href="#fActiveRecord">fActiveRecord</a> object</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The params to pass to <a href="#fDatabase-api-query"><tt>fDatabase::query()</tt></a>, including the new primary key where condition
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMDatabase-api-addWhereClause" class="protected method static"><span class="resolution">::</span><span class="name">addWhereClause()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Adds a <tt>WHERE</tt> clause, from an array of conditions, to the parameters for an <a href="#fDatabase-api-query"><tt>fDatabase::query()</tt></a> call</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">addWhereClause</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fDatabase">fDatabase</a></span> <span class="php-var">$db</span><span class="php-code">,</span> <span class="php-vartype"><a href="#fSchema">fSchema</a></span> <span class="php-var">$schema</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$params</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$table</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$conditions</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fDatabase">fDatabase</a></td>
				<td class="param_name">$db</td>
				<td class="param_description">The database the query will be executed on</td>
			  </tr>
						  <tr>
				<td class="param_data_type"><a href="#fSchema">fSchema</a></td>
				<td class="param_name">$schema</td>
				<td class="param_description">The schema for the database</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$params</td>
				<td class="param_description">The parameters for the <a href="#fDatabase-api-query"><tt>fDatabase::query()</tt></a> call</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$table</td>
				<td class="param_description">The table any ambigious column references will refer to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$conditions</td>
				<td class="param_description">The array of conditions - see <a href="#fRecordSet-api-build"><tt>fRecordSet::build()</tt></a> for format</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The params with the SQL <tt>WHERE</tt> clause added
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMDatabase-api-attach" class="method static"><span class="resolution">::</span><span class="name">attach()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Allows attaching an <a href="#fDatabase">fDatabase</a>-compatible objects for by ORM code</p>
								<p>If a <tt>$name</tt> other than <tt>default</tt> is used, any <a href="#fActiveRecord">fActiveRecord</a> classes  that should use it will need to be configured by passing the class name  and <tt>$name</tt> to mapClassToDatabase(). The <tt>$name</tt> parameter should be  unique per database or database master/slave setup.</p><p>The <tt>$role</tt> is used by code to allow for master/slave database setups.  There can only be one database object attached for either of the roles,  <tt>'read'</tt> or <tt>'write'</tt>. If the role <tt>'both'</tt> is specified, it will  be applied to both the <tt>'read'</tt> and <tt>'write'</tt> roles. Any sort of logic  for picking one out of multiple databases should be done before this  method is called.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">attach</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fDatabase">fDatabase</a></span> <span class="php-var">$database</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">=</span>'default'<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$role</span><span class="php-code">=</span>'both' <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fDatabase">fDatabase</a></td>
				<td class="param_name">$database</td>
				<td class="param_description">An object that is compatible with <a href="#fDatabase">fDatabase</a></td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The name for the database instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$role</td>
				<td class="param_description">If the database should be used for <tt>'read'</tt>, <tt>'write'</tt> or <tt>'both'</tt> operations</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMDatabase-api-injectFromAndGroupByClauses" class="protected method static"><span class="resolution">::</span><span class="name">injectFromAndGroupByClauses()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Finds all of the table names in the SQL and creates the appropriate <tt>FROM</tt> and <tt>GROUP BY</tt> clauses with all necessary joins</p>
								<p>The SQL string should contain two placeholders, <tt>:from_clause</tt> and  <tt>:group_by_clause</tt>, although the later may be omitted if necessary. All  columns should be qualified with their full table name.</p><p>Here is an example SQL string to pass in presumming that the tables  users and groups are in a relationship:</p><pre class="block "><code>SELECT users.* FROM :from_clause WHERE groups.group_id = 5 :group_by_clause ORDER BY lower(users.first_name) ASC</code></pre>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">injectFromAndGroupByClauses</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fDatabase">fDatabase</a></span> <span class="php-var">$db</span><span class="php-code">,</span> <span class="php-vartype"><a href="#fSchema">fSchema</a></span> <span class="php-var">$schema</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$params</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$table</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fDatabase">fDatabase</a></td>
				<td class="param_name">$db</td>
				<td class="param_description">The database the query is to be executed on</td>
			  </tr>
						  <tr>
				<td class="param_data_type"><a href="#fSchema">fSchema</a></td>
				<td class="param_name">$schema</td>
				<td class="param_description">The schema for the database</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$params</td>
				<td class="param_description">The parameters for the <a href="#fDatabase-api-query"><tt>fDatabase::query()</tt></a> call</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$table</td>
				<td class="param_description">The main table to be queried</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The params with the SQL <tt>FROM</tt> and <tt>GROUP BY</tt> clauses injected
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMDatabase-api-makeCondition" class="protected method static"><span class="resolution">::</span><span class="name">makeCondition()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Makes a condition for a SQL statement out of <a href="#fDatabase-api-escape"><tt>fDatabase::escape()</tt></a> placeholders</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">makeCondition</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fSchema">fSchema</a></span> <span class="php-var">$schema</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$table</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$comparison_operator</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fSchema">fSchema</a></td>
				<td class="param_name">$schema</td>
				<td class="param_description">The schema object for the database the query will be executed on</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$table</td>
				<td class="param_description">The table to create the condition for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to make the condition for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$comparison_operator</td>
				<td class="param_description">The comparison operator for the condition</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value for the condition, which allows the $comparison_operator to be tweaked for NULL values</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					A SQL condition using <a href="#fDatabase-api-escape"><tt>fDatabase::escape()</tt></a> placeholders
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMDatabase-api-parseSearchTerms" class="protected method static"><span class="resolution">::</span><span class="name">parseSearchTerms()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Parses a search string into search terms, supports quoted phrases and removes extra punctuation</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">parseSearchTerms</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$terms</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$ignore_stop_words</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$terms</td>
				<td class="param_description">A text string from a form input to parse into search terms</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$ignore_stop_words</td>
				<td class="param_description">If stop words should be ignored, this setting will be ignored if all words are stop words</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMDatabase-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMDatabase-api-retrieve" class="method static"><span class="resolution">::</span><span class="name">retrieve()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Return the instance of the <a href="#fDatabase">fDatabase</a> class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fDatabase">fDatabase</a></span> <span class="php-identifier">retrieve</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">=</span>'fActiveRecord'<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$role</span><span class="php-code">=</span>'either' <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to retrieve the database for - if not specified, the default database will be returned</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$role</td>
				<td class="param_description">If the database will be used for <tt>'write'</tt>, <tt>'read'</tt> or <tt>'either'</tt> operations</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The database instance
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMDatabase-api-splitHavingConditions" class="protected method static"><span class="resolution">::</span><span class="name">splitHavingConditions()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Removed aggregate function calls from where conditions array and puts them in a having conditions array</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">splitHavingConditions</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$where_conditions</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$where_conditions</td>
				<td class="param_description">The where conditions to look through for aggregate functions</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The conditions to be put in a <tt>HAVING</tt> clause
				</p>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fORMDate">fORMDate</h2>
<div class="sidebar">
<h3 id="fORMDate-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fORMDate">Class Documentation</a></strong></li>
<li><a href="#fORMDate-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fORMDate-docs-DateCreatedColumns">Date Created Columns</a></li>
<li><a href="#fORMDate-docs-DateUpdatedColumns">Date Updated Columns</a></li>
<li><a href="#fORMDate-docs-TimezoneColumns">Timezone Columns</a></li>
</ul>

<h3 id="fORMDate-docs-ORMClasses">ORM Classes </h3>

<ul>
<li><a href="#fActiveRecord">fActiveRecord</a></li>
<li><a href="#fRecordSet">fRecordSet</a></li>
</ul>

<ul>
<li><a href="#fORM">fORM</a></li>
<li><a href="#fORMColumn">fORMColumn</a></li>
<li><a href="#fORMDatabase">fORMDatabase</a></li>
<li><strong>fORMDate</strong></li>
<li><a href="#fORMFile">fORMFile</a></li>
<li><a href="#fORMJSON">fORMJSON</a></li>
<li><a href="#fORMMoney">fORMMoney</a></li>
<li><a href="#fORMOrdering">fORMOrdering</a></li>
<li><a href="#fORMRelated">fORMRelated</a></li>
<li><a href="#fORMSchema">fORMSchema</a></li>
<li><a href="#fORMValidation">fORMValidation</a></li>
</ul>
</div>

<p>
The fORMDate class is an ORM plugin to provide additional functionality for date and time columns.
</p>

<h3 id="fORMDate-docs-DateCreatedColumns">Date Created Columns</h3>

<p>
The static method <a href="#fORMDate-api-configureDateCreatedColumn"><code>configureDateCreatedColumn()</code></a> sets an active record class to automatically set a <code>date</code>, <code>time</code> or <code>timestamp</code> column to the date/time when the record is first saved in the database.
</p>
<pre class="block php"><code>class User extends fActiveRecord
{
    protected function configure()
    {
        fORMDate::configureDateCreatedColumn($this, 'date_created');
    }
}</code></pre>

<h3 id="fORMDate-docs-DateUpdatedColumns">Date Updated Columns</h3>

<p>
The static method <a href="#fORMDate-api-configureDateUpdatedColumn"><code>configureDateUpdatedColumn()</code></a> sets an active record class to automatically set a <code>date</code>, <code>time</code> or <code>timestamp</code> column to the current date/time each time the record is saved in the database.
</p>
<pre class="block php"><code>class User extends fActiveRecord
{
    protected function configure()
    {
        fORMDate::configureDateUpdatedColumn($this, 'last_edited');
    }
}</code></pre>

<h3 id="fORMDate-docs-TimezoneColumns">Timezone Columns</h3>

<p>
Since not all supported databases support timezone information in timestamp columns, the fORMDate class allows associating a timestamp column with another column to store the timezone name. The static method <a href="#fORMDate-api-configureTimezoneColumn"><code>configureTimezoneColumn()</code></a> accepts three parameters, the <code>$class</code>, the <code>$timestamp_column</code> and the <code>$timezone_column</code>.
</p>
<pre class="block php"><code>class NewsArticle extends fActiveRecord
{
    protected function configure()
    {
        fORMDate::configureTimezoneColumn($this, 'date_posted', 'timezone_posted');
    }
}</code></pre>

<p>
 The timezone column will be used to store the timezone stored in any <a href="#fTimestamp">fTimestamp</a> objects that are set to the timestamp column. If a new timestamp is set, it will be combined with the existing timezone into a new <a href="#fTimestamp">fTimestamp</a> object. The object will be stored in the timestamp column. If a new timezone is set, it will be combined with the existing timestamp and the new <a href="#fTimestamp">fTimestamp</a> object will be stored in the timestamp column.
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fORMDate-api">fORMDate API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fORMDate">Class Documentation</a></li>
		<li><strong><a href="#fORMDate-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fORMDate-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fORMDate-api-configureDateCreatedColumn">configureDateCreatedColumn()</a></li>
	  			<li><a href="#fORMDate-api-configureDateUpdatedColumn">configureDateUpdatedColumn()</a></li>
	  			<li><a href="#fORMDate-api-configureTimezoneColumn">configureTimezoneColumn()</a></li>
	  			<li class="protected"><a href="#fORMDate-api-inspect">inspect()</a></li>
	  			<li class="protected"><a href="#fORMDate-api-makeTimestampObjects">makeTimestampObjects()</a></li>
	  			<li class="protected"><a href="#fORMDate-api-objectifyTimestampWithTimezone">objectifyTimestampWithTimezone()</a></li>
	  			<li class="protected"><a href="#fORMDate-api-reset">reset()</a></li>
	  			<li class="protected"><a href="#fORMDate-api-setDateCreated">setDateCreated()</a></li>
	  			<li class="protected"><a href="#fORMDate-api-setDateUpdated">setDateUpdated()</a></li>
	  			<li class="protected"><a href="#fORMDate-api-setTimestampColumn">setTimestampColumn()</a></li>
	  			<li class="protected"><a href="#fORMDate-api-setTimezoneColumn">setTimezoneColumn()</a></li>
	  			<li class="protected"><a href="#fORMDate-api-validateTimezoneColumns">validateTimezoneColumns()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fGrammar">fGrammar</a></li>
		<li><a href="#fORM">fORM</a></li>
		<li><a href="#fORMSchema">fORMSchema</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fTimestamp">fTimestamp</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b9</span></div>
<p class="short_description">Provides additional date/time functionality for <a href="#fActiveRecord">fActiveRecord</a> classes</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b9</th><td>Updated code to work with the new <a href="#fORM">fORM</a> API <span class="date">8/6/10</span></td></tr><tr><th>1.0.0b8</th><td>Changed validation messages array to use column name keys <span class="date">5/26/10</span></td></tr><tr><th>1.0.0b7</th><td>Fixed the <tt>set</tt> methods to return the record object in order to be consistent with all other <tt>set</tt> methods <span class="date">3/15/10</span></td></tr><tr><th>1.0.0b6</th><td>Fixed an issue with calling a non-existent method on <a href="#fTimestamp">fTimestamp</a> instances <span class="date">11/3/09</span></td></tr><tr><th>1.0.0b5</th><td>Updated code for the new <a href="#fORMDatabase">fORMDatabase</a> and <a href="#fORMSchema">fORMSchema</a> APIs <span class="date">10/28/09</span></td></tr><tr><th>1.0.0b4</th><td>Fixed setting up the inspect callback in <a href="#fORMDate-api-configureTimezoneColumn"><tt>configureTimezoneColumn()</tt></a> <span class="date">10/11/09</span></td></tr><tr><th>1.0.0b3</th><td>Updated to use new <a href="#fORM-api-registerInspectCallback"><tt>fORM::registerInspectCallback()</tt></a> method <span class="date">7/13/09</span></td></tr><tr><th>1.0.0b2</th><td>Updated code to use new <a href="#fValidationException-api-formatField"><tt>fValidationException::formatField()</tt></a> method <span class="date">6/4/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">9/5/08</span></td></tr></table></div>
<div class="class_methods static" id="fORMDate-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fORMDate-api-configureDateCreatedColumn" class="method static"><span class="resolution">::</span><span class="name">configureDateCreatedColumn()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets a column to be a date created column</p>
								<p>When a new record is stored in the database, date created columns will  be filled with the timestamp of the store operation.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">configureDateCreatedColumn</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to set as a date created column</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMDate-api-configureDateUpdatedColumn" class="method static"><span class="resolution">::</span><span class="name">configureDateUpdatedColumn()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets a column to be a date updated column</p>
								<p>Whenever a record is stored in the database, a date updated column will  be set to the timestamp of the operation.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">configureDateUpdatedColumn</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to set as a date updated column</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMDate-api-configureTimezoneColumn" class="method static"><span class="resolution">::</span><span class="name">configureTimezoneColumn()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets a timestamp column to store the timezone in another column</p>
								<p>Since not all databases support timezone information in timestamp  columns, this method allows storing the timezone in another columns.  When the timestamp and timezone are retrieved from the database, they  will be automatically combined together into an <a href="#fTimestamp">fTimestamp</a> object.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">configureTimezoneColumn</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$timestamp_column</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$timezone_column</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class to set the column format</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$timestamp_column</td>
				<td class="param_description">The timestamp column to store the timezone for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$timezone_column</td>
				<td class="param_description">The column to store the timezone in</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMDate-api-inspect" class="protected method static"><span class="resolution">::</span><span class="name">inspect()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Adds metadata about features added by this class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">inspect</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$metadata</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class being inspected</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column being inspected</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$metadata</td>
				<td class="param_description">The array of metadata about a column</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMDate-api-makeTimestampObjects" class="protected method static"><span class="resolution">::</span><span class="name">makeTimestampObjects()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Creates <a href="#fTimestamp">fTimestamp</a> objects for every timestamp/timezone combination in the object</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">makeTimestampObjects</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMDate-api-objectifyTimestampWithTimezone" class="protected method static"><span class="resolution">::</span><span class="name">objectifyTimestampWithTimezone()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Turns a timestamp value into an <a href="#fTimestamp">fTimestamp</a> object with a timezone specified by another column</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">objectifyTimestampWithTimezone</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$timestamp_column</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$timezone_column</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$timestamp_column</td>
				<td class="param_description">The column holding the timestamp</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$timezone_column</td>
				<td class="param_description">The column holding the timezone</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMDate-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMDate-api-setDateCreated" class="protected method static"><span class="resolution">::</span><span class="name">setDateCreated()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets the appropriate column values to the date the object was created (for new records)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setDateCreated</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMDate-api-setDateUpdated" class="protected method static"><span class="resolution">::</span><span class="name">setDateUpdated()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets the appropriate column values to the date the object was updated</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setDateUpdated</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMDate-api-setTimestampColumn" class="protected method static"><span class="resolution">::</span><span class="name">setTimestampColumn()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets the timestamp column and then tries to objectify it with an related timezone column</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-identifier">setTimestampColumn</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method_name</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method_name</td>
				<td class="param_description">The method that was called</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters passed to the method</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The record object, to allow for method chaining
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMDate-api-setTimezoneColumn" class="protected method static"><span class="resolution">::</span><span class="name">setTimezoneColumn()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets the timezone column and then tries to objectify the related timestamp column</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-identifier">setTimezoneColumn</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method_name</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method_name</td>
				<td class="param_description">The method that was called</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters passed to the method</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The record object, to allow for method chaining
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMDate-api-validateTimezoneColumns" class="protected method static"><span class="resolution">::</span><span class="name">validateTimezoneColumns()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Validates all timestamp/timezone columns</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">validateTimezoneColumns</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$validation_messages</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$validation_messages</td>
				<td class="param_description">An array of ordered validation messages</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fORMFile">fORMFile</h2>
<div class="sidebar">
<h3 id="fORMFile-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fORMFile">Class Documentation</a></strong></li>
<li><a href="#fORMFile-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fORMFile-docs-FileUploadColumns">File Upload Columns</a></li>
<li><a href="#fORMFile-docs-HTMLFormSetup">HTML Form Setup</a></li>
<li><a href="#fORMFile-docs-AddingfUploadOptions">Adding fUpload Options</a></li>
<li><a href="#fORMFile-docs-ImageUploadColumns">Image Upload Columns</a></li>
<li><a href="#fORMFile-docs-AddingfImageOperations">Adding fImage Operations</a></li>
<li><a href="#fORMFile-docs-ColumnInheritance">Column Inheritance</a></li>
</ul>

<h3 id="fORMFile-docs-ORMClasses">ORM Classes </h3>

<ul>
<li><a href="#fActiveRecord">fActiveRecord</a></li>
<li><a href="#fRecordSet">fRecordSet</a></li>
</ul>

<ul>
<li><a href="#fORM">fORM</a></li>
<li><a href="#fORMColumn">fORMColumn</a></li>
<li><a href="#fORMDatabase">fORMDatabase</a></li>
<li><a href="#fORMDate">fORMDate</a></li>
<li><strong>fORMFile</strong></li>
<li><a href="#fORMJSON">fORMJSON</a></li>
<li><a href="#fORMMoney">fORMMoney</a></li>
<li><a href="#fORMOrdering">fORMOrdering</a></li>
<li><a href="#fORMRelated">fORMRelated</a></li>
<li><a href="#fORMSchema">fORMSchema</a></li>
<li><a href="#fORMValidation">fORMValidation</a></li>
</ul>
</div>

<p>
The fORMFile class is an ORM plugin to provide file and file upload handling to <a href="#fActiveRecord">fActiveRecord</a> classes.
</p>

<h3 id="fORMFile-docs-FileUploadColumns">File Upload Columns</h3>

<p>
Any <code>varchar</code>, <code>char</code> or <code>text</code> field can be configured to act as a file upload column by calling the static method <a href="#fORMFile-api-configureFileUploadColumn"><code>configureFileUploadColumn()</code></a>. The method takes three parameters, the <code>$class</code>, the <code>$column</code> and the <code>$directory</code> to store file in. The <code>$directory</code> can be a string file path or an <a href="#fDirectory">fDirectory</a> object.
</p>
<pre class="block php"><code>class NewsArticle extends fActiveRecord
{
    protected function configure()
    {
        fORMFile::configureFileUploadColumn(
            $this,
            'attachment',
            '/path/to/attachment/upload/dir'
        );
    }
}</code></pre>

<p>
 Once a file has been configured as a file upload column, the <a href="#fActiveRecord-api-populate">fActiveRecord::populate()</a> method will automatically move any files uploaded in a field with the same name as the column. It is also possible to upload a file for the column separately by calling the <code>upload</code> method for a column.
</p>
<pre class="block php"><code>$user = new User();
if (fRequest::isPost()) {
    // Populate column values from the request and
    // upload files into file upload columns
    $user-&gt;populate();

    // Upload just the attachment
    $user-&gt;uploadAttachment();
}</code></pre>

<p>
 The <code>set</code> method for the column will also accept a file path or <a href="#fFile">fFile</a> object and make a copy of the file in the directory specified for the column. When a record is deleted, the file associated with it will be deleted from the directory.
</p>
<pre class="block php"><code>// This file will be copied into the directory defined
// in the fORMFile::configureFileUploadColumn() call
$user-&gt;setAttachment('/path/to/a/file.txt');</code></pre>

<p>
 The <code>get</code> method for a file upload column will return the <a href="#fFile">fFile</a> object of the file, while the <code>prepare</code> and <code>encode</code> methods will return just the filename. If the parameter <code>TRUE</code> is passed to the <code>prepare</code> method, the web server path to the file will be returnedsee <a href="#fFilesystem-api-addWebPathTranslation">fFilesystem::addWebPathTranslation()</a> for details about how filesystem paths are mapped to web server paths.
</p>
<pre class="block php"><code>// The get method will return an fFile or fImage object
switch ($user-&gt;getAttachment()-&gt;getMimeType()) {
    case 'image/png':
    // 
}

// This will output the filename safe for HTML
echo $user-&gt;encodeAttachment();

// This will return the web path to the file
echo $user-&gt;prepareAttachment(TRUE);</code></pre>

<h3 id="fORMFile-docs-HTMLFormSetup">HTML Form Setup</h3>

<p>
In order to upload a file through an HTML form the <code>enctype</code> attribute must be set to <code>multipart/form-data</code>. In order for an <a href="#fActiveRecord">fActiveRecord</a> class to properly detect a file and move it to the columns directory, the file upload input must have the same name as the column.
</p>

<p>
The fORMFile plugin provides functionality where an uploaded file can be remembered even if a validation error happens and a file can be deleted through the use of a checkbox. The existing file hidden input field should be named <code>existing-column_name</code> and the delete checkbox should be named <code>delete-column_name</code>. Since the delete field is a checkbox, it is recommended to put a hidden field right before it with a value of <code>0</code> to ensure the field is always submitted.
</p>
<pre class="block html"><code>&lt;form action=&quot;&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
    &lt;fieldset&gt;
        &lt;legend&gt;Add a News Article&lt;/legend&gt;
        ...
        &lt;p&gt;
            &lt;label for=&quot;news_article-attachment&quot;&gt;Attachment&lt;/label&gt;
            &lt;input id=&quot;news_article-attachment&quot; type=&quot;file&quot; name=&quot;attachment&quot; /&gt;
            &lt;?
            if ($news_article-&gt;getAttachment()) {
                ?&gt;
                &lt;input type=&quot;hidden&quot; name=&quot;existing-attachment&quot; value=&quot;&lt;?php echo $news_article-&gt;encodeAttachment() ?&gt;&quot; /&gt;
                &lt;input type=&quot;hidden&quot; name=&quot;delete-attachment&quot; value=&quot;0&quot; /&gt;
                Existing file: &lt;a href=&quot;&lt;?php echo $news_article-&gt;prepareAttachment(TRUE) ?&gt;&quot;&gt;&lt;?php echo $news_article-&gt;prepareAttachment() ?&gt;&lt;/a&gt;
                &lt;label for=&quot;news_article-delete-attachment&quot;&gt;Delete existing attachment&lt;/label&gt;
                &lt;input type=&quot;checkbox&quot; id=&quot;news_article-delete-attachment&quot; name=&quot;delete-attachment&quot; value=&quot;1&quot; /&gt;
                &lt;?
            }
            ?&gt;
        &lt;/p&gt;
        ...
    &lt;/fieldset&gt;
&lt;/form&gt;</code></pre>

<h3 id="fORMFile-docs-AddingfUploadOptions">Adding fUpload Options</h3>

<p>
Since the <a href="#fUpload">fUpload</a> class is used to move and validate files that are uploaded, it is possible to configure the fORMFile plugin to call methods on the <a href="#fUpload">fUpload</a> object used to move a file. The static method <a href="#fORMFile-api-addFUploadMethodCall"><code>addFUploadMethodCall()</code></a> requires four parameters, the <code>$class</code> being configured, the <code>$column</code> to apply the option to, the <code>$method</code> to call and an array of the <code>$parameters</code> to pass to the method.
</p>

<p>
Below is an example of restricting the file upload size using both client-side restrictions and server-side restrictions. The client-side <code>MAX_FILE_SIZE</code> input field prevents the browser from wasting time sending a file that is too large, while the server-side <code>setMaxSize()</code> will stop field that are too large and are sent by clients that dont send the <code>MAX_FILE_SIZE</code> field. <em>Please note that the <code>MAX_FILE_SIZE</code> must be less than both the <a class="ext-link" href="http://php.net/ini.core#ini.upload-max-filesize"><span class="icon">upload_max_filesize</span></a> and <a class="ext-link" href="http://php.net/ini.core#ini.post-max-size"><span class="icon">post_max_size</span></a> ini settings.</em>
</p>
<pre class="block php"><code>class NewsArticle extends fActiveRecord
{
    protected function configure()
    {
        fORMFile::configureFileUploadColumn($this, 'attachment', '/path/to/attachment/upload/dir');
        fORMFile::addFUploadMethodCall($this, 'attachment', 'setMaxSize', array('2mb'));
    }
}</code></pre>
<pre class="block html"><code>&lt;form action=&quot;&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
    &lt;fieldset&gt;
        &lt;legend&gt;Add a News Article&lt;/legend&gt;
        ...
        &lt;p&gt;
            &lt;input type=&quot;hidden&quot; name=&quot;MAX_FILE_SIZE&quot; value=&quot;2097152&quot; /&gt;
            &lt;label for=&quot;news_article-attachment&quot;&gt;Attachment&lt;/label&gt;
            &lt;input id=&quot;news_article-attachment&quot; type=&quot;file&quot; name=&quot;attachment&quot; /&gt;
            ...
        &lt;/p&gt;
        ...
    &lt;/fieldset&gt;
&lt;/form&gt;</code></pre>

<p>
 The only restriction for setting <a href="#fUpload">fUpload</a> method calls is that the method <a href="#fUpload-api-enableOverwrite">fUpload::enableOverwrite()</a> is not available since it could lead to two records referencing the same file, which creates issues when one record is deleted.
</p>

<h3 id="fORMFile-docs-ImageUploadColumns">Image Upload Columns</h3>

<p>
It is also possible to configure an image upload column, which allows for automatic image processing and automatic rejection of non-image files. The static method <a href="#fORMFile-api-configureImageUploadColumn"><code>configureImageUploadColumn()</code></a> accepts four parameters, the <code>$class</code> to configure, the <code>$column</code> to store the image name in, the <code>$directory</code> to store the files in.
</p>
<pre class="block php"><code>class NewsArticle extends fActiveRecord
{
    protected function configure()
    {
        fORMFile::configureImageUploadColumn($this, 'photo', '/path/to/photo/upload/dir');
    }
}</code></pre>

<p>
 Configuring an image upload column will restrict the uploaded files to the following mime types:
</p>

<ul>
<li><code>image/gif</code></li>
<li><code>image/jpeg</code></li>
<li><code>image/pjpeg</code></li>
<li><code>image/png</code></li>
</ul>

<p>
In addition to checking the mime type supplied by the browser, a server-side check is done to ensure the image type reported by the browser is correct.
</p>

<h3 id="fORMFile-docs-AddingfImageOperations">Adding fImage Operations</h3>

<p>
When working with an image upload column, it is possible to add any number of <a href="#fImage">fImage</a> operations to be executed on the image before it is saved in the upload directory. The static method <a href="#fORMFile-api-addFImageMethodCall"><code>addFImageMethodCall()</code></a> accepts four parameters, the <code>$class</code> being configured, the <code>$column</code> to add the call to, the <a href="#fImage">fImage</a> <code>$method</code> to call and the <code>$parameters</code> to pass to it. The operations will be executed in the order they are added.
</p>

<p>
The following configuration will cause the photo to be cropped and resized to 200x200 pixels.
</p>
<pre class="block php"><code>class NewsArticle extends fActiveRecord
{
    protected function configure()
    {
        fORMFile::configureImageUploadColumn($this, 'photo', '/path/to/photo/upload/dir');
        fORMFile::addFImageMethodCall($this, 'photo', 'cropToRatio', array(1, 1));
        fORMFile::addFImageMethodCall($this, 'photo', 'resize', array(200, 200));
    }
}</code></pre>

<p>
 When creating cropped versions of an image, placing the crop operation before the resize operation will almost always create the desired size, while placing them in the opposite order will often lead to images that are too small.
</p>

<p>
<a href="#fORMFile-api-addFImageMethodCall"><code>addFImageMethodCall()</code></a> can also be used to specify the file type, or specific parameters to using when saving the image. If no call to <a href="#fImage-api-saveChanges">fImage::saveChanges()</a> is added, it will be called implicitly with default parameters.
</p>

<p>
The following configuration will always save the image as a JPEG with a quality of <code>50</code>.
</p>
<pre class="block php"><code>class NewsArticle extends fActiveRecord
{
    protected function configure()
    {
        fORMFile::configureImageUploadColumn($this, 'photo', '/path/to/photo/upload/dir');
        fORMFile::addFImageMethodCall($this, 'photo', 'saveChanges', array('jpg', 50));
    }
}</code></pre>

<h3 id="fORMFile-docs-ColumnInheritance">Column Inheritance</h3>

<p>
When uploading images or photos for a site, it is often a requirement to create multiple sizes for display in different layouts. The static method <a href="#fORMFile-api-configureColumnInheritance"><code>configureColumnInheritance()</code></a> will allow a file to be uploaded to a single column, and will then duplicate the uploaded file into another column. All file duplication is done <em>before</em> any image operations are executed. If the column being duplicated into is an image upload column with <a href="#fImage">fImage</a> operations, those will be executed on the duplicated file.
</p>

<p>
<code>configureColumnInheritance()</code> accepts three parameters, the <code>$class</code> being configured, the <code>$column</code> to inherit the uploaded file, and the <code>$inherit_from_column</code> which will act as the source column. It is possible to set up multiple columns to inherit from a single master column.
</p>

<p>
The following example shows small and medium thumbnail columns both inheriting from the main photo column. The upload form for this record would only require that the user upload a single master photo.
</p>
<pre class="block php"><code>class NewsArticle extends fActiveRecord
{
    protected function configure()
    {
        fORMFile::configureImageUploadColumn($this, 'photo', '/path/to/photo/upload/dir', 'jpg');
        fORMFile::addFImageMethodCall($this, 'photo', 'resize', array(600, NULL));

        fORMFile::configureImageUploadColumn($this, 'photo_medium', '/path/to/photo_medium/upload/dir', 'jpg');
        fORMFile::addFImageMethodCall($this, 'photo_medium', 'resize', array(200, NULL));
        fORMFile::configureColumnInheritance($this, 'photo_medium', 'photo');
        
        fORMFile::configureImageUploadColumn($this, 'photo_small', '/path/to/photo_small/upload/dir', 'jpg');
        fORMFile::addFImageMethodCall($this, 'photo_small', 'resize', array(100, NULL));
        fORMFile::configureColumnInheritance($this, 'photo_small', 'photo');
    }
}</code></pre>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fORMFile-api">fORMFile API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fORMFile">Class Documentation</a></li>
		<li><strong><a href="#fORMFile-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="protected consts">
<h4><a href="#fORMFile-api-class_consts">Constants</a></h4>
<ul>
    <li class="protected"><a href="#fORMFile-api-TEMP_DIRECTORY">TEMP_DIRECTORY</a></li>
  </ul>
</div>
<div class="methods static">
<h4><a href="#fORMFile-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fORMFile-api-addFImageMethodCall">addFImageMethodCall()</a></li>
	  			<li><a href="#fORMFile-api-addFUploadMethodCall">addFUploadMethodCall()</a></li>
	  			<li class="protected"><a href="#fORMFile-api-begin">begin()</a></li>
	  			<li class="protected"><a href="#fORMFile-api-commit">commit()</a></li>
	  			<li><a href="#fORMFile-api-configureColumnInheritance">configureColumnInheritance()</a></li>
	  			<li><a href="#fORMFile-api-configureFileUploadColumn">configureFileUploadColumn()</a></li>
	  			<li><a href="#fORMFile-api-configureImageUploadColumn">configureImageUploadColumn()</a></li>
	  			<li class="protected"><a href="#fORMFile-api-delete">delete()</a></li>
	  			<li class="protected"><a href="#fORMFile-api-deleteOld">deleteOld()</a></li>
	  			<li class="protected"><a href="#fORMFile-api-encode">encode()</a></li>
	  			<li class="protected"><a href="#fORMFile-api-inspect">inspect()</a></li>
	  			<li class="protected"><a href="#fORMFile-api-moveFromTemp">moveFromTemp()</a></li>
	  			<li class="protected"><a href="#fORMFile-api-objectify">objectify()</a></li>
	  			<li class="protected"><a href="#fORMFile-api-populate">populate()</a></li>
	  			<li class="protected"><a href="#fORMFile-api-prepare">prepare()</a></li>
	  			<li class="protected"><a href="#fORMFile-api-process">process()</a></li>
	  			<li class="protected"><a href="#fORMFile-api-processImage">processImage()</a></li>
	  			<li class="protected"><a href="#fORMFile-api-reflect">reflect()</a></li>
	  			<li class="protected"><a href="#fORMFile-api-replicate">replicate()</a></li>
	  			<li class="protected"><a href="#fORMFile-api-reset">reset()</a></li>
	  			<li class="protected"><a href="#fORMFile-api-rollback">rollback()</a></li>
	  			<li class="protected"><a href="#fORMFile-api-set">set()</a></li>
	  			<li class="protected"><a href="#fORMFile-api-upload">upload()</a></li>
	  			<li class="protected"><a href="#fORMFile-api-validate">validate()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fDirectory">fDirectory</a></li>
		<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
		<li><a href="#fExpectedException">fExpectedException</a></li>
		<li><a href="#fFilesystem">fFilesystem</a></li>
		<li><a href="#fGrammar">fGrammar</a></li>
		<li><a href="#fHTML">fHTML</a></li>
		<li><a href="#fORM">fORM</a></li>
		<li><a href="#fORMSchema">fORMSchema</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fRequest">fRequest</a></li>
		<li><a href="#fUpload">fUpload</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b30</span></div>
<p class="short_description">Provides file manipulation functionality for <a href="#fActiveRecord">fActiveRecord</a> classes</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b30</th><td>Updated code for the new <a href="#fUpload">fUpload</a> API <span class="date">8/24/11</span></td></tr><tr><th>1.0.0b29</th><td>Fixed a bug when uploading a new file to a column with an existing file that was not found on the filesystem <span class="date">5/10/11</span></td></tr><tr><th>1.0.0b28</th><td>Backwards Compatibility Break - <a href="#fORMFile-api-configureImageUploadColumn"><tt>configureImageUploadColumn()</tt></a> no longer accepts the optional <tt>$image_type</tt> as the fourth parameter, instead <a href="#fORMFile-api-addFImageMethodCall"><tt>addFImageMethodCall()</tt></a> must be called with <tt>saveChanges</tt> as the <tt>$method</tt> and the image type as the first parameter <span class="date">11/30/10</span></td></tr><tr><th>1.0.0b27</th><td>Fixed column inheritance to properly handle non-images and inheriting into image upload columns <span class="date">9/18/10</span></td></tr><tr><th>1.0.0b26</th><td>Enhanced <a href="#fORMFile-api-configureColumnInheritance"><tt>configureColumnInheritance()</tt></a> to ensure both columns specified have been set up as file upload columns <span class="date">8/18/10</span></td></tr><tr><th>1.0.0b25</th><td>Updated code to work with the new <a href="#fORM">fORM</a> API <span class="date">8/6/10</span></td></tr><tr><th>1.0.0b24</th><td>Changed validation messages array to use column name keys <span class="date">5/26/10</span></td></tr><tr><th>1.0.0b23</th><td>Fixed a bug with <a href="#fORMFile-api-upload"><tt>upload()</tt></a> that could cause a method called on a non-object error in relation to the upload directory not being defined <span class="date">5/10/10</span></td></tr><tr><th>1.0.0b22</th><td>Updated the TEMP_DIRECTORY constant to not include the trailing slash, code now uses DIRECTORY_SEPARATOR to fix issues on Windows <span class="date">4/28/10</span></td></tr><tr><th>1.0.0b21</th><td>Fixed <a href="#fORMFile-api-set"><tt>set()</tt></a> to perform column inheritance, just like <a href="#fORMFile-api-upload"><tt>upload()</tt></a> does <span class="date">3/15/10</span></td></tr><tr><th>1.0.0b20</th><td>Fixed the <tt>set</tt> and <tt>process</tt> methods to return the record instance, changed <tt>upload</tt> methods to return the <a href="#fFile">fFile</a> object, updated <a href="#fORMFile-api-reflect"><tt>reflect()</tt></a> with new return values <span class="date">3/15/10</span></td></tr><tr><th>1.0.0b19</th><td>Fixed a few missed instances of old <a href="#fFile">fFile</a> method names <span class="date">12/16/09</span></td></tr><tr><th>1.0.0b18</th><td>Updated code for the new <a href="#fFile">fFile</a> API <span class="date">12/16/09</span></td></tr><tr><th>1.0.0b17</th><td>Updated code for the new <a href="#fORMDatabase">fORMDatabase</a> and <a href="#fORMSchema">fORMSchema</a> APIs <span class="date">10/28/09</span></td></tr><tr><th>1.0.0b16</th><td><a href="#fImage">fImage</a> method calls for file upload columns will no longer cause notices due to a missing image type <span class="date">9/9/09</span></td></tr><tr><th>1.0.0b15</th><td><a href="#fORMFile-api-addFImageMethodCall"><tt>addFImageMethodCall()</tt></a> no longer requires column be an image upload column, inheritance to an image column now only happens for <a href="#fImage">fImage</a> objects <span class="date">7/29/09</span></td></tr><tr><th>1.0.0b14</th><td>Updated to use new <a href="#fORM-api-registerInspectCallback"><tt>fORM::registerInspectCallback()</tt></a> method <span class="date">7/13/09</span></td></tr><tr><th>1.0.0b13</th><td>Updated code for new <a href="#fORM">fORM</a> API <span class="date">6/15/09</span></td></tr><tr><th>1.0.0b12</th><td>Changed replacement values in preg_replace() calls to be properly escaped <span class="date">6/11/09</span></td></tr><tr><th>1.0.0b11</th><td>Updated code to use new <a href="#fValidationException-api-formatField"><tt>fValidationException::formatField()</tt></a> method <span class="date">6/4/09</span></td></tr><tr><th>1.0.0b10</th><td>Fixed a bug where an inherited file upload column would not be properly re-set with an <tt>existing-</tt> input <span class="date">5/26/09</span></td></tr><tr><th>1.0.0b9</th><td><a href="#fORMFile-api-upload"><tt>upload()</tt></a> and <a href="#fORMFile-api-set"><tt>set()</tt></a> now set the <tt>$values</tt> entry to <tt>NULL</tt> for filenames that are empty <span class="date">3/2/09</span></td></tr><tr><th>1.0.0b8</th><td>Changed <a href="#fORMFile-api-set"><tt>set()</tt></a> to accept objects and reject directories <span class="date">1/21/09</span></td></tr><tr><th>1.0.0b7</th><td>Changed the class to use the new <a href="#fFilesystem-api-createObject"><tt>fFilesystem::createObject()</tt></a> method <span class="date">1/21/09</span></td></tr><tr><th>1.0.0b6</th><td>Old files are now checked against the current file to prevent removal of an in-use file <span class="date">12/23/08</span></td></tr><tr><th>1.0.0b5</th><td>Fixed <a href="#fORMFile-api-replicate"><tt>replicate()</tt></a> to ensure the temp directory exists and <a href="#fORMFile-api-set"><tt>set()</tt></a> to use the temp directory <span class="date">12/23/08</span></td></tr><tr><th>1.0.0b4</th><td><a href="#fORMFile-api-objectify"><tt>objectify()</tt></a> no longer throws an exception when a file can't be found <span class="date">12/18/08</span></td></tr><tr><th>1.0.0b3</th><td>Added <a href="#fORMFile-api-replicate"><tt>replicate()</tt></a> so that replicated files get pu in the temp directory <span class="date">12/12/08</span></td></tr><tr><th>1.0.0b2</th><td>Fixed a bug with objectifying file columns <span class="date">11/24/08</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">5/28/08</span></td></tr></table></div>
<div class="class_consts" id="fORMFile-api-class_consts">
<h4>Constants</h4>
  <!-- start protected constant -->
<h5 id="fORMFile-api-TEMP_DIRECTORY" class="protected constant"><span class="resolution">::</span><span class="name">TEMP_DIRECTORY</span> <span class="visibility">internal</span></h5>
<div class="protected constant">
		<div class="internal_notice">
		<p>
			<em>Please note: this constant is primarily intended for internal 
			use by Flourish and will normally not be useful in site/application
			code</em>
		</p>
	</div>
			<div class="constant_description">
					<p>The temporary directory to use for various tasks</p>
		</div>
</div>
<!-- end constant -->
</div>
<div class="class_methods static" id="fORMFile-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fORMFile-api-addFImageMethodCall" class="method static"><span class="resolution">::</span><span class="name">addFImageMethodCall()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Adds an <a href="#fImage">fImage</a> method call to the image manipulation for a column if an image file is uploaded</p>
								<p>Any call to <a href="#fImage-api-saveChanges"><tt>fImage::saveChanges()</tt></a> will be called last. If no explicit  method call to <a href="#fImage-api-saveChanges"><tt>fImage::saveChanges()</tt></a> is made, it will be called  implicitly with default parameters.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">addFImageMethodCall</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span><span class="php-code">=</span>array() <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to call the method for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The <a href="#fImage">fImage</a> method to call</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters to pass to the method</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMFile-api-addFUploadMethodCall" class="method static"><span class="resolution">::</span><span class="name">addFUploadMethodCall()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Adds an <a href="#fUpload">fUpload</a> method call to the <a href="#fUpload">fUpload</a> initialization for a column</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">addFUploadMethodCall</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span><span class="php-code">=</span>array() <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to call the method for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The <a href="#fUpload">fUpload</a> method to call</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters to pass to the method</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMFile-api-begin" class="protected method static"><span class="resolution">::</span><span class="name">begin()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Begins a transaction, or increases the level</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">begin</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMFile-api-commit" class="protected method static"><span class="resolution">::</span><span class="name">commit()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Commits a transaction, or decreases the level</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">commit</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMFile-api-configureColumnInheritance" class="method static"><span class="resolution">::</span><span class="name">configureColumnInheritance()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Takes one file or image upload columns and sets it to inherit any uploaded/set files from another column</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">configureColumnInheritance</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$inherit_from_column</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column that will inherit the uploaded file</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$inherit_from_column</td>
				<td class="param_description">The column to inherit the uploaded file from</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMFile-api-configureFileUploadColumn" class="method static"><span class="resolution">::</span><span class="name">configureFileUploadColumn()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets a column to be a file upload column</p>
								<p>Configuring a column to be a file upload column means that whenever  <a href="#fActiveRecord-api-populate"><tt>fActiveRecord::populate()</tt></a> is called for an <a href="#fActiveRecord">fActiveRecord</a> object, any  appropriately named file uploads (via <tt>$_FILES</tt>) will be moved into  the directory for this column.</p><p>Setting the column to a file path will cause the specified file to  be copied into the directory for this column.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">configureFileUploadColumn</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype"><a href="#fDirectory">fDirectory</a>|string</span> <span class="php-var">$directory</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to set as a file upload column</td>
			  </tr>
						  <tr>
				<td class="param_data_type"><a href="#fDirectory">fDirectory</a>|string</td>
				<td class="param_name">$directory</td>
				<td class="param_description">The directory to upload/move to</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMFile-api-configureImageUploadColumn" class="method static"><span class="resolution">::</span><span class="name">configureImageUploadColumn()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets a column to be an image upload column</p>
								<p>This method works exactly the same as <a href="#fORMFile-api-configureFileUploadColumn"><tt>configureFileUploadColumn()</tt></a>  except that only image files are accepted.</p><p>To alter an image, including the file type, use <a href="#fORMFile-api-addFImageMethodCall"><tt>addFImageMethodCall()</tt></a>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">configureImageUploadColumn</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype"><a href="#fDirectory">fDirectory</a>|string</span> <span class="php-var">$directory</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to set as a file upload column</td>
			  </tr>
						  <tr>
				<td class="param_data_type"><a href="#fDirectory">fDirectory</a>|string</td>
				<td class="param_name">$directory</td>
				<td class="param_description">The directory to upload to</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMFile-api-delete" class="protected method static"><span class="resolution">::</span><span class="name">delete()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Deletes the files for this record</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">delete</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMFile-api-deleteOld" class="protected method static"><span class="resolution">::</span><span class="name">deleteOld()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Deletes old files for this record that have been replaced by new ones</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">deleteOld</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMFile-api-encode" class="protected method static"><span class="resolution">::</span><span class="name">encode()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Encodes a file for output into an HTML <tt>input</tt> tag</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">encode</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method_name</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method_name</td>
				<td class="param_description">The method that was called</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters passed to the method</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMFile-api-inspect" class="protected method static"><span class="resolution">::</span><span class="name">inspect()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Adds metadata about features added by this class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">inspect</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$metadata</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class being inspected</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column being inspected</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$metadata</td>
				<td class="param_description">The array of metadata about a column</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMFile-api-moveFromTemp" class="protected method static"><span class="resolution">::</span><span class="name">moveFromTemp()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Moves uploaded files from the temporary directory to the permanent directory</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">moveFromTemp</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMFile-api-objectify" class="protected method static"><span class="resolution">::</span><span class="name">objectify()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Turns a filename into an <a href="#fFile">fFile</a> or <a href="#fImage">fImage</a> object</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">objectify</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class this value is for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column the value is in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The <a href="#fFile">fFile</a>, <a href="#fImage">fImage</a> or raw value
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMFile-api-populate" class="protected method static"><span class="resolution">::</span><span class="name">populate()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Performs the upload action for file uploads during <a href="#fActiveRecord-api-populate"><tt>fActiveRecord::populate()</tt></a></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">populate</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMFile-api-prepare" class="protected method static"><span class="resolution">::</span><span class="name">prepare()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Prepares a file for output into HTML by returning filename or the web server path to the file</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">prepare</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method_name</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method_name</td>
				<td class="param_description">The method that was called</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters passed to the method</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMFile-api-process" class="protected method static"><span class="resolution">::</span><span class="name">process()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Handles re-processing an existing image file</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-identifier">process</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method_name</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method_name</td>
				<td class="param_description">The method that was called</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters passed to the method</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The record object, to allow for method chaining
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMFile-api-processImage" class="protected method static"><span class="resolution">::</span><span class="name">processImage()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Performs image manipulation on an uploaded/set image</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">processImage</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype"><a href="#fFile">fFile</a></span> <span class="php-var">$image</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The name of the class we are manipulating the image for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column the image is assigned to</td>
			  </tr>
						  <tr>
				<td class="param_data_type"><a href="#fFile">fFile</a></td>
				<td class="param_name">$image</td>
				<td class="param_description">The image object to manipulate</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMFile-api-reflect" class="protected method static"><span class="resolution">::</span><span class="name">reflect()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Adjusts the <a href="#fActiveRecord-api-reflect"><tt>fActiveRecord::reflect()</tt></a> signatures of columns that have been configured in this class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reflect</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$signatures</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$include_doc_comments</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to reflect</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$signatures</td>
				<td class="param_description">The associative array of <tt>{method name} =&gt; {signature}</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$include_doc_comments</td>
				<td class="param_description">If doc comments should be included with the signature</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMFile-api-replicate" class="protected method static"><span class="resolution">::</span><span class="name">replicate()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Creates a copy of an uploaded file in the temp directory for the newly cloned record</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">replicate</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class this value is for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column the value is in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The cloned <a href="#fFile">fFile</a> object
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMFile-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMFile-api-rollback" class="protected method static"><span class="resolution">::</span><span class="name">rollback()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Rolls back a transaction, or decreases the level</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">rollback</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMFile-api-set" class="protected method static"><span class="resolution">::</span><span class="name">set()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Copies a file from the filesystem to the file upload directory and sets it as the file for the specified column</p>
								<p>This method will perform the <a href="#fImage">fImage</a> calls defined for the column.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-identifier">set</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method_name</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method_name</td>
				<td class="param_description">The method that was called</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters passed to the method</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The record object, to allow for method chaining
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMFile-api-upload" class="protected method static"><span class="resolution">::</span><span class="name">upload()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Uploads a file</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fFile">fFile</a></span> <span class="php-identifier">upload</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method_name</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method_name</td>
				<td class="param_description">The method that was called</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters passed to the method</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The uploaded file
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMFile-api-validate" class="protected method static"><span class="resolution">::</span><span class="name">validate()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Validates uploaded files to ensure they match all of the criteria defined</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">validate</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$validation_messages</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$validation_messages</td>
				<td class="param_description">The existing validation messages</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fORMJSON">fORMJSON</h2>
<div class="sidebar">
<h3 id="fORMJSON-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fORMJSON">Class Documentation</a></strong></li>
<li><a href="#fORMJSON-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fORMJSON-docs-Enabling">Enabling</a></li>
<li><a href="#fORMJSON-docs-Usage">Usage</a></li>
</ul>

<h3 id="fORMJSON-docs-ORMClasses">ORM Classes </h3>

<ul>
<li><a href="#fActiveRecord">fActiveRecord</a></li>
<li><a href="#fRecordSet">fRecordSet</a></li>
</ul>

<ul>
<li><a href="#fORM">fORM</a></li>
<li><a href="#fORMColumn">fORMColumn</a></li>
<li><a href="#fORMDatabase">fORMDatabase</a></li>
<li><a href="#fORMDate">fORMDate</a></li>
<li><a href="#fORMFile">fORMFile</a></li>
<li><strong>fORMJSON</strong></li>
<li><a href="#fORMMoney">fORMMoney</a></li>
<li><a href="#fORMOrdering">fORMOrdering</a></li>
<li><a href="#fORMRelated">fORMRelated</a></li>
<li><a href="#fORMSchema">fORMSchema</a></li>
<li><a href="#fORMValidation">fORMValidation</a></li>
</ul>
</div>

<p>
The fORMJSON class is an ORM plugin to provide JSON encoding functionality to <a href="#fActiveRecord">fActiveRecord</a> and <a href="#fRecordSet">fRecordSet</a> objects.
</p>

<h3 id="fORMJSON-docs-Enabling">Enabling</h3>

<p>
To add the JSON encoding functionality for whole records and record sets, simply call the static method <a href="#fORMJSON-api-extend"><code>extend()</code></a>.
</p>
<pre class="block php"><code>fORMJSON::extend();</code></pre>

<h3 id="fORMJSON-docs-Usage">Usage</h3>

<p>
The fORMJSON class adds a <code>toJSON()</code> method to both <a href="#fActiveRecord">fActiveRecord</a> and <a href="#fRecordSet">fRecordSet</a>. Calling <code>toJSON()</code> on a record will create a single JSON object with each column being the property name and the value being the value. Calling <code>toJSON()</code> on a record set will create an array of the record JSON objects.
</p>
<pre class="block php"><code>$user = new User(3);
echo $user-&gt;toJSON();

$users = fRecordSet::build('User');
echo $users-&gt;toJSON();</code></pre>

<p>
 When outputting JSON to a browser, it is best practice to include the appropriate <code>Content-Type</code> header by calling <a href="#fJSON-api-sendHeader">fJSON::sendHeader()</a>.
</p>
<pre class="block php"><code>fJSON::sendHeader();
$user = new User(3);
echo $user-&gt;toJSON();</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fORMJSON-api">fORMJSON API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fORMJSON">Class Documentation</a></li>
		<li><strong><a href="#fORMJSON-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fORMJSON-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fORMJSON-api-extend">extend()</a></li>
	  			<li class="protected"><a href="#fORMJSON-api-reflect">reflect()</a></li>
	  			<li class="protected"><a href="#fORMJSON-api-toJSON">toJSON()</a></li>
	  			<li class="protected"><a href="#fORMJSON-api-toJSONRecordSet">toJSONRecordSet()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fJSON">fJSON</a></li>
		<li><a href="#fORM">fORM</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b3</span></div>
<p class="short_description">Adds JSON functionality to <a href="#fActiveRecord">fActiveRecord</a> and <a href="#fRecordSet">fRecordSet</a></p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b3</th><td>Removed the <tt>$pointer</tt> parameter from <a href="#fORMJSON-api-toJSONRecordSet"><tt>toJSONRecordSet()</tt></a> since <a href="#fRecordSet">fRecordSet</a> no longer has a pointer <span class="date">9/28/10</span></td></tr><tr><th>1.0.0b2</th><td>Updated the code to remove the <tt>$associate</tt> parameter for the record set method callback <span class="date">6/2/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/25/08</span></td></tr></table></div>
<div class="class_methods static" id="fORMJSON-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fORMJSON-api-extend" class="method static"><span class="resolution">::</span><span class="name">extend()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Adds the method <tt>toJSON()</tt> to <a href="#fActiveRecord">fActiveRecord</a> and <a href="#fRecordSet">fRecordSet</a> instances</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">extend</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMJSON-api-reflect" class="protected method static"><span class="resolution">::</span><span class="name">reflect()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Adjusts the <a href="#fActiveRecord-api-reflect"><tt>fActiveRecord::reflect()</tt></a> signatures of columns that have been added by this class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reflect</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$signatures</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$include_doc_comments</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to reflect</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$signatures</td>
				<td class="param_description">The associative array of <tt>{method name} =&gt; {signature}</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$include_doc_comments</td>
				<td class="param_description">If doc comments should be included with the signature</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMJSON-api-toJSON" class="protected method static"><span class="resolution">::</span><span class="name">toJSON()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns a JSON object representation of the record</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">toJSON</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method_name</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method_name</td>
				<td class="param_description">The method that was called</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters passed to the method</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The JSON object that represents the values of this record
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMJSON-api-toJSONRecordSet" class="protected method static"><span class="resolution">::</span><span class="name">toJSONRecordSet()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns a JSON object representation of a record set</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">toJSONRecordSet</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fRecordSet">fRecordSet</a></span> <span class="php-var">$record_set</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$records</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fRecordSet">fRecordSet</a></td>
				<td class="param_name">$record_set</td>
				<td class="param_description">The <a href="#fRecordSet">fRecordSet</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class of the records</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$records</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> objects</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The JSON object that represents an array of all of the <a href="#fActiveRecord">fActiveRecord</a> objects
				</p>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fORMMoney">fORMMoney</h2>
<div class="sidebar">
<h3 id="fORMMoney-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fORMMoney">Class Documentation</a></strong></li>
<li><a href="#fORMMoney-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fORMMoney-docs-MoneyColumns">Money Columns</a></li>
</ul>

<h3 id="fORMMoney-docs-ORMClasses">ORM Classes </h3>

<ul>
<li><a href="#fActiveRecord">fActiveRecord</a></li>
<li><a href="#fRecordSet">fRecordSet</a></li>
</ul>

<ul>
<li><a href="#fORM">fORM</a></li>
<li><a href="#fORMColumn">fORMColumn</a></li>
<li><a href="#fORMDatabase">fORMDatabase</a></li>
<li><a href="#fORMDate">fORMDate</a></li>
<li><a href="#fORMFile">fORMFile</a></li>
<li><a href="#fORMJSON">fORMJSON</a></li>
<li><strong>fORMMoney</strong></li>
<li><a href="#fORMOrdering">fORMOrdering</a></li>
<li><a href="#fORMRelated">fORMRelated</a></li>
<li><a href="#fORMSchema">fORMSchema</a></li>
<li><a href="#fORMValidation">fORMValidation</a></li>
</ul>
</div>

<p>
The fORMMoney class is an ORM plugin to provide functionality to treat columns as monetary values.
</p>

<h3 id="fORMMoney-docs-MoneyColumns">Money Columns</h3>

<p>
When dealing with monetary values, it is usually very important that the values stored and calculated are accurate. The <a href="#fMoney">fMoney</a> class provides this sort of accuracy and the fORMMoney class allows a column to be configured so that values coming out of the database are automatically converted to <a href="#fMoney">fMoney</a> object. The static method <a href="#fORMMoney-api-configureMoneyColumn"><code>configureMoneyColumn()</code></a> accepts three parameters, the <code>$class</code> being configured, the <code>$column</code> to set as a money column, and <em>optionally</em> a <code>$currency_column</code> to store the currency of the monetary value in.
</p>

<p>
When configuring a money column <em>without</em> a corresponding currency column, a default currency must be set via <a href="#fMoney-api-setDefaultCurrency">fMoney::setDefaultCurrency()</a>. All <a href="#fMoney">fMoney</a> objects created will use this default currency. If an <a href="#fMoney">fMoney</a> object is set to the value of the money column, and it contains a different currency than the default and no currency column is set, the currency will be lost when the record is saved in the database.
</p>
<pre class="block php"><code>class Order extends fActiveRecord
{
    protected function configure()
    {
        fORMMoney::configureMoneyColumn($this, 'total');
    }
}</code></pre>

<p>
 When calling the <code>get</code> method for a money column, an <a href="#fMoney">fMoney</a> object should be expected whenever a record has been freshly loaded from the databaseit is possible that if a value has been set that it is not a valid money value, and thus will not be an <a href="#fMoney">fMoney</a> object. The <code>prepare</code> method for a money column will call the <a href="#fMoney-api-format">fMoney::format()</a> method on the <a href="#fMoney">fMoney</a> object, while the <code>encode</code> method will return the output of <a href="#fMoney-api-__toString">fMoney::__toString()</a>.
</p>

<p>
If a currency column is set for the money column, the currency contained in the <a href="#fMoney">fMoney</a> object will be stored in that column when the record is saved to the database. If the <code>set</code> method is called on the money column with a non-<a href="#fMoney">fMoney</a> object, a new <a href="#fMoney">fMoney</a> object will be created with the currency currently stored in the currency column. If the <code>set</code> method is called on the currency column, a new <a href="#fMoney">fMoney</a> object will be created with that currency and the current money amount. Setting an <a href="#fMoney">fMoney</a> object to the money column will cause the currency column to be updated to the currency of the object.
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fORMMoney-api">fORMMoney API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fORMMoney">Class Documentation</a></li>
		<li><strong><a href="#fORMMoney-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fORMMoney-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fORMMoney-api-configureMoneyColumn">configureMoneyColumn()</a></li>
	  			<li class="protected"><a href="#fORMMoney-api-encodeMoneyColumn">encodeMoneyColumn()</a></li>
	  			<li class="protected"><a href="#fORMMoney-api-inspect">inspect()</a></li>
	  			<li class="protected"><a href="#fORMMoney-api-makeMoneyObjects">makeMoneyObjects()</a></li>
	  			<li class="protected"><a href="#fORMMoney-api-objectifyMoney">objectifyMoney()</a></li>
	  			<li class="protected"><a href="#fORMMoney-api-objectifyMoneyWithCurrency">objectifyMoneyWithCurrency()</a></li>
	  			<li class="protected"><a href="#fORMMoney-api-prepareMoneyColumn">prepareMoneyColumn()</a></li>
	  			<li class="protected"><a href="#fORMMoney-api-reflect">reflect()</a></li>
	  			<li class="protected"><a href="#fORMMoney-api-reset">reset()</a></li>
	  			<li class="protected"><a href="#fORMMoney-api-setCurrencyColumn">setCurrencyColumn()</a></li>
	  			<li class="protected"><a href="#fORMMoney-api-setMoneyColumn">setMoneyColumn()</a></li>
	  			<li class="protected"><a href="#fORMMoney-api-validateMoneyColumns">validateMoneyColumns()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fGrammar">fGrammar</a></li>
		<li><a href="#fHTML">fHTML</a></li>
		<li><a href="#fMoney">fMoney</a></li>
		<li><a href="#fORM">fORM</a></li>
		<li><a href="#fORMSchema">fORMSchema</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b11</span></div>
<p class="short_description">Provides money functionality for <a href="#fActiveRecord">fActiveRecord</a> classes</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b11</th><td>Fixed the generation of validation messages when a non-monetary value is supplied <span class="date">5/17/11</span></td></tr><tr><th>1.0.0b10</th><td>Updated code to work with the new <a href="#fORM">fORM</a> API <span class="date">8/6/10</span></td></tr><tr><th>1.0.0b9</th><td>Added the <tt>$remove_zero_fraction</tt> parameter to prepare methods <span class="date">6/9/10</span></td></tr><tr><th>1.0.0b8</th><td>Changed validation messages array to use column name keys <span class="date">5/26/10</span></td></tr><tr><th>1.0.0b7</th><td>Fixed the <tt>set</tt> methods to return the record object in order to be consistent with all other <tt>set</tt> methods <span class="date">3/15/10</span></td></tr><tr><th>1.0.0b6</th><td>Fixed duplicate validation messages and <a href="#fProgrammerException">fProgrammerException</a> object being thrown when NULL is set <span class="date">3/3/10</span></td></tr><tr><th>1.0.0b5</th><td>Updated code for the new <a href="#fORMDatabase">fORMDatabase</a> and <a href="#fORMSchema">fORMSchema</a> APIs <span class="date">10/28/09</span></td></tr><tr><th>1.0.0b4</th><td>Updated to use new <a href="#fORM-api-registerInspectCallback"><tt>fORM::registerInspectCallback()</tt></a> method <span class="date">7/13/09</span></td></tr><tr><th>1.0.0b3</th><td>Updated code to use new <a href="#fValidationException-api-formatField"><tt>fValidationException::formatField()</tt></a> method <span class="date">6/4/09</span></td></tr><tr><th>1.0.0b2</th><td>Fixed bugs with objectifying money columns <span class="date">11/24/08</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">9/5/08</span></td></tr></table></div>
<div class="class_methods static" id="fORMMoney-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fORMMoney-api-configureMoneyColumn" class="method static"><span class="resolution">::</span><span class="name">configureMoneyColumn()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets a column to be formatted as an <a href="#fMoney">fMoney</a> object</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">configureMoneyColumn</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$currency_column</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class to set the column format</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to format as an <a href="#fMoney">fMoney</a> object</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$currency_column</td>
				<td class="param_description">If specified, this column will store the currency of the <a href="#fMoney">fMoney</a> object</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMMoney-api-encodeMoneyColumn" class="protected method static"><span class="resolution">::</span><span class="name">encodeMoneyColumn()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Encodes a money column by calling <a href="#fMoney-api-__toString"><tt>fMoney::__toString()</tt></a></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">encodeMoneyColumn</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method_name</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method_name</td>
				<td class="param_description">The method that was called</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters passed to the method</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The encoded monetary value
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMMoney-api-inspect" class="protected method static"><span class="resolution">::</span><span class="name">inspect()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Adds metadata about features added by this class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">inspect</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$metadata</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class being inspected</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column being inspected</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$metadata</td>
				<td class="param_description">The array of metadata about a column</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMMoney-api-makeMoneyObjects" class="protected method static"><span class="resolution">::</span><span class="name">makeMoneyObjects()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Makes <a href="#fMoney">fMoney</a> objects for all money columns in the object that also have a currency column</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">makeMoneyObjects</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMMoney-api-objectifyMoney" class="protected method static"><span class="resolution">::</span><span class="name">objectifyMoney()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Turns a monetary value into an <a href="#fMoney">fMoney</a> object</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">objectifyMoney</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class this value is for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column the value is in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The <a href="#fMoney">fMoney</a> object or raw value
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMMoney-api-objectifyMoneyWithCurrency" class="protected method static"><span class="resolution">::</span><span class="name">objectifyMoneyWithCurrency()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Turns a monetary value into an <a href="#fMoney">fMoney</a> object with a currency specified by another column</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">objectifyMoneyWithCurrency</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$value_column</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$currency_column</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$value_column</td>
				<td class="param_description">The column holding the value</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$currency_column</td>
				<td class="param_description">The column holding the currency code</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMMoney-api-prepareMoneyColumn" class="protected method static"><span class="resolution">::</span><span class="name">prepareMoneyColumn()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Prepares a money column by calling <a href="#fMoney-api-format"><tt>fMoney::format()</tt></a></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">prepareMoneyColumn</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method_name</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method_name</td>
				<td class="param_description">The method that was called</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters passed to the method</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The formatted monetary value
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMMoney-api-reflect" class="protected method static"><span class="resolution">::</span><span class="name">reflect()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Adjusts the <a href="#fActiveRecord-api-reflect"><tt>fActiveRecord::reflect()</tt></a> signatures of columns that have been configured in this class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reflect</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$signatures</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$include_doc_comments</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to reflect</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$signatures</td>
				<td class="param_description">The associative array of <tt>{method name} =&gt; {signature}</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$include_doc_comments</td>
				<td class="param_description">If doc comments should be included with the signature</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMMoney-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMMoney-api-setCurrencyColumn" class="protected method static"><span class="resolution">::</span><span class="name">setCurrencyColumn()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets the currency column and then tries to objectify the related money column</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-identifier">setCurrencyColumn</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method_name</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method_name</td>
				<td class="param_description">The method that was called</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters passed to the method</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The record object, to allow for method chaining
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMMoney-api-setMoneyColumn" class="protected method static"><span class="resolution">::</span><span class="name">setMoneyColumn()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets the money column and then tries to objectify it with an related currency column</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-identifier">setMoneyColumn</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method_name</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method_name</td>
				<td class="param_description">The method that was called</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters passed to the method</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The record object, to allow for method chaining
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMMoney-api-validateMoneyColumns" class="protected method static"><span class="resolution">::</span><span class="name">validateMoneyColumns()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Validates all money columns</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">validateMoneyColumns</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$validation_messages</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$validation_messages</td>
				<td class="param_description">An array of ordered validation messages</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fORMOrdering">fORMOrdering</h2>
<div class="sidebar">
<h3 id="fORMOrdering-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fORMOrdering">Class Documentation</a></strong></li>
<li><a href="#fORMOrdering-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fORMOrdering-docs-BasicOrderingSingle-Column">Basic Ordering (Single-Column)</a></li>
<li><a href="#fORMOrdering-docs-AdvancedOrderingMulti-Column">Advanced Ordering (Multi-Column)</a></li>
</ul>

<h3 id="fORMOrdering-docs-ORMClasses">ORM Classes </h3>

<ul>
<li><a href="#fActiveRecord">fActiveRecord</a></li>
<li><a href="#fRecordSet">fRecordSet</a></li>
</ul>

<ul>
<li><a href="#fORM">fORM</a></li>
<li><a href="#fORMColumn">fORMColumn</a></li>
<li><a href="#fORMDatabase">fORMDatabase</a></li>
<li><a href="#fORMDate">fORMDate</a></li>
<li><a href="#fORMFile">fORMFile</a></li>
<li><a href="#fORMJSON">fORMJSON</a></li>
<li><a href="#fORMMoney">fORMMoney</a></li>
<li><strong>fORMOrdering</strong></li>
<li><a href="#fORMRelated">fORMRelated</a></li>
<li><a href="#fORMSchema">fORMSchema</a></li>
<li><a href="#fORMValidation">fORMValidation</a></li>
</ul>
</div>

<p>
The fORMOrdering class is an ORM plugin to provide record ordering functionality for <a href="#fActiveRecord">fActiveRecord</a> classes.
</p>

<p>
An ordering column is used to provide arbitrary ordering for <a href="#fActiveRecord">fActiveRecord</a> objects. For a column to be an ordering column, it must be an integer column that allows for negative numbers and is part of a <code>UNIQUE</code> constraint. While an ordering value will never be negative, negative integers are used in the process of re-arranging values.
</p>

<p>
If the column is the only column in the <code>UNIQUE</code> constraint, all records in the table will be part of one ordered set. If the column is part of a multi-column <code>UNIQUE</code> constraint, all records that have the same values for each column <em>other</em> than the ordering will be part of an ordered set.
</p>

<h3 id="fORMOrdering-docs-BasicOrderingSingle-Column">Basic Ordering (Single-Column)</h3>

<p>
To configure a column to be treated as an ordering column, the static method <a href="#fORMOrdering-api-configureOrderingColumn"><code>configureOrderingColumn()</code></a> must be called with the <code>$class</code> to configure and the <code>$column</code> to set as an ordering column.
</p>
<pre class="block php"><code>class Photo extends fActiveRecord
{
    protected function configure()
    {
        fORMOrdering::configureOrderingColumn($this, 'display_order');
    ]
}</code></pre>

<p>
 Once a column has been set to be an ordering column, any new records inserted into the set will be automatically added at the end, unless a specific value is set for the ordering column.
</p>
<pre class="block php"><code>// Assuming there are no other photos, this photo would become #1
$photo = new Photo();
$photo-&gt;store();

// This photo would be come number 2
$photo2 = new Photo();
$photo2-&gt;store();</code></pre>

<p>
 Whenever the value for the ordering column is changed, the records around it will be adjusted so there is always a continuous sequence of order numbers. 
</p>
<pre class="block php"><code>// This photo would become number 2 and $photo2 would change to number 3
$photo3 = new Photo();
$photo3-&gt;setDisplayOrder(2);
$photo3-&gt;store();</code></pre>

<h3 id="fORMOrdering-docs-AdvancedOrderingMulti-Column">Advanced Ordering (Multi-Column)</h3>

<p>
Below is an example of a multi-column <code>UNIQUE</code> constraint and the dynamics related to it. Each photo is part of a photo gallery, thus it is desired to have a separate ordering for each gallery. Flourish will automatically detect that the <code>display_order</code> column is in a <code>UNIQUE</code> constraint with <code>photo_gallery_id</code> and will order each photo gallery separately.
</p>
<pre class="block sql"><code>CREATE TABLE photo_galleries (
    name VARCHAR(200) PRIMARY KEY
);

CREATE TABLE photos (
    photo_id SERIAL PRIMARY KEY,
    photo VARCHAR(255) NOT NULL,
    caption VARCHAR(255) NOT NULL DEFAULT '',
    display_order INTEGER NOT NULL,
    photo_gallery VARCHAR(200) NOT NULL REFERENCES photo_galleries(name) ON DELETE CASCADE ON UPDATE CASCADE,
    UNIQUE(photo_gallery_id, display_order)
);</code></pre>
<pre class="block php"><code>class Photo extends fActiveRecord
{
    protected function configure()
    {
        fORMOrdering::configureOrderingColumn($this, 'display_order');
    ]
}</code></pre>

<p>
 The following example shows how photos will be ordered in their respective galleries.
</p>
<pre class="block php"><code>// Create the galleries to use
$photo_gallery = new PhotoGallery();
$photo_gallery-&gt;setName('Gallery 1');
$photo_gallery-&gt;store();

$photo_gallery2 = new PhotoGallery();
$photo_gallery2-&gt;setName('Gallery 2');
$photo_gallery2-&gt;store();

// This photo will have its display order set to 1
$photo = new Photo();
$photo-&gt;setPhotoGallery('Gallery 1');
$photo-&gt;setPhoto($photo_path);
$photo-&gt;store();

// This photo will have its display order set to 1 also, but as part of Gallery 2
$photo2 = new Photo();
$photo2-&gt;setPhotoGallery('Gallery 2');
$photo2-&gt;setPhoto($photo_path);
$photo2-&gt;store();

// This photo will have its display order set to 2
$photo3 = new Photo();
$photo3-&gt;setPhotoGallery('Gallery 1');
$photo3-&gt;setPhoto($photo_path);
$photo3-&gt;store();</code></pre>

<p>
 If the gallery was changed for <code>$photo</code> to <code>Gallery 2</code>, it would be moved out of the display order of <code>Gallery 1</code> and added to the end of the display order for <code>Gallery 2</code>.
</p>
<pre class="block php"><code>$photo-&gt;setPhotoGallery('Gallery 2');
$photo-&gt;store();

// This would output 2 since it was added at the end of Gallery 2
echo $photo-&gt;getDisplayOrder();</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fORMOrdering-api">fORMOrdering API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fORMOrdering">Class Documentation</a></li>
		<li><strong><a href="#fORMOrdering-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fORMOrdering-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fORMOrdering-api-configureOrderingColumn">configureOrderingColumn()</a></li>
	  			<li class="protected"><a href="#fORMOrdering-api-delete">delete()</a></li>
	  			<li class="protected"><a href="#fORMOrdering-api-inspect">inspect()</a></li>
	  			<li class="protected"><a href="#fORMOrdering-api-reflect">reflect()</a></li>
	  			<li class="protected"><a href="#fORMOrdering-api-reorder">reorder()</a></li>
	  			<li class="protected"><a href="#fORMOrdering-api-reset">reset()</a></li>
	  			<li class="protected"><a href="#fORMOrdering-api-validate">validate()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fGrammar">fGrammar</a></li>
		<li><a href="#fORM">fORM</a></li>
		<li><a href="#fORMDatabase">fORMDatabase</a></li>
		<li><a href="#fORMSchema">fORMSchema</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b19</span></div>
<p class="short_description">Allows a column in an <a href="#fActiveRecord">fActiveRecord</a> class to be a relative sort order column</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b19</th><td>Updated code to work with the new <a href="#fORM">fORM</a> API <span class="date">8/6/10</span></td></tr><tr><th>1.0.0b18</th><td>Changed <a href="#fORMOrdering-api-configureOrderingColumn"><tt>configureOrderingColumn()</tt></a> to ensure the column specified can store negative values <span class="date">7/21/10</span></td></tr><tr><th>1.0.0b17</th><td>Changed validation messages array to use column name keys <span class="date">5/26/10</span></td></tr><tr><th>1.0.0b16</th><td>Updated the class to allow for multiple ordering columns per class <span class="date">5/10/10</span></td></tr><tr><th>1.0.0b15</th><td>Fixed a bug with ordering columns that are part of a multi-column unique constraint <span class="date">11/13/09</span></td></tr><tr><th>1.0.0b14</th><td>Fixed a bug affecting where conditions with columns that are not null but have a default value <span class="date">11/3/09</span></td></tr><tr><th>1.0.0b13</th><td>Updated code for the new <a href="#fORMDatabase">fORMDatabase</a> and <a href="#fORMSchema">fORMSchema</a> APIs <span class="date">10/28/09</span></td></tr><tr><th>1.0.0b12</th><td>Changed SQL statements to use value placeholders, identifier escaping and schema support <span class="date">10/22/09</span></td></tr><tr><th>1.0.0b11</th><td>Fixed another bug with deleting records in the middle of a set, added support for reordering multiple records at once <span class="date">7/17/09</span></td></tr><tr><th>1.0.0b10</th><td>Fixed a bug with deleting multiple in-memory records in the same set <span class="date">7/15/09</span></td></tr><tr><th>1.0.0b9</th><td>Fixed a bug with using <a href="#fORM-api-registerInspectCallback"><tt>fORM::registerInspectCallback()</tt></a> <span class="date">7/15/09</span></td></tr><tr><th>1.0.0b8</th><td>Updated to use new <a href="#fORM-api-registerInspectCallback"><tt>fORM::registerInspectCallback()</tt></a> method <span class="date">7/13/09</span></td></tr><tr><th>1.0.0b7</th><td>Fixed <a href="#fORMOrdering-api-validate"><tt>validate()</tt></a> so it properly ignores ordering columns in multi-column unique constraints <span class="date">6/17/09</span></td></tr><tr><th>1.0.0b6</th><td>Updated code for new <a href="#fORM">fORM</a> API <span class="date">6/15/09</span></td></tr><tr><th>1.0.0b5</th><td>Updated class to automatically correct ordering values that are too high <span class="date">6/14/09</span></td></tr><tr><th>1.0.0b4</th><td>Updated code to use new <a href="#fValidationException-api-formatField"><tt>fValidationException::formatField()</tt></a> method <span class="date">6/4/09</span></td></tr><tr><th>1.0.0b3</th><td>Fixed a bug with setting a new record to anywhere but the end of a set <span class="date">3/18/09</span></td></tr><tr><th>1.0.0b2</th><td>Fixed a bug with <a href="#fORMOrdering-api-inspect"><tt>inspect()</tt></a>, 'max_ordering_value' was being returned as 'max_ordering_index' <span class="date">3/2/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/25/08</span></td></tr></table></div>
<div class="class_methods static" id="fORMOrdering-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fORMOrdering-api-configureOrderingColumn" class="method static"><span class="resolution">::</span><span class="name">configureOrderingColumn()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets a column to be an ordering column</p>
								<p>There can only be one ordering column per class/table and it must be  part of a single or multi-column <tt>UNIQUE</tt> constraint.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">configureOrderingColumn</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to set as an ordering column</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMOrdering-api-delete" class="protected method static"><span class="resolution">::</span><span class="name">delete()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Re-orders other records in the set when the record specified is deleted</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">delete</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMOrdering-api-inspect" class="protected method static"><span class="resolution">::</span><span class="name">inspect()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns the metadata about a column including features added by this class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">inspect</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method_name</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$parameters</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method_name</td>
				<td class="param_description">The method that was called</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters passed to the method</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The metadata array or element specified
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMOrdering-api-reflect" class="protected method static"><span class="resolution">::</span><span class="name">reflect()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Adjusts the <a href="#fActiveRecord-api-reflect"><tt>fActiveRecord::reflect()</tt></a> signatures of columns that have been configured in this class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reflect</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$signatures</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$include_doc_comments</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to reflect</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$signatures</td>
				<td class="param_description">The associative array of <tt>{method name} =&gt; {signature}</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$include_doc_comments</td>
				<td class="param_description">If doc comments should be included with the signature</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMOrdering-api-reorder" class="protected method static"><span class="resolution">::</span><span class="name">reorder()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Re-orders the object based on it's current state and new position</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reorder</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMOrdering-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMOrdering-api-validate" class="protected method static"><span class="resolution">::</span><span class="name">validate()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Makes sure the ordering value is sane, removes error messages about missing values</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">validate</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$old_values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$cache</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$validation_messages</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The <a href="#fActiveRecord">fActiveRecord</a> instance</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$old_values</td>
				<td class="param_description">The old values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">Any records related to this record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$cache</td>
				<td class="param_description">The cache array for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$validation_messages</td>
				<td class="param_description">An array of ordered validation messages</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fORMRelated">fORMRelated</h2>
<div class="sidebar">
<h3 id="fORMRelated-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fORMRelated">Class Documentation</a></strong></li>
<li><a href="#fORMRelated-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fORMRelated-docs-OrderingRelatedRecords">Ordering Related Records</a></li>
<li><a href="#fORMRelated-docs-OverridingRelatedRecordNames">Overriding Related Record Names</a></li>
<li><a href="#fORMRelated-docs-OverridingChildRecordValidationNames">Overriding Child Record Validation Names</a></li>
</ul>

<h3 id="fORMRelated-docs-ORMClasses">ORM Classes </h3>

<ul>
<li><a href="#fActiveRecord">fActiveRecord</a></li>
<li><a href="#fRecordSet">fRecordSet</a></li>
</ul>

<ul>
<li><a href="#fORM">fORM</a></li>
<li><a href="#fORMColumn">fORMColumn</a></li>
<li><a href="#fORMDatabase">fORMDatabase</a></li>
<li><a href="#fORMDate">fORMDate</a></li>
<li><a href="#fORMFile">fORMFile</a></li>
<li><a href="#fORMJSON">fORMJSON</a></li>
<li><a href="#fORMMoney">fORMMoney</a></li>
<li><a href="#fORMOrdering">fORMOrdering</a></li>
<li><strong>fORMRelated</strong></li>
<li><a href="#fORMSchema">fORMSchema</a></li>
<li><a href="#fORMValidation">fORMValidation</a></li>
</ul>
</div>

<p>
The fORMRelated class is a built-in part of the ORM that provides related-record functionality for <a href="#fActiveRecord">fActiveRecord</a> classes.
</p>

<h3 id="fORMRelated-docs-OrderingRelatedRecords">Ordering Related Records</h3>

<p>
When calling a <code>build</code> method on an <a href="#fActiveRecord">fActiveRecord</a> object, by default no <code>ORDER BY</code> clause is used to order the record set. The static method <a href="#fORMRelated-api-setOrderBys"><code>setOrderBys()</code></a> allows setting an <a href="#fRecordSet-api-build">fRecordSet::build()</a> style order bys array for any records created through a <code>build</code> method. The method requires four parameters, the <code>$class</code> being configured, the <code>$related_class</code> to apply the order bys to, the <code>$order_bys</code> array and the <code>$route</code> to the related class. The <code>$route</code> parameter can be omitted if there is only one route.
</p>

<p>
The following example will cause related groups to be returned order alphabetically.
</p>
<pre class="block php"><code>class User extends fActiveRecord
{
    protected function configure()
    {
        fORMRelated::setOrderBys(
            $this,
            'Group',
            array('groups.name' =&gt; 'asc')
        );
    }
}

// The groups record set created here will be ordered by name
$user = new User(1);
$groups = $user-&gt;buildGroups();</code></pre>

<h3 id="fORMRelated-docs-OverridingRelatedRecordNames">Overriding Related Record Names</h3>

<p>
Record names are used in messaging related to records, as the <a href="#fORM">fORM</a> documentation discusses. Sometimes, however, a record will need to have a different name when presented in reference to another record. The static method <a href="#fORMRelated-api-overrideRelatedRecordName"><code>overrideRelatedRecordName()</code></a> allows defining a custom name to use in the context of being a related record.
</p>
<pre class="block sql"><code>CREATE TABLE groups (
    name VARCHAR(255) PRIMARY KEY
);

CREATE TABLE users (
    user_id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL
);

CREATE TABLE members (
    group VARCHAR(255) NOT NULL REFERENCES groups(name) ON DELETE CASCADE ON UPDATE CASCADE,
    user_id INTEGER NOT NULL REFERENCES users(user_id) ON DELETE CASCADE,
    PRIMARY KEY(group, user_id)
);

CREATE TABLE administrators(
    group VARCHAR(255) NOT NULL REFERENCES groups(name) ON DELETE CASCADE ON UPDATE CASCADE,
    user_id INTEGER NOT NULL REFERENCES users(user_id) ON DELETE CASCADE,
    PRIMARY KEY(group, user_id)
);</code></pre>

<p>
 The schema presented above related <code>users</code> to <code>groups</code> in two ways, as <code>members</code> of the group, or as <code>administrators</code>. If a validation rule was set up to require at least one user as a member and one user as an administrator, it wouldnt make sense if the error messages for both just referenced users.
</p>

<p>
<code>overrideRelatedRecordName()</code> accepts four parameters, the <code>$class</code> being configured, the <code>$related_class</code> to set the name for, the <code>$record_name</code> to set and optionally the <code>$route</code> to the related class. The <code>$route</code> is only required if there is more than one.
</p>
<pre class="block php"><code>class Group extends fActiveRecord
{
    protected function configure()
    {
        fORMRelated::overrideRelatedRecordName($this, 'User', 'Member', 'members');
        fORMRelated::overrideRelatedRecordName($this, 'User', 'Administrator', 'administrators');
    }
}</code></pre>

<h3 id="fORMRelated-docs-OverridingChildRecordValidationNames">Overriding Child Record Validation Names</h3>

<p>
For <code>one-to-many</code> relationships, it is possible to override the name given to the child record when being referenced in the validation message (or array). By default, the name of the record will be in the form <code>Child Record #1</code>. The method <a href="#fORMRelated-api-registerValidationNameMethod"><code>registerValidationNameMethod()</code></a> allows setting a method to be called on a record to retrieve its name.
</p>

<p>
<a href="#fORMRelated-api-registerValidationNameMethod"><code>registerValidationNameMethod()</code></a> requires three parameters, the <code>$class</code>, the <code>$related_class</code> and the <code>$method</code> to call on the related record. An optional fourth parameter, <code>$route</code>, may be specified in there is more than one relationship route between <code>$class</code> and <code>$related_class</code>.
</p>
<pre class="block php"><code>class User extends fActiveRecord
{
    protected function configure()
    {
        fORMRelated::registerValidationNameMethod('User', 'UserPreference', 'makeValidationName');
    }
}
class UserPreference extends fActiveRecord
{
    public function makeValidationName()
    {
        return $this-&gt;getName() . ' Preference';
    }
}</code></pre>

<p>
 The registered method may accept an optional parameter, which will contain a one-based index of its position in the set of child records.
</p>
<pre class="block php"><code>class UserPreference extends fActiveRecord
{
    public function makeValidationName(number)
    {
        return 'Preference #' . $number;
    }
}</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fORMRelated-api">fORMRelated API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fORMRelated">Class Documentation</a></li>
		<li><strong><a href="#fORMRelated-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fORMRelated-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li class="protected"><a href="#fORMRelated-api-associateRecord">associateRecord()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-associateRecords">associateRecords()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-buildRecords">buildRecords()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-countRecords">countRecords()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-createRecord">createRecord()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-determineFirstPKColumn">determineFirstPKColumn()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-determineRequestFilter">determineRequestFilter()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-flagForAssociation">flagForAssociation()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-getOrderBys">getOrderBys()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-getPrimaryKeys">getPrimaryKeys()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-getRelatedRecordName">getRelatedRecordName()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-hasRecords">hasRecords()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-linkRecords">linkRecords()</a></li>
	  			<li><a href="#fORMRelated-api-overrideRelatedRecordName">overrideRelatedRecordName()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-populateRecords">populateRecords()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-reflect">reflect()</a></li>
	  			<li><a href="#fORMRelated-api-registerValidationNameMethod">registerValidationNameMethod()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-reset">reset()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-setCount">setCount()</a></li>
	  			<li><a href="#fORMRelated-api-setOrderBys">setOrderBys()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-setPrimaryKeys">setPrimaryKeys()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-setRecordSet">setRecordSet()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-store">store()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-storeManyToMany">storeManyToMany()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-storeOneToStar">storeOneToStar()</a></li>
	  			<li class="protected"><a href="#fORMRelated-api-validate">validate()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fGrammar">fGrammar</a></li>
		<li><a href="#fORM">fORM</a></li>
		<li><a href="#fORMDatabase">fORMDatabase</a></li>
		<li><a href="#fORMSchema">fORMSchema</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fRecordSet">fRecordSet</a></li>
		<li><a href="#fRequest">fRequest</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fORMValidation">fORMValidation</a></li>
		<li><a href="#fRecordSet">fRecordSet</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b44</span></div>
<p class="short_description">Handles related record tasks for <a href="#fActiveRecord">fActiveRecord</a> classes</p>
<div class="description"><p>The functionality of this class only works with single-field <tt>FOREIGN KEY</tt>  constraints.</p></div>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b44</th><td>Added missing information for has and list methods to <a href="#fORMRelated-api-reflect"><tt>reflect()</tt></a> <span class="date">9/7/11</span></td></tr><tr><th>1.0.0b43</th><td>Fixed some bugs in handling relationships between PHP 5.3 namespaced classes <span class="date">5/26/11</span></td></tr><tr><th>1.0.0b42</th><td>Fixed a bug with <a href="#fORMRelated-api-associateRecords"><tt>associateRecords()</tt></a> not associating record set via primary key <span class="date">5/23/11</span></td></tr><tr><th>1.0.0b41</th><td>Fixed a bug in generating errors messages for many-to-many relationships <span class="date">3/7/11</span></td></tr><tr><th>1.0.0b40</th><td>Updated <a href="#fORMRelated-api-getRelatedRecordName"><tt>getRelatedRecordName()</tt></a> to use <a href="#fText">fText</a> if loaded <span class="date">2/2/11</span></td></tr><tr><th>1.0.0b39</th><td>Fixed a bug with <a href="#fORMRelated-api-validate"><tt>validate()</tt></a> not properly removing validation messages about a related primary key value not being present yet, if the column and related column names were different <span class="date">11/24/10</span></td></tr><tr><th>1.0.0b38</th><td>Updated <a href="#fORMRelated-api-overrideRelatedRecordName"><tt>overrideRelatedRecordName()</tt></a> to prefix any namespace from <tt>$class</tt> to <tt>$related_class</tt> if not already present <span class="date">11/24/10</span></td></tr><tr><th>1.0.0b37</th><td>Fixed a documentation typo <span class="date">11/4/10</span></td></tr><tr><th>1.0.0b36</th><td>Fixed <a href="#fORMRelated-api-getPrimaryKeys"><tt>getPrimaryKeys()</tt></a> to not throw SQL exceptions <span class="date">10/20/10</span></td></tr><tr><th>1.0.0b35</th><td>Backwards Compatibility Break - changed the validation messages array to use nesting for child records <span class="date">10/3/10</span></td></tr><tr><th>1.0.0b35</th><td>Updated <a href="#fORMRelated-api-getPrimaryKeys"><tt>getPrimaryKeys()</tt></a> to always return primary keys in a consistent order when no order bys are specified <span class="date">7/26/10</span></td></tr><tr><th>1.0.0b34</th><td>Updated the class to work with fixes in <a href="#fORMRelated">fORMRelated</a> <span class="date">7/22/10</span></td></tr><tr><th>1.0.0b33</th><td>Fixed the related table populate action to use the plural underscore_notation version of the related class name <span class="date">7/8/10</span></td></tr><tr><th>1.0.0b32</th><td>Backwards Compatibility Break - related table populate action now use the underscore_notation version of the class name instead of the related table name, allowing for related tables in non-standard schemas <span class="date">6/23/10</span></td></tr><tr><th>1.0.0b31</th><td>Fixed <a href="#fORMRelated-api-reflect"><tt>reflect()</tt></a> to properly show parameters for associate methods <span class="date">6/8/10</span></td></tr><tr><th>1.0.0b30</th><td>Fixed a bug where related record error messages could be overwritten if there were multiple related records with the same error <span class="date">5/29/10</span></td></tr><tr><th>1.0.0b29</th><td>Changed validation messages array to use column name keys <span class="date">5/26/10</span></td></tr><tr><th>1.0.0b28</th><td>Updated <a href="#fORMRelated-api-associateRecords"><tt>associateRecords()</tt></a> to accept just a single <a href="#fActiveRecord">fActiveRecord</a> <span class="date">5/6/10</span></td></tr><tr><th>1.0.0b27</th><td>Updated the class to force configure classes before peforming actions with them <span class="date">3/30/10</span></td></tr><tr><th>1.0.0b26</th><td>Fixed <a href="#fORMRelated-api-reflect"><tt>reflect()</tt></a> to show the proper return values for <tt>associate</tt>, <tt>link</tt> and <tt>populate</tt> methods <span class="date">3/15/10</span></td></tr><tr><th>1.0.0b25</th><td>Fixed a bug when storing a one-to-one related record with different column names on each end of the relationship <span class="date">3/4/10</span></td></tr><tr><th>1.0.0b24</th><td>Added the ability to associate a single record via primary key <span class="date">3/3/10</span></td></tr><tr><th>1.0.0b23</th><td>Fixed a column aliasing issue with SQLite <span class="date">1/25/10</span></td></tr><tr><th>1.0.0b22</th><td>Fixed a bug with associating a non-contiguous array of <a href="#fActiveRecord">fActiveRecord</a> objects <span class="date">12/17/09</span></td></tr><tr><th>1.0.0b21</th><td>Added support for the $force_cascade parameter of <a href="#fActiveRecord-api-store"><tt>fActiveRecord::store()</tt></a>, added <a href="#fORMRelated-api-hasRecords"><tt>hasRecords()</tt></a> and fixed a bug with creating non-existent one-to-one related records <span class="date">12/16/09</span></td></tr><tr><th>1.0.0b20</th><td>Updated code for the new <a href="#fORMDatabase">fORMDatabase</a> and <a href="#fORMSchema">fORMSchema</a> APIs <span class="date">10/28/09</span></td></tr><tr><th>1.0.0b19</th><td>Internal Backwards Compatibility Break - Added the <tt>$class</tt> parameter to <a href="#fORMRelated-api-storeManyToMany"><tt>storeManyToMany()</tt></a> - also fixed <a href="#fORMRelated-api-countRecords"><tt>countRecords()</tt></a> to work across all databases, changed SQL statements to use value placeholders, identifier escaping and support schemas <span class="date">10/22/09</span></td></tr><tr><th>1.0.0b18</th><td>Fixed a bug in <a href="#fORMRelated-api-countRecords"><tt>countRecords()</tt></a> that would occur when multiple routes existed to the table being counted <span class="date">10/5/09</span></td></tr><tr><th>1.0.0b17</th><td>Updated code for new <a href="#fRecordSet">fRecordSet</a> API <span class="date">9/16/09</span></td></tr><tr><th>1.0.0b16</th><td>Fixed a bug with <a href="#fORMRelated-api-createRecord"><tt>createRecord()</tt></a> not creating non-existent record when the related value is NULL <span class="date">8/25/09</span></td></tr><tr><th>1.0.0b15</th><td>Fixed a bug with <a href="#fORMRelated-api-createRecord"><tt>createRecord()</tt></a> where foreign keys with a different column and related column name would not load properly <span class="date">8/17/09</span></td></tr><tr><th>1.0.0b14</th><td>Fixed a bug with <a href="#fORMRelated-api-createRecord"><tt>createRecord()</tt></a> when a foreign key constraint is on a column other than the primary key <span class="date">8/10/09</span></td></tr><tr><th>1.0.0b13</th><td><a href="#fORMRelated-api-setOrderBys"><tt>setOrderBys()</tt></a> now (properly) only recognizes *-to-many relationships <span class="date">7/31/09</span></td></tr><tr><th>1.0.0b12</th><td>Changed how related record values are set and how related validation messages are ignored because of recursive relationships <span class="date">7/29/09</span></td></tr><tr><th>1.0.0b11</th><td>Fixed some bugs with one-to-one relationships <span class="date">7/21/09</span></td></tr><tr><th>1.0.0b10</th><td>Fixed a couple of bugs with validating related records <span class="date">6/26/09</span></td></tr><tr><th>1.0.0b9</th><td>Fixed a bug where <a href="#fORMRelated-api-store"><tt>store()</tt></a> would not save associations with no related records <span class="date">6/23/09</span></td></tr><tr><th>1.0.0b8</th><td>Changed <a href="#fORMRelated-api-associateRecords"><tt>associateRecords()</tt></a> to work for *-to-many instead of just many-to-many relationships <span class="date">6/17/09</span></td></tr><tr><th>1.0.0b7</th><td>Updated code for new <a href="#fORM">fORM</a> API, fixed API documentation bugs <span class="date">6/15/09</span></td></tr><tr><th>1.0.0b6</th><td>Updated code to use new <a href="#fValidationException-api-formatField"><tt>fValidationException::formatField()</tt></a> method <span class="date">6/4/09</span></td></tr><tr><th>1.0.0b5</th><td>Added <a href="#fORMRelated-api-getPrimaryKeys"><tt>getPrimaryKeys()</tt></a> and <a href="#fORMRelated-api-setPrimaryKeys"><tt>setPrimaryKeys()</tt></a>, renamed setRecords() to <a href="#fORMRelated-api-setRecordSet"><tt>setRecordSet()</tt></a> and tallyRecords() to <a href="#fORMRelated-api-setCount"><tt>setCount()</tt></a> <span class="date">6/2/09</span></td></tr><tr><th>1.0.0b4</th><td>Updated code to handle new association method for related records and new <tt>$related_records</tt> structure, added <a href="#fORMRelated-api-store"><tt>store()</tt></a> and <a href="#fORMRelated-api-validate"><tt>validate()</tt></a> <span class="date">6/2/09</span></td></tr><tr><th>1.0.0b3</th><td><a href="#fORMRelated-api-associateRecords"><tt>associateRecords()</tt></a> can now accept an array of records or primary keys instead of only an <a href="#fRecordSet">fRecordSet</a> <span class="date">6/1/09</span></td></tr><tr><th>1.0.0b2</th><td><a href="#fORMRelated-api-populateRecords"><tt>populateRecords()</tt></a> now accepts any input field keys instead of sequential ones starting from 0 <span class="date">5/3/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">12/30/07</span></td></tr></table></div>
<div class="class_methods static" id="fORMRelated-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-associateRecord" class="protected method static"><span class="resolution">::</span><span class="name">associateRecord()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Creates associations for one-to-one relationships</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">associateRecord</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a>|array|string|integer</span> <span class="php-var">$record</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to get the related values for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">The related records existing for the <a href="#fActiveRecord">fActiveRecord</a> class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The class we are associating with the current record</td>
			  </tr>
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a>|array|string|integer</td>
				<td class="param_name">$record</td>
				<td class="param_description">The record (or primary key of the record) to be associated</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to use between the current class and the related class</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-associateRecords" class="protected method static"><span class="resolution">::</span><span class="name">associateRecords()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Creates associations for *-to-many relationships</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">associateRecords</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype"><a href="#fRecordSet">fRecordSet</a>|array</span> <span class="php-var">$records_to_associate</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to get the related values for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">The related records existing for the <a href="#fActiveRecord">fActiveRecord</a> class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The class we are associating with the current record</td>
			  </tr>
						  <tr>
				<td class="param_data_type"><a href="#fRecordSet">fRecordSet</a>|array</td>
				<td class="param_name">$records_to_associate</td>
				<td class="param_description">An <a href="#fRecordSet">fRecordSet</a>, an array or records, or an array of primary keys of the records to be associated</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to use between the current class and the related class</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-buildRecords" class="protected method static"><span class="resolution">::</span><span class="name">buildRecords()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Builds a set of related records along a one-to-many or many-to-many relationship</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fRecordSet">fRecordSet</a></span> <span class="php-identifier">buildRecords</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to get the related values for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The values for the <a href="#fActiveRecord">fActiveRecord</a> class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">The related records existing for the <a href="#fActiveRecord">fActiveRecord</a> class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The class that is related to the current record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to follow for the class specified</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					A record set of the related records
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-countRecords" class="protected method static"><span class="resolution">::</span><span class="name">countRecords()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Counts the number of related one-to-many or many-to-many records</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">countRecords</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to get the related values for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The values for the <a href="#fActiveRecord">fActiveRecord</a> class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">The related records existing for the <a href="#fActiveRecord">fActiveRecord</a> class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The class that is related to the current record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to follow for the class specified</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The number of related records
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-createRecord" class="protected method static"><span class="resolution">::</span><span class="name">createRecord()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Builds the object for the related class specified</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-identifier">createRecord</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to create the related record for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$values</td>
				<td class="param_description">The values existing in the <a href="#fActiveRecord">fActiveRecord</a> class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">The related records for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The related class name</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to the related class</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					An instance of the class specified
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-determineFirstPKColumn" class="protected method static"><span class="resolution">::</span><span class="name">determineFirstPKColumn()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Figures out the first primary key column for a related class that is not the related column</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">determineFirstPKColumn</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name of the main class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The related class being filtered for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to the related class</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The first primary key column in the related class
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-determineRequestFilter" class="protected method static"><span class="resolution">::</span><span class="name">determineRequestFilter()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Figures out what filter to pass to <a href="#fRequest-api-filter"><tt>fRequest::filter()</tt></a> for the specified related class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">determineRequestFilter</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name of the main class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The related class being filtered for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to the related class</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The prefix to filter the request fields by
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-flagForAssociation" class="protected method static"><span class="resolution">::</span><span class="name">flagForAssociation()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets the related records for a *-to-many relationship to be associated upon <a href="#fActiveRecord-api-store"><tt>fActiveRecord::store()</tt></a></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">flagForAssociation</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to associate the related records to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">The related records existing for the <a href="#fActiveRecord">fActiveRecord</a> class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The class we are associating with the current record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to use between the current class and the related class</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-getOrderBys" class="protected method static"><span class="resolution">::</span><span class="name">getOrderBys()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Gets the ordering to use when returning an <a href="#fRecordSet">fRecordSet</a> of related objects</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">getOrderBys</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to get the order bys for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The related class the ordering rules apply to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to the related table, should be a column name in the current table or a join table name</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					An array of the order bys - see <a href="#fRecordSet-api-build"><tt>fRecordSet::build()</tt></a> for format
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-getPrimaryKeys" class="protected method static"><span class="resolution">::</span><span class="name">getPrimaryKeys()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Gets the primary keys of the related records for *-to-many relationships</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">getPrimaryKeys</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to get the related primary keys for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The values for the <a href="#fActiveRecord">fActiveRecord</a> class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">The related records existing for the <a href="#fActiveRecord">fActiveRecord</a> class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The class that is related to the current record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to follow for the class specified</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The primary keys of the related records
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-getRelatedRecordName" class="protected method static"><span class="resolution">::</span><span class="name">getRelatedRecordName()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns the record name for a related class</p>
								<p>The default record name of a related class is the result of  <a href="#fGrammar-api-humanize"><tt>fGrammar::humanize()</tt></a> called on the class.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getRelatedRecordName</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype"></span> <span class="php-var">$route</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to get the related class name for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The related class to get the record name of</td>
			  </tr>
						  <tr>
				<td class="param_data_type"></td>
				<td class="param_name">$route</td>
				<td class="param_description"></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The record name for the related class specified
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-hasRecords" class="protected method static"><span class="resolution">::</span><span class="name">hasRecords()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Indicates if a record has a one-to-one or any *-to-many related records</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">hasRecords</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to check related records for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The values for the record we are checking</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">The related records for the record we are checking</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The related class we are checking for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to the related class</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-linkRecords" class="protected method static"><span class="resolution">::</span><span class="name">linkRecords()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Parses associations for many-to-many relationships from the page request</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">linkRecords</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to get link the related records to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">The related records existing for the <a href="#fActiveRecord">fActiveRecord</a> class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The related class to populate</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to the related class</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMRelated-api-overrideRelatedRecordName" class="method static"><span class="resolution">::</span><span class="name">overrideRelatedRecordName()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Allows overriding of default record names or related records</p>
								<p>The default record name of a related record is the result of  <a href="#fGrammar-api-humanize"><tt>fGrammar::humanize()</tt></a> called on the class name.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">overrideRelatedRecordName</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$record_name</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class to set the related record name for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The name of the related class, or an instance of it</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$record_name</td>
				<td class="param_description">The human version of the related record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to the related class</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-populateRecords" class="protected method static"><span class="resolution">::</span><span class="name">populateRecords()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets the values for records in a one-to-many relationship with this record</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">populateRecords</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to populate the related records of</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">The related records existing for the <a href="#fActiveRecord">fActiveRecord</a> class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The related class to populate</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to the related class</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-reflect" class="protected method static"><span class="resolution">::</span><span class="name">reflect()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Adds information about methods provided by this class to <a href="#fActiveRecord">fActiveRecord</a></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reflect</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$signatures</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$include_doc_comments</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to reflect the related record methods for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$signatures</td>
				<td class="param_description">The associative array of <tt>{method_name} =&gt; {signature}</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$include_doc_comments</td>
				<td class="param_description">If the doc block comments for each method should be included</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMRelated-api-registerValidationNameMethod" class="method static"><span class="resolution">::</span><span class="name">registerValidationNameMethod()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Registers a method to use to get a name for a related record when doing validation</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">registerValidationNameMethod</span><span class="php-brackets">(</span> <span class="php-vartype">string|<a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$method</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string|<a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to register the method for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The related class to register the method for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to be called on the related class that will return the name</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to the related class</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-setCount" class="protected method static"><span class="resolution">::</span><span class="name">setCount()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Records the number of related one-to-many or many-to-many records</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setCount</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$count</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to set the related records count for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The values for the <a href="#fActiveRecord">fActiveRecord</a> class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">The related records existing for the <a href="#fActiveRecord">fActiveRecord</a> class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The class that is related to the current record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$count</td>
				<td class="param_description">The number of records</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to follow for the class specified</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMRelated-api-setOrderBys" class="method static"><span class="resolution">::</span><span class="name">setOrderBys()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets the ordering to use when returning an <a href="#fRecordSet">fRecordSet</a> of related objects</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setOrderBys</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$order_bys</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class this ordering rule applies to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The related class we are getting info from</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$order_bys</td>
				<td class="param_description">An array of the order bys for this table.column combination - see <a href="#fRecordSet-api-build"><tt>fRecordSet::build()</tt></a> for format</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to the related table, this should be a column name in the current table or a join table name</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-setPrimaryKeys" class="protected method static"><span class="resolution">::</span><span class="name">setPrimaryKeys()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets the related records for *-to-many relationships, providing only primary keys</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setPrimaryKeys</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$primary_keys</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to set the related primary keys for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">The related records existing for the <a href="#fActiveRecord">fActiveRecord</a> class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The class we are setting the records for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$primary_keys</td>
				<td class="param_description">The records to set</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to use between the current class and the related class</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-setRecordSet" class="protected method static"><span class="resolution">::</span><span class="name">setRecordSet()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets the related records for *-to-many relationships</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setRecordSet</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype"><a href="#fRecordSet">fRecordSet</a></span> <span class="php-var">$records</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to set the related records for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">The related records existing for the <a href="#fActiveRecord">fActiveRecord</a> class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The class we are associating with the current record</td>
			  </tr>
						  <tr>
				<td class="param_data_type"><a href="#fRecordSet">fRecordSet</a></td>
				<td class="param_name">$records</td>
				<td class="param_description">The records are associating</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to use between the current class and the related class</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-store" class="protected method static"><span class="resolution">::</span><span class="name">store()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Stores any many-to-many associations or any one-to-many records that have been flagged for association</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">store</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$force_cascade</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to store the related records for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values for the main record being stored</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">The related records array</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$force_cascade</td>
				<td class="param_description">This flag will be passed to the <a href="#fActiveRecord-api-delete"><tt>fActiveRecord::delete()</tt></a> method on related records that are being deleted</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-storeManyToMany" class="protected method static"><span class="resolution">::</span><span class="name">storeManyToMany()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Associates a set of many-to-many related records with the current record</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">storeManyToMany</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$relationship</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$related_info</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class the relationship is being stored for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values for the main record being stored</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$relationship</td>
				<td class="param_description">The information about the relationship between this object and the records in the record set</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$related_info</td>
				<td class="param_description">An array containing the keys <tt>'record_set'</tt>, <tt>'count'</tt>, <tt>'primary_keys'</tt> and <tt>'associate'</tt></td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
						<!-- start protected method static -->
			<h5 id="fORMRelated-api-storeOneToStar" class="protected method static"><span class="resolution">::</span><span class="name">storeOneToStar()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Stores a set of one-to-many related records in the database</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">storeOneToStar</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$force_cascade</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to store the related records for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The current values for the main record being stored</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">The related records array</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The related class being stored</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to the related class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$force_cascade</td>
				<td class="param_description">This flag will be passed to the <a href="#fActiveRecord-api-delete"><tt>fActiveRecord::delete()</tt></a> method on related records that are being deleted</td>
			  </tr>
						</table>
			</div>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When one of the &quot;many&quot; records throws an exception from <a href="#fActiveRecord-api-store"><tt>fActiveRecord::store()</tt></a></dd></dl>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMRelated-api-validate" class="protected method static"><span class="resolution">::</span><span class="name">validate()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Validates any many-to-many associations or any one-to-many records that have been flagged for association</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">validate</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to validate the related records for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The values for the object</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">The related records for the object</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fORMSchema">fORMSchema</h2>
<div class="sidebar">
<h3 id="fORMSchema-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fORMSchema">Class Documentation</a></strong></li>
<li><a href="#fORMSchema-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fORMSchema-docs-fSchemaSingleton">fSchema Singleton</a></li>
</ul>

<h3 id="fORMSchema-docs-ORMClasses">ORM Classes </h3>

<ul>
<li><a href="#fActiveRecord">fActiveRecord</a></li>
<li><a href="#fRecordSet">fRecordSet</a></li>
</ul>

<ul>
<li><a href="#fORM">fORM</a></li>
<li><a href="#fORMColumn">fORMColumn</a></li>
<li><a href="#fORMDatabase">fORMDatabase</a></li>
<li><a href="#fORMDate">fORMDate</a></li>
<li><a href="#fORMFile">fORMFile</a></li>
<li><a href="#fORMJSON">fORMJSON</a></li>
<li><a href="#fORMMoney">fORMMoney</a></li>
<li><a href="#fORMOrdering">fORMOrdering</a></li>
<li><a href="#fORMRelated">fORMRelated</a></li>
<li><strong>fORMSchema</strong></li>
<li><a href="#fORMValidation">fORMValidation</a></li>
</ul>
</div>

<p>
The fORMSchema class provides database schema information to the Flourish ORM. For end-developers the class provides access to a single instance of the <a href="#fSchema">fSchema</a> class and allows for simple caching of the schema data.
</p>

<h3 id="fORMSchema-docs-fSchemaSingleton">fSchema Singleton</h3>

<p>
Since the Flourish ORM bases almost all of its functionality on the schema of the database connected to, an instance of the <a href="#fSchema">fSchema</a> class is required for it to properly function. As long as an instance of <a href="#fDatabase">fDatabase</a> has been properly attached using <a href="#fORMDatabase">fORMDatabase</a>, an instance of <a href="#fSchema">fSchema</a> will be created and automatically attached to fORMSchema.
</p>

<p>
If <a href="#fSchema">fSchema</a> was extended or for some reason a custom instance needs to be attached, the static method <a href="#fORMSchema-api-attach"><code>attach()</code></a> will do that.
</p>
<pre class="block php"><code>fORMSchema::attach(new SomeExtensionOfFSchema(fORMDatabase::retrieve()));</code></pre>

<p>
 When writing custom code for the ORM, the <a href="#fSchema">fSchema</a> singleton can be access by calling the static method <a href="#fORMSchema-api-retrieve"><code>retrieve()</code></a>.
</p>
<pre class="block php"><code>$primary_keys = fORMSchema::retrieve()-&gt;getKeys('users', 'primary');</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fORMSchema-api">fORMSchema API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fORMSchema">Class Documentation</a></li>
		<li><strong><a href="#fORMSchema-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fORMSchema-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fORMSchema-api-attach">attach()</a></li>
	  			<li class="protected"><a href="#fORMSchema-api-getRoute">getRoute()</a></li>
	  			<li class="protected"><a href="#fORMSchema-api-getRouteName">getRouteName()</a></li>
	  			<li class="protected"><a href="#fORMSchema-api-getRouteNameFromRelationship">getRouteNameFromRelationship()</a></li>
	  			<li class="protected"><a href="#fORMSchema-api-getRoutes">getRoutes()</a></li>
	  			<li class="protected"><a href="#fORMSchema-api-isOneToOne">isOneToOne()</a></li>
	  			<li class="protected"><a href="#fORMSchema-api-reset">reset()</a></li>
	  			<li><a href="#fORMSchema-api-retrieve">retrieve()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fORM">fORM</a></li>
		<li><a href="#fORMDatabase">fORMDatabase</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fSchema">fSchema</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fORM">fORM</a></li>
		<li><a href="#fORMColumn">fORMColumn</a></li>
		<li><a href="#fORMDatabase">fORMDatabase</a></li>
		<li><a href="#fORMDate">fORMDate</a></li>
		<li><a href="#fORMFile">fORMFile</a></li>
		<li><a href="#fORMMoney">fORMMoney</a></li>
		<li><a href="#fORMOrdering">fORMOrdering</a></li>
		<li><a href="#fORMRelated">fORMRelated</a></li>
		<li><a href="#fORMValidation">fORMValidation</a></li>
		<li><a href="#fRecordSet">fRecordSet</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b9</span></div>
<p class="short_description">Provides <a href="#fSchema">fSchema</a> class related functions for ORM code</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b9</th><td>Enhanced various exception messages <span class="date">9/19/10</span></td></tr><tr><th>1.0.0b8</th><td>Added 'one-to-one' support to <a href="#fORMSchema-api-getRouteNameFromRelationship"><tt>getRouteNameFromRelationship()</tt></a>, '!many-to-one' to <a href="#fORMSchema-api-getRoute"><tt>getRoute()</tt></a> <span class="date">3/3/10</span></td></tr><tr><th>1.0.0b7</th><td>Added support for multiple databases <span class="date">10/28/09</span></td></tr><tr><th>1.0.0b6</th><td>Internal Backwards Compatibility Break - Added the <tt>$schema</tt> parameter to the beginning of <a href="#fORMSchema-api-getRoute"><tt>getRoute()</tt></a>, <a href="#fORMSchema-api-getRouteName"><tt>getRouteName()</tt></a>, <a href="#fORMSchema-api-getRoutes"><tt>getRoutes()</tt></a> and <a href="#fORMSchema-api-isOneToOne"><tt>isOneToOne()</tt></a> - added '!many-to-one' relationship type handling <span class="date">10/22/09</span></td></tr><tr><th>1.0.0b5</th><td>Fixed some error messaging to not include {empty_string} in some situations <span class="date">7/31/09</span></td></tr><tr><th>1.0.0b4</th><td>Added <a href="#fORMSchema-api-isOneToOne"><tt>isOneToOne()</tt></a> <span class="date">7/21/09</span></td></tr><tr><th>1.0.0b3</th><td>Added routes caching for performance <span class="date">6/15/09</span></td></tr><tr><th>1.0.0b2</th><td>Backwards Compatiblity Break - removed enableSmartCaching(), <a href="#fORM-api-enableSchemaCaching"><tt>fORM::enableSchemaCaching()</tt></a> now provides equivalent functionality <span class="date">5/4/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="class_methods static" id="fORMSchema-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fORMSchema-api-attach" class="method static"><span class="resolution">::</span><span class="name">attach()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Allows attaching an <a href="#fSchema">fSchema</a>-compatible object as the schema singleton for ORM code</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">attach</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fSchema">fSchema</a></span> <span class="php-var">$schema</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">=</span>'default' <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fSchema">fSchema</a></td>
				<td class="param_name">$schema</td>
				<td class="param_description">An object that is compatible with <a href="#fSchema">fSchema</a></td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The name of the database this schema is for</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMSchema-api-getRoute" class="protected method static"><span class="resolution">::</span><span class="name">getRoute()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns information about the specified route</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">getRoute</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fSchema">fSchema</a></span> <span class="php-var">$schema</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$table</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_table</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$relationship_type</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fSchema">fSchema</a></td>
				<td class="param_name">$schema</td>
				<td class="param_description">The schema object to get the route from</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$table</td>
				<td class="param_description">The main table we are searching on behalf of</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_table</td>
				<td class="param_description">The related table we are searching under</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to get info about</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$relationship_type</td>
				<td class="param_description">The relationship type: <tt>NULL</tt>, <tt>'*-to-many'</tt>, <tt>'*-to-one'</tt>, <tt>'!many-to-one'</tt>, <tt>'one-to-one'</tt>, <tt>'one-to-meny'</tt>, <tt>'many-to-one'</tt>, <tt>'many-to-many'</tt></td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMSchema-api-getRouteName" class="protected method static"><span class="resolution">::</span><span class="name">getRouteName()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns the name of the only route from the specified table to one of its related tables</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getRouteName</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fSchema">fSchema</a></span> <span class="php-var">$schema</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$table</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_table</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$relationship_type</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fSchema">fSchema</a></td>
				<td class="param_name">$schema</td>
				<td class="param_description">The schema object to get the route name from</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$table</td>
				<td class="param_description">The main table we are searching on behalf of</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_table</td>
				<td class="param_description">The related table we are trying to find the routes for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route that was preselected, will be verified if present</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$relationship_type</td>
				<td class="param_description">The relationship type: <tt>NULL</tt>, <tt>'*-to-many'</tt>, <tt>'*-to-one'</tt>, <tt>'!many-to-one'</tt>, <tt>'one-to-one'</tt>, <tt>'one-to-many'</tt>, <tt>'many-to-one'</tt>, <tt>'many-to-many'</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The only route from the main table to the related table
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMSchema-api-getRouteNameFromRelationship" class="protected method static"><span class="resolution">::</span><span class="name">getRouteNameFromRelationship()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns the name of the route specified by the relationship</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getRouteNameFromRelationship</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$type</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$relationship</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$type</td>
				<td class="param_description">The type of relationship: <tt>'*-to-one'</tt>, <tt>'one-to-one'</tt>, <tt>'one-to-many'</tt>, <tt>'many-to-one'</tt>, <tt>'many-to-many'</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$relationship</td>
				<td class="param_description">The relationship array from <a href="#fSchema-api-getKeys"><tt>fSchema::getKeys()</tt></a></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The name of the route
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMSchema-api-getRoutes" class="protected method static"><span class="resolution">::</span><span class="name">getRoutes()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns an array of all routes from a table to one of its related tables</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">getRoutes</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fSchema">fSchema</a></span> <span class="php-var">$schema</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$table</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_table</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$relationship_type</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fSchema">fSchema</a></td>
				<td class="param_name">$schema</td>
				<td class="param_description">The schema object to get the routes for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$table</td>
				<td class="param_description">The main table we are searching on behalf of</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_table</td>
				<td class="param_description">The related table we are trying to find the routes for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$relationship_type</td>
				<td class="param_description">The relationship type: <tt>NULL</tt>, <tt>'*-to-many'</tt>, <tt>'*-to-one'</tt>, <tt>'!many-to-one'</tt>, <tt>'one-to-one'</tt>, <tt>'one-to-many'</tt>, <tt>'many-to-one'</tt>, <tt>'many-to-many'</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					All of the routes from the main table to the related table
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMSchema-api-isOneToOne" class="protected method static"><span class="resolution">::</span><span class="name">isOneToOne()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Indicates if the relationship specified is a one-to-one relationship</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">isOneToOne</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fSchema">fSchema</a></span> <span class="php-var">$schema</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$table</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_table</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fSchema">fSchema</a></td>
				<td class="param_name">$schema</td>
				<td class="param_description">The schema object the tables are from</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$table</td>
				<td class="param_description">The main table we are searching on behalf of</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_table</td>
				<td class="param_description">The related table we are trying to find the routes for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route between the two tables</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the table is in a one-to-one relationship with the related table over the route specified
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMSchema-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMSchema-api-retrieve" class="method static"><span class="resolution">::</span><span class="name">retrieve()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Return the instance of the <a href="#fSchema">fSchema</a> class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fSchema">fSchema</a></span> <span class="php-identifier">retrieve</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">=</span>'fActiveRecord' <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class the object will be used with</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The schema instance
				</p>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fORMValidation">fORMValidation</h2>
<div class="sidebar">
<h3 id="fORMValidation-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fORMValidation">Class Documentation</a></strong></li>
<li><a href="#fORMValidation-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fORMValidation-docs-AddingValidationRules">Adding Validation Rules</a>
<ul>
<li><a href="#fORMValidation-docs-RequiredRules">Required Rules</a></li>
<li><a href="#fORMValidation-docs-ConditionalRules">Conditional Rules</a></li>
<li><a href="#fORMValidation-docs-Many-to-ManyRules">Many-to-Many Rules</a></li>
<li><a href="#fORMValidation-docs-One-to-ManyRules">One-to-Many Rules</a></li>
<li><a href="#fORMValidation-docs-OneorMoreRules">One or More Rules</a></li>
<li><a href="#fORMValidation-docs-OnlyOneRules">Only One Rules</a></li>
<li><a href="#fORMValidation-docs-RegexRules">Regex Rules</a></li>
<li><a href="#fORMValidation-docs-ValidValuesRules">Valid Values Rules</a></li>
</ul>
</li>
<li><a href="#fORMValidation-docs-CustomValidation">Custom Validation</a></li>
<li><a href="#fORMValidation-docs-ColumnCaseSensitivity">Column Case Sensitivity</a></li>
<li><a href="#fORMValidation-docs-ValidationMessageOrder">Validation Message Order</a></li>
<li><a href="#fORMValidation-docs-MessageModification">Message Modification</a></li>
</ul>

<h3 id="fORMValidation-docs-ORMClasses">ORM Classes </h3>

<ul>
<li><a href="#fActiveRecord">fActiveRecord</a></li>
<li><a href="#fRecordSet">fRecordSet</a></li>
</ul>

<ul>
<li><a href="#fORM">fORM</a></li>
<li><a href="#fORMColumn">fORMColumn</a></li>
<li><a href="#fORMDatabase">fORMDatabase</a></li>
<li><a href="#fORMDate">fORMDate</a></li>
<li><a href="#fORMFile">fORMFile</a></li>
<li><a href="#fORMJSON">fORMJSON</a></li>
<li><a href="#fORMMoney">fORMMoney</a></li>
<li><a href="#fORMOrdering">fORMOrdering</a></li>
<li><a href="#fORMRelated">fORMRelated</a></li>
<li><a href="#fORMSchema">fORMSchema</a></li>
<li><strong>fORMValidation</strong></li>
</ul>
</div>

<p>
The fORMValidation class is a built-in part of the ORM that provides validation functionality for <a href="#fActiveRecord">fActiveRecord</a> classes.
</p>

<h3 id="fORMValidation-docs-AddingValidationRules">Adding Validation Rules</h3>

<p>
While most databases support a fairly broad set of restrictions on data format and validity, some validation tasks are too complicated or not possible with the standard databases. The fORMValidation class allows for supplementing the database schema with additional validation rules to help ensure valid data is being stored. These rules will be checked whenever <a href="#fActiveRecord-api-validate">fActiveRecord::validate()</a> or <a href="#fActiveRecord-api-store">fActiveRecord::store()</a> is called.
</p>

<h4 id="fORMValidation-docs-RequiredRules">Required Rules</h4>

<p>
By default, any database column that is set to <code>NOT NULL</code> and does <em>not</em> have a <code>DEFAULT</code> value, will be required. The static method <a href="#fORMValidation-api-addRequiredRule"><code>addRequiredRule()</code></a> allow setting columns that do allow <code>NULL</code> or have a default to also be required. It accepts a <code>$class</code> and one or more <code>$column</code> names.
</p>
<pre class="block php"><code>class NewsArticle extends fActiveRecord
{
    protected function configure()
    {
        // Makes the photo column required
        fORMValidation::addRequiredRule($this, 'photo');

        // Makes the publish_date and removal_date columns required
        fORMValidation::addRequiredRule($this, array('publish_date', 'removal_date'));
    }
}</code></pre>

<h4 id="fORMValidation-docs-ConditionalRules">Conditional Rules</h4>

<p>
The static method <a href="#fORMValidation-api-addConditionalRule"><code>addConditionalRule()</code></a> allows adding a rule where a column can be required to be filled in based on the presence of a value in another column. <code>addConditionalRule()</code> accepts four parameters, the <code>$class</code> being configured, the (one or more) <code>$main_columns</code> to trigger the rule, the optional <code>$conditional_values</code> to trigger the rule, and the <code>$conditional_columns</code> to require. If <code>$conditional_values</code> is <code>NULL</code>, the <code>$conditional_columns</code> will be required if any value is entered into any of the <code>$main_columns</code>, otherwise one of the values in <code>$conditional_values</code> would need to be entered.
</p>

<p>
The following example will require a photo if the type is set to photo:
</p>
<pre class="block php"><code>class NewsArticle extends fActiveRecord
{
    protected function configure()
    {
        fORMValidation::addConditionalRule($this, 'type', 'Photo', 'photo');
    }
}</code></pre>

<p>
 This example show how to require all three of a set of columns must be filled in if any of them are filled in:
</p>
<pre class="block php"><code>class Product extends fActiveRecord
{
    protected function configure()
    {
        fORMValidation::addConditionalRule(
            $this,
            array('price', 'discount_price', 'member_price'),
            NULL,
            array('price', 'discount_price', 'member_price')
        );
    }
}</code></pre>

<h4 id="fORMValidation-docs-Many-to-ManyRules">Many-to-Many Rules</h4>

<p>
Many-to-many validations rules all requiring that a record have at least one of another type of record related to it in a many-to-many relationship. The static method <a href="#fORMValidation-api-addManyToManyRule"><code>addManyToManyRule()</code></a> accepts three parameters, the <code>$class</code> to configure, the <code>$related_class</code> to require and optionally the <code>$route</code> to the <code>$related_class</code>.
</p>

<p>
The following example will require that a user is associated with at least one group:
</p>
<pre class="block php"><code>class User extends fActiveRecord
{
    protected function configure()
    {
        fORMValidation::addManyToManyRule($this, 'Group');
    }
}</code></pre>

<h4 id="fORMValidation-docs-One-to-ManyRules">One-to-Many Rules</h4>

<p>
One-to-many validations rules all requiring that a record have at least one of another type of record related to it in a one-to-many relationship. The static method <a href="#fORMValidation-api-addOneToManyRule"><code>addOneToManyRule()</code></a> accepts three parameters, the <code>$class</code> to configure, the <code>$related_class</code> to require and optionally the <code>$route</code> to the <code>$related_class</code>.
</p>

<p>
The following example will require that a survey question has at least one option to pick from:
</p>
<pre class="block php"><code>class SurveyQuestion extends fActiveRecord
{
    protected function configure()
    {
        fORMValidation::addOneToManyRule($this, 'SurveyQuestionOption');
    }
}</code></pre>

<h4 id="fORMValidation-docs-OneorMoreRules">One or More Rules</h4>

<p>
In some situations it is necessary to require that a user fills in at least one of a group of columns. This can be accomplished by calling the static method <a href="#fORMValidation-api-addOneOrMoreRule"><code>addOneOrMoreRule()</code></a>. The method accepts two parameters, the <code>$class</code> to configure and an array of <code>$columns</code> to require one or more of.
</p>

<p>
The following example would require that at least one of photo, link and body were entered:
</p>
<pre class="block php"><code>class NewsArticle extends fActiveRecord
{
    protected function configure()
    {
        fORMValidation::addOneOrMoreRule(
            $this,
            array(
                'photo',
                'link',
                'body'
            )
        );
    }
}</code></pre>

<h4 id="fORMValidation-docs-OnlyOneRules">Only One Rules</h4>

<p>
When presenting multiple options to users, sometimes it is necessary to restrict the user to only be able to select one from a number of choices. The static method <a href="#fORMValidation-api-addOnlyOneRule"><code>addOnlyOneRule()</code></a> accepts the <code>$class</code> to configure, plus an array of the <code>$columns</code> to restrict.
</p>

<p>
The following example would only allow the entry of one of photo, link and body:
</p>
<pre class="block php"><code>class NewsArticle extends fActiveRecord
{
    protected function configure()
    {
        fORMValidation::addOnlyOneRule(
            $this,
            array(
                'photo',
                'link',
                'body'
            )
        );
    }
}</code></pre>

<h4 id="fORMValidation-docs-RegexRules">Regex Rules</h4>

<p>
The static method <a href="#fORMValidation-api-addRegexRule"><code>addRegexRule()</code></a> allow validating a value against a <a class="ext-link" href="http://php.net/pcre"><span class="icon">perl-compatible regular expression</span></a> (PCRE). This method accepts the <code>$class</code> and <code>$column</code> to test, the <code>$regex</code> to use and the <code>$message</code> for when the regular expression does not match. The rule will not be checked if the value is <code>NULL</code>.
</p>

<p>
The following example would allow the length only allow a number, followed by zero or more spaces and <code>in</code>, <code>inches</code>, <code>cm</code>, <code>m</code>, <code>meters</code>, <code>ft</code> or <code>feet</code>:
</p>
<pre class="block php"><code>class Box extends fActiveRecord
{
    protected function configure()
    {
        fORMValidation::addRegexRule(
            $this,
            'length',
            '#^\d+\s*(in(ches)?|cm|m(eters)?|ft|feet)$#',
            'Please enter a length in cm, in, ft or m'
        );
    }
}</code></pre>

<h4 id="fORMValidation-docs-ValidValuesRules">Valid Values Rules</h4>

<p>
While it is possible to restrict the valid input to a column via a <code>CHECK</code> constraint (or the MySQL <code>ENUM</code> data type), there is also a method in fORMValidation to do the same thing. <a href="#fORMValidation-api-addValidValuesRule"><code>addValidValuesRule()</code></a> accepts the <code>$class</code> to configure, the <code>$column</code> to restrict the value of and an array of the <code>$valid_values</code>. <em>Please note that <code>NULL</code> is always allowed as long as the column is not set as <code>NOT NULL</code>.</em>
</p>

<p>
The following example would only allow <code>'Active'</code> or <code>'Inactive'</code> in the status column:
</p>
<pre class="block php"><code>class NewsArticle extends fActiveRecord
{
    protected function configure()
    {
        fORMValidation::addValidValuesRule(
            $this,
            'status',
            array(
                'Active',
                'Inactive'
            )
        );
    }
}</code></pre>

<p>
 The list of valid values can be retrieved by requesting the <code>'valid_values'</code> element during an <em>inspect</em> method call. This is also true if the valid values are defined in the database by a <code>CHECK</code> constraint.
</p>
<pre class="block php"><code>$valid_values = $news_article-&gt;inspectStatus('valid_values');
foreach ($valid_values as $valid_status) {
    // ...
}</code></pre>

<h3 id="fORMValidation-docs-CustomValidation">Custom Validation</h3>

<p>
In addition to using the built-in validation rules, it is possible to do custom validation by using an ORM hook via <a href="#fORM">fORM</a>. Please see the <a href="#fORM-docs-AddingFunctionalitytofActiveRecord">Adding Functionality to fActiveRecord</a> and <a href="#fORM-docs-CustomValidationUsingaHook">Custom Validation Using a Hook</a> sections for details and example code.
</p>

<h3 id="fORMValidation-docs-ColumnCaseSensitivity">Column Case Sensitivity</h3>

<p>
<code>UNIQUE</code> constraints on databases are normally case sensitive, meaning that the values <code>will@flourishlib.com</code> and <code>Will@flourishlib.com</code> can both exist in a column with a <code>UNIQUE</code> constraint. For most users this distinction is more confusing than useful. The static method <a href="#fORMValidation-api-setColumnCaseInsensitive"><code>setColumnCaseInsensitive()</code></a> restricts values to be unique in a case-insensitive manner. The method accepts two parameters, the <code>$class</code> to configure and the <code>$column</code> to treat as case-insensitive.
</p>

<p>
The following example will ensure that category names must have a unique spelling, not just unique case:
</p>
<pre class="block php"><code>class Category extends fActiveRecord
{
    protected function configure()
    {
        fORMValidation::setColumnCaseInsensitive($this, 'name');
    }
}</code></pre>

<h3 id="fORMValidation-docs-ValidationMessageOrder">Validation Message Order</h3>

<p>
When <a href="#fActiveRecord-api-validate">fActiveRecord::validate()</a> finds one of more validation issues (either by being called explicitly, or through <a href="#fActiveRecord-api-store">fActiveRecord::store()</a>), the error messages are created in the order they are detected. The static method <a href="#fORMValidation-api-setMessageOrder"><code>setMessageOrder()</code></a> accepts two parameters, the <code>$class</code> to configure and an ordered array of <code>$matches</code> to use to set the order of the error messages.
</p>

<p>
The <code>$matches</code> array should contain strings that will be matched to the error messages, with the first array entry causing any matching error message to be first, the second array match to be next, and so forth. All matches are done in a case-insensitive manner.
</p>

<p>
The longest matches are made first to help prevent unintended substring matches. Any messages that dont match anything will be placed at the end of the exception message. <em>Please note that there is no special format necessary to the match stringit can include any part of the message, including punctuation.</em>
</p>

<p>
Below is an example that will ensure that the error messages are displayed with first name first, last name second and email last:
</p>
<pre class="block php"><code>class User extends fActiveRecord
{
    protected function configure()
    {
        fORMValidation::setMessageOrder(
            $this,
            array(
                'First Name:',
                'Last Name:',
                'Email:'
            )
        );
    }
}</code></pre>

<h3 id="fORMValidation-docs-MessageModification">Message Modification</h3>

<p>
There are two static methods to modifying validation messages, <a href="#fORMValidation-api-addStringReplacement"><code>addStringReplacement()</code></a> and <a href="#fORMValidation-api-addRegexReplacement"><code>addRegexReplacement()</code></a>. Each accepts the <code>$class</code> to apply the replacement to, the string/regex to <code>$search</code> for, and the string to <code>$replace</code> with. The search and replace action is performed on every validation message generated in the class, and is performed right before the messages are reordered.
</p>

<p>
<code>addRegexReplacement()</code> accepts Perl-compatible regular expressions (<a class="ext-link" href="http://php.net/pcre"><span class="icon">PCRE</span></a>) and thus the <code>$replace</code> parameter needs to escape any literal <code>$</code> or <code>\</code> characters.
</p>

<p>
The following example shows how the text of an error message can be easily changed:
</p>
<pre class="block php"><code>class User extends fActiveRecord
{
    protected function configure()
    {
        fORMValidation::addStringReplacement($this, 'Favorite Genre: Please enter a value', 'Favorite Genre: Please check at least one');
    }
}</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fORMValidation-api">fORMValidation API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fORMValidation">Class Documentation</a></li>
		<li><strong><a href="#fORMValidation-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fORMValidation-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fORMValidation-api-addConditionalRule">addConditionalRule()</a></li>
	  			<li><a href="#fORMValidation-api-addManyToManyRule">addManyToManyRule()</a></li>
	  			<li><a href="#fORMValidation-api-addOneOrMoreRule">addOneOrMoreRule()</a></li>
	  			<li><a href="#fORMValidation-api-addOneToManyRule">addOneToManyRule()</a></li>
	  			<li><a href="#fORMValidation-api-addOnlyOneRule">addOnlyOneRule()</a></li>
	  			<li><a href="#fORMValidation-api-addRegexReplacement">addRegexReplacement()</a></li>
	  			<li><a href="#fORMValidation-api-addRegexRule">addRegexRule()</a></li>
	  			<li><a href="#fORMValidation-api-addRequiredRule">addRequiredRule()</a></li>
	  			<li><a href="#fORMValidation-api-addStringReplacement">addStringReplacement()</a></li>
	  			<li><a href="#fORMValidation-api-addValidValuesRule">addValidValuesRule()</a></li>
	  			<li class="protected"><a href="#fORMValidation-api-hasValue">hasValue()</a></li>
	  			<li class="protected"><a href="#fORMValidation-api-inspect">inspect()</a></li>
	  			<li class="protected"><a href="#fORMValidation-api-removeRegexReplacement">removeRegexReplacement()</a></li>
	  			<li class="protected"><a href="#fORMValidation-api-removeStringReplacement">removeStringReplacement()</a></li>
	  			<li class="protected"><a href="#fORMValidation-api-reorderMessages">reorderMessages()</a></li>
	  			<li class="protected"><a href="#fORMValidation-api-replaceMessages">replaceMessages()</a></li>
	  			<li class="protected"><a href="#fORMValidation-api-reset">reset()</a></li>
	  			<li><a href="#fORMValidation-api-setColumnCaseInsensitive">setColumnCaseInsensitive()</a></li>
	  			<li><a href="#fORMValidation-api-setMessageOrder">setMessageOrder()</a></li>
	  			<li class="protected"><a href="#fORMValidation-api-validate">validate()</a></li>
	  			<li class="protected"><a href="#fORMValidation-api-validateRelated">validateRelated()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fDate">fDate</a></li>
		<li><a href="#fGrammar">fGrammar</a></li>
		<li><a href="#fORM">fORM</a></li>
		<li><a href="#fORMDatabase">fORMDatabase</a></li>
		<li><a href="#fORMRelated">fORMRelated</a></li>
		<li><a href="#fORMSchema">fORMSchema</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fTime">fTime</a></li>
		<li><a href="#fTimestamp">fTimestamp</a></li>
		<li><a href="#fUTF8">fUTF8</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b32</span></div>
<p class="short_description">Handles validation for <a href="#fActiveRecord">fActiveRecord</a> classes</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b32</th><td>Fixed an array to string conversion notice <span class="date">9/21/12</span></td></tr><tr><th>1.0.0b31</th><td>Fixed checkConditionalRule() to require columns that default to an empty string and are currently set to that value <span class="date">6/14/11</span></td></tr><tr><th>1.0.0b30</th><td>Fixed a bug with <a href="#fORMValidation-api-setMessageOrder"><tt>setMessageOrder()</tt></a> not accepting a variable number of parameters like <a href="#fValidation-api-setMessageOrder"><tt>fValidation::setMessageOrder()</tt></a> does <span class="date">3/7/11</span></td></tr><tr><th>1.0.0b29</th><td>Updated <a href="#fORMValidation-api-addManyToManyRule"><tt>addManyToManyRule()</tt></a> and <a href="#fORMValidation-api-addOneToManyRule"><tt>addOneToManyRule()</tt></a> to prefix any namespace from <tt>$class</tt> to <tt>$related_class</tt> if not already present <span class="date">11/24/10</span></td></tr><tr><th>1.0.0b28</th><td>Updated the class to work with the new nested array structure for validation messages <span class="date">10/3/10</span></td></tr><tr><th>1.0.0b27</th><td>Fixed <a href="#fORMValidation-api-hasValue"><tt>hasValue()</tt></a> to properly detect zero-value floats, made <a href="#fORMValidation-api-hasValue"><tt>hasValue()</tt></a> internal public <span class="date">7/26/10</span></td></tr><tr><th>1.0.0b26</th><td>Improved the error message for integers to say <tt>whole number</tt> instead of just <tt>number</tt> <span class="date">5/29/10</span></td></tr><tr><th>1.0.0b25</th><td>Added <a href="#fORMValidation-api-addRegexRule"><tt>addRegexRule()</tt></a>, changed validation messages array to use column name keys <span class="date">5/26/10</span></td></tr><tr><th>1.0.0b24</th><td>Added <a href="#fORMValidation-api-addRequiredRule"><tt>addRequiredRule()</tt></a> for required columns that aren't automatically handled via schema detection <span class="date">4/6/10</span></td></tr><tr><th>1.0.0b23</th><td>Added support for checking integers and floats to ensure they fit within the range imposed by the database schema <span class="date">3/17/10</span></td></tr><tr><th>1.0.0b22</th><td>Made the value checking for one-or-more and only-one rules more robust when detecting the absence of a value <span class="date">12/17/09</span></td></tr><tr><th>1.0.0b21</th><td>Fixed a bug affecting where conditions with columns that are not null but have a default value <span class="date">11/3/09</span></td></tr><tr><th>1.0.0b20</th><td>Updated code for the new <a href="#fORMDatabase">fORMDatabase</a> and <a href="#fORMSchema">fORMSchema</a> APIs <span class="date">10/28/09</span></td></tr><tr><th>1.0.0b19</th><td>Changed SQL statements to use value placeholders, identifier escaping and schema support <span class="date">10/22/09</span></td></tr><tr><th>1.0.0b18</th><td>Fixed checkOnlyOneRule() and checkOneOrMoreRule() to consider blank strings as NULL <span class="date">8/21/09</span></td></tr><tr><th>1.0.0b17</th><td>Added @internal methods <a href="#fORMValidation-api-removeStringReplacement"><tt>removeStringReplacement()</tt></a> and <a href="#fORMValidation-api-removeRegexReplacement"><tt>removeRegexReplacement()</tt></a> <span class="date">7/29/09</span></td></tr><tr><th>1.0.0b16</th><td>Backwards Compatibility Break - renamed addConditionalValidationRule() to <a href="#fORMValidation-api-addConditionalRule"><tt>addConditionalRule()</tt></a>, addManyToManyValidationRule() to <a href="#fORMValidation-api-addManyToManyRule"><tt>addManyToManyRule()</tt></a>, addOneOrMoreValidationRule() to <a href="#fORMValidation-api-addOneOrMoreRule"><tt>addOneOrMoreRule()</tt></a>, addOneToManyValidationRule() to <a href="#fORMValidation-api-addOneToManyRule"><tt>addOneToManyRule()</tt></a>, addOnlyOneValidationRule() to <a href="#fORMValidation-api-addOnlyOneRule"><tt>addOnlyOneRule()</tt></a>, addValidValuesValidationRule() to <a href="#fORMValidation-api-addValidValuesRule"><tt>addValidValuesRule()</tt></a> <span class="date">7/13/09</span></td></tr><tr><th>1.0.0b15</th><td>Added addValidValuesValidationRule() [wb/jt, 2009-07-13]</td></tr><tr><th>1.0.0b14</th><td>Added <a href="#fORMValidation-api-addStringReplacement"><tt>addStringReplacement()</tt></a> and <a href="#fORMValidation-api-addRegexReplacement"><tt>addRegexReplacement()</tt></a> for simple validation message modification <span class="date">7/1/09</span></td></tr><tr><th>1.0.0b13</th><td>Changed <a href="#fORMValidation-api-reorderMessages"><tt>reorderMessages()</tt></a> to compare string in a case-insensitive manner <span class="date">6/30/09</span></td></tr><tr><th>1.0.0b12</th><td>Updated addConditionalValidationRule() to allow any number of <tt>$main_columns</tt>, and if any of those have a matching value, the condtional columns will be required <span class="date">6/30/09</span></td></tr><tr><th>1.0.0b11</th><td>Fixed a couple of bugs with validating related records <span class="date">6/26/09</span></td></tr><tr><th>1.0.0b10</th><td>Fixed UNIQUE constraint checking so it is only done once per constraint, fixed some UTF-8 case sensitivity issues <span class="date">6/17/09</span></td></tr><tr><th>1.0.0b9</th><td>Updated code for new <a href="#fORM">fORM</a> API <span class="date">6/15/09</span></td></tr><tr><th>1.0.0b8</th><td>Updated code to use new <a href="#fValidationException-api-formatField"><tt>fValidationException::formatField()</tt></a> method <span class="date">6/4/09</span></td></tr><tr><th>1.0.0b7</th><td>Updated <a href="#fORMValidation-api-validateRelated"><tt>validateRelated()</tt></a> to use new <a href="#fORMRelated-api-validate"><tt>fORMRelated::validate()</tt></a> method and checkRelatedOneOrMoreRule() to use new <tt>$related_records</tt> structure <span class="date">6/2/09</span></td></tr><tr><th>1.0.0b6</th><td>Changed date/time/timestamp checking from <tt>strtotime()</tt> to <a href="#fDate">fDate</a>/<a href="#fTime">fTime</a>/<a href="#fTimestamp">fTimestamp</a> for better localization support <span class="date">6/1/09</span></td></tr><tr><th>1.0.0b5</th><td>Fixed a bug in checkOnlyOneRule() where no values would not be flagged as an error <span class="date">4/23/09</span></td></tr><tr><th>1.0.0b4</th><td>Fixed a bug in checkUniqueConstraints() related to case-insensitive columns <span class="date">2/15/09</span></td></tr><tr><th>1.0.0b3</th><td>Implemented proper fix for addManyToManyValidationRule() <span class="date">12/12/08</span></td></tr><tr><th>1.0.0b2</th><td>Fixed a bug with addManyToManyValidationRule() <span class="date">12/8/08</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">8/4/07</span></td></tr></table></div>
<div class="class_methods static" id="fORMValidation-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fORMValidation-api-addConditionalRule" class="method static"><span class="resolution">::</span><span class="name">addConditionalRule()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Adds a conditional rule</p>
								<p>If a non-empty value is found in one of the <tt>$main_columns</tt>, or if  specified, a value from the <tt>$conditional_values</tt> array, all of the  <tt>$conditional_columns</tt> will also be required to have a value.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">addConditionalRule</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string|array</span> <span class="php-var">$main_columns</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$conditional_values</span><span class="php-code">,</span> <span class="php-vartype">string|array</span> <span class="php-var">$conditional_columns</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class this rule applies to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string|array</td>
				<td class="param_name">$main_columns</td>
				<td class="param_description">The column(s) to check for a value</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$conditional_values</td>
				<td class="param_description">If <tt>NULL</tt>, any value in the main column will trigger the conditional column(s), otherwise the value must match this scalar value or be present in the array of values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string|array</td>
				<td class="param_name">$conditional_columns</td>
				<td class="param_description">The column(s) that are to be required</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMValidation-api-addManyToManyRule" class="method static"><span class="resolution">::</span><span class="name">addManyToManyRule()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Add a many-to-many rule that requires at least one related record is associated with the current record</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">addManyToManyRule</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class to add the rule for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The name of the related class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to the related class</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMValidation-api-addOneOrMoreRule" class="method static"><span class="resolution">::</span><span class="name">addOneOrMoreRule()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Adds a one-or-more rule that requires at least one of the columns specified has a value</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">addOneOrMoreRule</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$columns</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class the columns exists in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$columns</td>
				<td class="param_description">The columns to check</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMValidation-api-addOneToManyRule" class="method static"><span class="resolution">::</span><span class="name">addOneToManyRule()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Add a one-to-many rule that requires at least one related record is associated with the current record</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">addOneToManyRule</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$related_class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$route</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class to add the rule for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$related_class</td>
				<td class="param_description">The name of the related class</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$route</td>
				<td class="param_description">The route to the related class</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMValidation-api-addOnlyOneRule" class="method static"><span class="resolution">::</span><span class="name">addOnlyOneRule()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Add an only-one rule that requires exactly one of the columns must have a value</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">addOnlyOneRule</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$columns</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class the columns exists in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$columns</td>
				<td class="param_description">The columns to check</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMValidation-api-addRegexReplacement" class="method static"><span class="resolution">::</span><span class="name">addRegexReplacement()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Adds a call to <a class="ext-link" href="http://php.net/preg_replace"><span class="icon"><tt>preg_replace()</tt></span></a> for each message</p>
								<p>Regex replacement is done after the <tt>post::validate()</tt> hook, and right  before the messages are reordered.</p><p>If a message is an empty string after replacement, it will be  removed from the list of messages.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">addRegexReplacement</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$search</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$replace</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class the columns exists in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$search</td>
				<td class="param_description">The PCRE regex to search for - see <a class="ext-link" href="http://php.net/pcre"><span class="icon">http://php.net/pcre</span></a> for details</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$replace</td>
				<td class="param_description">The string to replace with - all $ and \ are used in back references and must be escaped with a \ when meant literally</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMValidation-api-addRegexRule" class="method static"><span class="resolution">::</span><span class="name">addRegexRule()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Adds a rule to validate a column against a PCRE regular expression - the rule is not run if the value is <tt>NULL</tt></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">addRegexRule</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$regex</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$message</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class the columns exists in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to match with the regex</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$regex</td>
				<td class="param_description">The PCRE regex to match against - see <a class="ext-link" href="http://php.net/pcre"><span class="icon">http://php.net/pcre</span></a> for details</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message to use if the value does not match the regular expression</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMValidation-api-addRequiredRule" class="method static"><span class="resolution">::</span><span class="name">addRequiredRule()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Requires that a column have a non-<tt>NULL</tt> value</p>
								<p>Before using this method, try setting the database column to <tt>NOT NULL</tt>  and remove any default value. Such a configuration will trigger the same  functionality as this method, and will enforce the rule on the database  level for any other code that queries it.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">addRequiredRule</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$columns</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class the column(s) exists in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$columns</td>
				<td class="param_description">The column or columns to check - each column will require a value</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMValidation-api-addStringReplacement" class="method static"><span class="resolution">::</span><span class="name">addStringReplacement()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Adds a call to <a class="ext-link" href="http://php.net/str_replace"><span class="icon"><tt>str_replace()</tt></span></a> for each message</p>
								<p>String replacement is done after the <tt>post::validate()</tt> hook, and right  before the messages are reordered.</p><p>If a message is an empty string after replacement, it will be  removed from the list of messages.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">addStringReplacement</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$search</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$replace</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class the columns exists in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$search</td>
				<td class="param_description">The string to search for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$replace</td>
				<td class="param_description">The string to replace with</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMValidation-api-addValidValuesRule" class="method static"><span class="resolution">::</span><span class="name">addValidValuesRule()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Restricts a column to having only a value from the list of valid values</p>
								<p>Please note that <tt>NULL</tt> values are always allowed, even if not listed in  the <tt>$valid_values</tt> array, if the column is not set as <tt>NOT NULL</tt>.</p><p>This functionality can also be accomplished by added a <tt>CHECK</tt> constraint  on the column in the database, or using a MySQL <tt>ENUM</tt> data type.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">addValidValuesRule</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$valid_values</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class this rule applies to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to validate</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$valid_values</td>
				<td class="param_description">The valid values to check - <tt>NULL</tt> values are always allows if the column is not set to <tt>NOT NULL</tt></td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMValidation-api-hasValue" class="protected method static"><span class="resolution">::</span><span class="name">hasValue()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Checks to see if a columns has a value, but based on the schema and if the column allows NULL</p>
								<p>If the columns allows NULL values, than anything other than NULL  will be returned as TRUE. If the column does not allow NULL and  the value is anything other than the &quot;empty&quot; value for that data type,  then TRUE will be returned.</p><p>The values that are considered &quot;empty&quot; for each data type are as follows.  Please note that there is no &quot;empty&quot; value for dates, times or  timestamps.  </p><ul><li>Blob: ''</li><li>Boolean: FALSE</li><li>Float: 0.0</li><li>Integer: 0</li><li>String: ''</li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">hasValue</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fSchema">fSchema</a></span> <span class="php-var">$schema</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype"></span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$columns</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fSchema">fSchema</a></td>
				<td class="param_name">$schema</td>
				<td class="param_description">The schema object for the table</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class the column is part of</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">An associative array of all values for the record</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$columns</td>
				<td class="param_description">The column to check</td>
			  </tr>
						  <tr>
				<td class="param_data_type"></td>
				<td class="param_name">$column</td>
				<td class="param_description"></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					An error message for the rule
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMValidation-api-inspect" class="protected method static"><span class="resolution">::</span><span class="name">inspect()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Adds metadata about features added by this class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">inspect</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$metadata</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class being inspected</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column being inspected</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$metadata</td>
				<td class="param_description">The array of metadata about a column</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMValidation-api-removeRegexReplacement" class="protected method static"><span class="resolution">::</span><span class="name">removeRegexReplacement()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Removes a regex replacement</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">removeRegexReplacement</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$search</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$replace</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class the columns exists in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$search</td>
				<td class="param_description">The string to search for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$replace</td>
				<td class="param_description">The string to replace with</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMValidation-api-removeStringReplacement" class="protected method static"><span class="resolution">::</span><span class="name">removeStringReplacement()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Removes a string replacement</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">removeStringReplacement</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$search</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$replace</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class the columns exists in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$search</td>
				<td class="param_description">The string to search for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$replace</td>
				<td class="param_description">The string to replace with</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMValidation-api-reorderMessages" class="protected method static"><span class="resolution">::</span><span class="name">reorderMessages()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Reorders list items in an html string based on their contents</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">reorderMessages</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$messages</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to reorder messages for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$messages</td>
				<td class="param_description">An array of the messages</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The reordered messages
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMValidation-api-replaceMessages" class="protected method static"><span class="resolution">::</span><span class="name">replaceMessages()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Takes a list of messages and performs string and regex replacements on them</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">replaceMessages</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$messages</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to reorder messages for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$messages</td>
				<td class="param_description">The array of messages</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The new array of messages
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMValidation-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMValidation-api-setColumnCaseInsensitive" class="method static"><span class="resolution">::</span><span class="name">setColumnCaseInsensitive()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets a column to be compared in a case-insensitive manner when checking <tt>UNIQUE</tt> and <tt>PRIMARY KEY</tt> constraints</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setColumnCaseInsensitive</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or instance of the class the column is located in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to set as case-insensitive</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fORMValidation-api-setMessageOrder" class="method static"><span class="resolution">::</span><span class="name">setMessageOrder()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Allows setting the order that the list items in a message will be displayed</p>
								<p>All string comparisons during the reordering process are done in a  case-insensitive manner.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setMessageOrder</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$matches</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class name or an instance of the class to set the message order for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$matches</td>
				<td class="param_description">This should be an ordered array of strings. If a line contains the string it will be displayed in the relative order it occurs in this array.</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMValidation-api-validate" class="protected method static"><span class="resolution">::</span><span class="name">validate()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Validates values for an <a href="#fActiveRecord">fActiveRecord</a> object against the database schema and any additional rules that have been added</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">validate</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$old_values</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The instance of the class to validate</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$values</td>
				<td class="param_description">The values to validate</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$old_values</td>
				<td class="param_description">The old values for the record</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					An array of messages
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fORMValidation-api-validateRelated" class="protected method static"><span class="resolution">::</span><span class="name">validateRelated()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Validates related records for an <a href="#fActiveRecord">fActiveRecord</a> object</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">validateRelated</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$object</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$values</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$related_records</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$object</td>
				<td class="param_description">The object to validate</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$values</td>
				<td class="param_description">The values for the object</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$related_records</td>
				<td class="param_description">The related records for the object</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					An array of messages
				</p>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fProgrammerException">fProgrammerException</h2>
<div class="sidebar">
<h3 id="fProgrammerException-docs-ClassResources" toc-skip="1">Class Resources </h3>

<ul>
<li><strong><a href="#fProgrammerException">Class Documentation</a></strong></li>
<li><a href="#fProgrammerException-api">API Reference</a></li>
</ul>

<h3 id="fProgrammerException-docs-ExceptionClasses" toc-skip="1">Exception Classes </h3>

<ul>
<li><a href="#fException">fException</a>
<ul>
<li><a href="#fExpectedException">fExpectedException</a>
<ul>
<li><a href="#fAuthorizationException">fAuthorizationException</a></li>
<li><a href="#fEmptySetException">fEmptySetException</a></li>
<li><a href="#fNoRemainingException">fNoRemainingException</a></li>
<li><a href="#fNoRowsException">fNoRowsException</a></li>
<li><a href="#fNotFoundException">fNotFoundException</a></li>
<li><a href="#fValidationException">fValidationException</a></li>
</ul>
</li>
<li><a href="#fUnexpectedException">fUnexpectedException</a>
<ul>
<li><a href="#fConnectivityException">fConnectivityException</a></li>
<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
<li><strong>fProgrammerException</strong></li>
<li><a href="#fSQLException">fSQLException</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<p>
fProgrammerException is a sub-class of <a href="#fUnexpectedException">fUnexpectedException</a> that indicates the programmer has written invalid code that will not allow for further execution. This exception is one of the most prevalent in the Flourish code base and is used to indicate improper parameter values, incorrect code sequencing and similar errors.
</p>

<p>
<em>This space intentionally left blank</em>
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fProgrammerException-api">fProgrammerException API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fProgrammerException">Class Documentation</a></li>
		<li><strong><a href="#fProgrammerException-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fUnexpectedException">fUnexpectedException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fAuthorization">fAuthorization</a></li>
		<li><a href="#fBuffer">fBuffer</a></li>
		<li><a href="#fCache">fCache</a></li>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fCryptography">fCryptography</a></li>
		<li><a href="#fDatabase">fDatabase</a></li>
		<li><a href="#fDate">fDate</a></li>
		<li><a href="#fDirectory">fDirectory</a></li>
		<li><a href="#fEmail">fEmail</a></li>
		<li><a href="#fFile">fFile</a></li>
		<li><a href="#fFilesystem">fFilesystem</a></li>
		<li><a href="#fGrammar">fGrammar</a></li>
		<li><a href="#fImage">fImage</a></li>
		<li><a href="#fMailbox">fMailbox</a></li>
		<li><a href="#fMoney">fMoney</a></li>
		<li><a href="#fNumber">fNumber</a></li>
		<li><a href="#fORM">fORM</a></li>
		<li><a href="#fORMColumn">fORMColumn</a></li>
		<li><a href="#fORMDatabase">fORMDatabase</a></li>
		<li><a href="#fORMDate">fORMDate</a></li>
		<li><a href="#fORMFile">fORMFile</a></li>
		<li><a href="#fORMMoney">fORMMoney</a></li>
		<li><a href="#fORMOrdering">fORMOrdering</a></li>
		<li><a href="#fORMRelated">fORMRelated</a></li>
		<li><a href="#fORMSchema">fORMSchema</a></li>
		<li><a href="#fORMValidation">fORMValidation</a></li>
		<li><a href="#fPagination">fPagination</a></li>
		<li><a href="#fRecordSet">fRecordSet</a></li>
		<li><a href="#fRequest">fRequest</a></li>
		<li><a href="#fResult">fResult</a></li>
		<li><a href="#fSMTP">fSMTP</a></li>
		<li><a href="#fSchema">fSchema</a></li>
		<li><a href="#fSession">fSession</a></li>
		<li><a href="#fStatement">fStatement</a></li>
		<li><a href="#fTemplating">fTemplating</a></li>
		<li><a href="#fText">fText</a></li>
		<li><a href="#fTime">fTime</a></li>
		<li><a href="#fTimestamp">fTimestamp</a></li>
		<li><a href="#fURL">fURL</a></li>
		<li><a href="#fUTF8">fUTF8</a></li>
		<li><a href="#fUnbufferedResult">fUnbufferedResult</a></li>
		<li><a href="#fUpload">fUpload</a></li>
		<li><a href="#fValidation">fValidation</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
		<li><a href="#fXML">fXML</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b</span></div>
<p class="short_description">An exception caused by programmer error</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="genealogy">	
	<h4>Genealogy</h4>
		<div class="class_tree">
		<h5>Class Tree</h5>
		<pre class="class_tree">Exception
   |
   --<a href="#fException">fException</a>
      |
      --<a href="#fUnexpectedException">fUnexpectedException</a>
         |
         --fProgrammerException</pre>
	</div>
		<div class="inherited_variables">
	<h5>Inherited Variables</h5>
		<dl>
		<dt class="protected">$code</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$file</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$line</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$message</dt>
	<dd class="protected"> </dd>
		<dt class="private">$previous</dt>
	<dd class="private"> </dd>
		<dt class="private">$string</dt>
	<dd class="private"> </dd>
		<dt class="private">$trace</dt>
	<dd class="private"> </dd>
		</dl>
		</div>
		<div class="inherited_methods">
	<h5>Inherited Methods</h5>
		<dl>
	  	  <dt class="public"><a href="#fUnexpectedException-api-printMessage"><tt>fUnexpectedException::printMessage()</tt></a></dt>
	  <dd class="public">Prints out a generic error message inside of a <tt>div</tt> with the class being <tt>'exception {exception_class_name}'</tt></dd>
	  	</dl>
		<dl>
	  	  <dt class="public"><a href="#fException-api-__construct"><tt>fException::__construct()</tt></a></dt>
	  <dd class="public">Sets the message for the exception, allowing for string interpolation and internationalization</dd>
	  	  <dt class="public"><a href="#fException-api-__get"><tt>fException::__get()</tt></a></dt>
	  <dd class="public">All requests that hit this method should be requests for callbacks</dd>
	  	  <dt class="protected"><a href="#fException-api-compose"><tt>fException::compose()</tt></a></dt>
	  <dd class="protected">Composes text using <a href="#fText">fText</a> if loaded</dd>
	  	  <dt class="protected"><a href="#fException-api-dump"><tt>fException::dump()</tt></a></dt>
	  <dd class="protected">Creates a string representation of any variable using predefined strings for booleans, <tt>NULL</tt> and empty strings</dd>
	  	  <dt class="public"><a href="#fException-api-formatTrace"><tt>fException::formatTrace()</tt></a></dt>
	  <dd class="public">Gets the backtrace to currently called exception</dd>
	  	  <dt class="protected"><a href="#fException-api-getCSSClass"><tt>fException::getCSSClass()</tt></a></dt>
	  <dd class="protected">Returns the CSS class name for printing information about the exception</dd>
	  	  <dt class="protected"><a href="#fException-api-prepare"><tt>fException::prepare()</tt></a></dt>
	  <dd class="protected">Prepares content for output into HTML</dd>
	  	  <dt class="public"><a href="#fException-api-printMessage"><tt>fException::printMessage()</tt></a></dt>
	  <dd class="public">Prints the message inside of a div with the class being 'exception %THIS_EXCEPTION_CLASS_NAME%'</dd>
	  	  <dt class="public"><a href="#fException-api-printTrace"><tt>fException::printTrace()</tt></a></dt>
	  <dd class="public">Prints the backtrace to currently called exception inside of a pre tag with the class being 'exception %THIS_EXCEPTION_CLASS_NAME% trace'</dd>
	  	  <dt class="public"><a href="#fException-api-registerCallback"><tt>fException::registerCallback()</tt></a></dt>
	  <dd class="public">Adds a callback for when certain types of exceptions are created</dd>
	  	  <dt class="public"><a href="#fException-api-reorderMessage"><tt>fException::reorderMessage()</tt></a></dt>
	  <dd class="public">Reorders list items in the message based on simple string matching</dd>
	  	  <dt class="public"><a href="#fException-api-setMessage"><tt>fException::setMessage()</tt></a></dt>
	  <dd class="public">Allows the message to be overwriten</dd>
	  	  <dt class="public"><a href="#fException-api-splitMessage"><tt>fException::splitMessage()</tt></a></dt>
	  <dd class="public">Splits an exception with an HTML list into multiple strings each containing part of the original message</dd>
	  	</dl>
		<dl>
	  	  <dt class="public">constructor __construct ( [$message = ], [$code = ], [$previous = ] )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__clone (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__toString (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getCode (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getFile (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getLine (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getMessage (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getPrevious (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTrace (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTraceAsString (  )</dt>
	  <dd class="public"></dd>
	  	</dl>
		</div>
	</div>			</section>
		</div>
		<section class="main">
<h2 id="fRecordSet">fRecordSet</h2>
<div class="sidebar">
<h3 id="fRecordSet-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fRecordSet">Class Documentation</a></strong></li>
<li><a href="#fRecordSet-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fRecordSet-docs-Creation">Creation</a>
<ul>
<li><a href="#fRecordSet-docs-FromConditions">From Conditions</a>
<ul>
<li><a href="#fRecordSet-docs-ColumnSpecifications">Column Specifications</a></li>
<li><a href="#fRecordSet-docs-Operators">Operators</a></li>
<li><a href="#fRecordSet-docs-ORConditions">OR Conditions</a></li>
<li><a href="#fRecordSet-docs-AggregateFunctions">Aggregate Functions</a></li>
<li><a href="#fRecordSet-docs-ComparingColumns">Comparing Columns</a></li>
<li><a href="#fRecordSet-docs-Ordering">Ordering</a></li>
</ul>
</li>
<li><a href="#fRecordSet-docs-FromRecords">From Records</a>
<ul>
<li><a href="#fRecordSet-docs-Pagination">Pagination</a></li>
<li><a href="#fRecordSet-docs-DifferentRecordClasses">Different Record Classes</a></li>
</ul>
</li>
<li><a href="#fRecordSet-docs-FromSQL">From SQL</a>
<ul>
<li><a href="#fRecordSet-docs-LimitClausesPagination">Limit Clauses/Pagination</a></li>
<li><a href="#fRecordSet-docs-EscapingValuesintoSQL">Escaping Values into SQL</a></li>
</ul>
</li>
<li><a href="#fRecordSet-docs-FromCallandMap">From Call and Map</a></li>
<li><a href="#fRecordSet-docs-FromRelatedRecords">From Related Records</a></li>
</ul>
</li>
<li><a href="#fRecordSet-docs-RecordAccess">Record Access</a>
<ul>
<li><a href="#fRecordSet-docs-Iteration">Iteration</a></li>
<li><a href="#fRecordSet-docs-IndividualRecords">Individual Records</a></li>
<li><a href="#fRecordSet-docs-AllRecords">All Records</a></li>
</ul>
</li>
<li><a href="#fRecordSet-docs-MetadataAccess">Metadata Access</a>
<ul>
<li><a href="#fRecordSet-docs-Size">Size</a></li>
<li><a href="#fRecordSet-docs-Limit">Limit</a></li>
<li><a href="#fRecordSet-docs-PagePages">Page/Pages</a></li>
<li><a href="#fRecordSet-docs-PrimaryKeys">Primary Keys</a></li>
<li><a href="#fRecordSet-docs-ClassNames">Class Names</a></li>
</ul>
</li>
<li><a href="#fRecordSet-docs-Manipulation">Manipulation</a>
<ul>
<li><a href="#fRecordSet-docs-MapReduceFilterandCall">Map, Reduce, Filter and Call</a>
<ul>
<li><a href="#fRecordSet-docs-Map">Map</a></li>
<li><a href="#fRecordSet-docs-Reduce">Reduce</a></li>
<li><a href="#fRecordSet-docs-Filter">Filter</a></li>
<li><a href="#fRecordSet-docs-Call">Call</a></li>
</ul>
</li>
<li><a href="#fRecordSet-docs-PreloadingRelatedRecords">Preloading Related Records</a></li>
<li><a href="#fRecordSet-docs-SliceMergeDiffIntersectUniqueandContainsOperations">Slice, Merge, Diff, Intersect, Unique and Contains Operations</a>
<ul>
<li><a href="#fRecordSet-docs-slice">slice()</a></li>
<li><a href="#fRecordSet-docs-merge">merge()</a></li>
<li><a href="#fRecordSet-docs-diff">diff()</a></li>
<li><a href="#fRecordSet-docs-intersect">intersect()</a></li>
<li><a href="#fRecordSet-docs-unique">unique()</a></li>
</ul>
</li>
<li><a href="#fRecordSet-docs-ChunkandSplitOperations">Chunk and Split Operations</a>
<ul>
<li><a href="#fRecordSet-docs-chunk">chunk()</a></li>
<li><a href="#fRecordSet-docs-split">split()</a></li>
</ul>
</li>
<li><a href="#fRecordSet-docs-CheckingforaRecord">Checking for a Record</a></li>
<li><a href="#fRecordSet-docs-Sorting">Sorting</a></li>
</ul>
</li>
</ul>

<h3 id="fRecordSet-docs-ORMClasses">ORM Classes </h3>

<ul>
<li><a href="#fActiveRecord">fActiveRecord</a></li>
<li><strong>fRecordSet</strong></li>
</ul>

<ul>
<li><a href="#fORM">fORM</a></li>
<li><a href="#fORMColumn">fORMColumn</a></li>
<li><a href="#fORMDatabase">fORMDatabase</a></li>
<li><a href="#fORMDate">fORMDate</a></li>
<li><a href="#fORMFile">fORMFile</a></li>
<li><a href="#fORMJSON">fORMJSON</a></li>
<li><a href="#fORMMoney">fORMMoney</a></li>
<li><a href="#fORMOrdering">fORMOrdering</a></li>
<li><a href="#fORMRelated">fORMRelated</a></li>
<li><a href="#fORMSchema">fORMSchema</a></li>
<li><a href="#fORMValidation">fORMValidation</a></li>
</ul>
</div>

<p>
The fRecordSet class provides functionality to load sets of <a href="#fActiveRecord">fActiveRecord</a> objects from the database and manipulate them.
</p>

<p>
Since the class contains quite a number of features and handles finding data even with complex database schemas, having an example database schema to reference is important. The following database tables will be used as the basis for the examples on this page:
</p>
<pre class="block sql"><code>CREATE TABLE groups (
    name VARCHAR(100) PRIMARY KEY
);
 
CREATE TABLE users (
    user_id SERIAL PRIMARY KEY,
    email VARCHAR(100) NOT NULL UNIQUE,
    password VARCHAR(100) NOT NULL,
    first_name VARCHAR(100) NOT NULL,
    last_name VARCHAR(100) NOT NULL,
    address VARCHAR(255) NOT NULL,
    city VARCHAR(100) NOT NULL,
    state VARCHAR(2) NOT NULL,
    zip_code VARCHAR(10) NOT NULL,
    date_created TIMESTAMP NOT NULL,
    last_login TIMESTAMP NOT NULL,
    status VARCHAR(20) NOT NULL CHECK(status IN ('Active', 'Inactive'))
);
 
CREATE TABLE users_groups (
    group VARCHAR(100) NOT NULL REFERENCES groups(name) ON DELETE CASCADE,
    user_id INTEGER NOT NULL REFERENCES users(user_id) ON DELETE CASCADE,
    PRIMARY KEY (group, user_id)
);
 
CREATE TABLE favorites (
    favorite_id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL REFERENCES users(user_id) ON DELETE CASCADE,
    url VARCHAR(255) NOT NULL
);
 
CREATE TABLE resources (
    resource_id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    owner INTEGER NOT NULL REFERENCES users(user_id) ON DELETE RESTRICT
);
 
CREATE TABLE read_permissions (
    resource_id INTEGER NOT NULL REFERENCES resources(resource_id) ON DELETE CASCADE,
    user_id INTEGER NOT NULL REFERENCES users(user_id) ON DELETE CASCADE,
    PRIMARY KEY (resource_id, user_id)
);
</code></pre>

<h3 id="fRecordSet-docs-Creation">Creation</h3>

<p>
Record sets can be created from simple condition arrays, SQL statements, or <a href="#fActiveRecord-docs-BuildingandCounting">from an fActiveRecord class</a>. Under the majority of circumstances, the shorthand condition array method provides for an efficient and expressive method to build a record set.
</p>

<h4 id="fRecordSet-docs-FromConditions">From Conditions</h4>

<p>
The static method <a href="#fRecordSet-api-build"><code>build()</code></a> accepts between one and five parameters to build a record set. The only required parameter is the first, <code>$class</code>, which specified the type of record to build. Passing on this parameter will cause <em>all</em> records of that type to be created in the set.
</p>
<pre class="block php"><code>$users = fRecordSet::build('User');</code></pre>

<p>
 The second parameter is the array of <code>$where_conditions</code>. This parameter accepts an array that contains columns and operaters as the key and the value(s) to match as the value. A simple example of matching all users with a status of <code>Active</code> is shown below:
</p>
<pre class="block php"><code>$active_users = fRecordSet::build(
    'User',
    array('status=' =&gt; 'Active')
);</code></pre>

<p>
 Each <code>key =&gt; value</code> pair in the conditions array represents a single expression that will be joined by <code>AND</code> logic to create there <code>WHERE</code> clause. It is also possible, with slightly different syntax, to create simple <code>OR</code> conditions and use aggregate functions in the <code>HAVING</code> clause.
</p>

<h5 id="fRecordSet-docs-ColumnSpecifications">Column Specifications</h5>

<p>
The column name can be any column in the record being created, or can be columns in related records. The following example would select users in a group with the name <code>Administrators</code>:
</p>
<pre class="block php"><code>$administrators = fRecordSet::build(
    'User',
    array('groups.name=' =&gt; 'Administrators')
);</code></pre>

<p>
 It is also possible to specify columns in a table that is twice-removed from the record being created. The following example would create the groups that contain users who have a favorite including <code>http://example.com</code>:
</p>
<pre class="block php"><code>$groups = fRecordSet::build(
    'Group',
    array('users=&gt;favorites.url=' =&gt; 'http://example.com')
);</code></pre>

<p>
 When there is more than one relationship between two tables, the relationship route can be specified by putting it in <code>{}</code> after the table name. For example, the following SQL would select all users who are the owner of a resource called <code>money</code>:
</p>
<pre class="block php"><code>$owners = fRecordSet::build(
    'User',
    array('resources{owner}.name=' =&gt; 'money')
);</code></pre>

<h5 id="fRecordSet-docs-Operators">Operators</h5>

<p>
All of the examples in the column specification section above use a simple equation operator, <code>=</code>. The following is a list of all supported operators:
</p>

<ul>
<li><code>=</code> - equal</li>
<li><code>!</code> - not equal</li>
<li><code>&lt;</code> - less than</li>
<li><code>&lt;=</code> - less than or equal to</li>
<li><code>&gt;</code> - greater than</li>
<li><code>&gt;=</code> - greater than or equal to</li>
<li><code>~</code> - <code>LIKE '%value%'</code> match</li>
<li><code>!~</code> - <code>NOT LIKE '%value%'</code> match</li>
<li><code>^~</code> - <code>LIKE 'value%'</code> match</li>
<li><code>$~' - </code>LIKE '%value'<code> match

All seven operators work with any single value, and will properly handle the SQL variations neededsuch as </code>=<code> becoming </code>IS<code> for </code>NULL<code> values. Below are some examples:

{{{
#!php
// All users with any name but John
$users = fRecordSet::build('User', array('first_name!' =&gt; 'John'));

// Any user created before 2008
$users = fRecordSet::build('User', array('date_created&lt;' =&gt; '2008-01-01'));

// Any resource that include blue in the name
$resources = fRecordSet::build('Resource', array('name~' =&gt; 'blue'));
</code></li>
</ul>

<p>
The <code>=</code>, <code>!</code>, <code>~</code> and <code>!~</code> operators also support comparison with an array of values. The following example will find all users with the first name <code>James</code> or <code>John</code>:
</p>
<pre class="block php"><code>$users = fRecordSet::build(
    'User',
    array('first_name=' =&gt; array('James', 'John'))
);</code></pre>

<p>
 This example will return all users with a name like <code>Joe</code> or <code>Fred</code>:
</p>
<pre class="block php"><code>$users = fRecordSet::build(
    'User',
    array('first_name~' =&gt; array('Joe', 'Fred'))
);</code></pre>

<p>
 It is also possible to do <code>~</code> matching over multiple columns. If a single string value is set for such a condition, it will be parsed for individual words and quoted phrases. In addition, stop words (such as &quot;the&quot; and &quot;a&quot;) will be removed from the parsed words and punctuation will be stripped from the beginning and end of each word parsed.
</p>

<p>
The following example would find any users that contained <code>john</code>, <code>smith</code> and <code>west peabody</code> in any combination of the <code>first_name</code>, <code>last_name</code>, <code>address</code> and <code>city</code> columns:
</p>
<pre class="block php"><code>$users = fRecordSet::build(
    'User',
    array('first_name|last_name|address|city~' =&gt; 'john &quot;west peabody&quot; smith.')
);</code></pre>

<p>
 If another method of parsing search terms is required, it is also possible to specify the value of the conditions as an array of string to match. In this case no further parsing will be done.
</p>

<p>
There are two other operators available that work with multiple values, the <code>&amp;~</code> (AND LIKE) and <code>&gt;&lt;</code> (intersection) operators.
</p>

<p>
<code>&amp;~</code> accepts two or more <code>LIKE</code> patterns and requires that each values match <em>every</em> pattern. The example below would require that the persons email include both <code>example.com</code> and <code>john</code>:
</p>
<pre class="block php"><code>$users = fRecordSet::build(
    'User',
    array('email&amp;~' =&gt; array('example.com', 'john'))
);</code></pre>

<p>
 The intersection operator works with ranges of values, so it is really only applicable to date/time and numeric fields. It requires two columns in the database table and two values to compare with. If the range of values in the two database columns in any way intersects the range between the two values specified, a match will be made.
</p>

<p>
For example, if there is an events table in the database that has a start and end date, it is possible to find any single or multi-day events that will occur during the next week with the following code:
</p>
<pre class="block php"><code>$events = fRecordSet::build(
    'Event',
    array('start_date|end_date&gt;&lt;' =&gt; array(new fDate(), new fDate('+7 days')))
);</code></pre>

<h5 id="fRecordSet-docs-ORConditions">OR Conditions</h5>

<p>
While adding <code>key =&gt; value</code> pairs to the conditions array always joins the conditions using <code>AND</code> logic, it is possible to create simple <code>OR</code> conditions too. If the array key is two or more column specifications with operators, separated by <code>|</code>, and the value is an array of values equal in size to the number of column specifications, an <code>OR</code> condition will be created.
</p>

<p>
The following example will return all users with the first name <code>John</code> or that were created after January 1st, 2008:
</p>
<pre class="block php"><code>$users = fRecordSet::build(
    'User',
    array('first_name=|date_created&gt;' =&gt; array('John', '2008-01-01'))
);</code></pre>

<p>
 These <code>OR</code> conditions dont have any technical restrictions, however may become unwieldy to maintain if they are too complex. 
</p>

<h5 id="fRecordSet-docs-AggregateFunctions">Aggregate Functions</h5>

<p>
Aggregate functions are supported in place of single columns for all operators in the conditions array. Currently the aggregate functions <code>AVG()</code>, <code>COUNT()</code>, <code>MAX()</code>, <code>MIN()</code> and <code>SUM()</code> are supported. The following example will return all users who are part of two or more groups:
</p>
<pre class="block php"><code>$users = fRecordSet::build(
    'User',
    array('count(groups.name)&gt;=' =&gt; 2)
);</code></pre>

<p>
 Conditions using aggregate functions will be automatically placed into the <code>HAVING</code> clause of the query that is executed.
</p>

<h5 id="fRecordSet-docs-ComparingColumns">Comparing Columns</h5>

<p>
In addition to being able to compare columns to values, it is also possible to compare two columns with each other. These comparisons use a slight modified version of the standard operators, where a <code>:</code> is appended.
</p>

<ul>
<li><code>=:</code> - compare equality of two columns</li>
<li><code>!:</code> - compare inequality of two columns</li>
<li><code>&lt;:</code> - if the first column is less than the second</li>
<li><code>&lt;=:</code> - if the first column is less than or equal to the second</li>
<li><code>&gt;:</code> - if the first column is greater than the second</li>
<li><code>&gt;=:</code> - if the first column is greater than or equal to the second</li>
</ul>
<pre class="block php"><code>// Find users who have only ever logged in when they created their account
$users = fRecordSet::build(
    'User',
    array('date_created=:' =&gt; 'last_login')
);</code></pre>

<p>
 It is also possible to use the column comparison operators with aggregate functions.
</p>

<h5 id="fRecordSet-docs-Ordering">Ordering</h5>

<p>
When building a record set from conditions, it is also possible to pass an array of <code>$order_bys</code> to specify the order in which the records are returned. The <code>$order_bys</code> parameter is an associative array of the column name, or expression, to order by as the key, and the direction to sort as the value.
</p>

<p>
The following example sort the users by their status, in an ascending manner:
</p>
<pre class="block php"><code>$users = fRecordSet::build(
    'User',
    array('status=' =&gt; 'Active'),
    array('status' =&gt; 'asc')
);</code></pre>

<p>
 In addition to being able to sort by columns, it is also possible to sort by expressions, such as <code>CASE</code> statements, and by aggregate functions, such as <code>COUNT()</code>, on related tables. The following example sorts by the number of groups the user is part of in a descending manner:
</p>
<pre class="block php"><code>$users = fRecordSet::build(
    'User',
    array('status=' =&gt; 'Active'),
    array('count(groups.name)' =&gt; 'desc')
);</code></pre>

<h4 id="fRecordSet-docs-FromRecords">From Records</h4>

<p>
In certain situations it may be necessary to create a record set from record objects that have already been loaded from the database. The method <a href="#fRecordSet-api-buildFromArray"><code>buildFromArray()</code></a> requires two parameters, the <code>$class</code> of record to create the set for and an array of <code>$records</code> to put in the set.
</p>
<pre class="block php"><code>$users = fRecordSet::buildFromArray('User', array($user1, $user2, $user3));</code></pre>

<h5 id="fRecordSet-docs-Pagination">Pagination</h5>

<p>
It is possible to pass information for use with pagination as the <code>$total_records</code>, <code>$limit</code> and <code>$page</code> parameters. These values power the methods <a href="#fRecordSet-api-getLimit"><code>getLimit()</code></a>, <a href="#fRecordSet-api-getPage"><code>getPage()</code></a> and <a href="#fRecordSet-api-getPages"><code>getPages()</code></a>. <em>The actual pagination of the records should either be done before the array is passed, or via the <a href="#fRecordSet-api-slice"><code>slice()</code></a> method.</em>
</p>
<pre class="block php"><code>$users = fRecordSet::buildFromArray(
    'User',
    array($user1, $user2, $user3),
    8, // $total_records
    3, // $limit
    1  // $page
);</code></pre>

<h5 id="fRecordSet-docs-DifferentRecordClasses">Different Record Classes</h5>

<p>
With <code>buildFromArray()</code> it <strong>is</strong> possible to create a record set from two or more different types of records. To create such a set, the <code>$class</code> parameter should be changed to an array containing each class name and the <code>$records</code> array should contain the different objects.
</p>

<p>
Please note that creating a record set from more than one kind of record will disable certain manipulation methods, such as retrieving primary keys and preloading related data. The <a href="#fRecordSet-docs-Manipulation">section on manipulation</a> contains details about what methods and features are unavailable in such a circumstance.
</p>
<pre class="block php"><code>$calendar_objects = fRecordSet::buildFromArray(
    array('Event', 'Meeting'),
    array($event1, $meeting1, $event2, $event3)
);</code></pre>

<h4 id="fRecordSet-docs-FromSQL">From SQL</h4>

<p>
There are a number of limitations when using a conditions array to create a record set. Specific types of <code>JOIN</code> operations, <code>GROUP BY</code> clauses and <code>OR</code> conditions are impossible, or can not be tailored to the situation. In such instances, the <a href="#fRecordSet-api-buildFromSQL"><code>buildFromSQL()</code></a> method allows a raw <a href="#FlourishSql-docs">Flourish SQL</a> statement to be passed as the source for the records.
</p>

<p>
The first parameter is the <code>$class</code> of records to create and the second is the <code>$sql</code> to retrieve the records' data.
</p>
<pre class="block php"><code>$users = fRecordSet::buildFromSQL(
    'User',
    &quot;SELECT users.* FROM users WHERE (first_name = 'John' AND last_name = 'Smith') OR date_created &lt; '2008-01-01'&quot;
);</code></pre>

<p>
 The SQL statement passed to <code>buildFromSQL()</code> should select every column for the table for the record type specified. It will often also be desired to ensure that statements using <code>JOIN</code>s along many-to-many relationships have an appropriate <code>GROUP BY</code> clause to ensure that duplicate records are not returned.
</p>

<h5 id="fRecordSet-docs-LimitClausesPagination">Limit Clauses/Pagination</h5>

<p>
If a <code>LIMIT</code> clause is used in the SQL passed to <code>buildFromSQL()</code>, it is recommended to pass a third parameter, <code>$non_limited_count_sql</code>, containing a SQL query that will return the number of rows that would be returned if no <code>LIMIT</code> clause was present. This additional SQL statement powers the functionality of <code>-&gt;count(TRUE)</code>, which counts the number of records that would be returned with no <code>LIMIT</code> clause.
</p>

<p>
In addition to the <code>$non_limited_count_sql</code>, the <code>$limit</code> and <code>$page</code> parameters should be passed to power the <a href="#fRecordSet-api-getLimit"><code>getLimit()</code></a>, <a href="#fRecordSet-api-getPage"><code>getPage()</code></a> and <a href="#fRecordSet-api-getPages"><code>getPages()</code></a> methods.
</p>
<pre class="block php"><code>$users = fRecordSet::buildFromSQL(
    'User',
    &quot;SELECT * FROM users LIMIT 5&quot;,
    &quot;SELECT count(*) FROM users&quot;,
    5, // $limit
    1  // $page
);</code></pre>

<h5 id="fRecordSet-docs-EscapingValuesintoSQL">Escaping Values into SQL</h5>

<p>
When using <a href="#fRecordSet-api-buildFromSQL"><code>buildFromSQL()</code></a>, you will usually need to include one or more dynamic values. Instead of passing a SQL string to <code>$sql</code> or <code>$non_limited_count_sql</code>, an array may be passed that contains a SQL string plus any values to escape into it.
</p>
<pre class="block php"><code>$users = fRecordSet::buildFromSQL(
    'User',
    array(&quot;SELECT * FROM users WHERE date_created &gt; %d LIMIT %i&quot;, $start_date, 5),
    array(&quot;SELECT count(*) FROM users WHERE date_created &gt; %d&quot;, $start_date),
    5, // $limit
    1  // $page
);</code></pre>

<h4 id="fRecordSet-docs-FromCallandMap">From Call and Map</h4>

<p>
Results from both <a href="#fRecordSet-docs-Call">call</a> and <a href="#fRecordSet-docs-Map">map</a> operations can be turned into record sets by the <a href="#fRecordSet-api-buildFromCall"><code>buildFromCall()</code></a> and <a href="#fRecordSet-api-buildFromMap"><code>buildFromMap()</code></a> methods. These methods take the exact same parameters as <a href="#fRecordSet-api-call"><code>call()</code></a> and <a href="#fRecordSet-api-map"><code>map()</code></a>, but take a resulting array of <a href="#fActiveRecord">fActiveRecord</a> objects and turn them into an fRecordSet.
</p>
<pre class="block php"><code>// This creates a record set of the owners for a set of
// resources by calling createUser() on each resource
$owners = $resources-&gt;buildFromCall('createUser');

// This uses a function to create a record
function make_record($class, $primary_key)
{
    return new $class($primary_key);
}
$owners = $resources-&gt;buildFromMap('make_record', 'User', '{record}::getOwner');</code></pre>

<h4 id="fRecordSet-docs-FromRelatedRecords">From Related Records</h4>

<p>
When two classes are related to each other through another table, building a record set from related records is often the easiest way to get what you are looking for. While is is possible to use <a href="#fRecordSet-api-buildFromCall"><code>buildFromCall()</code></a> with a <code>createRelatedRecord()</code> method from the <a href="#fActiveRecord">fActiveRecord</a> class, there is a built-in dynamic <code>build</code> method that does all of this for you.
</p>
<pre class="block php"><code>// Creating owners manually
$owners = $resources-&gt;buildFromCall('createUser');

// Creating them from the dynamic build method
$owners = $resources-&gt;buildUsers();</code></pre>

<p>
 The dynamic <code>build</code> methods also take advantage of the <a href="#fRecordSet-docs-PreloadingRelatedRecords">preloading</a> functionality to improve database performance.
</p>

<h3 id="fRecordSet-docs-RecordAccess">Record Access</h3>

<p>
There are a number of different ways that records can be retrieved from a record set.
</p>

<h4 id="fRecordSet-docs-Iteration">Iteration</h4>

<p>
One of the most basic operations for a record set is iteration. Just like an array, an fRecordSet can be used with a <code>foreach</code> loop to access each record sequentially.
</p>
<pre class="block php"><code>foreach ($records as $record) {
    // Do something with the record
}</code></pre>

<h4 id="fRecordSet-docs-IndividualRecords">Individual Records</h4>

<p>
The method <a href="#fRecordSet-api-getRecord"><code>getRecord()</code></a> will return the record at the index specified. This is good for retrieving a single record out of the set, but will throw an <a href="#fNoRemainingException">fNoRemainingException</a> if there is no record to fetch.
</p>
<pre class="block php"><code>$first_record = fRecordSet::build('User')-&gt;getRecord(0);</code></pre>

<p>
 It is also possible to use array-style referencing to accomplish the same result as <a href="#fRecordSet-api-getRecord"><code>getRecord()</code></a>.
</p>
<pre class="block php"><code>$first_record = $record_set[0];</code></pre>

<h4 id="fRecordSet-docs-AllRecords">All Records</h4>

<p>
To retrieve an array of all records in the set, simply call the method <a href="#fRecordSet-api-getRecords"><code>getRecords()</code></a>.
</p>
<pre class="block php"><code>$records = $record_set-&gt;getRecords();</code></pre>

<h3 id="fRecordSet-docs-MetadataAccess">Metadata Access</h3>

<p>
In addition to retrieving the record from a record set, other information about the set and records is available.
</p>

<h4 id="fRecordSet-docs-Size">Size</h4>

<p>
The size of a record set can often be important since it affect if code can be executed or not. The <a href="#fRecordSet-api-count"><code>count()</code></a> method gives a simple total containing the number of records in the set:
</p>
<pre class="block php"><code>if ($records-&gt;count()) {
    echo 'Records were found!';
}</code></pre>

<p>
 In the situation that a record set is actually a <code>LIMIT</code>ed number of records from the full query results, a single <code>TRUE</code> value can be passed to <a href="#fRecordSet-api-count"><code>count()</code></a> to retrieve the total number of records that exist.
</p>
<pre class="block php"><code>echo $records-&gt;count() . ' records displayed, ' . $records-&gt;count(TRUE) . ' records total';</code></pre>

<p>
 It is also possible to throw an exception if no records are contained in a set. The method <a href="#fRecordSet-api-tossIfEmpty"><code>tossIfEmpty()</code></a> will throw an <a href="#fEmptySetException">fEmptySetException</a> if called on a record set with zero records. By default the exception will contain a message indicating that no matching records could be found. It is possible to set a custom message by passing it as the first parameter to <code>tossIfEmpty()</code>.
</p>
<pre class="block php"><code>// Throw a general exception message if no records were found
try {
    $records-&gt;tossIfEmpty()
} catch (fEmptySetException $e) {
    $e-&gt;printMessage();
}

// Throw a specific exception message
try {
    $records-&gt;tossIfEmpty('No active users could be found')
} catch (fEmptySetException $e) {
    $e-&gt;printMessage();
}</code></pre>

<h4 id="fRecordSet-docs-Limit">Limit</h4>

<p>
If a limit was specified when calling <a href="#fRecordSet-api-build"><code>build()</code></a>, it will be available from <a href="#fRecordSet-api-getLimit"><code>getLimit()</code></a>.
</p>
<pre class="block php"><code>$limit = $record_set-&gt;getLimit();</code></pre>

<h4 id="fRecordSet-docs-PagePages">Page/Pages</h4>

<p>
If a limit was specified when calling <a href="#fRecordSet-api-build"><code>build()</code></a>, it will be available from <a href="#fRecordSet-api-getPage"><code>getPage()</code></a>.
</p>
<pre class="block php"><code>$page = $record_set-&gt;getPage();</code></pre>

<p>
 The number of pages will be available from <a href="#fRecordSet-api-getPages"><code>getPages()</code></a>.
</p>
<pre class="block php"><code>$total_pages = $record_set-&gt;getPages();</code></pre>

<h4 id="fRecordSet-docs-PrimaryKeys">Primary Keys</h4>

<p>
If only the primary keys of the records are needed, the method <a href="#fRecordSet-api-getPrimaryKeys"><code>getPrimaryKeys()</code></a> does just that.
</p>
<pre class="block php"><code>$primary_keys = $record_set-&gt;getPrimaryKeys();</code></pre>

<h4 id="fRecordSet-docs-ClassNames">Class Names</h4>

<p>
The method <a href="#fRecordSet-api-getClass"><code>getClass()</code></a> will return the class (or classes) of the record in the record set.
</p>
<pre class="block php"><code>if ($record_set-&gt;getClass() == 'Example') {
    // ...
}</code></pre>

<h3 id="fRecordSet-docs-Manipulation">Manipulation</h3>

<p>
Once a record set has been created, it can be manipulated in a number of different ways to retrieve information. A number of array-like functions are built into the class, and there is support for the map, reduce and filter operations common in functional programming.
</p>

<h4 id="fRecordSet-docs-MapReduceFilterandCall">Map, Reduce, Filter and Call</h4>

<p>
The map, reduce and filter operations are declarative constructs that are common in functional programming. <a class="ext-link" href="http://en.wikipedia.org/wiki/Map_(higher-order_function)"><span class="icon">Map</span></a> applies a function or method to a set of records and returns the results. <a class="ext-link" href="http://en.wikipedia.org/wiki/Filter_(higher-order_function)"><span class="icon">Filter</span></a> applies a function/method to each record and uses the return value to determine if a record should be removed. <a class="ext-link" href="http://en.wikipedia.org/wiki/Fold_(higher-order_function)"><span class="icon">Reduce</span></a> uses a function/method to convert all records into a single value via an iterative process of passing two values to the function at a time. Call is a feature implemented on fRecordSet that is not normally included with map, reduce and filter. Call allows a method to be called on every object in the record set, returning all of the values as an array.
</p>

<h5 id="fRecordSet-docs-Map">Map</h5>

<p>
PHP include a built-in <a class="ext-link" href="http://php.net/array_map"><span class="icon"><code>array_map()</code></span></a> function that allows an array of values to be passed to a callback. This works great for callbacks that require only one parameter, however if two or more parameters are required then all parameters must be arrays of equal length. In practical terms, this requires heavy usage of <a class="ext-link" href="http://php.net/array_fill"><span class="icon"><code>array_fill()</code></span></a> and leads to code that is a pain to write and difficult to read.
</p>

<p>
The <a href="#fRecordSet-api-map"><code>map()</code></a> method in fRecordSet provides some features to reduce the extra work. By default when calling <code>map()</code>, each record will be passed to the callback as the first parameter.
</p>
<pre class="block php"><code>function convert_records($record)
{
    return new ArrayObject($record);
}

$array_objects = $record_set-&gt;map('convert_records');</code></pre>

<p>
 If the callback takes more than one parameter, extra parameters can be passed to <code>map()</code>. Any parameter that is not an array will automatically be converted, so there is no need to calls to <code>array_fill()</code>. The example below would cause the <code>$upper</code> parameter to be set to <code>TRUE</code> for every record.
</p>
<pre class="block php"><code>function camel_case($record, $upper)
{
    return fGrammar::camelize($record-&gt;getName(), $upper);
}

$names = $record_set-&gt;map('camel_case', TRUE);</code></pre>

<p>
 Another important feature is that the output of a method call to each record can be passed to the callback by passing a string such as <code>'{record}::methodName'</code>. If this is the case, the record will not be automatically passed as the first parameter. The example below will cause the output of the <code>getFirstName()</code> method to be passed to <a href="#fUTF8-api-lower">fUTF8::lower()</a>:
</p>
<pre class="block php"><code>$names = $record_set-&gt;map('fUTF8::lower', '{record}::getFirstName');</code></pre>

<p>
 It is also possible to pass the complete record (as opposed to just the output of a method) in a position other than the first parameter by passing <code>'{record}'</code>.
</p>
<pre class="block php"><code>function camel_case($upper, $record)
{
    return fGrammar::camelize($record-&gt;getName(), $upper);
}

$names = $record_set-&gt;map('camel_case', TRUE, '{record}');</code></pre>

<h5 id="fRecordSet-docs-Reduce">Reduce</h5>

<p>
The <a href="#fRecordSet-api-reduce"><code>reduce()</code></a> method accepts a callback that accepts two values and iteratively performs an operation on the result of the last operation plus the next record. It uses the same dynamics as the function <a class="ext-link" href="http://php.net/array_reduce"><span class="icon"><code>array_reduce()</code></span></a>, except that the initial value can be of any data type.
</p>

<p>
The first call to the callback will pass <code>NULL</code> as the first parameter and the first record as the second parameter. All subsequent calls will pass the result of the last call as the first parameter and the next record as the second parameter.
</p>
<pre class="block php"><code>function add_products($tally, $next_record)
{
    return $tally + $next_record-&gt;getPrice();
}
$sum = $record_set-&gt;reduce('add_products');</code></pre>

<p>
 It is also possible to seed the operation with an initial value other than <code>NULL</code> by passing it as the second parameter to <code>reduce()</code>.
</p>
<pre class="block php"><code>function concat_names($string, $next_record)
{
    return $string . ' ' . $next_record-&gt;getName();
}
$names = $record_set-&gt;reduce('concat_names', 'Names:');</code></pre>

<h5 id="fRecordSet-docs-Filter">Filter</h5>

<p>
The <a href="#fRecordSet-api-filter"><code>filter()</code></a> method allows for creating a new record set by removing records from the existing set by checking with a callback, testing the result of a method call on the record, or by comparing with a conditions array. It functions almost identically to <a class="ext-link" href="http://php.net/array_filter"><span class="icon"><code>array_filter()</code></span></a>, except for supporting other methods of checking beyond a simple callback.
</p>

<p>
In the most basic form, a callback is passed and each record is passed one at a time to the callback. If the callback returns a value equal to <code>FALSE</code> the record will not be copied to the new record set. 
</p>
<pre class="block php"><code>function check_name($record)
{
    return (boolean) $record-&gt;getName();
}
$users_with_name = $record_set-&gt;filter('check_name');</code></pre>

<p>
 It is also possible to filter a record set based on the return value of a method. This is accomplished by passing a string in the form <code>'{record}::methodName'</code>. The example below will remove all users with no middle initial:
</p>
<pre class="block php"><code>$users = $record_set-&gt;filter('{record}::getMiddleInitial');</code></pre>

<p>
 As a final option, it is also possible to filter records based on whether or not they match all of the conditions in a conditions array. The conditions array should contain keys that are method names followed by a comparison operator and values to make the comparison with. Below is an example of checking to see if a users status is <code>'Active'</code>:
</p>
<pre class="block php"><code>$active_users = $record_set-&gt;filter(array('getStatus=' =&gt; 'Active'));</code></pre>

<p>
 The following operators are supported for values that are not arrays:
</p>

<ul>
<li><code>=</code>: If the output of the method equals the value</li>
<li><code>!</code>: If the output of the method does not equal the value</li>
<li><code>&gt;</code>: If the output of the method is greater than the value</li>
<li><code>&gt;=</code>: If the output of the method is greater than or equal to the value</li>
<li><code>&lt;</code>: If the output of the method is less than the value</li>
<li><code>&lt;=</code>: If the output of the method id less than or equal to the value</li>
<li><code>~</code>: If the output of the method contains the value (case insensitive)</li>
<li><code>!~</code>: If the output of the method does not contain the value (case insensitive)</li>
</ul>

<p>
If the value is an array, the following operators are supported:
</p>

<ul>
<li><code>=</code>: If the output of the method is contained in the array</li>
<li><code>!</code>: If the output of the method is not contained in the array</li>
<li><code>~</code>: If the output of the method contains one of the values in the array (case insensitive)</li>
<li><code>!~</code>: If the output of the method contains none of the values in the array (case insensitive)</li>
<li><code>&amp;~</code>: If the output of the method contains all of the values in the array (case insensitive)</li>
</ul>

<p>
The following example will filter out any users who dont have the first name <code>John</code>, who dont have the last name <code>Smith</code> or <code>Henry</code> or who were created on or before January 1st, 2008.
</p>
<pre class="block php"><code>$users = $record_set-&gt;filter(
    array(
        'getFirstName='   =&gt; 'John',
        'getLastName='    =&gt; array('Smith', 'Henry'),
        'getDateCreated&gt;' =&gt; '2008-01-01'
    )
);</code></pre>

<p>
 It is also possible to do a search through the output of multiple method using the <code>~</code> operator. Method names should be separated by the <code>|</code> character.
</p>

<p>
If the value is a string, it will be parsed as search terms, which allows for quoted phrases, will removed punctuation from words and will ignore stop words (such as &quot;the' and &quot;a&quot;). If the only words found are stop words, they will be included. If the value is an array, the strings in the array will be searched for.
</p>

<p>
The following example will find all users who have the words and phrases <code>john</code>, <code>smith</code> and <code>west peabody</code> in the output of any combination of <code>getFirstName()</code>, <code>getLastName()</code>, <code>getAddress()</code> and <code>getCity()</code>:
</p>
<pre class="block php"><code>$users = $record_set-&gt;filter(
    array('getFirstName|getLastName|getAddress|getCity~' =&gt; 'John Smith &quot;west peabody&quot;')
);</code></pre>

<p>
 It is possible to perform an <code>OR</code> comparison using <code>|</code> separated list of method names with operators and the value to be an array of values, with one for each method. For example, the following code will check if <code>getFirstName()</code> returns <code>John</code> or <code>getEmailAddress()</code> contains <code>smith.com</code>:
</p>
<pre class="block php"><code>$users = $record_set-&gt;filter(
    array('getFirstName=|getEmailAddress~' =&gt; array('John', 'smith.com'))
);</code></pre>

<p>
 The last supported operator in the intersection operator <code>&gt;&lt;</code>. This operator checks to see if two columns that form a range intersect in any way with two values that form a range. This is most useful for dates, but can be used with numbers too.
</p>

<p>
The following example checks to see if <code>getStartDate()</code> and <code>getEndDate()</code> form a date range that includes any days between January 1, 2010 and January 3, 2010:
</p>
<pre><code>$users = $record_set-&gt;filter(
    array('getStartDate|getEndDate&gt;&lt;' =&gt; array(new fDate('2010-01-01'), new fDate('2010-01-03')))
);</code></pre>

<p>
 The optional boolean second parameter, <code>$remember_original_count</code>, will save the number of records in the current record set as the non-limited count on the new set. See the section on <a href="#fRecordSet-docs-Size">Size</a> for details about how to retrieve this number.
</p>
<pre class="block php"><code>$users = $record_set-&gt;filter('{record}::getMiddleInitial', TRUE);</code></pre>

<h5 id="fRecordSet-docs-Call">Call</h5>

<p>
The <a href="#fRecordSet-api-call"><code>call()</code></a> method of fRecordSet returns an array of the return values from a call to a method on each record in the set. The first parameter is a string with the method to call.
</p>
<pre class="block php"><code>$first_names = $record_set-&gt;call('getFirstName');</code></pre>

<p>
 It is also possible to pass parameters to the method by adding them to the <code>call()</code> method. The following example will pass <code>TRUE</code> to each call of the method <code>prepareLink()</code>:
</p>
<pre class="block php"><code>$links = $record_set-&gt;call('prepareLink', TRUE);</code></pre>

<h4 id="fRecordSet-docs-PreloadingRelatedRecords">Preloading Related Records</h4>

<p>
While the fRecordSet class uses a minimal number of database queries to fetch a set of records, in turn getting records related to each of those will cause at least one database query to be executed per record. The three actions <code>prebuild</code>, <code>precount</code> and <code>precreate</code> all allow for running a single database query to fetch records related to every record in the set.
</p>

<p>
For example, if a record set of users needs to be displayed included how many comments they have left on a blog, the blog comments for each will need to be counted. Normally a call to <code>countBlogComments()</code> be all that is necessary. However, if 100 users are displayed on a page then an additional 100 database queries would be performed. Calling <code>precountBlogComments()</code> on the record set would cause a single database query to be executed to collect the counts for each user.
</p>
<pre class="block php"><code>// Count related comments for ever user in a single query
$record_set-&gt;precountBlogComments();</code></pre>

<p>
 The <code>prebuild</code> method action would be appropriate to call when it is necessary to build a set of related records that are in a many-to-many or one-to-many.
</p>
<pre class="block php"><code>$record_set-&gt;prebuildBlogComments();
foreach ($record_set as $record) {
    $comments = $record_set-&gt;buildBlogComments();
}</code></pre>

<p>
 The <code>precreate</code> method action allows creating objects from a column that is part of a <code>FOREIGN KEY</code> constraint.
</p>
<pre class="block php"><code>$record_set-&gt;precreateStates();
foreach ($record_set as $record) {
    echo $record-&gt;createState()-&gt;prepareName();
}</code></pre>

<h4 id="fRecordSet-docs-SliceMergeDiffIntersectUniqueandContainsOperations">Slice, Merge, Diff, Intersect, Unique and Contains Operations</h4>

<p>
In a manner similar to arrays, an <a href="#fRecord">fRecord</a> contains quite a number of methods to add, remove and change records in a record set.
</p>

<h5 id="fRecordSet-docs-slice"><code>slice()</code></h5>

<p>
The <a href="#fRecordSet-api-slice"><code>slice()</code></a> method takes up to two parameters, the zero-based <code>$offset</code> to start slicing at and the <code>$length</code> of a slice to make. If the <code>$offset</code> is negative, the slice will start that many records from the end of the set. If the <code>$length</code> is negative, the slice will stop that many records from the end of the set. If the <code>$length</code> is omitted or <code>NULL</code>, all records until the end of the set will be returned.
</p>

<p>
The following will create a new record set from the first three records.
</p>
<pre class="block php"><code>$new_set = $record_set-&gt;slice(0, 3);</code></pre>

<p>
 The optional boolean third parameter, <code>$remember_original_count</code>, will save the number of records in the current record set as the non-limited count on the new set. See the section on <a href="#fRecordSet-docs-Size">Size</a> for details about how to retrieve this number.
</p>
<pre class="block php"><code>$new_set = $record_set-&gt;slice(0, 3, TRUE);</code></pre>

<p>
 <em>If <code>$remember_original_count</code> is <code>TRUE</code> and the slicing is done in such a way that a valid <code>$limit</code> and <code>$page</code> can be determined, they will be appropriately set on the new record set.</em>
</p>

<h5 id="fRecordSet-docs-merge"><code>merge()</code></h5>

<p>
The <a href="#fRecordSet-api-merge"><code>merge()</code></a> method accepts a single parameter, the <code>$records</code>, and returns a new record set containing all records from both. All of the records from the second record set will be found after the records from the first. The <code>$records</code> parameter will accept an fRecordSet, an array of <a href="#fActiveRecord">fActiveRecord</a> objects or a single <a href="#fActiveRecord">fActiveRecord</a>.
</p>

<p>
Please note that it <em>is</em> possible to merge records sets of different types of records. If a record set contains records of more than one class, however, the <code>prebuild</code>, <code>precount</code> and <code>precreate</code> method actions will be unavailable, along with the methods <code>getPrimaryKeys()</code>, <code>flagAssociate()</code> and <code>isFlaggedForAssociation()</code>.
</p>
<pre class="block php"><code>$events_and_meetings = $events-&gt;merge($meetings);</code></pre>

<h5 id="fRecordSet-docs-diff"><code>diff()</code></h5>

<p>
The <a href="#fRecordSet-api-diff"><code>diff()</code></a> method accepts a single parameter, the <code>$records</code> to remove from the current record set. The <code>$records</code> parameter will accept an fRecordSet, an array of <a href="#fActiveRecord">fActiveRecord</a> objects or a single <a href="#fActiveRecord">fActiveRecord</a>.
</p>
<pre class="block php"><code>$active_events = $events-&gt;diff($inactive_events);</code></pre>

<p>
 The optional boolean second parameter, <code>$remember_original_count</code>, will save the number of records in the current record set as the non-limited count on the new set. See the section on <a href="#fRecordSet-docs-Size">Size</a> for details about how to retrieve this number.
</p>
<pre class="block php"><code>$active_events = $events-&gt;diff($inactive_events, TRUE);</code></pre>

<h5 id="fRecordSet-docs-intersect"><code>intersect()</code></h5>

<p>
The <a href="#fRecordSet-api-intersect"><code>intersect()</code></a> method accepts a single parameter, the <code>$records</code> to create an intersection with the current record set. All records not in both will be removed. The <code>$records</code> parameter will accept an fRecordSet, an array of <a href="#fActiveRecord">fActiveRecord</a> objects or a single <a href="#fActiveRecord">fActiveRecord</a>.
</p>
<pre class="block php"><code>$our_free_days = $my_free_days-&gt;intersect($your_free_days);</code></pre>

<p>
 The optional boolean second parameter, <code>$remember_original_count</code>, will save the number of records in the current record set as the non-limited count on the new set. See the section on <a href="#fRecordSet-docs-Size">Size</a> for details about how to retrieve this number.
</p>
<pre class="block php"><code>$our_free_days = $my_free_days-&gt;intersect($your_free_days, TRUE);</code></pre>

<h5 id="fRecordSet-docs-unique"><code>unique()</code></h5>

<p>
The <a href="#fRecordSet-api-unique"><code>unique()</code></a> method takes the current record set and removes all duplicate records, returning a new record set.
</p>
<pre class="block php"><code>$sessions = $sessions-&gt;unique();</code></pre>

<p>
 The optional boolean parameter, <code>$remember_original_count</code>, will save the number of records in the current record set as the non-limited count on the new set. See the section on <a href="#fRecordSet-docs-Size">Size</a> for details about how to retrieve this number.
</p>
<pre class="block php"><code>$sessions = $sessions-&gt;unique(TRUE);</code></pre>

<h4 id="fRecordSet-docs-ChunkandSplitOperations">Chunk and Split Operations</h4>

<p>
For display purposes, it can be useful to segment an fRecordSet into multiple smaller fRecordSet objects. The <a href="#fRecordSet-api-chunk"><code>chunk()</code></a> and <a href="#fRecordSet-api-split"><code>split()</code></a> methods to exactly this.
</p>

<h5 id="fRecordSet-docs-chunk"><code>chunk()</code></h5>

<p>
The <a href="#fRecordSet-api-chunk"><code>chunk()</code></a> method accepts a <code>$number</code> of records to place in each resulting fRecordSet. The returned value will be an array of fRecordSet objects that each contain <code>$number</code> records, although the last one may have fewer if there are not enough to fill it.
</p>
<pre class="block php"><code>// This statement will segment 10 users into 4 records sets containing 3, 3, 3 and 1 users respectively
$sets = $users-&gt;chunk(3);</code></pre>

<h5 id="fRecordSet-docs-split"><code>split()</code></h5>

<p>
The <a href="#fRecordSet-api-split"><code>split()</code></a> method accepts a <code>$number</code> of fRecordSet objects to return. The returned value will be an array of fRecordSet objects that each contain <code>ceil(total records/$number)</code> records, although the last set may have fewer if there are not enough to fill it.
</p>
<pre class="block php"><code>// This statement will split 10 users into 3 records sets containing 4, 4 and 2 users respectively
$sets = $users-&gt;split(3);</code></pre>

<h4 id="fRecordSet-docs-CheckingforaRecord">Checking for a Record</h4>

<p>
The <a href="#fRecordSet-api-contains"><code>contains()</code></a> method accepts a single <a href="#fActiveRecord">fActiveRecord</a> record and checks if is is present in the record set.
</p>
<pre class="block php"><code>if ($users-&gt;contains($user)) {
    // ...
}</code></pre>

<h4 id="fRecordSet-docs-Sorting">Sorting</h4>

<p>
<em>When building a record set from conditions, the records can be sorted by the <code>$order_bys</code> parameter. See the section <a href="#fRecordSet-docs-Ordering">Ordering</a> for more details.</em>
</p>

<p>
Two methods are available with fRecordSet to reorder the records in the set after it has been created. The method <a href="#fRecordSet-api-sort"><code>sort()</code></a> accepts two parameters, the <code>$method</code> to call to get the value to compare, and the <code>$direction</code> to sort those values in. The <code>$direction</code> can be either <code>'asc'</code> or <code>'desc'</code>. The sorting is done using <a href="#fUTF8-api-inatcmp">fUTF8::inatcmp()</a> for comparison. A new sorted fRecordSet object is returned.
</p>
<pre class="block php"><code>$sorted_set = $record_set-&gt;sort('getName', 'asc');</code></pre>

<p>
 If a different sorting method is required, the method <a href="#fRecordSet-api-sortByCallback"><code>sortByCallback()</code></a> will be of interest. This method requires a single parameter, a <code>$callback</code> that accepts two records and returns a negative value if the first record is less than the second, <code>0</code> if they are equal, or a positive value if the first record is greater than the second.
</p>
<pre class="block php"><code>function method_sort($record_a, $record_b)
{
    return strnatcasecmp($record_a-&gt;getFirstName(), $record_b-&gt;getFirstName());
}

$sorted_set = $record_set-&gt;sortByCallback('method_sort');</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fRecordSet-api">fRecordSet API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fRecordSet">Class Documentation</a></li>
		<li><strong><a href="#fRecordSet-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fRecordSet-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  	  			<li><a href="#fRecordSet-api-build">build()</a></li>
	  			<li class="protected"><a href="#fRecordSet-api-buildFromArray">buildFromArray()</a></li>
	  	  	  			<li><a href="#fRecordSet-api-buildFromSQL">buildFromSQL()</a></li>
	  	  	  			<li class="protected"><a href="#fRecordSet-api-compose">compose()</a></li>
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  			<li><a href="#fRecordSet-api-tally">tally()</a></li>
	  	  	  </ul>
</div>
<div class="methods">
<h4><a href="#fRecordSet-api-class_methods">Methods</a></h4>
<ul>
  			<li class="protected"><a href="#fRecordSet-api-__construct">__construct()</a></li>
	  			<li><a href="#fRecordSet-api-__call">__call()</a></li>
	  			<li class="protected"><a href="#fRecordSet-api-__get">__get()</a></li>
	  	  	  			<li><a href="#fRecordSet-api-buildFromCall">buildFromCall()</a></li>
	  			<li><a href="#fRecordSet-api-buildFromMap">buildFromMap()</a></li>
	  	  			<li><a href="#fRecordSet-api-call">call()</a></li>
	  			<li><a href="#fRecordSet-api-chunk">chunk()</a></li>
	  	  			<li><a href="#fRecordSet-api-contains">contains()</a></li>
	  			<li><a href="#fRecordSet-api-count">count()</a></li>
	  			<li><a href="#fRecordSet-api-diff">diff()</a></li>
	  			<li><a href="#fRecordSet-api-filter">filter()</a></li>
	  			<li><a href="#fRecordSet-api-getClass">getClass()</a></li>
	  			<li class="protected"><a href="#fRecordSet-api-getIterator">getIterator()</a></li>
	  			<li><a href="#fRecordSet-api-getLimit">getLimit()</a></li>
	  			<li><a href="#fRecordSet-api-getPage">getPage()</a></li>
	  			<li><a href="#fRecordSet-api-getPages">getPages()</a></li>
	  			<li><a href="#fRecordSet-api-getPrimaryKeys">getPrimaryKeys()</a></li>
	  			<li><a href="#fRecordSet-api-getRecord">getRecord()</a></li>
	  			<li><a href="#fRecordSet-api-getRecords">getRecords()</a></li>
	  			<li><a href="#fRecordSet-api-intersect">intersect()</a></li>
	  			<li><a href="#fRecordSet-api-map">map()</a></li>
	  			<li><a href="#fRecordSet-api-merge">merge()</a></li>
	  			<li class="protected"><a href="#fRecordSet-api-offsetExists">offsetExists()</a></li>
	  			<li class="protected"><a href="#fRecordSet-api-offsetGet">offsetGet()</a></li>
	  			<li class="protected"><a href="#fRecordSet-api-offsetSet">offsetSet()</a></li>
	  			<li class="protected"><a href="#fRecordSet-api-offsetUnset">offsetUnset()</a></li>
	  			<li><a href="#fRecordSet-api-reduce">reduce()</a></li>
	  			<li><a href="#fRecordSet-api-slice">slice()</a></li>
	  			<li><a href="#fRecordSet-api-sort">sort()</a></li>
	  			<li><a href="#fRecordSet-api-sortByCallback">sortByCallback()</a></li>
	  			<li><a href="#fRecordSet-api-split">split()</a></li>
	  	  			<li><a href="#fRecordSet-api-tossIfEmpty">tossIfEmpty()</a></li>
	  			<li><a href="#fRecordSet-api-unique">unique()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fEmptySetException">fEmptySetException</a></li>
		<li><a href="#fGrammar">fGrammar</a></li>
		<li><a href="#fNoRemainingException">fNoRemainingException</a></li>
		<li><a href="#fORM">fORM</a></li>
		<li><a href="#fORMDatabase">fORMDatabase</a></li>
		<li><a href="#fORMRelated">fORMRelated</a></li>
		<li><a href="#fORMSchema">fORMSchema</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fUTF8">fUTF8</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fORMRelated">fORMRelated</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
	<span class="implements"> implements IteratorAggregate ArrayAccess Countable </span>,	<span class="version">v1.0.0b47</span></div>
<p class="short_description">A lightweight, iterable set of <a href="#fActiveRecord">fActiveRecord</a>-based objects</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b47</th><td>Fixed the new version of precount() to work with tables having an explicit schema <span class="date">9/21/12</span></td></tr><tr><th>1,0,0b46</th><td>Fixed a bug with precount() not working for self-joining tables <span class="date">9/16/12</span></td></tr><tr><th>1.0.0b45</th><td>Added support for the starts with like, <tt>^~</tt>, and ends with like, <tt>$~</tt>, operators to both <a href="#fRecordSet-api-build"><tt>build()</tt></a> and <a href="#fRecordSet-api-filter"><tt>filter()</tt></a> <span class="date">6/20/11</span></td></tr><tr><th>1.0.0b44</th><td>Backwards Compatibility Break - <a href="#fRecordSet-api-sort"><tt>sort()</tt></a> and <a href="#fRecordSet-api-sortByCallback"><tt>sortByCallback()</tt></a> now return a new <a href="#fRecordSet">fRecordSet</a> instead of sorting the record set in place <span class="date">6/20/11</span></td></tr><tr><th>1.0.0b43</th><td>Added the ability to pass SQL and values to <a href="#fRecordSet-api-buildFromSQL"><tt>buildFromSQL()</tt></a>, added the ability to manually pass the <tt>$limit</tt> and <tt>$page</tt> to <a href="#fRecordSet-api-buildFromArray"><tt>buildFromArray()</tt></a> and <a href="#fRecordSet-api-buildFromSQL"><tt>buildFromSQL()</tt></a>, changed <a href="#fRecordSet-api-slice"><tt>slice()</tt></a> to remember <tt>$limit</tt> and <tt>$page</tt> if possible when <tt>$remember_original_count</tt> is <tt>TRUE</tt> <span class="date">1/11/11</span></td></tr><tr><th>1.0.0b42</th><td>Updated class to use <a href="#fORM-api-getRelatedClass"><tt>fORM::getRelatedClass()</tt></a> <span class="date">11/24/10</span></td></tr><tr><th>1.0.0b41</th><td>Added support for PHP 5.3 namespaced <a href="#fActiveRecord">fActiveRecord</a> classes <span class="date">11/11/10</span></td></tr><tr><th>1.0.0b40</th><td>Added the <a href="#fRecordSet-api-tally"><tt>tally()</tt></a> method <span class="date">9/28/10</span></td></tr><tr><th>1.0.0b39</th><td>Backwards Compatibility Break - removed the methods fetchRecord(), <a class="ext-link" href="http://www.php.net/current"><span class="icon">http://www.php.net/current</span></a>, <a class="ext-link" href="http://www.php.net/key"><span class="icon">http://www.php.net/key</span></a>, <a class="ext-link" href="http://www.php.net/next"><span class="icon">http://www.php.net/next</span></a>, <a class="ext-link" href="http://www.php.net/rewind"><span class="icon">http://www.php.net/rewind</span></a> and valid() and the Iterator interface - and the <tt>$pointer</tt> parameter for callbacks registered via <a href="#fORM-api-registerRecordSetMethod"><tt>fORM::registerRecordSetMethod()</tt></a> was replaced with the <tt>$method_name</tt> parameter - added the methods <a href="#fRecordSet-api-getIterator"><tt>getIterator()</tt></a>, <a href="#fRecordSet-api-getLimit"><tt>getLimit()</tt></a>, <a href="#fRecordSet-api-getPage"><tt>getPage()</tt></a>, <a href="#fRecordSet-api-getPages"><tt>getPages()</tt></a>, <a href="#fRecordSet-api-getRecord"><tt>getRecord()</tt></a>, <a href="#fRecordSet-api-offsetExists"><tt>offsetExists()</tt></a>, <a href="#fRecordSet-api-offsetGet"><tt>offsetGet()</tt></a>, <a href="#fRecordSet-api-offsetSet"><tt>offsetSet()</tt></a> and <a href="#fRecordSet-api-offsetUnset"><tt>offsetUnset()</tt></a> and the IteratorAggregate and ArrayAccess interfaces <span class="date">9/28/10</span></td></tr><tr><th>1.0.0b38</th><td>Updated code to work with the new <a href="#fORM">fORM</a> API <span class="date">8/6/10</span></td></tr><tr><th>1.0.0b37</th><td>Fixed a typo/bug in <a href="#fRecordSet-api-reduce"><tt>reduce()</tt></a> <span class="date">6/30/10</span></td></tr><tr><th>1.0.0b36</th><td>Replaced create_function() with a private method call <span class="date">6/8/10</span></td></tr><tr><th>1.0.0b35</th><td>Added the <a href="#fRecordSet-api-chunk"><tt>chunk()</tt></a> and <a href="#fRecordSet-api-split"><tt>split()</tt></a> methods <span class="date">5/20/10</span></td></tr><tr><th>1.0.0b34</th><td>Added an integer cast to <a href="#fRecordSet-api-count"><tt>count()</tt></a> to fix issues with the dblib MSSQL driver <span class="date">4/9/10</span></td></tr><tr><th>1.0.0b33</th><td>Updated the class to force configure classes before peforming actions with them <span class="date">3/30/10</span></td></tr><tr><th>1.0.0b32</th><td>Fixed a column aliasing issue with SQLite <span class="date">1/25/10</span></td></tr><tr><th>1.0.0b31</th><td>Added the ability to compare columns in <a href="#fRecordSet-api-build"><tt>build()</tt></a> with the <tt>=:</tt>, <tt>!:</tt>, <tt>&lt;:</tt>, <tt>&lt;=:</tt>, <tt>&gt;:</tt> and <tt>&gt;=:</tt> operators <span class="date">12/8/09</span></td></tr><tr><th>1.0.0b30</th><td>Fixed a bug affecting where conditions with columns that are not null but have a default value <span class="date">11/3/09</span></td></tr><tr><th>1.0.0b29</th><td>Updated code for the new <a href="#fORMDatabase">fORMDatabase</a> and <a href="#fORMSchema">fORMSchema</a> APIs <span class="date">10/28/09</span></td></tr><tr><th>1.0.0b28</th><td>Fixed prebuild() and precount() to work across all databases, changed SQL statements to use value placeholders, identifier escaping and schema support <span class="date">10/22/09</span></td></tr><tr><th>1.0.0b27</th><td>Changed <a href="#fRecordSet-api-build">fRecordSet::build()</a> to fix bad $page numbers instead of throwing an <a href="#fProgrammerException">fProgrammerException</a> <span class="date">10/5/09</span></td></tr><tr><th>1.0.0b26</th><td>Updated the documentation for <a href="#fRecordSet-api-build"><tt>build()</tt></a> and <a href="#fRecordSet-api-filter"><tt>filter()</tt></a> to reflect new functionality <span class="date">9/21/09</span></td></tr><tr><th>1.0.0b25</th><td>Fixed <a href="#fRecordSet-api-map"><tt>map()</tt></a> to work with string-style static method callbacks in PHP 5.1 <span class="date">9/18/09</span></td></tr><tr><th>1.0.0b24</th><td>Backwards Compatibility Break - renamed buildFromRecords() to <a href="#fRecordSet-api-buildFromArray"><tt>buildFromArray()</tt></a>. Added <a href="#fRecordSet-api-buildFromCall"><tt>buildFromCall()</tt></a>, <a href="#fRecordSet-api-buildFromMap"><tt>buildFromMap()</tt></a> and <tt>::build{RelatedRecords}()</tt> <span class="date">9/16/09</span></td></tr><tr><th>1.0.0b23</th><td>Added an extra parameter to <a href="#fRecordSet-api-diff"><tt>diff()</tt></a>, <a href="#fRecordSet-api-filter"><tt>filter()</tt></a>, <a href="#fRecordSet-api-intersect"><tt>intersect()</tt></a>, <a href="#fRecordSet-api-slice"><tt>slice()</tt></a> and <a href="#fRecordSet-api-unique"><tt>unique()</tt></a> to save the number of records in the current set as the non-limited count for the new set <span class="date">9/15/09</span></td></tr><tr><th>1.0.0b22</th><td>Changed <a href="#fRecordSet-api-__construct"><tt>__construct()</tt></a> to accept any Iterator instead of just an <a href="#fResult">fResult</a> object <span class="date">8/12/09</span></td></tr><tr><th>1.0.0b21</th><td>Added performance tweaks to prebuild() and precreate() <span class="date">7/31/09</span></td></tr><tr><th>1.0.0b20</th><td>Changed the class to implement Countable, making the <a class="ext-link" href="http://php.net/count"><span class="icon"><tt>count()</tt></span></a> function work <span class="date">7/29/09</span></td></tr><tr><th>1.0.0b19</th><td>Fixed bugs with <a href="#fRecordSet-api-diff"><tt>diff()</tt></a> and <a href="#fRecordSet-api-intersect"><tt>intersect()</tt></a> and empty record sets <span class="date">7/29/09</span></td></tr><tr><th>1.0.0b18</th><td>Added method chaining support to prebuild, precount and precreate methods <span class="date">7/15/09</span></td></tr><tr><th>1.0.0b17</th><td>Changed <a href="#fRecordSet-api-__call"><tt>__call()</tt></a> to pass the parameters to the callback <span class="date">7/14/09</span></td></tr><tr><th>1.0.0b16</th><td>Updated documentation for the intersection operator <tt>&gt;&lt;</tt> <span class="date">7/13/09</span></td></tr><tr><th>1.0.0b15</th><td>Added the methods <a href="#fRecordSet-api-diff"><tt>diff()</tt></a> and <a href="#fRecordSet-api-intersect"><tt>intersect()</tt></a> <span class="date">7/13/09</span></td></tr><tr><th>1.0.0b14</th><td>Added the methods <a href="#fRecordSet-api-contains"><tt>contains()</tt></a> and <a href="#fRecordSet-api-unique"><tt>unique()</tt></a> <span class="date">7/9/09</span></td></tr><tr><th>1.0.0b13</th><td>Added documentation to <a href="#fRecordSet-api-build"><tt>build()</tt></a> about the intersection operator <tt>&gt;&lt;</tt> <span class="date">7/9/09</span></td></tr><tr><th>1.0.0b12</th><td>Added documentation to <a href="#fRecordSet-api-build"><tt>build()</tt></a> about the <tt>AND LIKE</tt> operator <tt>&amp;~</tt> <span class="date">7/9/09</span></td></tr><tr><th>1.0.0b11</th><td>Added documentation to <a href="#fRecordSet-api-build"><tt>build()</tt></a> about the <tt>NOT LIKE</tt> operator <tt>!~</tt> <span class="date">7/8/09</span></td></tr><tr><th>1.0.0b10</th><td>Moved the private method checkConditions() to <a href="#fActiveRecord-api-checkConditions"><tt>fActiveRecord::checkConditions()</tt></a> <span class="date">7/8/09</span></td></tr><tr><th>1.0.0b9</th><td>Changed <a href="#fRecordSet-api-build"><tt>build()</tt></a> to only fall back to ordering by primary keys if one exists <span class="date">6/26/09</span></td></tr><tr><th>1.0.0b8</th><td>Updated <a href="#fRecordSet-api-merge"><tt>merge()</tt></a> to accept arrays of fActiveRecords or a single <a href="#fActiveRecord">fActiveRecord</a> in addition to an <a href="#fRecordSet">fRecordSet</a> <span class="date">6/2/09</span></td></tr><tr><th>1.0.0b7</th><td>Backwards Compatibility Break - Removed flagAssociate() and isFlaggedForAssociation(), callbacks registered via <a href="#fORM-api-registerRecordSetMethod"><tt>fORM::registerRecordSetMethod()</tt></a> no longer receive the <tt>$associate</tt> parameter <span class="date">6/2/09</span></td></tr><tr><th>1.0.0b6</th><td>Changed <a href="#fRecordSet-api-tossIfEmpty"><tt>tossIfEmpty()</tt></a> to return the record set to allow for method chaining <span class="date">5/18/09</span></td></tr><tr><th>1.0.0b5</th><td><a href="#fRecordSet-api-build"><tt>build()</tt></a> now allows NULL for <tt>$where_conditions</tt> and <tt>$order_bys</tt>, added a check to the SQL passed to <a href="#fRecordSet-api-buildFromSQL"><tt>buildFromSQL()</tt></a> <span class="date">5/3/09</span></td></tr><tr><th>1.0.0b4</th><td><a href="#fRecordSet-api-__call"><tt>__call()</tt></a> was changed to prevent exceptions coming from <a href="#fGrammar">fGrammar</a> when an unknown method is called <span class="date">3/27/09</span></td></tr><tr><th>1.0.0b3</th><td><a href="#fRecordSet-api-sort"><tt>sort()</tt></a> and <a href="#fRecordSet-api-sortByCallback"><tt>sortByCallback()</tt></a> now return the record set to allow for method chaining <span class="date">3/23/09</span></td></tr><tr><th>1.0.0b2</th><td>Added support for != and &lt;&gt; to <a href="#fRecordSet-api-build"><tt>build()</tt></a> and <a href="#fRecordSet-api-filter"><tt>filter()</tt></a> <span class="date">12/4/08</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">8/4/07</span></td></tr></table></div>
<div class="class_methods static" id="fRecordSet-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fRecordSet-api-build" class="method static"><span class="resolution">::</span><span class="name">build()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Creates an <a href="#fRecordSet">fRecordSet</a> by specifying the class to create plus the where conditions and order by rules</p>
								<p>The where conditions array can contain <tt>key =&gt; value</tt> entries in any of  the following formats:</p><pre class="block "><code>'column='                    => VALUE,                       // column = VALUE
'column!'                    => VALUE                        // column <> VALUE
'column!='                   => VALUE                        // column <> VALUE
'column<>'                   => VALUE                        // column <> VALUE
'column~'                    => VALUE                        // column LIKE '%VALUE%'
'column^~'                   => VALUE                        // column LIKE 'VALUE%'
'column$~'                   => VALUE                        // column LIKE '%VALUE'
'column!~'                   => VALUE                        // column NOT LIKE '%VALUE%'
'column<'                    => VALUE                        // column < VALUE
'column<='                   => VALUE                        // column <= VALUE
'column>'                    => VALUE                        // column > VALUE
'column>='                   => VALUE                        // column >= VALUE
'column=:'                   => 'other_column'               // column = other_column
'column!:'                   => 'other_column'               // column <> other_column
'column!=:'                  => 'other_column'               // column <> other_column
'column<>:'                  => 'other_column'               // column <> other_column
'column<:'                   => 'other_column'               // column < other_column
'column<=:'                  => 'other_column'               // column <= other_column
'column>:'                   => 'other_column'               // column > other_column
'column>=:'                  => 'other_column'               // column >= other_column
'column='                    => array(VALUE, VALUE2, ... )   // column IN (VALUE, VALUE2, ... )
'column!'                    => array(VALUE, VALUE2, ... )   // column NOT IN (VALUE, VALUE2, ... )
'column!='                   => array(VALUE, VALUE2, ... )   // column NOT IN (VALUE, VALUE2, ... )
'column<>'                   => array(VALUE, VALUE2, ... )   // column NOT IN (VALUE, VALUE2, ... )
'column~'                    => array(VALUE, VALUE2, ... )   // (column LIKE '%VALUE%' OR column LIKE '%VALUE2%' OR column ... )
'column^~'                   => array(VALUE, VALUE2, ... )   // (column LIKE 'VALUE%' OR column LIKE 'VALUE2%' OR column ... )
'column$~'                   => array(VALUE, VALUE2, ... )   // (column LIKE '%VALUE' OR column LIKE '%VALUE2' OR column ... )
'column&~'                   => array(VALUE, VALUE2, ... )   // (column LIKE '%VALUE%' AND column LIKE '%VALUE2%' AND column ... )
'column!~'                   => array(VALUE, VALUE2, ... )   // (column NOT LIKE '%VALUE%' AND column NOT LIKE '%VALUE2%' AND column ... )
'column!|column2<|column3='  => array(VALUE, VALUE2, VALUE3) // (column <> '%VALUE%' OR column2 < '%VALUE2%' OR column3 = '%VALUE3%')
'column|column2><'           => array(VALUE, VALUE2)         // WHEN VALUE === NULL: ((column2 IS NULL AND column = VALUE) OR (column2 IS NOT NULL AND column <= VALUE AND column2 >= VALUE))
                                                             // WHEN VALUE !== NULL: ((column <= VALUE AND column2 >= VALUE) OR (column >= VALUE AND column <= VALUE2))
'column|column2|column3~'    => VALUE                        // (column LIKE '%VALUE%' OR column2 LIKE '%VALUE%' OR column3 LIKE '%VALUE%')
'column|column2|column3~'    => array(VALUE, VALUE2, ... )   // ((column LIKE '%VALUE%' OR column2 LIKE '%VALUE%' OR column3 LIKE '%VALUE%') AND (column LIKE '%VALUE2%' OR column2 LIKE '%VALUE2%' OR column3 LIKE '%VALUE2%') AND ... )</code></pre><p>When creating a condition in the form <tt>column|column2|column3~</tt>, if the  value for the condition is a single string that contains spaces, the  string will be parsed for search terms. The search term parsing will  handle quoted phrases and normal words and will strip punctuation and  stop words (such as &quot;the&quot; and &quot;a&quot;).</p><p>The order bys array can contain <tt>key =&gt; value</tt> entries in any of the  following formats:</p><pre class="block "><code>'column'     => 'asc'      // 'first_name' => 'asc'
'column'     => 'desc'     // 'last_name'  => 'desc'
'expression' => 'asc'      // "CASE first_name WHEN 'smith' THEN 1 ELSE 2 END" => 'asc'
'expression' => 'desc'     // "CASE first_name WHEN 'smith' THEN 1 ELSE 2 END" => 'desc'</code></pre><p>The column in both the where conditions and order bys can be in any of  the formats:</p><pre class="block "><code>'column'                                                         // e.g. 'first_name'
'current_table.column'                                           // e.g. 'users.first_name'
'related_table.column'                                           // e.g. 'user_groups.name'
'related_table{route}.column'                                    // e.g. 'user_groups{user_group_id}.name'
'related_table=>once_removed_related_table.column'               // e.g. 'user_groups=>permissions.level'
'related_table{route}=>once_removed_related_table.column'        // e.g. 'user_groups{user_group_id}=>permissions.level'
'related_table=>once_removed_related_table{route}.column'        // e.g. 'user_groups=>permissions{read}.level'
'related_table{route}=>once_removed_related_table{route}.column' // e.g. 'user_groups{user_group_id}=>permissions{read}.level'
'column||other_column'                                           // e.g. 'first_name||last_name' - this concatenates the column values</code></pre><p>In addition to using plain column names for where conditions, it is also  possible to pass an aggregate function wrapped around a column in place  of a column name, but only for certain comparison types. <em>Note that for  column comparisons, the function may be placed on either column or both.</em></p><pre class="block "><code>'function(column)='   => VALUE,                       // function(column) = VALUE
'function(column)!'   => VALUE                        // function(column) <> VALUE
'function(column)!=   => VALUE                        // function(column) <> VALUE
'function(column)<>'  => VALUE                        // function(column) <> VALUE
'function(column)~'   => VALUE                        // function(column) LIKE '%VALUE%'
'function(column)^~'  => VALUE                        // function(column) LIKE 'VALUE%'
'function(column)$~'  => VALUE                        // function(column) LIKE '%VALUE'
'function(column)!~'  => VALUE                        // function(column) NOT LIKE '%VALUE%'
'function(column)<'   => VALUE                        // function(column) < VALUE
'function(column)<='  => VALUE                        // function(column) <= VALUE
'function(column)>'   => VALUE                        // function(column) > VALUE
'function(column)>='  => VALUE                        // function(column) >= VALUE
'function(column)=:'  => 'other_column'               // function(column) = other_column
'function(column)!:'  => 'other_column'               // function(column) <> other_column
'function(column)!=:' => 'other_column'               // function(column) <> other_column
'function(column)<>:' => 'other_column'               // function(column) <> other_column
'function(column)<:'  => 'other_column'               // function(column) < other_column
'function(column)<=:' => 'other_column'               // function(column) <= other_column
'function(column)>:'  => 'other_column'               // function(column) > other_column
'function(column)>=:' => 'other_column'               // function(column) >= other_column
'function(column)='   => array(VALUE, VALUE2, ... )   // function(column) IN (VALUE, VALUE2, ... )
'function(column)!'   => array(VALUE, VALUE2, ... )   // function(column) NOT IN (VALUE, VALUE2, ... )
'function(column)!='  => array(VALUE, VALUE2, ... )   // function(column) NOT IN (VALUE, VALUE2, ... )
'function(column)<>'  => array(VALUE, VALUE2, ... )   // function(column) NOT IN (VALUE, VALUE2, ... )</code></pre><p>The aggregate functions <tt>AVG()</tt>, <tt>COUNT()</tt>, <tt>MAX()</tt>, <tt>MIN()</tt> and  <tt>SUM()</tt> are supported across all database types.</p><p>Below is an example of using where conditions and order bys. Please note  that values should <strong>not</strong> be escaped for the database, but should just  be normal PHP values.</p><pre class="block php"><code>return fRecordSet::build(
    'User',
    array(
        'first_name='      => 'John',
        'status!'          => 'Inactive',
        'groups.group_id=' => 2
    ),
    array(
        'last_name'   => 'asc',
        'date_joined' => 'desc'
    )
);</code></pre>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fRecordSet">fRecordSet</a></span> <span class="php-identifier">build</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$where_conditions</span><span class="php-code">=</span>array()<span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$order_bys</span><span class="php-code">=</span>array()<span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$limit</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$page</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to create the <a href="#fRecordSet">fRecordSet</a> of</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$where_conditions</td>
				<td class="param_description">The <tt>column =&gt; value</tt> comparisons for the <tt>WHERE</tt> clause</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$order_bys</td>
				<td class="param_description">The <tt>column =&gt; direction</tt> values to use for the <tt>ORDER BY</tt> clause</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$limit</td>
				<td class="param_description">The number of records to fetch</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$page</td>
				<td class="param_description">The page offset to use when limiting records</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					A set of <a href="#fActiveRecord">fActiveRecord</a> objects
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fRecordSet-api-buildFromArray" class="protected method static"><span class="resolution">::</span><span class="name">buildFromArray()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Creates an <a href="#fRecordSet">fRecordSet</a> from an array of records</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fRecordSet">fRecordSet</a></span> <span class="php-identifier">buildFromArray</span><span class="php-brackets">(</span> <span class="php-vartype">string|array</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$records</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$total_records</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$limit</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$page</span><span class="php-code">=</span>1 <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string|array</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class or classes of the records</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$records</td>
				<td class="param_description">The records to create the set from, the order of the record set will be the same as the order of the array.</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$total_records</td>
				<td class="param_description">The total number of records - this should only be provided if the array is a segment of a larger array - this is informational only and does not affect the array</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$limit</td>
				<td class="param_description">The maximum number of records the array was limited to - this is informational only and does not affect the array</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$page</td>
				<td class="param_description">The page of records the array is from - this is informational only and does not affect the array</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					A set of <a href="#fActiveRecord">fActiveRecord</a> objects
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fRecordSet-api-buildFromSQL" class="method static"><span class="resolution">::</span><span class="name">buildFromSQL()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Creates an <a href="#fRecordSet">fRecordSet</a> from an SQL statement</p>
								<p>The SQL statement should select all columns from a single table with a *  pattern since that is what an <a href="#fActiveRecord">fActiveRecord</a> models. If any columns are  left out or added, strange error may happen when loading or saving  records.</p><p>Here is an example of an appropriate SQL statement:</p><pre class="block sql"><code>SELECT users.* FROM users INNER JOIN groups ON users.group_id = groups.group_id WHERE groups.name = 'Public'</code></pre><p>Here is an example of a SQL statement that will cause errors:</p><pre class="block sql"><code>SELECT users.*, groups.name FROM users INNER JOIN groups ON users.group_id = groups.group_id WHERE groups.group_id = 2</code></pre><p>The <tt>$non_limited_count_sql</tt> should only be passed when the <tt>$sql</tt>  contains a <tt>LIMIT</tt> clause and should contain a count of the records when  a <tt>LIMIT</tt> is not imposed.</p><p>Here is an example of a <tt>$sql</tt> statement with a <tt>LIMIT</tt> clause and a  corresponding <tt>$non_limited_count_sql</tt>:</p><pre class="block php"><code>fRecordSet::buildFromSQL('User', 'SELECT * FROM users LIMIT 5', 'SELECT count(*) FROM users');</code></pre><p>The <tt>$non_limited_count_sql</tt> is used when <a href="#fRecordSet-api-count"><tt>count()</tt></a> is called with <tt>TRUE</tt>  passed as the parameter.</p><p>Both the <tt>$sql</tt> and <tt>$non_limited_count_sql</tt> can be passed as a string  SQL statement, or an array containing a SQL statement and the values to  escape into it:</p><pre class="block php"><code>fRecordSet::buildFromSQL(
    'User',
    array("SELECT * FROM users WHERE date_created > %d LIMIT %i OFFSET %i", $start_date, 10, 10*($page-1)),
    array("SELECT * FROM users WHERE date_created > %d", $start_date),
    10,
    $page
)</code></pre>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fRecordSet">fRecordSet</a></span> <span class="php-identifier">buildFromSQL</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">string|array</span> <span class="php-var">$sql</span><span class="php-code">,</span> <span class="php-vartype">string|array</span> <span class="php-var">$non_limited_count_sql</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$limit</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$page</span><span class="php-code">=</span>1 <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class to create the <a href="#fRecordSet">fRecordSet</a> of</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string|array</td>
				<td class="param_name">$sql</td>
				<td class="param_description">The SQL to create the set from, or an array of the SQL statement plus values to escape</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string|array</td>
				<td class="param_name">$non_limited_count_sql</td>
				<td class="param_description">An SQL statement, or an array of the SQL statement plus values to escape, to get the total number of rows that would have been returned if a <tt>LIMIT</tt> clause had not been used. Should only be passed if a <tt>LIMIT</tt> clause is used in <tt>$sql</tt>.</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$limit</td>
				<td class="param_description">The number of records the SQL statement was limited to - this is information only and does not affect the SQL</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$page</td>
				<td class="param_description">The page of records the SQL statement returned - this is information only and does not affect the SQL</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					A set of <a href="#fActiveRecord">fActiveRecord</a> objects
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fRecordSet-api-compose" class="protected method static"><span class="resolution">::</span><span class="name">compose()</span> <span class="visibility">protected</span></h5>
			<div class="protected method static">
							<div class="method_description">
									<p>Composes text using <a href="#fText">fText</a> if loaded</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">compose</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$component</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message to compose</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$component <em>[, ... ]</em></td>
				<td class="param_description">A string or number to insert into the message</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The composed and possible translated message
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fRecordSet-api-tally" class="method static"><span class="resolution">::</span><span class="name">tally()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Counts the number of records that match the conditions specified</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">tally</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$where_conditions</span><span class="php-code">=</span>array() <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$class</td>
				<td class="param_description">The class of records to count</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$where_conditions</td>
				<td class="param_description">An array of where clause parameters in the same format as <a href="#fRecordSet-api-build"><tt>build()</tt></a></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The number of records
				</p>
			</div>
			<!-- end method static -->
			</div>
<div class="class_methods" id="fRecordSet-api-class_methods">
<h4>Methods</h4>
			  			  									<!-- start protected method -->
			<h5 id="fRecordSet-api-__construct" class="protected method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Sets the contents of the set</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fRecordSet">fRecordSet</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype">string|array</span> <span class="php-var">$class</span><span class="php-code">,</span> <span class="php-vartype">Iterator|array</span> <span class="php-var">$records</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">string|integer</span> <span class="php-var">$non_limited_count</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$limit</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$page</span><span class="php-code">=</span>1 <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string|array</td>
				<td class="param_name">$class</td>
				<td class="param_description">The type(s) of records the object will contain</td>
			  </tr>
						  <tr>
				<td class="param_data_type">Iterator|array</td>
				<td class="param_name">$records</td>
				<td class="param_description">The Iterator object of the records to create or an array of records</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string|integer</td>
				<td class="param_name">$non_limited_count</td>
				<td class="param_description">An SQL statement to get the total number of records sans a <tt>LIMIT</tt> clause or a integer of the total number of records</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$limit</td>
				<td class="param_description">The number of records the set was limited to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$page</td>
				<td class="param_description">The page of records that was built</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-__call" class="method"><span class="resolution">-></span><span class="name">__call()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Allows for preloading various data related to the record set in single database queries, as opposed to one query per record</p>
								<p>This method will handle methods in the format <tt>verbRelatedRecords()</tt> for  the verbs <tt>build</tt>, <tt>prebuild</tt>, <tt>precount</tt> and <tt>precreate</tt>.</p><p><tt>build</tt> calls <tt>create{RelatedClass}()</tt> on each record in the set and  returns the result as a new record set. The relationship route can be  passed as an optional parameter.</p><p><tt>prebuild</tt> builds *-to-many record sets for all records in the record  set. <tt>precount</tt> will count records in *-to-many record sets for every  record in the record set. <tt>precreate</tt> will create a *-to-one record  for every record in the record set.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">__call</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method_name</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$parameters</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method_name</td>
				<td class="param_description">The name of the method called</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$parameters</td>
				<td class="param_description">The parameters passed</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fRecordSet-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-buildFromCall" class="method"><span class="resolution">-></span><span class="name">buildFromCall()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Calls a specific method on each object, returning an <a href="#fRecordSet">fRecordSet</a> of the results</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fRecordSet">fRecordSet</a></span> <span class="php-identifier">buildFromCall</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$parameter</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to call</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$parameter <em>[, ... ]</em></td>
				<td class="param_description">A parameter to pass for each call to the method</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 A set of records that resulted from calling the method
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-buildFromMap" class="method"><span class="resolution">-></span><span class="name">buildFromMap()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Maps each record in the set to a callback function, returning an <a href="#fRecordSet">fRecordSet</a> of the results</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fRecordSet">fRecordSet</a></span> <span class="php-identifier">buildFromMap</span><span class="php-brackets">(</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$parameter</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback to pass the values to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$parameter <em>[, ... ]</em></td>
				<td class="param_description">The parameter to pass to the callback - see method description for details</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 A set of records that resulted from the mapping operation
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-call" class="method"><span class="resolution">-></span><span class="name">call()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Calls a specific method on each object, returning an array of the results</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">call</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$parameter</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to call</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$parameter <em>[, ... ]</em></td>
				<td class="param_description">A parameter to pass for each call to the method</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 An array the size of the record set with one result from each record/method
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-chunk" class="method"><span class="resolution">-></span><span class="name">chunk()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Chunks the record set into an array of <a href="#fRecordSet">fRecordSet</a> objects</p>
								<p>Each <a href="#fRecordSet">fRecordSet</a> would contain <tt>$number</tt> records, except for the last,  which will contain between 1 and <tt>$number</tt> records.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">chunk</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$number</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$number</td>
				<td class="param_description">The number of <a href="#fActiveRecord">fActiveRecord</a> objects to place in each <a href="#fRecordSet">fRecordSet</a></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 An array of <a href="#fRecordSet">fRecordSet</a> objects
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-contains" class="method"><span class="resolution">-></span><span class="name">contains()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Checks if the record set contains the record specified</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">contains</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$record</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$record</td>
				<td class="param_description">The record to check, must exist in the database</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If the record specified is in this record set
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-count" class="method"><span class="resolution">-></span><span class="name">count()</span> <span class="visibility">public</span><span class="implements"> implements Countable</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the number of records in the set</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">count</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$ignore_limit</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$ignore_limit</td>
				<td class="param_description">If set to <tt>TRUE</tt>, this method will return the number of records that would be in the set if there was no <tt>LIMIT</tt> clause</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The number of records in the set
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-diff" class="method"><span class="resolution">-></span><span class="name">diff()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Removes all passed records from the current record set</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fRecordSet">fRecordSet</a></span> <span class="php-identifier">diff</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fRecordSet">fRecordSet</a>|array|<a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$records</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$remember_original_count</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fRecordSet">fRecordSet</a>|array|<a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$records</td>
				<td class="param_description">The record set, array of records, or record to remove from the current record set, all instances will be removed</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$remember_original_count</td>
				<td class="param_description">If the number of records in the current set should be saved as the non-limited count for the new set - the page will be reset to <tt>1</tt> either way</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The records not present in the passed records
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-filter" class="method"><span class="resolution">-></span><span class="name">filter()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Filters the records in the record set via a callback</p>
								<p>The <tt>$callback</tt> parameter can be one of three different forms to filter  the records in the set:  </p><ul><li>A callback that accepts a single record and returns <tt>FALSE</tt> if it should be removed</li><li>A psuedo-callback in the form <tt>'{record}::methodName'</tt> to filter out any records where the output of <tt>$record-&gt;methodName()</tt> is equivalent to <tt>FALSE</tt></li><li>A conditions array that will remove any records that don't meet all of the conditions</li></ul><p>The conditions array can use one or more of the following <tt>key =&gt; value</tt>  syntaxes to perform various comparisons. The array keys are method  names followed by a comparison operator.</p><pre class="block "><code>// The following forms work for any $value that is not an array
'methodName='                           => $value  // If the output is equal to $value
'methodName!'                           => $value  // If the output is not equal to $value
'methodName!='                          => $value  // If the output is not equal to $value
'methodName<>'                          => $value  // If the output is not equal to $value
'methodName<'                           => $value  // If the output is less than $value
'methodName<='                          => $value  // If the output is less than or equal to $value
'methodName>'                           => $value  // If the output is greater than $value
'methodName>='                          => $value  // If the output is greater than or equal to $value
'methodName~'                           => $value  // If the output contains the $value (case insensitive)
'methodName^~'                          => $value  // If the output starts with the $value (case insensitive)
'methodName$~'                          => $value  // If the output ends with the $value (case insensitive)
'methodName!~'                          => $value  // If the output does not contain the $value (case insensitive)
'methodName|methodName2|methodName3~'   => $value  // Parses $value as a search string and make sure each term is present in at least one output (case insensitive)
// The following forms work for any $array that is an array
'methodName='                           => $array  // If the output is equal to at least one value in $array
'methodName!'                           => $array  // If the output is not equal to any value in $array
'methodName!='                          => $array  // If the output is not equal to any value in $array
'methodName<>'                          => $array  // If the output is not equal to any value in $array
'methodName~'                           => $array  // If the output contains one of the strings in $array (case insensitive)
'methodName^~'                          => $array  // If the output starts with one of the strings in $array (case insensitive)
'methodName$~'                          => $array  // If the output ends with one of the strings in $array (case insensitive)
'methodName!~'                          => $array  // If the output contains none of the strings in $array (case insensitive)
'methodName&~'                          => $array  // If the output contains all of the strings in $array (case insensitive)
'methodName|methodName2|methodName3~'   => $array  // If each value in the array is present in the output of at least one method (case insensitive)
// The following works for an equal number of methods and values in the array
'methodName!|methodName2<|methodName3=' => array($value, $value2, $value3) // An OR statement - one of the method to value comparisons must be TRUE
// The following accepts exactly two methods and two values, although the second value may be NULL
'methodName|methodName2><'              => array($value, $value2) // If the range of values from the methods intersects the range of $value and $value2 - should be dates, times, timestamps or numbers</code></pre>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fRecordSet">fRecordSet</a></span> <span class="php-identifier">filter</span><span class="php-brackets">(</span> <span class="php-vartype">callback|string|array</span> <span class="php-var">$procedure</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$remember_original_count</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">callback|string|array</td>
				<td class="param_name">$procedure</td>
				<td class="param_description">The way in which to filter the records - see method description for possible forms</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$remember_original_count</td>
				<td class="param_description">If the number of records in the current set should be saved as the non-limited count for the new set - the page will be reset to <tt>1</tt> either way</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 A new <a href="#fRecordSet">fRecordSet</a> with the filtered records
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-getClass" class="method"><span class="resolution">-></span><span class="name">getClass()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the class name of the record being stored</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string|array</span> <span class="php-identifier">getClass</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The class name(s) of the records in the set
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fRecordSet-api-getIterator" class="protected method"><span class="resolution">-></span><span class="name">getIterator()</span> <span class="visibility">internal public</span><span class="implements"> implements IteratorAggregate</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns an iterator for the record set</p>
								<p>This method is required by the IteratorAggregate interface.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">ArrayIterator</span> <span class="php-identifier">getIterator</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 An iterator for the record set
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-getLimit" class="method"><span class="resolution">-></span><span class="name">getLimit()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the number of records the set was limited to</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">getLimit</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The number of records the set was limited to
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-getPage" class="method"><span class="resolution">-></span><span class="name">getPage()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the page of records this set represents</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">getPage</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The page of records this set represents
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-getPages" class="method"><span class="resolution">-></span><span class="name">getPages()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the number of pages of records exist for the limit used when creating this set</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">getPages</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The number of pages of records that exist for the limit specified
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-getPrimaryKeys" class="method"><span class="resolution">-></span><span class="name">getPrimaryKeys()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the primary keys for all of the records in the set</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">getPrimaryKeys</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The primary keys of all the records in the set
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-getRecord" class="method"><span class="resolution">-></span><span class="name">getRecord()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the record at the zero-based index specified</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-identifier">getRecord</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$index</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$index</td>
				<td class="param_description">The index of the record to return</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The record requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-getRecords" class="method"><span class="resolution">-></span><span class="name">getRecords()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns all of the records in the set</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">getRecords</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The records in the set
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-intersect" class="method"><span class="resolution">-></span><span class="name">intersect()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns all records in the current record set that are also present in the passed records</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fRecordSet">fRecordSet</a></span> <span class="php-identifier">intersect</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fRecordSet">fRecordSet</a>|array|<a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$records</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$remember_original_count</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fRecordSet">fRecordSet</a>|array|<a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$records</td>
				<td class="param_description">The record set, array of records, or record to create an intersection of with the current record set</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$remember_original_count</td>
				<td class="param_description">If the number of records in the current set should be saved as the non-limited count for the new set - the page will be reset to <tt>1</tt> either way</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The records present in the current record set that are also present in the passed records
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-map" class="method"><span class="resolution">-></span><span class="name">map()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Performs an <a class="ext-link" href="http://php.net/array_map"><span class="icon"><tt>array_map()</tt></span></a> on the record in the set</p>
								<p>The record will be passed to the callback as the first parameter unless  it's position is specified by the placeholder string <tt>'{record}'</tt>.</p><p>Additional parameters can be passed to the callback in one of two  different ways:  </p><ul><li>Passing a non-array value will cause it to be passed to the callback</li><li>Passing an array value will cause the array values to be passed to the callback with their corresponding record</li></ul><p>If an array parameter is too long (more items than records in the set)  it will be truncated. If an array parameter is too short (less items  than records in the set) it will be padded with <tt>NULL</tt> values.</p><p>To allow passing the record as a specific parameter to the callback, a  placeholder string <tt>'{record}'</tt> will be replaced with a the record. It  is also possible to specify <tt>'{record}::methodName'</tt> to cause the output  of a method from the record to be passed instead of the whole record.</p><p>It is also possible to pass the zero-based record index to the callback  by passing a parameter that contains <tt>'{index}'</tt>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">map</span><span class="php-brackets">(</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$parameter</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback to pass the values to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$parameter <em>[, ... ]</em></td>
				<td class="param_description">The parameter to pass to the callback - see method description for details</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 An array of the results from the callback
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-merge" class="method"><span class="resolution">-></span><span class="name">merge()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Merges the record set with more records</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fRecordSet">fRecordSet</a></span> <span class="php-identifier">merge</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fRecordSet">fRecordSet</a>|array|<a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-var">$records</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fRecordSet">fRecordSet</a>|array|<a href="#fActiveRecord">fActiveRecord</a></td>
				<td class="param_name">$records</td>
				<td class="param_description">The record set, array of records, or record to merge with the current record set, duplicates will <strong>not</strong> be removed</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The merged record sets
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fRecordSet-api-offsetExists" class="protected method"><span class="resolution">-></span><span class="name">offsetExists()</span> <span class="visibility">internal public</span><span class="implements"> implements ArrayAccess</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Checks to see if an offset exists</p>
								<p>This method is required by the ArrayAccess interface.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">offsetExists</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$offset</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$offset</td>
				<td class="param_description">The offset to check</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If the offset exists
				</p>
		</div>
		<!-- end method -->	
						<!-- start protected method -->
			<h5 id="fRecordSet-api-offsetGet" class="protected method"><span class="resolution">-></span><span class="name">offsetGet()</span> <span class="visibility">internal public</span><span class="implements"> implements ArrayAccess</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns a record based on the offset</p>
								<p>This method is required by the ArrayAccess interface.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fActiveRecord">fActiveRecord</a></span> <span class="php-identifier">offsetGet</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$offset</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$offset</td>
				<td class="param_description">The offset of the record to get</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The requested record
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fNoRemainingException">fNoRemainingException</a></dt><dd>When the offset specified is beyond the last record</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fRecordSet-api-offsetSet" class="protected method"><span class="resolution">-></span><span class="name">offsetSet()</span> <span class="visibility">internal public</span><span class="implements"> implements ArrayAccess</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Prevents setting values to the record set</p>
								<p>This method is required by the ArrayAccess interface.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">offsetSet</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$offset</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$offset</td>
				<td class="param_description">The offset to set</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value to set to the offset</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fRecordSet-api-offsetUnset" class="protected method"><span class="resolution">-></span><span class="name">offsetUnset()</span> <span class="visibility">internal public</span><span class="implements"> implements ArrayAccess</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Prevents unsetting values from the record set</p>
								<p>This method is required by the ArrayAccess interface.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">offsetUnset</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$offset</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$offset</td>
				<td class="param_description">The offset to unset</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-reduce" class="method"><span class="resolution">-></span><span class="name">reduce()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Reduces the record set to a single value via a callback</p>
								<p>The callback should take two parameters and return a single value:  </p><ul><li>The initial value and the first record for the first call</li><li>The result of the last call plus the next record for the second and subsequent calls</li></ul><pre class="block php"><code>function my_reduce($sum, $record)
{
    return $sum + $record->getQuantity();
)
// For the first record, 0.0 will be passed as the $sum, then subsequent
// calls end up getting the return value of the last call to my_reduce()
$total_quantity = $record_set->reduce('my_reduce', 0.0);</code></pre>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">reduce</span><span class="php-brackets">(</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$initial_value</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback to pass the records to - see method description for details</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$initial_value</td>
				<td class="param_description">The initial value to seed reduce with</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The result of the reduce operation
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-slice" class="method"><span class="resolution">-></span><span class="name">slice()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Slices a section of records from the set and returns a new set containing those</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fRecordSet">fRecordSet</a></span> <span class="php-identifier">slice</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$offset</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$length</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$remember_original_count</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$offset</td>
				<td class="param_description">The index to start at, negative indexes will slice that many records from the end</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$length</td>
				<td class="param_description">The number of records to return, negative values will stop that many records before the end, <tt>NULL</tt> will return all records to the end of the set - if there are not enough records, less than <tt>$length</tt> will be returned</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$remember_original_count</td>
				<td class="param_description">If the number of records in the current set should be saved as the non-limited count for the new set - the page will be reset to <tt>1</tt> either way</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The new slice of records
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-sort" class="method"><span class="resolution">-></span><span class="name">sort()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sorts the set by the return value of a method from the class created and rewind the interator</p>
								<p>This methods uses <a href="#fUTF8-api-inatcmp"><tt>fUTF8::inatcmp()</tt></a> to perform comparisons.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fRecordSet">fRecordSet</a></span> <span class="php-identifier">sort</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$direction</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to call on each object to get the value to sort by</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$direction</td>
				<td class="param_description">Either <tt>'asc'</tt> or <tt>'desc'</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 A new record set object, with the records sorted as requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-sortByCallback" class="method"><span class="resolution">-></span><span class="name">sortByCallback()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sorts the set by passing the callback to <a class="ext-link" href="http://php.net/usort"><span class="icon"><tt>usort()</tt></span></a> and rewinds the interator</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fRecordSet">fRecordSet</a></span> <span class="php-identifier">sortByCallback</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$callback</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The function/method to pass to <tt>usort()</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 A new record set object, with the records sorted as requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-split" class="method"><span class="resolution">-></span><span class="name">split()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Splits the record set into an array of <a href="#fRecordSet">fRecordSet</a> objects</p>
								<p>Each <a href="#fRecordSet">fRecordSet</a> would contain ceil(number of records/<tt>$number</tt>) records,  except for the last, which will contain between 1 and ceil() records.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">split</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$number</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$number</td>
				<td class="param_description">The number of <a href="#fRecordSet">fRecordSet</a> objects to create</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 An array of <a href="#fRecordSet">fRecordSet</a> objects
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fRecordSet-api-tossIfEmpty" class="method"><span class="resolution">-></span><span class="name">tossIfEmpty()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Throws an <a href="#fEmptySetException">fEmptySetException</a> if the record set is empty</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fRecordSet">fRecordSet</a></span> <span class="php-identifier">tossIfEmpty</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message to use for the exception if there are no records in this set</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The record set object, to allow for method chaining
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fEmptySetException">fEmptySetException</a></dt><dd>When there are no record in the set</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fRecordSet-api-unique" class="method"><span class="resolution">-></span><span class="name">unique()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns a new <a href="#fRecordSet">fRecordSet</a> containing only unique records in the record set</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fRecordSet">fRecordSet</a></span> <span class="php-identifier">unique</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$remember_original_count</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$remember_original_count</td>
				<td class="param_description">If the number of records in the current set should be saved as the non-limited count for the new set - the page will be reset to <tt>1</tt> either way</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The new record set with only unique records
				</p>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="fRequest">fRequest</h2>
<div class="sidebar">
<h3 id="fRequest-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fRequest">Class Documentation</a></strong></li>
<li><a href="#fRequest-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fRequest-docs-GettingValues">Getting Values</a>
<ul>
<li><a href="#fRequest-docs-InputFilteringbyTypecastingSecurity">Input Filtering by Typecasting (Security)</a></li>
<li><a href="#fRequest-docs-SpecialDataTypeHandling">Special Data Type Handling</a>
<ul>
<li><a href="#fRequest-docs-Arrays">Arrays</a></li>
<li><a href="#fRequest-docs-Binary">Binary</a></li>
<li><a href="#fRequest-docs-Booleans">Booleans</a></li>
<li><a href="#fRequest-docs-DatesTimesTimestamps">Dates/Times/Timestamps</a></li>
<li><a href="#fRequest-docs-Integers">Integers</a></li>
<li><a href="#fRequest-docs-Strings">Strings</a></li>
</ul>
</li>
<li><a href="#fRequest-docs-AllowingNull">Allowing Null</a></li>
<li><a href="#fRequest-docs-StrictArrays">Strict Arrays</a></li>
<li><a href="#fRequest-docs-RestrictingValidValues">Restricting Valid Values</a></li>
<li><a href="#fRequest-docs-EscapingforHTMLOutput">Escaping for HTML Output</a></li>
</ul>
</li>
<li><a href="#fRequest-docs-SettingValues">Setting Values</a></li>
<li><a href="#fRequest-docs-ArrayDereferencing">Array Dereferencing</a></li>
<li><a href="#fRequest-docs-PreventingCSRFSecurity">Preventing CSRF (Security)</a></li>
<li><a href="#fRequest-docs-CheckingTheHTTPMethod">Checking The HTTP Method</a></li>
<li><a href="#fRequest-docs-RetrievingHTTPAcceptValues">Retrieving HTTP Accept Values</a></li>
<li><a href="#fRequest-docs-MultipleSubmitButtons">Multiple Submit Buttons</a></li>
</ul>
</div>

<p>
The fRequest class is a static class that allows access to data sent via <code>GET</code>, <code>POST</code>, <code>PUT</code> and <code>DELETE</code> HTTP requests. It also provides functionality to determine the HTTP method used and retrieve relevant <code>Accept</code> and <code>Accept-Language</code> values sent by the browser.
</p>

<h3 id="fRequest-docs-GettingValues">Getting Values</h3>

<p>
While fRequest does more than just get values, most developers will be primarily interested in the two methods <a href="#fRequest-api-get"><code>get()</code></a> and <a href="#fRequest-api-getValid"><code>getValid()</code></a>. Both methods pull values from the <code>$_GET</code> and <code>$_POST</code> superglobals and the <code>php://input</code> stream (for <code>PUT</code> and <code>DELETE</code> requests).
</p>

<p>
The <code>get()</code> method will pull a value, but you can also typecast the value and provide a default. The first parameter, <code>$key</code>, specifies the key to get the value for. The second (optional) parameter, <code>$cast_to</code>, will set the data type of the value. It accepts any type string that is valid for the PHP function <code>settype()</code>. <code>NULL</code> can be used if no type casting should happen.
</p>

<p>
The third (optional) parameter, <code>$default_value</code>, specifies what should be returned if the key is not found in <code>$_POST</code>, <code>$_GET</code> or <code>php://input</code>. The fourth (optional) parameter, <code>$use_default_for_blank</code>, causes the <code>$default</code> value to be returned if a blank string value was provided for the key, or the key is not found.
</p>

<p>
Here are some examples:
</p>
<pre class="block php"><code>&lt;?php
// The first_name field will be returned in whatever format was submitted - string or array
$first_name = fRequest::get('first_name');

// An array will always be returned, defaulting to an array of 1 if no value is provided
$group_ids  = fRequest::get('group_ids', 'array', array(1));

// Integer return value - 1 will be returned if no value, but a blank value will be cast to 0
$user_id    = fRequest::get('user_id', 'integer', 1);

// Integer return value -  1 will be returned if no value or a blank string is provided
$total_cost = fRequest::get('total_cost', 'integer', 1, TRUE);
?&gt;</code></pre>

<h4 id="fRequest-docs-InputFilteringbyTypecastingSecurity">Input Filtering by Typecasting (Security)</h4>

<p>
An important aspect of the <a href="#fRequest-api-get"><code>get()</code></a> method is to use the <code>$cast_to</code> parameter whenever possible. This helps to restrict data coming in and is part of creating an effective solution against cross-site scripting.
</p>
<pre class="block php"><code>// IDs that can only ever be integers should be cast to integers
$blog_id = fRequest::get('blog_id', 'integer');</code></pre>

<p>
 Currently the following data types are supported:
</p>

<ul>
<li>array</li>
<li>binary</li>
<li>boolean</li>
<li>date</li>
<li>float</li>
<li>integer</li>
<li>integer!</li>
<li>string</li>
<li>time</li>
<li>timestamp</li>
</ul>

<h4 id="fRequest-docs-SpecialDataTypeHandling">Special Data Type Handling</h4>

<p>
When accepting information from the user, different data types have to be handled differently. Of special note are arrays, binary, booleans, dates/times/timestamps, integers and strings.
</p>

<h5 id="fRequest-docs-Arrays">Arrays</h5>

<p>
For arrays, PHP will automatically create an array when input field names end with <code>[]</code>. Thus if you wanted to capture an array of groups ids, you could create a checkbox for each group id and give each one the name <code>group_ids[]</code>. When PHP parses the request data it will join all <code>group_ids[]</code> values into an array and assign it to the key <code>groups_ids</code> in the appropriate superglobal. 
</p>

<p>
The array features mentioned above are built into PHP, however Flourish takes the array processing a step further. If a value is to be cast to an array, and is a string that contains commas, the string will be exploded on the comma character. Additionally, if an array contains a single entry of either a blank string or a <code>NULL</code> value, Flourish will return an empty array. This prevents having to manually filter arrays for meaningless values.
</p>

<p>
See <a href="#fRequest-docs-StrictArrays">strict arrays</a> to create a single-dimensional array of a specific data type.
</p>

<h5 id="fRequest-docs-Binary">Binary</h5>

<p>
Binary data does not have any modification made to it when it is returned. There is no guarantee what encoding it will be in, and it may even contain null bytes. 
</p>

<h5 id="fRequest-docs-Booleans">Booleans</h5>

<p>
Booleans are interpreted from string values in as logical a way as possible. Empty values (according to PHPs <code>empty()</code> function) and the strings <code>'f'</code>, <code>'false'</code> and <code>'no'</code> (case-insensitive) will result in a <code>FALSE</code> value. This is obviously also the case if the key is not present in the request. Any other string value such as <code>'1'</code>, <code>'t'</code>, <code>'true'</code>, <code>'yes'</code>, etc. will be interpreted as a <code>TRUE</code> value.
</p>

<h5 id="fRequest-docs-DatesTimesTimestamps">Dates/Times/Timestamps</h5>

<p>
When the <code>date</code>, <code>time</code> and <code>timestamp</code> data types are specified, the returned values will be <a href="#fDate">fDate</a>, <a href="#fTime">fTime</a> and <a href="#fTimestamp">fTimestamp</a> objects, respectively.
</p>

<h5 id="fRequest-docs-Integers">Integers</h5>

<p>
When the <code>integer</code> or <code>int</code> type is specified, all values are cast to a real PHP integer, except for large integer values, which are kept as strings. Large integer values are value that can not be represented by a PHP integer. If a real PHP integer is always required, the <code>integer!</code> type may be used instead. This type may cause the modification of some large integer values.
</p>

<h5 id="fRequest-docs-Strings">Strings</h5>

<p>
All strings that are passed through the <code>get()</code> method are expected to be UTF-8 and any invalid UTF-8 characters are removed by passing the data through <a href="#fUTF-api-clean">fUTF::clean()</a>. In addition to invalid UTF-8 byte sequences, all low byte non-printable characters are removed. This is true even if a value is not explicitly cast to a string, or if the string is contained inside of an array. <em>If you need raw data, use the <a href="#fRequest-docs-Binary">binary</a> type.</em>
</p>

<h4 id="fRequest-docs-AllowingNull">Allowing Null</h4>

<p>
When typecasting values, it is sometimes useful for the absence of a value to return <code>NULL</code>, while still casting all non-<code>NULL</code> values. By adding a <code>?</code> to the end of the data type, <code>NULL</code> will be returned if the key is not present in the request data, or if the value is an empty string <code>''</code>.
</p>
<pre class="block php"><code>// Get an integer or NULL
$count = fRequest::get('count', 'integer?');

// Get an fDate object or NULL
$date  = fRequest::get('date', 'date?');</code></pre>

<h4 id="fRequest-docs-StrictArrays">Strict Arrays</h4>

<p>
The <code>array</code> type ensures that the value returned will be an array containing string values, with an unlimited number of dimensions. It is also possible to add <code>[]</code> to the end of any other data type to return a <strong>single-dimensional</strong> array containing values of that type.
</p>
<pre class="block php"><code>// Return a single dimensional array of integers
$ids = fRequest::get('ids', 'integer[]');</code></pre>

<h4 id="fRequest-docs-RestrictingValidValues">Restricting Valid Values</h4>

<p>
The method <code>getValid()</code> simplifies the process a great deal by taking exactly two parameters, <code>$key</code>, the key to request the value for and <code>$valid_values</code>, an array of permissible values. If the value is not one of the valid value, the first valid value will be picked. Here is an example:
</p>
<pre class="block php"><code>&lt;?php
// $action will get the value 'list' if no value was present
$action = fRequest::getValid('action', array('list', 'search'));
?&gt;</code></pre>

<h4 id="fRequest-docs-EscapingforHTMLOutput">Escaping for HTML Output</h4>

<p>
The static methods <a href="#fRequest-api-encode"><code>encode()</code></a> and <a href="#fRequest-api-prepare"><code>prepare()</code></a> provide a simple short to calling <a href="#fRequest-api-get"><code>get()</code></a> and then wrapping the result in <a href="#fHTML-api-encode">fHTML::encode()</a> or <a href="#fHTML-api-prepare">fHTML::prepare()</a> respectively. These two methods have the exact same signature as <a href="#fRequest-api-get"><code>get()</code></a> and don't perform any processing other than passing the resulting value to <a href="#fHTML">fHTML</a>.
</p>
<pre class="block php"><code>// Output a trusted value from the request
echo fRequest::prepare('name');

// Output an untrusted value from the request
echo fRequest::encode('name');</code></pre>

<p>
 <em>Just as with <a href="#fHTML-api-prepare">fHTML::prepare()</a>, be sure to only ever use <a href="#fRequest-api-prepare"><code>prepare()</code></a> if the user input can be trusted. <code>prepare()</code> allows for HTML to be inserted into the page unescaped. If the input is untrusted, the <a href="#fRequest-api-encode"><code>encode()</code></a> method should be used instead.</em>
</p>

<h3 id="fRequest-docs-SettingValues">Setting Values</h3>

<p>
Sometimes when dealing with different input types, it is useful to be able to alter or fix the request data. The method <a href="#fRequest-api-set"><code>set()</code></a> allows a new value to be set to any key. It accepts two parameters, the <code>$key</code> to set and the <code>$value</code> to assign.
</p>
<pre class="block php"><code>if ($datetime = fRequest::get('date_time')) {
    fRequest::set('date', date('Y-m-d', strtotime($datetime)));
    fRequest::set('time', date('g:ia',  strtotime($datetime)));
}</code></pre>

<h3 id="fRequest-docs-ArrayDereferencing">Array Dereferencing</h3>

<p>
When a request value is an array, it is possible to use array dereference syntax in the field name to access a specific array key. This syntax works with <a href="#fRequest-api-get"><code>get()</code></a>, <a href="#fRequest-api-getValid"><code>getValid()</code></a>, <a href="#fRequest-api-set"><code>set()</code></a>, <a href="#fRequest-api-check"><code>check()</code></a>, <a href="#fRequest-api-encode"><code>encode()</code></a> and <a href="#fRequest-api-prepare"><code>prepare()</code></a>.
</p>

<p>
An input using array notation will automatically be converted to an array when PHP processes the request. This means the following inputs:
</p>
<pre class="block html"><code>&lt;input name=&quot;users[first_name]&quot; value=&quot;John&quot; /&gt;
&lt;input name=&quot;users[last_name]&quot; value=&quot;Smith&quot; /&gt;</code></pre>

<p>
 will cause the <code>$_POST</code> superglobal to contain:
</p>
<pre><code>array(
    'user' =&gt; array(
        'first_name' =&gt; 'John',
        'last_name'  =&gt; 'Smith'
    )
)</code></pre>

<p>
 fRequest uses array dereference syntax that is identical to the <code>&lt;input&gt;</code> tag syntax.
</p>
<pre class="block php"><code>// This will echo John
echo fRequest::get('user[first_name]');</code></pre>

<p>
 Array dereferencing can be any number of layers deep.
</p>
<pre class="block php"><code>echo fRequest::get('user[groups][0][name]');</code></pre>

<h3 id="fRequest-docs-PreventingCSRFSecurity">Preventing CSRF (Security)</h3>

<p>
<a class="ext-link" href="http://en.wikipedia.org/wiki/Cross-site_request_forgery"><span class="icon">Cross-site request forgery</span></a> (CSRF) is a technique where malicious websites will take advantage of the fact that a user has a valid session on a site, and will generate unauthorized requests on their behalf. These unauthorized requests can take the form of either <code>GET</code> or <code>POST</code> requests and can affect any page that does not validate the request properly.
</p>

<p>
<code>GET</code> request exploits are very easy to implement by taking advantage of the <code>src</code> attribute of various HTML tags. Imagine the HTML below living on <code>http://example2.com</code>:
</p>
<pre class="block html"><code>&lt;img src=&quot;http://example.com/my_messages/delete_all.php&quot; /&gt;</code></pre>

<p>
 If the script located at <code>/my_messages/delete_all.php</code> allowed a <code>GET</code> request to cause all messages to delete and the user who visited <code>example2.com</code> was logged into <code>example.com</code>, all of their messages would be deleted.
</p>

<p>
<code>POST</code> request exploits are slightly more difficult to take advantage of since a user will have to actually submit a form. Imagine the HTML below living on <code>http://example2.com</code>:
</p>
<pre class="block html"><code>&lt;p&gt;
    Sign up for a free MP3 player!
&lt;/p&gt;
&lt;form action=&quot;http://example.com/my_messages/delete_all.php&quot; method=&quot;post&quot;&gt;
    &lt;p&gt;
        &lt;label for=&quot;email&quot;&gt;Your Email&lt;/label&gt;
        &lt;input id=&quot;email&quot; name=&quot;email&quot; value=&quot;&quot; /&gt;   
    &lt;/p&gt;
    &lt;p&gt;
        &lt;input type=&quot;submit&quot; value=&quot;Sign Up!&quot; /&gt;
    &lt;/p&gt;
&lt;/form&gt;</code></pre>

<p>
 This form would work even if the script requires a <code>POST</code> request, however it requires convincing the user to submit a form or use javascript to automatically trigger it.
</p>

<p>
Obviously quite a number of things can help to prevent there CSRF attacks, however the best security is implemented by giving the user a single-use crytographically random token for them to resubmit with the request. This requires that the user request the page first (to get the token) and then resubmit it.
</p>

<p>
Since the attack relies on the user being logged in to a site in their browser, the attacking site will not be able to use a server-side request to retrieve the page, and thus the token. In addition, browsers prevent javascript from requesting pages across domains, so that precludes an attacking using it to retrieve the page and then resubmit.
</p>

<p>
The static method <a href="#fRequest-api-generateCSRFToken"><code>generateCSRFToken()</code></a> will create a single-use token to place into a form to protect against CSRF attacks. When processing a form, the static method <a href="#fRequest-api-validateCSRFToken"><code>validateCSRFToken()</code></a> should be used to ensure the form submission is valid by passing the <code>$token</code> as the first parameter. If the token is not valid, an <a href="#fValidationException">fValidationException</a> will be thrown.
</p>

<p>
The following HTML form and corresponding PHP will ensure that only users who request the form will then be able to delete their messages.
</p>
<pre class="block html"><code>&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;
    &lt;p&gt;
        &lt;input type=&quot;submit&quot; value=&quot;Yes, delete my messages!&quot; /&gt;
        &lt;input type=&quot;hidden&quot; name=&quot;request_token&quot; value=&quot;&lt;?php echo fRequest::generateCSRFToken() ?&gt;&quot; /&gt;
    &lt;/p&gt;
&lt;/form&gt;</code></pre>
<pre class="block php"><code>if (fRequest::isPost()) {
    try {
        fRequest::validateCSRFToken(fRequest::get('request_token'));

        // Delete all of the users messages
        
    } catch (fExpectedException $e) {
        $e-&gt;printMessage();
    }
}</code></pre>

<p>
 By default both <code>generateCSRFToken()</code> and <code>validateCSRFToken()</code> will use the current page as the identifier to use when checking the token. If one page is submitting the value, but another is checking it, the <code>$url</code> parameter of each method can be used.
</p>
<pre class="block html"><code>&lt;input type=&quot;hidden&quot; name=&quot;request_token&quot; value=&quot;&lt;?php echo fRequest::generateCSRFToken('/processing_page.php') ?&gt;&quot; /&gt;</code></pre>
<pre class="block php"><code>fRequest::validateCSRFToken(fRequest::get('request_token'), '/processing_page.php');</code></pre>

<p>
 In addition, each URL can have multiple valid tokens at one time. This ensures that tabbed browsing will not cause the user to receive error messages about unauthenticated requests.
</p>

<h3 id="fRequest-docs-CheckingTheHTTPMethod">Checking The HTTP Method</h3>

<p>
When creating RESTful applications it is useful to know the HTTP method used to request the current page. There are four methods to check each of the four HTTP methods:
</p>
<table><tbody>
<tr>
<td><strong>HTTP Method</strong></td>
<td><strong>!fRequest Method</strong></td>
</tr>
<tr>
<td>GET</td>
<td><a href="#fRequest-api-isGet"><code>isGet()</code></a></td>
</tr>
<tr>
<td>POST</td>
<td><a href="#fRequest-api-isPost"><code>isPost()</code></a></td>
</tr>
<tr>
<td>PUT</td>
<td><a href="#fRequest-api-isPut"><code>isPut()</code></a></td>
</tr>
<tr>
<td>DELETE</td>
<td><a href="#fRequest-api-isDelete"><code>isDelete()</code></a></td>
</tr>
<tr>
<td>HEAD</td>
<td><a href="#fRequest-api-isHead"><code>isHead()</code></a></td>
</tr>
</tbody></table>

<p>
Since browsers only currently support <code>GET</code> and <code>POST</code> method, <code>isPost()</code> will commonly be the only one used unless creating a RESTful API.
</p>
<pre class="block php"><code>if (fRequest::isPost()) {
    // Perform constructive/destructive action
}</code></pre>

<p>
 It is also possible to see if a request was made via AJAX by using the static method <a href="#fRequest-api-isAjax"><code>isAjax()</code></a>. This checks the <code>HTTP_X_REQUESTED_WITH</code> HTTP header to see if it is set to <code>xmlhttprequest</code>.
</p>
<pre class="block php"><code>if (fRequest::isAjax()) {
    // Perform partial interaction
}</code></pre>

<h3 id="fRequest-docs-RetrievingHTTPAcceptValues">Retrieving HTTP Accept Values</h3>

<p>
When building applications or sites that deliver different formats or translations of content, the HTTP <code>Accept</code> and <code>Accept-Language</code> headers include important information about what the client expects in response.
</p>

<p>
The <code>Accept</code> header includes a list of acceptable mime-types that the client expects in return. In addition, the HTTP spec includes a <code>q</code> value to indicate which mime-types are preferred over others. The <code>Accept-Language</code> header include a similar list for the language of the response. <code>Accept-Language</code> value can also include a <code>q</code> value for each language.
</p>

<p>
The static methods <a href="#fRequest-api-getAcceptTypes"><code>getAcceptTypes()</code></a> and <a href="#fRequest-api-getAcceptLanguages"><code>getAcceptLanguages()</code></a> will each return a list of the acceptable mime-types and languages, respectively, ordered by the <code>q</code> values for each.
</p>
<pre class="block php"><code>$mime_types = fRequest::getAcceptTypes();
$languages  = fRequest::getAcceptLanguages();</code></pre>

<p>
 If no accepts headers are sent by the client, an empty array will be returned.
</p>

<p>
It is also possible to provide a list of valid accept types or languages and pick the clients preferred one by using the methods <a href="#fRequest-api-getBestAcceptType"><code>getBestAcceptType()</code></a> and <a href="#fRequest-api-getBestAcceptLanguage"><code>getBestAcceptLanguage()</code></a>.
</p>

<p>
Each method accepts a single parameter, an ordered array of the mime type or languages supported by your application. The type or language with the highest <code>q</code> value for the client will be returned.
</p>
<pre class="block php"><code>$mime_type = fRequest::getBestAcceptType(array(
    'application/json',
    'text/html'
));
$language = fRequest::getBestAcceptLanguage(array(
    'en-us',
    'fr-ca'
));</code></pre>

<p>
 If no value in the array matches, <code>FALSE</code> will be returned. If any value is acceptable, the first value in the array will be returned.
</p>

<p>
If no array of valid values is specified, and the client accepts any value, <code>NULL</code> will be returned. Otherwise the value specified by the client with the highest <code>q</code> will be returned.
</p>

<h3 id="fRequest-docs-MultipleSubmitButtons">Multiple Submit Buttons</h3>

<p>
There are sure to be times when a user is given multiple options when submitting a form and where you dont want to require the user to have javascript enabled in their browser. The <a href="#fRequest-api-overrideAction"><code>overrideAction()</code></a> method allows for a form to have multiple submit buttons and for them to trigger different functionality. 
</p>

<p>
This solution stems from the problem that the only way to tell which submit button was click is that buttons name and value pair is added to the <code>GET</code> or <code>POST</code> data, while all other submit buttons are ignored. Rather than requiring the developer to manually check for specific values when creating multiple submit buttons, <a href="#fRequest-api-overrideAction"><code>overrideAction()</code></a> allows the name of a submit button to be set to <code>action::{action_to_trigger}</code>.
</p>

<p>
If a submit button with a name as above is clicked and <a href="#fRequest-api-overrideAction"><code>overrideAction()</code></a> is called in the destination page, the <code>action</code> parameter of <code>$_GET</code> or <code>$_POST</code> will all be overridden with this action. 
</p>

<p>
Here is an example:
</p>
<pre class="block html"><code>&lt;form action=&quot;&lt;?php echo fURL::get() ?&gt;&quot; method=&quot;post&quot;&gt;
    ...
    &lt;p&gt;
        &lt;input type=&quot;hidden&quot; name=&quot;action&quot; value=&quot;delete&quot; /&gt;
        &lt;input type=&quot;submit&quot; value=&quot;Yes, delete this user&quot; /&gt;
        &lt;input type=&quot;submit&quot; name=&quot;action::list&quot; value=&quot;No, keep this user&quot; /&gt;
    &lt;/p&gt;
&lt;/form&gt;</code></pre>

<p>
 And the PHP to handle the form submission:
</p>
<pre class="block php"><code>// We will call overrideAction() as the very first thing so everything else see the modified `$_POST` superglobal
fRequest::overrideAction();

// Get the action to execute
$action = fRequest::get('action');</code></pre>

<p>
 If the user were to click <code>Yes, delete this user</code> then the action <code>delete</code> would be executed, however if the user clicked <code>No, keep this user</code> then the <code>list</code> action would be executed.
</p>

<p>
It is also possible to pass a redirection URL to <a href="#fRequest-api-overrideAction"><code>overrideAction()</code></a>. If the string <code>%action%</code> is found in the redirection URL, it will be replaced with the overridden action. Here is an example:
</p>
<pre class="block php"><code>// Redirect the user to /admin/users/{action} if an overridden action is posted
fRequest::overrideAction('/admin/users/%action%');</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fRequest-api">fRequest API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fRequest">Class Documentation</a></li>
		<li><strong><a href="#fRequest-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fRequest-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fRequest-api-check">check()</a></li>
	  			<li><a href="#fRequest-api-encode">encode()</a></li>
	  			<li class="protected"><a href="#fRequest-api-filter">filter()</a></li>
	  			<li><a href="#fRequest-api-generateCSRFToken">generateCSRFToken()</a></li>
	  			<li><a href="#fRequest-api-get">get()</a></li>
	  			<li><a href="#fRequest-api-getAcceptLanguages">getAcceptLanguages()</a></li>
	  			<li><a href="#fRequest-api-getAcceptTypes">getAcceptTypes()</a></li>
	  			<li><a href="#fRequest-api-getBestAcceptLanguage">getBestAcceptLanguage()</a></li>
	  			<li><a href="#fRequest-api-getBestAcceptType">getBestAcceptType()</a></li>
	  			<li><a href="#fRequest-api-getValid">getValid()</a></li>
	  			<li><a href="#fRequest-api-isAjax">isAjax()</a></li>
	  			<li><a href="#fRequest-api-isDelete">isDelete()</a></li>
	  			<li><a href="#fRequest-api-isGet">isGet()</a></li>
	  			<li><a href="#fRequest-api-isHead">isHead()</a></li>
	  			<li><a href="#fRequest-api-isPost">isPost()</a></li>
	  			<li><a href="#fRequest-api-isPut">isPut()</a></li>
	  			<li><a href="#fRequest-api-overrideAction">overrideAction()</a></li>
	  			<li><a href="#fRequest-api-prepare">prepare()</a></li>
	  			<li class="protected"><a href="#fRequest-api-reset">reset()</a></li>
	  			<li><a href="#fRequest-api-set">set()</a></li>
	  			<li class="protected"><a href="#fRequest-api-unfilter">unfilter()</a></li>
	  			<li><a href="#fRequest-api-validateCSRFToken">validateCSRFToken()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fCryptography">fCryptography</a></li>
		<li><a href="#fDate">fDate</a></li>
		<li><a href="#fHTML">fHTML</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fSession">fSession</a></li>
		<li><a href="#fTime">fTime</a></li>
		<li><a href="#fTimestamp">fTimestamp</a></li>
		<li><a href="#fURL">fURL</a></li>
		<li><a href="#fUTF8">fUTF8</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fCRUD">fCRUD</a></li>
		<li><a href="#fORMFile">fORMFile</a></li>
		<li><a href="#fORMRelated">fORMRelated</a></li>
		<li><a href="#fValidation">fValidation</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b20</span></div>
<p class="short_description">Provides request-related methods</p>
<div class="description"><p>This class is implemented to use the UTF-8 character encoding. Please see  <a href="#UTF-8-docs">UTF-8</a> for more information.</p><p>Please also note that using this class in a PUT or DELETE request will  cause the php://input stream to be consumed, and thus no longer available.</p></div>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b20</th><td>Added <a href="#fRequest-api-isHead"><tt>isHead()</tt></a>, fixed ability to call <a href="#fRequest-api-set"><tt>set()</tt></a> on <tt>HEAD</tt> requests <span class="date">11/23/11</span></td></tr><tr><th>1.0.0b19</th><td>Added the <tt>$use_default_for_blank</tt> parameter to <a href="#fRequest-api-get"><tt>get()</tt></a> <span class="date">6/3/11</span></td></tr><tr><th>1.0.0b18</th><td>Backwards Compatibility Break - <a href="#fRequest-api-getBestAcceptType"><tt>getBestAcceptType()</tt></a> and <a href="#fRequest-api-getBestAcceptLanguage"><tt>getBestAcceptLanguage()</tt></a> now return either <tt>NULL</tt>, <tt>FALSE</tt> or a string instead of <tt>NULL</tt> or a string, both methods are more robust in handling edge cases <span class="date">2/6/11</span></td></tr><tr><th>1.0.0b17</th><td>Fixed support for 3+ dimensional input arrays, added a fixed for the PHP DoS float bug #53632, added support for type-casted arrays in <a href="#fRequest-api-get"><tt>get()</tt></a> <span class="date">1/9/11</span></td></tr><tr><th>1.0.0b16</th><td>Backwards Compatibility Break - changed <a href="#fRequest-api-get"><tt>get()</tt></a> to remove binary characters when casting to a <tt>string</tt>, changed <tt>int</tt> and <tt>integer</tt> to cast to a real integer when possible, added new types of <tt>binary</tt> and <tt>integer!</tt> <span class="date">11/30/10</span></td></tr><tr><th>1.0.0b15</th><td>Added documentation about <tt>[sub-key]</tt> syntax, added <tt>[sub-key]</tt> support to <a href="#fRequest-api-check"><tt>check()</tt></a> <span class="date">9/12/10</span></td></tr><tr><th>1.0.0b14</th><td>Rewrote <a href="#fRequest-api-set"><tt>set()</tt></a> to not require recursion for array syntax <span class="date">9/12/10</span></td></tr><tr><th>1.0.0b13</th><td>Fixed <a href="#fRequest-api-set"><tt>set()</tt></a> to work with <tt>PUT</tt> requests <span class="date">6/30/10</span></td></tr><tr><th>1.0.0b12</th><td>Fixed a bug with <a href="#fRequest-api-getBestAcceptLanguage"><tt>getBestAcceptLanguage()</tt></a> returning the second-best language <span class="date">5/27/10</span></td></tr><tr><th>1.0.0b11</th><td>Added <a href="#fRequest-api-isAjax"><tt>isAjax()</tt></a> <span class="date">3/15/10</span></td></tr><tr><th>1.0.0b10</th><td>Fixed <a href="#fRequest-api-get"><tt>get()</tt></a> to not truncate integers to the 32bit integer limit <span class="date">3/5/10</span></td></tr><tr><th>1.0.0b9</th><td>Updated class to use new <a href="#fSession">fSession</a> API <span class="date">10/23/09</span></td></tr><tr><th>1.0.0b8</th><td>Casting to an integer or string in <a href="#fRequest-api-get"><tt>get()</tt></a> now properly casts when the <tt>$key</tt> isn't present in the request, added support for date, time, timestamp and <tt>?</tt> casts <span class="date">8/25/09</span></td></tr><tr><th>1.0.0b7</th><td>Fixed a bug with <a href="#fRequest-api-filter"><tt>filter()</tt></a> not properly creating new <tt>$_FILES</tt> entries <span class="date">7/2/09</span></td></tr><tr><th>1.0.0b6</th><td><a href="#fRequest-api-filter"><tt>filter()</tt></a> now works with empty prefixes and filtering the <tt>$_FILES</tt> superglobal has been fixed <span class="date">7/2/09</span></td></tr><tr><th>1.0.0b5</th><td>Changed <a href="#fRequest-api-filter"><tt>filter()</tt></a> so that it can be called multiple times for multi-level filtering <span class="date">6/2/09</span></td></tr><tr><th>1.0.0b4</th><td>Added the HTML escaping functions <a href="#fRequest-api-encode"><tt>encode()</tt></a> and <a href="#fRequest-api-prepare"><tt>prepare()</tt></a> <span class="date">5/27/09</span></td></tr><tr><th>1.0.0b3</th><td>Updated class to use new <a href="#fSession">fSession</a> API <span class="date">5/8/09</span></td></tr><tr><th>1.0.0b2</th><td>Added <a href="#fRequest-api-generateCSRFToken"><tt>generateCSRFToken()</tt></a> from <a href="#fCRUD">fCRUD</a>generateRequestToken() and <a href="#fRequest-api-validateCSRFToken"><tt>validateCSRFToken()</tt></a> from fCRUD::validateRequestToken() <span class="date">5/8/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="class_methods static" id="fRequest-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fRequest-api-check" class="method static"><span class="resolution">::</span><span class="name">check()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Indicated if the parameter specified is set in the <tt>$_GET</tt> or <tt>$_POST</tt> superglobals or in the post data of a <tt>PUT</tt> or <tt>DELETE</tt> request</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">check</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$key</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key</td>
				<td class="param_description">The key to check - array elements can be checked via <tt>[sub-key]</tt> syntax</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the parameter is set
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fRequest-api-encode" class="method static"><span class="resolution">::</span><span class="name">encode()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Gets a value from get() and passes it through <a href="#fHTML-api-encode"><tt>fHTML::encode()</tt></a></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">encode</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$key</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$cast_to</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$default_value</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key</td>
				<td class="param_description">The key to get the value of - array elements can be accessed via <tt>[sub-key]</tt> syntax</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$cast_to</td>
				<td class="param_description">Cast the value to this data type</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$default_value</td>
				<td class="param_description">If the parameter is not set in the <tt>DELETE</tt>/<tt>PUT</tt> post data, <tt>$_POST</tt> or <tt>$_GET</tt>, use this value instead</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The encoded value
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fRequest-api-filter" class="protected method static"><span class="resolution">::</span><span class="name">filter()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Parses through <tt>$_FILES</tt>, <tt>$_GET</tt>, <tt>$_POST</tt> and the <tt>PUT</tt>/<tt>DELETE</tt> post data and filters out everything that doesn't match the prefix and key, also removes the prefix from the field name</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">filter</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$prefix</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$key</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$prefix</td>
				<td class="param_description">The prefix to filter by</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$key</td>
				<td class="param_description">If the field is an array, get the value corresponding to this key</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fRequest-api-generateCSRFToken" class="method static"><span class="resolution">::</span><span class="name">generateCSRFToken()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns a request token that should be placed in each HTML form to prevent <a class="ext-link" href="http://en.wikipedia.org/wiki/Cross-site_request_forgery"><span class="icon">cross-site request forgery</span></a></p>
								<p>This method will return a random 15 character string that should be  placed in a hidden <tt>input</tt> element on every HTML form. When the form  contents are being processed, the token should be retrieved and passed  into <a href="#fRequest-api-validateCSRFToken"><tt>validateCSRFToken()</tt></a>.</p><p>The value returned by this method is stored in the session and then  checked by the validate method, which helps prevent cross site request  forgeries and (naive) automated form submissions.</p><p>Tokens generated by this method are single use, so a user must request  the page that generates the token at least once per submission.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">generateCSRFToken</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$url</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$url</td>
				<td class="param_description">The URL to generate a token for, default to the current page</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The token to be submitted with the form
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fRequest-api-get" class="method static"><span class="resolution">::</span><span class="name">get()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Gets a value from the <tt>DELETE</tt>/<tt>PUT</tt> post data, <tt>$_POST</tt> or <tt>$_GET</tt> superglobals (in that order)</p>
								<p>A value that exactly equals <tt>''</tt> and is not cast to a specific type will  become <tt>NULL</tt>.</p><p>Valid <tt>$cast_to</tt> types include:</p><ul><li><tt>'string'</tt></li><li><tt>'binary'</tt></li><li><tt>'int'</tt></li><li><tt>'integer'</tt></li><li><tt>'bool'</tt></li><li><tt>'boolean'</tt></li><li><tt>'array'</tt></li><li><tt>'date'</tt></li><li><tt>'time'</tt></li><li><tt>'timestamp'</tt></li></ul><p>It is possible to append a <tt>?</tt> to a data type to return <tt>NULL</tt>  whenever the <tt>$key</tt> was not specified in the request, or if the value  was a blank string.</p><p>The <tt>array</tt> and unspecified <tt>$cast_to</tt> types allow for multi-dimensional  arrays of string data. It is possible to cast an input value as a  single-dimensional array of a specific type by appending <tt>[]</tt> to the  <tt>$cast_to</tt>.</p><p>All <tt>string</tt>, <tt>array</tt> or unspecified <tt>$cast_to</tt> will result in the value(s)  being interpreted as UTF-8 string and appropriately cleaned of invalid  byte sequences. Also, all low-byte, non-printable characters will be  stripped from the value. This includes all bytes less than the value of  32 (Space) other than Tab (<tt>\t</tt>), Newline (<tt>\n</tt>) and Cariage Return  (<tt>\r</tt>).</p><p>To preserve low-byte, non-printable characters, or get the raw value  without cleaning invalid UTF-8 byte sequences, plase use the value of  <tt>binary</tt> for the <tt>$cast_to</tt> parameter.</p><p>Any integers that are beyond the range of 32bit storage will be returned  as a string. The returned value can be forced to always be a real  integer, which may cause truncation of the value, by passing <tt>integer!</tt>  as the <tt>$cast_to</tt>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$key</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$cast_to</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$default_value</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$use_default_for_blank</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key</td>
				<td class="param_description">The key to get the value of - array elements can be accessed via <tt>[sub-key]</tt> syntax</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$cast_to</td>
				<td class="param_description">Cast the value to this data type - see method description for details</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$default_value</td>
				<td class="param_description">If the parameter is not set in the <tt>DELETE</tt>/<tt>PUT</tt> post data, <tt>$_POST</tt> or <tt>$_GET</tt>, use this value instead. This value will get cast if a <tt>$cast_to</tt> is specified.</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$use_default_for_blank</td>
				<td class="param_description">If the request value is a blank string and <tt>$default_value</tt> is specified, this flag will cause the <tt>$default_value</tt> to be returned</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The value
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fRequest-api-getAcceptLanguages" class="method static"><span class="resolution">::</span><span class="name">getAcceptLanguages()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns the HTTP <tt>Accept-Language</tt>s sorted by their <tt>q</tt> values (from high to low)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">getAcceptLanguages</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					An associative array of <tt>{language} =&gt; {q value}</tt> sorted (in a stable-fashion) from highest to lowest <tt>q</tt> - if no header was sent, an empty array will be returned
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fRequest-api-getAcceptTypes" class="method static"><span class="resolution">::</span><span class="name">getAcceptTypes()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns the HTTP <tt>Accept</tt> types sorted by their <tt>q</tt> values (from high to low)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">getAcceptTypes</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					An associative array of <tt>{type} =&gt; {q value}</tt> sorted (in a stable-fashion) from highest to lowest <tt>q</tt> - if no header was sent, an empty array will be returned
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fRequest-api-getBestAcceptLanguage" class="method static"><span class="resolution">::</span><span class="name">getBestAcceptLanguage()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns the best HTTP <tt>Accept-Language</tt> (based on <tt>q</tt> value) - can be filtered to only allow certain languages</p>
								<p>Special conditions affecting the return value:</p><ul><li>If no <tt>$filter</tt> is provided and the client does not send the <tt>Accept-Language</tt> header, <tt>NULL</tt> will be returned</li><li>If no <tt>$filter</tt> is provided and the client specifies <tt>*</tt> with the highest <tt>q</tt>, <tt>NULL</tt> will be returned</li><li>If <tt>$filter</tt> contains one or more values, but the <tt>Accept-Language</tt> header does not match any, <tt>FALSE</tt> will be returned</li><li>If <tt>$filter</tt> contains one or more values, but the client does not send the <tt>Accept-Language</tt> header, the first entry from <tt>$filter</tt> will be returned</li><li>If <tt>$filter</tt> contains two or more values, and two of the values have the same <tt>q</tt> value, the one listed first in <tt>$filter</tt> will be returned</li></ul>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype">string|NULL|FALSE</span> <span class="php-identifier">getBestAcceptLanguage</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$filter</span><span class="php-code">=</span>array() <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype">string|NULL|FALSE</span> <span class="php-identifier">getBestAcceptLanguage</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$language</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$filter</td>
				<td class="param_description">An array of languages that are valid to return - these should be in the form <tt>{language}-{territory}</tt>, e.g. <tt>en-us</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$language <em>[, ... ]</em></td>
				<td class="param_description">A language that is valid to return</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The best language listed in the <tt>Accept-Language</tt> header - see method description for edge cases
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fRequest-api-getBestAcceptType" class="method static"><span class="resolution">::</span><span class="name">getBestAcceptType()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns the best HTTP <tt>Accept</tt> type (based on <tt>q</tt> value) - can be filtered to only allow certain types</p>
								<p>Special conditions affecting the return value:</p><ul><li>If no <tt>$filter</tt> is provided and the client does not send the <tt>Accept</tt> header, <tt>NULL</tt> will be returned</li><li>If no <tt>$filter</tt> is provided and the client specifies <tt>*/*</tt> with the highest <tt>q</tt>, <tt>NULL</tt> will be returned</li><li>If <tt>$filter</tt> contains one or more values, but the <tt>Accept</tt> header does not match any, <tt>FALSE</tt> will be returned</li><li>If <tt>$filter</tt> contains one or more values, but the client does not send the <tt>Accept</tt> header, the first entry from <tt>$filter</tt> will be returned</li><li>If <tt>$filter</tt> contains two or more values, and two of the values have the same <tt>q</tt> value, the one listed first in <tt>$filter</tt> will be returned</li></ul>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype">string|NULL|FALSE</span> <span class="php-identifier">getBestAcceptType</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$filter</span><span class="php-code">=</span>array() <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype">string|NULL|FALSE</span> <span class="php-identifier">getBestAcceptType</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$type</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$filter</td>
				<td class="param_description">An array of types that are valid to return</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$type <em>[, ... ]</em></td>
				<td class="param_description">A type that is valid to return</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The best type listed in the <tt>Accept</tt> header - see method description for edge cases
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fRequest-api-getValid" class="method static"><span class="resolution">::</span><span class="name">getValid()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Gets a value from the <tt>DELETE</tt>/<tt>PUT</tt> post data, <tt>$_POST</tt> or <tt>$_GET</tt> superglobals (in that order), restricting to a specific set of values</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">getValid</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$key</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$valid_values</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key</td>
				<td class="param_description">The key to get the value of - array elements can be accessed via <tt>[sub-key]</tt> syntax</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$valid_values</td>
				<td class="param_description">The array of values that are permissible, if one is not selected, picks first</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The value
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fRequest-api-isAjax" class="method static"><span class="resolution">::</span><span class="name">isAjax()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Indicates if the URL was accessed via an XMLHttpRequest</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">isAjax</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					If the URL was accessed via an XMLHttpRequest
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fRequest-api-isDelete" class="method static"><span class="resolution">::</span><span class="name">isDelete()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Indicates if the URL was accessed via the <tt>DELETE</tt> HTTP method</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">isDelete</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					If the URL was accessed via the <tt>DELETE</tt> HTTP method
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fRequest-api-isGet" class="method static"><span class="resolution">::</span><span class="name">isGet()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Indicates if the URL was accessed via the <tt>GET</tt> HTTP method</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">isGet</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					If the URL was accessed via the <tt>GET</tt> HTTP method
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fRequest-api-isHead" class="method static"><span class="resolution">::</span><span class="name">isHead()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Indicates if the URL was accessed via the <tt>HEAD</tt> HTTP method</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">isHead</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					If the URL was accessed via the <tt>HEAD</tt> HTTP method
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fRequest-api-isPost" class="method static"><span class="resolution">::</span><span class="name">isPost()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Indicates if the URL was accessed via the <tt>POST</tt> HTTP method</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">isPost</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					If the URL was accessed via the <tt>POST</tt> HTTP method
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fRequest-api-isPut" class="method static"><span class="resolution">::</span><span class="name">isPut()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Indicates if the URL was accessed via the <tt>PUT</tt> HTTP method</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">isPut</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					If the URL was accessed via the <tt>PUT</tt> HTTP method
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fRequest-api-overrideAction" class="method static"><span class="resolution">::</span><span class="name">overrideAction()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Overrides the value of <tt>'action'</tt> in the <tt>DELETE</tt>/<tt>PUT</tt> post data, <tt>$_POST</tt> or <tt>$_GET</tt> superglobals based on the <tt>'action::{action_name}'</tt> value</p>
								<p>This method is primarily intended to be used for hanlding multiple  submit buttons.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">overrideAction</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$redirect</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$redirect</td>
				<td class="param_description">The url to redirect to if the action is overriden. <tt>%action%</tt> will be replaced with the overridden action.</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fRequest-api-prepare" class="method static"><span class="resolution">::</span><span class="name">prepare()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Gets a value from get() and passes it through <a href="#fHTML-api-prepare"><tt>fHTML::prepare()</tt></a></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">prepare</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$key</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$cast_to</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$default_value</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key</td>
				<td class="param_description">The key to get the value of - array elements can be accessed via <tt>[sub-key]</tt> syntax</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$cast_to</td>
				<td class="param_description">Cast the value to this data type</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$default_value</td>
				<td class="param_description">If the parameter is not set in the <tt>DELETE</tt>/<tt>PUT</tt> post data, <tt>$_POST</tt> or <tt>$_GET</tt>, use this value instead</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The prepared value
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fRequest-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration and data of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fRequest-api-set" class="method static"><span class="resolution">::</span><span class="name">set()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets a value into the appropriate <tt>$_GET</tt> or <tt>$_POST</tt> superglobal, or the local <tt>PUT</tt>/<tt>DELETE</tt> post data based on what HTTP method was used for the request</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">set</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$key</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key</td>
				<td class="param_description">The key to set the value to - array elements can be modified via <tt>[sub-key]</tt> syntax</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value to set</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fRequest-api-unfilter" class="protected method static"><span class="resolution">::</span><span class="name">unfilter()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns <tt>$_GET</tt>, <tt>$_POST</tt> and <tt>$_FILES</tt> and the <tt>PUT</tt>/<tt>DELTE</tt> post data to the state they were at before filter() was called</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">unfilter</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
						<!-- start method static -->
			<h5 id="fRequest-api-validateCSRFToken" class="method static"><span class="resolution">::</span><span class="name">validateCSRFToken()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Validates a request token generated by generateCSRFToken()</p>
								<p>This method takes a request token and ensures it is valid, otherwise  it will throw an <a href="#fValidationException">fValidationException</a>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">validateCSRFToken</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$token</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$url</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$token</td>
				<td class="param_description">The request token to validate</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$url</td>
				<td class="param_description">The URL to validate the token for, default to the current page</td>
			  </tr>
						</table>
			</div>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When the CSRF token specified is invalid</dd></dl>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fResult">fResult</h2>
<div class="sidebar">
<h3 id="fResult-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fResult">Class Documentation</a></strong></li>
<li><a href="#fResult-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fResult-docs-Creation">Creation</a></li>
<li><a href="#fResult-docs-RowFormat">Row Format</a></li>
<li><a href="#fResult-docs-UnescapingData">Unescaping Data</a></li>
<li><a href="#fResult-docs-Iteration">Iteration</a></li>
<li><a href="#fResult-docs-Seeking">Seeking</a></li>
<li><a href="#fResult-docs-DataRetrieval">Data Retrieval</a></li>
<li><a href="#fResult-docs-Exceptions">Exceptions</a></li>
<li><a href="#fResult-docs-QueryInfo">Query Info</a></li>
</ul>

<h3 id="fResult-docs-DatabaseClasses">Database Classes </h3>

<ul>
<li><a href="#fDatabase">fDatabase</a></li>
<li><a href="#fNoRowsException">fNoRowsException</a></li>
<li><strong>fResult</strong></li>
<li><a href="#fSQLException">fSQLException</a></li>
<li><a href="#fSQLTranslation">fSQLTranslation</a></li>
<li><a href="#fSQLSchemaTranslation">fSQLSchemaTranslation</a></li>
<li><a href="#fSchema">fSchema</a></li>
<li><a href="#fStatement">fStatement</a></li>
<li><a href="#fUnbufferedResult">fUnbufferedResult</a></li>
</ul>
</div>

<p>
The fResult class is an iterable result object that is returned when an SQL query is executed. It contains all of the information about a query including any rows that may have been returned. This class uses result buffering to provide more features than <a href="#fUnbufferedResult">fUnbufferedResult</a>, albeit at the cost of extra memory usage proportional to amount of data returned.
</p>

<h3 id="fResult-docs-Creation">Creation</h3>

<p>
The fResult class can be created by executing the methods <a href="#fDatabase-api-query">fDatabase::query()</a> or <a href="#fDatabase-api-translatedQuery">fDatabase::translatedQuery()</a>.
</p>
<pre class="block php"><code>// Creation of fResult from a normal query
$result = $db-&gt;query(&quot;SELECT * FROM users&quot;);

// Creation of an fResult object from a translated query
$result2 = $db-&gt;translatedQuery(&quot;SELECT * FROM users LIMIT 5&quot;);</code></pre>

<h3 id="fResult-docs-RowFormat">Row Format</h3>

<p>
By default when retrieving rows from a result object, they are returned as associative arrays. In the case of Oracle databases, where columns are case-insensitive, the array keys are lowercase.
</p>

<p>
It is possible to retrieve <code>stdClass</code> objects back for each row instead of associative arrays. This is done by calling the method <a href="#fResult-api-asObjects"><code>asObjects()</code></a>. The method returns the fResult object, allowing for method chaining:
</p>
<pre class="block php"><code>// Set the result to return objects
$res = $db-&gt;query(&quot;SELECT * FROM users&quot;)-&gt;asObjects();</code></pre>

<p>
 <em>If you are looking for objects with more functionality, please see <a href="#fActiveRecord">fActiveRecord</a>.</em>
</p>

<h3 id="fResult-docs-UnescapingData">Unescaping Data</h3>

<p>
While it is certainly possible to manually unescape data from a result set, one row and column at a time, unescaping the whole result is often much easier. The method <a href="#fResult-api-unescape"><code>unescape()</code></a> accepts an associative array of the column name as the key and the data type as the value. This method should be called before any rows are fetched.
</p>
<pre class="block php"><code>$result = $db-&gt;query(&quot;SELECT * FROM users&quot;);
$result-&gt;unescape(array(
    'first_name'       =&gt; 'string',
    'last_name'        =&gt; 'string',
    'is_authenticated' =&gt; 'boolean',
    'last_login'       =&gt; 'timestamp'
));

foreach ($result as $row) {
    // $row now contains the data in native PHP data types
}</code></pre>

<h3 id="fResult-docs-Iteration">Iteration</h3>

<p>
The fResult class implements the Iterator interface, which means that you can use the <code>foreach</code> construct to loop through all resulting rows. Below is an example of iterating over a result:
</p>
<pre class="block php"><code>$result = $db-&gt;query(&quot;SELECT * FROM users&quot;);

foreach ($result as $row) {
    echo $row['name'] . '&lt;br /&gt;';
}</code></pre>

<p>
 If the result did not return any rows, the <code>foreach</code> construct will not be looped at all and the execution of the code will continue. If you wish to execute different code if no rows are returned, see the next section about <a href="#fResult-docs-Exceptions">exceptions</a>.
</p>

<p>
If you wish to do manual iteration you can use the <a href="#fResult-api-fetchRow"><code>fetchRow()</code></a> and <a href="#fResult-api-valid"><code>valid()</code></a> methods as shown below:
</p>
<pre class="block php"><code>// Iteration using valid() and fetchRow()
while ($result-&gt;valid()) {
    $row = $result-&gt;fetchRow();
}</code></pre>

<h3 id="fResult-docs-Seeking">Seeking</h3>

<p>
Since an fResult object is a buffered result of a database call, it is possible to seek forwards and backwards in the set. The method <a href="#fResult-api-seek"><code>seek()</code></a> accepts a single integer parameter <code>$row</code> that will change the zero-based pointer in the result set.
</p>
<pre class="block php"><code>// This would set the current row to be row #3
$result-&gt;seek(2);</code></pre>

<h3 id="fResult-docs-DataRetrieval">Data Retrieval</h3>

<p>
In addition to allowing for iteration over the database query result, there are also two method that allow for simple data retrieval.
</p>

<p>
The method <a href="#fResult-api-fetchScalar"><code>fetchScalar()</code></a> will return the first value from the first row of a result set. This is useful if it is known that a query will only return a single value. If no rows are returned, a <a href="#fNoRowsException">fNoRowsException</a> will be thrown.
</p>
<pre class="block php"><code>$result = $db-&gt;query(&quot;SELECT count(*) FROM users&quot;);
$count  = $result-&gt;fetchScalar();</code></pre>

<p>
 While <code>fetchScalar()</code> allows retrieving data in amounts less than a row, the method <a href="#fResult-api-fetchAllRows"><code>fetchAllRows()</code></a> does the opposite by allowing access to all rows at once. The return value of the method is an array of all row arrays.
</p>
<pre class="block php"><code>$rows = $result-&gt;fetchAllRows();</code></pre>

<h3 id="fResult-docs-Exceptions">Exceptions</h3>

<p>
As mentioned in the last section, if you iterate through the result and no rows are returned, nothing will happen. If you do need to execute different code when no rows are returned, you will want to call the <a href="#fResult-api-tossIfNoRows"><code>tossIfNoRows()</code></a> to cause an <a href="#fNoRowsException">fNoRowsException</a> to be thrown:
</p>
<pre class="block php"><code>try {
    $result = $db-&gt;query(&quot;SELECT * FROM users&quot;);
    $result-&gt;tossIfNoRows();
    ?&gt;
    &lt;h1&gt;Users&lt;/h1&gt;
    &lt;?
    foreach ($result as $row) {
        echo $row['name'] . '&lt;br /&gt;';
    }
} catch (fNoRowsException $e) {
    ?&gt;
    &lt;p&gt;No users were found&lt;/p&gt;
    &lt;?php
}</code></pre>

<p>
 In addition to calling <code>tossIfNoRows()</code>, an <a href="#fNoRowsException">fNoRowsException</a> will be thrown if any Iterator interface methods (such as <code>current()</code>, <code>next()</code>, etc), <code>fetchRow()</code> or <code>fetchAllRows()</code> are called on a result object which returned no rows.
</p>

<h3 id="fResult-docs-QueryInfo">Query Info</h3>

<p>
Along with providing an iterable interface to a query result, the fResult class stores some information about the query including:
</p>
<table><tbody>
<tr>
<td><strong>Method</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td><a href="#fResult-api-countAffectedRows"><code>countAffectedRows()</code></a></td>
<td>Returns how many rows were affected by a <code>DELETE</code>, <code>INSERT</code> or <code>UPDATE</code> query</td>
</tr>
<tr>
<td><a href="#fResult-api-countReturnedRows"><code>countReturnedRows()</code></a></td>
<td>Returns how many rows were returned by a <code>SELECT</code> query</td>
</tr>
<tr>
<td><a href="#fResult-api-getAutoIncrementedValue"><code>getAutoIncrementedValue()</code></a></td>
<td>Returns the last value generated by an auto-incrementing integer field</td>
</tr>
<tr>
<td><a href="#fResult-api-getSQL"><code>getSQL()</code></a></td>
<td>Returns the SQL statement executed for this result</td>
</tr>
<tr>
<td><a href="#fResult-api-getUntranslatedSQL"><code>getUntranslatedSQL()</code></a></td>
<td>Returns the SQL from before translation happened - only applicable for results from <a href="#fResult-api-translatedQuery"><code>translatedQuery()</code></a></td>
</tr>
</tbody></table>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fResult-api">fResult API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fResult">Class Documentation</a></li>
		<li><strong><a href="#fResult-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fResult-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  	  	  			<li class="protected"><a href="#fResult-api-compose">compose()</a></li>
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  			<li><a href="#fResult-api-silenceNotices">silenceNotices()</a></li>
	  	  	  	  </ul>
</div>
<div class="methods">
<h4><a href="#fResult-api-class_methods">Methods</a></h4>
<ul>
  			<li class="protected"><a href="#fResult-api-__construct">__construct()</a></li>
	  			<li class="protected"><a href="#fResult-api-__destruct">__destruct()</a></li>
	  			<li class="protected"><a href="#fResult-api-__get">__get()</a></li>
	  			<li><a href="#fResult-api-asObjects">asObjects()</a></li>
	  	  			<li><a href="#fResult-api-countAffectedRows">countAffectedRows()</a></li>
	  			<li><a href="#fResult-api-countReturnedRows">countReturnedRows()</a></li>
	  			<li class="protected"><a href="#fResult-api-current">current()</a></li>
	  			<li><a href="#fResult-api-fetchAllRows">fetchAllRows()</a></li>
	  			<li><a href="#fResult-api-fetchRow">fetchRow()</a></li>
	  			<li><a href="#fResult-api-fetchScalar">fetchScalar()</a></li>
	  			<li><a href="#fResult-api-getAutoIncrementedValue">getAutoIncrementedValue()</a></li>
	  			<li class="protected"><a href="#fResult-api-getResult">getResult()</a></li>
	  			<li><a href="#fResult-api-getSQL">getSQL()</a></li>
	  			<li><a href="#fResult-api-getUntranslatedSQL">getUntranslatedSQL()</a></li>
	  			<li class="protected"><a href="#fResult-api-key">key()</a></li>
	  			<li class="protected"><a href="#fResult-api-next">next()</a></li>
	  			<li class="protected"><a href="#fResult-api-rewind">rewind()</a></li>
	  			<li><a href="#fResult-api-seek">seek()</a></li>
	  			<li class="protected"><a href="#fResult-api-setAffectedRows">setAffectedRows()</a></li>
	  			<li class="protected"><a href="#fResult-api-setAutoIncrementedValue">setAutoIncrementedValue()</a></li>
	  			<li class="protected"><a href="#fResult-api-setResult">setResult()</a></li>
	  			<li class="protected"><a href="#fResult-api-setReturnedRows">setReturnedRows()</a></li>
	  			<li class="protected"><a href="#fResult-api-setSQL">setSQL()</a></li>
	  			<li class="protected"><a href="#fResult-api-setUntranslatedSQL">setUntranslatedSQL()</a></li>
	  	  			<li><a href="#fResult-api-tossIfNoRows">tossIfNoRows()</a></li>
	  			<li><a href="#fResult-api-unescape">unescape()</a></li>
	  			<li><a href="#fResult-api-valid">valid()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fNoRemainingException">fNoRemainingException</a></li>
		<li><a href="#fNoRowsException">fNoRowsException</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fSQLException">fSQLException</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
	<span class="implements"> implements Iterator </span>,	<span class="version">v1.0.0b13</span></div>
<p class="short_description">Representation of a result from a query against the <a href="#fDatabase">fDatabase</a> class</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b12</th><td>Added a workaround for iconv having issues in MAMP 1.9.4+ <span class="date">7/26/11</span></td></tr><tr><th>1.0.0b12</th><td>Fixed MSSQL to have a properly reset row array, added <a href="#fResult-api-silenceNotices"><tt>silenceNotices()</tt></a>, fixed pdo_dblib on Windows when using the Microsoft DBLib driver <span class="date">5/9/11</span></td></tr><tr><th>1.0.0b11</th><td>Backwards Compatibility Break - removed ODBC support <span class="date">7/31/10</span></td></tr><tr><th>1.0.0b10</th><td>Added IBM DB2 support <span class="date">4/13/10</span></td></tr><tr><th>1.0.0b9</th><td>Added support for prepared statements <span class="date">3/2/10</span></td></tr><tr><th>1.0.0b8</th><td>Fixed a bug with decoding MSSQL national column when using an ODBC connection <span class="date">9/18/09</span></td></tr><tr><th>1.0.0b7</th><td>Added the method <a href="#fResult-api-unescape"><tt>unescape()</tt></a>, changed <a href="#fResult-api-tossIfNoRows"><tt>tossIfNoRows()</tt></a> to return the object for chaining <span class="date">8/12/09</span></td></tr><tr><th>1.0.0b6</th><td>Fixed a bug where <a href="#fResult-api-fetchAllRows"><tt>fetchAllRows()</tt></a> would throw a <a href="#fNoRowsException">fNoRowsException</a> <span class="date">6/30/09</span></td></tr><tr><th>1.0.0b5</th><td>Added the method <a href="#fResult-api-asObjects"><tt>asObjects()</tt></a> to allow for returning objects instead of associative arrays <span class="date">6/23/09</span></td></tr><tr><th>1.0.0b4</th><td>Fixed a bug with not properly converting SQL Server text to UTF-8 <span class="date">6/18/09</span></td></tr><tr><th>1.0.0b3</th><td>Added support for Oracle, various bug fixes <span class="date">5/4/09</span></td></tr><tr><th>1.0.0b2</th><td>Updated for new <a href="#fCore">fCore</a> API <span class="date">2/16/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">9/25/07</span></td></tr></table></div>
<div class="class_methods static" id="fResult-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start protected method static -->
			<h5 id="fResult-api-compose" class="protected method static"><span class="resolution">::</span><span class="name">compose()</span> <span class="visibility">protected</span></h5>
			<div class="protected method static">
							<div class="method_description">
									<p>Composes text using <a href="#fText">fText</a> if loaded</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">compose</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$component</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message to compose</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$component <em>[, ... ]</em></td>
				<td class="param_description">A string or number to insert into the message</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The composed and possible translated message
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fResult-api-silenceNotices" class="method static"><span class="resolution">::</span><span class="name">silenceNotices()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Turns off notices about broken database extensions much as the MSSQL DBLib driver</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">silenceNotices</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
				</div>
<div class="class_methods" id="fResult-api-class_methods">
<h4>Methods</h4>
			  			  									<!-- start protected method -->
			<h5 id="fResult-api-__construct" class="protected method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Configures the result set</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fResult">fResult</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fDatabase">fDatabase</a></span> <span class="php-var">$database</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$character_set</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fDatabase">fDatabase</a></td>
				<td class="param_name">$database</td>
				<td class="param_description">The database object this result set was created from</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$character_set</td>
				<td class="param_description">MSSQL only: the character set to transcode from since MSSQL doesn't do UTF-8</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fResult-api-__destruct" class="protected method"><span class="resolution">-></span><span class="name">__destruct()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Frees up the result object to save memory</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">__destruct</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fResult-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fResult-api-asObjects" class="method"><span class="resolution">-></span><span class="name">asObjects()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the object to return rows as objects instead of associative arrays (the default)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fResult">fResult</a></span> <span class="php-identifier">asObjects</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The result object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fResult-api-countAffectedRows" class="method"><span class="resolution">-></span><span class="name">countAffectedRows()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the number of rows affected by the query</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">countAffectedRows</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The number of rows affected by the query
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fResult-api-countReturnedRows" class="method"><span class="resolution">-></span><span class="name">countReturnedRows()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the number of rows returned by the query</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">countReturnedRows</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The number of rows returned by the query
				</p>
		</div>
		<!-- end method -->	
						<!-- start protected method -->
			<h5 id="fResult-api-current" class="protected method"><span class="resolution">-></span><span class="name">current()</span> <span class="visibility">internal public</span><span class="implements"> implements Iterator</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns the current row in the result set (required by iterator interface)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array|stdClass</span> <span class="php-identifier">current</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The current row
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fNoRemainingException">fNoRemainingException</a></dt><dd>When there are no remaining rows in the result</dd> <dt><a href="#fNoRowsException">fNoRowsException</a></dt><dd>When the query did not return any rows</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fResult-api-fetchAllRows" class="method"><span class="resolution">-></span><span class="name">fetchAllRows()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns all of the rows from the result set</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">fetchAllRows</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The array of rows
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fResult-api-fetchRow" class="method"><span class="resolution">-></span><span class="name">fetchRow()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the row next row in the result set (where the pointer is currently assigned to)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array|stdClass</span> <span class="php-identifier">fetchRow</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The next row in the result
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fNoRemainingException">fNoRemainingException</a></dt><dd>When there are no rows left in the result</dd> <dt><a href="#fNoRowsException">fNoRowsException</a></dt><dd>When the query did not return any rows</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fResult-api-fetchScalar" class="method"><span class="resolution">-></span><span class="name">fetchScalar()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Wraps around fetchRow() and returns the first field from the row instead of the whole row</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string|number|boolean</span> <span class="php-identifier">fetchScalar</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The first scalar value from <a href="#fResult-api-fetchRow"><tt>fetchRow()</tt></a>
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fNoRemainingException">fNoRemainingException</a></dt><dd>When there are no rows left in the result</dd> <dt><a href="#fNoRowsException">fNoRowsException</a></dt><dd>When the query did not return any rows</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fResult-api-getAutoIncrementedValue" class="method"><span class="resolution">-></span><span class="name">getAutoIncrementedValue()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the last auto incremented value for this database connection. This may or may not be from the current query.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">getAutoIncrementedValue</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The auto incremented value
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fResult-api-getResult" class="protected method"><span class="resolution">-></span><span class="name">getResult()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns the result</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">getResult</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The result of the query
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fResult-api-getSQL" class="method"><span class="resolution">-></span><span class="name">getSQL()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the SQL used in the query</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getSQL</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The SQL used in the query
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fResult-api-getUntranslatedSQL" class="method"><span class="resolution">-></span><span class="name">getUntranslatedSQL()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the SQL as it was before translation</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getUntranslatedSQL</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The SQL from before translation
				</p>
		</div>
		<!-- end method -->	
						<!-- start protected method -->
			<h5 id="fResult-api-key" class="protected method"><span class="resolution">-></span><span class="name">key()</span> <span class="visibility">internal public</span><span class="implements"> implements Iterator</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns the current row number (required by iterator interface)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">key</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The current row number
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fNoRemainingException">fNoRemainingException</a></dt><dd>When there are no remaining rows in the result</dd> <dt><a href="#fNoRowsException">fNoRowsException</a></dt><dd>When the query did not return any rows</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start protected method -->
			<h5 id="fResult-api-next" class="protected method"><span class="resolution">-></span><span class="name">next()</span> <span class="visibility">internal public</span><span class="implements"> implements Iterator</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Advances to the next row in the result (required by iterator interface)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">next</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fNoRemainingException">fNoRemainingException</a></dt><dd>When there are no remaining rows in the result</dd> <dt><a href="#fNoRowsException">fNoRowsException</a></dt><dd>When the query did not return any rows</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fResult-api-rewind" class="protected method"><span class="resolution">-></span><span class="name">rewind()</span> <span class="visibility">internal public</span><span class="implements"> implements Iterator</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Rewinds the query (required by iterator interface)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">rewind</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fResult-api-seek" class="method"><span class="resolution">-></span><span class="name">seek()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Seeks to the specified zero-based row for the specified SQL query</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">seek</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$row</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$row</td>
				<td class="param_description">The row number to seek to (zero-based)</td>
			  </tr>
						</table>
			</div>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fNoRowsException">fNoRowsException</a></dt><dd>When the query did not return any rows</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fResult-api-setAffectedRows" class="protected method"><span class="resolution">-></span><span class="name">setAffectedRows()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets the number of affected rows</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setAffectedRows</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$affected_rows</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$affected_rows</td>
				<td class="param_description">The number of affected rows</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fResult-api-setAutoIncrementedValue" class="protected method"><span class="resolution">-></span><span class="name">setAutoIncrementedValue()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets the auto incremented value</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setAutoIncrementedValue</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$auto_incremented_value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$auto_incremented_value</td>
				<td class="param_description">The auto incremented value</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fResult-api-setResult" class="protected method"><span class="resolution">-></span><span class="name">setResult()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets the result from the query</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setResult</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$result</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$result</td>
				<td class="param_description">The result from the query</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fResult-api-setReturnedRows" class="protected method"><span class="resolution">-></span><span class="name">setReturnedRows()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets the number of rows returned</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setReturnedRows</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$returned_rows</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$returned_rows</td>
				<td class="param_description">The number of rows returned</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fResult-api-setSQL" class="protected method"><span class="resolution">-></span><span class="name">setSQL()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets the SQL used in the query</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setSQL</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$sql</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$sql</td>
				<td class="param_description">The SQL used in the query</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fResult-api-setUntranslatedSQL" class="protected method"><span class="resolution">-></span><span class="name">setUntranslatedSQL()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets the SQL from before translation</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setUntranslatedSQL</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$untranslated_sql</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$untranslated_sql</td>
				<td class="param_description">The SQL from before translation</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fResult-api-tossIfNoRows" class="method"><span class="resolution">-></span><span class="name">tossIfNoRows()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Throws an fNoResultException if the query did not return any rows</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fResult">fResult</a></span> <span class="php-identifier">tossIfNoRows</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message to use for the exception if there are no rows in this result set</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The result object, to allow for method chaining
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fNoRowsException">fNoRowsException</a></dt><dd>When the query did not return any rows</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fResult-api-unescape" class="method"><span class="resolution">-></span><span class="name">unescape()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the result object to unescape all values as they are retrieved from the object</p>
								<p>The data types should be from the list of types supported by  <a href="#fDatabase-api-unescape"><tt>fDatabase::unescape()</tt></a>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fResult">fResult</a></span> <span class="php-identifier">unescape</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$column_data_type_map</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$column_data_type_map</td>
				<td class="param_description">An associative array with column names as the keys and the data types as the values</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The result object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fResult-api-valid" class="method"><span class="resolution">-></span><span class="name">valid()</span> <span class="visibility">public</span><span class="implements"> implements Iterator</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns if the query has any rows left</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">valid</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 If the iterator is still valid
				</p>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="fSMTP">fSMTP</h2>
<div class="sidebar">
<h3 id="fSMTP-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fSMTP">Class Documentation</a></strong></li>
<li><a href="#fSMTP-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fSMTP-docs-Instantiation">Instantiation</a></li>
<li><a href="#fSMTP-docs-Authentication">Authentication</a></li>
<li><a href="#fSMTP-docs-SendingMessages">Sending Messages</a></li>
<li><a href="#fSMTP-docs-ClosingtheConnection">Closing the Connection</a></li>
</ul>

<h3 id="fSMTP-docs-EmailClasses">Email Classes </h3>

<ul>
<li><a href="#fEmail">fEmail</a></li>
<li><a href="#fMailbox">fMailbox</a></li>
<li><strong>fSMTP</strong></li>
</ul>
</div>

<p>
The fSMTP class allows for sending emails with <a href="#fEmail">fEmail</a> via an SMTP server. It supports multiple authentication methods, secure connections (including via <code>STARTTLS</code>) and increased sending performance via SMTP pipelining.
</p>

<h3 id="fSMTP-docs-Instantiation">Instantiation</h3>

<p>
Creating an SMTP connection can be as simple as passing the IP address or hostname of the <code>$server</code>.
</p>
<pre class="block php"><code>$smtp = new fSMTP('example.com');</code></pre>

<p>
 In addition to the <code>$server</code>, it is also possible to specify the <code>$port</code>, if the connection is <code>$secure</code> and the <code>$timeout</code>.
</p>
<pre class="block php"><code>// This sets up fSMTP to connect to the gmail SMTP server
// with a 5 second timeout. Gmail requires a secure connection.
$smtp = new fSMTP('smtp.gmail.com', 465, TRUE, 5);</code></pre>

<p>
 Secure connections require the <a class="ext-link" href="http://php.net/openssl"><span class="icon">openssl extension</span></a>. If a secure connection is not requested, but the SMTP server provides <code>STARTTLS</code> functionality, fSMTP will automatically upgrade the connection to be secure.
</p>

<h3 id="fSMTP-docs-Authentication">Authentication</h3>

<p>
fSMTP also supports SMTP authentication. Simple pass a <code>$username</code> and <code>$password</code> to <a href="#fSMTP-api-authenticate"><code>authenticate()</code></a>. This should be called before trying to send any emails.
</p>
<pre class="block php"><code>$smtp-&gt;authenticate('username', 'password');</code></pre>

<p>
 Behind the scenes, there are four authentication methods supported: digest-md5, cram-md5, plain and login. The more secure digest-md5 and cram-md5 methods will be used if possible since they do not send login credentials in the clear.
</p>

<h3 id="fSMTP-docs-SendingMessages">Sending Messages</h3>

<p>
Sending messages via <a href="#fEmail">fEmail</a> and fSMTP is extremely simple, just pass the fSMTP object to <a href="#fEmail-api-send">fEmail::send()</a>:
</p>
<pre class="block php"><code>$email-&gt;send($smtp);</code></pre>

<h3 id="fSMTP-docs-ClosingtheConnection">Closing the Connection</h3>

<p>
The connection to the SMTP server will be automatically closed at the end of the script. If there is a need to close it before then, simply call <a href="#fSMTP-api-close"><code>close()</code></a>.
</p>
<pre class="block php"><code>$smtp-&gt;close();</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fSMTP-api">fSMTP API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fSMTP">Class Documentation</a></li>
		<li><strong><a href="#fSMTP-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods">
<h4><a href="#fSMTP-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fSMTP-api-__construct">__construct()</a></li>
	  			<li><a href="#fSMTP-api-__destruct">__destruct()</a></li>
	  			<li class="protected"><a href="#fSMTP-api-__get">__get()</a></li>
	  			<li><a href="#fSMTP-api-authenticate">authenticate()</a></li>
	  			<li><a href="#fSMTP-api-close">close()</a></li>
	  			<li><a href="#fSMTP-api-enableDebugging">enableDebugging()</a></li>
	  			<li class="protected"><a href="#fSMTP-api-send">send()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fConnectivityException">fConnectivityException</a></li>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fCryptography">fCryptography</a></li>
		<li><a href="#fEmail">fEmail</a></li>
		<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
		<li><a href="#fFilesystem">fFilesystem</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fUnexpectedException">fUnexpectedException</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b11</span></div>
<p class="short_description">Creates a connection to an SMTP server to be used by <a href="#fEmail">fEmail</a></p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b11</th><td>Enhanced the error checking for write() <span class="date">6/3/11</span></td></tr><tr><th>1.0.0b10</th><td>Added code to work around PHP bug #42682 (<a class="ext-link" href="http://bugs.php.net/bug.php?id=42682)"><span class="icon">http://bugs.php.net/bug.php?id=42682)</span></a> where <tt>stream_select()</tt> doesn't work on 64bit machines from PHP 5.2.0 to 5.2.5, improved timeouts while reading data <span class="date">1/10/11</span></td></tr><tr><th>1.0.0b9</th><td>Fixed a bug where lines starting with <tt>.</tt> and containing other content would have the <tt>.</tt> stripped <span class="date">9/11/10</span></td></tr><tr><th>1.0.0b8</th><td>Updated the class to use <a href="#fEmail-api-getFQDN"><tt>fEmail::getFQDN()</tt></a> <span class="date">9/7/10</span></td></tr><tr><th>1.0.0b7</th><td>Updated class to use new <a href="#fCore-api-startErrorCapture"><tt>fCore::startErrorCapture()</tt></a> functionality <span class="date">8/9/10</span></td></tr><tr><th>1.0.0b6</th><td>Updated the class to use new <a href="#fCore">fCore</a> functionality <span class="date">7/5/10</span></td></tr><tr><th>1.0.0b5</th><td>Hacked around a bug in PHP 5.3 on Windows <span class="date">6/22/10</span></td></tr><tr><th>1.0.0b4</th><td>Updated the class to not connect and authenticate until a message is sent, moved message id generation in <a href="#fEmail">fEmail</a> <span class="date">5/5/10</span></td></tr><tr><th>1.0.0b3</th><td>Fixed a bug with connecting to servers that send an initial response of <tt>220-</tt> and instead of <tt>220 </tt> <span class="date">4/26/10</span></td></tr><tr><th>1.0.0b2</th><td>Fixed a bug where <tt>STARTTLS</tt> would not be triggered if it was last in the SMTP server's list of supported extensions <span class="date">4/20/10</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">4/20/10</span></td></tr></table></div>
<div class="class_methods" id="fSMTP-api-class_methods">
<h4>Methods</h4>
			  			  									<!-- start method -->
			<h5 id="fSMTP-api-__construct" class="method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Configures the SMTP connection</p>
								<p>The SMTP connection is only made once authentication is attempted or  an email is sent.</p><p>Please note that this class will upgrade the connection to TLS via the  SMTP <tt>STARTTLS</tt> command if possible, even if a secure connection was not  requested. This helps to keep authentication information secure.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fSMTP">fSMTP</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$host</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$port</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$secure</span><span class="php-code">=</span>FALSE<span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$timeout</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$host</td>
				<td class="param_description">The hostname or IP address to connect to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$port</td>
				<td class="param_description">The port number to use</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$secure</td>
				<td class="param_description">If the connection should be secure - if <tt>STARTTLS</tt> is available, the connection will be upgraded even if this is <tt>FALSE</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$timeout</td>
				<td class="param_description">The timeout for the connection - defaults to the <tt>default_socket_timeout</tt> ini setting</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fSMTP-api-__destruct" class="method"><span class="resolution">-></span><span class="name">__destruct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Closes the connection to the SMTP server</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">__destruct</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fSMTP-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fSMTP-api-authenticate" class="method"><span class="resolution">-></span><span class="name">authenticate()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Authenticates with the SMTP server</p>
								<p>This method supports the digest-md5, cram-md5, login and plain  SMTP authentication methods. This method will try to use the more secure  digest-md5 and cram-md5 methods first since they do not send information  in the clear.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">authenticate</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$username</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$password</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$username</td>
				<td class="param_description">The username</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$password</td>
				<td class="param_description">The password</td>
			  </tr>
						</table>
			</div>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When the <tt>$username</tt> and <tt>$password</tt> are not accepted</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fSMTP-api-close" class="method"><span class="resolution">-></span><span class="name">close()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Closes the connection to the SMTP server</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">close</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fSMTP-api-enableDebugging" class="method"><span class="resolution">-></span><span class="name">enableDebugging()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets if debug messages should be shown</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">enableDebugging</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$flag</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$flag</td>
				<td class="param_description">If debugging messages should be shown</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
						<!-- start protected method -->
			<h5 id="fSMTP-api-send" class="protected method"><span class="resolution">-></span><span class="name">send()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sends a message via the SMTP server</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">send</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$from</span> [<span class="php-code">, ... </span>]<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$headers</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$body</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$from</td>
				<td class="param_description">The email address being sent from - this will be used as the <tt>Return-Path</tt> header</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$to</td>
				<td class="param_description">All of the To, Cc and Bcc email addresses to send the message to - this does not affect the message headers in any way</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$headers</td>
				<td class="param_description">The message headers - the Bcc header will be removed if present</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$body</td>
				<td class="param_description">The mail body</td>
			  </tr>
						</table>
			</div>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When the message is too large for the server</dd></dl>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="fSQLException">fSQLException</h2>
<div class="sidebar">
<h3 id="fSQLException-docs-ClassResources" toc-skip="1">Class Resources </h3>

<ul>
<li><strong><a href="#fSQLException">Class Documentation</a></strong></li>
<li><a href="#fSQLException-api">API Reference</a></li>
</ul>

<h3 id="fSQLException-docs-ExceptionClasses" toc-skip="1">Exception Classes </h3>

<ul>
<li><a href="#fException">fException</a>
<ul>
<li><a href="#fExpectedException">fExpectedException</a>
<ul>
<li><a href="#fAuthorizationException">fAuthorizationException</a></li>
<li><a href="#fEmptySetException">fEmptySetException</a></li>
<li><a href="#fNoRemainingException">fNoRemainingException</a></li>
<li><a href="#fNoRowsException">fNoRowsException</a></li>
<li><a href="#fNotFoundException">fNotFoundException</a></li>
<li><a href="#fValidationException">fValidationException</a></li>
</ul>
</li>
<li><a href="#fUnexpectedException">fUnexpectedException</a>
<ul>
<li><a href="#fConnectivityException">fConnectivityException</a></li>
<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
<li><a href="#fProgrammerException">fProgrammerException</a></li>
<li><strong>fSQLException</strong></li>
</ul>
</li>
</ul>
</li>
</ul>

<h3 id="fSQLException-docs-DatabaseClasses" toc-skip="1">Database Classes </h3>

<ul>
<li><a href="#fDatabase">fDatabase</a></li>
<li><a href="#fNoRowsException">fNoRowsException</a></li>
<li><a href="#fResult">fResult</a></li>
<li><strong>fSQLException</strong></li>
<li><a href="#fSQLTranslation">fSQLTranslation</a></li>
<li><a href="#fSQLSchemaTranslation">fSQLSchemaTranslation</a></li>
<li><a href="#fSchema">fSchema</a></li>
<li><a href="#fStatement">fStatement</a></li>
<li><a href="#fUnbufferedResult">fUnbufferedResult</a></li>
</ul>
</div>

<p>
fSQLException is a sub-class of <a href="#fUnexpectedException">fUnexpectedException</a> that indicates an error has occurred while executing an SQL query. This type of exception will <em>not</em> be tossed if a query returns no results, but would be tossed if there is a syntax error in the SQL statement. The <a href="#fNoRowsException">fNoRowsException</a> would be the type of exception tossed when an SQL query returns no rows.
</p>

<p>
<em>This space intentionally left blank</em>
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fSQLException-api">fSQLException API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fSQLException">Class Documentation</a></li>
		<li><strong><a href="#fSQLException-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fUnexpectedException">fUnexpectedException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fDatabase">fDatabase</a></li>
		<li><a href="#fResult">fResult</a></li>
		<li><a href="#fSQLSchemaTranslation">fSQLSchemaTranslation</a></li>
		<li><a href="#fStatement">fStatement</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b</span></div>
<p class="short_description">An exception occurred while executing a SQL statement</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="genealogy">	
	<h4>Genealogy</h4>
		<div class="class_tree">
		<h5>Class Tree</h5>
		<pre class="class_tree">Exception
   |
   --<a href="#fException">fException</a>
      |
      --<a href="#fUnexpectedException">fUnexpectedException</a>
         |
         --fSQLException</pre>
	</div>
		<div class="inherited_variables">
	<h5>Inherited Variables</h5>
		<dl>
		<dt class="protected">$code</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$file</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$line</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$message</dt>
	<dd class="protected"> </dd>
		<dt class="private">$previous</dt>
	<dd class="private"> </dd>
		<dt class="private">$string</dt>
	<dd class="private"> </dd>
		<dt class="private">$trace</dt>
	<dd class="private"> </dd>
		</dl>
		</div>
		<div class="inherited_methods">
	<h5>Inherited Methods</h5>
		<dl>
	  	  <dt class="public"><a href="#fUnexpectedException-api-printMessage"><tt>fUnexpectedException::printMessage()</tt></a></dt>
	  <dd class="public">Prints out a generic error message inside of a <tt>div</tt> with the class being <tt>'exception {exception_class_name}'</tt></dd>
	  	</dl>
		<dl>
	  	  <dt class="public"><a href="#fException-api-__construct"><tt>fException::__construct()</tt></a></dt>
	  <dd class="public">Sets the message for the exception, allowing for string interpolation and internationalization</dd>
	  	  <dt class="public"><a href="#fException-api-__get"><tt>fException::__get()</tt></a></dt>
	  <dd class="public">All requests that hit this method should be requests for callbacks</dd>
	  	  <dt class="protected"><a href="#fException-api-compose"><tt>fException::compose()</tt></a></dt>
	  <dd class="protected">Composes text using <a href="#fText">fText</a> if loaded</dd>
	  	  <dt class="protected"><a href="#fException-api-dump"><tt>fException::dump()</tt></a></dt>
	  <dd class="protected">Creates a string representation of any variable using predefined strings for booleans, <tt>NULL</tt> and empty strings</dd>
	  	  <dt class="public"><a href="#fException-api-formatTrace"><tt>fException::formatTrace()</tt></a></dt>
	  <dd class="public">Gets the backtrace to currently called exception</dd>
	  	  <dt class="protected"><a href="#fException-api-getCSSClass"><tt>fException::getCSSClass()</tt></a></dt>
	  <dd class="protected">Returns the CSS class name for printing information about the exception</dd>
	  	  <dt class="protected"><a href="#fException-api-prepare"><tt>fException::prepare()</tt></a></dt>
	  <dd class="protected">Prepares content for output into HTML</dd>
	  	  <dt class="public"><a href="#fException-api-printMessage"><tt>fException::printMessage()</tt></a></dt>
	  <dd class="public">Prints the message inside of a div with the class being 'exception %THIS_EXCEPTION_CLASS_NAME%'</dd>
	  	  <dt class="public"><a href="#fException-api-printTrace"><tt>fException::printTrace()</tt></a></dt>
	  <dd class="public">Prints the backtrace to currently called exception inside of a pre tag with the class being 'exception %THIS_EXCEPTION_CLASS_NAME% trace'</dd>
	  	  <dt class="public"><a href="#fException-api-registerCallback"><tt>fException::registerCallback()</tt></a></dt>
	  <dd class="public">Adds a callback for when certain types of exceptions are created</dd>
	  	  <dt class="public"><a href="#fException-api-reorderMessage"><tt>fException::reorderMessage()</tt></a></dt>
	  <dd class="public">Reorders list items in the message based on simple string matching</dd>
	  	  <dt class="public"><a href="#fException-api-setMessage"><tt>fException::setMessage()</tt></a></dt>
	  <dd class="public">Allows the message to be overwriten</dd>
	  	  <dt class="public"><a href="#fException-api-splitMessage"><tt>fException::splitMessage()</tt></a></dt>
	  <dd class="public">Splits an exception with an HTML list into multiple strings each containing part of the original message</dd>
	  	</dl>
		<dl>
	  	  <dt class="public">constructor __construct ( [$message = ], [$code = ], [$previous = ] )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__clone (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__toString (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getCode (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getFile (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getLine (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getMessage (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getPrevious (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTrace (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTraceAsString (  )</dt>
	  <dd class="public"></dd>
	  	</dl>
		</div>
	</div>			</section>
		</div>
		<section class="main">
<h2 id="fSQLSchemaTranslation">fSQLSchemaTranslation</h2>
<div class="sidebar">
<h3 id="fSQLSchemaTranslation-docs-ClassResources" toc-skip="1">Class Resources </h3>

<ul>
<li><strong><a href="#fSQLSchemaTranslation">Class Documentation</a></strong></li>
<li><a href="#fSQLSchemaTranslation-api">API Reference</a></li>
</ul>

<h3 id="fSQLSchemaTranslation-docs-DatabaseClasses" toc-skip="1">Database Classes </h3>

<ul>
<li><a href="#fDatabase">fDatabase</a></li>
<li><a href="#fNoRowsException">fNoRowsException</a></li>
<li><a href="#fResult">fResult</a></li>
<li><a href="#fSQLException">fSQLException</a></li>
<li><a href="#fSQLTranslation">fSQLTranslation</a></li>
<li><strong>fSQLSchemaTranslation</strong></li>
<li><a href="#fSchema">fSchema</a></li>
<li><a href="#fStatement">fStatement</a></li>
<li><a href="#fUnbufferedResult">fUnbufferedResult</a></li>
</ul>
</div>

<p>
The fSQLSchemaTranslation class is an internal class used by <a href="#fSQLTranslation">fSQLTranslation</a> for translating <a href="#FlourishSql-docs">Flourish SQL</a> DDL statements, such as <code>ALTER TABLE</code> and <code>CREATE TABLE</code>, into the dialect of SQL supported by the current database. To take advantage of the features of this class, be sure to call <a href="#fDatabase-api-translatedquery"><code>translatedQuery()</code></a> instead of <a href="#fDatabase-api-query"><code>query()</code></a>.
</p>

<p>
fSQLSchemaTranslation is separate from <a href="#fSQLTranslation">fSQLTranslation</a> due to the sheer amount of code necessary to implement <code>ALTER TABLE</code> functionality that works consistently across databases. In addition, this functionality is not used as frequently as the DML statements supported by <a href="#fSQLTranslation">fSQLTranslation</a>.
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fSQLSchemaTranslation-api">fSQLSchemaTranslation API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fSQLSchemaTranslation">Class Documentation</a></li>
		<li><strong><a href="#fSQLSchemaTranslation-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="protected methods static">
<h4><a href="#fSQLSchemaTranslation-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  			<li class="protected"><a href="#fSQLSchemaTranslation-api-compose">compose()</a></li>
	  	  </ul>
</div>
<div class="methods">
<h4><a href="#fSQLSchemaTranslation-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fSQLSchemaTranslation-api-__construct">__construct()</a></li>
	  			<li class="protected"><a href="#fSQLSchemaTranslation-api-__get">__get()</a></li>
	  	  			<li class="protected"><a href="#fSQLSchemaTranslation-api-translate">translate()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fSQLException">fSQLException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fSQLTranslation">fSQLTranslation</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b3</span></div>
<p class="short_description">Adds cross-database <tt>CREATE TABLE</tt>, <tt>ALTER TABLE</tt> and <tt>COMMENT ON COLUMN</tt> statements to <a href="#fSQLTranslation">fSQLTranslation</a></p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b3</th><td>Fixed associating a sequence with a column in PostgreSQL when setting auto-increment, fixed detection of some Oracle CHECK(IN) constraints, fixed default values for SQLite <tt>ON DELETE</tt> and <tt>ON UPDATE</tt> clauses <span class="date">1/12/12</span></td></tr><tr><th>1.0.0b2</th><td>Fixed detection of explicitly named SQLite foreign key constraints <span class="date">8/23/11</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">5/9/11</span></td></tr></table></div>
<div class="class_methods static" id="fSQLSchemaTranslation-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start protected method static -->
			<h5 id="fSQLSchemaTranslation-api-compose" class="protected method static"><span class="resolution">::</span><span class="name">compose()</span> <span class="visibility">protected</span></h5>
			<div class="protected method static">
							<div class="method_description">
									<p>Composes text using <a href="#fText">fText</a> if loaded</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">compose</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$component</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message to compose</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$component <em>[, ... ]</em></td>
				<td class="param_description">A string or number to insert into the message</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The composed and possible translated message
				</p>
			</div>
			<!-- end method static -->
		</div>
<div class="class_methods" id="fSQLSchemaTranslation-api-class_methods">
<h4>Methods</h4>
			  			  									<!-- start method -->
			<h5 id="fSQLSchemaTranslation-api-__construct" class="method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets up the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fSQLSchemaTranslation">fSQLSchemaTranslation</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fDatabase">fDatabase</a></span> <span class="php-var">$database</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fDatabase">fDatabase</a></td>
				<td class="param_name">$database</td>
				<td class="param_description">The database being translated for</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fSQLSchemaTranslation-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fSQLSchemaTranslation-api-translate" class="protected method"><span class="resolution">-></span><span class="name">translate()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Translates a Flourish SQL DDL statement into the dialect for the current database</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">translate</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$sql</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$rollback_statements</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$sql</td>
				<td class="param_description">The SQL statement to translate</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$rollback_statements</td>
				<td class="param_description">SQL statements to rollback the returned SQL statements if something goes wrong - only applicable for MySQL <tt>ALTER TABLE</tt> statements</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 An array containing the translated <tt>$sql</tt> statement and an array of extra statements
				</p>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="fSQLTranslation">fSQLTranslation</h2>
<div class="sidebar">
<h3 id="fSQLTranslation-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fSQLTranslation">Class Documentation</a></strong></li>
<li><a href="#fSQLTranslation-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fSQLTranslation-docs-Debugging">Debugging</a></li>
<li><a href="#fSQLTranslation-docs-Caching">Caching</a></li>
</ul>

<h3 id="fSQLTranslation-docs-DatabaseClasses">Database Classes </h3>

<ul>
<li><a href="#fDatabase">fDatabase</a></li>
<li><a href="#fNoRowsException">fNoRowsException</a></li>
<li><a href="#fResult">fResult</a></li>
<li><a href="#fSQLException">fSQLException</a></li>
<li><strong>fSQLTranslation</strong></li>
<li><a href="#fSQLSchemaTranslation">fSQLSchemaTranslation</a></li>
<li><a href="#fSchema">fSchema</a></li>
<li><a href="#fStatement">fStatement</a></li>
<li><a href="#fUnbufferedResult">fUnbufferedResult</a></li>
</ul>
</div>

<p>
The fSQLTranslation class is an internal class used by <a href="#fDatabase">fDatabase</a> for translating <a href="#FlourishSql-docs">Flourish SQL</a> into the dialect of SQL supported by the current database. To take advantage of the features of this class, be sure to call <a href="#fDatabase-api-translatedquery"><code>translatedQuery()</code></a> instead of <a href="#fDatabase-api-query"><code>query()</code></a>.
</p>

<p>
For more information about <code>translatedQuery()</code> and <code>query()</code>, please see the <a href="#fDatabase-docs-Queries">Queries</a> section of the <a href="#fDatabase">fDatabase</a> page.
</p>

<h3 id="fSQLTranslation-docs-Debugging">Debugging</h3>

<p>
The method <a href="#fSQLTranslation-api-enableDebugging"><code>enableDebugging()</code></a>, accepts a single boolean parameter to turn debugging on or off. This method is automatically passed the same value as <a href="#fDatabase-api-enableDebugging">fDatabase::enableDebugging()</a> when that is called.
</p>

<p>
When debugging is enabled, the class will print the original and translated queries, allowing developers to track down translation issues.
</p>
<pre class="block php"><code>$sql_translation-&gt;enableDebugging(TRUE);</code></pre>

<h3 id="fSQLTranslation-docs-Caching">Caching</h3>

<p>
Part of the functionality that fSQLTranslation provides is to provide a way to get national character data (NCHAR, NVARCHAR and NTEXT columns) out of Microsoft SQL Server. Most of the MSSQL extensions for PHP do not properly retrieve national character data since it is encoded in UCS-2, which contains <code>NULL</code> bytes. fSQLTranslation translates the SQL query to request data from such columns as binary data, which allows <code>NULL</code> bytes, and then changes the encoding to UTF-8 before being returned to the developer.
</p>

<p>
Part of this process is to retrieve a list of all national character columns. The <a href="#fSQLTranslation-api-enableCaching"><code>enableCaching()</code></a> method accepts an instance of the <a href="#fCache">fCache</a> class, and will save the appropriate database schema information so it does not need to be fetched on each page load.
</p>
<pre class="block php"><code>$sql_translation-&gt;enableCaching(new fCache('file', '/path/to/cache/file'));</code></pre>

<p>
 The method <a href="#fSQLTranslation-api-clearCache"><code>clearCache()</code></a> will clear out the cached information, which would be useful when the database schema changes.
</p>

<p>
When using the <a href="#ObjectRelationalMapping-docs">Flourish ORM</a>, the <a href="#fORM">fORM</a> class provides some <a href="#fORM-docs-SchemaCaching">useful caching functionality</a> that will automatically clear the cache when database errors occur.
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fSQLTranslation-api">fSQLTranslation API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fSQLTranslation">Class Documentation</a></li>
		<li><strong><a href="#fSQLTranslation-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="protected methods static">
<h4><a href="#fSQLTranslation-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  	  			<li class="protected"><a href="#fSQLTranslation-api-compose">compose()</a></li>
	  	  	  			<li class="protected"><a href="#fSQLTranslation-api-sqliteCotangent">sqliteCotangent()</a></li>
	  			<li class="protected"><a href="#fSQLTranslation-api-sqliteDate">sqliteDate()</a></li>
	  			<li class="protected"><a href="#fSQLTranslation-api-sqliteLength">sqliteLength()</a></li>
	  			<li class="protected"><a href="#fSQLTranslation-api-sqliteLogBaseFirst">sqliteLogBaseFirst()</a></li>
	  			<li class="protected"><a href="#fSQLTranslation-api-sqliteSign">sqliteSign()</a></li>
	  			<li class="protected"><a href="#fSQLTranslation-api-sqliteSubstr">sqliteSubstr()</a></li>
	  			<li class="protected"><a href="#fSQLTranslation-api-sqliteTime">sqliteTime()</a></li>
	  			<li class="protected"><a href="#fSQLTranslation-api-sqliteTimestamp">sqliteTimestamp()</a></li>
	  	  </ul>
</div>
<div class="methods">
<h4><a href="#fSQLTranslation-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fSQLTranslation-api-__construct">__construct()</a></li>
	  			<li class="protected"><a href="#fSQLTranslation-api-__get">__get()</a></li>
	  			<li><a href="#fSQLTranslation-api-clearCache">clearCache()</a></li>
	  	  			<li><a href="#fSQLTranslation-api-enableCaching">enableCaching()</a></li>
	  			<li><a href="#fSQLTranslation-api-enableDebugging">enableDebugging()</a></li>
	  	  	  	  	  	  	  	  	  			<li class="protected"><a href="#fSQLTranslation-api-translate">translate()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fSQLSchemaTranslation">fSQLSchemaTranslation</a></li>
		<li><a href="#fUTF8">fUTF8</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fDatabase">fDatabase</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b20</span></div>
<p class="short_description">Takes a subset of SQL from IBM DB2, MySQL, PostgreSQL, Oracle, SQLite and MSSQL and translates into the various dialects allowing for cross-database code</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b20</th><td>Added fix for PostgreSQL to handle <tt>INSERT</tt> statements that don't specify any columns or values <span class="date">9/6/11</span></td></tr><tr><th>1.0.0b19</th><td>Removed the stray method removeSQLiteIndexes() that was left over from moving code into <a href="#fSQLSchemaTranslation">fSQLSchemaTranslation</a> <span class="date">5/17/11</span></td></tr><tr><th>1.0.0b18</th><td>Fixed <tt>LENGTH()</tt> and <tt>SUBSTR()</tt> functions for non-ascii characters being stored in MySQL, SQLite and DB2, moved <tt>CREATE TABLE</tt> support to <a href="#fSQLSchemaTranslation">fSQLSchemaTranslation</a> <span class="date">5/9/11</span></td></tr><tr><th>1.0.0b17</th><td>Internal Backwards Compatiblity Break - changed the array keys for translated queries returned from <a href="#fSQLTranslation-api-translate"><tt>translate()</tt></a> to include a number plus <tt>:</tt> before the original SQL, preventing duplicate keys <span class="date">7/14/10</span></td></tr><tr><th>1.0.0b16</th><td>Added IBM DB2 support <span class="date">4/13/10</span></td></tr><tr><th>1.0.0b15</th><td>Fixed a bug with MSSQL national character conversion when running a SQL statement with a sub-select containing joins <span class="date">12/18/09</span></td></tr><tr><th>1.0.0b14</th><td>Changed PostgreSQL to cast columns in LOWER() calls to VARCHAR to allow UUID columns (which are treated as a VARCHAR by <a href="#fSchema">fSchema</a>) to work with default primary key ordering in <a href="#fRecordSet">fRecordSet</a> <span class="date">12/16/09</span></td></tr><tr><th>1.0.0b13</th><td>Added a parameter to <a href="#fSQLTranslation-api-enableCaching"><tt>enableCaching()</tt></a> to provide a key token that will allow cached values to be shared between multiple databases with the same schema <span class="date">10/28/09</span></td></tr><tr><th>1.0.0b12</th><td>Backwards Compatibility Break - Removed date translation functionality, changed the signature of <a href="#fSQLTranslation-api-translate"><tt>translate()</tt></a>, updated to support quoted identifiers, added support for PostgreSQL, MSSQL and Oracle schemas <span class="date">10/22/09</span></td></tr><tr><th>1.0.0b11</th><td>Fixed a bug with translating MSSQL national columns over an ODBC connection <span class="date">9/18/09</span></td></tr><tr><th>1.0.0b10</th><td>Changed last bug fix to support PHP 5.1.6 <span class="date">9/18/09</span></td></tr><tr><th>1.0.0b9</th><td>Fixed another bug with parsing table aliases for MSSQL national columns <span class="date">9/18/09</span></td></tr><tr><th>1.0.0b8</th><td>Fixed a bug with parsing table aliases that occurs when handling MSSQL national columns <span class="date">9/9/09</span></td></tr><tr><th>1.0.0b7</th><td>Fixed a bug with translating <tt>NOT LIKE</tt> operators in PostgreSQL <span class="date">7/15/09</span></td></tr><tr><th>1.0.0b6</th><td>Changed replacement values in preg_replace() calls to be properly escaped <span class="date">6/11/09</span></td></tr><tr><th>1.0.0b5</th><td>Update code to only translate data types inside of <tt>CREATE TABLE</tt> queries <span class="date">5/22/09</span></td></tr><tr><th>1.0.0b4</th><td>Added the missing <a href="#fSQLTranslation-api-__get"><tt>__get()</tt></a> method for callback support <span class="date">5/6/09</span></td></tr><tr><th>1.0.0b3</th><td>Added Oracle and caching support, various bug fixes <span class="date">5/4/09</span></td></tr><tr><th>1.0.0b2</th><td>Fixed a notice with SQLite foreign key constraints having no <tt>ON</tt> clauses <span class="date">2/21/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">9/25/07</span></td></tr></table></div>
<div class="class_methods static" id="fSQLTranslation-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start protected method static -->
			<h5 id="fSQLTranslation-api-compose" class="protected method static"><span class="resolution">::</span><span class="name">compose()</span> <span class="visibility">protected</span></h5>
			<div class="protected method static">
							<div class="method_description">
									<p>Composes text using <a href="#fText">fText</a> if loaded</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">compose</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$component</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message to compose</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$component <em>[, ... ]</em></td>
				<td class="param_description">A string or number to insert into the message</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The composed and possible translated message
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fSQLTranslation-api-sqliteCotangent" class="protected method static"><span class="resolution">::</span><span class="name">sqliteCotangent()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Callback for custom SQLite function; calculates the cotangent of a number</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">numeric</span> <span class="php-identifier">sqliteCotangent</span><span class="php-brackets">(</span> <span class="php-vartype">numeric</span> <span class="php-var">$x</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">numeric</td>
				<td class="param_name">$x</td>
				<td class="param_description">The number to calculate the cotangent of</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The contangent of <tt>$x</tt>
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fSQLTranslation-api-sqliteDate" class="protected method static"><span class="resolution">::</span><span class="name">sqliteDate()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Callback for custom SQLite function; returns the current date</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">sqliteDate</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					The current date
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fSQLTranslation-api-sqliteLength" class="protected method static"><span class="resolution">::</span><span class="name">sqliteLength()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Callback for custom SQLite length function; returns the number of UTF-8 characters in a string</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">sqliteLength</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to measure</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The current date
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fSQLTranslation-api-sqliteLogBaseFirst" class="protected method static"><span class="resolution">::</span><span class="name">sqliteLogBaseFirst()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Callback for custom SQLite function; calculates the log to a specific base of a number</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">numeric</span> <span class="php-identifier">sqliteLogBaseFirst</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$base</span><span class="php-code">,</span> <span class="php-vartype">numeric</span> <span class="php-var">$num</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$base</td>
				<td class="param_description">The base for the log calculation</td>
			  </tr>
						  <tr>
				<td class="param_data_type">numeric</td>
				<td class="param_name">$num</td>
				<td class="param_description">The number to calculate the logarithm of</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The logarithm of <tt>$num</tt> to <tt>$base</tt>
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fSQLTranslation-api-sqliteSign" class="protected method static"><span class="resolution">::</span><span class="name">sqliteSign()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Callback for custom SQLite function; returns the sign of the number</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">numeric</span> <span class="php-identifier">sqliteSign</span><span class="php-brackets">(</span> <span class="php-vartype">numeric</span> <span class="php-var">$x</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">numeric</td>
				<td class="param_name">$x</td>
				<td class="param_description">The number to change the sign of</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					<tt>-1</tt> if a negative sign, <tt>0</tt> if zero, <tt>1</tt> if positive sign
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fSQLTranslation-api-sqliteSubstr" class="protected method static"><span class="resolution">::</span><span class="name">sqliteSubstr()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Callback for custom SQLite function; creates a substring</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">sqliteSubstr</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$start</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$length</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to take a substring of</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$start</td>
				<td class="param_description">The one-based position to start the substring at</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$length</td>
				<td class="param_description">The length of the substring to take</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The substring
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fSQLTranslation-api-sqliteTime" class="protected method static"><span class="resolution">::</span><span class="name">sqliteTime()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Callback for custom SQLite function; returns the current time</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">sqliteTime</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					The current time
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fSQLTranslation-api-sqliteTimestamp" class="protected method static"><span class="resolution">::</span><span class="name">sqliteTimestamp()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Callback for custom SQLite function; returns the current timestamp</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">sqliteTimestamp</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					The current date
				</p>
			</div>
			<!-- end method static -->
		</div>
<div class="class_methods" id="fSQLTranslation-api-class_methods">
<h4>Methods</h4>
			  			  									<!-- start method -->
			<h5 id="fSQLTranslation-api-__construct" class="method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets up the class and creates functions for SQLite databases</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fSQLTranslation">fSQLTranslation</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fDatabase">fDatabase</a></span> <span class="php-var">$database</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fDatabase">fDatabase</a></td>
				<td class="param_name">$database</td>
				<td class="param_description">The database being translated for</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fSQLTranslation-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fSQLTranslation-api-clearCache" class="method"><span class="resolution">-></span><span class="name">clearCache()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Clears all of the schema info out of the object and, if set, the <a href="#fCache">fCache</a> object</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">clearCache</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fSQLTranslation-api-enableCaching" class="method"><span class="resolution">-></span><span class="name">enableCaching()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the schema info to be cached to the <a href="#fCache">fCache</a> object specified</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">enableCaching</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fCache">fCache</a></span> <span class="php-var">$cache</span><span class="php-code">,</span> <span class="php-vartype"></span> <span class="php-var">$key_token</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fCache">fCache</a></td>
				<td class="param_name">$cache</td>
				<td class="param_description">The cache to cache to</td>
			  </tr>
						  <tr>
				<td class="param_data_type"></td>
				<td class="param_name">$key_token</td>
				<td class="param_description"></td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fSQLTranslation-api-enableDebugging" class="method"><span class="resolution">-></span><span class="name">enableDebugging()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets if debug messages should be shown</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">enableDebugging</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$flag</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$flag</td>
				<td class="param_description">If debugging messages should be shown</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fSQLTranslation-api-translate" class="protected method"><span class="resolution">-></span><span class="name">translate()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Translates Flourish SQL into the dialect for the current database</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">translate</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$statements</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">&amp;$rollback_statements</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$statements</td>
				<td class="param_description">The SQL statements to translate</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">&amp;$rollback_statements</td>
				<td class="param_description">SQL statements to rollback the returned SQL statements if something goes wrong - only applicable for MySQL <tt>ALTER TABLE</tt> statements</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The translated SQL statements all ready for execution. Statements that have been translated will have string key of the number, <tt>:</tt> and the original SQL, all other will have a numeric key.
				</p>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="fSchema">fSchema</h2>
<div class="sidebar">
<h3 id="fSchema-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fSchema">Class Documentation</a></strong></li>
<li><a href="#fSchema-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fSchema-docs-ExampleDatabase">Example Database</a></li>
<li><a href="#fSchema-docs-Instantiation">Instantiation</a></li>
<li><a href="#fSchema-docs-TableListing">Table Listing</a></li>
<li><a href="#fSchema-docs-ColumnInformation">Column Information</a></li>
<li><a href="#fSchema-docs-KeyInformation">Key Information</a></li>
<li><a href="#fSchema-docs-Relationships">Relationships</a></li>
<li><a href="#fSchema-docs-Overriding">Overriding</a>
<ul>
<li><a href="#fSchema-docs-ExampleDatabase">Example Database</a></li>
<li><a href="#fSchema-docs-PHPtoOverride">PHP to Override</a></li>
</ul>
</li>
<li><a href="#fSchema-docs-Caching">Caching</a></li>
</ul>

<h3 id="fSchema-docs-DatabaseClasses">Database Classes </h3>

<ul>
<li><a href="#fDatabase">fDatabase</a></li>
<li><a href="#fNoRowsException">fNoRowsException</a></li>
<li><a href="#fResult">fResult</a></li>
<li><a href="#fSQLException">fSQLException</a></li>
<li><a href="#fSQLTranslation">fSQLTranslation</a></li>
<li><a href="#fSQLSchemaTranslation">fSQLSchemaTranslation</a></li>
<li><strong>fSchema</strong></li>
<li><a href="#fStatement">fStatement</a></li>
<li><a href="#fUnbufferedResult">fUnbufferedResult</a></li>
</ul>
</div>

<p>
The fSchema class provides information about the structure of a database, from table and column info to keys and relationships. The database schema is converted to a standard format that can then be used by other code wishing to interact with the database.
</p>

<h3 id="fSchema-docs-ExampleDatabase">Example Database</h3>

<p>
The commands throughout this page are used to display information about database structure. Here are the <code>CREATE TABLE</code> statements for the example database:
</p>
<pre class="block sql"><code>CREATE TABLE groups (
    group_id INTEGER PRIMARY KEY AUTOINCREMENT,
    name VARCHAR(100) NOT NULL UNIQUE
);

CREATE TABLE users (
    user_id INTEGER PRIMARY KEY AUTOINCREMENT,
    name VARCHAR(200) NOT NULL UNIQUE,
    posts INTEGER NOT NULL DEFAULT 0,
    birthday DATE,
    status VARCHAR(20) NOT NULL DEFAULT 'Inactive' CHECK(status IN ('Active', 'Inactive')),
    group_id INTEGER REFERENCES groups(group_id) ON DELETE CASCADE ON UPDATE CASCADE
);</code></pre>

<h3 id="fSchema-docs-Instantiation">Instantiation</h3>

<p>
The fSchema class simply requires and instance of the <a href="#fDatabase">fDatabase</a> class in order to be instantiated:
</p>
<pre class="block php"><code>$db     = new fDatabase('sqlite', $_SERVER['DOCUMENT_ROOT'] . '/example.db');
$schema = new fSchema($db);</code></pre>

<h3 id="fSchema-docs-TableListing">Table Listing</h3>

<p>
One of the most basic tasks to perform with the fSchema class is to return a list of all tables in the database by using <a href="#fSchema-api-getTables"><code>getTables()</code></a>:
</p>
<pre class="block php"><code>$tables = $schema-&gt;getTables();
fCore::expose($tables);</code></pre>

<p>
 The output of the above PHP would be:
</p>
<pre class="block html"><code>&lt;pre class=&quot;exposed&quot;&gt;Array
(
    [0] =&amp;gt; groups
    [1] =&amp;gt; users
)&lt;/pre&gt;</code></pre>

<h3 id="fSchema-docs-ColumnInformation">Column Information</h3>

<p>
Column information can be returned for any table in the database using the <a href="#fSchema-api-getColumnInfo"><code>getColumnInfo()</code></a> method. The returned associative array contains the following information about each column: <code>type</code>, <code>not_null</code>, <code>default</code>, <code>valid_values</code>, <code>max_length</code>, <code>min_value</code>, <code>max_value</code>, <code>decimal_places</code> and <code>auto_increment</code>. For details about the returned array and the data type mapping that occurs, please view the <a href="#fSchema-api-getColumnInfo">documentation for <code>getColumnInfo()</code></a>.
</p>

<p>
Here is an example:
</p>
<pre class="block php"><code>$column_info = $schema-&gt;getColumnInfo('users');
fCore::expose($column_info);</code></pre>

<p>
 The HTML output would be:
</p>
<pre class="block html"><code>&lt;pre class=&quot;exposed&quot;&gt;Array
(
    [user_id] =&amp;gt; Array
        (
            [type] =&amp;gt; integer
            [not_null] =&amp;gt; {true}
            [auto_increment] =&amp;gt; {true}
            [default] =&amp;gt; {null}
            [valid_values] =&amp;gt; {null}
            [min_value] =&amp;gt; -2147483648
            [max_value] =&amp;gt; 2147483647
            [max_length] =&amp;gt; {null}
            [decimal_places] =&amp;gt; {null}
            [comment] =&amp;gt; {empty_string}
        )
  
    [name] =&amp;gt; Array
        (
            [type] =&amp;gt; varchar
            [max_length] =&amp;gt; 200
            [not_null] =&amp;gt; {true}
            [default] =&amp;gt; {null}
            [valid_values] =&amp;gt; {null}
            [min_value] =&amp;gt; {null}
            [max_value] =&amp;gt; 2147483647
            [decimal_places] =&amp;gt; {null}
            [auto_increment] =&amp;gt; {false}
            [comment] =&amp;gt; {empty_string}
        )
  
    [posts] =&amp;gt; Array
        (
            [type] =&amp;gt; integer
            [not_null] =&amp;gt; {true}
            [default] =&amp;gt; 0
            [valid_values] =&amp;gt; {null}
            [max_length] =&amp;gt; {null}
            [min_value] =&amp;gt; -2147483648
            [max_value] =&amp;gt; 2147483647
            [decimal_places] =&amp;gt; {null}
            [auto_increment] =&amp;gt; {false}
            [comment] =&amp;gt; {empty_string}
        )
  
    [birthday] =&amp;gt; Array
        (
            [type] =&amp;gt; date
            [not_null] =&amp;gt; {false}
            [default] =&amp;gt; {null}
            [valid_values] =&amp;gt; {null}
            [max_length] =&amp;gt; {null}
            [min_value] =&amp;gt; {null}
            [max_value] =&amp;gt; {null}
            [decimal_places] =&amp;gt; {null}
            [auto_increment] =&amp;gt; {false}
            [comment] =&amp;gt; {empty_string}
        )
  
    [status] =&amp;gt; Array
        (
            [type] =&amp;gt; varchar
            [max_length] =&amp;gt; 20
            [not_null] =&amp;gt; {true}
            [default] =&amp;gt; Inactive

            [valid_values] =&amp;gt; Array
                (
                    [0] =&amp;gt; Active
                    [1] =&amp;gt; Inactive
                )
            
            [min_value] =&amp;gt; {null}
            [max_value] =&amp;gt; {null}
            [decimal_places] =&amp;gt; {null}
            [auto_increment] =&amp;gt; {false}
            [comment] =&amp;gt; {empty_string}
        )
  
    [group_id] =&amp;gt; Array
        (
            [type] =&amp;gt; integer
            [not_null] =&amp;gt; {false}
            [default] =&amp;gt; {null}
            [valid_values] =&amp;gt; {null}
            [min_value] =&amp;gt; -2147483648
            [max_value] =&amp;gt; 2147483647
            [max_length] =&amp;gt; {null}
            [auto_increment] =&amp;gt; {false}
            [comment] =&amp;gt; {empty_string}
        )
  
)&lt;/pre&gt;</code></pre>

<h3 id="fSchema-docs-KeyInformation">Key Information</h3>

<p>
In addition to determining basic information about table and columns in a database, fSchema can also detect all of the primary, foreign and unique keys in a database using the <a href="#fSchema-api-getKeys"><code>getKeys()</code></a> method.
</p>

<p>
Here is the PHP to get the key information:
</p>
<pre class="block php"><code>$keys = $schema-&gt;getKeys('users');
fCore::expose($keys);</code></pre>

<p>
 And here is the HTML that would be output:
</p>
<pre class="block html"><code>&lt;pre class=&quot;exposed&quot;&gt;Array
(
    [primary] =&amp;gt; Array
        (
            [0] =&amp;gt; user_id
        )
  
    [foreign] =&amp;gt; Array
        (
            [0] =&amp;gt; Array
                (
                    [column] =&amp;gt; group_id
                    [foreign_table] =&amp;gt; groups
                    [foreign_column] =&amp;gt; group_id
                    [on_delete] =&amp;gt; cascade
                    [on_update] =&amp;gt; cascade
                )
        
        )
  
    [unique] =&amp;gt; Array
        (
            [0] =&amp;gt; Array
                (
                    [0] =&amp;gt; name
                )
        
        )
  
)&lt;/pre&gt;</code></pre>

<h3 id="fSchema-docs-Relationships">Relationships</h3>

<p>
Key information for the database is useful, but another very useful bit of information is how the different tables in the database are related. <a href="#fSchema-api-getRelationships"><code>getRelationships()</code></a> method uses the key information to determine the <code>one-to-one</code>, <code>one-to-many</code>, <code>many-to-one</code> and <code>many-to-many</code> relationships present:
</p>
<pre class="block php"><code>$users_relationships = $schema-&gt;getRelationships('users');
fCore::expose($users_relationships);

$groups_relationships = $schema-&gt;getRelationships('groups');
fCore::expose($groups_relationships);</code></pre>

<p>
 The output for the <code>users</code> relationships would be:
</p>
<pre class="block html"><code>&lt;pre class=&quot;exposed&quot;&gt;Array
(
    [one-to-one] =&amp;gt; Array
        (
        )
  
    [many-to-one] =&amp;gt; Array
        (
            [0] =&amp;gt; Array
                (
                    [column] =&amp;gt; group_id
                    [related_table] =&amp;gt; groups
                    [related_column] =&amp;gt; group_id
                )
        
        )
  
    [one-to-many] =&amp;gt; Array
        (
        )
  
    [many-to-many] =&amp;gt; Array
        (
        )
  
)&lt;/pre&gt;</code></pre>

<p>
 While the output for the <code>groups</code> relationships would be:
</p>
<pre class="block html"><code>&lt;pre class=&quot;exposed&quot;&gt;Array
(
    [one-to-one] =&amp;gt; Array
        (
        )
  
    [many-to-one] =&amp;gt; Array
        (
        )
  
    [one-to-many] =&amp;gt; Array
        (
            [0] =&amp;gt; Array
                (
                    [column] =&amp;gt; group_id
                    [related_table] =&amp;gt; users
                    [related_column] =&amp;gt; group_id
                    [on_delete] =&amp;gt; cascade
                    [on_update] =&amp;gt; cascade
                )
        
        )
  
    [many-to-many] =&amp;gt; Array
        (
        )
  
)&lt;/pre&gt;</code></pre>

<h3 id="fSchema-docs-Overriding">Overriding</h3>

<p>
The fSchema class is used extensively by the object relational mapping code built into Flourish. Occasionally Flourish will support certain features based on database structure that are impossible to accomplish in a certain type of database.
</p>

<p>
To allow the object relational mapping code to still perform the necessary tasks, even if the database engine doesnt support a feature, the <a href="#fSchema-api-setColumnInfoOverride"><code>setColumnInfoOverride()</code></a> and <a href="#fSchema-api-setKeysOverride"><code>setKeysOverride()</code></a> methods allow schema information to be overridden.
</p>

<p>
<em>Please note that faking foreign-key relationships for MyISAM tables in MySQL may cause your data to get into an inconsistent state. This is because MyISAM tables do not support transactions, which Flourish uses for the purpose of atomic changes to the database across multiple tables at a time.</em>
</p>

<h4 id="fSchema-docs-ExampleDatabase">Example Database</h4>

<p>
Below are some example tables to show how foreign keys can be faked to help provide relational data integrity. These examples are presented using MySQL.
</p>
<pre class="block sql"><code>CREATE TABLE users (
	user_id INTEGER PRIMARY KEY AUTO_INCREMENT,
	first_name VARCHAR(100) NOT NULL,
	last_name VARCHAR(100) NOT NULL,
	email_address VARCHAR(200) NOT NULL UNIQUE,
	hashed_password VARCHAR(100) NOT NULL
);

CREATE TABLE groups (
	group_id INTEGER PRIMARY KEY AUTO_INCREMENT,
	name VARCHAR(255) NOT NULL UNIQUE,
	group_leader INTEGER,
	group_founder INTEGER
);

CREATE TABLE users_groups (
	user_id INTEGER NOT NULL,
	group_id INTEGER NOT NULL,
	PRIMARY KEY(user_id, group_id)
);</code></pre>

<h4 id="fSchema-docs-PHPtoOverride">PHP to Override</h4>

<p>
The following PHP will create relationships between groups and users. There will not be any normal situations where you would want to override the primary or unique keys on a table. <em>If you are using the ORM, this code should be executed before any <a href="#fActiveRecord">fActiveRecord</a> objects are used, such as in the bootstrap page, or something called from it.</em>
</p>

<p>
The exact array structure to use with <a href="#fSchema-api-setKeysOverride"><code>setKeysOverride()</code></a> can be found in the <a href="#fSchema-api-getKeys"><code>getKeys()</code></a> method documentation.
</p>
<pre class="block php"><code>$schema = new fSchema($database);

// If we are using the ORM well want to attach this instance
fORMSchema::attach($schema);

// Set up the foreign keys from groups to users
$schema-&gt;setKeysOverride(
	array(
		array(
			'column'         =&gt; 'group_founder',
			'foreign_table'  =&gt; 'users',
			'foreign_column' =&gt; 'user_id',
			'on_delete'      =&gt; 'cascade',
			'on_update'      =&gt; 'cascade'
		),
		array(
			'column'         =&gt; 'group_leader',
			'foreign_table'  =&gt; 'users',
			'foreign_column' =&gt; 'user_id',
			'on_delete'      =&gt; 'cascade',
			'on_update'      =&gt; 'cascade'
		)
	),
	'groups',
	'foreign'
);

// Set up the keys for users_groups to create a join table
// for a many-to-many relationship between users and groups
$schema-&gt;setKeysOverride(
	array(
		array(
			'column'         =&gt; 'user_id',
			'foreign_table'  =&gt; 'users',
			'foreign_column' =&gt; 'user_id',
			'on_delete'      =&gt; 'cascade',
			'on_update'      =&gt; 'cascade'
		),
		array(
			'column'         =&gt; 'group_id',
			'foreign_table'  =&gt; 'groups',
			'foreign_column' =&gt; 'group_id',
			'on_delete'      =&gt; 'cascade',
			'on_update'      =&gt; 'cascade'
		)
	),
	'users_groups',
	'foreign'
);</code></pre>

<h3 id="fSchema-docs-Caching">Caching</h3>

<p>
Since the fSchema class executes a number of database calls to determine the structure of the database, it may be desirable to cache the information to reduce database load and script execution time. The method <a href="#fSchema-api-enableCaching"><code>enableCaching()</code></a> accepts an instance of the <a href="#fCache">fCache</a> object and will use it to save all of the schema information.
</p>
<pre class="block php"><code>$schema-&gt;enableCaching(new fCache('file', '/path/to/cache/file'));</code></pre>

<p>
 The method <a href="#fSchema-api-clearCache"><code>clearCache()</code></a> will clear out the cached information, which would be useful when the database schema changes.
</p>

<p>
When using the <a href="#ObjectRelationalMapping-docs">Flourish ORM</a>, the <a href="#fORM">fORM</a> class provides some <a href="#fORM-docs-SchemaCaching">useful caching functionality</a> that will automatically clear the cache when database errors occur.
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fSchema-api">fSchema API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fSchema">Class Documentation</a></li>
		<li><strong><a href="#fSchema-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods">
<h4><a href="#fSchema-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fSchema-api-__construct">__construct()</a></li>
	  			<li class="protected"><a href="#fSchema-api-__get">__get()</a></li>
	  			<li class="protected"><a href="#fSchema-api-clearCache">clearCache()</a></li>
	  			<li><a href="#fSchema-api-enableCaching">enableCaching()</a></li>
	  			<li><a href="#fSchema-api-getColumnInfo">getColumnInfo()</a></li>
	  			<li><a href="#fSchema-api-getDatabases">getDatabases()</a></li>
	  			<li><a href="#fSchema-api-getKeys">getKeys()</a></li>
	  			<li><a href="#fSchema-api-getRelationships">getRelationships()</a></li>
	  			<li><a href="#fSchema-api-getTables">getTables()</a></li>
	  			<li><a href="#fSchema-api-setColumnInfoOverride">setColumnInfoOverride()</a></li>
	  			<li><a href="#fSchema-api-setKeysOverride">setKeysOverride()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fNumber">fNumber</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fORMSchema">fORMSchema</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b51</span></div>
<p class="short_description">Gets schema information for the selected database</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b51</th><td>Fixed handling of getting tables in table creation order when a table references itself, fixed default value detection for the last column in a MySQL table <span class="date">1/12/12</span></td></tr><tr><th>1.0.0b50</th><td>Fixed detection of explicitly named SQLite foreign key constraints <span class="date">8/23/11</span></td></tr><tr><th>1.0.0b49</th><td>Added support for spatial/geometric data types in MySQL and PostgreSQL <span class="date">5/26/11</span></td></tr><tr><th>1.0.0b48</th><td>Fixed a bug with <a href="#fSchema-api-getTables"><tt>getTables()</tt></a> not working on MySQL 4.x, fixed <a href="#fSchema-api-getKeys"><tt>getKeys()</tt></a> to always return a reset array <span class="date">5/24/11</span></td></tr><tr><th>1.0.0b47</th><td>Backwards Compatibility Break - <a href="#fSchema-api-getTables"><tt>getTables()</tt></a>, <a href="#fSchema-api-getColumnInfo"><tt>getColumnInfo()</tt></a>, <a href="#fSchema-api-getDatabases"><tt>getDatabases()</tt></a>, <a href="#fSchema-api-getKeys"><tt>getKeys()</tt></a> and <a href="#fSchema-api-getRelationships"><tt>getRelationships()</tt></a> now return database, schema, table and column names in lowercase, added the <tt>$creation_order</tt> parameter to <a href="#fSchema-api-getTables"><tt>getTables()</tt></a>, fixed bugs with getting column and key information from MSSQL, Oracle and SQLite <span class="date">5/9/11</span></td></tr><tr><th>1.0.0b46</th><td>Enhanced SQLite schema detection to cover situations where <tt>UNIQUE</tt> constraints are defined separately from the table and when comments are used in <tt>CREATE TABLE</tt> statements <span class="date">2/6/11</span></td></tr><tr><th>1.0.0b45</th><td>Fixed Oracle auto incrementing detection to work with <tt>INSERT OR UPDATE</tt> triggers, fixed detection of dynamic default date/time/timestamp values for DB2 and Oracle <span class="date">12/4/10</span></td></tr><tr><th>1.0.0b44</th><td>Fixed the list of valid elements for <a href="#fSchema-api-getColumnInfo"><tt>getColumnInfo()</tt></a> <span class="date">11/28/10</span></td></tr><tr><th>1.0.0b43</th><td>Added the <tt>comment</tt> element to the information returned by <a href="#fSchema-api-getColumnInfo"><tt>getColumnInfo()</tt></a> <span class="date">11/28/10</span></td></tr><tr><th>1.0.0b42</th><td>Fixed a bug with MySQL detecting default <tt>ON DELETE</tt> clauses <span class="date">10/19/10</span></td></tr><tr><th>1.0.0b41</th><td>Fixed handling MySQL table names that require quoting <span class="date">8/24/10</span></td></tr><tr><th>1.0.0b40</th><td>Fixed bugs in the documentation and error message of <a href="#fSchema-api-getColumnInfo"><tt>getColumnInfo()</tt></a> about what are valid elements <span class="date">7/21/10</span></td></tr><tr><th>1.0.0b39</th><td>Fixed a regression where key detection SQL was not compatible with PostgreSQL 8.1 <span class="date">4/13/10</span></td></tr><tr><th>1.0.0b38</th><td>Added Oracle support to <a href="#fSchema-api-getDatabases"><tt>getDatabases()</tt></a> <span class="date">4/13/10</span></td></tr><tr><th>1.0.0b37</th><td>Fixed <a href="#fSchema-api-getDatabases"><tt>getDatabases()</tt></a> for MSSQL <span class="date">4/9/10</span></td></tr><tr><th>1.0.0b36</th><td>Fixed PostgreSQL to properly report explicit <tt>NULL</tt> default values via <a href="#fSchema-api-getColumnInfo"><tt>getColumnInfo()</tt></a> <span class="date">3/30/10</span></td></tr><tr><th>1.0.0b35</th><td>Added <tt>max_length</tt> values for various text and blob data types across all databases <span class="date">3/29/10</span></td></tr><tr><th>1.0.0b34</th><td>Added <tt>min_value</tt> and <tt>max_value</tt> attributes to <a href="#fSchema-api-getColumnInfo"><tt>getColumnInfo()</tt></a> to specify the valid range for numeric columns <span class="date">3/16/10</span></td></tr><tr><th>1.0.0b33</th><td>Changed it so that PostgreSQL unique indexes containing functions are ignored since they can't be properly detected at this point <span class="date">3/14/10</span></td></tr><tr><th>1.0.0b32</th><td>Fixed <a href="#fSchema-api-getTables"><tt>getTables()</tt></a> to not include views for MySQL <span class="date">3/14/10</span></td></tr><tr><th>1.0.0b31</th><td>Fixed the creation of the default caching key for <a href="#fSchema-api-enableCaching"><tt>enableCaching()</tt></a> <span class="date">3/2/10</span></td></tr><tr><th>1.0.0b30</th><td>Fixed the class to work with lower privilege Oracle accounts and added detection of Oracle number columns <span class="date">1/25/10</span></td></tr><tr><th>1.0.0b29</th><td>Added on_delete and on_update elements to one-to-one relationship info retrieved by <a href="#fSchema-api-getRelationships"><tt>getRelationships()</tt></a> <span class="date">12/16/09</span></td></tr><tr><th>1.0.0b28</th><td>Fixed a bug with detecting some multi-column unique constraints in SQL Server databases <span class="date">11/13/09</span></td></tr><tr><th>1.0.0b27</th><td>Added a parameter to <a href="#fSchema-api-enableCaching"><tt>enableCaching()</tt></a> to provide a key token that will allow cached values to be shared between multiple databases with the same schema <span class="date">10/28/09</span></td></tr><tr><th>1.0.0b26</th><td>Added the placeholder element to the output of <a href="#fSchema-api-getColumnInfo"><tt>getColumnInfo()</tt></a>, added support for PostgreSQL, MSSQL and Oracle &quot;schemas&quot;, added support for parsing quoted SQLite identifiers <span class="date">10/22/09</span></td></tr><tr><th>1.0.0b25</th><td>One-to-one relationships utilizing the primary key as a foreign key are now properly detected <span class="date">9/22/09</span></td></tr><tr><th>1.0.0b24</th><td>Fixed MSSQL support to work with ODBC database connections <span class="date">9/18/09</span></td></tr><tr><th>1.0.0b23</th><td>Fixed a bug where one-to-one relationships were being listed as many-to-one <span class="date">7/21/09</span></td></tr><tr><th>1.0.0b22</th><td>PostgreSQL UNIQUE constraints that are created as indexes and not table constraints are now properly detected <span class="date">7/8/09</span></td></tr><tr><th>1.0.0b21</th><td>Added support for the UUID data type in PostgreSQL <span class="date">6/18/09</span></td></tr><tr><th>1.0.0b20</th><td>Add caching of merged info, improved performance of <a href="#fSchema-api-getColumnInfo"><tt>getColumnInfo()</tt></a> <span class="date">6/15/09</span></td></tr><tr><th>1.0.0b19</th><td>Fixed a couple of bugs with <a href="#fSchema-api-setKeysOverride"><tt>setKeysOverride()</tt></a> <span class="date">6/4/09</span></td></tr><tr><th>1.0.0b18</th><td>Added missing support for MySQL mediumint columns <span class="date">5/18/09</span></td></tr><tr><th>1.0.0b17</th><td>Fixed a bug with <a href="#fSchema-api-clearCache"><tt>clearCache()</tt></a> not properly reseting the tables and databases list <span class="date">5/13/09</span></td></tr><tr><th>1.0.0b16</th><td>Backwards Compatibility Break - setCacheFile() changed to <a href="#fSchema-api-enableCaching"><tt>enableCaching()</tt></a> and now requires an <a href="#fCache">fCache</a> object, flushInfo() renamed to <a href="#fSchema-api-clearCache"><tt>clearCache()</tt></a>, added Oracle support <span class="date">5/4/09</span></td></tr><tr><th>1.0.0b15</th><td>Added support for the three different types of identifier quoting in SQLite <span class="date">3/28/09</span></td></tr><tr><th>1.0.0b14</th><td>Added support for MySQL column definitions containing the COLLATE keyword <span class="date">3/28/09</span></td></tr><tr><th>1.0.0b13</th><td>Fixed a bug with detecting PostgreSQL columns having both a CHECK constraint and a UNIQUE constraint <span class="date">2/27/09</span></td></tr><tr><th>1.0.0b12</th><td>Fixed detection of multi-column primary keys in MySQL <span class="date">2/27/09</span></td></tr><tr><th>1.0.0b11</th><td>Fixed an issue parsing MySQL tables with comments <span class="date">2/25/09</span></td></tr><tr><th>1.0.0b10</th><td>Added the <a href="#fSchema-api-getDatabases"><tt>getDatabases()</tt></a> method <span class="date">2/24/09</span></td></tr><tr><th>1.0.0b9</th><td>Now detects unsigned and zerofill MySQL data types that do not have a parenthetical part <span class="date">2/16/09</span></td></tr><tr><th>1.0.0b8</th><td>Mapped the MySQL data type <tt>'set'</tt> to <tt>'varchar'</tt>, however valid values are not implemented yet <span class="date">2/1/09</span></td></tr><tr><th>1.0.0b7</th><td>Fixed a bug with detecting MySQL timestamp columns <span class="date">1/28/09</span></td></tr><tr><th>1.0.0b6</th><td>Fixed a bug with detecting MySQL columns that accept <tt>NULL</tt> <span class="date">1/19/09</span></td></tr><tr><th>1.0.0b5</th><td>setColumnInfo(): fixed a bug with not grabbing the real database schema first, made general improvements <span class="date">1/19/09</span></td></tr><tr><th>1.0.0b4</th><td>Added support for MySQL binary data types, numeric data type options unsigned and zerofill, and per-column character set definitions <span class="date">1/17/09</span></td></tr><tr><th>1.0.0b3</th><td>Fixed detection of the data type of MySQL timestamp columns, added support for dynamic default date/time values <span class="date">1/11/09</span></td></tr><tr><th>1.0.0b2</th><td>Fixed a bug with detecting multi-column unique keys in MySQL <span class="date">1/3/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">9/25/07</span></td></tr></table></div>
<div class="class_methods" id="fSchema-api-class_methods">
<h4>Methods</h4>
			  			  									<!-- start method -->
			<h5 id="fSchema-api-__construct" class="method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the database</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fSchema">fSchema</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fDatabase">fDatabase</a></span> <span class="php-var">$database</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fDatabase">fDatabase</a></td>
				<td class="param_name">$database</td>
				<td class="param_description">The <a href="#fDatabase">fDatabase</a> instance</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fSchema-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fSchema-api-clearCache" class="protected method"><span class="resolution">-></span><span class="name">clearCache()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Clears all of the schema info out of the object and, if set, the <a href="#fCache">fCache</a> object</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">clearCache</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fSchema-api-enableCaching" class="method"><span class="resolution">-></span><span class="name">enableCaching()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the schema to be cached to the <a href="#fCache">fCache</a> object specified</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">enableCaching</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fCache">fCache</a></span> <span class="php-var">$cache</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$key_token</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fCache">fCache</a></td>
				<td class="param_name">$cache</td>
				<td class="param_description">The cache to cache to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key_token</td>
				<td class="param_description">Internal use only! (this will be used in the cache key to uniquely identify the cache for this <a href="#fSchema">fSchema</a> object)</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fSchema-api-getColumnInfo" class="method"><span class="resolution">-></span><span class="name">getColumnInfo()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns column information for the table specified</p>
								<p>If only a table is specified, column info is in the following format:</p><pre class="block "><code>array(
    (string) {column name} => array(
        'type'           => (string)  {data type},
        'placeholder'    => (string)  {fDatabase::escape() placeholder for this data type},
        'not_null'       => (boolean) {if value can't be null},
        'default'        => (mixed)   {the default value},
        'valid_values'   => (array)   {the valid values for a varchar field},
        'max_length'     => (integer) {the maximum length in a varchar field},
        'min_value'      => (numeric) {the minimum value for an integer/float field},
        'max_value'      => (numeric) {the maximum value for an integer/float field},
        'decimal_places' => (integer) {the number of decimal places for a decimal/numeric/money/smallmoney field},
        'auto_increment' => (boolean) {if the integer primary key column is a serial/autoincrement/auto_increment/indentity column},
        'comment'        => (string)  {the SQL comment/description for the column}
    ), ...
)</code></pre><p>If a table and column are specified, column info is in the following format:</p><pre class="block "><code>array(
    'type'           => (string)  {data type},
    'placeholder'    => (string)  {fDatabase::escape() placeholder for this data type},
    'not_null'       => (boolean) {if value can't be null},
    'default'        => (mixed)   {the default value-may contain special strings CURRENT_TIMESTAMP, CURRENT_TIME or CURRENT_DATE},
    'valid_values'   => (array)   {the valid values for a varchar field},
    'max_length'     => (integer) {the maximum length in a char/varchar field},
    'min_value'      => (fNumber) {the minimum value for an integer/float field},
    'max_value'      => (fNumber) {the maximum value for an integer/float field},
    'decimal_places' => (integer) {the number of decimal places for a decimal/numeric/money/smallmoney field},
    'auto_increment' => (boolean) {if the integer primary key column is a serial/autoincrement/auto_increment/indentity column},
    'comment'        => (string)  {the SQL comment/description for the column}
)</code></pre><p>If a table, column and element are specified, returned value is the single element specified.</p><p>The <tt>'type'</tt> element is homogenized to a value from the following list:  </p><ul><li><tt>'varchar'</tt></li><li><tt>'char'</tt></li><li><tt>'text'</tt></li><li><tt>'integer'</tt></li><li><tt>'float'</tt></li><li><tt>'timestamp'</tt></li><li><tt>'date'</tt></li><li><tt>'time'</tt></li><li><tt>'boolean'</tt></li><li><tt>'blob'</tt></li></ul><p>Please note that MySQL reports boolean data types as <tt>tinyint(1)</tt>, so  all <tt>tinyint(1)</tt> columns will be listed as <tt>boolean</tt>. This can be fixed  by calling:</p><pre class="block php"><code>$schema->setColumnInfoOverride(
    array(
        'type'        => 'integer',
        'placeholder' => '%i',
        'default'     => {default integer},
        'min_value'   => new fNumber(-128),
        'max_value'   => new fNumber(127)
    ),
    '{table name}',
    '{column name}'
);</code></pre><p>The <tt>'comment'</tt> element pulls from the database's column comment facility  with the exception of MSSQL and SQLite.</p><p>For MSSQL, the comment is pulled from the <tt>MS_Description</tt> extended  property, which can be added via the <tt>Description</tt> field in SQL Server  Management Studio, or via the <tt>sp_addextendedproperty</tt> stored procedure.</p><p>For SQLite, the comment is extracted from any SQL comment that is placed  at the end of the line on which the column is defined:</p><pre class="block sql"><code>CREATE TABLE users (
    user_id INTEGER PRIMARY KEY AUTOINCREMENT,
    name VARCHAR(200) NOT NULL -- This is the full name
);</code></pre><p>For the SQLite <tt>users</tt> table defined above, the <tt>name</tt> column will have  the comment <tt>This is the full name</tt>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">getColumnInfo</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$table</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$element</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$table</td>
				<td class="param_description">The table to get the column info for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to get the info for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$element</td>
				<td class="param_description">The element to return: <tt>'type'</tt>, <tt>'placeholder'</tt>, <tt>'not_null'</tt>, <tt>'default'</tt>, <tt>'valid_values'</tt>, <tt>'max_length'</tt>, <tt>'min_value'</tt>, <tt>'max_value'</tt>, <tt>'decimal_places'</tt>, <tt>'auto_increment'</tt>, <tt>'comment'</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The column info for the table/column/element specified - see method description for format
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fSchema-api-getDatabases" class="method"><span class="resolution">-></span><span class="name">getDatabases()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the databases on the current server</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">getDatabases</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The databases on the current server
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fSchema-api-getKeys" class="method"><span class="resolution">-></span><span class="name">getKeys()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns a list of primary key, foreign key and unique key constraints for the table specified</p>
								<p>The structure of the returned array is:</p><pre class="block "><code>array(
     'primary' => array(
         {column name}, ...
     ),
     'unique'  => array(
         array(
             {column name}, ...
         ), ...
     ),
     'foreign' => array(
         array(
             'column'         => {column name},
             'foreign_table'  => {foreign table name},
             'foreign_column' => {foreign column name},
             'on_delete'      => {the ON DELETE action: 'no_action', 'restrict', 'cascade', 'set_null', or 'set_default'},
             'on_update'      => {the ON UPDATE action: 'no_action', 'restrict', 'cascade', 'set_null', or 'set_default'}
         ), ...
     )
)</code></pre>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">getKeys</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$table</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$key_type</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$table</td>
				<td class="param_description">The table to return the keys for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key_type</td>
				<td class="param_description">The type of key to return: <tt>'primary'</tt>, <tt>'foreign'</tt>, <tt>'unique'</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 An array of all keys, or just the type specified - see method description for format
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fSchema-api-getRelationships" class="method"><span class="resolution">-></span><span class="name">getRelationships()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns a list of one-to-one, many-to-one, one-to-many and many-to-many relationships for the table specified</p>
								<p>The structure of the returned array is:</p><pre class="block "><code>array(
    'one-to-one' => array(
        array(
            'table'          => (string) {the name of the table this relationship is for},
            'column'         => (string) {the column in the specified table},
            'related_table'  => (string) {the related table},
            'related_column' => (string) {the related column},
            'on_delete'      => (string) {the ON DELETE action: 'no_action', 'restrict', 'cascade', 'set_null', or 'set_default'},
            'on_update'      => (string) {the ON UPDATE action: 'no_action', 'restrict', 'cascade', 'set_null', or 'set_default'}
        ), ...
    ),
    'many-to-one' => array(
        array(
            'table'          => (string) {the name of the table this relationship is for},
            'column'         => (string) {the column in the specified table},
            'related_table'  => (string) {the related table},
            'related_column' => (string) {the related column}
        ), ...
    ),
    'one-to-many' => array(
        array(
            'table'          => (string) {the name of the table this relationship is for},
            'column'         => (string) {the column in the specified table},
            'related_table'  => (string) {the related table},
            'related_column' => (string) {the related column},
            'on_delete'      => (string) {the ON DELETE action: 'no_action', 'restrict', 'cascade', 'set_null', or 'set_default'},
            'on_update'      => (string) {the ON UPDATE action: 'no_action', 'restrict', 'cascade', 'set_null', or 'set_default'}
        ), ...
    ),
    'many-to-many' => array(
        array(
            'table'               => (string) {the name of the table this relationship is for},
            'column'              => (string) {the column in the specified table},
            'related_table'       => (string) {the related table},
            'related_column'      => (string) {the related column},
            'join_table'          => (string) {the table that joins the specified table to the related table},
            'join_column'         => (string) {the column in the join table that references 'column'},
            'join_related_column' => (string) {the column in the join table that references 'related_column'},
            'on_delete'           => (string) {the ON DELETE action: 'no_action', 'restrict', 'cascade', 'set_null', or 'set_default'},
            'on_update'           => (string) {the ON UPDATE action: 'no_action', 'restrict', 'cascade', 'set_null', or 'set_default'}
        ), ...
    )
)</code></pre>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">getRelationships</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$table</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$relationship_type</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$table</td>
				<td class="param_description">The table to return the relationships for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$relationship_type</td>
				<td class="param_description">The type of relationship to return: <tt>'one-to-one'</tt>, <tt>'many-to-one'</tt>, <tt>'one-to-many'</tt>, <tt>'many-to-many'</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 An array of all relationships, or just the type specified - see method description for format
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fSchema-api-getTables" class="method"><span class="resolution">-></span><span class="name">getTables()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the tables in the current database</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">getTables</span><span class="php-brackets">(</span> <span class="php-vartype">boolean|string</span> <span class="php-var">$creation_order</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean|string</td>
				<td class="param_name">$creation_order</td>
				<td class="param_description"><tt>TRUE</tt> to return in a valid table creation order, or a table name to return that table and any tables that depend on it, in table creation order</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The tables in the current database, all converted to lowercase
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fSchema-api-setColumnInfoOverride" class="method"><span class="resolution">-></span><span class="name">setColumnInfoOverride()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Allows overriding of column info</p>
								<p>Performs an array merge with the column info detected from the database.</p><p>To erase a whole table, set the <tt>$column_info</tt> to <tt>NULL</tt>. To erase a  column, set the <tt>$column_info</tt> for that column to <tt>NULL</tt>.</p><p>If the <tt>$column_info</tt> parameter is not <tt>NULL</tt>, it should be an  associative array containing one or more of the following keys. Please  see <a href="#fSchema-api-getColumnInfo"><tt>getColumnInfo()</tt></a> for a description of each.</p><ul><li><tt>'type'</tt></li><li><tt>'placeholder'</tt></li><li><tt>'not_null'</tt></li><li><tt>'default'</tt></li><li><tt>'valid_values'</tt></li><li><tt>'max_length'</tt></li><li><tt>'min_value'</tt></li><li><tt>'max_value'</tt></li><li><tt>'decimal_places'</tt></li><li><tt>'auto_increment'</tt></li><li><tt>'comment'</tt></li></ul><p>The following keys may be set to <tt>NULL</tt>:</p><ul><li><tt>'not_null'</tt></li><li><tt>'default'</tt></li><li><tt>'valid_values'</tt></li><li><tt>'max_length'</tt></li><li><tt>'min_value'</tt></li><li><tt>'max_value'</tt></li><li><tt>'decimal_places'</tt></li><li><tt>'comment'</tt></li></ul><p>The key <tt>'auto_increment'</tt> should be a boolean.</p><p>The <tt>'type'</tt> key should be one of:</p><ul><li><tt>'blob'</tt></li><li><tt>'boolean'</tt></li><li><tt>'char'</tt></li><li><tt>'date'</tt></li><li><tt>'float'</tt></li><li><tt>'integer'</tt></li><li><tt>'text'</tt></li><li><tt>'time'</tt></li><li><tt>'timestamp'</tt></li><li><tt>'varchar'</tt></li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setColumnInfoOverride</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$column_info</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$table</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$column</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$column_info</td>
				<td class="param_description">The modified column info - see method description for format</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$table</td>
				<td class="param_description">The table to override</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$column</td>
				<td class="param_description">The column to override</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fSchema-api-setKeysOverride" class="method"><span class="resolution">-></span><span class="name">setKeysOverride()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Allows overriding of key info. Replaces existing info, so be sure to provide full key info for type selected or all types.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setKeysOverride</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$keys</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$table</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$key_type</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$keys</td>
				<td class="param_description">The modified keys - see <a href="#fSchema-api-getKeys"><tt>getKeys()</tt></a> for format</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$table</td>
				<td class="param_description">The table to override</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key_type</td>
				<td class="param_description">The key type to override: <tt>'primary'</tt>, <tt>'foreign'</tt>, <tt>'unique'</tt></td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="fSession">fSession</h2>
<div class="sidebar">
<h3 id="fSession-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fSession">Class Documentation</a></strong></li>
<li><a href="#fSession-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fSession-docs-ConfigurationSecurity">Configuration (Security)</a>
<ul>
<li><a href="#fSession-docs-SessionFilePath">Session File Path</a></li>
<li><a href="#fSession-docs-Duration">Duration</a></li>
<li><a href="#fSession-docs-SpanningSubdomains">Spanning Subdomains</a></li>
</ul>
</li>
<li><a href="#fSession-docs-PreventingSessionFixationSecurity">Preventing Session Fixation (Security)</a></li>
<li><a href="#fSession-docs-ControllingtheSession">Controlling the Session</a>
<ul>
<li><a href="#fSession-docs-Opening">Opening</a></li>
<li><a href="#fSession-docs-Closing">Closing</a></li>
<li><a href="#fSession-docs-Destroying">Destroying</a></li>
</ul>
</li>
<li><a href="#fSession-docs-KeepingUsersLoggedIn">Keeping Users Logged In</a></li>
<li><a href="#fSession-docs-StoringandRetrievingValues">Storing and Retrieving Values</a></li>
<li><a href="#fSession-docs-DeletingValues">Deleting Values</a></li>
<li><a href="#fSession-docs-AddingandRemovingValues">Adding and Removing Values</a></li>
<li><a href="#fSession-docs-ArrayDereferencing">Array Dereferencing</a></li>
</ul>
</div>

<p>
The fSession class provides an enhanced interface to PHPs native session handling and <code>$_SESSION</code> superglobal features.
</p>

<h3 id="fSession-docs-ConfigurationSecurity">Configuration (Security)</h3>

<p>
There are three options for configuring the session, the <a href="#fSession-api-setPath"><code>setPath()</code></a>, <a href="#fSession-api-setLength"><code>setLength()</code></a> and <a href="#fSession-api-ignoreSubdomain"><code>ignoreSubdomain()</code></a> static methods. All must be called before any other fSession methods.
</p>

<h4 id="fSession-docs-SessionFilePath">Session File Path</h4>

<p>
The most important method to call when setting up a site is <a href="#fSession-api-setPath"><code>setPath()</code></a>. This static method accepts a single parameter, the <code>$directory</code> to save all session files in. The directory specified must be writable by the web server, and should not contain anything except for session files because the session manager will delete old files after the predetermined session time has expired.
</p>

<p>
By default, all sites on a server use the same temporary directory to store the session files. This opens the opportunity for cross-site session transfer since a valid session ID can be pasted from from one session cookie to another. By setting the session directory per site, this type of attack is prevented. For additional security, it is wise to set the session directory to a location that is not readable by other users so they can not find it and set their session directory to the same place.
</p>
<pre class="block php"><code>fSession::setPath('/path/to/private/writable/dir');</code></pre>

<h4 id="fSession-docs-Duration">Duration</h4>

<p>
The static method <code>setLength()</code> allows you to set the minimum length of the session, using English descriptions of a timespan. Note that the minimum length, not the exact length, is specified since the session garbage collector uses a probabilistic approach to cleaning up session data. <em>If the session length is set, the session directory should also be set via <a href="#fSession-api-setPath"><code>setPath()</code></a> or else other sites on the server may delete session files that they consider &quot;old&quot;, but that have not expired for the current site.</em>
</p>

<p>
Here are a few example of setting the session length:
</p>
<pre class="block php"><code>fSession::setLength('30 minutes');
fSession::setLength('1 hour');
fSession::setLength('1 day 2 hours');</code></pre>

<p>
 There is a second, optional, parameter <code>$persistent_timespan</code> which is discussed in the section <a href="#fSession-docs-KeepingUsersLoggedIn">Keeping Users Logged In</a>.
</p>

<h4 id="fSession-docs-SpanningSubdomains">Spanning Subdomains</h4>

<p>
By default PHP will only allow access to the <code>$_SESSION</code> superglobal values by pages on the same subdomain, such that <code>www.example.com</code> could access the session, but <code>example.com</code> could not. Calling <code>ignoreSubdomain()</code> removes that restriction and allows access to any subdomain.
</p>

<h3 id="fSession-docs-PreventingSessionFixationSecurity">Preventing Session Fixation (Security)</h3>

<p>
Session fixation is an exploit where an attacker provides a user with a known session id and then uses the same session id to access their authentication session once they have logged in. Below is a simple example of a URL that allows the attacker to know the users session id:
</p>
<pre><code>http://example.com/login.php?PHPSESSID=abcdef1234567890</code></pre>

<p>
 After the unsuspecting user has logged into the site, the attacker simply needs to set the same session id in his browser and hell have full access to the users session and information.
</p>

<p>
The fSession class prevents against such session fixation attacks by automatically setting the <code>session.use_cookies</code> and <code>session.use_only_cookies</code> ini settings so that session ids will not be accepted in a query string or <code>POST</code> data, but only in cookies. 
</p>

<p>
When using the <a href="#fAuthorization">fAuthorization</a> class, an additional layer of protected is added because all operations that add user information to the session will <a href="#fAuthorization-docs-PreventingPrivilegeEscalationSecurity">automatically regenerate the session id</a>. This way even if an attacker was able to influence the session id, it will change once any useful information is present.
</p>

<h3 id="fSession-docs-ControllingtheSession">Controlling the Session</h3>

<p>
A session can be in one of three states: open, closed, and non-existent. An open session can have data written to the <code>$_SESSION</code> superglobal. A closed session retains all information, however the information can not be read or written. A non-existent session is exactly that, not present at all.
</p>

<h4 id="fSession-docs-Opening">Opening</h4>

<p>
The session is automatically opened when any session method such as <code>set()</code>, <code>get()</code> or <code>destroy()</code> is called. It can also be opened explicitly by calling the static method <a href="#fSession-api-open"><code>open()</code></a>. In the case that a <code>Cannot send session cache limiter - headers already sent</code> warning is generated, be sure to call <code>open()</code> before any output is sent to the browser. 
</p>
<pre class="block php"><code>// If you arent using the session until after content has been output,
// be sure to explicitly open the session before any content is echoed
fSession::open();</code></pre>

<h4 id="fSession-docs-Closing">Closing</h4>

<p>
To close the session, simply call <a href="#fSession-api-close"><code>close()</code></a>. The session information can be erased by calling <a href="#fSession-api-destroy"><code>destroy()</code></a>.
</p>

<p>
During normal usage of (see <a href="#fSession-docs-StoringandRetrievingValues">Storing and Retrieving Values</a> for details) you can read and write throughout the script or page. However, if <code>close()</code> has been called on a page, no data can be read from or written to the session cache after that point.
</p>

<p>
There is, however, some benefit to closing the session once you are done, rather than waiting for the page to finish execution and the session to be closed automatically. The biggest limitation of PHP is that only a single page can be reading from or writing to a single session. This means a user with multiple browsers or tabs open to a site will only be able to load data from one page at a time. Any other pages being requested that need session data will have to wait until the first page is complete. On most sites with fast-loading pages this may not be an issue, however if any pages take any significant amount of time to the load, users may notice the site will become unresponsive.
</p>
<pre class="block php"><code>// If you are about to execute a time-intensive block of code and no longer need the seesion, close it
fSession::close();</code></pre>

<h4 id="fSession-docs-Destroying">Destroying</h4>

<p>
Finally, the <code>destroy()</code> method will completely erase all data from a session and destroy the session id, preventing it from being opened again. This method is most useful when a logged-in user logs out.
</p>
<pre class="block php"><code>// If a user is logging out, remove the information you have stored about them
fSession::destroy();</code></pre>

<h3 id="fSession-docs-KeepingUsersLoggedIn">Keeping Users Logged In</h3>

<p>
On most sites that have a user login system, it will often be desirable to provide an option for a user to stay logged in even after their browser closes. Obviously this can be a security issue, however many large websites control the functionality via a checkbox in the login form that is labelled Keep me logged in. This will usually keep a user logged in for a week or two.
</p>

<p>
To implement this is Flourish, the static method <a href="#fSession-api-setLength">fSession::setLength()</a> allows for an optional second parameter, <code>$persistent_timespan</code>, which enables persistent logins and sets their length. <em>Whenever using this functionality please be sure to set a <a href="#fSession-docs-SessionFilePath">custom session file path</a>.</em>
</p>
<pre class="block php"><code>fSession::setLength('30 minutes', '1 week');</code></pre>

<p>
 This will <strong>not</strong> cause all users to stay logged in for a week. The session files will only be garbage collected after a week, but fSession uses a timestamp in the session superglobal to log normal sessions out after 30 minutes.
</p>

<p>
To enable a user to stay logged in for the whole <code>$persistent_timespan</code> and to stay logged in across browser restarts, the static method <a href="#fSession-api-enablePersistence">fSession::enablePersistence()</a> must be called when they log in. Here is an example:
</p>
<pre class="block php"><code>if ($login == 'test' &amp;&amp; fCryptography::checkPasswordHash($password, $hash)) {
    fAuthorization::setUserToken('test');
    if (fRequest::get('keep_me_logged_in', 'boolean')) {
        fSession::enablePersistence();
    }
}</code></pre>

<p>
 <em>Please note that <code>setLength()</code> must be called before <code>enablePersistence()</code>.</em>
</p>

<h3 id="fSession-docs-StoringandRetrievingValues">Storing and Retrieving Values</h3>

<p>
Now that we have discussed how to control the session, lets get into the heart of the matter, storing and retrieving values. There are two methods available to accomplish this task, <a href="#fSession-api-set"><code>set()</code></a> and <a href="#fSession-api-get"><code>get()</code></a>.
</p>

<p>
The <a href="#fSession-api-set"><code>set()</code></a> method takes two parameters, <code>$key</code> and <code>$value</code>. In a fairly straight-forward manner, <code>$key</code> specifies what identifier to save the <code>$value</code> under.
</p>

<p>
The default prefix is <code>'fSession::'</code>. It is recommended that under normal use the prefix is not changed. A logical place to change the prefix would be for values specific to another class. For example, the <a href="#fAuthorization">fAuthorization</a> class changes the prefix to that all authorization-related session data does not conflict with anything a developer may add.
</p>

<p>
Here are some examples of adding data to the session:
</p>
<pre class="block php"><code>// This is equivalent to $_SESSION['fSession::current_user_id'] = 5;
fSession::set('current_user_id', 5);
fSession::set('last_viewed_article', 42);

// Using the prefix here could allow us to not worry about overwriting values
// This is equivalent to $_SESSION['forum::current_user_id'] = 2;
fSession::set('current_user_id', 2, 'forum::');</code></pre>

<p>
 Hand-in-hand with the <code>set()</code> method is <a href="#fSession-api-get"><code>get()</code></a>. <code>get()</code> allows retrieval of session values with a twist. The first parameter, <code>$key</code> specifies what value to retrieve. The second (optional) parameter is <code>$default_value</code>. This value will be returned if the requested <code>$key</code> has no value set. Here are some example of getting values out of the session:
</p>
<pre class="block php"><code>$current_user_id = fSession::get('current_user_id');
$user_groups     = fSession::get('user_groups', array(1,2));</code></pre>

<h3 id="fSession-docs-DeletingValues">Deleting Values</h3>

<p>
If you wish to unset a session value, simply use the <a href="#fSession-api-delete"><code>delete()</code></a> method. It accepts the name of the <code>$key</code> and returns the value:
</p>
<pre class="block php"><code>$name = fSession::delete('name');</code></pre>

<p>
 An optional second parameter allows providing a <code>$default_value</code> to be returned if the key specified is not set.
</p>
<pre class="block php"><code>$name = fSession::delete('name', 'No name specified');</code></pre>

<p>
 To delete all keys for a specific prefix, use the <a href="#fSession-api-clear"><code>clear()</code></a> method:
</p>
<pre class="block php"><code>// Clear the default fSession:: prefix
fSession::clear();

// Clear all keys that start with MyPrefix_
fSession::clear('MyPrefix_');</code></pre>

<h3 id="fSession-docs-AddingandRemovingValues">Adding and Removing Values</h3>

<p>
The static methods <a href="#fSession-api-add"><code>add()</code></a> and <a href="#fSession-api-remove"><code>remove()</code></a> allow adding and removing values from arrays stored in the session. <a href="#fSession-api-add"><code>add()</code></a> accepts a <code>$key</code> and the <code>$value</code> to add. If the key is not an array, an array will be created and the new value will be added.
</p>
<pre class="block php"><code>// Add John Smith at the end of users
fSession::add('users', 'John Smith');</code></pre>

<p>
 The new value will be added at the end of the array unless the optional third parameter, <code>$beginning</code>, is set to <code>TRUE</code>.
</p>
<pre class="block php"><code>// Add Jane Smith at the beginning of users
fSession::add('users', 'Jane Smith', TRUE);</code></pre>

<p>
 <a href="#fSession-api-remove"><code>remove()</code></a> accepts one parameter, the <code>$key</code> to remove a value from, and returns the removed value. The value will be removed from the end of the array unless the second optional parameter, <code>$beginning</code>, is set to <code>TRUE</code>.
</p>
<pre class="block php"><code>$last_value  = fSession::remove('users');
$first_value = fSession::remove('users', TRUE);</code></pre>

<h3 id="fSession-docs-ArrayDereferencing">Array Dereferencing</h3>

<p>
When a value stored in the session is an array, it is possible to use array dereference syntax in the element name to access a specific array key. This syntax works with <a href="#fSession-api-set"><code>set()</code></a>, <a href="#fSession-api-get"><code>get()</code></a>, <a href="#fSession-api-delete"><code>delete()</code></a>, <a href="#fSession-api-add"><code>add()</code></a> and <a href="#fSession-api-remove"><code>remove()</code></a>.
</p>
<pre class="block php"><code>fSession::set(
    'user',
    array(
        'first_name' =&gt; 'John',
        'last_name'  =&gt; 'Smith'
    )
);
// This will echo John
echo fSession::get('user[first_name]');</code></pre>

<p>
 Array dereferencing can be any number of layers deep.
</p>
<pre class="block php"><code>echo fSession::get('user[groups][0][name]');</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fSession-api">fSession API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fSession">Class Documentation</a></li>
		<li><strong><a href="#fSession-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fSession-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fSession-api-add">add()</a></li>
	  			<li><a href="#fSession-api-clear">clear()</a></li>
	  			<li><a href="#fSession-api-close">close()</a></li>
	  			<li class="protected"><a href="#fSession-api-closeCache">closeCache()</a></li>
	  			<li><a href="#fSession-api-delete">delete()</a></li>
	  			<li><a href="#fSession-api-destroy">destroy()</a></li>
	  			<li class="protected"><a href="#fSession-api-destroyCache">destroyCache()</a></li>
	  			<li><a href="#fSession-api-enablePersistence">enablePersistence()</a></li>
	  			<li class="protected"><a href="#fSession-api-gcCache">gcCache()</a></li>
	  			<li><a href="#fSession-api-get">get()</a></li>
	  			<li><a href="#fSession-api-ignoreSubdomain">ignoreSubdomain()</a></li>
	  			<li><a href="#fSession-api-open">open()</a></li>
	  			<li class="protected"><a href="#fSession-api-openCache">openCache()</a></li>
	  			<li class="protected"><a href="#fSession-api-readCache">readCache()</a></li>
	  			<li class="protected"><a href="#fSession-api-regenerateID">regenerateID()</a></li>
	  			<li><a href="#fSession-api-remove">remove()</a></li>
	  			<li class="protected"><a href="#fSession-api-reset">reset()</a></li>
	  			<li><a href="#fSession-api-set">set()</a></li>
	  			<li><a href="#fSession-api-setBackend">setBackend()</a></li>
	  			<li><a href="#fSession-api-setLength">setLength()</a></li>
	  			<li><a href="#fSession-api-setPath">setPath()</a></li>
	  			<li class="protected"><a href="#fSession-api-writeCache">writeCache()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fDirectory">fDirectory</a></li>
		<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fUnexpectedException">fUnexpectedException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fAuthorization">fAuthorization</a></li>
		<li><a href="#fCRUD">fCRUD</a></li>
		<li><a href="#fMessaging">fMessaging</a></li>
		<li><a href="#fRequest">fRequest</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b22</span></div>
<p class="short_description">Wraps the session control functions and the <tt>$_SESSION</tt> superglobal for a more consistent and safer API</p>
<div class="description"><p>A <tt>Cannot send session cache limiter</tt> warning will be triggered if <a href="#fSession-api-open"><tt>open()</tt></a>,  <a href="#fSession-api-add"><tt>add()</tt></a>, <a href="#fSession-api-clear"><tt>clear()</tt></a>, <a href="#fSession-api-delete"><tt>delete()</tt></a>, <a href="#fSession-api-get"><tt>get()</tt></a> or <a href="#fSession-api-set"><tt>set()</tt></a> is called after output has  been sent to the browser. To prevent such a warning, explicitly call <a href="#fSession-api-open"><tt>open()</tt></a>  before generating any output.</p></div>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b22</th><td>Fixed <a href="#fSession-api-destroy"><tt>destroy()</tt></a> to no longer call <a href="#fSession-api-regenerateID"><tt>regenerateID()</tt></a> since it fails after a session is destroyed <span class="date">9/20/12</span></td></tr><tr><th>1.0.0b21</th><td>Changed <a href="#fSession-api-regenerateID"><tt>regenerateID()</tt></a> to not fail silently if the session has not been opened yet <span class="date">9/15/12</span></td></tr><tr><th>1.0.0b20</th><td>Fixed bugs with <a href="#fSession-api-reset"><tt>reset()</tt></a> introduced in 1.0.0b19 <span class="date">8/23/11</span></td></tr><tr><th>1.0.0b19</th><td>Fixed some session warning messages for PHP 5.1.6 <span class="date">7/29/11</span></td></tr><tr><th>1.0.0b18</th><td>Added support for storing session data in memcache, redis and databases using <a href="#fCache">fCache</a> and <a href="#fSession-api-setBackend"><tt>setBackend()</tt></a> <span class="date">6/21/11</span></td></tr><tr><th>1.0.0b17</th><td>Updated <a href="#fSession-api-ignoreSubdomain"><tt>ignoreSubdomain()</tt></a> to use <tt>$_SERVER['HTTP_HOST']</tt> when <tt>$_SERVER['SERVER_NAME']</tt> is not set <span class="date">2/1/11</span></td></tr><tr><th>1.0.0b16</th><td>Changed <a href="#fSession-api-delete"><tt>delete()</tt></a> to return the value of the key being deleted <span class="date">9/19/10</span></td></tr><tr><th>1.0.0b15</th><td>Added documentation about <tt>[sub-key]</tt> syntax <span class="date">9/12/10</span></td></tr><tr><th>1.0.0b14</th><td>Backwards Compatibility Break - <a href="#fSession-api-add"><tt>add()</tt></a>, <a href="#fSession-api-delete"><tt>delete()</tt></a>, <a href="#fSession-api-get"><tt>get()</tt></a> and <a href="#fSession-api-set"><tt>set()</tt></a> now interpret <tt>[</tt> and <tt>]</tt> as array shorthand and thus they can not be used in keys - added <tt>$beginning</tt> parameter to <a href="#fSession-api-add"><tt>add()</tt></a>, added <a href="#fSession-api-remove"><tt>remove()</tt></a> method <span class="date">9/12/10</span></td></tr><tr><th>1.0.0b13</th><td>Fixed a bug that prevented working with existing sessions since they did not have the <tt><a href="#fSession">fSession</a>::expires</tt> key <span class="date">8/24/10</span></td></tr><tr><th>1.0.0b12</th><td>Changed <a href="#fSession-api-enablePersistence"><tt>enablePersistence()</tt></a> to always regenerate the session ID, which ensures the function works even if the ID has already been regenerated by fAuthorizaton <span class="date">8/21/10</span></td></tr><tr><th>1.0.0b11</th><td>Updated the class to make sure <a href="#fSession-api-enablePersistence"><tt>enablePersistence()</tt></a> is called after <a href="#fSession-api-ignoreSubdomain"><tt>ignoreSubdomain()</tt></a>, <a href="#fSession-api-setLength"><tt>setLength()</tt></a> and <a href="#fSession-api-setPath"><tt>setPath()</tt></a> <span class="date">5/29/10</span></td></tr><tr><th>1.0.0b10</th><td>Fixed some documentation bugs <span class="date">3/3/10</span></td></tr><tr><th>1.0.0b9</th><td>Fixed a bug in <a href="#fSession-api-destroy"><tt>destroy()</tt></a> where sessions weren't always being properly destroyed <span class="date">12/8/09</span></td></tr><tr><th>1.0.0b8</th><td>Fixed a bug that made the unit tests fail on PHP 5.1 <span class="date">10/27/09</span></td></tr><tr><th>1.0.0b7</th><td>Backwards Compatibility Break - Removed the <tt>$prefix</tt> parameter from the methods <a href="#fSession-api-delete"><tt>delete()</tt></a>, <a href="#fSession-api-get"><tt>get()</tt></a> and <a href="#fSession-api-set"><tt>set()</tt></a> - added the methods <a href="#fSession-api-add"><tt>add()</tt></a>, <a href="#fSession-api-enablePersistence"><tt>enablePersistence()</tt></a>, <a href="#fSession-api-regenerateID"><tt>regenerateID()</tt></a> <span class="date">10/23/09</span></td></tr><tr><th>1.0.0b6</th><td>Backwards Compatibility Break - the first parameter of <a href="#fSession-api-clear"><tt>clear()</tt></a> was removed, use <a href="#fSession-api-delete"><tt>delete()</tt></a> instead <span class="date">5/8/09</span></td></tr><tr><th>1.0.0b5</th><td>Added documentation about session cache limiter warnings <span class="date">5/4/09</span></td></tr><tr><th>1.0.0b4</th><td>The class now works with existing sessions <span class="date">5/4/09</span></td></tr><tr><th>1.0.0b3</th><td>Fixed <a href="#fSession-api-clear"><tt>clear()</tt></a> to properly handle when <tt>$key</tt> is <tt>NULL</tt> <span class="date">2/5/09</span></td></tr><tr><th>1.0.0b2</th><td>Made <a href="#fSession-api-open"><tt>open()</tt></a> public, fixed some consistency issues with setting session options through the class <span class="date">1/6/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="class_methods static" id="fSession-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fSession-api-add" class="method static"><span class="resolution">::</span><span class="name">add()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Adds a value to an already-existing array value, or to a new array value</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">add</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$key</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$beginning</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key</td>
				<td class="param_description">The name to access the array under - array elements can be modified via <tt>[sub-key]</tt> syntax, and thus <tt>[</tt> and <tt>]</tt> can not be used in key names</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value to add to the array</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$beginning</td>
				<td class="param_description">If the value should be added to the beginning</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fSession-api-clear" class="method static"><span class="resolution">::</span><span class="name">clear()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Removes all session values with the provided prefix</p>
								<p>This method will not remove session variables used by this class, which  are prefixed with <tt><a href="#fSession">fSession</a>::</tt>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">clear</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$prefix</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$prefix</td>
				<td class="param_description">The prefix to clear all session values for</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fSession-api-close" class="method static"><span class="resolution">::</span><span class="name">close()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Closes the session for writing, allowing other pages to open the session</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">close</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fSession-api-closeCache" class="protected method static"><span class="resolution">::</span><span class="name">closeCache()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Callback to close the session</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">closeCache</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					If the operation succeeded
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fSession-api-delete" class="method static"><span class="resolution">::</span><span class="name">delete()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Deletes a value from the session</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">delete</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$key</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$default_value</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key</td>
				<td class="param_description">The key of the value to delete - array elements can be modified via <tt>[sub-key]</tt> syntax, and thus <tt>[</tt> and <tt>]</tt> can not be used in key names</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$default_value</td>
				<td class="param_description">The value to return if the <tt>$key</tt> is not set</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The value of the <tt>$key</tt> that was deleted
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fSession-api-destroy" class="method static"><span class="resolution">::</span><span class="name">destroy()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Destroys the session, removing all values</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">destroy</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fSession-api-destroyCache" class="protected method static"><span class="resolution">::</span><span class="name">destroyCache()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Callback to destroy a session</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">destroyCache</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$id</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$id</td>
				<td class="param_description">The session to destroy</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the operation succeeded
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fSession-api-enablePersistence" class="method static"><span class="resolution">::</span><span class="name">enablePersistence()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Changed the session to use a time-based cookie instead of a session-based cookie</p>
								<p>The length of the time-based cookie is controlled by <a href="#fSession-api-setLength"><tt>setLength()</tt></a>. When  this method is called, a time-based cookie is used to store the session  ID. This means the session can persist browser restarts. Normally, a  session-based cookie is used, which is wiped when a browser restart  occurs.</p><p>This method should be called during the login process and will normally  be controlled by a checkbox or similar where the user can indicate if  they want to stay logged in for an extended period of time.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">enablePersistence</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fSession-api-gcCache" class="protected method static"><span class="resolution">::</span><span class="name">gcCache()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Callback to garbage-collect the session cache</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">gcCache</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					If the operation succeeded
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fSession-api-get" class="method static"><span class="resolution">::</span><span class="name">get()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Gets data from the <tt>$_SESSION</tt> superglobal</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$key</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$default_value</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key</td>
				<td class="param_description">The name to get the value for - array elements can be accessed via <tt>[sub-key]</tt> syntax, and thus <tt>[</tt> and <tt>]</tt> can not be used in key names</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$default_value</td>
				<td class="param_description">The default value to use if the requested key is not set</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The data element requested
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fSession-api-ignoreSubdomain" class="method static"><span class="resolution">::</span><span class="name">ignoreSubdomain()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets the session to run on the main domain, not just the specific subdomain currently being accessed</p>
								<p>This method should be called after any calls to  <a class="ext-link" href="http://php.net/session_set_cookie_params"><span class="icon"><tt>session_set_cookie_params()</tt></span></a>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">ignoreSubdomain</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fSession-api-open" class="method static"><span class="resolution">::</span><span class="name">open()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Opens the session for writing, is automatically called by clear(), get() and set()</p>
								<p>A <tt>Cannot send session cache limiter</tt> warning will be triggered if this,  <a href="#fSession-api-add"><tt>add()</tt></a>, <a href="#fSession-api-clear"><tt>clear()</tt></a>, <a href="#fSession-api-delete"><tt>delete()</tt></a>, <a href="#fSession-api-get"><tt>get()</tt></a> or <a href="#fSession-api-set"><tt>set()</tt></a> is called after output  has been sent to the browser. To prevent such a warning, explicitly call  this method before generating any output.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">open</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$cookie_only_session_id</span><span class="php-code">=</span>TRUE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$cookie_only_session_id</td>
				<td class="param_description">If the session id should only be allowed via cookie - this is a security issue and should only be set to <tt>FALSE</tt> when absolutely necessary</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fSession-api-openCache" class="protected method static"><span class="resolution">::</span><span class="name">openCache()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Callback to open the session</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">openCache</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					If the operation succeeded
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fSession-api-readCache" class="protected method static"><span class="resolution">::</span><span class="name">readCache()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Callback to read a session's values</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">readCache</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$id</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$id</td>
				<td class="param_description">The session to read</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The session's serialized data
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fSession-api-regenerateID" class="protected method static"><span class="resolution">::</span><span class="name">regenerateID()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Regenerates the session ID, but only once per script execution</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">regenerateID</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fSession-api-remove" class="method static"><span class="resolution">::</span><span class="name">remove()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Removes and returns the value from the end of an array value</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">remove</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$key</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$beginning</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key</td>
				<td class="param_description">The name of the element to remove the value from - array elements can be modified via <tt>[sub-key]</tt> syntax, and thus <tt>[</tt> and <tt>]</tt> can not be used in key names</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$beginning</td>
				<td class="param_description">If the value should be removed to the beginning</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The value that was removed
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fSession-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fSession-api-set" class="method static"><span class="resolution">::</span><span class="name">set()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets data to the <tt>$_SESSION</tt> superglobal</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">set</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$key</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key</td>
				<td class="param_description">The name to save the value under - array elements can be modified via <tt>[sub-key]</tt> syntax, and thus <tt>[</tt> and <tt>]</tt> can not be used in key names</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value to store</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fSession-api-setBackend" class="method static"><span class="resolution">::</span><span class="name">setBackend()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets an <a href="#fCache">fCache</a> object to store sessions in</p>
								<p>While any type of <a href="#fCache">fCache</a> backend should technically work, it would be  unwise to use the <tt>file</tt> and <tt>directory</tt> types. The <tt>file</tt> caching  backend stores all values in a single file, which would quickly become a  performance bottleneck and could cause data loss with many concurrent  users. The <tt>directory</tt> caching backend would not make sense since it is  the same general functionality as the default session handler, but it  would be slightly slower since it is written in PHP and not C.</p><p>It is recommended to set the <tt>serializer</tt> and <tt>unserializer</tt> <tt>$config</tt>  settings on the <a href="#fCache">fCache</a> object to <tt>string</tt> for the best performance and  minimal storage space.</p><p>For better performance, check out using the built-in session handlers  that are bundled with the following extensions: </p><ul><li><a class="ext-link" href="http://php.net/memcached.sessions"><span class="icon">memcached</span></a></li><li><a class="ext-link" href="http://php.net/memcache.examples-overview#example-3596"><span class="icon">memcache</span></a></li><li><a class="ext-link" href="https://github.com/nicolasff/phpredis"><span class="icon">redis</span></a></li></ul><p>The <a class="ext-link" href="http://pecl.php.net/package/igbinary"><span class="icon">igbinary</span></a> extension can  provide even more of a performance boost by storing serialized data in  binary format instead of as text.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setBackend</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fCache">fCache</a></span> <span class="php-var">$backend</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$key_prefix</span><span class="php-code">=</span>'' <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fCache">fCache</a></td>
				<td class="param_name">$backend</td>
				<td class="param_description">An <a href="#fCache">fCache</a> object to store session values in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$key_prefix</td>
				<td class="param_description">A prefix to add to all session IDs before storing them in the cache</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fSession-api-setLength" class="method static"><span class="resolution">::</span><span class="name">setLength()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets the minimum length of a session - PHP might not clean up the session data right away once this timespan has elapsed</p>
								<p>Please be sure to set a custom session path via <a href="#fSession-api-setPath"><tt>setPath()</tt></a> to ensure  another site on the server does not garbage collect the session files  from this site!</p><p>Both of the timespan can accept either a integer timespan in seconds,  or an english description of a timespan (e.g. <tt>'30 minutes'</tt>, <tt>'1 hour'</tt>,  <tt>'1 day 2 hours'</tt>).</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setLength</span><span class="php-brackets">(</span> <span class="php-vartype">string|integer</span> <span class="php-var">$normal_timespan</span><span class="php-code">,</span> <span class="php-vartype">string|integer</span> <span class="php-var">$persistent_timespan</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string|integer</td>
				<td class="param_name">$normal_timespan</td>
				<td class="param_description">The normal, session-based cookie, length for the session</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string|integer</td>
				<td class="param_name">$persistent_timespan</td>
				<td class="param_description">The persistent, timed-based cookie, length for the session - this is enabled by calling enabledPersistence() during login</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fSession-api-setPath" class="method static"><span class="resolution">::</span><span class="name">setPath()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets the path to store session files in</p>
								<p>This method should always be called with a non-standard directory  whenever <a href="#fSession-api-setLength"><tt>setLength()</tt></a> is called to ensure that another site on the  server does not garbage collect the session files for this site.</p><p>Standard session directories usually include <tt>/tmp</tt> and <tt>/var/tmp</tt>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setPath</span><span class="php-brackets">(</span> <span class="php-vartype">string|<a href="#fDirectory">fDirectory</a></span> <span class="php-var">$directory</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string|<a href="#fDirectory">fDirectory</a></td>
				<td class="param_name">$directory</td>
				<td class="param_description">The directory to store session files in</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fSession-api-writeCache" class="protected method static"><span class="resolution">::</span><span class="name">writeCache()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Callback to write a session's values</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">writeCache</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$id</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$values</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$id</td>
				<td class="param_description">The session to write</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$values</td>
				<td class="param_description">The serialized values</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The session's serialized data
				</p>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fStatement">fStatement</h2>
<div class="sidebar">
<h3 id="fStatement-docs-ClassResources" toc-skip="1">Class Resources </h3>

<ul>
<li><strong><a href="#fStatement">Class Documentation</a></strong></li>
<li><a href="#fStatement-api">API Reference</a></li>
</ul>

<h3 id="fStatement-docs-DatabaseClasses" toc-skip="1">Database Classes </h3>

<ul>
<li><a href="#fDatabase">fDatabase</a></li>
<li><a href="#fNoRowsException">fNoRowsException</a></li>
<li><a href="#fResult">fResult</a></li>
<li><a href="#fSQLException">fSQLException</a></li>
<li><a href="#fSQLTranslation">fSQLTranslation</a></li>
<li><a href="#fSQLSchemaTranslation">fSQLSchemaTranslation</a></li>
<li><a href="#fSchema">fSchema</a></li>
<li><strong>fStatement</strong></li>
<li><a href="#fUnbufferedResult">fUnbufferedResult</a></li>
</ul>
</div>

<p>
The fStatement class is an internal class used by <a href="#fDatabase">fDatabase</a> for representing a database prepared statement. There are no public methods for this class, all functionality is exposed through <a href="#fDatabase">fDatabase</a>. Please see <a href="#fDatabase">fDatabase</a> for more information about <a href="#fDatabase-docs-PreparedStatements">creating and using prepared statements</a>.
</p>

<p>
<em>This space intentionally left blank</em>
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fStatement-api">fStatement API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fStatement">Class Documentation</a></li>
		<li><strong><a href="#fStatement-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods">
<h4><a href="#fStatement-api-class_methods">Methods</a></h4>
<ul>
  			<li class="protected"><a href="#fStatement-api-__construct">__construct()</a></li>
	  			<li class="protected"><a href="#fStatement-api-__destruct">__destruct()</a></li>
	  			<li class="protected"><a href="#fStatement-api-__get">__get()</a></li>
	  			<li class="protected"><a href="#fStatement-api-execute">execute()</a></li>
	  			<li class="protected"><a href="#fStatement-api-executeQuery">executeQuery()</a></li>
	  			<li class="protected"><a href="#fStatement-api-executeUnbufferedQuery">executeUnbufferedQuery()</a></li>
	  			<li><a href="#fStatement-api-getSQL">getSQL()</a></li>
	  			<li><a href="#fStatement-api-getUntranslatedSQL">getUntranslatedSQL()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fSQLException">fSQLException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fDatabase">fDatabase</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b7</span></div>
<p class="short_description">Representation of a prepared statement for use with the <a href="#fDatabase">fDatabase</a> class</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b7</th><td>Fixed handling of arrays of values for <a href="#fStatement-api-execute"><tt>execute()</tt></a>, <a href="#fStatement-api-executeQuery"><tt>executeQuery()</tt></a> and <a href="#fStatement-api-executeUnbufferedQuery"><tt>executeUnbufferedQuery()</tt></a>, fixed escaping of values that become <tt>NULL</tt> <span class="date">5/9/11</span></td></tr><tr><th>1.0.0b6</th><td>Added <a href="#fStatement-api-getUntranslatedSQL"><tt>getUntranslatedSQL()</tt></a> <span class="date">1/9/11</span></td></tr><tr><th>1.0.0b5</th><td>Fixed an edge case where the mysqli extension would leak memory when fetching a <tt>TEXT</tt> or <tt>BLOB</tt> column <span class="date">8/28/10</span></td></tr><tr><th>1.0.0b4</th><td>Updated class to use <a href="#fCore-api-startErrorCapture"><tt>fCore::startErrorCapture()</tt></a> instead of <tt>error_reporting()</tt> <span class="date">8/9/10</span></td></tr><tr><th>1.0.0b3</th><td>Backwards Compatibility Break - removed ODBC support. Fixed UTF-8 support for the <tt>pdo_dblib</tt> extension. <span class="date">7/31/10</span></td></tr><tr><th>1.0.0b2</th><td>Added IBM DB2 support <span class="date">4/13/10</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">3/2/10</span></td></tr></table></div>
<div class="class_methods" id="fStatement-api-class_methods">
<h4>Methods</h4>
			  			  									<!-- start protected method -->
			<h5 id="fStatement-api-__construct" class="protected method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets up a prepared statement</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fStatement">fStatement</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fDatabase">fDatabase</a></span> <span class="php-var">$database</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$query</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$placeholders</span><span class="php-code">,</span> <span class="php-vartype"></span> <span class="php-var">$untranslated_sql</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$untranslated_query</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fDatabase">fDatabase</a></td>
				<td class="param_name">$database</td>
				<td class="param_description">The database object this result set was created from</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$query</td>
				<td class="param_description">The SQL statement to prepare</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$placeholders</td>
				<td class="param_description">The data type placeholders</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$untranslated_query</td>
				<td class="param_description">The original untranslated SQL, if applicable</td>
			  </tr>
						  <tr>
				<td class="param_data_type"></td>
				<td class="param_name">$untranslated_sql</td>
				<td class="param_description"></td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fStatement-api-__destruct" class="protected method"><span class="resolution">-></span><span class="name">__destruct()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Frees up the result object to save memory</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">__destruct</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fStatement-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fStatement-api-execute" class="protected method"><span class="resolution">-></span><span class="name">execute()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Executes the statement without returning a result</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">execute</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$params</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">&amp;$extra</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$different</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$params</td>
				<td class="param_description">The parameters for the statement</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">&amp;$extra</td>
				<td class="param_description">A variable to place extra information needed by some database extensions</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$different</td>
				<td class="param_description">If this statement is different than the last statement run on the <a href="#fDatabase">fDatabase</a> instance</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The (usually boolean) result of the extension function/method call
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fStatement-api-executeQuery" class="protected method"><span class="resolution">-></span><span class="name">executeQuery()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Executes the statement in buffered mode</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">executeQuery</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fResult">fResult</a></span> <span class="php-var">$result</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$params</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">&amp;$extra</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$different</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fResult">fResult</a></td>
				<td class="param_name">$result</td>
				<td class="param_description">The object to place the result into</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$params</td>
				<td class="param_description">The parameters for the statement</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">&amp;$extra</td>
				<td class="param_description">A variable to place extra information needed by some database extensions</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$different</td>
				<td class="param_description">If this statement is different than the last statement run on the <a href="#fDatabase">fDatabase</a> instance</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fStatement-api-executeUnbufferedQuery" class="protected method"><span class="resolution">-></span><span class="name">executeUnbufferedQuery()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Executes the statement in unbuffered mode (if possible)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">executeUnbufferedQuery</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fUnbufferedResult">fUnbufferedResult</a></span> <span class="php-var">$result</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$params</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">&amp;$extra</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$different</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fUnbufferedResult">fUnbufferedResult</a></td>
				<td class="param_name">$result</td>
				<td class="param_description">The object to place the result into</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$params</td>
				<td class="param_description">The parameters for the statement</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">&amp;$extra</td>
				<td class="param_description">A variable to place extra information needed by some database extensions</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$different</td>
				<td class="param_description">If this statement is different than the last statement run on the <a href="#fDatabase">fDatabase</a> instance</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fStatement-api-getSQL" class="method"><span class="resolution">-></span><span class="name">getSQL()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the SQL for the prepared statement</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getSQL</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The SQL statement
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fStatement-api-getUntranslatedSQL" class="method"><span class="resolution">-></span><span class="name">getUntranslatedSQL()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the untranslated SQL for the prepared statement</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getUntranslatedSQL</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The untranslated SQL statement
				</p>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="fTemplating">fTemplating</h2>
<div class="sidebar">
<h3 id="fTemplating-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fTemplating">Class Documentation</a></strong></li>
<li><a href="#fTemplating-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fTemplating-docs-Initialization">Initialization</a></li>
<li><a href="#fTemplating-docs-SettingGettingandDeletingElements">Setting, Getting and Deleting Elements</a></li>
<li><a href="#fTemplating-docs-AddingRemovingandFilteringElements">Adding, Removing and Filtering Elements</a></li>
<li><a href="#fTemplating-docs-EncodingandPreparingElements">Encoding and Preparing Elements</a></li>
<li><a href="#fTemplating-docs-ArrayDereferencing">Array Dereferencing</a></li>
<li><a href="#fTemplating-docs-PlacingElements">Placing Elements</a></li>
<li><a href="#fTemplating-docs-InjectingFiles">Injecting Files</a></li>
<li><a href="#fTemplating-docs-Minification">Minification</a>
<ul>
<li><a href="#fTemplating-docs-EnablingMinification">Enabling Minification</a></li>
<li><a href="#fTemplating-docs-HowMinificationAffectsHTMLOutput">How Minification Affects HTML Output</a></li>
<li><a href="#fTemplating-docs-MinificationAlgorithm">Minification Algorithm</a></li>
</ul>
</li>
<li><a href="#fTemplating-docs-PHPShortTags">PHP Short Tags</a></li>
<li><a href="#fTemplating-docs-BufferedOutput">Buffered Output</a></li>
<li><a href="#fTemplating-docs-NamedInstances">Named Instances</a></li>
<li><a href="#fTemplating-docs-Sub-Templating">Sub-Templating</a></li>
</ul>
</div>

<p>
The fTemplating class allows for simple PHP templating with abstraction of HTML into a separate scope. This is a contrast to system like Smarty where a complete language has been developed, and must be learned, to use templating.
</p>

<h3 id="fTemplating-docs-Initialization">Initialization</h3>

<p>
When creating an instance of the fTemplating class, a single optional parameter <code>$root</code> can be passed. This controls the directory that is used as the basis for relative paths. If no root is passed, the <code>$_SERVER['DOCUMENT_ROOT']</code> is used as a default.
</p>
<pre class="block php"><code>$template = new fTemplating('/var/www/inc/templates/');</code></pre>

<h3 id="fTemplating-docs-SettingGettingandDeletingElements">Setting, Getting and Deleting Elements</h3>

<p>
The fTemplating class is built around the concept of elements. Elements can be any data type, and may represent anything from a chunk of data, to an object, or a file path.
</p>

<p>
The first operation to be performed is setting an element via the <a href="#fTemplating-api-set"><code>set()</code></a> method. The first parameter, <code>$element</code>, is an identifier for the element you are setting. The second parameter is the <code>$value</code>.
</p>

<p>
Here are some example of setting various elements:
</p>
<pre class="block php"><code>// These value would usually be set in the initialization script for a site
$template-&gt;set('header', 'header.php');
$template-&gt;set('footer', 'footer.php');

$template-&gt;set('db',  $database);</code></pre>

<p>
 Multiple elements can be set in one method call by passing an associative array to <a href="#fTemplating-api-set"><code>set()</code></a>.
</p>
<pre class="block php"><code>$template-&gt;set(array(
    'header' =&gt; 'header.php',
    'footer' =&gt; 'footer.php'
));</code></pre>

<p>
 Elements can be retrieved by calling the <a href="#fTemplating-api-get"><code>get()</code></a> method. This method required the first parameter, <code>$element</code>, which is what you want to retrieve. You can also optionally pass a second parameter <code>$default_value</code> to specify what should be returned in the element has not yet been set. If no <code>$default_value</code> is specified and the element has not been set, <code>NULL</code> will be returned.
</p>
<pre class="block php"><code>// This will be the name or NULL
$name = $template-&gt;get('name');

// This will be the name or 'No name provided'
$name = $template-&gt;get('name', 'No name provided');</code></pre>

<p>
 Multiple elements can be retrieved in one method call by passing an array of element names to <a href="#fTemplating-api-get"><code>get()</code></a>. If default values are required, an associative array can be passed with the element name being the key and the default value being the value.
</p>
<pre class="block php"><code>// Get an array with two values - the element names will be the keys and the
// values will be the values, NULL will be returned if an element is not set
$values = $template-&gt;get(array('first_name', 'last_name'));

// This returns the same elements, but with the explicit default values N/A
$values = $template-&gt;get(array(
    'first_name' =&gt; 'N/A',
    'last_name'  =&gt; 'N/A'
));</code></pre>

<p>
 Elements can be removed by passing the <code>$element</code> name to <a href="#fTemplating-api-delete"><code>delete()</code></a>. The value of the element being deleted will be returned.
</p>
<pre class="block php"><code>$value = $template-&gt;delete('name');</code></pre>

<p>
 A <code>$default_value</code> can be passed as the second parameter to <a href="#fTemplating-api-delete"><code>delete()</code></a>, and it will be returned if the element specified was not set.
</p>
<pre class="block php"><code>$value = $template-&gt;delete('name', 'None specified');</code></pre>

<p>
 Multiple elements can be deleted at a time by passing an array of element names to <a href="#fTemplating-api-delete"><code>delete()</code></a>. Default values can be provided by passing an associative array of element names as keys and default values as values.
</p>
<pre class="block php"><code>// Delete the first_name and last_name elements
$values = $template-&gt;delete(array('first_name', 'last_name'));

// Delete the first_name and last_name elements, providing defaults
$values = $template-&gt;delete(array(
    'first_name' =&gt; 'No first name provided',
    'last_name'  =&gt; 'No last name provided'
));</code></pre>

<h3 id="fTemplating-docs-AddingRemovingandFilteringElements">Adding, Removing and Filtering Elements</h3>

<p>
In addition to <code>set()</code>, there is a method called <a href="#fTemplating-api-add"><code>add()</code></a> that will allow appending a value to an element that is an array. It will also initialize an element to an array if the element does not already exist.
</p>
<pre class="block php"><code>$template-&gt;add('js',  '/sup/js/main.js');

$template-&gt;add('css', array('path' =&gt; '/sup/css/print.css', 'media' =&gt; 'print'));
$template-&gt;add('css', '/sup/css/base.css');</code></pre>

<p>
 A value can be added at the beginning by passing <code>TRUE</code> as the third parameter.
</p>
<pre class="block php"><code>$template-&gt;add('js', '/sup/js/jquery-min.js', TRUE);</code></pre>

<p>
 The <a href="#fTemplating-api-remove"><code>remove()</code></a> method can used to remove a value from an array element. The removed value will be returned.
</p>
<pre class="block php"><code>$template-&gt;add('numbers', 1);
$template-&gt;add('numbers', 2);
$two = $template-&gt;remove('numbers');</code></pre>

<p>
 A value may be removed from the beginning of an array element by passing <code>TRUE</code> as a second parameter to <a href="#fTemplating-api-remove"><code>remove()</code></a>.
</p>
<pre class="block php"><code>$one = $template-&gt;remove('numbers');</code></pre>

<p>
 Values may be removed from an array element by calling <a href="#fTemplating-api-filter"><code>filter()</code></a> with the <code>$element</code> as the first parameter, and the <code>$value</code> to remove as the second.
</p>
<pre class="block php"><code>$template-&gt;filter('numbers', 1);</code></pre>

<p>
 The <a href="#fTemplating-api-filter"><code>filter()</code></a> method does a normal equality comparison, so filtering <code>0</code> will also removed <code>FALSE</code> and other empty values. All matching values will be removed from the array, not just the first one.
</p>

<h3 id="fTemplating-docs-EncodingandPreparingElements">Encoding and Preparing Elements</h3>

<p>
While simply retrieving elements is useful in certain situations, much of the time there will be a need to process text content for output in the HTML. The <a href="#fTemplating-api-encode"><code>encode()</code></a> and <a href="#fTemplating-api-prepare"><code>prepare()</code></a> methods function the same was as <code>get()</code> except that they run the returned value through <a href="#fHTML-api-encode">fHTML::encode()</a> and <a href="#fHTML-api-prepare">fHTML::prepare()</a>, respectively.
</p>
<pre class="block php"><code>// Encode turns &lt;, &gt;, &amp; and &quot; into HTML entities to prevent XSS
echo $template-&gt;encode('name');

// ::prepare() should only be used with trusted content to make
// sure special characters outside of HTML tags are encoded
echo $template-&gt;prepare('html_bio');</code></pre>

<h3 id="fTemplating-docs-ArrayDereferencing">Array Dereferencing</h3>

<p>
When an element is an array, it is possible to use array dereference syntax in the element name to access a specific array key. This syntax works with <a href="#fTemplating-api-set"><code>set()</code></a>, <a href="#fTemplating-api-get"><code>get()</code></a>, <a href="#fTemplating-api-delete"><code>delete()</code></a>, <a href="#fTemplating-api-add"><code>add()</code></a>, <a href="#fTemplating-api-remove"><code>remove()</code></a>, <a href="#fTemplating-api-filter"><code>filter()</code></a>, <a href="#fTemplating-api-encode"><code>encode()</code></a> and <a href="#fTemplating-api-prepare"><code>prepare()</code></a>.
</p>
<pre class="block php"><code>$template-&gt;set(
    'user',
    array(
        'first_name' =&gt; 'John',
        'last_name'  =&gt; 'Smith'
    )
);
// This will echo John
echo $template-&gt;get('user[first_name]');</code></pre>

<p>
 Array dereferencing can be any number of layers deep.
</p>
<pre class="block php"><code>echo $template-&gt;get('user[groups][0][name]');</code></pre>

<h3 id="fTemplating-docs-PlacingElements">Placing Elements</h3>

<p>
Probably the most useful aspect of the fTemplating class is the <a href="#fTemplating-api-place"><code>place()</code></a> method. This method takes a single parameter, <code>$element</code>, in which you specify what element you want to place in the page.
</p>

<p>
<code>place()</code> works differently depending of the type of path is contained in the element. If the element contains a path is to a .php (.inc or .php5) file, the file will be included inside the scope of the fTemplating class (i.e. <code>$this</code> will return to the instance of the class). If a .css, .js or .rss (.xml) path is placed, the proper XHTML tags will be echoed.
</p>

<p>
In order to handle the <code>title</code> attribute for RSS feeds and the <code>media</code> attribute for CSS files it is possible to set the value of an element to be an associative array containing a key <code>path</code> and a key corresponding to the appropriate attributes.
</p>

<p>
Here are some examples of using <code>place()</code> for different types of files:
</p>
<pre class="block php"><code>$template-&gt;set('title', 'Flourish');
$template-&gt;add('rss', array('path' =&gt; '/sup/rss/blog.rss', 'title' =&gt; 'Blog Posts'));
$template-&gt;place('header');
?&gt;
&lt;h1&gt;Flourish&lt;/h1&gt;
...
&lt;?php
$template-&gt;place('footer');</code></pre>

<p>
 Placing the header would include the file <code>header.php</code> from the root we defined earlier of <code>/var/www/inc/templates/</code>. Placing the footer would do that same thing for <code>footer.php</code>.
</p>

<p>
Here is an example <code>header.php</code>:
</p>
<pre class="block php"><code>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;
    &lt;head&gt;  
        &lt;title&gt;&lt;?php echo $this-&gt;prepare('title') ?&gt;&lt;/title&gt;
        &lt;?php echo $this-&gt;place('css') ?&gt;
        &lt;?php echo $this-&gt;place('js') ?&gt;
        &lt;?php echo $this-&gt;place('rss') ?&gt;
    &lt;/head&gt;
    &lt;body&gt;</code></pre>

<p>
 The HTML output from the above script would be:
</p>
<pre class="block html"><code>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;
    &lt;head&gt;  
        &lt;title&gt;Flourish&lt;/title&gt;
        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/sup/css/base.css&quot; media=&quot;all&quot; /&gt;
        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/sup/css/print.css&quot; media=&quot;print&quot; /&gt;
        &lt;script type=&quot;text/javascript&quot; src=&quot;/sup/js/main.js&quot;&gt;&lt;/script&gt;
        &lt;link rel=&quot;alternate&quot; type=&quot;application/rss+xml&quot; href=&quot;/sup/rss/blog.rss&quot; title=&quot;Blog Posts&quot; /&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;Flourish&lt;/h1&gt;
        ...
    &lt;/body&gt;
&lt;/html&gt;</code></pre>

<p>
 If paths are contained in element that do not end in one of the extensions listed below, you can force all paths in an element to be displayed as a certain type of file by passing the type of file as the second parameter to place.
</p>

<p>
Here are the valid extensions:
</p>

<ul>
<li><strong>PHP:</strong> <code>.php</code>, <code>.php5</code>, <code>.inc</code></li>
<li><strong>JS:</strong> <code>.js</code></li>
<li><strong>CSS:</strong> <code>.css</code></li>
<li><strong>RSS:</strong> <code>.rss</code>, <code>.xml</code></li>
</ul>

<p>
Here is how you could force all paths in an element to be displayed as a certain type regaredless of the path extensions:
</p>
<pre class="block php"><code>// JS files
$this-&gt;place('element1', 'js');

// CSS files
$this-&gt;place('element2', 'css');

// RSS files
$this-&gt;place('element3', 'rss');

// PHP files
$this-&gt;place('element4', 'php');</code></pre>

<h3 id="fTemplating-docs-InjectingFiles">Injecting Files</h3>

<p>
The method <a href="#fTemplating-api-inject"><code>inject()</code></a> works identically to <a href="#fTemplating-api-place"><code>place()</code></a>, except that is accepts a file name or path instead of an element name. This allows placing a file without having to pass it to <a href="#fTemplating-api-set"><code>set()</code></a> first.
</p>
<pre class="block php"><code>// Include a PHP file in the template root
$template-&gt;inject('sidebar.php');

// Add a JS file
$template-&gt;inject('/path/to/example.js');</code></pre>

<p>
 The second parameter also functions identically to <a href="#fTemplating-api-place"><code>place()</code></a>, allowing the developer to specify the type of file being injected if it can't be auto-detected.
</p>
<pre class="block php"><code>// Specifying the file type
$template-&gt;inject('/path/to/rss', 'rss');</code></pre>

<h3 id="fTemplating-docs-Minification">Minification</h3>

<p>
fTemplating includes functionality that will minify javascript and CSS, combine multiple files into one, and add a query string to allow for far-futures expire headers. All of these features provide increased performance for HTTP clients.
</p>

<p>
Minification reduces the number of bytes sent to a user by removing whitespace and other unnecessary syntactic sugar. Combining multiple files reduces the number of HTTP requests made for each script execution. Adding a query string of the cache-file creation date allows use of far-futures expires headers without worrying about out-dated browser caches, which further reduces the number of HTTP requests.
</p>

<p>
<em>In this section of documentation, a **cache file** refers to a file containing minified code of one or more original code files.</em>
</p>

<h4 id="fTemplating-docs-EnablingMinification">Enabling Minification</h4>

<p>
JS and CSS minification is enabled by calling <a href="#fTemplating-api-enableMinification"><code>enableMinification()</code></a> with a <code>$mode</code>, <code>$cache_directory</code> and optional <code>$path_prefix</code>. This should be called before calling <a href="#fTemplating-api-place"><code>place()</code></a> on any elements since it works through the <code>place()</code> method.
</p>
<pre class="block php"><code>$template-&gt;enableMinification('development', $_SERVER['DOCUMENT_ROOT'] . '/sup/minification_cache/');</code></pre>

<p>
 The <code>$mode</code> can be either <code>'development'</code> or <code>'production'</code>. In <code>'development'</code> mode, all files are checked for modifications on each script execution. If a file has been modified since the cache was last created, the cache is regenerated. In <code>'production'</code> mode, cache files are only regenerated if they are missing.
</p>

<p>
The <code>$cache_directory</code> should be a web-accessible directory for fTemplating to write the cache files to. It needs to be web-accessible since <code>&lt;script&gt;</code> and <code>&lt;link&gt;</code> tags will be referencing cache files stored inside of it.
</p>

<p>
The <code>$path_prefix</code> is optional, and defaults to <code>$_SERVER['DOCUMENT_ROOT']</code>. The <code>$path_prefix</code> is appended to all JS and CSS paths in order to load them from the filesystem. For example a CSS file <code>/css/main.css</code> would be prefixed with <code>$_SERVER['DOCUMENT_ROOT']</code>, resulting in fTemplating looking for the file in <code>/document/root/css/main.css</code>.
</p>

<p>
Since the minified files are stored on the filesystem, fTemplating must know how to translate the filesystem path into a URL. This translation is done by using <a href="#fFilesystem-api-translateToWebPath">fFilesystem::translateToWebPath()</a>. If fTemplating is generating incorrect URLs for the minified files, please use <a href="#fFilesystem-api-addWebPathTranslation">fFilesystem::addWebPathTranslation()</a> to indicate what translation should be done. <a href="#fFilesystem-docs-Translation">fFilesystem: Translation</a> has an example showing how the method is used.
</p>

<h4 id="fTemplating-docs-HowMinificationAffectsHTMLOutput">How Minification Affects HTML Output</h4>

<p>
Once minification is enabled, all calls to <a href="#fTemplating-api-place"><code>place()</code></a> that end up placing one or more CSS or JS files will automatically be minified.
</p>
<pre class="block php"><code>$template-&gt;add('css', '/css/structure.css');
$template-&gt;add('css', '/css/typography.css');
$template-&gt;place('css');</code></pre>

<p>
 Would normally result in the following HTML being written to the output:
</p>
<pre class="block html"><code>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/css/structure.css&quot; /&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/css/typography.css&quot; /&gt;</code></pre>

<p>
 With minification enabled, it would be written as:
</p>
<pre class="block html"><code>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/cache/ae9210f4cbd017f4cbes.css?v=10298382912&quot; /&gt;</code></pre>

<h4 id="fTemplating-docs-MinificationAlgorithm">Minification Algorithm</h4>

<p>
fTemplating uses Douglas Crockfords <a class="ext-link" href="http://www.crockford.com/javascript/jsmin.html"><span class="icon">JSMin algorithm</span></a>, but has its own implementation that is optimized for PHP.
</p>

<p>
For CSS, there is not a definitive algorithm like JSMin. Currently fTemplating performs the following steps to minify CSS:
</p>

<ul>
<li>Runs of two of more whitespace characters are reduced to a single space</li>
<li>Whitespace around <code>;</code>, <code>{</code>, <code>}</code>, <code>,</code>, <code>&gt;</code> and <code>+</code> is removed</li>
<li>Whitespace around <code>:</code> inside of rule blocks is removed</li>
<li><code>;}</code> is reduced to <code>}</code></li>
<li>Units of measure for zero values are discarded</li>
<li>Unnecessary leading and trailing zeroes are discarded</li>
<li>Measurements repeated four times are reduced to a single measurement</li>
<li>6-digit hex color codes are reduced to three if possible</li>
</ul>

<p>
CSS minification does not touch <code>@import</code> statements or <code>url()</code> literals. Depending on the location of the <code>$cache_directory</code> relative to the normal CSS directory, some <code>@import</code> statements may break. However, with <a href="#fTemplating-api-enableMinification"><code>enableMinification()</code></a>, <code>@import</code> statements should not generally be necessary. Similarly, <code>url()</code> literals may break if the <code>$cache_directory</code> is on a different directory level than the original CSS directory. This can be remedied by placing them on the same level, or using website-relative URLs. 
</p>

<h3 id="fTemplating-docs-PHPShortTags">PHP Short Tags</h3>

<p>
PHP short tags, such as <code>&lt;?</code> and <code>&lt;?=</code> often make for easy-to-read and easy-to-write templates in raw PHP. Unfortunately, short tags can be disabled by an ini setting, and cant be relied upon when developing PHP for different environments.
</p>

<p>
The method <a href="#fTemplating-api-enablePHPShortTags"><code>enablePHPShortTags()</code></a> allows any PHP file directly included via <a href="#fTemplating-api-place"><code>place()</code></a> or <a href="#fTemplating-api-inject"><code>inject()</code></a> to use PHP short tags even if they are turned off. This is accomplished by transforming short tags into long tags and saving the transformed PHP into a cache directory. The method accepts two parameters, <code>$mode</code> and <code>$cache_directory</code>.
</p>
<pre class="block php"><code>$template-&gt;enablePHPShortTags('development', '/path/to/php/cache');</code></pre>

<p>
 The <code>$mode</code> can be either <code>'development'</code> or <code>'production'</code>. In <code>'development'</code> mode, all files are checked for modifications on each script execution. If a file has been modified since the cache was last created, the cache is regenerated. In <code>'production'</code> mode, cache files are only regenerated if they are missing.
</p>

<p>
The <code>$cache_directory</code> is where the transformed PHP files are saved. This directory should not be web-accessible, but must be writable by the web server. <em>fTemplating will properly preserve the value of <code>__FILE__</code> and <code>__DIR__</code> constants that are contained within templates that are transformed.</em>
</p>

<h3 id="fTemplating-docs-BufferedOutput">Buffered Output</h3>

<p>
In certain circumstances it is useful to buffer the output of the page to allow for elements to be changed after content has already been output. The <a href="#fTemplating-api-buffer"><code>buffer()</code></a> method allows such buffering to be enabled.
</p>

<p>
When buffering is enabled, all calls to <code>place()</code> actually insert a text token into the output. When the fTemplating class destructor is called (explicitly, or at the end of the page execution) the text tokens are all replaced by the output of the <code>place()</code> call. The <code>place()</code> method is actually executed in the destructor, so it will have the state of all elements at the end of the page, thus allowing elements to be modified after they have been seemingly already output.
</p>

<p>
There are two caveats to using the fTemplating output buffering.
</p>

<ol>
<li>If any of your code relies on sequential execution of code in a <code>place()</code> call and then in other non-templating code, it will be executed in the wrong order due to the fact that the <code>place()</code> call is not done until the end of the page. If this is the case, you should probably not use buffering, or consider a way to refactor your code so that such sequential code execution is not required.</li>
<li>All objects that are used inside of PHP that is placed by the fTemplating object need to be constructed before the fTemplating object is constructed. This is because destructors are executed in the reverse order of constructors, which means the objects being used by fTemplating will be destructed before fTemplating itself. Since fTemplating's destructor is what causes PHP code to be placed, the object being used may no longer be in a usable state. This happens most often with <a href="#fDatabase">fDatabase</a>.</li>
</ol>

<p>
Here is an example of using buffered output:
</p>
<pre class="block php"><code>// Create the template and turn on buffering
$temp = new fTemplating();
$temp-&gt;buffer();

// Set up out elements
$temp-&gt;set('header', 'header.php');
$temp-&gt;set('title',  'This is the old title');

// Output the header
$temp-&gt;place('header');

// Change the title after the fact
$temp-&gt;set('title', 'This is the new title');</code></pre>

<p>
 Lets assume that <code>header.php</code> looks like this:
</p>
<pre class="block php"><code>echo $this-&gt;get('title');</code></pre>

<p>
 The output from above would be:
</p>
<pre class="block html"><code>This is the new title</code></pre>

<p>
 since the <code>place()</code> call is not executed until the <code>$temp</code> destructor is called at the end of the code (implicitly) and the title was changed before the end of the code.
</p>

<p>
This buffering technique can greatly reduce the complexity of the code that needs to be executed before the first output can be sent to the user.
</p>

<h3 id="fTemplating-docs-NamedInstances">Named Instances</h3>

<p>
It is possible to attach and retrieve fTemplating objects in any scope using the static methods <a href="#fTemplating-api-attach"><code>attach()</code></a> and <a href="#fTemplating-api-retrieve"><code>retrieve()</code></a>. <code>attach()</code> accepts an fTemplating instance and an optional <code>$name</code> for it. If no <code>$name</code> is provided, it will be set to <code>default</code>.
</p>
<pre class="block php"><code>fTemplating::attach(new fTemplating('/path/to/root'));</code></pre>

<p>
 The method <a href="#fTemplating-api-retrieve"><code>retrieve()</code></a> accepts the <code>$name</code> of a previously creating instance and returns it. If no <code>$name</code> is passed, the <code>default</code> template is returned.
</p>
<pre class="block php"><code>$tmpl = fTemplating::retrieve();</code></pre>

<h3 id="fTemplating-docs-Sub-Templating">Sub-Templating</h3>

<p>
It is possible to nest fTemplating objects for more complex situations. The concept is to have a child fTemplating object that will be placed by a parent. Such a child fTemplating object will automatically call <a href="#fTemplating-api-place"><code>place()</code></a> on the <code>__main__</code> element when it itself is placed.
</p>

<p>
The <code>__main__</code> element will normally be set by passing a PHP file path to the second parameter of the constructor. Like calls to <a href="#fTemplating-api-set"><code>set()</code></a>, any file path that is not absolute and does not start with <code>./</code> will be relative to the template root.
</p>
<pre class="block php"><code>$user_info = new fTemplating('/templating/root/', 'sub_templates/user_info.php');</code></pre>

<p>
 The fTemplating object may then be set to another fTemplating object and placed.
</p>
<pre class="block php"><code>$template-&gt;set('user_info', $user_info);
// At this point sub_templates/user_info.php is placed
$template-&gt;place('user_info');</code></pre>

<p>
 All sub-templates will inherit all minification and PHP short tag settings from their parent if not explicitly set.
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fTemplating-api">fTemplating API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fTemplating">Class Documentation</a></li>
		<li><strong><a href="#fTemplating-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="variables static">
<h4><a href="#fTemplating-api-class_vars_static">Static Variables</a></h4>
<ul>
  	 		<li><a href="#fTemplating-api-instances">$instances</a></li>
	   	   </ul>
</div>
<div class="protected variables">
<h4><a href="#fTemplating-api-class_vars">Variables</a></h4>
<ul>
  	   	 		<li class="protected"><a href="#fTemplating-api-root">$root</a></li>
	   </ul>
</div>
<div class="methods static">
<h4><a href="#fTemplating-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  	  	  			<li><a href="#fTemplating-api-attach">attach()</a></li>
	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  			<li class="protected"><a href="#fTemplating-api-reset">reset()</a></li>
	  			<li><a href="#fTemplating-api-retrieve">retrieve()</a></li>
	  	  	  </ul>
</div>
<div class="methods">
<h4><a href="#fTemplating-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fTemplating-api-__construct">__construct()</a></li>
	  			<li class="protected"><a href="#fTemplating-api-__destruct">__destruct()</a></li>
	  			<li class="protected"><a href="#fTemplating-api-__get">__get()</a></li>
	  			<li><a href="#fTemplating-api-add">add()</a></li>
	  	  			<li><a href="#fTemplating-api-buffer">buffer()</a></li>
	  			<li><a href="#fTemplating-api-delete">delete()</a></li>
	  			<li><a href="#fTemplating-api-destroy">destroy()</a></li>
	  			<li><a href="#fTemplating-api-enableMinification">enableMinification()</a></li>
	  			<li><a href="#fTemplating-api-enablePHPShortTags">enablePHPShortTags()</a></li>
	  			<li><a href="#fTemplating-api-encode">encode()</a></li>
	  			<li><a href="#fTemplating-api-filter">filter()</a></li>
	  			<li><a href="#fTemplating-api-get">get()</a></li>
	  			<li class="protected"><a href="#fTemplating-api-handleMinified">handleMinified()</a></li>
	  			<li><a href="#fTemplating-api-inject">inject()</a></li>
	  			<li class="protected"><a href="#fTemplating-api-minify">minify()</a></li>
	  			<li class="protected"><a href="#fTemplating-api-minifyCode">minifyCode()</a></li>
	  			<li class="protected"><a href="#fTemplating-api-minifyLiteral">minifyLiteral()</a></li>
	  			<li><a href="#fTemplating-api-place">place()</a></li>
	  			<li class="protected"><a href="#fTemplating-api-placeCSS">placeCSS()</a></li>
	  			<li class="protected"><a href="#fTemplating-api-placeElement">placeElement()</a></li>
	  			<li class="protected"><a href="#fTemplating-api-placeJS">placeJS()</a></li>
	  			<li class="protected"><a href="#fTemplating-api-placePHP">placePHP()</a></li>
	  			<li class="protected"><a href="#fTemplating-api-placeRSS">placeRSS()</a></li>
	  			<li><a href="#fTemplating-api-prepare">prepare()</a></li>
	  			<li><a href="#fTemplating-api-remove">remove()</a></li>
	  	  	  			<li><a href="#fTemplating-api-set">set()</a></li>
	  			<li class="protected"><a href="#fTemplating-api-verifyValue">verifyValue()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fBuffer">fBuffer</a></li>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fDirectory">fDirectory</a></li>
		<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
		<li><a href="#fFilesystem">fFilesystem</a></li>
		<li><a href="#fGrammar">fGrammar</a></li>
		<li><a href="#fHTML">fHTML</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b23</span></div>
<p class="short_description">Allows for quick and flexible HTML templating</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b23</th><td>Added a default <tt>$name</tt> for <a href="#fTemplating-api-retrieve"><tt>retrieve()</tt></a> to mirror <a href="#fTemplating-api-attach"><tt>attach()</tt></a> <span class="date">8/31/11</span></td></tr><tr><th>1.0.0b22</th><td>Backwards Compatibility Break - removed the static method create(), added the static method <a href="#fTemplating-api-attach"><tt>attach()</tt></a> to fill its place <span class="date">8/31/11</span></td></tr><tr><th>1.0.0b21</th><td>Fixed a bug in <a href="#fTemplating-api-enableMinification"><tt>enableMinification()</tt></a> where the minification cache directory was sometimes not properly converted to a web path <span class="date">8/31/11</span></td></tr><tr><th>1.0.0b20</th><td>Fixed a bug in CSS minification that would reduce multiple zeros that are part of a hex color code, fixed minification of <tt>+ ++</tt> and similar constructs in JS <span class="date">8/31/11</span></td></tr><tr><th>1.0.0b19</th><td>Corrected a bug in <a href="#fTemplating-api-enablePHPShortTags"><tt>enablePHPShortTags()</tt></a> that would prevent proper translation inside of HTML tag attributes <span class="date">1/9/11</span></td></tr><tr><th>1.0.0b18</th><td>Fixed a bug with CSS minification and black hex codes <span class="date">10/10/10</span></td></tr><tr><th>1.0.0b17</th><td>Backwards Compatibility Break - <a href="#fTemplating-api-delete"><tt>delete()</tt></a> now returns the values of the element or elements that were deleted instead of returning the <a href="#fTemplating">fTemplating</a> instance <span class="date">9/19/10</span></td></tr><tr><th>1.0.0b16</th><td>Fixed another bug with minifying JS regex literals <span class="date">9/13/10</span></td></tr><tr><th>1.0.0b15</th><td>Fixed a bug with minifying JS regex literals that occur after a reserved word <span class="date">9/12/10</span></td></tr><tr><th>1.0.0b14</th><td>Added documentation about <tt>[sub-key]</tt> syntax <span class="date">9/12/10</span></td></tr><tr><th>1.0.0b13</th><td>Backwards Compatibility Break - <a href="#fTemplating-api-add"><tt>add()</tt></a>, <a href="#fTemplating-api-delete"><tt>delete()</tt></a>, <a href="#fTemplating-api-get"><tt>get()</tt></a> and <a href="#fTemplating-api-set"><tt>set()</tt></a> now interpret <tt>[</tt> and <tt>]</tt> as array shorthand and thus they can not be used in element names, renamed <a href="#fTemplating-api-remove"><tt>remove()</tt></a> to <a href="#fTemplating-api-filter"><tt>filter()</tt></a> - added <tt>$beginning</tt> parameter to <a href="#fTemplating-api-add"><tt>add()</tt></a> and added <a href="#fTemplating-api-remove"><tt>remove()</tt></a> method <span class="date">9/12/10</span></td></tr><tr><th>1.0.0b12</th><td>Added <a href="#fTemplating-api-enableMinification"><tt>enableMinification()</tt></a>, <a href="#fTemplating-api-enablePHPShortTags"><tt>enablePHPShortTags()</tt></a>, the ability to be able to place child <a href="#fTemplating">fTemplating</a> objects via a new magic element <tt>__main__</tt> and the <tt>$main_element</tt> parameter for <a href="#fTemplating-api-__construct"><tt>__construct()</tt></a> <span class="date">8/31/10</span></td></tr><tr><th>1.0.0b11</th><td>Fixed a bug with the elements not being initialized to a blank array <span class="date">8/12/10</span></td></tr><tr><th>1.0.0b10</th><td>Updated <a href="#fTemplating-api-place"><tt>place()</tt></a> to ignore URL query strings when detecting an element type <span class="date">7/26/10</span></td></tr><tr><th>1.0.0b9</th><td>Added the methods <a href="#fTemplating-api-delete"><tt>delete()</tt></a> and <a href="#fTemplating-api-remove"><tt>remove()</tt></a> <span class="date">7/15/10</span></td></tr><tr><th>1.0.0b8</th><td>Fixed a bug with placing absolute file paths on Windows <span class="date">7/9/10</span></td></tr><tr><th>1.0.0b7</th><td>Removed <tt>e</tt> flag from preg_replace() calls <span class="date">6/8/10</span></td></tr><tr><th>1.0.0b6</th><td>Changed <a href="#fTemplating-api-set"><tt>set()</tt></a> and <a href="#fTemplating-api-add"><tt>add()</tt></a> to return the object for method chaining, changed <a href="#fTemplating-api-set"><tt>set()</tt></a> and <a href="#fTemplating-api-get"><tt>get()</tt></a> to accept arrays of elements <span class="date">6/2/10</span></td></tr><tr><th>1.0.0b5</th><td>Added <a href="#fTemplating-api-encode"><tt>encode()</tt></a> <span class="date">5/20/10</span></td></tr><tr><th>1.0.0b4</th><td>Added create() and <a href="#fTemplating-api-retrieve"><tt>retrieve()</tt></a> for named <a href="#fTemplating">fTemplating</a> instances <span class="date">5/11/10</span></td></tr><tr><th>1.0.0b3</th><td>Fixed an issue with placing relative file path <span class="date">4/23/10</span></td></tr><tr><th>1.0.0b2</th><td>Added the <a href="#fTemplating-api-inject"><tt>inject()</tt></a> method <span class="date">1/9/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="class_variables static" id="fTemplating-api-class_vars_static">
<h4>Static Variables</h4>
	<!-- start variable static -->
	<h5 id="fTemplating-api-instances" class="variable static"><span class="resolution">::</span><span class="name">$instances</span> <span class="visibility"></span></h5>
	<div class="variable static">    
					<div class="variable_description">
							<p>Named <a href="#fTemplating">fTemplating</a> instances</p>
			</div>
		<h6>Type</h6>
		<p class="type">array</p>
	</div>
	<!-- end variable static -->
</div>
<div class="class_variables" id="fTemplating-api-class_vars">
<h4>Variables</h4>
	<!-- start protected variable -->
	<h5 id="fTemplating-api-root" class="protected variable"><span class="resolution">-></span><span class="name">root</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>The directory to look for files</p>
			</div>
		<h6>Type</h6>
		<p class="type">string</p>
	</div>
	<!-- end variable -->
</div>
<div class="class_methods static" id="fTemplating-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fTemplating-api-attach" class="method static"><span class="resolution">::</span><span class="name">attach()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Attaches a named template that can be accessed from any scope via retrieve()</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">attach</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fTemplating">fTemplating</a></span> <span class="php-var">$templating</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">=</span>'default' <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fTemplating">fTemplating</a></td>
				<td class="param_name">$templating</td>
				<td class="param_description">The <a href="#fTemplating">fTemplating</a> object to attach</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The name for this templating instance</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fTemplating-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fTemplating-api-retrieve" class="method static"><span class="resolution">::</span><span class="name">retrieve()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Retrieves a named template</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fTemplating">fTemplating</a></span> <span class="php-identifier">retrieve</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">=</span>'default' <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The name of the template to retrieve</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The specified <a href="#fTemplating">fTemplating</a> instance
				</p>
			</div>
			<!-- end method static -->
			</div>
<div class="class_methods" id="fTemplating-api-class_methods">
<h4>Methods</h4>
			  			  									<!-- start method -->
			<h5 id="fTemplating-api-__construct" class="method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Initializes this templating engine</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fTemplating">fTemplating</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$root</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$main_element</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$root</td>
				<td class="param_description">The filesystem path to use when accessing relative files, defaults to <tt>$_SERVER['DOCUMENT_ROOT']</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$main_element</td>
				<td class="param_description">The value for the <tt>__main__</tt> element - this is used when calling <a href="#fTemplating-api-place"><tt>place()</tt></a> without an element, or when placing <a href="#fTemplating">fTemplating</a> objects as children</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fTemplating-api-__destruct" class="protected method"><span class="resolution">-></span><span class="name">__destruct()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Finishing placing elements if buffering was used</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">__destruct</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fTemplating-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTemplating-api-add" class="method"><span class="resolution">-></span><span class="name">add()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds a value to an array element</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fTemplating">fTemplating</a></span> <span class="php-identifier">add</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$element</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$beginning</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$element</td>
				<td class="param_description">The element to add to - array elements can be modified via <tt>[sub-key]</tt> syntax, and thus <tt>[</tt> and <tt>]</tt> can not be used in element names</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value to add</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$beginning</td>
				<td class="param_description">If the value should be added to the beginning of the element</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The template object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTemplating-api-buffer" class="method"><span class="resolution">-></span><span class="name">buffer()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Enables buffered output, allowing set() and add() to happen after a place() but act as if they were done before</p>
								<p>Please note that using buffered output will affect the order in which  code is executed since the elements are not actually <a href="#fTemplating-api-place"><tt>place()</tt></a>'ed until  the destructor is called.</p><p>If the non-template code depends on template code being executed  sequentially before it, you may not want to use output buffering.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">buffer</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTemplating-api-delete" class="method"><span class="resolution">-></span><span class="name">delete()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Deletes an element from the template</p>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">delete</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$element</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$default_value</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype">mixed</span> <span class="php-identifier">delete</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$elements</span> <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$element</td>
				<td class="param_description">The element to delete - array elements can be modified via <tt>[sub-key]</tt> syntax, and thus <tt>[</tt> and <tt>]</tt> can not be used in element names</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$default_value</td>
				<td class="param_description">The value to return if the <tt>$element</tt> is not set</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$elements</td>
				<td class="param_description">The elements to delete - an array of element names or an associative array of keys being element names and the values being the default values</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The value of the <tt>$element</tt> that was deleted - an associative array of deleted elements will be returned if an array of <tt>$elements</tt> was specified
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTemplating-api-destroy" class="method"><span class="resolution">-></span><span class="name">destroy()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Erases all output since the invocation of the template - only works if buffering is on</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">destroy</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTemplating-api-enableMinification" class="method"><span class="resolution">-></span><span class="name">enableMinification()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Enables minified output for CSS and JS elements</p>
								<p>For CSS and JS, compilation means that the file will be minified and  cached. The filename will change whenever the content change, allowing  for far-futures expire headers.</p><p>Please note that this option requires that all CSS and JS paths be  relative to the $_SERVER['DOCUMENT_ROOT'] and start with a <tt>/</tt>. Also  this class will not clean up old cached files out of the cache  directory.</p><p>This functionality will be inherited by all child <a href="#fTemplating">fTemplating</a> objects  that do not have their own explicit minification settings.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">enableMinification</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$mode</span><span class="php-code">,</span> <span class="php-vartype"><a href="#fDirectory">fDirectory</a>|string</span> <span class="php-var">$cache_directory</span><span class="php-code">,</span> <span class="php-vartype"><a href="#fDirectory">fDirectory</a>|string</span> <span class="php-var">$path_prefix</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$mode</td>
				<td class="param_description">The compilation mode - <tt>'development'</tt> means that file modification times will be checked on each load, <tt>'production'</tt> means that the cache files will only be regenerated when missing</td>
			  </tr>
						  <tr>
				<td class="param_data_type"><a href="#fDirectory">fDirectory</a>|string</td>
				<td class="param_name">$cache_directory</td>
				<td class="param_description">The directory to cache the compiled files into - this needs to be inside the document root or a path added to <a href="#fFilesystem-api-addWebPathTranslation"><tt>fFilesystem::addWebPathTranslation()</tt></a></td>
			  </tr>
						  <tr>
				<td class="param_data_type"><a href="#fDirectory">fDirectory</a>|string</td>
				<td class="param_name">$path_prefix</td>
				<td class="param_description">The directory to prepend to all CSS and JS paths to load the files from the filesystem - this defaults to <tt>$_SERVER['DOCUMENT_ROOT']</tt></td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTemplating-api-enablePHPShortTags" class="method"><span class="resolution">-></span><span class="name">enablePHPShortTags()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Converts PHP short tags to long tags when short tags are turned off</p>
								<p>Please note that this only affects PHP files that are <strong>directly</strong>  evaluated with <a href="#fTemplating-api-place"><tt>place()</tt></a> or <a href="#fTemplating-api-inject"><tt>inject()</tt></a>. It will not affect PHP files that  have been evaluated via <tt>include</tt> or <tt>require</tt> statements inside of the  directly evaluated PHP files.</p><p>This functionality will be inherited by all child <a href="#fTemplating">fTemplating</a> objects  that do not have their own explicit short tag settings.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">enablePHPShortTags</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$mode</span><span class="php-code">,</span> <span class="php-vartype"><a href="#fDirectory">fDirectory</a>|string</span> <span class="php-var">$cache_directory</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$mode</td>
				<td class="param_description">The compilation mode - <tt>'development'</tt> means that file modification times will be checked on each load, <tt>'production'</tt> means that the cache files will only be regenerated when missing</td>
			  </tr>
						  <tr>
				<td class="param_data_type"><a href="#fDirectory">fDirectory</a>|string</td>
				<td class="param_name">$cache_directory</td>
				<td class="param_description">The directory to cache the compiled files into - this directory should not be accessible from the web</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTemplating-api-encode" class="method"><span class="resolution">-></span><span class="name">encode()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the value of an element and runs it through <a href="#fHTML-api-encode"><tt>fHTML::encode()</tt></a></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">encode</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$element</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$default_value</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$element</td>
				<td class="param_description">The element to get - array elements can be accessed via <tt>[sub-key]</tt> syntax, and thus <tt>[</tt> and <tt>]</tt> can not be used in element names</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$default_value</td>
				<td class="param_description">The value to return if the element has not been set</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The value of the element specified run through <a href="#fHTML-api-encode"><tt>fHTML::encode()</tt></a>, or the default value if it has not been set
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTemplating-api-filter" class="method"><span class="resolution">-></span><span class="name">filter()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Removes a value from an array element</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fTemplating">fTemplating</a></span> <span class="php-identifier">filter</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$element</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$element</td>
				<td class="param_description">The element to remove from - array elements can be modified via <tt>[sub-key]</tt> syntax, and thus <tt>[</tt> and <tt>]</tt> can not be used in element names</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value to remove - compared in a non-strict manner, such that removing <tt>0</tt> will remove a blank string and false also</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The template object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTemplating-api-get" class="method"><span class="resolution">-></span><span class="name">get()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the value of an element</p>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$element</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$default_value</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype">mixed</span> <span class="php-identifier">get</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$elements</span> <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$element</td>
				<td class="param_description">The element to get - array elements can be accessed via <tt>[sub-key]</tt> syntax, and thus <tt>[</tt> and <tt>]</tt> can not be used in element names</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$default_value</td>
				<td class="param_description">The value to return if the element has not been set</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$elements</td>
				<td class="param_description">An array of elements to get, or an associative array where a string key is the element to get and the value is the default value</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The value of the element(s) specified, or the default value(s) if it has not been set
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fTemplating-api-handleMinified" class="protected method"><span class="resolution">-></span><span class="name">handleMinified()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Combines an array of CSS or JS files and places them as a single file</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">handleMinified</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$type</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$element</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$values</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$type</td>
				<td class="param_description">The type of compilation, 'css' or 'js'</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$element</td>
				<td class="param_description">The element name</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$values</td>
				<td class="param_description">An array of file paths</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTemplating-api-inject" class="method"><span class="resolution">-></span><span class="name">inject()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Includes the file specified - this is identical to place() except a filename is specified instead of an element</p>
								<p>Please see the <a href="#fTemplating-api-place"><tt>place()</tt></a> method for more details about functionality.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">inject</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$file_path</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$file_type</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$file_path</td>
				<td class="param_description">The file to place</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$file_type</td>
				<td class="param_description">Will force the file to be placed as this type of file instead of auto-detecting the file type. Valid types include: <tt>'css'</tt>, <tt>'js'</tt>, <tt>'php'</tt> and <tt>'rss'</tt>.</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fTemplating-api-minify" class="protected method"><span class="resolution">-></span><span class="name">minify()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Minifies JS or CSS</p>
								<p>For JS, this function is based on the JSMin algorithm (not the code) from  <a class="ext-link" href="http://www.crockford.com/javascript/jsmin"><span class="icon">http://www.crockford.com/javascript/jsmin</span></a> with the addition of  preserving /*! comment blocks for things like licenses. Some other  versions of JSMin change the contents of special comment blocks, but  this version does not.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">minify</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$code</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$type</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$code</td>
				<td class="param_description">The code to minify</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$type</td>
				<td class="param_description">The type of code, 'css' or 'js'</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The minified code
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fTemplating-api-minifyCode" class="protected method"><span class="resolution">-></span><span class="name">minifyCode()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Takes a block of CSS or JS and reduces the number of characters</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">minifyCode</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">&amp;$part</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">&amp;$buffer</span><span class="php-code">,</span> <span class="php-vartype"></span> <span class="php-var">&amp;$stack</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$type</span><span class="php-code">=</span>'js'<span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$stack</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">&amp;$part</td>
				<td class="param_description">The part of code to minify</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">&amp;$buffer</td>
				<td class="param_description">A buffer containing the last code or literal encountered</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$stack</td>
				<td class="param_description">A stack used to keep track of the nesting level of CSS</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$type</td>
				<td class="param_description">The type of code, <tt>'css'</tt> or <tt>'js'</tt></td>
			  </tr>
						  <tr>
				<td class="param_data_type"></td>
				<td class="param_name">&amp;$stack</td>
				<td class="param_description"></td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fTemplating-api-minifyLiteral" class="protected method"><span class="resolution">-></span><span class="name">minifyLiteral()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Takes a literal and either discards or keeps it</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">minifyLiteral</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">&amp;$part</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">&amp;$buffer</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$type</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">&amp;$part</td>
				<td class="param_description">The literal to process</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">&amp;$buffer</td>
				<td class="param_description">The last literal or code processed</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$type</td>
				<td class="param_description">The language the literal is in, <tt>'css'</tt> or <tt>'js'</tt></td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTemplating-api-place" class="method"><span class="resolution">-></span><span class="name">place()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Includes the element specified - element must be set through set() first</p>
								<p>If the element is a file path ending in <tt>.css</tt>, <tt>.js</tt>, <tt>.rss</tt> or <tt>.xml</tt>  an appropriate HTML tag will be printed (files ending in <tt>.xml</tt> will be  treated as an RSS feed). If the element is a file path ending in <tt>.inc</tt>,  <tt>.php</tt> or <tt>.php5</tt> it will be included.</p><p>Paths that start with <tt>./</tt> will be loaded relative to the current script.  Paths that start with a file or directory name will be loaded relative  to the <tt>$root</tt> passed in the constructor. Paths that start with <tt>/</tt> will  be loaded from the root of the filesystem.</p><p>You can pass the <tt>media</tt> attribute of a CSS file or the <tt>title</tt> attribute  of an RSS feed by adding an associative array with the following formats:</p><pre class="block "><code>array(
    'path'  => (string) {css file path},
    'media' => (string) {media type}
);
array(
    'path'  => (string) {rss file path},
    'title' => (string) {feed title}
);</code></pre>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">place</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$element</span><span class="php-code">=</span>'__main__'<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$file_type</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$element</td>
				<td class="param_description">The element to place</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$file_type</td>
				<td class="param_description">Will force the element to be placed as this type of file instead of auto-detecting the file type. Valid types include: <tt>'css'</tt>, <tt>'js'</tt>, <tt>'php'</tt> and <tt>'rss'</tt>.</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fTemplating-api-placeCSS" class="protected method"><span class="resolution">-></span><span class="name">placeCSS()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Prints a CSS <tt>link</tt> HTML tag to the output</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">placeCSS</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$info</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$info</td>
				<td class="param_description">The path or array containing the <tt>'path'</tt> to the CSS file. Array can also contain a key <tt>'media'</tt>.</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fTemplating-api-placeElement" class="protected method"><span class="resolution">-></span><span class="name">placeElement()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Performs the action of actually placing an element</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">placeElement</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$element</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$file_type</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$element</td>
				<td class="param_description">The element that is being placed</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$file_type</td>
				<td class="param_description">The file type to treat all values as</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fTemplating-api-placeJS" class="protected method"><span class="resolution">-></span><span class="name">placeJS()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Prints a java<tt>script</tt> HTML tag to the output</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">placeJS</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$info</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$info</td>
				<td class="param_description">The path or array containing the <tt>'path'</tt> to the javascript file</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fTemplating-api-placePHP" class="protected method"><span class="resolution">-></span><span class="name">placePHP()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Includes a PHP file</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">placePHP</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$element</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$path</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$element</td>
				<td class="param_description">The element being placed</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$path</td>
				<td class="param_description">The path to the PHP file</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fTemplating-api-placeRSS" class="protected method"><span class="resolution">-></span><span class="name">placeRSS()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Prints an RSS <tt>link</tt> HTML tag to the output</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">placeRSS</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$info</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$info</td>
				<td class="param_description">The path or array containing the <tt>'path'</tt> to the RSS xml file. May also contain a <tt>'title'</tt> key for the title of the RSS feed.</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTemplating-api-prepare" class="method"><span class="resolution">-></span><span class="name">prepare()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the value of an element and runs it through <a href="#fHTML-api-prepare"><tt>fHTML::prepare()</tt></a></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">prepare</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$element</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$default_value</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$element</td>
				<td class="param_description">The element to get - array elements can be access via <tt>[sub-key]</tt> syntax, and thus <tt>[</tt> and <tt>]</tt> can not be used in element names</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$default_value</td>
				<td class="param_description">The value to return if the element has not been set</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The value of the element specified run through <a href="#fHTML-api-prepare"><tt>fHTML::prepare()</tt></a>, or the default value if it has not been set
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTemplating-api-remove" class="method"><span class="resolution">-></span><span class="name">remove()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Removes and returns the value from the end of an array element</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">remove</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$element</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$beginning</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$element</td>
				<td class="param_description">The element to remove from to - array elements can be modified via <tt>[sub-key]</tt> syntax, and thus <tt>[</tt> and <tt>]</tt> can not be used in element names</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$beginning</td>
				<td class="param_description">If the value should be removed from the beginning of the element</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The value that was removed
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTemplating-api-set" class="method"><span class="resolution">-></span><span class="name">set()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the value for an element</p>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fTemplating">fTemplating</a></span> <span class="php-identifier">set</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$element</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype"><a href="#fTemplating">fTemplating</a></span> <span class="php-identifier">set</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$elements</span> <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$element</td>
				<td class="param_description">The element to set - the magic element <tt>__main__</tt> is used for placing the current <a href="#fTemplating">fTemplating</a> object as a child of another <a href="#fTemplating">fTemplating</a> object - array elements can be modified via <tt>[sub-key]</tt> syntax, and thus <tt>[</tt> and <tt>]</tt> can not be used in element names</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value for the element</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$elements</td>
				<td class="param_description">An associative array with the key being the <tt>$element</tt> to set and the value being the <tt>$value</tt> for that element</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The template object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fTemplating-api-verifyValue" class="protected method"><span class="resolution">-></span><span class="name">verifyValue()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Ensures the value is valid</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">verifyValue</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$element</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$file_type</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$element</td>
				<td class="param_description">The element that is being placed</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">A value to be placed</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$file_type</td>
				<td class="param_description">The file type that this element will be displayed as - skips checking file extension</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The file type of the value being placed
				</p>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="fText">fText</h2>
<div class="sidebar">
<h3 id="fText-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fText">Class Documentation</a></strong></li>
<li><a href="#fText-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fText-docs-ComposingMessages">Composing Messages</a></li>
<li><a href="#fText-docs-LocalizationofFlourish">Localization of Flourish</a></li>
</ul>
</div>

<p>
The fText class is a static class with the sole purpose of creating a hook to allow for writing internationalized application and localizing Flourish. None of the Flourish classes require it be loaded, but if it is, all message/parameter interpolation is passed through this class.
</p>

<h3 id="fText-docs-ComposingMessages">Composing Messages</h3>

<p>
The fText class includes a key method to help with the i18n of code. The method <a href="#fText-api-compose"><code>compose()</code></a> allows creating a message in multiple pieces that are later interpolated, allowing for efficient translation efforts.
</p>

<p>
Typically, a call to <code>compose()</code> will look like:
</p>
<pre class="block php"><code>// Example variable values
$message_type      = 'error';
$message_part_name = 'parts';

echo fText::compose(
    'This is an example of displaying an %1$s message containing variable %2$s',
    $message_type,
    $message_part_name
);</code></pre>

<p>
 which would produce the result:
</p>
<pre><code>This is an example of displaying an error message containing variable parts</code></pre>

<p>
 At its core, <code>compose()</code> is simply a wrapper around <a class="ext-link" href="http://php.net/sprintf"><span class="icon"><code>sprintf()</code></span></a>. However, being a wrapper allows setting up two hooks for translation. The method <a href="#fText-api-registerComposeCallback"><code>registerComposeCallback()</code></a> allows us to intercept any string sent to <code>compose()</code> and modify it. The first parameter, <code>$timing</code>, allow registering the callback <code>'pre'</code> or <code>'post'</code> the <code>sprintf()</code> call. The second parameter, <code>$callback</code>, defines which method to pass the string to.
</p>

<p>
Any callback registered <code>pre</code> will get the un-interpolated string, while any callback registered <code>post</code> will get the interpolated string. Here is an example of translation using compose:
</p>
<pre class="block php"><code>function translate($string)
{
    static $translations = array(
        'This is an example of displaying an %1$s message containing variable %2$s' =&gt; 'This is an %1$s message containing %2$s'
    );

    if (isset($translations[$string])) {
        return $translations[$string];
    }
    return $string;
}

fText::registerComposeCallback('pre', 'translate');

$message_type      = 'error';
$message_part_name = 'parts';

echo fText::compose(
    'This is an example of displaying an %1$s message containing variable %2$s',
    $message_type,
    $message_part_name
);</code></pre>

<p>
 The above PHP would output the following:
</p>
<pre><code>This is an error message containing parts</code></pre>

<h3 id="fText-docs-LocalizationofFlourish">Localization of Flourish</h3>

<p>
Every exception and error in Flourish will be passed through <a href="#fText-api-compose"><code>compose()</code></a>, thus allowing for localization of the Flourish code base. Please see the MessagesList page for a list of all messages and their location in the source code.
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fText-api">fText API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fText">Class Documentation</a></li>
		<li><strong><a href="#fText-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fText-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fText-api-compose">compose()</a></li>
	  			<li><a href="#fText-api-registerComposeCallback">registerComposeCallback()</a></li>
	  			<li class="protected"><a href="#fText-api-reset">reset()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b2</span></div>
<p class="short_description">Provides internationlization support for strings</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b2</th><td>Updated <a href="#fText-api-compose"><tt>compose()</tt></a> to more handle <tt>$components</tt> passed as an array <span class="date">2/5/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">11/12/08</span></td></tr></table></div>
<div class="class_methods static" id="fText-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fText-api-compose" class="method static"><span class="resolution">::</span><span class="name">compose()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Performs an <a class="ext-link" href="http://php.net/sprintf"><span class="icon"><tt>sprintf()</tt></span></a> on a string and provides a hook for modifications such as internationalization</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">compose</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$component</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">A message to compose</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$component <em>[, ... ]</em></td>
				<td class="param_description">A string or number to insert into the message</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The composed message
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fText-api-registerComposeCallback" class="method static"><span class="resolution">::</span><span class="name">registerComposeCallback()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Adds a callback for when a message is created using compose()</p>
								<p>The primary purpose of these callbacks is for internationalization of  error messaging in Flourish. The callback should accept a single  parameter, the message being composed and should return the message  with any modifications.</p><p>The timing parameter controls if the callback happens before or after  the actual composition takes place, which is simply a call to  <a class="ext-link" href="http://php.net/sprintf"><span class="icon"><tt>sprintf()</tt></span></a>. Thus the message passed <tt>'pre'</tt>  will always be exactly the same, while the message <tt>'post'</tt> will include  the interpolated variables. Because of this, most of the time the <tt>'pre'</tt>  timing should be chosen.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">registerComposeCallback</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$timing</span><span class="php-code">,</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$timing</td>
				<td class="param_description">When the callback should be executed - <tt>'pre'</tt> or <tt>'post'</tt> performing the actual composition</td>
			  </tr>
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fText-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fTime">fTime</h2>
<div class="sidebar">
<h3 id="fTime-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fTime">Class Documentation</a></strong></li>
<li><a href="#fTime-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fTime-docs-Instantiation">Instantiation</a></li>
<li><a href="#fTime-docs-Modification">Modification</a></li>
<li><a href="#fTime-docs-Adjustments">Adjustments</a></li>
<li><a href="#fTime-docs-Formatting">Formatting</a></li>
<li><a href="#fTime-docs-Comparing">Comparing</a></li>
<li><a href="#fTime-docs-FuzzyDifferences">Fuzzy Differences</a></li>
</ul>

<h3 id="fTime-docs-DateTimeClasses">Date/Time Classes </h3>

<ul>
<li><a href="#fDate">fDate</a></li>
<li><strong>fTime</strong></li>
<li><a href="#fTimestamp">fTimestamp</a></li>
</ul>

<h3 id="fTime-docs-ValueObjects">Value Objects </h3>

<ul>
<li><a href="#fDate">fDate</a></li>
<li><a href="#fMoney">fMoney</a></li>
<li><a href="#fNumber">fNumber</a></li>
<li><strong>fTime</strong></li>
<li><a href="#fTimestamp">fTimestamp</a></li>
</ul>
</div>

<p>
The fTime class is a <a href="#ValueObjects-docs">value object</a> representation of a time. One of the primary attributes of the object is that its value can not be changed, but instead a new object is created. 
</p>

<h3 id="fTime-docs-Instantiation">Instantiation</h3>

<p>
The fTime constructor takes a single argument, a string, object or integer representing a time of day. For strings and objects (with <code>__toString()</code> methods), any format accepted by <a class="ext-link" href="http://php.net/strtotime"><span class="icon"><code>strtotime()</code></span></a> will work. If the parameter is an integer, it will be interpreted as a unix timestamp and the date portion will be discarded.
</p>
<pre class="block php"><code>$time1 = new fTime('now');
$time2 = new fTime('+1 hour');
$time3 = new fTime('9:14 am');
$time4 = new fTime(1223926420);</code></pre>

<h3 id="fTime-docs-Modification">Modification</h3>

<p>
Rather than allowing an fTime object value to be modified, which can create issues since objects are passed by reference, all changes to a time create a new object.
</p>

<p>
Usually when modifying a time, only one or two components (such as hour or minute) of the time will change. The <a href="#fTime-api-modify"><code>modify()</code></a> method leverages the formatting codes from the <a class="ext-link" href="http://php.net/function.date"><span class="icon"><code>date()</code></span></a> function to keep parts of the existing time while replacing others.
</p>

<p>
Here are some examples of <code>modify()</code>:
</p>
<pre class="block php"><code>// The new time would have the same minutes and seconds, but the hour would be set to 5am
$new_time = $time1-&gt;modify('5:i:s');

// The new time would be the same hour, but the very beginning
$new_time = $time2-&gt;modify('H:00:00');

// The new time would be the same hour, but the very end
$new_time = $time3-&gt;modify('H:59:59');</code></pre>

<h3 id="fTime-docs-Adjustments">Adjustments</h3>

<p>
Occasionally you may have the need to adjust a time. The <a href="#fTime-api-adjust"><code>adjust()</code></a> method takes a single parameter which can contain any relative time measurement that <a class="ext-link" href="http://php.net/strtotime"><span class="icon"><code>strtotime()</code></span></a> accepts. Since fTime is a value object, a new object is returned with the adjusted time. Here are some examples:
</p>
<pre class="block php"><code>$new_time = $time1-&gt;adjust('+1 hour');
$new_time = $time2-&gt;adjust('-2 hours +5 minutes');</code></pre>

<h3 id="fTime-docs-Formatting">Formatting</h3>

<p>
To format the time, simply call the <a href="#fTime-api-format"><code>format()</code></a> method with any valid time formatting string from <a class="ext-link" href="http://php.net/date"><span class="icon"><code>date()</code></span></a>.  Here are some examples:
</p>
<pre class="block php"><code>echo $time1-&gt;format('g:ia');
echo $time2-&gt;format('H:i:s');</code></pre>

<h3 id="fTime-docs-Comparing">Comparing</h3>

<p>
There are five different methods available to compare times, <a href="#fTime-api-eq"><code>eq()</code></a>, <a href="#fTime-api-gt"><code>gt()</code></a>, <a href="#fTime-api-gte"><code>gte()</code></a>, <a href="#fTime-api-lt"><code>lt()</code></a> and <a href="#fTime-api-lte"><code>lte()</code></a>. Each method optionally accepts a parameter <code>$other_time</code>. If no <code>$other_time</code> is specified, the time is compared to the current time. If <code>$other_time</code> is specified, the two are compared. <code>$other_time</code> accepts any valid date string that works with <a href="#fTime-api-__construct"><code>__construct()</code></a>.
</p>

<p>
Here are some examples:
</p>
<pre class="block php"><code>$now = new fTime();
$hour_ago = new fTime('-1 hour');

// These return TRUE
$now-&gt;eq();
$now-&gt;eq('now');
$now-&gt;gt($hour_ago);
$now-&gt;gte($hour_ago);
$now-&gt;lt('+5 min');

// These calls return FALSE
$hour_ago-&gt;lt($now);
$now-&gt;gt($hour_ago);
$now-&gt;gte($hour_ago);</code></pre>

<h3 id="fTime-docs-FuzzyDifferences">Fuzzy Differences</h3>

<p>
If you are looking to get a fuzzy difference between two times for display, youll want to use the <a href="#fTime-api-getFuzzyDifference"><code>getFuzzyDifference()</code></a> method. The first parameter, <code>$other_time</code>, optionally accepts a valid time descriptor that can be passed to <a href="#fTime-api-__construct"><code>__construct()</code></a>. If a valid time descriptor is passed, the difference will be between the two times, if nothing is passed, the difference will be between the fTime and the current time.
</p>

<p>
The value returned by <code>getFuzzyDifference()</code> will be a string representing the most broad time measurement between the two times. In addition, if the difference is just shy of the next largest time measurement, it will be rounded up. Thus 52 minutes would become 1 hour.
</p>

<p>
Here are some examples to clarify. The following examples are comparing two times:
</p>
<pre class="block php"><code>$time1 = new fTime('12:24 pm');
$time2 = new fTime('3:24 pm');

echo $time1-&gt;getFuzzyDifference($time2);
// Output: 3 hours before

echo $time2-&gt;getFuzzyDifference($time1);
// Output: 3 hours after

$time3 = new fTime('12:31 pm');

echo $time3-&gt;getFuzzyDifference('12:24 pm');
// Output: 7 minutes after

$time4 = new fTime('12:24:57 pm');

echo $time4-&gt;getFuzzyDifference('12:24 pm');
// Output: 1 minute after</code></pre>

<p>
 These examples show output when comparing an fTime object with the current time:
</p>
<pre class="block php"><code>// First, lets assume the time is currently 1:19 am.

$time1 = new fTime('11:59 pm');
$time2 = new fTime('12:53 am');
$time3 = new fTime('7:00 am');

echo $time1-&gt;getFuzzyDifference();
// Output: 1 day from now

echo $time2-&gt;getFuzzyDifference();
// Output: 26 minutes ago

echo $time3-&gt;getFuzzyDifference();
// Output: 6 hours from now</code></pre>

<p>
 An optional boolean parameter, <code>$simple</code>, can also be passed to <code>getFuzzyDifference()</code>. When <code>TRUE</code>, this parameter causes the method to return the difference in time, but not the direction.
</p>
<pre class="block php"><code>$time1 = new fTime('12:24 pm');
$time2 = new fTime('3:24 pm');

echo $time1-&gt;getFuzzyDifference($time2, TRUE);
// Output: 3 hours

echo $time2-&gt;getFuzzyDifference($time1, TRUE);
// Output: 3 hours

$time3 = new fTime('12:31 pm');

echo $time3-&gt;getFuzzyDifference('12:24 pm', TRUE);
// Output: 7 minutes</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fTime-api">fTime API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fTime">Class Documentation</a></li>
		<li><strong><a href="#fTime-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="protected variables">
<h4><a href="#fTime-api-class_vars">Variables</a></h4>
<ul>
  	 		<li class="protected"><a href="#fTime-api-time">$time</a></li>
	   </ul>
</div>
<div class="protected methods static">
<h4><a href="#fTime-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  	  	  			<li class="protected"><a href="#fTime-api-compose">compose()</a></li>
	  	  	  	  	  	  	  	  	  </ul>
</div>
<div class="methods">
<h4><a href="#fTime-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fTime-api-__construct">__construct()</a></li>
	  			<li class="protected"><a href="#fTime-api-__get">__get()</a></li>
	  			<li><a href="#fTime-api-__toString">__toString()</a></li>
	  			<li><a href="#fTime-api-adjust">adjust()</a></li>
	  	  			<li><a href="#fTime-api-eq">eq()</a></li>
	  			<li><a href="#fTime-api-format">format()</a></li>
	  			<li><a href="#fTime-api-getFuzzyDifference">getFuzzyDifference()</a></li>
	  			<li><a href="#fTime-api-gt">gt()</a></li>
	  			<li><a href="#fTime-api-gte">gte()</a></li>
	  			<li><a href="#fTime-api-lt">lt()</a></li>
	  			<li><a href="#fTime-api-lte">lte()</a></li>
	  			<li><a href="#fTime-api-modify">modify()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fGrammar">fGrammar</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fTimestamp">fTimestamp</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fDatabase">fDatabase</a></li>
		<li><a href="#fLoader">fLoader</a></li>
		<li><a href="#fORM">fORM</a></li>
		<li><a href="#fORMValidation">fORMValidation</a></li>
		<li><a href="#fRequest">fRequest</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b12</span></div>
<p class="short_description">Represents a time of day as a value object</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b12</th><td>Fixed a method signature <span class="date">8/24/11</span></td></tr><tr><th>1.0.0b11</th><td>Fixed a bug with the constructor not properly handling unix timestamps that are negative integers <span class="date">6/2/11</span></td></tr><tr><th>1.0.0b10</th><td>Changed the <tt>$time</tt> attribute to be protected <span class="date">3/20/11</span></td></tr><tr><th>1.0.0b9</th><td>Added the <tt>$simple</tt> parameter to <a href="#fTime-api-getFuzzyDifference"><tt>getFuzzyDifference()</tt></a> <span class="date">3/15/10</span></td></tr><tr><th>1.0.0b8</th><td>Added a call to <a href="#fTimestamp-api-callUnformatCallback"><tt>fTimestamp::callUnformatCallback()</tt></a> in <a href="#fTime-api-__construct"><tt>__construct()</tt></a> for localization support <span class="date">6/1/09</span></td></tr><tr><th>1.0.0b7</th><td>Backwards compatibility break - Removed getSecondsDifference(), added <a href="#fTime-api-eq"><tt>eq()</tt></a>, <a href="#fTime-api-gt"><tt>gt()</tt></a>, <a href="#fTime-api-gte"><tt>gte()</tt></a>, <a href="#fTime-api-lt"><tt>lt()</tt></a>, <a href="#fTime-api-lte"><tt>lte()</tt></a> <span class="date">3/5/09</span></td></tr><tr><th>1.0.0b6</th><td>Fixed an outdated <a href="#fCore">fCore</a> method call <span class="date">2/23/09</span></td></tr><tr><th>1.0.0b5</th><td>Updated for new <a href="#fCore">fCore</a> API <span class="date">2/16/09</span></td></tr><tr><th>1.0.0b4</th><td>Fixed <a href="#fTime-api-__construct"><tt>__construct()</tt></a> to properly handle the 5.0 to 5.1 change in strtotime() <span class="date">1/21/09</span></td></tr><tr><th>1.0.0b3</th><td>Added support for CURRENT_TIMESTAMP and CURRENT_TIME SQL keywords <span class="date">1/11/09</span></td></tr><tr><th>1.0.0b2</th><td>Removed the adjustment amount check from <a href="#fTime-api-adjust"><tt>adjust()</tt></a> <span class="date">12/31/08</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">2/12/08</span></td></tr></table></div>
<div class="class_variables" id="fTime-api-class_vars">
<h4>Variables</h4>
	<!-- start protected variable -->
	<h5 id="fTime-api-time" class="protected variable"><span class="resolution">-></span><span class="name">time</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>A timestamp of the time</p>
			</div>
		<h6>Type</h6>
		<p class="type">integer</p>
	</div>
	<!-- end variable -->
</div>
<div class="class_methods static" id="fTime-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start protected method static -->
			<h5 id="fTime-api-compose" class="protected method static"><span class="resolution">::</span><span class="name">compose()</span> <span class="visibility">protected</span></h5>
			<div class="protected method static">
							<div class="method_description">
									<p>Composes text using <a href="#fText">fText</a> if loaded</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">compose</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$component</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message to compose</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$component <em>[, ... ]</em></td>
				<td class="param_description">A string or number to insert into the message</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The composed and possible translated message
				</p>
			</div>
			<!-- end method static -->
									</div>
<div class="class_methods" id="fTime-api-class_methods">
<h4>Methods</h4>
						<!-- start method -->
			<h5 id="fTime-api-__construct" class="method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Creates the time to represent, no timezone is allowed since times don't have timezones</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fTime">fTime</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fTime">fTime</a>|object|string|integer</span> <span class="php-var">$time</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fTime">fTime</a>|object|string|integer</td>
				<td class="param_name">$time</td>
				<td class="param_description">The time to represent, <tt>NULL</tt> is interpreted as now</td>
			  </tr>
						</table>
			</div>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$time</tt> is not a valid time</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fTime-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTime-api-__toString" class="method"><span class="resolution">-></span><span class="name">__toString()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns this time in <tt>'H:i:s'</tt> format</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">__toString</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The <tt>'H:i:s'</tt> format of this time
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fTime-api-adjust" class="method"><span class="resolution">-></span><span class="name">adjust()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Changes the time by the adjustment specified, only adjustments of <tt>'hours'</tt>, <tt>'minutes'</tt>, and <tt>'seconds'</tt> are allowed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fTime">fTime</a></span> <span class="php-identifier">adjust</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$adjustment</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$adjustment</td>
				<td class="param_description">The adjustment to make</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The adjusted time
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$adjustment</tt> is not a valid relative time measurement</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTime-api-eq" class="method"><span class="resolution">-></span><span class="name">eq()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>If this time is equal to the time passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">eq</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fTime">fTime</a>|object|string|integer</span> <span class="php-var">$other_time</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fTime">fTime</a>|object|string|integer</td>
				<td class="param_name">$other_time</td>
				<td class="param_description">The time to compare with, <tt>NULL</tt> is interpreted as today</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this time is equal to the one passed
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fTime-api-format" class="method"><span class="resolution">-></span><span class="name">format()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Formats the time</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">format</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$format</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$format</td>
				<td class="param_description">The <a class="ext-link" href="http://php.net/date"><span class="icon"><tt>date()</tt></span></a> function compatible formatting string, or a format name from <a href="#fTimestamp-api-defineFormat"><tt>fTimestamp::defineFormat()</tt></a></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The formatted time
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When a non-time formatting character is included in <tt>$format</tt></dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTime-api-getFuzzyDifference" class="method"><span class="resolution">-></span><span class="name">getFuzzyDifference()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the approximate difference in time, discarding any unit of measure but the least specific.</p>
								<p>The output will read like:  </p><ul><li>&quot;This time is <tt>{return value}</tt> the provided one&quot; when a time it passed</li><li>&quot;This time is <tt>{return value}</tt>&quot; when no time is passed and comparing with the current time</li></ul><p>Examples of output for a time passed might be:  </p><ul><li><tt>'5 minutes after'</tt></li><li><tt>'2 hours before'</tt></li><li><tt>'at the same time'</tt></li></ul><p>Examples of output for no time passed might be:  </p><ul><li><tt>'5 minutes ago'</tt></li><li><tt>'2 hours ago'</tt></li><li><tt>'right now'</tt></li></ul><p>You would never get the following output since it includes more than one unit of time measurement:  </p><ul><li><tt>'5 minutes and 28 seconds'</tt></li><li><tt>'1 hour, 15 minutes'</tt></li></ul><p>Values that are close to the next largest unit of measure will be rounded up:  </p><ul><li><tt>'55 minutes'</tt> would be represented as <tt>'1 hour'</tt>, however <tt>'45 minutes'</tt> would not</li></ul>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getFuzzyDifference</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fTime">fTime</a>|object|string|integer</span> <span class="php-var">$other_time</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$simple</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype">string</span> <span class="php-identifier">getFuzzyDifference</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$simple</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fTime">fTime</a>|object|string|integer</td>
				<td class="param_name">$other_time</td>
				<td class="param_description">The time to create the difference with, <tt>NULL</tt> is interpreted as now</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$simple</td>
				<td class="param_description">When <tt>TRUE</tt>, the returned value will only include the difference in the two times, but not <tt>from now</tt>, <tt>ago</tt>, <tt>after</tt> or <tt>before</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The fuzzy difference in time between the this time and the one provided
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTime-api-gt" class="method"><span class="resolution">-></span><span class="name">gt()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>If this time is greater than the time passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">gt</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fTime">fTime</a>|object|string|integer</span> <span class="php-var">$other_time</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fTime">fTime</a>|object|string|integer</td>
				<td class="param_name">$other_time</td>
				<td class="param_description">The time to compare with, <tt>NULL</tt> is interpreted as now</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this time is greater than the one passed
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTime-api-gte" class="method"><span class="resolution">-></span><span class="name">gte()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>If this time is greater than or equal to the time passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">gte</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fTime">fTime</a>|object|string|integer</span> <span class="php-var">$other_time</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fTime">fTime</a>|object|string|integer</td>
				<td class="param_name">$other_time</td>
				<td class="param_description">The time to compare with, <tt>NULL</tt> is interpreted as now</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this time is greater than or equal to the one passed
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTime-api-lt" class="method"><span class="resolution">-></span><span class="name">lt()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>If this time is less than the time passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">lt</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fTime">fTime</a>|object|string|integer</span> <span class="php-var">$other_time</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fTime">fTime</a>|object|string|integer</td>
				<td class="param_name">$other_time</td>
				<td class="param_description">The time to compare with, <tt>NULL</tt> is interpreted as today</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this time is less than the one passed
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTime-api-lte" class="method"><span class="resolution">-></span><span class="name">lte()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>If this time is less than or equal to the time passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">lte</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fTime">fTime</a>|object|string|integer</span> <span class="php-var">$other_time</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fTime">fTime</a>|object|string|integer</td>
				<td class="param_name">$other_time</td>
				<td class="param_description">The time to compare with, <tt>NULL</tt> is interpreted as today</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this time is less than or equal to the one passed
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTime-api-modify" class="method"><span class="resolution">-></span><span class="name">modify()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Modifies the current time, creating a new <a href="#fTime">fTime</a> object</p>
								<p>The purpose of this method is to allow for easy creation of a time  based on this time. Below are some examples of formats to  modify the current time:  </p><ul><li><tt>'17:i:s'</tt> to set the hour of the time to 5 PM</li><li>'H:00:00'` to set the time to the beginning of the current hour</li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fTime">fTime</a></span> <span class="php-identifier">modify</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$format</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$format</td>
				<td class="param_description">The current time will be formatted with this string, and the output used to create a new object</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The new time
				</p>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="fTimestamp">fTimestamp</h2>
<div class="sidebar">
<h3 id="fTimestamp-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fTimestamp">Class Documentation</a></strong></li>
<li><a href="#fTimestamp-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fTimestamp-docs-DefaultTimezone">Default Timezone</a></li>
<li><a href="#fTimestamp-docs-Instantiation">Instantiation</a></li>
<li><a href="#fTimestamp-docs-Modification">Modification</a></li>
<li><a href="#fTimestamp-docs-Adjustments">Adjustments</a></li>
<li><a href="#fTimestamp-docs-Formatting">Formatting</a></li>
<li><a href="#fTimestamp-docs-DefiningFormats">Defining Formats</a></li>
<li><a href="#fTimestamp-docs-Comparing">Comparing</a></li>
<li><a href="#fTimestamp-docs-FuzzyDifferences">Fuzzy Differences</a></li>
<li><a href="#fTimestamp-docs-Localization">Localization</a></li>
</ul>

<h3 id="fTimestamp-docs-DateTimeClasses">Date/Time Classes </h3>

<ul>
<li><a href="#fDate">fDate</a></li>
<li><a href="#fTime">fTime</a></li>
<li><strong>fTimestamp</strong></li>
</ul>

<h3 id="fTimestamp-docs-ValueObjects">Value Objects </h3>

<ul>
<li><a href="#fDate">fDate</a></li>
<li><a href="#fMoney">fMoney</a></li>
<li><a href="#fNumber">fNumber</a></li>
<li><a href="#fTime">fTime</a></li>
<li><strong>fTimestamp</strong></li>
</ul>
</div>

<p>
The fTimestamp class is a <a href="#ValueObjects-docs">value object</a> representation of a date/time. One of the primary attributes of the object is that its value can not be changed, but instead a new object is created. This object has full support for timezones.
</p>

<p>
This class is built on top of the PHP date/time functions and can only handle dates ranging from 19012038.
</p>

<h3 id="fTimestamp-docs-DefaultTimezone">Default Timezone</h3>

<p>
The fTimestamp class is fully compatible with timezones thanks the the great changes in PHP 5.1. Classically timezones were represented by short abbreviations such as <code>EST</code>, <code>GMT</code>, <code>PST</code>, etc. To help remove abiguity, PHP now recommends using the <a class="ext-link" href="http://en.wikipedia.org/wiki/List_of_zoneinfo_timezones"><span class="icon">zoneinfo timezone names</span></a>.
</p>

<p>
Due to the revamped timezone support in PHP 5.1, it is now necessary to define the default timezone. This is done to ensure the proper timezone is being used and also prevent strict error reporting messages from appearing. fTimestamp provides two methods for setting and getting the default timezone, <a href="#fTimestamp-api-setDefaultTimezone"><code>setDefaultTimezone()</code></a> and <a href="#fTimestamp-api-getDefaultTimezone"><code>getDefaultTimezone()</code></a>.
</p>
<pre class="block php"><code>// Set the default timezone to New York time
fTimestamp::setDefaultTimezone('America/New_York');

echo fTimestamp::getDefaultTimezone();
// Output: America/New_York</code></pre>

<p>
 There will be more timezone discussion throughout the rest of this document in the relevant places.
</p>

<h3 id="fTimestamp-docs-Instantiation">Instantiation</h3>

<p>
The fTimestamp constructor takes two parameters, including <code>$datetime</code> and <code>$timezone</code>. <code>$datetime</code> is a string, object (with a <code>__toString()</code> method) or integer representing a date/time. For strings and objects, any format accepted by <a class="ext-link" href="http://php.net/strtotime"><span class="icon"><code>strtotime()</code></span></a> will work. Integers are interpreted as a unix timestamp. <code>$timezone</code> is optional and if passed should be a string with a zoneinfo timezone name. This timezone will be used throughout the life of the timestamp. 
</p>
<pre class="block php"><code>// Date/times without a timezone
$timestamp1 = new fTimestamp('today');
$timestamp2 = new fTimestamp('now');
$timestamp3 = new fTimestamp('3 Feb 2008 5:12 pm');
$timestamp4 = new fTimestamp('8 am');
$timestamp5 = new fTimestamp('next wednesday');
$timestamp6 = new fTimestamp(1223926420);

// Date/times with a timezone
$timestamp7 = new fTimestamp('2008-03-01 1 pm', 'America/New_York');
$timestamp8 = new fTimestamp('2008-03-01 1 pm', 'America/Los_Angeles');
$timestamp9 = new fTimestamp('2008-03-01 1 pm', 'Europe/London');</code></pre>

<h3 id="fTimestamp-docs-Modification">Modification</h3>

<p>
Rather than allowing an fTimestamp object value to be modified, which can create issues since objects are passed by reference, all changes to a timestamp create a new object.
</p>

<p>
Usually when modifying a timestamp, only one or two components (such as month, year, hour or minute) of the timestamp will change. The <a href="#fTimestamp-api-modify"><code>modify()</code></a> method leverages the formatting codes from the <a class="ext-link" href="http://php.net/function.date"><span class="icon"><code>date()</code></span></a> function to keep parts of the existing timestamp while replacing others.
</p>

<p>
Here are some examples of <code>modify()</code>:
</p>
<pre class="block php"><code>// The new timestamps year would be 2007 while the rest would be the same
$new_timestamp = $timestamp1-&gt;modify('2007-m-d H:i:s');

// The new timestamp would be the 1st day (Monday) of the 9th week of the year
$new_timestamp = $timestamp2-&gt;modify('Y-\W9-1 00:00:00');

// The new timestamp would be moved to the beginning of the hour
$new_timestamp = $timestamp3-&gt;modify('Y-m-d H:00:00');

// The new timestamp would be moved to the end of the hour
$new_timestamp = $timestamp4-&gt;modify('Y-m-d H:59:59');</code></pre>

<p>
 It is also possible to set the timezone of the new timestamp. The timezone can be passed as the optional second parameter to <code>modify()</code>. If no timezone is specified, the new timestamp will have the same timezone as the original.
</p>
<pre class="block php"><code>$timestamp = new fTimestamp('now', 'America/New_York');

// This new timestamp is different by three hours due to the timezone change
$new_timestamp = $timestamp-&gt;modify('c', 'America/Los_Angeles');</code></pre>

<h3 id="fTimestamp-docs-Adjustments">Adjustments</h3>

<p>
Occasionally you may have the need to adjust a timestamp. The <a href="#fTimestamp-api-adjust"><code>adjust()</code></a> method takes a single parameter which can contain any relative time measurement that <a class="ext-link" href="http://php.net/strtotime"><span class="icon"><code>strtotime()</code></span></a> accepts. Since fTimestamp is a value object, a new object is returned with the adjusted value. Here are some examples:
</p>
<pre class="block php"><code>$new_timestamp = $timestamp1-&gt;adjust('tomorrow');
$new_timestamp = $timestamp2-&gt;adjust('+1 day');
$new_timestamp = $timestamp3-&gt;adjust('-2 years +1 week +5 hours');
$new_timestamp = $timestamp4-&gt;adjust('next wednesday');
$new_timestamp = $timestamp5-&gt;adjust('+1 hour');
$new_timestamp = $timestamp6-&gt;adjust('-2 hours +5 minutes +3 seconds');</code></pre>

<p>
 Adjustments can also be adjustments of timezone. If a valid timezone is passed, the actual date/time will not be changed, however the date/time will appear different from <a href="#fTimestamp-api-format"><code>format()</code></a>.
</p>
<pre class="block php"><code>$new_timestamp = $timestamp1-&gt;adjust('America/Los_Angeles');

// Since the unix timestamp is always in UTC, these will be equal
if ($new_timestamp-&gt;format('U') == $timestamp1-&gt;format('U')) {
    echo 'The date/time has not changed, but the timezone has';
}</code></pre>

<h3 id="fTimestamp-docs-Formatting">Formatting</h3>

<p>
To format the timestamp, simply call the <a href="#fTimestamp-api-format"><code>format()</code></a> method with any valid formatting string from <a class="ext-link" href="http://php.net/date"><span class="icon"><code>date()</code></span></a>. Here are some examples:
</p>
<pre class="block php"><code>// Normal date/time formatting
echo $timestamp1-&gt;format('Y-m-d H:i:s');
echo $timestamp2-&gt;format('n/j/y g:ia');

// Using format to retrieve the timezone
echo $timestamp3-&gt;format('e');</code></pre>

<h3 id="fTimestamp-docs-DefiningFormats">Defining Formats</h3>

<p>
When dealing with date across a site or application, it is easy to create inconsistent formatting. In an effort to encourage consistency and at the same time prevent the need to clutter the global namespace with constants, the <a href="#fTimestamp-api-defineFormat"><code>defineFormat()</code></a> static method allows for creating named formats for use with the <a href="#fTimestamp-api-format"><code>format()</code></a> method and the method <a href="#fTime-api-format">fTime::format()</a> and <a href="#fDate-api-format">fDate::format()</a>.
</p>

<p>
Definition of the formats would logically go in a configuration file. <code>defineFormat()</code> takes two parameters, the <code>$name</code> and the <code>$formatting_string</code>.
</p>
<pre class="block php"><code>fTimestamp::defineFormat('list_date', 'n/j/y');
fTimestamp::defineFormat('list_time', 'g:ia');</code></pre>

<p>
 Once defined, the format names can be passed into the <code>format()</code> method of <a href="#fDate">fDate</a>, <a href="#fTime">fTime</a> and fTimestamp.
</p>
<pre class="block php"><code>echo $timestamp-&gt;format('list_date');
echo $time-&gt;format('list_time');</code></pre>

<h3 id="fTimestamp-docs-Comparing">Comparing</h3>

<p>
There are five different methods available to compare timestamps, <a href="#fTimestamp-api-eq"><code>eq()</code></a>, <a href="#fTimestamp-api-gt"><code>gt()</code></a>, <a href="#fTimestamp-api-gte"><code>gte()</code></a>, <a href="#fTimestamp-api-lt"><code>lt()</code></a> and <a href="#fTimestamp-api-lte"><code>lte()</code></a>. Each method optionally accepts a parameter <code>$other_timestamp</code>. If no <code>$other_timestamp</code> is specified, the timestamp is compared to the current timestamp. If <code>$other_timestamp</code> is specified, the two are compared. <code>$other_timestamp</code> accepts any valid date string that works with <a href="#fTimestamp-api-__construct"><code>__construct()</code></a>.
</p>

<p>
Here are some examples:
</p>
<pre class="block php"><code>$now = new fTimestamp();
$day_ago = new fTimestamp('-1 day');

// These return TRUE
$now-&gt;eq();
$now-&gt;eq('now');
$now-&gt;gt($day_ago);
$now-&gt;gte($day_ago);
$now-&gt;lt('+5 min');

// These calls return FALSE
$day_ago-&gt;gt($now);
$now-&gt;lt($day_ago);
$now-&gt;lte($day_ago);</code></pre>

<h3 id="fTimestamp-docs-FuzzyDifferences">Fuzzy Differences</h3>

<p>
If you are looking to get a fuzzy difference between two timestamps for display, youll want to use the <a href="#fTimestamp-api-getFuzzyDifference"><code>getFuzzyDifference()</code></a> method. The first parameter, <code>$other_timestamp</code>, optionally accepts a valid timestamp descriptor that can be passed to <a href="#fTimestamp-api-__construct"><code>__construct()</code></a>. If a valid timestamp descriptor is passed, the difference will be between the two timestamps, if nothing is passed, the difference will be between the fTimestamp and the current timestamp.
</p>

<p>
The value returned by <code>getFuzzyDifference()</code> will be a string representing the most broad time measurement between the two timestamps. In addition, if the difference is just shy of the next largest time measurement, it will be rounded up. Thus 3.5 weeks would become 1 month.
</p>

<p>
Here are some examples to clarify. The following examples are comparing two timestamps:
</p>
<pre class="block php"><code>$timestamp1 = new fTimestamp('2008-01-01 8:00 am');
$timestamp2 = new fTimestamp('2008-01-04 5:00 pm');

echo $timestamp1-&gt;getFuzzyDifference($timestamp2);
// Output: 3 days before

echo $timestamp2-&gt;getFuzzyDifference('2008-01-01 8:00 am');
// Output: 3 days after

$timestamp3 = new fTimestamp('2008-01-10 1:00 am');

echo $timestamp3-&gt;getFuzzyDifference($timestamp1);
// Output: 1 week after

$timestamp4 = new fTimestamp('2008-01-28 12:00pm');

echo $timestamp4-&gt;getFuzzyDifference('2008-01-01 8:00 am');
// Output: 1 month after</code></pre>

<p>
 These examples show output when comparing an fTimestamp object with the current timestamp:
</p>
<pre class="block php"><code>// First, lets assume the current day/time is January 1st, 2008 at 9:00 am.

$timestamp1 = new fTimestamp('2008-01-01 12:00 pm');
$timestamp2 = new fTimestamp('2008-01-09 9:00 am');
$timestamp3 = new fTimestamp('2007-12-02 5:00 pm');

echo $timestamp1-&gt;getFuzzyDifference();
// Output: 3 hours from now

echo $timestamp2-&gt;getFuzzyDifference();
// Output: 1 week from now

echo $timestamp3-&gt;getFuzzyDifference();
// Output: 1 month ago</code></pre>

<p>
 An optional boolean parameter, <code>$simple</code>, can also be passed to <code>getFuzzyDifference()</code>. When <code>TRUE</code>, this parameter causes the method to return the difference in time, but not the direction.
</p>
<pre class="block php"><code>$timestamp1 = new fTimestamp('2008-01-01 8:00 am');
$timestamp2 = new fTimestamp('2008-01-04 5:00 pm');

echo $timestamp1-&gt;getFuzzyDifference($timestamp2, TRUE);
// Output: 3 days

echo $timestamp2-&gt;getFuzzyDifference('2008-01-01 8:00 am', TRUE);
// Output: 3 days

$timestamp3 = new fTimestamp('2008-01-10 1:00 am');

echo $timestamp3-&gt;getFuzzyDifference($timestamp1, TRUE);
// Output: 1 week</code></pre>

<h3 id="fTimestamp-docs-Localization">Localization</h3>

<p>
PHP contains built-in support for formatting date and times in different languages via the <a class="ext-link" href="http://php.net/setlocale"><span class="icon"><code>setlocale()</code></span></a> function. This function, however, has a number of shortcomings including it requiring a non-threaded web server and requiring that locale files be installed for each locale to support.
</p>

<p>
The fTimestamp class provides a hook for formatting <a href="#fDate">fDate</a>, <a href="#fTime">fTime</a> and fTimestamp objects in whatever fashion is necessary. A callback can be assigned to the hook by passing it to the static method <a href="#fTimestamp-api-registerFormatCallback"><code>registerFormatCallback()</code></a>. The callback should accept a single string and return a single string.
</p>

<p>
It is also possible to parse locale-specific date/time/timestamp strings by passing a callback to <a href="#fTimestamp-api-registerUnformatCallback"><code>registerUnformatCallback()</code></a>. The callback should accept a string and return a string that will properly be parsed by <a class="ext-link" href="http://php.net/strtotime"><span class="icon"><code>strtotime()</code></span></a>. An example of a valid return string would be <code>2009-05-01 15:22:01</code>.
</p>

<p>
Below is an example of how the hooks could be used.
</p>
<pre class="block php"><code>function parse_uk_dates($date_time_string)
{
    if (preg_match('#^(\d{1,2})/(\d{1,2})/(\d{2}|\d{4})$#', $date_time_string, $matches)) {
        if (strlen($matches[3]) == 2) {
            $matches[3] = ($matches[3] &lt;= 37) ? '20' . $matches[3] : '19' . $matches[3];
        }
        return $matches[3] . '-' . $matches[2] . '-' . $matches[1];
    }
    return $date_time_string;
}
function translate_dates_to_spanish($formatted_string)
{
    $replacements = array(
        'Monday' =&gt; 'lunes',
        // ...
        'Mon' =&gt; 'lun',
        // ...
    );
    return strtr($formatted_string, $replacements);
}
fTimestamp::registerFormatCallback('translate_dates_to_spanish');
fTimestamp::registerUnformatCallback('parse_uk_dates');</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fTimestamp-api">fTimestamp API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fTimestamp">Class Documentation</a></li>
		<li><strong><a href="#fTimestamp-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="protected variables">
<h4><a href="#fTimestamp-api-class_vars">Variables</a></h4>
<ul>
  	 		<li class="protected"><a href="#fTimestamp-api-timestamp">$timestamp</a></li>
	   	 		<li class="protected"><a href="#fTimestamp-api-timezone">$timezone</a></li>
	   </ul>
</div>
<div class="methods static">
<h4><a href="#fTimestamp-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  	  	  			<li class="protected"><a href="#fTimestamp-api-callFormatCallback">callFormatCallback()</a></li>
	  			<li class="protected"><a href="#fTimestamp-api-callUnformatCallback">callUnformatCallback()</a></li>
	  			<li class="protected"><a href="#fTimestamp-api-compose">compose()</a></li>
	  			<li><a href="#fTimestamp-api-defineFormat">defineFormat()</a></li>
	  	  			<li class="protected"><a href="#fTimestamp-api-fixISOWeek">fixISOWeek()</a></li>
	  	  			<li><a href="#fTimestamp-api-getDefaultTimezone">getDefaultTimezone()</a></li>
	  	  	  	  			<li class="protected"><a href="#fTimestamp-api-isValidTimezone">isValidTimezone()</a></li>
	  	  	  	  			<li><a href="#fTimestamp-api-registerFormatCallback">registerFormatCallback()</a></li>
	  			<li><a href="#fTimestamp-api-registerUnformatCallback">registerUnformatCallback()</a></li>
	  			<li class="protected"><a href="#fTimestamp-api-reset">reset()</a></li>
	  			<li><a href="#fTimestamp-api-setDefaultTimezone">setDefaultTimezone()</a></li>
	  			<li class="protected"><a href="#fTimestamp-api-translateFormat">translateFormat()</a></li>
	  </ul>
</div>
<div class="methods">
<h4><a href="#fTimestamp-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fTimestamp-api-__construct">__construct()</a></li>
	  			<li class="protected"><a href="#fTimestamp-api-__get">__get()</a></li>
	  			<li><a href="#fTimestamp-api-__toString">__toString()</a></li>
	  			<li><a href="#fTimestamp-api-adjust">adjust()</a></li>
	  	  	  	  	  			<li><a href="#fTimestamp-api-eq">eq()</a></li>
	  	  			<li><a href="#fTimestamp-api-format">format()</a></li>
	  	  			<li><a href="#fTimestamp-api-getFuzzyDifference">getFuzzyDifference()</a></li>
	  			<li><a href="#fTimestamp-api-gt">gt()</a></li>
	  			<li><a href="#fTimestamp-api-gte">gte()</a></li>
	  	  			<li><a href="#fTimestamp-api-lt">lt()</a></li>
	  			<li><a href="#fTimestamp-api-lte">lte()</a></li>
	  			<li><a href="#fTimestamp-api-modify">modify()</a></li>
	  	  	  	  	  	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
		<li><a href="#fGrammar">fGrammar</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fDatabase">fDatabase</a></li>
		<li><a href="#fDate">fDate</a></li>
		<li><a href="#fFile">fFile</a></li>
		<li><a href="#fLoader">fLoader</a></li>
		<li><a href="#fORM">fORM</a></li>
		<li><a href="#fORMDate">fORMDate</a></li>
		<li><a href="#fORMValidation">fORMValidation</a></li>
		<li><a href="#fRequest">fRequest</a></li>
		<li><a href="#fTime">fTime</a></li>
		<li><a href="#fValidation">fValidation</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b13</span></div>
<p class="short_description">Represents a date and time as a value object</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b13</th><td>Fixed a method signature <span class="date">8/24/11</span></td></tr><tr><th>1.0.0b12</th><td>Fixed a bug with the constructor not properly handling unix timestamps that are negative integers <span class="date">6/2/11</span></td></tr><tr><th>1.0.0b11</th><td>Changed the <tt>$timestamp</tt> and <tt>$timezone</tt> attributes to be protected <span class="date">3/20/11</span></td></tr><tr><th>1.0.0b10</th><td>Fixed a bug in <a href="#fTimestamp-api-__construct"><tt>__construct()</tt></a> with specifying a timezone other than the default for a relative time string such as &quot;now&quot; or &quot;+2 hours&quot; <span class="date">7/5/10</span></td></tr><tr><th>1.0.0b9</th><td>Added the <tt>$simple</tt> parameter to <a href="#fTimestamp-api-getFuzzyDifference"><tt>getFuzzyDifference()</tt></a> <span class="date">3/15/10</span></td></tr><tr><th>1.0.0b8</th><td>Fixed a bug with <a href="#fTimestamp-api-fixISOWeek"><tt>fixISOWeek()</tt></a> not properly parsing some ISO week dates <span class="date">10/6/09</span></td></tr><tr><th>1.0.0b7</th><td>Fixed a translation bug with <a href="#fTimestamp-api-getFuzzyDifference"><tt>getFuzzyDifference()</tt></a> <span class="date">7/11/09</span></td></tr><tr><th>1.0.0b6</th><td>Added <a href="#fTimestamp-api-registerUnformatCallback"><tt>registerUnformatCallback()</tt></a> and <a href="#fTimestamp-api-callUnformatCallback"><tt>callUnformatCallback()</tt></a> to allow for localization of date/time parsing <span class="date">6/1/09</span></td></tr><tr><th>1.0.0b5</th><td>Backwards compatibility break - Removed getSecondsDifference() and getSeconds(), added <a href="#fTimestamp-api-eq"><tt>eq()</tt></a>, <a href="#fTimestamp-api-gt"><tt>gt()</tt></a>, <a href="#fTimestamp-api-gte"><tt>gte()</tt></a>, <a href="#fTimestamp-api-lt"><tt>lt()</tt></a>, <a href="#fTimestamp-api-lte"><tt>lte()</tt></a> <span class="date">3/5/09</span></td></tr><tr><th>1.0.0b4</th><td>Updated for new <a href="#fCore">fCore</a> API <span class="date">2/16/09</span></td></tr><tr><th>1.0.0b3</th><td>Removed a useless double check of the strtotime() return value in <a href="#fTimestamp-api-__construct"><tt>__construct()</tt></a> <span class="date">1/21/09</span></td></tr><tr><th>1.0.0b2</th><td>Added support for CURRENT_TIMESTAMP, CURRENT_DATE and CURRENT_TIME SQL keywords <span class="date">1/11/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">2/12/08</span></td></tr></table></div>
<div class="class_variables" id="fTimestamp-api-class_vars">
<h4>Variables</h4>
	<!-- start protected variable -->
	<h5 id="fTimestamp-api-timestamp" class="protected variable"><span class="resolution">-></span><span class="name">timestamp</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>The date/time</p>
			</div>
		<h6>Type</h6>
		<p class="type">integer</p>
	</div>
	<!-- end variable -->
	<!-- start protected variable -->
	<h5 id="fTimestamp-api-timezone" class="protected variable"><span class="resolution">-></span><span class="name">timezone</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>The timezone for this date/time</p>
			</div>
		<h6>Type</h6>
		<p class="type">string</p>
	</div>
	<!-- end variable -->
</div>
<div class="class_methods static" id="fTimestamp-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start protected method static -->
			<h5 id="fTimestamp-api-callFormatCallback" class="protected method static"><span class="resolution">::</span><span class="name">callFormatCallback()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>If a format callback is defined, call it</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">callFormatCallback</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$formatted_string</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$formatted_string</td>
				<td class="param_description">The formatted date/time/timestamp string to be (possibly) modified</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The (possibly) modified formatted string
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fTimestamp-api-callUnformatCallback" class="protected method static"><span class="resolution">::</span><span class="name">callUnformatCallback()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>If an unformat callback is defined, call it</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">callUnformatCallback</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$date_time_string</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$date_time_string</td>
				<td class="param_description">A raw date/time/timestamp string to be (possibly) parsed/modified</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The (possibly) parsed or modified date/time/timestamp
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fTimestamp-api-compose" class="protected method static"><span class="resolution">::</span><span class="name">compose()</span> <span class="visibility">protected</span></h5>
			<div class="protected method static">
							<div class="method_description">
									<p>Composes text using <a href="#fText">fText</a> if loaded</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">compose</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$component</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message to compose</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$component <em>[, ... ]</em></td>
				<td class="param_description">A string or number to insert into the message</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The composed and possible translated message
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fTimestamp-api-defineFormat" class="method static"><span class="resolution">::</span><span class="name">defineFormat()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Creates a reusable format for formatting <a href="#fDate">fDate</a>, <a href="#fTime">fTime</a>, and <a href="#fTimestamp">fTimestamp</a> objects</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">defineFormat</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$formatting_string</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The name of the format</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$formatting_string</td>
				<td class="param_description">The format string compatible with the <a class="ext-link" href="http://php.net/date"><span class="icon"><tt>date()</tt></span></a> function</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fTimestamp-api-fixISOWeek" class="protected method static"><span class="resolution">::</span><span class="name">fixISOWeek()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Fixes an ISO week format into <tt>'Y-m-d'</tt> so <a class="ext-link" href="http://php.net/strtotime"><span class="icon"><tt>strtotime()</tt></span></a> will accept it</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">fixISOWeek</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$date</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$date</td>
				<td class="param_description">The date to fix</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The fixed date
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fTimestamp-api-getDefaultTimezone" class="method static"><span class="resolution">::</span><span class="name">getDefaultTimezone()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Provides a consistent interface to getting the default timezone. Wraps the <a class="ext-link" href="http://php.net/date_default_timezone_get"><span class="icon"><tt>date_default_timezone_get()</tt></span></a> function.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getDefaultTimezone</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					The default timezone used for all date/time calculations
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fTimestamp-api-isValidTimezone" class="protected method static"><span class="resolution">::</span><span class="name">isValidTimezone()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Checks to see if a timezone is valid</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">isValidTimezone</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$timezone</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$timezone</td>
				<td class="param_description">The timezone to check</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the timezone is valid
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fTimestamp-api-registerFormatCallback" class="method static"><span class="resolution">::</span><span class="name">registerFormatCallback()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Allows setting a callback to translate or modify any return values from format(), <a href="#fDate">fDate</a>format() and <a href="#fTime-api-format"><tt>fTime::format()</tt></a></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">registerFormatCallback</span><span class="php-brackets">(</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback to pass all formatted dates/times/timestamps through. Should accept a single string and return a single string.</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fTimestamp-api-registerUnformatCallback" class="method static"><span class="resolution">::</span><span class="name">registerUnformatCallback()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Allows setting a callback to parse any date strings passed into <a href="#fXML-api-__construct">__construct()</a>, <a href="#fDate">fDate</a><a href="#fXML-api-__construct">__construct()</a> and <a href="#fTime-api-__construct"><tt>fTime::__construct()</tt></a></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">registerUnformatCallback</span><span class="php-brackets">(</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback to pass all date/time/timestamp strings through. Should accept a single string and return a single string that is parsable by <a class="ext-link" href="http://php.net/strtotime"><span class="icon"><tt>strtotime()</tt></span></a>.</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fTimestamp-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fTimestamp-api-setDefaultTimezone" class="method static"><span class="resolution">::</span><span class="name">setDefaultTimezone()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Provides a consistent interface to setting the default timezone. Wraps the <a class="ext-link" href="http://php.net/date_default_timezone_set"><span class="icon"><tt>date_default_timezone_set()</tt></span></a> function.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setDefaultTimezone</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$timezone</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$timezone</td>
				<td class="param_description">The default timezone to use for all date/time calculations</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fTimestamp-api-translateFormat" class="protected method static"><span class="resolution">::</span><span class="name">translateFormat()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Takes a format name set via defineFormat() and returns the <a class="ext-link" href="http://php.net/date"><span class="icon"><tt>date()</tt></span></a> function formatting string</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">translateFormat</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$format</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$format</td>
				<td class="param_description">The format to translate</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The formatting string. If no matching format was found, this will be the same as the <tt>$format</tt> parameter.
				</p>
			</div>
			<!-- end method static -->
	</div>
<div class="class_methods" id="fTimestamp-api-class_methods">
<h4>Methods</h4>
						<!-- start method -->
			<h5 id="fTimestamp-api-__construct" class="method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Creates the date/time to represent</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fTimestamp">fTimestamp</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fTimestamp">fTimestamp</a>|object|string|integer</span> <span class="php-var">$datetime</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$timezone</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fTimestamp">fTimestamp</a>|object|string|integer</td>
				<td class="param_name">$datetime</td>
				<td class="param_description">The date/time to represent, <tt>NULL</tt> is interpreted as now</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$timezone</td>
				<td class="param_description">The timezone for the date/time. This causes the date/time to be interpretted as being in the specified timezone. If not specified, will default to timezone set by <a href="#fTimestamp-api-setDefaultTimezone"><tt>setDefaultTimezone()</tt></a>.</td>
			  </tr>
						</table>
			</div>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$datetime</tt> is not a valid date/time, date or time value</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fTimestamp-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTimestamp-api-__toString" class="method"><span class="resolution">-></span><span class="name">__toString()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns this date/time</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">__toString</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The <tt>'Y-m-d H:i:s'</tt> format of this date/time
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fTimestamp-api-adjust" class="method"><span class="resolution">-></span><span class="name">adjust()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Changes the date/time by the adjustment specified</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fTimestamp">fTimestamp</a></span> <span class="php-identifier">adjust</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$adjustment</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$adjustment</td>
				<td class="param_description">The adjustment to make - may be a relative adjustment or a different timezone</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The adjusted date/time
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When <tt>$adjustment</tt> is not a valid relative date/time measurement or timezone</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTimestamp-api-eq" class="method"><span class="resolution">-></span><span class="name">eq()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>If this timestamp is equal to the timestamp passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">eq</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fTimestamp">fTimestamp</a>|object|string|integer</span> <span class="php-var">$other_timestamp</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fTimestamp">fTimestamp</a>|object|string|integer</td>
				<td class="param_name">$other_timestamp</td>
				<td class="param_description">The timestamp to compare with, <tt>NULL</tt> is interpreted as today</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this timestamp is equal to the one passed
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTimestamp-api-format" class="method"><span class="resolution">-></span><span class="name">format()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Formats the date/time</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">format</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$format</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$format</td>
				<td class="param_description">The <a class="ext-link" href="http://php.net/date"><span class="icon"><tt>date()</tt></span></a> function compatible formatting string, or a format name from <a href="#fTimestamp-api-defineFormat"><tt>defineFormat()</tt></a></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The formatted date/time
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTimestamp-api-getFuzzyDifference" class="method"><span class="resolution">-></span><span class="name">getFuzzyDifference()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the approximate difference in time, discarding any unit of measure but the least specific.</p>
								<p>The output will read like:  </p><ul><li>&quot;This timestamp is <tt>{return value}</tt> the provided one&quot; when a timestamp it passed</li><li>&quot;This timestamp is <tt>{return value}</tt>&quot; when no timestamp is passed and comparing with the current timestamp</li></ul><p>Examples of output for a timestamp passed might be:  </p><ul><li><tt>'5 minutes after'</tt></li><li><tt>'2 hours before'</tt></li><li><tt>'2 days after'</tt></li><li><tt>'at the same time'</tt></li></ul><p>Examples of output for no timestamp passed might be:  </p><ul><li><tt>'5 minutes ago'</tt></li><li><tt>'2 hours ago'</tt></li><li><tt>'2 days from now'</tt></li><li><tt>'1 year ago'</tt></li><li><tt>'right now'</tt></li></ul><p>You would never get the following output since it includes more than one unit of time measurement:  </p><ul><li><tt>'5 minutes and 28 seconds'</tt></li><li><tt>'3 weeks, 1 day and 4 hours'</tt></li></ul><p>Values that are close to the next largest unit of measure will be rounded up:  </p><ul><li><tt>'55 minutes'</tt> would be represented as <tt>'1 hour'</tt>, however <tt>'45 minutes'</tt> would not</li><li><tt>'29 days'</tt> would be represented as <tt>'1 month'</tt>, but <tt>'21 days'</tt> would be shown as <tt>'3 weeks'</tt></li></ul>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getFuzzyDifference</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fTimestamp">fTimestamp</a>|object|string|integer</span> <span class="php-var">$other_timestamp</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$simple</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype">string</span> <span class="php-identifier">getFuzzyDifference</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$simple</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fTimestamp">fTimestamp</a>|object|string|integer</td>
				<td class="param_name">$other_timestamp</td>
				<td class="param_description">The timestamp to create the difference with, <tt>NULL</tt> is interpreted as now</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$simple</td>
				<td class="param_description">When <tt>TRUE</tt>, the returned value will only include the difference in the two timestamps, but not <tt>from now</tt>, <tt>ago</tt>, <tt>after</tt> or <tt>before</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The fuzzy difference in time between the this timestamp and the one provided
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTimestamp-api-gt" class="method"><span class="resolution">-></span><span class="name">gt()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>If this timestamp is greater than the timestamp passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">gt</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fTimestamp">fTimestamp</a>|object|string|integer</span> <span class="php-var">$other_timestamp</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fTimestamp">fTimestamp</a>|object|string|integer</td>
				<td class="param_name">$other_timestamp</td>
				<td class="param_description">The timestamp to compare with, <tt>NULL</tt> is interpreted as now</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this timestamp is greater than the one passed
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTimestamp-api-gte" class="method"><span class="resolution">-></span><span class="name">gte()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>If this timestamp is greater than or equal to the timestamp passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">gte</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fTimestamp">fTimestamp</a>|object|string|integer</span> <span class="php-var">$other_timestamp</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fTimestamp">fTimestamp</a>|object|string|integer</td>
				<td class="param_name">$other_timestamp</td>
				<td class="param_description">The timestamp to compare with, <tt>NULL</tt> is interpreted as now</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this timestamp is greater than or equal to the one passed
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTimestamp-api-lt" class="method"><span class="resolution">-></span><span class="name">lt()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>If this timestamp is less than the timestamp passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">lt</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fTimestamp">fTimestamp</a>|object|string|integer</span> <span class="php-var">$other_timestamp</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fTimestamp">fTimestamp</a>|object|string|integer</td>
				<td class="param_name">$other_timestamp</td>
				<td class="param_description">The timestamp to compare with, <tt>NULL</tt> is interpreted as today</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this timestamp is less than the one passed
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTimestamp-api-lte" class="method"><span class="resolution">-></span><span class="name">lte()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>If this timestamp is less than or equal to the timestamp passed</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">lte</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fTimestamp">fTimestamp</a>|object|string|integer</span> <span class="php-var">$other_timestamp</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fTimestamp">fTimestamp</a>|object|string|integer</td>
				<td class="param_name">$other_timestamp</td>
				<td class="param_description">The timestamp to compare with, <tt>NULL</tt> is interpreted as today</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If this timestamp is less than or equal to the one passed
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fTimestamp-api-modify" class="method"><span class="resolution">-></span><span class="name">modify()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Modifies the current timestamp, creating a new <a href="#fTimestamp">fTimestamp</a> object</p>
								<p>The purpose of this method is to allow for easy creation of a timestamp  based on this timestamp. Below are some examples of formats to  modify the current timestamp:  </p><ul><li><tt>'Y-m-01 H:i:s'</tt> to change the date of the timestamp to the first of the month:</li><li><tt>'Y-m-t H:i:s'</tt> to change the date of the timestamp to the last of the month:</li><li><tt>'Y-m-d 17:i:s'</tt> to set the hour of the timestamp to 5 PM:</li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fTimestamp">fTimestamp</a></span> <span class="php-identifier">modify</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$format</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$timezone</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$format</td>
				<td class="param_description">The current timestamp will be formatted with this string, and the output used to create a new object. The format should <strong>not</strong> include the timezone (character <tt>e</tt>).</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$timezone</td>
				<td class="param_description">The timezone for the new object if different from the current timezone</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The new timestamp
				</p>
		</div>
		<!-- end method -->	
								</div>		</section>
		</div>
		<section class="main">
<h2 id="fURL">fURL</h2>
<div class="sidebar">
<h3 id="fURL-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fURL">Class Documentation</a></strong></li>
<li><a href="#fURL-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fURL-docs-GettingURLInformation">Getting URL Information</a></li>
<li><a href="#fURL-docs-ModifyingtheQueryString">Modifying the Query String</a></li>
<li><a href="#fURL-docs-Redirection">Redirection</a></li>
<li><a href="#fURL-docs-URLCreation">URL Creation</a></li>
</ul>
</div>

<p>
The fURL class provides a simple and useful set of features for dealing with URLs in your site or application.
</p>

<h3 id="fURL-docs-GettingURLInformation">Getting URL Information</h3>

<p>
There are a few static methods that allow retrieval of URL information. All of these static methods return information about the URL as requested by the browser. All server-side rewrites are ignored.
</p>
<table><tbody>
<tr>
<td><strong>Method</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td><a href="#fURL-api-get"><code>get()</code></a></td>
<td><em>Returns the current URL minus the query string and domain name</em></td>
</tr>
<tr>
<td><a href="#fURL-api-getQueryString"><code>getQueryString()</code></a></td>
<td><em>Returns the current query string</em></td>
</tr>
<tr>
<td><a href="#fURL-api-getWithQueryString"><code>getWithQueryString()</code></a></td>
<td><em>Returns the current URL minus the domain name</em></td>
</tr>
<tr>
<td><a href="#fURL-api-getDomain"><code>getDomain()</code></a></td>
<td><em>Returns the current domain name with protocol prefix</em></td>
</tr>
</tbody></table>

<p>
Here are examples of them being used:
</p>
<pre class="block php"><code>// Since all of the methods are static, no instance of the fURL object is required
$url    = fURL::get();
$qs     = fURL::getQueryString();
$url_qs = fURL::getWithQueryString();
$domain = fURL::getDomain();</code></pre>

<h3 id="fURL-docs-ModifyingtheQueryString">Modifying the Query String</h3>

<p>
Beyond simply retrieving information about the URL, the fURL class also provides some functionality to modify the query string.
</p>

<p>
The <a href="#fURL-api-replaceInQueryString"><code>replaceInQueryString()</code></a> and <a href="#fURL-api-removeFromQueryString"><code>removeFromQueryString()</code></a> methods allow addition/replacement and deletion of a values in the query string, respectively. Similar to the various <code>get</code> methods, these methods work with the URL before any server-side rewrites were applied.
</p>

<p>
<code>replaceInQueryString()</code> takes two parameters, <code>$key</code> and <code>$value</code>. Any existing value for the key will be replaced. If no value exists for the key, the key will be added with the new value. Here is the method in use:
</p>
<pre class="block php"><code>// The following code assumes the query string is: example=one&amp;example_2=false

// $new_qs would end up being: example=one&amp;example_2=false&amp;example_3=today
$new_qs  = fURL::replaceInQueryString('example_3', 'today');

// $new_qs would end up being: example=two&amp;example_2=false
$new_qs  = fURL::replaceInQueryString('example', 'two');</code></pre>

<p>
 <code>removeFromQueryString()</code> takes any number of parameters with each one being a <code>GET</code> key/field. Any matching key in the query string will be removed. Here is an example of the method in action:
</p>
<pre class="block php"><code>// The following code assumes the query string is: example=one&amp;example_2=false

// $new_qs would end up being: example=one
$new_qs  = fURL::removeFromQueryString('example_2');</code></pre>

<h3 id="fURL-docs-Redirection">Redirection</h3>

<p>
The <a href="#fURL-api-redirect"><code>redirect()</code></a> method was built to simplify the task of redirecting a user to another web page. Simply pass the name of the site/page to redirect to as the only parameter and the method will determine the type of link it is (relative, web server absolute, etc.).
</p>

<p>
Since headers can only be sent before content, you will either need to ensure no content has been sent to the user yet, or that <a class="ext-link" href="http://php.net/outcontrol"><span class="icon">output buffering</span></a> has been enabled. The <a href="#fBuffer">fBuffer</a> class may be of interest if you are going to use output buffering.
</p>

<p>
The method will redirect to almost any URL provided, and will do so in standard-compliant way by sending a fully-formed (including protocol and domain name) URL in the HTTP headers. Here are some examples of how to use the <code>redirect()</code> method:
</p>
<pre class="block php"><code>// Redirect to an absolute web server path
fURL::redirect('/supplemental/example.php');

// Redirect to a relative page
fURL::redirect('example.php');

// Redirect to the current page with a different query string
fURL::redirect('?parameter=TRUE');

// Redirect to a fully-formed URL
fURL::redirect('http://example.com');
fURL::redirect('https://example.com/example.php');</code></pre>

<h3 id="fURL-docs-URLCreation">URL Creation</h3>

<p>
When creating websites with friendly URLs it is useful to be able to convert the title of something into a human-readable url without having to worry about punctuation or characters with diacritics creating those nasty hexadecimal codes.
</p>

<p>
The <a href="#fURL-api-makeFriendly"><code>makeFriendly()</code></a> method performs this URL creation task. You can pass in any UTF-8 string and you will get back a URL made up of lowercase letters, numbers and the underscore character. All characters with diacritics will be converted to their plain counterparts.
</p>

<p>
Here are some examples:
</p>
<pre class="block php"><code>// $url will be set to: /users/view/1/john_smith
$url = '/users/view/1/' . fURL::makeFriendly('John Smith');

// $url will be set to: /users/view/2/renee_smith
$url = '/users/view/2/' . fURL::makeFriendly('Rene Smith');

// $url will be set to: /news/view/1/notice_this_title_will_work_fine
$url = '/news/view/1/' . fURL::makeFriendly('Notice: This Title Will Work Fine!');</code></pre>

<p>
 It is possible to limit the character length of the generated string by passing a number to the optional second parameter <code>$max_length</code>.
</p>
<pre class="block php"><code>// Limit the URL to 40 characters
$limited_url = fURL::makeFriendly('This is a test of limiting the length of a URL', 40);</code></pre>

<p>
 By default <a href="#fURL-api-makeFriendly"><code>makeFriendly()</code></a> uses the <code>_</code> character to separate words. The optional third parameter, <code>$delimiter</code>, allows for changing this. If no length restriction is desired, the <code>$delimiter</code> can be passed as the second parameter.
</p>
<pre class="block php"><code>// Limit the URL to 40 characters and use - for the delimiter
$limited_url = fURL::makeFriendly('This is a test of length limiting and using a different delimiter', 40, '-');

// Use - for the delimiter
$limited_url = fURL::makeFriendly('This is a test of using a separate delimiter', '-');</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fURL-api">fURL API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fURL">Class Documentation</a></li>
		<li><strong><a href="#fURL-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fURL-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li><a href="#fURL-api-get">get()</a></li>
	  			<li><a href="#fURL-api-getDomain">getDomain()</a></li>
	  			<li><a href="#fURL-api-getQueryString">getQueryString()</a></li>
	  			<li><a href="#fURL-api-getWithQueryString">getWithQueryString()</a></li>
	  			<li><a href="#fURL-api-makeFriendly">makeFriendly()</a></li>
	  			<li><a href="#fURL-api-redirect">redirect()</a></li>
	  			<li><a href="#fURL-api-removeFromQueryString">removeFromQueryString()</a></li>
	  			<li><a href="#fURL-api-replaceInQueryString">replaceInQueryString()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fHTML">fHTML</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fUTF8">fUTF8</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fAuthorization">fAuthorization</a></li>
		<li><a href="#fCRUD">fCRUD</a></li>
		<li><a href="#fPagination">fPagination</a></li>
		<li><a href="#fRequest">fRequest</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b10</span></div>
<p class="short_description">Provides functionality to retrieve and manipulate URL information</p>
<div class="description"><p>This class uses <tt>$_SERVER['REQUEST_URI']</tt> for all operations, meaning that  the original URL entered by the user will be used, or that any rewrites  will <strong>not</strong> be reflected by this class.</p></div>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b10</th><td>Fixed some method signatures <span class="date">8/24/11</span></td></tr><tr><th>1.0.0b9</th><td>Fixed <a href="#fURL-api-redirect"><tt>redirect()</tt></a> to handle no parameters properly <span class="date">6/13/11</span></td></tr><tr><th>1.0.0b8</th><td>Added the <tt>$delimiter</tt> parameter to <a href="#fURL-api-makeFriendly"><tt>makeFriendly()</tt></a> <span class="date">6/3/11</span></td></tr><tr><th>1.0.0b7</th><td>Fixed <a href="#fURL-api-redirect"><tt>redirect()</tt></a> to be able to handle unqualified and relative paths <span class="date">3/2/11</span></td></tr><tr><th>1.0.0b6</th><td>Added the <tt>$max_length</tt> parameter to <a href="#fURL-api-makeFriendly"><tt>makeFriendly()</tt></a> <span class="date">9/19/10</span></td></tr><tr><th>1.0.0b5</th><td>Updated <a href="#fURL-api-redirect"><tt>redirect()</tt></a> to not require a URL, using the current URL as the default <span class="date">7/29/09</span></td></tr><tr><th>1.0.0b4</th><td><a href="#fURL-api-getDomain"><tt>getDomain()</tt></a> now includes the port number if non-standard <span class="date">5/2/09</span></td></tr><tr><th>1.0.0b3</th><td><a href="#fURL-api-makeFriendly"><tt>makeFriendly()</tt></a> now changes _-_ to - and multiple _ to a single _ <span class="date">3/24/09</span></td></tr><tr><th>1.0.0b2</th><td>Fixed <a href="#fURL-api-makeFriendly"><tt>makeFriendly()</tt></a> so that _ doesn't appear at the beginning of URLs <span class="date">3/22/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="class_methods static" id="fURL-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fURL-api-get" class="method static"><span class="resolution">::</span><span class="name">get()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns the requested URL, does no include the domain name or query string</p>
								<p>This will return the original URL requested by the user - ignores all  rewrites.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">get</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					The requested URL without the query string
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fURL-api-getDomain" class="method static"><span class="resolution">::</span><span class="name">getDomain()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns the current domain name, with protcol prefix. Port will be included if not 80 for HTTP or 443 for HTTPS.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getDomain</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					The current domain name, prefixed by <tt>http://</tt> or <tt>https://</tt>
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fURL-api-getQueryString" class="method static"><span class="resolution">::</span><span class="name">getQueryString()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns the current query string, does not include parameters added by rewrites</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getQueryString</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					The query string
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fURL-api-getWithQueryString" class="method static"><span class="resolution">::</span><span class="name">getWithQueryString()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns the current URL including query string, but without domain name - does not include query string parameters from rewrites</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getWithQueryString</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					The URL with query string
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fURL-api-makeFriendly" class="method static"><span class="resolution">::</span><span class="name">makeFriendly()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Changes a string into a URL-friendly string</p>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">makeFriendly</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$max_length</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$delimiter</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype">string</span> <span class="php-identifier">makeFriendly</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$delimiter</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to convert</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$max_length</td>
				<td class="param_description">The maximum length of the friendly URL</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$delimiter</td>
				<td class="param_description">The delimiter to use between words, defaults to <tt>_</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The URL-friendly version of the string
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fURL-api-redirect" class="method static"><span class="resolution">::</span><span class="name">redirect()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Redirects to the URL specified, without requiring a full-qualified URL</p>
								<ul><li>If the URL starts with <tt>/</tt>, it is treated as an absolute path on the current site</li><li>If the URL starts with <tt>http://</tt> or <tt>https://</tt>, it is treated as a fully-qualified URL</li><li>If the URL starts with anything else, including a <tt>?</tt>, it is appended to the current URL</li><li>If the URL is ommitted, it is treated as the current URL</li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">redirect</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$url</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$url</td>
				<td class="param_description">The url to redirect to</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fURL-api-removeFromQueryString" class="method static"><span class="resolution">::</span><span class="name">removeFromQueryString()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Removes one or more parameters from the query string</p>
								<p>This method uses the query string from the original URL and will not  contain any parameters that are from rewrites.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">removeFromQueryString</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$parameter</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$parameter <em>[, ... ]</em></td>
				<td class="param_description">A parameter to remove from the query string</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The query string with the parameter(s) specified removed, first character is <tt>?</tt>
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fURL-api-replaceInQueryString" class="method static"><span class="resolution">::</span><span class="name">replaceInQueryString()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Replaces a value in the query string</p>
								<p>This method uses the query string from the original URL and will not  contain any parameters that are from rewrites.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">replaceInQueryString</span><span class="php-brackets">(</span> <span class="php-vartype">string|array</span> <span class="php-var">$parameter</span><span class="php-code">,</span> <span class="php-vartype">string|array</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string|array</td>
				<td class="param_name">$parameter</td>
				<td class="param_description">The query string parameter</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string|array</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value to set the parameter to</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The full query string with the parameter replaced, first char is <tt>?</tt>
				</p>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fUTF8">fUTF8</h2>
<div class="sidebar">
<h3 id="fUTF8-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fUTF8">Class Documentation</a></strong></li>
<li><a href="#fUTF8-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fUTF8-docs-MethodtoFunctionMapping">Method to Function Mapping</a></li>
<li><a href="#fUTF8-docs-CleaningStringsSecurity">Cleaning Strings (Security)</a></li>
</ul>
</div>

<p>
The class fUTF8 is a static class that provides UTF-8 compatible versions of almost every string function that is provided with PHP. Since UTF-8 uses multiple bytes of data for some characters and the built-in PHP string functions are built to work with single-byte encodings, many of the PHP string functions will perform incorrectly on UTF-8 strings.
</p>

<p>
There is a PHP extension called <a class="ext-link" href="http://php.net/mbstring"><span class="icon">mbstring</span></a> that is designed for dealing with multi-byte string encodings, however it is not installed by default, does not include many commonly used functions, and contains some bugs. The fUTF8 class will use the mbstring extension for performance benefits in appropriate situations if it is installed.
</p>

<h3 id="fUTF8-docs-MethodtoFunctionMapping">Method to Function Mapping</h3>

<p>
The table below contains a list of the built-in PHP string functions with the equivalent fUTF8 method beside it. Any additional features or differences will also be listed.
</p>
<table><tbody>
<tr>
<td><strong>PHP Function</strong></td>
<td><strong>!fUTF8 Method</strong></td>
<td><strong>Differences</strong></td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/chr"><span class="icon"><code>chr()</code></span></a></td>
<td><a href="#fUTF8-api-chr"><code>chr()</code></a></td>
<td>Accepts U+hex or decimal Unicode code point instead of ASCII decimal value</td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/explode"><span class="icon"><code>explode()</code></span></a></td>
<td><a href="#fUTF8-api-explode"><code>explode()</code></a></td>
<td>Parameter order is switched to <code>$string</code>, <code>$delimeter</code> - also accepts <code>NULL</code> delimeter to explode into characters</td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/trim"><span class="icon"><code>ltrim()</code></span></a></td>
<td><a href="#fUTF8-api-ltrim"><code>ltrim()</code></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/ord"><span class="icon"><code>ord()</code></span></a></td>
<td><a href="#fUTF8-api-ord"><code>ord()</code></a></td>
<td>Returns U+hex Unicode code point instead of ASCII decimal value</td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/rtrim"><span class="icon"><code>rtrim()</code></span></a></td>
<td><a href="#fUTF8-api-rtrim"><code>rtrim()</code></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/str_ireplace"><span class="icon"><code>str_ireplace()</code></span></a></td>
<td><a href="#fUTF8-api-ireplace"><code>ireplace()</code></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/str_pad"><span class="icon"><code>str_pad()</code></span></a></td>
<td><a href="#fUTF8-api-pad"><code>pad()</code></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/str_replace"><span class="icon"><code>str_replace()</code></span></a></td>
<td><a href="#fUTF8-api-replace"><code>replace()</code></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/strcasecmp"><span class="icon"><code>strcasecmp()</code></span></a></td>
<td><a href="#fUTF8-api-icmp"><code>icmp()</code></a></td>
<td>Letters that are ASCII letters with diacritics are sorted right after the base ASCII letter</td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/strcmp"><span class="icon"><code>strcmp()</code></span></a></td>
<td><a href="#fUTF8-api-cmp"><code>cmp()</code></a></td>
<td>Letters that are ASCII letters with diacritics are sorted right after the base ASCII letter</td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/stripos"><span class="icon"><code>stripos()</code></span></a></td>
<td><a href="#fUTF8-api-ipos"><code>ipos()</code></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/stristr"><span class="icon"><code>stristr()</code></span></a></td>
<td><a href="#fUTF8-api-istr"><code>istr()</code></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/strlen"><span class="icon"><code>strlen()</code></span></a></td>
<td><a href="#fUTF8-api-len"><code>len()</code></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/strnatcasecmp"><span class="icon"><code>strnatcasecmp()</code></span></a></td>
<td><a href="#fUTF8-api-inatcmp"><code>inatcmp()</code></a></td>
<td>Letters that are ASCII letters with diacritics are sorted right after the base ASCII letter</td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/strnatcmp"><span class="icon"><code>strnatcmp()</code></span></a></td>
<td><a href="#fUTF8-api-natcmp"><code>natcmp()</code></a></td>
<td>Letters that are ASCII letters with diacritics are sorted right after the base ASCII letter</td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/strpos"><span class="icon"><code>strpos()</code></span></a></td>
<td><a href="#fUTF8-api-pos"><code>pos()</code></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/strrev"><span class="icon"><code>strrev()</code></span></a></td>
<td><a href="#fUTF8-api-rev"><code>rev()</code></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/strripos"><span class="icon"><code>strripos()</code></span></a></td>
<td><a href="#fUTF8-api-irpos"><code>irpos()</code></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/strrpos"><span class="icon"><code>strrpos()</code></span></a></td>
<td><a href="#fUTF8-api-rpos"><code>rpos()</code></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/strstr"><span class="icon"><code>strstr()</code></span></a></td>
<td><a href="#fUTF8-api-str"><code>str()</code></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/strtolower"><span class="icon"><code>strtolower()</code></span></a></td>
<td><a href="#fUTF8-api-lower"><code>lower()</code></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/strtoupper"><span class="icon"><code>strtoupper()</code></span></a></td>
<td><a href="#fUTF8-api-upper"><code>upper()</code></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/substr"><span class="icon"><code>substr()</code></span></a></td>
<td><a href="#fUTF8-api-sub"><code>sub()</code></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/trim"><span class="icon"><code>trim()</code></span></a></td>
<td><a href="#fUTF8-api-trim"><code>trim()</code></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/ucfirst"><span class="icon"><code>ucfirst()</code></span></a></td>
<td><a href="#fUTF8-api-ucfirst"><code>ucfirst()</code></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/ucwords"><span class="icon"><code>ucwords()</code></span></a></td>
<td><a href="#fUTF8-api-ucwords"><code>ucwords()</code></a></td>
</tr>
<tr>
<td><a class="ext-link" href="http://php.net/wordwrap"><span class="icon"><code>wordwrap()</code></span></a></td>
<td><a href="#fUTF8-api-wordwrap"><code>wordwrap()</code></a></td>
</tr>
</tbody></table>

<h3 id="fUTF8-docs-CleaningStringsSecurity">Cleaning Strings (Security)</h3>

<p>
Due to the way that UTF-8 is implemented, certain character combinations are not allowed. Allowing such invalid data into a system could easily lead to all sorts of bugs with character parsing. To solve this issue, the <a href="#fUTF8-api-clean"><code>clean()</code></a> method will remove any malformed UTF-8 characters from a string.
</p>

<p>
This method should be used when importing data into a system from an external data source that may contain invalid data. <em>Please note that <a href="#fRequest-api-get">fRequest::get()</a> and <a href="#fCookie-api-get">fCookie::get()</a> automatically call this method, so it is not necessary to clean it again.</em>
</p>
<pre class="block php"><code>$cleaned_string = fUTF8::clean($imported_string);</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fUTF8-api">fUTF8 API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fUTF8">Class Documentation</a></li>
		<li><strong><a href="#fUTF8-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fUTF8-api-class_methods_static">Static Methods</a></h4>
<ul>
  			<li class="protected"><a href="#fUTF8-api-ascii">ascii()</a></li>
	  			<li><a href="#fUTF8-api-chr">chr()</a></li>
	  			<li><a href="#fUTF8-api-clean">clean()</a></li>
	  			<li><a href="#fUTF8-api-cmp">cmp()</a></li>
	  			<li><a href="#fUTF8-api-explode">explode()</a></li>
	  			<li><a href="#fUTF8-api-icmp">icmp()</a></li>
	  			<li><a href="#fUTF8-api-inatcmp">inatcmp()</a></li>
	  			<li><a href="#fUTF8-api-ipos">ipos()</a></li>
	  			<li><a href="#fUTF8-api-ireplace">ireplace()</a></li>
	  			<li><a href="#fUTF8-api-irpos">irpos()</a></li>
	  			<li><a href="#fUTF8-api-istr">istr()</a></li>
	  			<li><a href="#fUTF8-api-len">len()</a></li>
	  			<li><a href="#fUTF8-api-lower">lower()</a></li>
	  			<li><a href="#fUTF8-api-ltrim">ltrim()</a></li>
	  			<li><a href="#fUTF8-api-natcmp">natcmp()</a></li>
	  			<li><a href="#fUTF8-api-ord">ord()</a></li>
	  			<li><a href="#fUTF8-api-pad">pad()</a></li>
	  			<li><a href="#fUTF8-api-pos">pos()</a></li>
	  			<li><a href="#fUTF8-api-replace">replace()</a></li>
	  			<li class="protected"><a href="#fUTF8-api-reset">reset()</a></li>
	  			<li><a href="#fUTF8-api-rev">rev()</a></li>
	  			<li><a href="#fUTF8-api-rpos">rpos()</a></li>
	  			<li><a href="#fUTF8-api-rtrim">rtrim()</a></li>
	  			<li><a href="#fUTF8-api-str">str()</a></li>
	  			<li><a href="#fUTF8-api-sub">sub()</a></li>
	  			<li><a href="#fUTF8-api-trim">trim()</a></li>
	  			<li><a href="#fUTF8-api-ucfirst">ucfirst()</a></li>
	  			<li><a href="#fUTF8-api-ucwords">ucwords()</a></li>
	  			<li><a href="#fUTF8-api-upper">upper()</a></li>
	  			<li><a href="#fUTF8-api-wordwrap">wordwrap()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fCookie">fCookie</a></li>
		<li><a href="#fEmail">fEmail</a></li>
		<li><a href="#fGrammar">fGrammar</a></li>
		<li><a href="#fJSON">fJSON</a></li>
		<li><a href="#fORMValidation">fORMValidation</a></li>
		<li><a href="#fPagination">fPagination</a></li>
		<li><a href="#fRecordSet">fRecordSet</a></li>
		<li><a href="#fRequest">fRequest</a></li>
		<li><a href="#fSQLTranslation">fSQLTranslation</a></li>
		<li><a href="#fURL">fURL</a></li>
		<li><a href="#fValidation">fValidation</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">static class</span>,
		<span class="version">v1.0.0b16</span></div>
<p class="short_description">Provides string functions for UTF-8 strings</p>
<div class="description"><p>This class is implemented to provide a UTF-8 version of almost every built-in  PHP string function. For more information about UTF-8, please visit  <a href="#UTF-8-docs">UTF-8</a>.</p></div>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b16</th><td>Added code to <a href="#fUTF8-api-clean"><tt>clean()</tt></a> to use mbstring if available since recent versions of iconv and <tt><em>IGNORE</tt> now return <tt>FALSE</tt> for bad encodings <span class="date">9/21/12</span></td></tr><tr><th>1.0.0b15</th><td>Fixed a bug with using IBM's iconv implementation on AIX <span class="date">7/29/11</span></td></tr><tr><th>1.0.0b14</th><td>Added a workaround for iconv having issues in MAMP 1.9.4+ <span class="date">7/26/11</span></td></tr><tr><th>1.0.0b13</th><td>Fixed notices from being thrown when invalid data is sent to <a href="#fUTF8-api-clean"><tt>clean()</tt></a> <span class="date">6/10/11</span></td></tr><tr><th>1.0.0b12</th><td>Fixed a variable name typo in <a href="#fUTF8-api-sub"><tt>sub()</tt></a> <span class="date">5/9/11</span></td></tr><tr><th>1.0.0b11</th><td>Updated the class to not using phpinfo() to determine the iconv implementation <span class="date">11/4/10</span></td></tr><tr><th>1.0.0b10</th><td>Fixed a bug with capitalizing a lowercase i resulting in a dotted upper-case I <span class="date">11/1/10</span></td></tr><tr><th>1.0.0b9</th><td>Updated class to use <a href="#fCore-api-startErrorCapture"><tt>fCore::startErrorCapture()</tt></a> instead of <tt>error_reporting()</tt> <span class="date">8/9/10</span></td></tr><tr><th>1.0.0b8</th><td>Removed <tt>e</tt> flag from preg_replace() calls <span class="date">6/8/10</span></td></tr><tr><th>1.0.0b7</th><td>Added the methods <a href="#fUTF8-api-trim"><tt>trim()</tt></a>, <a href="#fUTF8-api-rtrim"><tt>rtrim()</tt></a> and <a href="#fUTF8-api-ltrim"><tt>ltrim()</tt></a> <span class="date">5/11/10</span></td></tr><tr><th>1.0.0b6</th><td>Fixed <a href="#fUTF8-api-clean"><tt>clean()</tt></a> to work with PHP installs that use an iconv library that doesn't support </em>IGNORE <span class="date">3/2/10</span></td></tr><tr><th>1.0.0b5</th><td>Changed <a href="#fUTF8-api-ucwords"><tt>ucwords()</tt></a> to also uppercase words right after various punctuation <span class="date">9/18/09</span></td></tr><tr><th>1.0.0b4</th><td>Changed replacement values in preg_replace() calls to be properly escaped <span class="date">6/11/09</span></td></tr><tr><th>1.0.0b3</th><td>Fixed a parameter name in <a href="#fUTF8-api-rpos"><tt>rpos()</tt></a> from <tt>$search</tt> to <tt>$needle</tt> <span class="date">2/6/09</span></td></tr><tr><th>1.0.0b2</th><td>Fixed a bug in <a href="#fUTF8-api-explode"><tt>explode()</tt></a> with newlines and zero-length delimiters <span class="date">2/5/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/1/08</span></td></tr></table></div>
<div class="class_methods static" id="fUTF8-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start protected method static -->
			<h5 id="fUTF8-api-ascii" class="protected method static"><span class="resolution">::</span><span class="name">ascii()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Maps UTF-8 ASCII-based latin characters, puntuation, symbols and number forms to ASCII</p>
								<p>Any characters or symbols that can not be translated will be removed.</p><p>This function is most useful for situation that only allows ASCII, such  as in URLs.</p><p>Translates elements form the following unicode blocks:  </p><ul><li>Latin-1 Supplement</li><li>Latin Extended-A</li><li>Latin Extended-B</li><li>IPA Extensions</li><li>Latin Extended Additional</li><li>General Punctuation</li><li>Letterlike symbols</li><li>Number Forms</li></ul>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">ascii</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to convert</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The input string in pure ASCII
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-chr" class="method static"><span class="resolution">::</span><span class="name">chr()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Converts a unicode value into a UTF-8 character</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">chr</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$unicode_code_point</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$unicode_code_point</td>
				<td class="param_description">The character to create, either the <tt>U+hex</tt> or decimal code point</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The UTF-8 character
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-clean" class="method static"><span class="resolution">::</span><span class="name">clean()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Removes any invalid UTF-8 characters from a string or array of strings</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">clean</span><span class="php-brackets">(</span> <span class="php-vartype">array|string</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array|string</td>
				<td class="param_name">$value</td>
				<td class="param_description">The string or array of strings to clean</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The cleaned string
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-cmp" class="method static"><span class="resolution">::</span><span class="name">cmp()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Compares strings, with the resulting order having latin characters that are based on ASCII letters placed after the relative ASCII characters</p>
								<p>Please note that this function sorts based on English language sorting  rules only. Locale-sepcific sorting is done by  <a class="ext-link" href="http://php.net/strcoll"><span class="icon"><tt>strcoll()</tt></span></a>, however there are technical  limitations.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">cmp</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$str1</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$str2</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$str1</td>
				<td class="param_description">The first string to compare</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$str2</td>
				<td class="param_description">The second string to compare</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					&lt; 0 if $str1 &lt; $str2, 0 if they are equal, &gt; 0 if $str1 &gt; $str2
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-explode" class="method static"><span class="resolution">::</span><span class="name">explode()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Explodes a string on a delimiter</p>
								<p>If no delimiter is provided, the string will be exploded with each  characters being an element in the array.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">explode</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$delimiter</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to explode</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$delimiter</td>
				<td class="param_description">The string to explode on. If <tt>NULL</tt> or <tt>''</tt> this method will return one character per array index.</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The exploded string
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-icmp" class="method static"><span class="resolution">::</span><span class="name">icmp()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Compares strings in a case-insensitive manner, with the resulting order having characters that are based on ASCII letters placed after the relative ASCII characters</p>
								<p>Please note that this function sorts based on English language sorting  rules only. Locale-sepcific sorting is done by  <a class="ext-link" href="http://php.net/strcoll"><span class="icon"><tt>strcoll()</tt></span></a>, however there are technical  limitations.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">icmp</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$str1</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$str2</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$str1</td>
				<td class="param_description">The first string to compare</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$str2</td>
				<td class="param_description">The second string to compare</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					&lt; 0 if $str1 &lt; $str2, 0 if they are equal, &gt; 0 if $str1 &gt; $str2
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-inatcmp" class="method static"><span class="resolution">::</span><span class="name">inatcmp()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Compares strings using a natural order algorithm in a case-insensitive manner, with the resulting order having latin characters that are based on ASCII letters placed after the relative ASCII characters</p>
								<p>Please note that this function sorts based on English language sorting  rules only. Locale-sepcific sorting is done by  <a class="ext-link" href="http://php.net/strcoll"><span class="icon"><tt>strcoll()</tt></span></a>, however there are technical  limitations.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">inatcmp</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$str1</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$str2</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$str1</td>
				<td class="param_description">The first string to compare</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$str2</td>
				<td class="param_description">The second string to compare</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					<tt>&lt; 0</tt> if <tt>$str1 &lt; $str2</tt>, <tt>0</tt> if they are equal, <tt>&gt; 0</tt> if <tt>$str1 &gt; $str2</tt>
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-ipos" class="method static"><span class="resolution">::</span><span class="name">ipos()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Finds the first position (in characters) of the search value in the string - case is ignored when doing performing a match</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">ipos</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$haystack</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$needle</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$offset</span><span class="php-code">=</span>0 <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$haystack</td>
				<td class="param_description">The string to search in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$needle</td>
				<td class="param_description">The string to search for. This match will be done in a case-insensitive manner.</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$offset</td>
				<td class="param_description">The character position to start searching from</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The integer character position of the first occurence of the needle or <tt>FALSE</tt> if no match
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-ireplace" class="method static"><span class="resolution">::</span><span class="name">ireplace()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Replaces matching parts of the string, with matches being done in a a case-insensitive manner</p>
								<p>If <tt>$search</tt> and <tt>$replace</tt> are both arrays and <tt>$replace</tt> is shorter,  the extra <tt>$search</tt> string will be replaced with an empty string. If  <tt>$search</tt> is an array and <tt>$replace</tt> is a string, all <tt>$search</tt> values  will be replaced with the string specified.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">ireplace</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$search</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$replace</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to perform the replacements on</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$search</td>
				<td class="param_description">The string (or array of strings) to search for - see method description for details</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$replace</td>
				<td class="param_description">The string (or array of strings) to replace with - see method description for details</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The input string with the specified replacements
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-irpos" class="method static"><span class="resolution">::</span><span class="name">irpos()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Finds the last position (in characters) of the search value in the string - case is ignored when doing performing a match</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">irpos</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$haystack</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$needle</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$offset</span><span class="php-code">=</span>0 <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$haystack</td>
				<td class="param_description">The string to search in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$needle</td>
				<td class="param_description">The string to search for. This match will be done in a case-insensitive manner.</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$offset</td>
				<td class="param_description">The character position to start searching from. A negative value will stop looking that many characters from the end of the string</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The integer character position of the last occurence of the needle or <tt>FALSE</tt> if no match
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-istr" class="method static"><span class="resolution">::</span><span class="name">istr()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Matches a string needle in the string haystack, returning a substring from the beginning of the needle to the end of the haystack</p>
								<p>Can optionally return the part of the haystack before the needle. Matching  is done in a case-insensitive manner.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">istr</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$haystack</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$needle</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$before_needle</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$haystack</td>
				<td class="param_description">The string to search in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$needle</td>
				<td class="param_description">The string to search for. This match will be done in a case-insensitive manner.</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$before_needle</td>
				<td class="param_description">If a substring of the haystack before the needle should be returned instead of the substring from the needle to the end of the haystack</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The specified part of the haystack, or <tt>FALSE</tt> if the needle was not found
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-len" class="method static"><span class="resolution">::</span><span class="name">len()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Determines the length (in characters) of a string</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">len</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to measure</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The number of characters in the string
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-lower" class="method static"><span class="resolution">::</span><span class="name">lower()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Converts all uppercase characters to lowercase</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">lower</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to convert</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The input string with all uppercase characters in lowercase
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-ltrim" class="method static"><span class="resolution">::</span><span class="name">ltrim()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Trims whitespace, or any specified characters, from the beginning of a string</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">ltrim</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$charlist</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to trim</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$charlist</td>
				<td class="param_description">The characters to trim</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The trimmed string
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-natcmp" class="method static"><span class="resolution">::</span><span class="name">natcmp()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Compares strings using a natural order algorithm, with the resulting order having latin characters that are based on ASCII letters placed after the relative ASCII characters</p>
								<p>Please note that this function sorts based on English language sorting  rules only. Locale-sepcific sorting is done by  <a class="ext-link" href="http://php.net/strcoll"><span class="icon"><tt>strcoll()</tt></span></a>, however there are technical  limitations.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">natcmp</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$str1</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$str2</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$str1</td>
				<td class="param_description">The first string to compare</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$str2</td>
				<td class="param_description">The second string to compare</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					<tt>&lt; 0</tt> if <tt>$str1 &lt; $str2</tt>, <tt>0</tt> if they are equal, <tt>&gt; 0</tt> if <tt>$str1 &gt; $str2</tt>
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-ord" class="method static"><span class="resolution">::</span><span class="name">ord()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Converts a UTF-8 character to a unicode code point</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">ord</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$character</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$character</td>
				<td class="param_description">The character to decode</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The U+hex unicode code point for the character
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-pad" class="method static"><span class="resolution">::</span><span class="name">pad()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Pads a string to the number of characters specified</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">pad</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$pad_length</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$pad_string</span><span class="php-code">=</span>' '<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$pad_type</span><span class="php-code">=</span>'right' <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to pad</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$pad_length</td>
				<td class="param_description">The character length to pad the string to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$pad_string</td>
				<td class="param_description">The string to pad the source string with</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$pad_type</td>
				<td class="param_description">The type of padding to do: <tt>'left'</tt>, <tt>'right'</tt>, <tt>'both'</tt></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The input string padded to the specified character width
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-pos" class="method static"><span class="resolution">::</span><span class="name">pos()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Finds the first position (in characters) of the search value in the string</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">pos</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$haystack</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$needle</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$offset</span><span class="php-code">=</span>0 <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$haystack</td>
				<td class="param_description">The string to search in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$needle</td>
				<td class="param_description">The string to search for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$offset</td>
				<td class="param_description">The character position to start searching from</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The integer character position of the first occurence of the needle or <tt>FALSE</tt> if no match
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-replace" class="method static"><span class="resolution">::</span><span class="name">replace()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Replaces matching parts of the string</p>
								<p>If <tt>$search</tt> and <tt>$replace</tt> are both arrays and <tt>$replace</tt> is shorter,  the extra <tt>$search</tt> string will be replaced with an empty string. If  <tt>$search</tt> is an array and <tt>$replace</tt> is a string, all <tt>$search</tt> values  will be replaced with the string specified.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">replace</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$search</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$replace</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to perform the replacements on</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$search</td>
				<td class="param_description">The string (or array of strings) to search for - see method description for details</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$replace</td>
				<td class="param_description">The string (or array of strings) to replace with - see method description for details</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The input string with the specified replacements
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fUTF8-api-reset" class="protected method static"><span class="resolution">::</span><span class="name">reset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method static">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Resets the configuration of the class</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">reset</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-rev" class="method static"><span class="resolution">::</span><span class="name">rev()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Reverses a string</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">rev</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to reverse</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The reversed string
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-rpos" class="method static"><span class="resolution">::</span><span class="name">rpos()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Finds the last position (in characters) of the search value in the string</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">rpos</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$haystack</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$needle</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$offset</span><span class="php-code">=</span>0 <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$haystack</td>
				<td class="param_description">The string to search in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$needle</td>
				<td class="param_description">The string to search for.</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$offset</td>
				<td class="param_description">The character position to start searching from. A negative value will stop looking that many characters from the end of the string</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The integer character position of the last occurence of the needle or <tt>FALSE</tt> if no match
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-rtrim" class="method static"><span class="resolution">::</span><span class="name">rtrim()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Trims whitespace, or any specified characters, from the end of a string</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">rtrim</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$charlist</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to trim</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$charlist</td>
				<td class="param_description">The characters to trim</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The trimmed string
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-str" class="method static"><span class="resolution">::</span><span class="name">str()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Matches a string needle in the string haystack, returning a substring from the beginning of the needle to the end of the haystack</p>
								<p>Can optionally return the part of the haystack before the needle.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">str</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$haystack</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$needle</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$before_needle</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$haystack</td>
				<td class="param_description">The string to search in</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$needle</td>
				<td class="param_description">The string to search for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$before_needle</td>
				<td class="param_description">If a substring of the haystack before the needle should be returned instead of the substring from the needle to the end of the haystack</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The specified part of the haystack, or <tt>FALSE</tt> if the needle was not found
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-sub" class="method static"><span class="resolution">::</span><span class="name">sub()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Extracts part of a string</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">sub</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$start</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$length</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to extract from</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$start</td>
				<td class="param_description">The zero-based starting index to extract from. Negative values will start the extraction that many characters from the end of the string.</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$length</td>
				<td class="param_description">The length of the string to extract. If an empty value is provided, the remainder of the string will be returned.</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The extracted subtring or <tt>FALSE</tt> if the start is out of bounds
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-trim" class="method static"><span class="resolution">::</span><span class="name">trim()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Trims whitespace, or any specified characters, from the beginning and end of a string</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">trim</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$charlist</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to trim</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$charlist</td>
				<td class="param_description">The characters to trim, .. indicates a range</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The trimmed string
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-ucfirst" class="method static"><span class="resolution">::</span><span class="name">ucfirst()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Converts the first character of the string to uppercase.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">ucfirst</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to process</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The processed string
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-ucwords" class="method static"><span class="resolution">::</span><span class="name">ucwords()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Converts the first character of every word to uppercase</p>
								<p>Words are considered to start at the beginning of the string, or after any  whitespace character.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">ucwords</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to process</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The processed string
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-upper" class="method static"><span class="resolution">::</span><span class="name">upper()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Converts all lowercase characters to uppercase</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">upper</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to convert</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The input string with all lowercase characters in uppercase
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUTF8-api-wordwrap" class="method static"><span class="resolution">::</span><span class="name">wordwrap()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Wraps a string to a specific character width</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">wordwrap</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$string</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$width</span><span class="php-code">=</span>75<span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$break</span><span class="php-code">=</span>&quot;\n&quot;<span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$cut</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$string</td>
				<td class="param_description">The string to wrap</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$width</td>
				<td class="param_description">The character width to wrap to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$break</td>
				<td class="param_description">The string to insert as a break</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$cut</td>
				<td class="param_description">If words longer than the character width should be split to fit</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The input string with all lowercase characters in uppercase
				</p>
			</div>
			<!-- end method static -->
	</div>		</section>
		</div>
		<section class="main">
<h2 id="fUnbufferedResult">fUnbufferedResult</h2>
<div class="sidebar">
<h3 id="fUnbufferedResult-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fResult">Class Documentation</a></strong></li>
<li><a href="#fResult-api">API Reference</a></li>
<li><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/blob/master/fResult.php"><span class="icon">Source Code</span></a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fUnbufferedResult-docs-Creation">Creation</a></li>
<li><a href="#fUnbufferedResult-docs-RowFormat">Row Format</a></li>
<li><a href="#fUnbufferedResult-docs-UnescapingData">Unescaping Data</a></li>
<li><a href="#fUnbufferedResult-docs-Iteration">Iteration</a></li>
<li><a href="#fUnbufferedResult-docs-Exceptions">Exceptions</a></li>
<li><a href="#fUnbufferedResult-docs-QueryInfo">Query Info</a></li>
</ul>

<h3 id="fUnbufferedResult-docs-DatabaseClasses">Database Classes </h3>

<ul>
<li><a href="#fDatabase">fDatabase</a></li>
<li><a href="#fNoRowsException">fNoRowsException</a></li>
<li><a href="#fResult">fResult</a></li>
<li><a href="#fSQLException">fSQLException</a></li>
<li><a href="#fSQLTranslation">fSQLTranslation</a></li>
<li><a href="#fSQLSchemaTranslation">fSQLSchemaTranslation</a></li>
<li><a href="#fSchema">fSchema</a></li>
<li><a href="#fStatement">fStatement</a></li>
<li><strong>fUnbufferedResult</strong></li>
</ul>
</div>

<p>
The fUnbufferedResult class is an iterable result object that is returned when an SQL query is executed. It contains similar information to <a href="#fResult">fResult</a>, however some features are missing due to the nature of the results not being buffered. The quality of being unbuffered causes this object to use less memory than an <a href="#fResult">fResult</a> object.
</p>

<h3 id="fUnbufferedResult-docs-Creation">Creation</h3>

<p>
The fUnbufferedResult class can be created by executing the methods <a href="#fDatabase-api-unbufferedQuery">fDatabase::unbufferedQuery()</a> or <a href="#fDatabase-api-unbufferedTranslatedQuery">fDatabase::unbufferedTranslatedQuery()</a>.
</p>
<pre class="block php"><code>// Creation of fUnbufferedResult from a normal query
$result = $db-&gt;unbufferedQuery(&quot;SELECT * FROM users&quot;);

// Creation of an fUnbufferedResult object from a translated query
$result2 = $db-&gt;unbufferedTranslatedQuery(&quot;SELECT * FROM users LIMIT 5&quot;);</code></pre>

<h3 id="fUnbufferedResult-docs-RowFormat">Row Format</h3>

<p>
By default when retrieving rows from an unbuffered result object, they are returned as associative arrays. In the case of Oracle databases, where columns are case-insensitive, the array keys are lowercase.
</p>

<p>
It is possible to retrieve <code>stdClass</code> objects back for each row instead of associative arrays. This is done by calling the method <a href="#fUnbufferedResult-api-asObjects"><code>asObjects()</code></a>. The method returns the fUnbufferedResult object, allowing for method chaining:
</p>
<pre class="block php"><code>// Set the result to return objects
$res = $db-&gt;unbufferedQuery(&quot;SELECT * FROM users&quot;)-&gt;asObjects();</code></pre>

<p>
 <em>If you are looking for objects with more functionality, please see <a href="#fActiveRecord">fActiveRecord</a>.</em>
</p>

<h3 id="fUnbufferedResult-docs-UnescapingData">Unescaping Data</h3>

<p>
While it is certainly possible to manually unescape data from a result set, one row and column at a time, unescaping the whole result is often much easier. The method <a href="#fUnbufferedResult-api-unescape"><code>unescape()</code></a> accepts an associative array of the column name as the key and the data type as the value. This method should be called before any rows are fetched.
</p>
<pre class="block php"><code>$result = $db-&gt;unbufferedQuery(&quot;SELECT * FROM users&quot;);
$result-&gt;unescape(array(
    'first_name'       =&gt; 'string',
    'last_name'        =&gt; 'string',
    'is_authenticated' =&gt; 'boolean',
    'last_login'       =&gt; 'timestamp'
));

foreach ($result as $row) {
    // $row now contains the data in native PHP data types
}</code></pre>

<h3 id="fUnbufferedResult-docs-Iteration">Iteration</h3>

<p>
The fUnbufferedResult class implements the Iterator interface, which means that you can use the <code>foreach</code> construct to loop through all resulting rows. Below is an example of iterating over a result:
</p>
<pre class="block php"><code>$result = $db-&gt;unbufferedQuery(&quot;SELECT * FROM users&quot;);

foreach ($result as $row) {
    echo $row['name'] . '&lt;br /&gt;';
}</code></pre>

<p>
 If the result did not return any rows, the <code>foreach</code> construct will not be looped at all and the execution of the code will continue. If you wish to execute different code if no rows are returned, see the next section about <a href="#fUnbufferedResult-docs-Exceptions">exceptions</a>.
</p>

<p>
If you wish to to manual iteration you can use the <a href="#fUnbufferedResult-api-fetchRow"><code>fetchRow()</code></a> and <a href="#fUnbufferedResult-api-valid"><code>valid()</code></a> methods as shown below:
</p>
<pre class="block php"><code>// Iteration using valid() and fetchRow()
while ($result-&gt;valid()) {
    $row = $result-&gt;fetchRow();
}</code></pre>

<h3 id="fUnbufferedResult-docs-Exceptions">Exceptions</h3>

<p>
As mentioned in the last section, if you iterate through the result and no rows are returned, nothing will happen. If you do need to execute different code when no rows are returned, you will want to call the <a href="#fUnbufferedResult-api-tossIfNoRows"><code>tossIfNoRows()</code></a> to cause an <a href="#fNoRowsException">fNoRowsException</a> to be thrown:
</p>
<pre class="block php"><code>try {
    $result = $db-&gt;unbufferedQuery(&quot;SELECT * FROM users&quot;);
    $result-&gt;tossIfNoRows();
    ?&gt;
    &lt;h1&gt;Users&lt;/h1&gt;
    &lt;?
    foreach ($result as $row) {
        echo $row['name'] . '&lt;br /&gt;';
    }
} catch (fNoRowsException $e) {
    ?&gt;
    &lt;p&gt;No users were found&lt;/p&gt;
    &lt;?php
}</code></pre>

<p>
 In addition to calling <code>tossIfNoRows()</code>, an <a href="#fNoRowsException">fNoRowsException</a> will be thrown if any Iterator interface methods (such as <code>current()</code>, <code>next()</code>, etc) or <code>fetchRow()</code> is called on a result object which returned no rows.
</p>

<h3 id="fUnbufferedResult-docs-QueryInfo">Query Info</h3>

<p>
Since fUnbufferedResult does not use buffering, only a fraction of the information about a query is available compared to the <a href="#fResult">fResult</a> class.
</p>
<table><tbody>
<tr>
<td><strong>Method</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td><a href="#fUnbufferedResult-api-getSQL"><code>getSQL()</code></a></td>
<td>Returns the SQL statement executed for this result</td>
</tr>
<tr>
<td><a href="#fUnbufferedResult-api-getUntranslatedSQL"><code>getUntranslatedSQL()</code></a></td>
<td>Returns the SQL from before translation happened - only applicable for results from <a href="#fUnbufferedResult-api-unbufferedTranslatedQuery"><code>unbufferedTranslatedQuery()</code></a></td>
</tr>
</tbody></table>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fUnbufferedResult-api">fUnbufferedResult API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fUnbufferedResult">Class Documentation</a></li>
		<li><strong><a href="#fUnbufferedResult-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fUnbufferedResult-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  	  	  			<li class="protected"><a href="#fUnbufferedResult-api-compose">compose()</a></li>
	  	  	  	  	  	  	  	  	  	  	  	  			<li><a href="#fUnbufferedResult-api-silenceNotices">silenceNotices()</a></li>
	  	  	  	  </ul>
</div>
<div class="methods">
<h4><a href="#fUnbufferedResult-api-class_methods">Methods</a></h4>
<ul>
  			<li class="protected"><a href="#fUnbufferedResult-api-__construct">__construct()</a></li>
	  			<li class="protected"><a href="#fUnbufferedResult-api-__destruct">__destruct()</a></li>
	  			<li class="protected"><a href="#fUnbufferedResult-api-__get">__get()</a></li>
	  			<li><a href="#fUnbufferedResult-api-asObjects">asObjects()</a></li>
	  	  			<li class="protected"><a href="#fUnbufferedResult-api-current">current()</a></li>
	  			<li><a href="#fUnbufferedResult-api-fetchRow">fetchRow()</a></li>
	  			<li class="protected"><a href="#fUnbufferedResult-api-getResult">getResult()</a></li>
	  			<li><a href="#fUnbufferedResult-api-getSQL">getSQL()</a></li>
	  			<li><a href="#fUnbufferedResult-api-getUntranslatedSQL">getUntranslatedSQL()</a></li>
	  			<li class="protected"><a href="#fUnbufferedResult-api-key">key()</a></li>
	  			<li class="protected"><a href="#fUnbufferedResult-api-next">next()</a></li>
	  			<li class="protected"><a href="#fUnbufferedResult-api-rewind">rewind()</a></li>
	  			<li class="protected"><a href="#fUnbufferedResult-api-setResult">setResult()</a></li>
	  			<li class="protected"><a href="#fUnbufferedResult-api-setSQL">setSQL()</a></li>
	  			<li class="protected"><a href="#fUnbufferedResult-api-setUntranslatedSQL">setUntranslatedSQL()</a></li>
	  	  			<li><a href="#fUnbufferedResult-api-tossIfNoRows">tossIfNoRows()</a></li>
	  			<li><a href="#fUnbufferedResult-api-unescape">unescape()</a></li>
	  			<li><a href="#fUnbufferedResult-api-valid">valid()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fNoRemainingException">fNoRemainingException</a></li>
		<li><a href="#fNoRowsException">fNoRowsException</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
	<span class="implements"> implements Iterator </span>,	<span class="version">v1.0.0b13</span></div>
<p class="short_description">Representation of an unbuffered result from a query against the <a href="#fDatabase">fDatabase</a> class</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b13</th><td>Added a workaround for iconv having issues in MAMP 1.9.4+ <span class="date">7/26/11</span></td></tr><tr><th>1.0.0b12</th><td>Fixed MSSQL to have a properly reset row array, added <a href="#fUnbufferedResult-api-silenceNotices"><tt>silenceNotices()</tt></a>, fixed pdo_dblib on Windows when using the Microsoft DBLib driver <span class="date">5/9/11</span></td></tr><tr><th>1.0.0b11</th><td>Fixed some bugs with the mysqli extension and prepared statements <span class="date">8/28/10</span></td></tr><tr><th>1.0.0b10</th><td>Backwards Compatibility Break - removed ODBC support <span class="date">7/31/10</span></td></tr><tr><th>1.0.0b9</th><td>Added IBM DB2 support <span class="date">4/13/10</span></td></tr><tr><th>1.0.0b8</th><td>Added support for prepared statements <span class="date">3/2/10</span></td></tr><tr><th>1.0.0b7</th><td>Fixed a bug with decoding MSSQL national column when using an ODBC connection <span class="date">9/18/09</span></td></tr><tr><th>1.0.0b6</th><td>Added the method <a href="#fUnbufferedResult-api-unescape"><tt>unescape()</tt></a>, changed <a href="#fUnbufferedResult-api-tossIfNoRows"><tt>tossIfNoRows()</tt></a> to return the object for chaining <span class="date">8/12/09</span></td></tr><tr><th>1.0.0b5</th><td>Added the method <a href="#fUnbufferedResult-api-asObjects"><tt>asObjects()</tt></a> to allow for returning objects instead of associative arrays <span class="date">6/23/09</span></td></tr><tr><th>1.0.0b4</th><td>Fixed a bug with not properly converting SQL Server text to UTF-8 <span class="date">6/18/09</span></td></tr><tr><th>1.0.0b3</th><td>Added support for Oracle, various bug fixes <span class="date">5/4/09</span></td></tr><tr><th>1.0.0b2</th><td>Updated for new <a href="#fCore">fCore</a> API <span class="date">2/16/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">5/7/08</span></td></tr></table></div>
<div class="class_methods static" id="fUnbufferedResult-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start protected method static -->
			<h5 id="fUnbufferedResult-api-compose" class="protected method static"><span class="resolution">::</span><span class="name">compose()</span> <span class="visibility">protected</span></h5>
			<div class="protected method static">
							<div class="method_description">
									<p>Composes text using <a href="#fText">fText</a> if loaded</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">compose</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$component</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message to compose</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$component <em>[, ... ]</em></td>
				<td class="param_description">A string or number to insert into the message</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The composed and possible translated message
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fUnbufferedResult-api-silenceNotices" class="method static"><span class="resolution">::</span><span class="name">silenceNotices()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Turns off notices about broken database extensions much as the MSSQL DBLib driver</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">silenceNotices</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
				</div>
<div class="class_methods" id="fUnbufferedResult-api-class_methods">
<h4>Methods</h4>
			  			  									<!-- start protected method -->
			<h5 id="fUnbufferedResult-api-__construct" class="protected method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Configures the result set</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fUnbufferedResult">fUnbufferedResult</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fDatabase">fDatabase</a></span> <span class="php-var">$database</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$character_set</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fDatabase">fDatabase</a></td>
				<td class="param_name">$database</td>
				<td class="param_description">The database object this result was created from</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$character_set</td>
				<td class="param_description">MSSQL only: the character set to transcode from since MSSQL doesn't do UTF-8</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fUnbufferedResult-api-__destruct" class="protected method"><span class="resolution">-></span><span class="name">__destruct()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Frees up the result object</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">__destruct</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fUnbufferedResult-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fUnbufferedResult-api-asObjects" class="method"><span class="resolution">-></span><span class="name">asObjects()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the object to return rows as objects instead of associative arrays (the default)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fUnbufferedResult">fUnbufferedResult</a></span> <span class="php-identifier">asObjects</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The result object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
						<!-- start protected method -->
			<h5 id="fUnbufferedResult-api-current" class="protected method"><span class="resolution">-></span><span class="name">current()</span> <span class="visibility">internal public</span><span class="implements"> implements Iterator</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns the current row in the result set (required by iterator interface)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array|stdClass</span> <span class="php-identifier">current</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The current row
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fNoRemainingException">fNoRemainingException</a></dt><dd>When there are no rows left in the result</dd> <dt><a href="#fNoRowsException">fNoRowsException</a></dt><dd>When the query did not return any rows</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fUnbufferedResult-api-fetchRow" class="method"><span class="resolution">-></span><span class="name">fetchRow()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the row next row in the result set (where the pointer is currently assigned to)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array|stdClass</span> <span class="php-identifier">fetchRow</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The next row in the result
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fNoRemainingException">fNoRemainingException</a></dt><dd>When there are no rows left in the result</dd> <dt><a href="#fNoRowsException">fNoRowsException</a></dt><dd>When the query did not return any rows</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fUnbufferedResult-api-getResult" class="protected method"><span class="resolution">-></span><span class="name">getResult()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns the result</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">mixed</span> <span class="php-identifier">getResult</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The result of the query
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fUnbufferedResult-api-getSQL" class="method"><span class="resolution">-></span><span class="name">getSQL()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the SQL used in the query</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getSQL</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The SQL used in the query
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fUnbufferedResult-api-getUntranslatedSQL" class="method"><span class="resolution">-></span><span class="name">getUntranslatedSQL()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the SQL as it was before translation</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getUntranslatedSQL</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The SQL from before translation
				</p>
		</div>
		<!-- end method -->	
						<!-- start protected method -->
			<h5 id="fUnbufferedResult-api-key" class="protected method"><span class="resolution">-></span><span class="name">key()</span> <span class="visibility">internal public</span><span class="implements"> implements Iterator</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Returns the current row number (required by iterator interface)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">key</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The current row number
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fNoRemainingException">fNoRemainingException</a></dt><dd>When there are no rows left in the result</dd> <dt><a href="#fNoRowsException">fNoRowsException</a></dt><dd>When the query did not return any rows</dd></dl>
		</div>
		<!-- end method -->	
						<!-- start protected method -->
			<h5 id="fUnbufferedResult-api-next" class="protected method"><span class="resolution">-></span><span class="name">next()</span> <span class="visibility">internal public</span><span class="implements"> implements Iterator</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Advances to the next row in the result (required by iterator interface)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">next</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fNoRemainingException">fNoRemainingException</a></dt><dd>When there are no rows left in the result</dd> <dt><a href="#fNoRowsException">fNoRowsException</a></dt><dd>When the query did not return any rows</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fUnbufferedResult-api-rewind" class="protected method"><span class="resolution">-></span><span class="name">rewind()</span> <span class="visibility">internal public</span><span class="implements"> implements Iterator</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Rewinds the query (required by iterator interface)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">rewind</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fUnbufferedResult-api-setResult" class="protected method"><span class="resolution">-></span><span class="name">setResult()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets the result from the query</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setResult</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$result</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$result</td>
				<td class="param_description">The result from the query</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fUnbufferedResult-api-setSQL" class="protected method"><span class="resolution">-></span><span class="name">setSQL()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets the SQL used in the query</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setSQL</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$sql</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$sql</td>
				<td class="param_description">The SQL used in the query</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fUnbufferedResult-api-setUntranslatedSQL" class="protected method"><span class="resolution">-></span><span class="name">setUntranslatedSQL()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Sets the SQL from before translation</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setUntranslatedSQL</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$untranslated_sql</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$untranslated_sql</td>
				<td class="param_description">The SQL from before translation</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fUnbufferedResult-api-tossIfNoRows" class="method"><span class="resolution">-></span><span class="name">tossIfNoRows()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Throws an fNoResultException if the query did not return any rows</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fUnbufferedResult">fUnbufferedResult</a></span> <span class="php-identifier">tossIfNoRows</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message to use for the exception if there are no rows in this result set</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The result object, to allow for method chaining
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fNoRowsException">fNoRowsException</a></dt><dd>When the query did not return any rows</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fUnbufferedResult-api-unescape" class="method"><span class="resolution">-></span><span class="name">unescape()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the result object to unescape all values as they are retrieved from the object</p>
								<p>The data types should be from the list of types supported by  <a href="#fDatabase-api-unescape"><tt>fDatabase::unescape()</tt></a>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fUnbufferedResult">fUnbufferedResult</a></span> <span class="php-identifier">unescape</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$column_data_type_map</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$column_data_type_map</td>
				<td class="param_description">An associative array with column names as the keys and the data types as the values</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The result object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fUnbufferedResult-api-valid" class="method"><span class="resolution">-></span><span class="name">valid()</span> <span class="visibility">public</span><span class="implements"> implements Iterator</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns if the query has any rows left</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">valid</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 If the iterator is still valid
				</p>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="fUnexpectedException">fUnexpectedException</h2>
<div class="sidebar">
<h3 id="fUnexpectedException-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fUnexpectedException">Class Documentation</a></strong></li>
<li><a href="#fUnexpectedException-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fUnexpectedException-docs-SpecialFunctionality">Special Functionality</a></li>
<li><a href="#fUnexpectedException-docs-ChildClasses">Child Classes</a></li>
</ul>

<h3 id="fUnexpectedException-docs-ExceptionClasses">Exception Classes </h3>

<ul>
<li><a href="#fException">fException</a>
<ul>
<li><a href="#fExpectedException">fExpectedException</a>
<ul>
<li><a href="#fAuthorizationException">fAuthorizationException</a></li>
<li><a href="#fEmptySetException">fEmptySetException</a></li>
<li><a href="#fNoRemainingException">fNoRemainingException</a></li>
<li><a href="#fNoRowsException">fNoRowsException</a></li>
<li><a href="#fNotFoundException">fNotFoundException</a></li>
<li><a href="#fValidationException">fValidationException</a></li>
</ul>
</li>
<li><strong>fUnexpectedException</strong>
<ul>
<li><a href="#fConnectivityException">fConnectivityException</a></li>
<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
<li><a href="#fProgrammerException">fProgrammerException</a></li>
<li><a href="#fSQLException">fSQLException</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<p>
fUnexpectedException is a sub-class of <a href="#fException">fException</a> meant to provide a common parent class for all exceptions that should <strong><em>not</em></strong> be expected or handled in the site/application code.
</p>

<h3 id="fUnexpectedException-docs-SpecialFunctionality">Special Functionality</h3>

<p>
All classes that extend fUnexpectedException change the functionality of the <code>printMessage()</code> method. Instead of printing the exception message, a generic error message is printed. These classes are designed to be handled by the <a href="#fCore-api-enableExceptionHandling">fCore::enableExceptionHandling()</a> method, which intercepts all uncaught exceptions and delivers the backtrace via one of three methods (see the <a href="#fCore-docs-ErrorExceptionHandling">fCore class</a> for details).
</p>

<h3 id="fUnexpectedException-docs-ChildClasses">Child Classes</h3>

<p>
Below is a list of all child classes that extend fUnexpectedException. These classes are <strong><em>not</em></strong> documented using a <em>Throws:</em> entry in the API documentation since they should <strong><em>not</em></strong> be handled via normal site/application code.
</p>
<table><tbody>
<tr>
<td><strong>Class</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td><a href="#fConnectivityException">fConnectivityException</a></td>
<td>This type of exception indicates some sort of connection error occured, whether it be with a database server, remote API, etc.</td>
</tr>
<tr>
<td><a href="#fEnvironmentException">fEnvironmentException</a></td>
<td>This type of exception indicates something is wrong with the server environment that is preventing proper execution of code.</td>
</tr>
<tr>
<td><a href="#fProgrammerException">fProgrammerException</a></td>
<td>This type of exception indicates that the programming building the site/application wrote invalid code, or somehow otherwise violated an expected format or sequence.</td>
</tr>
<tr>
<td><a href="#fSQLException">fSQLException</a></td>
<td>This type of exception indicates an error was returned when executing an SQL query. This will not be thrown in the situation where a query returns no results, but rather when SQL syntax is incorrect.</td>
</tr>
</tbody></table>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fUnexpectedException-api">fUnexpectedException API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fUnexpectedException">Class Documentation</a></li>
		<li><strong><a href="#fUnexpectedException-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods">
<h4><a href="#fUnexpectedException-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fUnexpectedException-api-printMessage">printMessage()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fException">fException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fConnectivityException">fConnectivityException</a></li>
		<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fSMTP">fSMTP</a></li>
		<li><a href="#fSQLException">fSQLException</a></li>
		<li><a href="#fSession">fSession</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b2</span></div>
<p class="short_description">An exception that should probably not be handled by the display code, fCore::enableExceptionHandler() is recommended</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b2</th><td>Updated <a href="#fUnexpectedException-api-printMessage"><tt>printMessage()</tt></a> to use an ASCII dash to prevent encoding issues when an output encoding is not specified <span class="date">5/9/11</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="genealogy">	
	<h4>Genealogy</h4>
		<div class="class_tree">
		<h5>Class Tree</h5>
		<pre class="class_tree">Exception
   |
   --<a href="#fException">fException</a>
      |
      --fUnexpectedException</pre>
	</div>
		<div class="child_classes">
	<h5>Child Classes</h5>
	<dl>
		<dt><a href="#fConnectivityException">fConnectivityException</a></dt>
	<dd>An exception caused by a connectivity error</dd>
		<dt><a href="#fSQLException">fSQLException</a></dt>
	<dd>An exception occurred while executing a SQL statement</dd>
		<dt><a href="#fProgrammerException">fProgrammerException</a></dt>
	<dd>An exception caused by programmer error</dd>
		<dt><a href="#fEnvironmentException">fEnvironmentException</a></dt>
	<dd>An exception caused by an environment error such a file permissions</dd>
		</dl>
	</div>
		<div class="inherited_variables">
	<h5>Inherited Variables</h5>
		<dl>
		<dt class="protected">$code</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$file</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$line</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$message</dt>
	<dd class="protected"> </dd>
		<dt class="private">$previous</dt>
	<dd class="private"> </dd>
		<dt class="private">$string</dt>
	<dd class="private"> </dd>
		<dt class="private">$trace</dt>
	<dd class="private"> </dd>
		</dl>
		</div>
		<div class="inherited_methods">
	<h5>Inherited Methods</h5>
		<dl>
	  	  <dt class="public"><a href="#fException-api-__construct"><tt>fException::__construct()</tt></a></dt>
	  <dd class="public">Sets the message for the exception, allowing for string interpolation and internationalization</dd>
	  	  <dt class="public"><a href="#fException-api-__get"><tt>fException::__get()</tt></a></dt>
	  <dd class="public">All requests that hit this method should be requests for callbacks</dd>
	  	  <dt class="protected"><a href="#fException-api-compose"><tt>fException::compose()</tt></a></dt>
	  <dd class="protected">Composes text using <a href="#fText">fText</a> if loaded</dd>
	  	  <dt class="protected"><a href="#fException-api-dump"><tt>fException::dump()</tt></a></dt>
	  <dd class="protected">Creates a string representation of any variable using predefined strings for booleans, <tt>NULL</tt> and empty strings</dd>
	  	  <dt class="public"><a href="#fException-api-formatTrace"><tt>fException::formatTrace()</tt></a></dt>
	  <dd class="public">Gets the backtrace to currently called exception</dd>
	  	  <dt class="protected"><a href="#fException-api-getCSSClass"><tt>fException::getCSSClass()</tt></a></dt>
	  <dd class="protected">Returns the CSS class name for printing information about the exception</dd>
	  	  <dt class="protected"><a href="#fException-api-prepare"><tt>fException::prepare()</tt></a></dt>
	  <dd class="protected">Prepares content for output into HTML</dd>
	  	  <dt class="public"><a href="#fException-api-printMessage"><tt>fException::printMessage()</tt></a></dt>
	  <dd class="public">Prints the message inside of a div with the class being 'exception %THIS_EXCEPTION_CLASS_NAME%'</dd>
	  	  <dt class="public"><a href="#fException-api-printTrace"><tt>fException::printTrace()</tt></a></dt>
	  <dd class="public">Prints the backtrace to currently called exception inside of a pre tag with the class being 'exception %THIS_EXCEPTION_CLASS_NAME% trace'</dd>
	  	  <dt class="public"><a href="#fException-api-registerCallback"><tt>fException::registerCallback()</tt></a></dt>
	  <dd class="public">Adds a callback for when certain types of exceptions are created</dd>
	  	  <dt class="public"><a href="#fException-api-reorderMessage"><tt>fException::reorderMessage()</tt></a></dt>
	  <dd class="public">Reorders list items in the message based on simple string matching</dd>
	  	  <dt class="public"><a href="#fException-api-setMessage"><tt>fException::setMessage()</tt></a></dt>
	  <dd class="public">Allows the message to be overwriten</dd>
	  	  <dt class="public"><a href="#fException-api-splitMessage"><tt>fException::splitMessage()</tt></a></dt>
	  <dd class="public">Splits an exception with an HTML list into multiple strings each containing part of the original message</dd>
	  	</dl>
		<dl>
	  	  <dt class="public">constructor __construct ( [$message = ], [$code = ], [$previous = ] )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__clone (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__toString (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getCode (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getFile (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getLine (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getMessage (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getPrevious (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTrace (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTraceAsString (  )</dt>
	  <dd class="public"></dd>
	  	</dl>
		</div>
	</div>	
<div class="class_methods" id="fUnexpectedException-api-class_methods">
<h4>Methods</h4>
			  			  									<!-- start method -->
			<h5 id="fUnexpectedException-api-printMessage" class="method"><span class="resolution">-></span><span class="name">printMessage()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Prints out a generic error message inside of a <tt>div</tt> with the class being <tt>'exception {exception_class_name}'</tt></p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">printMessage</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
							<h6>Overrides</h6>
				<div class="overrides">
					<dl>
						<dt><a href="#fException-api-printMessage"><tt>fException::printMessage()</tt></a></dt>
												<dd>Prints the message inside of a div with the class being 'exception %THIS_EXCEPTION_CLASS_NAME%'</dd>
											</dl>
				</div>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="fUpload">fUpload</h2>
<div class="sidebar">
<h3 id="fUpload-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fUpload">Class Documentation</a></strong></li>
<li><a href="#fUpload-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fUpload-docs-Prerequisites">Prerequisites</a></li>
<li><a href="#fUpload-docs-Instantiation">Instantiation</a></li>
<li><a href="#fUpload-docs-SettingOptionsSecurity">Setting Options (Security)</a>
<ul>
<li><a href="#fUpload-docs-setMIMETypes">setMIMETypes()</a></li>
<li><a href="#fUpload-docs-setMaxSize">setMaxSize()</a></li>
<li><a href="#fUpload-docs-setOptional">setOptional()</a></li>
<li><a href="#fUpload-docs-enableOverwrite">enableOverwrite()</a></li>
<li><a href="#fUpload-docs-allowPHPallowDotFiles">allowPHP(), allowDotFiles()</a></li>
</ul>
</li>
<li><a href="#fUpload-docs-ValidationMoving">Validation/Moving</a>
<ul>
<li><a href="#fUpload-docs-move">move()</a></li>
<li><a href="#fUpload-docs-validate">validate()</a></li>
</ul>
</li>
<li><a href="#fUpload-docs-ArraysofFileUploads">Arrays of File Uploads</a>
<ul>
<li><a href="#fUpload-docs-Filtering">Filtering</a></li>
</ul>
</li>
</ul>

<h3 id="fUpload-docs-FilesystemClasses">Filesystem Classes </h3>

<ul>
<li><a href="#fFilesystem">fFilesystem</a></li>
<li><a href="#fFile">fFile</a>
<ul>
<li><a href="#fImage">fImage</a></li>
</ul>
</li>
<li><a href="#fDirectory">fDirectory</a></li>
<li><strong>fUpload</strong></li>
</ul>
</div>

<p>
The fUpload class provides functionality to validate and move files uploaded through HTML forms.
</p>

<h3 id="fUpload-docs-Prerequisites">Prerequisites</h3>

<p>
In order to use the fUpload class, a file needs to uploaded to PHP by the <code>POST</code> HTTP method. If the <code>POST</code> is coming from an HTML form, the form will need to have its <code>enctype</code> set to <code>multipart/form-data</code>.
</p>
<pre class="block html"><code>&lt;form action=&quot;&quot; method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot;&gt;
    &lt;fieldset&gt;
        &lt;p&gt;
            &lt;label for=&quot;file&quot;&gt;File&lt;/label&gt;
            &lt;input id=&quot;file&quot; type=&quot;file&quot; name=&quot;file&quot; /&gt;
        &lt;/p&gt;
    &lt;/fieldset&gt;
&lt;/form&gt;</code></pre>

<h3 id="fUpload-docs-Instantiation">Instantiation</h3>

<p>
The constructor does not accept any parameters.
</p>
<pre class="block php"><code>$uploader = new fUpload();</code></pre>

<h3 id="fUpload-docs-SettingOptionsSecurity">Setting Options (Security)</h3>

<p>
Uploaded files can be validated by configuring the fUpload instance using <a href="#fUpload-api-setMIMETypes"><code>setMIMETypes()</code></a>, <a href="#fUpload-api-setMaxSize"><code>setMaxSize()</code></a>, <a href="#fUpload-api-setOptional"><code>setOptional()</code></a>, <a href="#fUpload-api-enableOverwrite"><code>enableOverwrite()</code></a>, <a href="#fUpload-api-allowPHP"><code>allowPHP()</code></a> and <a href="#fUpload-api-allowDotFiles"><code>allowDotFiles()</code></a>. All of these methods must be called <em>before</em> the methods <a href="#fUpload-api-move"><code>move()</code></a> or <a href="#fUpload-api-validate"><code>validate()</code></a> are called.
</p>

<h4 id="fUpload-docs-setMIMETypes">setMIMETypes()</h4>

<p>
As with all other data accepted from users, file uploads should be filtered to only allow safe content. The method <code>setMIMETypes()</code> allows defining the mime types to allow with an appropriate error message. The first parameter is an array of valid mime types and the second parameter is the error message to display if the mime types are not matched.
</p>
<pre class="block php"><code>$uploader-&gt;setMIMETypes(
    array(
        'image/gif',
        'image/jpeg',
        'image/pjpeg',
        'image/png'
    ),
    'The file uploaded is not an image'
);</code></pre>

<p>
 While the <code>$_FILES</code> superglobal includes a mime type for the uploaded file, fUpload does not use this value since it is provided by the user and thus not trustworthy. Instead, mime type checking is done on the server side by inspecting the contents of the file. Please see the <a href="#fFile-api-getMimeType">fFile::getMimeType()</a> method documentation for a list of all supported mime types.
</p>

<h4 id="fUpload-docs-setMaxSize">setMaxSize()</h4>

<p>
<a href="#fUpload-api-setMaxSize"><code>setMaxSize()</code></a> allows validating a file to ensure it does not exceed a specific size. It accepts a single parameter, <code>$size</code>, that can be any filesize with units or an integer to be interpreted as bytes.
</p>

<p>
This method works in concert with two other settings, the <a class="ext-link" href="http://php.net/upload_max_filesize"><span class="icon">upload_max_filesize ini setting</span></a> and the <a class="ext-link" href="http://php.net/file-upload.post-method"><span class="icon">MAX_FILE_SIZE hidden input</span></a>. The <code>upload_max_filesize</code> ini setting controls the maximum size of a file that can be uploaded by a user, and must be larger or equal to the value passed to <code>setMaxSize()</code>. This setting can not be controlled in the PHP script since file uploads are processed before the request executes PHP.
</p>

<p>
The <code>MAX_FILE_SIZE</code> hidden input is primarily designed for the convenience of end-users since it will reject large files before they are fully uploaded. Since the hidden input element is controlled by the program submitting the request, it can no be trusted and the <code>setMaxSize()</code> method must be used as a server-side failsafe.
</p>
<pre class="block php"><code>// These three method calls will all limit the uploaded file to 2 megabytes
$uploader-&gt;setMaxSize('2m');
$uploader-&gt;setMaxSize('2MB');
$uploader-&gt;setMaxSize('2048k');</code></pre>

<h4 id="fUpload-docs-setOptional">setOptional()</h4>

<p>
By default, fUpload treats every file as required and will throw and exception or return an error if no file is uploaded. The method <a href="#fUpload-api-setOptional"><code>setOptional()</code></a> changes this behavior to not treat the absence of a file as an error. This will cause the <a href="#fUpload-api-move"><code>move()</code></a> method to return <code>NULL</code> when no file is uploaded.
</p>
<pre class="block php"><code>$uploader-&gt;setOptional();</code></pre>

<h4 id="fUpload-docs-enableOverwrite">enableOverwrite()</h4>

<p>
When uploading files, if there is an existing file with the same name in the destination directory the fUpload class will rename the uploaded file to a unique name. If this is not the desired action, the method <a href="#fUpload-api-enableOverwrite"><code>enableOverwrite()</code></a> will allow the class to overwrite existing files.
</p>
<pre class="block php"><code>$uploader-&gt;enableOverwrite();</code></pre>

<h4 id="fUpload-docs-allowPHPallowDotFiles">allowPHP(), allowDotFiles()</h4>

<p>
By default the fUpload class does not allow files ending in <code>.php</code>, <code>.php4</code> or <code>.php5</code> or beginning with <code>.</code> to be uploaded due to security concerns. If there is a need for PHP files to uploaded the method <a href="#fUpload-api-allowPHP"><code>allowPHP()</code></a> can be called. Files beginning with <code>.</code> may be allowed by calling <a href="#fUpload-api-allowDotFiles"><code>allowDotFiles()</code></a>.
</p>
<pre class="block php"><code>$uploader-&gt;allowPHP();
$uploader-&gt;allowDotFiles();</code></pre>

<h3 id="fUpload-docs-ValidationMoving">Validation/Moving</h3>

<p>
Once options have been set it is time to try moving (or possibly just validating) the uploaded file or files. The method <a href="#fUpload-api-move"><code>move()</code></a> will move the file uploading in the specified field to the directory requested, while the <a href="#fUpload-api-validate"><code>validate()</code></a> method will simply ensure the uploaded file matches the options that were set. Calling <code>move()</code> will also cause <code>validate()</code> to happen.
</p>

<h4 id="fUpload-docs-move">move()</h4>

<p>
The <a href="#fUpload-api-move"><code>move()</code></a> accepts three parameters, the <code>$directory</code> to move the file to, the <code>$field</code> the file was uploaded through and optionally the <code>$index</code> of the file if the file upload was part of an array of file upload fields. The return value is an <a href="#fFile">fFile</a> object representing the newly moved file. An <a href="#fValidationException">fValidationException</a> will be thrown if no file was uploaded or one of the options is not met.
</p>
<pre class="block php"><code>// An example of uploading a file passing the destination directory as a string
$file = $uploader-&gt;move('/uploaded/file/destination', 'file_input_name');

// An example of passing the destination directory as an fDirectory object
$dir = new fDirectory('/some/directory');
$file = $uploader-&gt;move($dir, 'file_input_name');</code></pre>

<p>
 If <a href="#fUpload-api-setOptional"><code>setOptional()</code></a> has been called and no file was uploaded, <code>NULL</code> will be returned instead of an <a href="#fFile">fFile</a> object.
</p>

<h4 id="fUpload-docs-validate">validate()</h4>

<p>
The <code>validate()</code> method accepts two parameters, the <code>$field</code> to validate and optionally the <code>$index</code> of the file if the file upload was part of an array of file upload fields. As with all other Flourish methods that begin with <code>validate</code>, this method will throw an <a href="#fValidationException">fValidationException</a> if one of the options is not met or no file is uploaded.
</p>
<pre class="block php"><code>$uploader-&gt;validate('file_input_name');</code></pre>

<p>
 It is also possible to return an error instead of throwing an exception by passing <code>TRUE</code> as the second parameter.
</p>
<pre class="block php"><code>// $error will contain any error that occurs, or NULL if there is none
$error = $uploader-&gt;validate('file_input_name', TRUE);</code></pre>

<h3 id="fUpload-docs-ArraysofFileUploads">Arrays of File Uploads</h3>

<p>
When it is necessary to have a user upload multiple file, it is possible to take advantage of PHP array syntax for input fields. Any input field name that ends in <code>[]</code> will cause an array to be created in the <code>$_GET</code> or <code>$_POST</code> superglobals for normal inputs, or in the <code>$_FILES</code> superglobal for file uploads. Please note that on the PHP side, the <code>[]</code> is dropped from the input name, e.g. <code>file_input_name[]</code> would be found in <code>$_FILES['file_input_name']</code>.
</p>
<pre class="block html"><code>&lt;form action=&quot;&quot; method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot;&gt;
    &lt;fieldset&gt;
        &lt;p&gt;
            &lt;label for=&quot;file_1&quot;&gt;File 1&lt;/label&gt;
            &lt;input id=&quot;file_1&quot; type=&quot;file&quot; name=&quot;file_input_name[]&quot; /&gt;
        &lt;/p&gt;
        &lt;p&gt;
            &lt;label for=&quot;file_2&quot;&gt;File 2&lt;/label&gt;
            &lt;input id=&quot;file_2&quot; type=&quot;file&quot; name=&quot;file_input_name[]&quot; /&gt;
        &lt;/p&gt;
    &lt;/fieldset&gt;
&lt;/form&gt;</code></pre>

<p>
 fUpload provides the static method <a href="#fUpload-api-count"><code>count()</code></a> to determine how many files were uploaded by a user. This can be used with the optional third parameter, <code>$index</code>, of <a href="#fUpload-api-move"><code>move()</code></a> or optional second parameter, <code>$index</code> of <a href="#fUpload-api-validate"><code>validate()</code></a> to perform the action on the specified file.
</p>
<pre class="block php"><code>$files    = array();
$uploaded = fUpload::count('file_input_name');
for ($i=0; $i &lt; $uploaded; $i++) {
    $files[] = $uploader-&gt;move($dir, 'file_input_name', $i);
}</code></pre>

<p>
 When an index is specified for <code>validate()</code>, the boolean <code>$return_message</code> parameter to return the message instead of throw an exception is passed as the third parameter.
</p>
<pre class="block php"><code>// Return an error for the second file upload named attachment
$error = $uploader-&gt;validate('attachment', 1, TRUE);</code></pre>

<h4 id="fUpload-docs-Filtering">Filtering</h4>

<p>
When multiple files are uploaded for a field, it is common for one or more file upload fields to not actually upload a file. The static method <a href="#fUpload-api-filter"><code>filter()</code></a> accepts a <code>$field</code> name and will removed info about any file upload fields where a file was not uploaded.
</p>
<pre class="block php"><code>fUpload::filter('attachments');
$uploader   = new fUpload();
$attachment = array();
$uploaded   = fUpload::count('attachments');
for ($i=0; $i &lt; $uploaded; $i++) {
    $attachments[] = $uploader-&gt;move($dir, 'attachments', $i);
}</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fUpload-api">fUpload API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fUpload">Class Documentation</a></li>
		<li><strong><a href="#fUpload-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="methods static">
<h4><a href="#fUpload-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  	  			<li><a href="#fUpload-api-check">check()</a></li>
	  			<li class="protected"><a href="#fUpload-api-compose">compose()</a></li>
	  			<li><a href="#fUpload-api-count">count()</a></li>
	  	  			<li><a href="#fUpload-api-filter">filter()</a></li>
	  	  	  	  	  	  	  	  </ul>
</div>
<div class="methods">
<h4><a href="#fUpload-api-class_methods">Methods</a></h4>
<ul>
  			<li class="protected"><a href="#fUpload-api-__get">__get()</a></li>
	  			<li><a href="#fUpload-api-allowDotFiles">allowDotFiles()</a></li>
	  			<li><a href="#fUpload-api-allowPHP">allowPHP()</a></li>
	  	  	  	  			<li><a href="#fUpload-api-enableOverwrite">enableOverwrite()</a></li>
	  	  			<li><a href="#fUpload-api-move">move()</a></li>
	  			<li><a href="#fUpload-api-setImageDimensions">setImageDimensions()</a></li>
	  			<li><a href="#fUpload-api-setImageRatio">setImageRatio()</a></li>
	  			<li><a href="#fUpload-api-setMaxSize">setMaxSize()</a></li>
	  			<li><a href="#fUpload-api-setMIMETypes">setMIMETypes()</a></li>
	  			<li><a href="#fUpload-api-setOptional">setOptional()</a></li>
	  			<li><a href="#fUpload-api-validate">validate()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fDirectory">fDirectory</a></li>
		<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
		<li><a href="#fFile">fFile</a></li>
		<li><a href="#fFilesystem">fFilesystem</a></li>
		<li><a href="#fImage">fImage</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fORMFile">fORMFile</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b15</span></div>
<p class="short_description">Provides validation and movement of uploaded files</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b15</th><td>Fixed an undefined variable error in <a href="#fUpload-api-setMaxSize"><tt>setMaxSize()</tt></a> <span class="date">9/16/12</span></td></tr><tr><th>1.0.0b14</th><td>Fixed some method signatures <span class="date">8/24/11</span></td></tr><tr><th>1.0.0b13</th><td>Changed the class to throw <a href="#fValidationException">fValidationException</a> objects instead of <a href="#fProgrammerException">fProgrammerException</a> objects when the form is improperly configured - this is to prevent error logs when bad requests are sent by scanners/hackers <span class="date">8/24/11</span></td></tr><tr><th>1.0.0b12</th><td>Fixed the <a href="#fUpload-api-filter"><tt>filter()</tt></a> callback constant <span class="date">11/24/10</span></td></tr><tr><th>1.0.0b11</th><td>Added <a href="#fUpload-api-setImageDimensions"><tt>setImageDimensions()</tt></a> and <a href="#fUpload-api-setImageRatio"><tt>setImageRatio()</tt></a> <span class="date">11/11/10</span></td></tr><tr><th>1.0.0b10</th><td>BackwardsCompatibilityBreak - renamed setMaxFilesize() to <a href="#fUpload-api-setMaxSize"><tt>setMaxSize()</tt></a> to be consistent with <a href="#fFile-api-getSize"><tt>fFile::getSize()</tt></a> <span class="date">5/30/10</span></td></tr><tr><th>1.0.0b9</th><td>BackwardsCompatibilityBreak - the class no longer accepts uploaded files that start with a <tt>.</tt> unless <a href="#fUpload-api-allowDotFiles"><tt>allowDotFiles()</tt></a> is called - added <a href="#fUpload-api-setOptional"><tt>setOptional()</tt></a> <span class="date">5/30/10</span></td></tr><tr><th>1.0.0b8</th><td>BackwardsCompatibilityBreak - <a href="#fUpload-api-validate"><tt>validate()</tt></a> no longer returns the <tt>$_FILES</tt> array for the file being validated - added <tt>$return_message</tt> parameter to <a href="#fUpload-api-validate"><tt>validate()</tt></a>, fixed a bug with detection of mime type for text files <span class="date">5/26/10</span></td></tr><tr><th>1.0.0b7</th><td>Added <a href="#fUpload-api-filter"><tt>filter()</tt></a> to allow for ignoring array file upload field entries that did not have a file uploaded <span class="date">10/6/09</span></td></tr><tr><th>1.0.0b6</th><td>Updated <a href="#fUpload-api-move"><tt>move()</tt></a> to use the new <a href="#fFilesystem-api-createObject"><tt>fFilesystem::createObject()</tt></a> method <span class="date">1/21/09</span></td></tr><tr><th>1.0.0b5</th><td>Removed some unnecessary error suppression operators from <a href="#fUpload-api-move"><tt>move()</tt></a> <span class="date">1/5/09</span></td></tr><tr><th>1.0.0b4</th><td>Updated <a href="#fUpload-api-validate"><tt>validate()</tt></a> so it properly handles upload max filesize specified in human-readable notation <span class="date">1/5/09</span></td></tr><tr><th>1.0.0b3</th><td>Removed the dependency on <a href="#fRequest">fRequest</a> <span class="date">1/5/09</span></td></tr><tr><th>1.0.0b2</th><td>Fixed a bug with validating filesizes <span class="date">11/25/08</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="class_methods static" id="fUpload-api-class_methods_static">
<h4>Static Methods</h4>
						<!-- start method static -->
			<h5 id="fUpload-api-check" class="method static"><span class="resolution">::</span><span class="name">check()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Checks to see if the field specified is a valid file upload field</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">check</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$throw_exception</span><span class="php-code">=</span>TRUE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field</td>
				<td class="param_description">The field to check</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$throw_exception</td>
				<td class="param_description">If an exception should be thrown when there are issues with the form</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the field is a valid file upload field
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>If <tt>$throw_exception</tt> is <tt>TRUE</tt> and the request was not a POST or the content type is not multipart/form-data</dd></dl>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fUpload-api-compose" class="protected method static"><span class="resolution">::</span><span class="name">compose()</span> <span class="visibility">protected</span></h5>
			<div class="protected method static">
							<div class="method_description">
									<p>Composes text using <a href="#fText">fText</a> if loaded</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">compose</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$component</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message to compose</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$component <em>[, ... ]</em></td>
				<td class="param_description">A string or number to insert into the message</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The composed and possible translated message
				</p>
			</div>
			<!-- end method static -->
						<!-- start method static -->
			<h5 id="fUpload-api-count" class="method static"><span class="resolution">::</span><span class="name">count()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Returns the number of files uploaded to a file upload array field</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">integer</span> <span class="php-identifier">count</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field</td>
				<td class="param_description">The field to get the number of files for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The number of uploaded files
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>If the form is not properly configured for file uploads</dd></dl>
			</div>
			<!-- end method static -->
						<!-- start method static -->
			<h5 id="fUpload-api-filter" class="method static"><span class="resolution">::</span><span class="name">filter()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Removes individual file upload entries from an array of file inputs in <tt>$_FILES</tt> when no file was uploaded</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">filter</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field</td>
				<td class="param_description">The field to filter</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The indexes of the files that were uploaded
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>If the form is not properly configured for file uploads</dd></dl>
			</div>
			<!-- end method static -->
								</div>
<div class="class_methods" id="fUpload-api-class_methods">
<h4>Methods</h4>
			  			  									<!-- start protected method -->
			<h5 id="fUpload-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fUpload-api-allowDotFiles" class="method"><span class="resolution">-></span><span class="name">allowDotFiles()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the upload class to allow files starting with a <tt>.</tt></p>
								<p>Files starting with <tt>.</tt> may change the behaviour of web servers,  for instance <tt>.htaccess</tt> files for Apache.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">allowDotFiles</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fUpload-api-allowPHP" class="method"><span class="resolution">-></span><span class="name">allowPHP()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the upload class to allow PHP files</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">allowPHP</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fUpload-api-enableOverwrite" class="method"><span class="resolution">-></span><span class="name">enableOverwrite()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Set the class to overwrite existing files in the destination directory instead of renaming the file</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">enableOverwrite</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fUpload-api-move" class="method"><span class="resolution">-></span><span class="name">move()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Moves an uploaded file from the temp directory to a permanent location</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fFile">fFile</a>|NULL</span> <span class="php-identifier">move</span><span class="php-brackets">(</span> <span class="php-vartype">string|<a href="#fDirectory">fDirectory</a></span> <span class="php-var">$directory</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$field</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$index</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string|<a href="#fDirectory">fDirectory</a></td>
				<td class="param_name">$directory</td>
				<td class="param_description">The directory to upload the file to</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field</td>
				<td class="param_description">The file upload field to get the file from</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$index</td>
				<td class="param_description">If the field was an array file upload field, upload the file corresponding to this index</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 An <a href="#fFile">fFile</a> (or <a href="#fImage">fImage</a>) object, or <tt>NULL</tt> if no file was uploaded
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When the form is not setup for file uploads, the <tt>$directory</tt> is somehow invalid or <a href="#fUpload-api-validate"><tt>validate()</tt></a> thows an exception</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fUpload-api-setImageDimensions" class="method"><span class="resolution">-></span><span class="name">setImageDimensions()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the allowable dimensions for an uploaded image</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setImageDimensions</span><span class="php-brackets">(</span> <span class="php-vartype">integer</span> <span class="php-var">$min_width</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$min_height</span><span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$max_width</span><span class="php-code">=</span>0<span class="php-code">,</span> <span class="php-vartype">integer</span> <span class="php-var">$max_height</span><span class="php-code">=</span>0 <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$min_width</td>
				<td class="param_description">The minimum width - <tt>0</tt> for no minimum</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$min_height</td>
				<td class="param_description">The minimum height - <tt>0</tt> for no minimum</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$max_width</td>
				<td class="param_description">The maximum width - <tt>0</tt> for no maximum</td>
			  </tr>
						  <tr>
				<td class="param_data_type">integer</td>
				<td class="param_name">$max_height</td>
				<td class="param_description">The maximum height - <tt>0</tt> for no maximum</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fUpload-api-setImageRatio" class="method"><span class="resolution">-></span><span class="name">setImageRatio()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the allowable dimensions for an uploaded image</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setImageRatio</span><span class="php-brackets">(</span> <span class="php-vartype">numeric</span> <span class="php-var">$width</span><span class="php-code">,</span> <span class="php-vartype">numeric</span> <span class="php-var">$height</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$allow_excess_dimension</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">numeric</td>
				<td class="param_name">$width</td>
				<td class="param_description">The minimum ratio width</td>
			  </tr>
						  <tr>
				<td class="param_data_type">numeric</td>
				<td class="param_name">$height</td>
				<td class="param_description">The minimum ratio height</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$allow_excess_dimension</td>
				<td class="param_description">The dimension that should allow for excess pixels</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fUpload-api-setMaxSize" class="method"><span class="resolution">-></span><span class="name">setMaxSize()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the maximum size the uploaded file may be</p>
								<p>This method should be used with the  <a class="ext-link" href="http://php.net/file-upload.post-method"><span class="icon"><tt>MAX_FILE_SIZE</tt></span></a> hidden form  input since the hidden form input will reject a file that is too large  before the file completely uploads, while this method will wait until the  whole file has been uploaded. This method should always be used since it  is very easy for the <tt>MAX_FILE_SIZE</tt> post field to be manipulated on the  client side.</p><p>This method can only further restrict the  <a class="ext-link" href="http://php.net/upload_max_filesize"><span class="icon"><tt>upload_max_filesize</tt> ini setting</span></a>,  it can not increase that setting. <tt>upload_max_filesize</tt> must be set  in the php.ini (or an Apache configuration) since file uploads are  handled before the request is handed off to PHP.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setMaxSize</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$size</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$size</td>
				<td class="param_description">The maximum file size (e.g. <tt>1MB</tt>, <tt>200K</tt>, <tt>10.5M</tt>) - <tt>0</tt> for no limit</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fUpload-api-setMIMETypes" class="method"><span class="resolution">-></span><span class="name">setMIMETypes()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the file mime types accepted</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setMIMETypes</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$mime_types</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$message</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$mime_types</td>
				<td class="param_description">The mime types to accept</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message to display if the uploaded file is not one of the mime type specified</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fUpload-api-setOptional" class="method"><span class="resolution">-></span><span class="name">setOptional()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the file upload to be optional instead of required</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setOptional</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fUpload-api-validate" class="method"><span class="resolution">-></span><span class="name">validate()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Validates the uploaded file, ensuring a file was actually uploaded and that is matched the restrictions put in place</p>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype">NULL|string</span> <span class="php-identifier">validate</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$index</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$return_message</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype">NULL|string</span> <span class="php-identifier">validate</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$return_message</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field</td>
				<td class="param_description">The field the file was uploaded through</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$index</td>
				<td class="param_description">If the field was an array of file uploads, this specifies which one to validate</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$return_message</td>
				<td class="param_description">If any validation error should be returned as a string instead of being thrown as an <a href="#fValidationException">fValidationException</a></td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If <tt>$return_message</tt> is not <tt>TRUE</tt> or if no error occurs, <tt>NULL</tt>, otherwise a string error message
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When the form is not configured for file uploads, no file is uploaded or the uploaded file violates the options set for this object</dd></dl>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="fValidation">fValidation</h2>
<div class="sidebar">
<h3 id="fValidation-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fValidation">Class Documentation</a></strong></li>
<li><a href="#fValidation-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fValidation-docs-Instantiation">Instantiation</a></li>
<li><a href="#fValidation-docs-SettingFieldsandRules">Setting Fields and Rules</a>
<ul>
<li><a href="#fValidation-docs-SimpleFieldValidation">Simple Field Validation</a></li>
<li><a href="#fValidation-docs-RuleValidation">Rule Validation</a>
<ul>
<li><a href="#fValidation-docs-addCallbackRule">addCallbackRule()</a></li>
<li><a href="#fValidation-docs-addConditionalRule">addConditionalRule()</a></li>
<li><a href="#fValidation-docs-addFileUploadRule">addFileUploadRule()</a></li>
<li><a href="#fValidation-docs-addOneOrMoreRule">addOneOrMoreRule()</a></li>
<li><a href="#fValidation-docs-addOnlyOneRule">addOnlyOneRule()</a></li>
<li><a href="#fValidation-docs-addRegexRule">addRegexRule()</a></li>
<li><a href="#fValidation-docs-addValidValuesRule">addValidValuesRule()</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#fValidation-docs-PerformingValidation">Performing Validation</a>
<ul>
<li><a href="#fValidation-docs-ReturningMessages">Returning Messages</a></li>
<li><a href="#fValidation-docs-ThrowinganExceptionandReturningMessages">Throwing an Exception and Returning Messages</a></li>
</ul>
</li>
<li><a href="#fValidation-docs-MessageCustomization">Message Customization</a>
<ul>
<li><a href="#fValidation-docs-overrideFieldName">overrideFieldName()</a></li>
<li><a href="#fValidation-docs-addRegexReplacement">addRegexReplacement()</a></li>
<li><a href="#fValidation-docs-addStringReplacement">addStringReplacement()</a></li>
</ul>
</li>
<li><a href="#fValidation-docs-OrderingErrors">Ordering Errors</a></li>
</ul>
</div>

<p>
The fValidation class provides an interface for validating standalone forms, such as a contact form. In these situations there are usually a mix of required fields and fields that require specific formatting. In addition, form contents that are emailing will often need to be checked to prevent <a class="ext-link" href="http://en.wikipedia.org/wiki/E-mail_injection"><span class="icon">email header injection</span></a> attacks.
</p>

<h3 id="fValidation-docs-Instantiation">Instantiation</h3>

<p>
The fValidation class must be instantiated before options can be set and the validation can be performed.
</p>
<pre class="block php"><code>$validator = new fValidation();</code></pre>

<h3 id="fValidation-docs-SettingFieldsandRules">Setting Fields and Rules</h3>

<p>
To have the class actually perform any validation it will need to know what fields and rules it is checking. 
</p>

<h4 id="fValidation-docs-SimpleFieldValidation">Simple Field Validation</h4>

<p>
The simplest validation is done by specifying individual fields against data types or input formats.
</p>
<table><tbody>
<tr>
<td><strong>Method</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td><a href="#fValidation-api-addRequiredFields"><code>addRequiredFields()</code></a></td>
<td><em>Requires that the field(s) specified have a value.</em></td>
</tr>
<tr>
<td><a href="#fValidation-api-addBooleanFields"><code>addBooleanFields()</code></a></td>
<td><em>Requires that the field(s) specified can be interpreted as a boolean if a value is entered.</em></td>
</tr>
<tr>
<td><a href="#fValidation-api-addDateFields"><code>addDateFields()</code></a></td>
<td><em>Requires that the field(s) specified can be interpreted as a date if a value is entered.</em></td>
</tr>
<tr>
<td><a href="#fValidation-api-addFloatFields"><code>addFloatFields()</code></a></td>
<td><em>Requires that the field(s) specified contain a floating point/decimal number if a value is entered.</em></td>
</tr>
<tr>
<td><a href="#fValidation-api-addIntegerFields"><code>addIntegerFields()</code></a></td>
<td><em>Requires that the field(s) specified contain an integer if a value is entered.</em></td>
</tr>
<tr>
<td><a href="#fValidation-api-addEmailFields"><code>addEmailFields()</code></a></td>
<td><em>Requires that the fields specified are formatted like an email address if a value is entered.</em></td>
</tr>
<tr>
<td><a href="#fValidation-api-addEmailHeaderFields"><code>addEmailHeaderFields()</code></a></td>
<td><em>Checks field(s) for line breaks to prevent email header injection. Should be used whenever embedding user input into email headers.</em></td>
</tr>
<tr>
<td><a href="#fValidation-api-addURLFields"><code>addURLFields()</code></a></td>
<td><em>Requires that the field(s) specified are formatted like a full URL (<a class="ext-link" href="http://example.com"><span class="icon">http://example.com</span></a>) if a value is entered.</em></td>
</tr>
</tbody></table>

<p>
Each of these methods takes any number of parameters with each parameter being a field name. Subsequent calls to the methods will add to the list of fields.
</p>
<pre class="block php"><code>// Require that name and email be filled in
$validator-&gt;addRequiredFields('name', 'email');

// Require that name and email be filled in, and that the email field contains an email address
$validator-&gt;addRequiredFields('name');
$vaildator-&gt;addRequiredFields('email');
$validator-&gt;addEmailFields('email');

// Require that name be filled in, and if birthday is specified that
// it will be interpreted as a date or time by fTimestamp
$validator-&gt;addRequiredFields('name');
$validator-&gt;addDateFields('birthday');</code></pre>

<h4 id="fValidation-docs-RuleValidation">Rule Validation</h4>

<p>
More advanced validation rules can be checked by using the following methods.
</p>

<h5 id="fValidation-docs-addCallbackRule">addCallbackRule()</h5>

<p>
<a href="#fValidation-api-addCallbackRule"><code>addCallbackRule()</code></a> accepts a <code>$field</code> to check, a <code>$callback</code> to execute and retrieve a boolean result from, and a <code>$message</code> to use when the result is <code>FALSE</code>.
</p>
<pre class="block php"><code>function check_length($value) {
    return strlen($value) &gt;= 8;
}
$validator-&gt;addCallbackRule('password', 'check_length', 'Please enter at least 8 characters');</code></pre>

<h5 id="fValidation-docs-addConditionalRule">addConditionalRule()</h5>

<p>
The method <a href="#fValidation-api-addConditionalRule"><code>addConditionalRule()</code></a> allows requiring one or more fields, if another field (or set of fields) has any value, or a value from a pre-defined set. The first parameter <code>$main_fields</code> accepts a single string field, or an array of fields. The second parameter, <code>$conditional_values</code>, accepts <code>NULL</code> or an array of values. The third parameter, <code>$conditional_fields</code>, accepts a single string field, or an array of fields.
</p>

<p>
If <code>$conditional_values</code> is <code>NULL</code>, and value present in any of the <code>$main_fields</code> will cause all <code>$conditional_fields</code> to be required. If <code>$conditional_values</code> is an array of values, if any of the <code>$main_fields</code> contains one of those values, all of the <code>$conditional_columns</code> will be required.
</p>
<pre class="block php"><code>// If the address, city, state_province, country or postal_code is filled
// in, require that at least the address and city are filled in
$validator-&gt;addConditionalRule(
    array('address', 'city', 'state_province', 'country', 'postal_code'),
    NULL,
    array('address', 'city')
);

// If the country is US or Canada, require the state_province and postal_code
$validator-&gt;addConditionalRule('country', array('US', 'CA'), array('state_province', 'postal_code'));</code></pre>

<h5 id="fValidation-docs-addFileUploadRule">addFileUploadRule()</h5>

<p>
When creating a form that includes file uploads via <a href="#fUpload">fUpload</a>, the <a href="#fValidation-api-addFileUploadRule"><code>addFileUploadRule()</code></a> method will combine the validation performed by <a href="#fUpload">fUpload</a> with the rest of the fValidation fields and rules. The first parameter is the file upload <code>$field</code>, the second parameter is the <a href="#fUpload">fUpload</a> instance, <code>$uploader</code>. All validation options for the file, including if it is required, are set via the <a href="#fUpload">fUpload</a> object.
</p>
<pre class="block php"><code>$uploader = new fUpload();
// Make the file upload optional
$uploader-&gt;setOptional();
$uploader-&gt;setMaxSize('1MB');
$validator-&gt;addFileUploadRule('attachment', $uploader);</code></pre>

<p>
 If a file upload field being validated is part of an array of file uploads, the array index can be passed as the second parameter to <code>addFileUploadRule()</code>, and the <code>$uploader</code> parameter should be passed as the third parameter.
</p>
<pre class="block php"><code>$uploader = new fUpload();
// Validate just the first attachment
$validator-&gt;addFileUploadRule('attachment', 0, $uploader);</code></pre>

<h5 id="fValidation-docs-addOneOrMoreRule">addOneOrMoreRule()</h5>

<p>
The method <a href="#fValidation-api-addOneOrMoreRule"><code>addOneOrMoreRule()</code></a> accepts two or more <code>$field</code> parameters, and requires that at least one of them has a value.
</p>
<pre class="block php"><code>$validator-&gt;addOneOrMoreRule('email', 'phone', 'cell_phone');</code></pre>

<h5 id="fValidation-docs-addOnlyOneRule">addOnlyOneRule()</h5>

<p>
The method <a href="#fValidation-api-addOnlyOneRule"><code>addOnlyOneRule()</code></a> accepts two or more <code>$field</code> parameters, and requires that exactly one of them has a value. It is considered an error if none, or more than one have a value.
</p>
<pre class="block php"><code>$validator-&gt;addOnlyOneRule('ssn', 'ein');</code></pre>

<h5 id="fValidation-docs-addRegexRule">addRegexRule()</h5>

<p>
The <a href="#fValidation-api-addRegexRule"><code>addRegexRule()</code></a> method allows validating non-blank values against a <a class="ext-link" href="http://php.net/pcre"><span class="icon">Perl-compatible regular expression</span></a> (PCRE). The first parameter is the <code>$field</code> to validate, followed by the <code>$regex</code> to test and the <code>$message</code> to use if the value does not match the expression.
</p>
<pre class="block php"><code>// Require the value is a length in in or cm
$validator-&gt;addRegexRule('length', '#^\d+\s*(in|cm)$#', 'Please enter a length');</code></pre>

<h5 id="fValidation-docs-addValidValuesRule">addValidValuesRule()</h5>

<p>
A value can be tested against a set of valid values by calling the method <a href="#fValidation-api-addValidValuesRule"><code>addValidValuesRule()</code></a>. This method accepts a <code>$field</code> to validate, followed by an array of <code>$valid_values</code>.
</p>
<pre class="block php"><code>// Require the value be 'yes', 'no' or 'maybe'
$validator-&gt;addValidValuesRule('answer', array('yes', 'no', 'maybe'));</code></pre>

<h3 id="fValidation-docs-PerformingValidation">Performing Validation</h3>

<p>
Once all of the fields and rules have been set, the <a href="#fValidation-api-validate"><code>validate()</code></a> method will check them all against the current request using <a href="#fRequest">fRequest</a>. If any errors are found an <a href="#fValidationException">fValidationException</a> will be thrown containing an explanation of the errors that occurred.
</p>

<p>
The <code>validate()</code> method will always evaluate all fields and rules so users will not have to submit a form multiple times to figure out everything they are doing wrong. Here is a full example:
</p>
<pre class="block php"><code>try {
    $validator = new fValidation();
    
    $validator-&gt;addRequiredFields('name');
    $validator-&gt;addOneOrMoreRule('email', 'phone'); 
    $validator-&gt;addEmailFields('email');
    $validator-&gt;addEmailHeaderFields('name', 'email');
    $validator-&gt;addDateFields('birthday');
    $validator-&gt;addURLFields('my_blog');

    $validator-&gt;validate();

    // Here would be the action of the contact form, such as sending an email

} catch (fValidationException $e) {
    fMessaging::create('error', $e-&gt;getMessage());
}</code></pre>

<p>
 The exception message that is generated will contain HTML including <code>&lt;p&gt;The following problems were found:&lt;/p&gt;</code> followed by a <code>&lt;ul&gt;</code> containing one <code>&lt;li&gt;</code> for each error detected. Below are some examples.
</p>
<pre class="block html"><code>&lt;p&gt;The following problems were found:&lt;/p&gt;
&lt;ul&gt;
    &lt;li&gt;Name: Please enter a value&lt;/li&gt;
    &lt;li&gt;Email, Phone: Please enter at least one&lt;/li&gt;
&lt;/ul&gt;</code></pre>
<pre class="block html"><code>&lt;p&gt;The following problems were found:&lt;/p&gt;
&lt;ul&gt;
    &lt;li&gt;Email: Please enter an email address in the form name@example.com&lt;/li&gt;
&lt;/ul&gt;</code></pre>

<h4 id="fValidation-docs-ReturningMessages">Returning Messages</h4>

<p>
If an exception is not desired, an array of individual error messages can be retrieved by passing <code>TRUE</code> to the first parameter of <a href="#fValidation-api-validate"><code>validate()</code></a>, <code>$return_messages</code>. The returned array will have keys that are the field name for individual fields, or the field names joined by <code>,</code>s for multiple fields. The values will be the error messages, including formatted field names.
</p>
<pre class="block php"><code>// Return the messages instead of throwing an exception
$messages = $validator-&gt;validate(TRUE);</code></pre>

<p>
 The <code>$messages</code> array will have a structure such as:
</p>
<pre class="block php"><code>array(
    'name'        =&gt; 'Name: Please enter a value',
    'email,phone' =&gt; 'Email, Phone: Please enter at least one'
)</code></pre>

<p>
 If the messages are being used for inline validation, it may be useful to remove the field names from the error messages. The field names can be removed by passing <code>TRUE</code> to the second parameter of <a href="#fValidation-api-validate"><code>validate()</code></a>, <code>$remove_field_names</code>.
</p>
<pre class="block php"><code>$messages = $validator-&gt;validate(TRUE, TRUE);</code></pre>

<p>
 In this case, the <code>$messages</code> array would look like:
</p>
<pre class="block php"><code>array(
    'name'        =&gt; 'Please enter a value',
    'email,phone' =&gt; 'Please enter at least one'
)</code></pre>

<h4 id="fValidation-docs-ThrowinganExceptionandReturningMessages">Throwing an Exception and Returning Messages</h4>

<p>
Often the most usable way to notify users of an error is to produce a full error message listing all errors on a form, but also to individually highlight the fields with errors. The <code>$return_messages</code> parameter and <a href="#fValidationException">fValidationException</a> can be used together to provide such functionality.
</p>

<p>
First, the messages should be returned by passing <code>TRUE</code> to the <code>$return_messages</code> parameter. The static method <a href="#fValidationException-api-removeFieldNames">fValidationException::removeFieldNames()</a> can be used to remove the field names from the error messages for inline field highlighting and then the <a href="#fValidationException">fValidationException</a> constructor can be used to generate a full error message.
</p>
<pre class="block php"><code>try {
    // ...
    
    $errors       = $validator-&gt;validate(TRUE);
    $field_errors = fValidationException::removeFieldNames($errors);
    if ($errors) {
        throw new fValidationException(
            'The following problems were found:',
            $errors
        );
    }
    
    // ...
    
} catch (fValidationException $e) {
    // fMessaging allows for creating session-based one-time-use messages
    fMessaging::create('error', $e-&gt;getMessage();
    fMessaging::create('field_errors', $field_errors);
}</code></pre>

<h3 id="fValidation-docs-MessageCustomization">Message Customization</h3>

<p>
Three methods exist to customize the messages generated, <a href="#fValidation-api-overrideFieldName"><code>overrideFieldName()</code></a>, <a href="#fValidation-api-addRegexReplacement"><code>addRegexReplacement()</code></a> and <a href="#fValidation-api-addStringReplacement"><code>addStringReplacement()</code></a>. Both regular expression and string replacements are suitable for changing error messages to use slightly different wording. More advanced message modification can be done library wide by using the features of <a href="#fText">fText</a>.
</p>

<h4 id="fValidation-docs-overrideFieldName">overrideFieldName()</h4>

<p>
By default, all field names are converted from <code>field_name</code> to <code>Field Name</code> for all error messages by <a href="#fGrammar-api-humanize">fGrammar::humanize()</a>. This conversion may be incorrect for non-English words or acronyms. <a href="#fValidation-api-overrideFieldName"><code>overrideFieldName()</code></a> accepts a <code>$field</code> and the <code>$name</code> to use for it.
</p>
<pre class="block php"><code>$validator-&gt;overrideFieldName('zip_code', 'ZIP Code');</code></pre>

<p>
 It is also possible to pass an associative array with fields as the keys and names as the values.
</p>
<pre class="block php"><code>$validator-&gt;overrideFieldName(array(
    'zip_code'       =&gt; 'ZIP Code',
    'state_province' =&gt; 'State/Province'
));</code></pre>

<p>
 <code>overrideFieldName()</code> can be called any number of times in either the two parameter, or one parameter signatures. If a field name is overridden more than once, the last override will be the one used.
</p>

<h4 id="fValidation-docs-addRegexReplacement">addRegexReplacement()</h4>

<p>
<a href="#fValidation-api-addRegexReplacement"><code>addRegexReplacement()</code></a> accepts two parameters, the <a class="ext-link" href="http://php.net/pcre"><span class="icon">Perl-compatible regular expression</span></a> to <code>$search</code> for and the string to <code>$replace</code> it with. This search and replace action is performed right before messages are reordered.
</p>
<pre class="block php"><code>$validator-&gt;addRegexReplacement('#Please enter a value$#', 'Please enter something');</code></pre>

<p>
 <em>Please note that <code>$replace</code> should be a string with all normal <code>$</code> and <code>\</code> characters escaped with a <code>\</code> since <a class="ext-link" href="http://php.net/preg_replace"><span class="icon"><code>preg_replace()</code></span></a> is used under-the-hood.</em> Because <code>preg_replace()</code> is used, it is also possible to use back-references in <code>$replace</code>.  
</p>
<pre class="block php"><code>// This will change &quot;Name: Please enter a value&quot; to &quot;Please enter a value for Name&quot;
$validator-&gt;addRegexReplacement('#^(.*?): (.*)$#', '\2 for \1');</code></pre>

<p>
 It is also possible to pass an associative array as a single with they keys being <code>$search</code> expressions and the values being <code>$replace</code> strings.
</p>
<pre class="block php"><code>$validator-&gt;addRegexReplacement(array(
    '#Please enter a value$#' =&gt; 'Please enter something',
    '#^(.*?): (.*)$#'          =&gt; '\2 for \1'
));</code></pre>

<p>
 <code>addRegexReplacement()</code> can be called any number of times, and the replacements will be added together. If a search value is passed more than once, the <code>$replace</code> parameter from the last method call will be the one used.
</p>

<h4 id="fValidation-docs-addStringReplacement">addStringReplacement()</h4>

<p>
The <a href="#fValidation-api-addStringReplacement"><code>addStringReplacement()</code></a> method works exactly like <a href="#fValidation-api-addRegexReplacement"><code>addRegexReplacement()</code></a>, except that the first parameter is a string to <code>$search</code> for and the second is plain string to <code>$replace</code> with. <code>$replace</code> does not require any escaping and obviously does not support back-references.
</p>
<pre class="block php"><code>$validator-&gt;addStringReplacement('Please enter a value', 'Please enter something');</code></pre>

<p>
 Also supported is a single parameter containing an associative array with the key being a string to search for and the value being the string to replace it with.
</p>
<pre class="block php"><code>$validator-&gt;addStringReplacement(array(
    'Please enter a value'        =&gt; 'Please enter something',
    'Please enter a whole number' =&gt; 'Please enter an integer'
));</code></pre>

<p>
 <code>addStringReplacement()</code> can be called any number of times to add multiple search/replace pairs. If the same search string is passed more than once, the replace string from the last method call will be used.
</p>

<h3 id="fValidation-docs-OrderingErrors">Ordering Errors</h3>

<p>
The order in which error messages appear in an exception, or the returned messages array, is based upon what order the class checks the various field and rules. Thus, while sometimes the <code>Email</code> field may appear first in the list, other times it may appear last. The <a href="#fValidation-api-setMessageOrder"><code>setMessageOrder()</code></a> method allows for consistent ordering of messages.
</p>

<p>
<code>setMessageOrder()</code> accepts any number of parameters, which are strings to search for. Any message that contains the first parameter will be listed first, any message that contains the second parameter will be listed second, and so on. Matches are done in a longest match first to ensure accidental matches dont occur. Errors that do not match any parameter are left at the end.
</p>

<p>
With the following exception message:
</p>
<pre><code>The following problems were found:
 - Last Name: Please enter a value
 - First Name: Please enter a value
 - Comments: Please enter a value
 - Company Email: Please enter a value
 - Personal Email: Please enter an email address in the form name@example.com</code></pre>

<p>
 And calling <code>setMessageOrder()</code> with the following parameters:
</p>
<pre class="block php"><code>$validator-&gt;setMessageOrder('First Name', 'Last Name', 'Email', 'Company Email', 'Comments');</code></pre>

<p>
 Will result in the message being changed to:
</p>
<pre><code>The following problems were found:
 - First Name: Please enter a value
 - Last Name: Please enter a value
 - Personal Email: Please enter an email address in the form name@example.com
 - Company Email: Please enter a value
 - Comments: Please enter a value</code></pre>

<p>
 Notice that <code>Personal Email</code> is listed before <code>Company Email</code> - this is because the fourth parameter <code>'Company Email'</code> was a longer match and the error was placed into position 4, while <code>Personal Email</code> was matched by the shorter parameter 3 and was placed in position 3.
</p>

<p>
Messages that match the parameters will always be ordered in the same relative order as the parameters, although they may not have the exact same position. This may occur if there is no error that matches a parameter, or if multiple messages match a parameter.
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fValidation-api">fValidation API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fValidation">Class Documentation</a></li>
		<li><strong><a href="#fValidation-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="protected methods static">
<h4><a href="#fValidation-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  	  			<li class="protected"><a href="#fValidation-api-compose">compose()</a></li>
	  	  	  			<li class="protected"><a href="#fValidation-api-stringlike">stringlike()</a></li>
	  	  </ul>
</div>
<div class="methods">
<h4><a href="#fValidation-api-class_methods">Methods</a></h4>
<ul>
  			<li class="protected"><a href="#fValidation-api-__get">__get()</a></li>
	  			<li><a href="#fValidation-api-addBooleanFields">addBooleanFields()</a></li>
	  			<li><a href="#fValidation-api-addCallbackRule">addCallbackRule()</a></li>
	  			<li><a href="#fValidation-api-addConditionalRule">addConditionalRule()</a></li>
	  			<li><a href="#fValidation-api-addDateFields">addDateFields()</a></li>
	  			<li><a href="#fValidation-api-addEmailFields">addEmailFields()</a></li>
	  			<li><a href="#fValidation-api-addEmailHeaderFields">addEmailHeaderFields()</a></li>
	  			<li><a href="#fValidation-api-addFileUploadRule">addFileUploadRule()</a></li>
	  			<li><a href="#fValidation-api-addFloatFields">addFloatFields()</a></li>
	  			<li><a href="#fValidation-api-addIntegerFields">addIntegerFields()</a></li>
	  			<li><a href="#fValidation-api-addOneOrMoreRule">addOneOrMoreRule()</a></li>
	  			<li><a href="#fValidation-api-addOnlyOneRule">addOnlyOneRule()</a></li>
	  			<li><a href="#fValidation-api-addRegexReplacement">addRegexReplacement()</a></li>
	  			<li><a href="#fValidation-api-addRegexRule">addRegexRule()</a></li>
	  			<li><a href="#fValidation-api-addRequiredFields">addRequiredFields()</a></li>
	  			<li><a href="#fValidation-api-addStringReplacement">addStringReplacement()</a></li>
	  			<li><a href="#fValidation-api-addURLFields">addURLFields()</a></li>
	  			<li><a href="#fValidation-api-addValidValuesRule">addValidValuesRule()</a></li>
	  	  			<li><a href="#fValidation-api-overrideFieldName">overrideFieldName()</a></li>
	  			<li><a href="#fValidation-api-setMessageOrder">setMessageOrder()</a></li>
	  	  			<li><a href="#fValidation-api-validate">validate()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fEmail">fEmail</a></li>
		<li><a href="#fGrammar">fGrammar</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fRequest">fRequest</a></li>
		<li><a href="#fTimestamp">fTimestamp</a></li>
		<li><a href="#fUTF8">fUTF8</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b12</span></div>
<p class="short_description">Provides validation routines for standalone forms, such as contact forms</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b12</th><td>Fixed some method signatures <span class="date">8/24/11</span></td></tr><tr><th>1.0.0b11</th><td>Fixed <a href="#fValidation-api-addCallbackRule"><tt>addCallbackRule()</tt></a> to be able to handle multiple rules per field <span class="date">6/2/11</span></td></tr><tr><th>1.0.0b10</th><td>Fixed <a href="#fValidation-api-addRegexRule"><tt>addRegexRule()</tt></a> to be able to handle multiple rules per field <span class="date">8/30/10</span></td></tr><tr><th>1.0.0b9</th><td>Enhanced all of the add fields methods to accept one field per parameter, or an array of fields <span class="date">6/24/10</span></td></tr><tr><th>1.0.0b8</th><td>Added/fixed support for array-syntax fields names <span class="date">6/9/10</span></td></tr><tr><th>1.0.0b7</th><td>Added the ability to pass an array of replacements to <a href="#fValidation-api-addRegexReplacement"><tt>addRegexReplacement()</tt></a> and <a href="#fValidation-api-addStringReplacement"><tt>addStringReplacement()</tt></a> <span class="date">5/31/10</span></td></tr><tr><th>1.0.0b6</th><td>BackwardsCompatibilityBreak - moved one-or-more required fields from <a href="#fValidation-api-addRequiredFields"><tt>addRequiredFields()</tt></a> to <a href="#fValidation-api-addOneOrMoreRule"><tt>addOneOrMoreRule()</tt></a>, moved conditional required fields from <a href="#fValidation-api-addRequiredFields"><tt>addRequiredFields()</tt></a> to <a href="#fValidation-api-addConditionalRule"><tt>addConditionalRule()</tt></a>, changed returned messages array to have field name keys - added lots of functionality <span class="date">5/26/10</span></td></tr><tr><th>1.0.0b5</th><td>Added the <tt>$return_messages</tt> parameter to <a href="#fValidation-api-validate"><tt>validate()</tt></a> and updated code for new <a href="#fValidationException">fValidationException</a> API <span class="date">9/17/09</span></td></tr><tr><th>1.0.0b4</th><td>Changed date checking from <tt>strtotime()</tt> to <a href="#fTimestamp">fTimestamp</a> for better localization support <span class="date">6/1/09</span></td></tr><tr><th>1.0.0b3</th><td>Updated for new <a href="#fCore">fCore</a> API <span class="date">2/16/09</span></td></tr><tr><th>1.0.0b2</th><td>Added support for validating date and URL fields <span class="date">1/23/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="class_methods static" id="fValidation-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start protected method static -->
			<h5 id="fValidation-api-compose" class="protected method static"><span class="resolution">::</span><span class="name">compose()</span> <span class="visibility">protected</span></h5>
			<div class="protected method static">
							<div class="method_description">
									<p>Composes text using <a href="#fText">fText</a> if loaded</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">compose</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$component</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The message to compose</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$component <em>[, ... ]</em></td>
				<td class="param_description">A string or number to insert into the message</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The composed and possible translated message
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start protected method static -->
			<h5 id="fValidation-api-stringlike" class="protected method static"><span class="resolution">::</span><span class="name">stringlike()</span> <span class="visibility">protected</span></h5>
			<div class="protected method static">
							<div class="method_description">
									<p>Returns <tt>TRUE</tt> for non-empty strings, numbers, objects, empty numbers and string-like numbers (such as <tt>0</tt>, <tt>0.0</tt>, <tt>'0'</tt>)</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">stringlike</span><span class="php-brackets">(</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value to check</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					If the value is string-like
				</p>
			</div>
			<!-- end method static -->
		</div>
<div class="class_methods" id="fValidation-api-class_methods">
<h4>Methods</h4>
			  			  									<!-- start protected method -->
			<h5 id="fValidation-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>All requests that hit this method should be requests for callbacks</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">callback</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$method</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$method</td>
				<td class="param_description">The method to create a callback for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The callback for the method requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fValidation-api-addBooleanFields" class="method"><span class="resolution">-></span><span class="name">addBooleanFields()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds fields to be checked for 1/0, t/f, true/false, yes/no</p>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addBooleanFields</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addBooleanFields</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$fields</span> <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field <em>[, ... ]</em></td>
				<td class="param_description">A field that should contain a boolean value</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$fields</td>
				<td class="param_description">Any number of fields that should contain a boolean value</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The validation object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fValidation-api-addCallbackRule" class="method"><span class="resolution">-></span><span class="name">addCallbackRule()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds a callback validation of a field, with a custom error message</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addCallbackRule</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span><span class="php-code">,</span> <span class="php-vartype">callback</span> <span class="php-var">$callback</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$message</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field</td>
				<td class="param_description">The field to test with the callback</td>
			  </tr>
						  <tr>
				<td class="param_data_type">callback</td>
				<td class="param_name">$callback</td>
				<td class="param_description">The callback to test the value with - this callback should accept a single string parameter and return a boolean</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The error message to return if the regular expression does not match the value</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The validation object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fValidation-api-addConditionalRule" class="method"><span class="resolution">-></span><span class="name">addConditionalRule()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds fields to be conditionally required if another field has any value, or specific values</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addConditionalRule</span><span class="php-brackets">(</span> <span class="php-vartype">string|array</span> <span class="php-var">$main_fields</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$conditional_values</span><span class="php-code">,</span> <span class="php-vartype">string|array</span> <span class="php-var">$conditional_fields</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string|array</td>
				<td class="param_name">$main_fields</td>
				<td class="param_description">The fields(s) to check for a value</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$conditional_values</td>
				<td class="param_description">If <tt>NULL</tt>, any value in the main field(s) will trigger the conditional field(s), otherwise the value must match this scalar value or be present in the array of values</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string|array</td>
				<td class="param_name">$conditional_fields</td>
				<td class="param_description">The field(s) that are to be required</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The validation object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fValidation-api-addDateFields" class="method"><span class="resolution">-></span><span class="name">addDateFields()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds form fields to the list of fields to be blank or a valid date</p>
								<p>Use <a href="#fValidation-api-addRequiredFields"><tt>addRequiredFields()</tt></a> disallow blank values.</p>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addDateFields</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addDateFields</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$fields</span> <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field <em>[, ... ]</em></td>
				<td class="param_description">A field that should contain a valid date</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$fields</td>
				<td class="param_description">Any number of fields that should contain a valid date</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The validation object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fValidation-api-addEmailFields" class="method"><span class="resolution">-></span><span class="name">addEmailFields()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds form fields to the list of fields to be blank or a valid email address</p>
								<p>Use <a href="#fValidation-api-addRequiredFields"><tt>addRequiredFields()</tt></a> disallow blank values.</p>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addEmailFields</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addEmailFields</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$fields</span> <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field <em>[, ... ]</em></td>
				<td class="param_description">A field that should contain a valid email address</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$fields</td>
				<td class="param_description">Any number of fields that should contain a valid email address</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The validation object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fValidation-api-addEmailHeaderFields" class="method"><span class="resolution">-></span><span class="name">addEmailHeaderFields()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds form fields to be checked for email injection</p>
								<p>Every field that is included in email headers should be passed to this  method.</p>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addEmailHeaderFields</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addEmailHeaderFields</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$fields</span> <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field <em>[, ... ]</em></td>
				<td class="param_description">A field to be checked for email injection</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$fields</td>
				<td class="param_description">Any number of fields to be checked for email injection</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The validation object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fValidation-api-addFileUploadRule" class="method"><span class="resolution">-></span><span class="name">addFileUploadRule()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Add a file upload field to be validated using an <a href="#fUpload">fUpload</a> object</p>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addFileUploadRule</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$index</span><span class="php-code">,</span> <span class="php-vartype"><a href="#fUpload">fUpload</a></span> <span class="php-var">$uploader</span> <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addFileUploadRule</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span><span class="php-code">,</span> <span class="php-vartype"><a href="#fUpload">fUpload</a></span> <span class="php-var">$uploader</span> <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field</td>
				<td class="param_description">The field to validate</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$index</td>
				<td class="param_description">The index for array file upload fields</td>
			  </tr>
						  <tr>
				<td class="param_data_type"><a href="#fUpload">fUpload</a></td>
				<td class="param_name">$uploader</td>
				<td class="param_description">The uploader to validate the field with</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The validation object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fValidation-api-addFloatFields" class="method"><span class="resolution">-></span><span class="name">addFloatFields()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds fields to be checked for float values</p>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addFloatFields</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addFloatFields</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$fields</span> <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field <em>[, ... ]</em></td>
				<td class="param_description">A field that should contain a float value</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$fields</td>
				<td class="param_description">Any number of fields that should contain a float value</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The validation object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fValidation-api-addIntegerFields" class="method"><span class="resolution">-></span><span class="name">addIntegerFields()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds fields to be checked for integer values</p>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addIntegerFields</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addIntegerFields</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$fields</span> <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field <em>[, ... ]</em></td>
				<td class="param_description">A field that should contain an integer value</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$fields</td>
				<td class="param_description">Any number of fields that should contain an integer value</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The validation object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fValidation-api-addOneOrMoreRule" class="method"><span class="resolution">-></span><span class="name">addOneOrMoreRule()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds a rule to make sure at least one field of multiple has a value</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addOneOrMoreRule</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$field_2</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field</td>
				<td class="param_description">One of the fields to check for a value</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field_2 <em>[, ... ]</em></td>
				<td class="param_description">Another field to check for a value</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The validation object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fValidation-api-addOnlyOneRule" class="method"><span class="resolution">-></span><span class="name">addOnlyOneRule()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds a rule to make sure at exactly one field of multiple has a value</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addOnlyOneRule</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$field_2</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field</td>
				<td class="param_description">One of the fields to check for a value</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field_2 <em>[, ... ]</em></td>
				<td class="param_description">Another field to check for a value</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The validation object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fValidation-api-addRegexReplacement" class="method"><span class="resolution">-></span><span class="name">addRegexReplacement()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds a call to <a class="ext-link" href="http://php.net/preg_replace"><span class="icon"><tt>preg_replace()</tt></span></a> for each message</p>
								<p>Replacement is done right before the messages are reordered and returned.</p><p>If a message is an empty string after replacement, it will be  removed from the list of messages.</p>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addRegexReplacement</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$search</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$replace</span> <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addRegexReplacement</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$replacements</span> <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$search</td>
				<td class="param_description">The PCRE regex to search for - see <a class="ext-link" href="http://php.net/pcre"><span class="icon">http://php.net/pcre</span></a> for details</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$replace</td>
				<td class="param_description">The string to replace with - all $ and \ are used in back references and must be escaped with a \ when meant literally</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$replacements</td>
				<td class="param_description">An associative array with keys being regular expressions to search for and values being the string to replace with</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The validation object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fValidation-api-addRegexRule" class="method"><span class="resolution">-></span><span class="name">addRegexRule()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds regular expression validation of a field, with a custom error message</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addRegexRule</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$regex</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$message</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field</td>
				<td class="param_description">The field to test with the regular expression</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$regex</td>
				<td class="param_description">The PCRE regex to search for - see <a class="ext-link" href="http://php.net/pcre"><span class="icon">http://php.net/pcre</span></a> for details</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The error message to return if the regular expression does not match the value</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The validation object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fValidation-api-addRequiredFields" class="method"><span class="resolution">-></span><span class="name">addRequiredFields()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds form fields to be required</p>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addRequiredFields</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addRequiredFields</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$fields</span> <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field <em>[, ... ]</em></td>
				<td class="param_description">A field to require a value for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$fields</td>
				<td class="param_description">Any number of fields to require a value for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The validation object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fValidation-api-addStringReplacement" class="method"><span class="resolution">-></span><span class="name">addStringReplacement()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds a call to <a class="ext-link" href="http://php.net/str_replace"><span class="icon"><tt>str_replace()</tt></span></a> for each message</p>
								<p>Replacement is done right before the messages are reordered and returned.</p><p>If a message is an empty string after replacement, it will be  removed from the list of messages.</p>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addStringReplacement</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$search</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$replace</span> <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addStringReplacement</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$replacements</span> <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$search</td>
				<td class="param_description">The string to search for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$replace</td>
				<td class="param_description">The string to replace with</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$replacements</td>
				<td class="param_description">An associative array with keys being strings to search for and values being the string to replace with</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The validation object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fValidation-api-addURLFields" class="method"><span class="resolution">-></span><span class="name">addURLFields()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds form fields to the list of fields to be blank or a valid URL</p>
								<p>Use <a href="#fValidation-api-addRequiredFields"><tt>addRequiredFields()</tt></a> disallow blank values.</p>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addURLFields</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span> [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addURLFields</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$fields</span> <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field <em>[, ... ]</em></td>
				<td class="param_description">A field that should contain a valid URL</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$fields</td>
				<td class="param_description">Any number of fields that should contain a valid URL</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The validation object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fValidation-api-addValidValuesRule" class="method"><span class="resolution">-></span><span class="name">addValidValuesRule()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds a rule to make sure a field has one of the specified valid values</p>
								<p>A strict comparison will be made from the string request value to the  array of valid values.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">addValidValuesRule</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span><span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$valid_values</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field</td>
				<td class="param_description">The field to check the value of</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$valid_values</td>
				<td class="param_description">The valid values</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The validation object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fValidation-api-overrideFieldName" class="method"><span class="resolution">-></span><span class="name">overrideFieldName()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Allows overriding the default name used for a field in the error message</p>
								<p>By default, all fields are referred to by the field name run through  <a href="#fGrammar-api-humanize"><tt>fGrammar::humanize()</tt></a>. This may not be correct for acronyms or complex  field names.</p>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">overrideFieldName</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$name</span> <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">overrideFieldName</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$field_names</span> <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field</td>
				<td class="param_description">The field to set the custom name for</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The custom name for the field</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$field_names</td>
				<td class="param_description">An associative array of custom field names where the keys are the field and the values are the names</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The validation object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fValidation-api-setMessageOrder" class="method"><span class="resolution">-></span><span class="name">setMessageOrder()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Allows setting the order that the individual errors in a message will be displayed</p>
								<p>All string comparisons during the reordering process are done in a  case-insensitive manner.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fValidation">fValidation</a></span> <span class="php-identifier">setMessageOrder</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$match</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$match_2</span><span class="php-code">=</span>NULL [<span class="php-code">, ... </span>] <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$match</td>
				<td class="param_description">The string match to order first</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$match_2 <em>[, ... ]</em></td>
				<td class="param_description">The string match to order second</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The validation object, to allow for method chaining
				</p>
		</div>
		<!-- end method -->	
						<!-- start method -->
			<h5 id="fValidation-api-validate" class="method"><span class="resolution">-></span><span class="name">validate()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Checks for required fields, email field formatting and email header injection using values previously set</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void|array</span> <span class="php-identifier">validate</span><span class="php-brackets">(</span> <span class="php-vartype">boolean</span> <span class="php-var">$return_messages</span><span class="php-code">=</span>FALSE<span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$remove_field_names</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$return_messages</td>
				<td class="param_description">If an array of validation messages should be returned instead of an exception being thrown</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$remove_field_names</td>
				<td class="param_description">If field names should be removed from the returned messages, leaving just the message itself</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If $return_messages is TRUE, an array of validation messages will be returned
				</p>
										<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When one of the options set for the object is violated</dd></dl>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="fValidationException">fValidationException</h2>
<div class="sidebar">
<h3 id="fValidationException-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fValidationException">Class Documentation</a></strong></li>
<li><a href="#fValidationException-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fValidationException-docs-MessagewithaList">Message with a List</a></li>
<li><a href="#fValidationException-docs-FieldNameFormatting">Field Name Formatting</a></li>
<li><a href="#fValidationException-docs-RemovingFieldNames">Removing Field Names</a></li>
</ul>

<h3 id="fValidationException-docs-ExceptionClasses">Exception Classes </h3>

<ul>
<li><a href="#fException">fException</a>
<ul>
<li><a href="#fExpectedException">fExpectedException</a>
<ul>
<li><a href="#fAuthorizationException">fAuthorizationException</a></li>
<li><a href="#fEmptySetException">fEmptySetException</a></li>
<li><a href="#fNoRemainingException">fNoRemainingException</a></li>
<li><a href="#fNoRowsException">fNoRowsException</a></li>
<li><a href="#fNotFoundException">fNotFoundException</a></li>
<li><strong>fValidationException</strong></li>
</ul>
</li>
<li><a href="#fUnexpectedException">fUnexpectedException</a>
<ul>
<li><a href="#fConnectivityException">fConnectivityException</a></li>
<li><a href="#fEnvironmentException">fEnvironmentException</a></li>
<li><a href="#fProgrammerException">fProgrammerException</a></li>
<li><a href="#fSQLException">fSQLException</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<p>
fValidationException is a sub-class of <a href="#fExpectedException">fExpectedException</a> that indicates that some sort of input did not meet the requirements of the code. This class is used by Flourish code quite a bit and would be suitable to toss on almost any web site or application at some point.
</p>

<h3 id="fValidationException-docs-MessagewithaList">Message with a List</h3>

<p>
This functionality is specific to fValidationException, where it is most common and useful. In addition to being able to pass a <code>$message</code> to <a href="#fValidationException-api-__construct"><code>__construct()</code></a> (and possibly some values to interpolate), it is possible to pass a string <code>$message</code> followed by an array of <code>$sub_messages</code>. The <code>$message</code> will be placed in a <code>&lt;p&gt;</code> tag and the <code>$sub_messages</code> will each be placed in an <code>&lt;li&gt;</code> tag inside of a <code>&lt;ul&gt;</code> tag.
</p>

<p>
Thus, the following example code:
</p>
<pre class="block php"><code>throw new fValidationException(
    'The following problems were found:',
    array(
        'First Name: Please enter a value',
        'Last Name: Please enter a value',
        'Email: Please enter your email in the format name@host.com'
    )
);</code></pre>

<p>
 will create the message:
</p>
<pre class="block html"><code>&lt;p&gt;The following problems were found:&lt;/p&gt;
&lt;ul&gt;
    &lt;li&gt;First Name: Please enter a value&lt;/li&gt;
    &lt;li&gt;Last Name: Please enter a value&lt;/li&gt;
    &lt;li&gt;Email: Please enter your email in the format name@host.com&lt;/li&gt;
&lt;/ul&gt;</code></pre>

<h3 id="fValidationException-docs-FieldNameFormatting">Field Name Formatting</h3>

<p>
Both <a href="#fValidation">fValidation</a> and <a href="#fORMValidation">fORMValidation</a> throw fValidationException objects when data has been detected that does not validate according to the established rules. In the message for these exceptions there are unordered lists of each field/column name followed by the error message for that field/column. By default the field/column name is printed followed by <code>: </code>.
</p>

<p>
Sometimes it may be desirable to change the formatting of the field name, to include HTML tags such as <code>&lt;strong&gt;</code> or <code>&lt;em&gt;</code>. The static method <a href="#fValidationException-api-setFieldFormat"><code>setFieldFormat()</code></a> accepts a single parameter that is the format for field/column names. The token <code>%s</code> is replaced with the field/column name. Any literal <code>%</code> symbols should be changed to <code>%%</code> to prevent formatting issues.
</p>

<p>
Here is an example of adding <code>&lt;strong&gt;</code> tags around field/column names:
</p>
<pre class="block php"><code>fValidationException::setFieldFormat('&lt;strong&gt;%s&lt;/strong&gt;: ');</code></pre>

<h3 id="fValidationException-docs-RemovingFieldNames">Removing Field Names</h3>

<p>
When <a href="#fActiveRecord-api-validate">fActiveRecord::validate()</a> or <a href="#fValidation-api-validate">fValidation::validate()</a> is called with the <code>$return_messages</code> parameter set to <code>TRUE</code>, an array of error messages will be returned, with the column or field names included in the error messages. For situations where the messages are going to be displayed next to the field in question, having the field name in the actual error message is not desirable. The static method <a href="#fValidationException-api-removeFieldNames"><code>removeFieldNames()</code></a> will accept an array of error messages and will return an array with the same error messages, sans field names.
</p>

<p>
The code below will produce a full exception including the field names, but will also provide an associative array of the key being the field/column and the value being the error message without the field name.
</p>
<pre class="block php"><code>$errors = $user-&gt;validate(TRUE);
$field_errors = fValidationException::removeFieldNames($errors);
if ($errors) {
    throw new fValidationException('The following problems were found:', $errors);
}</code></pre>

<p>
 The exception message would be:
</p>
<pre><code>The following problems were found:
 - First Name: Please enter a value
 - Last Name: Please enter a value</code></pre>

<p>
 And the <code>$field_errors</code> array would contain:
</p>
<pre class="block php"><code>array(
    'first_name' =&gt; 'Please enter a value',
    'last_name'  =&gt; 'Please enter a value'
);</code></pre>

<p>
 		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fValidationException-api">fValidationException API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fValidationException">Class Documentation</a></li>
		<li><strong><a href="#fValidationException-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="protected variables static">
<h4><a href="#fValidationException-api-class_vars_static">Static Variables</a></h4>
<ul>
  	 		<li class="protected"><a href="#fValidationException-api-field_format">$field_format</a></li>
	   </ul>
</div>
<div class="methods static">
<h4><a href="#fValidationException-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  			<li><a href="#fValidationException-api-formatField">formatField()</a></li>
	  			<li><a href="#fValidationException-api-removeFieldNames">removeFieldNames()</a></li>
	  			<li><a href="#fValidationException-api-setFieldFormat">setFieldFormat()</a></li>
	  </ul>
</div>
<div class="methods">
<h4><a href="#fValidationException-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fValidationException-api-__construct">__construct()</a></li>
	  	  	  	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fExpectedException">fExpectedException</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
	  </ul>
</div>
<div class="usedby">
<h4>Used By</h4>
<ul>
		<li><a href="#fActiveRecord">fActiveRecord</a></li>
		<li><a href="#fCryptography">fCryptography</a></li>
		<li><a href="#fDate">fDate</a></li>
		<li><a href="#fDirectory">fDirectory</a></li>
		<li><a href="#fEmail">fEmail</a></li>
		<li><a href="#fFile">fFile</a></li>
		<li><a href="#fFilesystem">fFilesystem</a></li>
		<li><a href="#fImage">fImage</a></li>
		<li><a href="#fMailbox">fMailbox</a></li>
		<li><a href="#fNumber">fNumber</a></li>
		<li><a href="#fORMColumn">fORMColumn</a></li>
		<li><a href="#fORMDate">fORMDate</a></li>
		<li><a href="#fORMFile">fORMFile</a></li>
		<li><a href="#fORMMoney">fORMMoney</a></li>
		<li><a href="#fORMOrdering">fORMOrdering</a></li>
		<li><a href="#fORMRelated">fORMRelated</a></li>
		<li><a href="#fORMValidation">fORMValidation</a></li>
		<li><a href="#fPagination">fPagination</a></li>
		<li><a href="#fRequest">fRequest</a></li>
		<li><a href="#fSMTP">fSMTP</a></li>
		<li><a href="#fTime">fTime</a></li>
		<li><a href="#fTimestamp">fTimestamp</a></li>
		<li><a href="#fUpload">fUpload</a></li>
		<li><a href="#fValidation">fValidation</a></li>
		<li><a href="#fXML">fXML</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
		<span class="version">v1.0.0b4</span></div>
<p class="short_description">An exception caused by a data not matching a rule or set of rules</p>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b4</th><td>Added support for nested error arrays <span class="date">10/3/10</span></td></tr><tr><th>1.0.0b3</th><td>Added <a href="#fValidationException-api-removeFieldNames"><tt>removeFieldNames()</tt></a> <span class="date">5/26/10</span></td></tr><tr><th>1.0.0b2</th><td>Added a custom <a href="#fValidationException-api-__construct"><tt>__construct()</tt></a> to handle arrays of messages <span class="date">9/17/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">6/14/07</span></td></tr></table></div>
<div class="genealogy">	
	<h4>Genealogy</h4>
		<div class="class_tree">
		<h5>Class Tree</h5>
		<pre class="class_tree">Exception
   |
   --<a href="#fException">fException</a>
      |
      --<a href="#fExpectedException">fExpectedException</a>
         |
         --fValidationException</pre>
	</div>
		<div class="inherited_variables">
	<h5>Inherited Variables</h5>
		<dl>
		<dt class="protected">$code</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$file</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$line</dt>
	<dd class="protected"> </dd>
		<dt class="protected">$message</dt>
	<dd class="protected"> </dd>
		<dt class="private">$previous</dt>
	<dd class="private"> </dd>
		<dt class="private">$string</dt>
	<dd class="private"> </dd>
		<dt class="private">$trace</dt>
	<dd class="private"> </dd>
		</dl>
		</div>
		<div class="inherited_methods">
	<h5>Inherited Methods</h5>
		<dl>
	  	  <dt class="public"><a href="#fException-api-__construct"><tt>fException::__construct()</tt></a></dt>
	  <dd class="public">Sets the message for the exception, allowing for string interpolation and internationalization</dd>
	  	  <dt class="public"><a href="#fException-api-__get"><tt>fException::__get()</tt></a></dt>
	  <dd class="public">All requests that hit this method should be requests for callbacks</dd>
	  	  <dt class="protected"><a href="#fException-api-compose"><tt>fException::compose()</tt></a></dt>
	  <dd class="protected">Composes text using <a href="#fText">fText</a> if loaded</dd>
	  	  <dt class="protected"><a href="#fException-api-dump"><tt>fException::dump()</tt></a></dt>
	  <dd class="protected">Creates a string representation of any variable using predefined strings for booleans, <tt>NULL</tt> and empty strings</dd>
	  	  <dt class="public"><a href="#fException-api-formatTrace"><tt>fException::formatTrace()</tt></a></dt>
	  <dd class="public">Gets the backtrace to currently called exception</dd>
	  	  <dt class="protected"><a href="#fException-api-getCSSClass"><tt>fException::getCSSClass()</tt></a></dt>
	  <dd class="protected">Returns the CSS class name for printing information about the exception</dd>
	  	  <dt class="protected"><a href="#fException-api-prepare"><tt>fException::prepare()</tt></a></dt>
	  <dd class="protected">Prepares content for output into HTML</dd>
	  	  <dt class="public"><a href="#fException-api-printMessage"><tt>fException::printMessage()</tt></a></dt>
	  <dd class="public">Prints the message inside of a div with the class being 'exception %THIS_EXCEPTION_CLASS_NAME%'</dd>
	  	  <dt class="public"><a href="#fException-api-printTrace"><tt>fException::printTrace()</tt></a></dt>
	  <dd class="public">Prints the backtrace to currently called exception inside of a pre tag with the class being 'exception %THIS_EXCEPTION_CLASS_NAME% trace'</dd>
	  	  <dt class="public"><a href="#fException-api-registerCallback"><tt>fException::registerCallback()</tt></a></dt>
	  <dd class="public">Adds a callback for when certain types of exceptions are created</dd>
	  	  <dt class="public"><a href="#fException-api-reorderMessage"><tt>fException::reorderMessage()</tt></a></dt>
	  <dd class="public">Reorders list items in the message based on simple string matching</dd>
	  	  <dt class="public"><a href="#fException-api-setMessage"><tt>fException::setMessage()</tt></a></dt>
	  <dd class="public">Allows the message to be overwriten</dd>
	  	  <dt class="public"><a href="#fException-api-splitMessage"><tt>fException::splitMessage()</tt></a></dt>
	  <dd class="public">Splits an exception with an HTML list into multiple strings each containing part of the original message</dd>
	  	</dl>
		<dl>
	  	  <dt class="public">constructor __construct ( [$message = ], [$code = ], [$previous = ] )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__clone (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">__toString (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getCode (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getFile (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getLine (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getMessage (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getPrevious (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTrace (  )</dt>
	  <dd class="public"></dd>
	  	  <dt class="public">getTraceAsString (  )</dt>
	  <dd class="public"></dd>
	  	</dl>
		</div>
	</div>	
<div class="class_variables static" id="fValidationException-api-class_vars_static">
<h4>Static Variables</h4>
	<!-- start protected variable static -->
	<h5 id="fValidationException-api-field_format" class="protected variable static"><span class="resolution">::</span><span class="name">$field_format</span> <span class="visibility">protected</span></h5>
	<div class="protected variable static">    
					<div class="variable_description">
							<p>The formatting string to use for field names</p>
			</div>
		<h6>Type</h6>
		<p class="type">string</p>
	</div>
	<!-- end variable static -->
</div>
<div class="class_methods static" id="fValidationException-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fValidationException-api-formatField" class="method static"><span class="resolution">::</span><span class="name">formatField()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Accepts a field name and formats it based on the formatting string set via setFieldFormat()</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">formatField</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$field</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$field</td>
				<td class="param_description">The name of the field to format</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The formatted field name
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fValidationException-api-removeFieldNames" class="method static"><span class="resolution">::</span><span class="name">removeFieldNames()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Removes the field names from normal validation messages, leaving just the message part</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">removeFieldNames</span><span class="php-brackets">(</span> <span class="php-vartype">array</span> <span class="php-var">$messages</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$messages</td>
				<td class="param_description">The messages to remove the field names from</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The messages without field names
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fValidationException-api-setFieldFormat" class="method static"><span class="resolution">::</span><span class="name">setFieldFormat()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Set the format to be applied to all field names used in fValidationExceptions</p>
								<p>The format should contain exactly one <tt>%s</tt>  <a class="ext-link" href="http://php.net/sprintf"><span class="icon"><tt>sprintf()</tt></span></a> conversion specification, which will  be replaced with the field name. Any literal <tt>%</tt> characters should be  written as <tt>%%</tt>.</p><p>The default format is just <tt>%s: </tt>, which simply inserts a <tt>:</tt> and space  after the field name.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">setFieldFormat</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$format</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$format</td>
				<td class="param_description">A string to format the field name with - <tt>%s</tt> will be replaced with the field name</td>
			  </tr>
						</table>
			</div>
			</div>
			<!-- end method static -->
	</div>
<div class="class_methods" id="fValidationException-api-class_methods">
<h4>Methods</h4>
			  			  									<!-- start method -->
			<h5 id="fValidationException-api-__construct" class="method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Sets the message for the exception, allowing for custom formatting beyond <a href="#fException">fException</a></p>
								<p>If this method receives exactly two parameters, a string and an array,  the string will be used as a message in a HTML <tt>&lt;p&gt;</tt> tag and the array  will be turned into an unorder list <tt>&lt;ul&gt;</tt> tag with each element in the  array being an <tt>&lt;li&gt;</tt> tag. It is possible to pass an optional exception  code as a third parameter.</p><p>The following PHP:</p><pre class="block php"><code>throw new fValidationException(
    'The following problems were found:',
    array(
        'Please provide your name',
        'Please provide your email address'
    )
);</code></pre><p>Would create the message:</p><pre class="block html"><code><p>The following problems were found:</p>
<ul>
    <li>Please provide your name</li>
    <li>Please provide your email address</li>
</ul></code></pre><p>If the parameters are anything else, they will be passed to  <a href="#fException-api-__construct"><tt>fException::__construct()</tt></a>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fException">fException</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$message</span><span class="php-code">=</span>''<span class="php-code">,</span> <span class="php-vartype">array</span> <span class="php-var">$sub_messages</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$code</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$message</td>
				<td class="param_description">The beginning message for the exception. This will be placed in a <tt>&lt;p&gt;</tt> tag.</td>
			  </tr>
						  <tr>
				<td class="param_data_type">array</td>
				<td class="param_name">$sub_messages</td>
				<td class="param_description">An array of strings to place in a <tt>&lt;ul&gt;</tt> tag</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$code</td>
				<td class="param_description">The optional exception code</td>
			  </tr>
						</table>
			</div>
							<h6>Overrides</h6>
				<div class="overrides">
					<dl>
						<dt><a href="#fException-api-__construct"><tt>fException::__construct()</tt></a></dt>
												<dd>Sets the message for the exception, allowing for string interpolation and internationalization</dd>
											</dl>
				</div>
		</div>
		<!-- end method -->	
						</div>		</section>
		</div>
		<section class="main">
<h2 id="fXML">fXML</h2>
<div class="sidebar">
<h3 id="fXML-docs-ClassResources">Class Resources </h3>

<ul>
<li><strong><a href="#fXML">Class Documentation</a></strong></li>
<li><a href="#fXML-api">API Reference</a></li>
</ul>

<h3>Contents</h3>

<ul>
<li><a href="#fXML-docs-Instantiation">Instantiation</a>
<ul>
<li><a href="#fXML-docs-FixingInvalidXML">Fixing Invalid XML</a>
<ul>
<li><a href="#fXML-docs-InvalidNamedEntities">Invalid Named Entities</a></li>
<li><a href="#fXML-docs-IncorrectlyEncodedContent">Incorrectly Encoded Content</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#fXML-docs-ElementInformation">Element Information</a></li>
<li><a href="#fXML-docs-RawXML">Raw XML</a></li>
<li><a href="#fXML-docs-AttributeValues">Attribute Values</a></li>
<li><a href="#fXML-docs-ChildElementTextContent">Child Element Text Content</a></li>
<li><a href="#fXML-docs-Traversing">Traversing</a></li>
<li><a href="#fXML-docs-CustomPrefixes">Custom Prefixes</a></li>
<li><a href="#fXML-docs-EncodingData">Encoding Data</a></li>
<li><a href="#fXML-docs-SendingtheContentTypeHeader">Sending the Content Type Header</a></li>
</ul>
</div>

<p>
The fXML class provides functionality to read and create XML. An fXML object represents an XML string for reading/traversing, but does not allow modification. The static methods <a href="#fXML-api-encode"><code>encode()</code></a> and <a href="#fXML-api-sendHeader"><code>sendHeader()</code></a> are useful when creating XML.
</p>

<h3 id="fXML-docs-Instantiation">Instantiation</h3>

<p>
The fXML constructor will accept four different types of sources for the XML to represent:
</p>

<ol>
<li>An <a href="#fFile">fFile</a> object</li>
<li>A file path</li>
<li>A URL</li>
<li>An XML string</li>
</ol>
<pre class="block php"><code>// From an fFile
$file = new fFile('/path/to/file');
$xml  = new fXML($file);

// From a file path
$xml  = new fXML('/path/to/file');

// From a URL
$xml  = new fXML('http://example.com/rss');

// From an XML string
$xml  = new fXML('&lt;?xml ');</code></pre>

<p>
 XML files with invalid data will cause an <a href="#fValidationException">fValidationException</a> to be thrown.
</p>

<p>
When fetching XML from a URL, an optional second parameter, <code>$timeout</code>, can be specified. If not specified, the <code>default_socket_timeout</code> ini setting is used.
</p>
<pre class="block php"><code>// Fetch the XML with a 5 second timeout
$xml = new fXML('http://examples.com/rss', 5);</code></pre>

<h4 id="fXML-docs-FixingInvalidXML">Fixing Invalid XML</h4>

<p>
Two of the most common errors when creating XML are encoding characters as HTML entities for XML and delivering <code>ISO-8859-1</code> (or <code>Windows-1252</code>) encoded XML as <code>UTF-8</code>. An optional boolean parameter, <code>$fix_entities_encoding</code> can fix both of these problems.
</p>
<pre class="block php"><code>// Used with an HTTP timeout
$xml = new fXML('http://example.com/rss', 5, TRUE);

// Used without a timeout
$xml = new fXML('./foo.xml', TRUE);</code></pre>

<h5 id="fXML-docs-InvalidNamedEntities">Invalid Named Entities</h5>

<p>
In XML, there are only five pre-defined named entities: <code>&amp;amp;</code>, <code>&amp;gt;</code>, <code>&amp;lt;</code>, <code>&amp;quot;</code> and <code>&amp;apos;</code>. All other named entities from HTML will cause a parse error if included in XML without further encoding. For instance, <code>&amp;rsquo;</code> is invalid, but <code>&amp;amp;rsquo;</code> or <code></code> is valid.
</p>

<p>
<code>$fix_entities_encoding</code> will take
</p>
<pre class="block xml"><code>&lt;book&gt;&lt;title&gt;Isn&amp;rsquo;t Valid XML&lt;/title&gt;&lt;/book&gt;</code></pre>

<p>
 and convert it to
</p>
<pre class="block xml"><code>&lt;book&gt;&lt;title&gt;Isnt Valid XML&lt;/title&gt;&lt;/book&gt;</code></pre>

<p>
 before passing the XML to the parser.
</p>

<h5 id="fXML-docs-IncorrectlyEncodedContent">Incorrectly Encoded Content</h5>

<p>
If no encoding is specified for an XML document, the encoded is assumed to be UTF-8. Many developers not familiar with XML and issues related to encoding will omit the encoding attribute of the <code>&lt;?xml&gt;</code> tag and will insert <code>ISO-8859-1</code> or <code>Windows-1252</code> (also called Latin or Latin 1) content.
</p>

<p>
fXML will throw an exception when such an XML document is parsed, since the parser being used will find invalid UTF-8 characters and give up encoding. The <code>$fix_entities_encoding</code> parameter will detect non-UTF-8 characters for documents defined as UTF-8 (whether explicitly or by omission of the encoding attribute) and convert the content.
</p>

<h3 id="fXML-docs-ElementInformation">Element Information</h3>

<p>
Information about the root XML element that was passed into the constructor can be accessed by the following methods:
</p>
<table><tbody>
<tr>
<td><strong>Method</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td><a href="#fXML-api-getName"><code>getName()</code></a></td>
<td>Returns the name of the element <em>without</em> any preceding namespace prefix</td>
</tr>
<tr>
<td><a href="#fXML-api-getNamespace"><code>getNamespace()</code></a></td>
<td>Returns the full namespace URI for the element, <em>if any</em></td>
</tr>
<tr>
<td><a href="#fXML-api-getPrefix"><code>getPrefix()</code></a></td>
<td>Returns the namespace prefix for the element, <em>if any</em></td>
</tr>
<tr>
<td><a href="#fXML-api-getText"><code>getText()</code></a></td>
<td>Returns the text content of the element</td>
</tr>
</tbody></table>

<h3 id="fXML-docs-RawXML">Raw XML</h3>

<p>
The raw XML being modeled by the fXML object can be retrieved by calling the method <a href="#fXML-api-toXML"><code>toXML()</code></a>.
</p>
<pre class="block php"><code>echo $xml-&gt;toXML();</code></pre>

<h3 id="fXML-docs-AttributeValues">Attribute Values</h3>

<p>
Attributes of the XML element can be accessed using array notation.
</p>
<pre class="block php"><code>// Normal attribute
echo $xml['my_attribute'];

// Attribute with namespace prefix
echo $xml['ns:attribute'];</code></pre>

<h3 id="fXML-docs-ChildElementTextContent">Child Element Text Content</h3>

<p>
The text content of children of the XML element can be accessed by requesting object memebers.
</p>
<pre class="block php"><code>// The content of the child element &quot;firstName&quot;
echo $xml-&gt;firstName;

// Child &quot;title&quot; in the &quot;ns&quot; prefix
echo $xml-&gt;{'ns:title'};</code></pre>

<h3 id="fXML-docs-Traversing">Traversing</h3>

<p>
For anything beyond attribute and child element text content of the root XML element, the <a href="#fXML-api-xpath"><code>xpath()</code></a> method will need to be used. This method returns an array of all matching parts of the XML file.
</p>

<p>
If you aren't familiar with XPath, the <a class="ext-link" href="http://en.wikipedia.org/wiki/XPath_1.0"><span class="icon">Wikipedia page about XPath 1.0</span></a> is a good place to start. XPath allow traversal of the XML file using element names combined with predicates and functions.
</p>

<p>
<a href="#fXML-api-xpath"><code>xpath()</code></a> accepts two parameter, the XPath <code>$path</code>, and optionally a boolean flag, <code>$first_only</code>, to return only the first match.
</p>
<pre class="block php"><code>// Select every &quot;item&quot; element in the &quot;channel&quot;
foreach ($xml-&gt;xpath(&quot;channel/item&quot;) as $item) {
    echo $item-&gt;title;
}</code></pre>

<p>
 The items matched by <code>xpath()</code> may be child elements, text content or attributes. Here are the data types for various types of matches:
</p>

<ul>
<li><strong>XML Element:</strong> an fXML object with an integer array key</li>
<li><strong>Attribute:</strong> a string with the array key being the attribute name</li>
<li><strong>Text Content:</strong> a string with an integer array key</li>
</ul>

<p>
It is also possible to pull back just the first matched element by passing the second parameter as <code>TRUE</code>.
</p>
<pre class="block php"><code>// Pull the first attribute only, thus returning a string
echo $xml-&gt;xpath('@attribute', TRUE);</code></pre>

<h3 id="fXML-docs-CustomPrefixes">Custom Prefixes</h3>

<p>
When using XPath, array-style attribute access or child element text content access, it can be useful to set a custom namespace prefix to allow for compatibility with various XML sources. The method <a href="#fXML-api-addCustomPrefix"><code>addCustomPrefix()</code></a> accepts two parameters, the <code>$ns_prefix</code> to register and its corresponding <code>$namespace</code>. One registered, this prefix will be available throughout fXML.
</p>
<pre class="block php"><code>$xml = new fXML('http://example.com/rss');
$xml-&gt;addCustomPrefix('pf', 'http://namspace');

echo $xml['pf:attribute'];
echo $xml-&gt;{'pf:child'};
foreach ($xml-&gt;xpath('pf:*') as $element) {
    echo $element-&gt;getText();
}</code></pre>

<h3 id="fXML-docs-EncodingData">Encoding Data</h3>

<p>
When creating XML documents, such as RSS feeds, it is necessary to create properly encoded XML, otherwise strict XML parsers will not be able to parse the document. The <a href="#fXML-api-encode"><code>encode()</code></a> method will ensure that all content is properly encoded for including in a UTF-8 XML file.
</p>

<p>
Here is an example of usage:
</p>
<pre class="block php"><code>$xml  = '&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;' . &quot;\n&quot;;
$xml .= &quot;&lt;articles&gt;&quot;;

foreach ($articles as $article) {
    $xml .= &quot;&lt;article&gt;&lt;title&gt;&quot;;
    $xml .= fXML::encode($article-&gt;getTitle());
    $xml .= &quot;&lt;/title&gt;&lt;description&gt;&quot;;
    $xml .= fXML::encode($article-&gt;getDescription());
    $xml .= &quot;&lt;/description&gt;&lt;/article&gt;&quot;;
}

$xml .= &quot;&lt;/articles&gt;&quot;;</code></pre>

<h3 id="fXML-docs-SendingtheContentTypeHeader">Sending the Content Type Header</h3>

<p>
When sending XML files over HTTP, the method <a href="#fXML-api-sendHeader"><code>sendHeader()</code></a> should be called ensure that the <code>Content-Type</code> header is set to the correct value of <code>text/xml; charset=utf-8</code>. The <code>utf-8</code> character set encoding is specified since all of Flourish is built to work with UTF-8 and all XML parsers must support that character set.
</p>
		</section>
		<div class="docs">
		<section class="main"><h3 class="api" id="fXML-api">fXML API Reference</h3>
<div class="sidebar">
<div class="resources">
	<h4>Class Resources</h4>
	<ul>
		<li><a href="#fXML">Class Documentation</a></li>
		<li><strong><a href="#fXML-api">API Reference</a></strong></li>
		
	</ul>
</div>
<!-- end resources -->
<div class="protected variables">
<h4><a href="#fXML-api-class_vars">Variables</a></h4>
<ul>
  	 		<li class="protected"><a href="#fXML-api-__custom_prefixes">$__custom_prefixes</a></li>
	   	 		<li class="protected"><a href="#fXML-api-__dom">$__dom</a></li>
	   	 		<li class="protected"><a href="#fXML-api-__xml">$__xml</a></li>
	   	 		<li class="protected"><a href="#fXML-api-__xpath">$__xpath</a></li>
	   </ul>
</div>
<div class="methods static">
<h4><a href="#fXML-api-class_methods_static">Static Methods</a></h4>
<ul>
  	  	  	  	  	  	  	  	  	  			<li><a href="#fXML-api-encode">encode()</a></li>
	  	  	  	  	  	  	  	  	  	  			<li><a href="#fXML-api-sendHeader">sendHeader()</a></li>
	  	  	  </ul>
</div>
<div class="methods">
<h4><a href="#fXML-api-class_methods">Methods</a></h4>
<ul>
  			<li><a href="#fXML-api-__construct">__construct()</a></li>
	  			<li class="protected"><a href="#fXML-api-__get">__get()</a></li>
	  			<li class="protected"><a href="#fXML-api-__isset">__isset()</a></li>
	  			<li class="protected"><a href="#fXML-api-__set">__set()</a></li>
	  			<li class="protected"><a href="#fXML-api-__sleep">__sleep()</a></li>
	  			<li><a href="#fXML-api-__toString">__toString()</a></li>
	  			<li class="protected"><a href="#fXML-api-__unset">__unset()</a></li>
	  			<li class="protected"><a href="#fXML-api-__wakeup">__wakeup()</a></li>
	  			<li><a href="#fXML-api-addCustomPrefix">addCustomPrefix()</a></li>
	  	  			<li><a href="#fXML-api-getName">getName()</a></li>
	  			<li><a href="#fXML-api-getNamespace">getNamespace()</a></li>
	  			<li><a href="#fXML-api-getPrefix">getPrefix()</a></li>
	  			<li><a href="#fXML-api-getText">getText()</a></li>
	  			<li class="protected"><a href="#fXML-api-offsetExists">offsetExists()</a></li>
	  			<li class="protected"><a href="#fXML-api-offsetGet">offsetGet()</a></li>
	  			<li class="protected"><a href="#fXML-api-offsetSet">offsetSet()</a></li>
	  			<li class="protected"><a href="#fXML-api-offsetUnset">offsetUnset()</a></li>
	  			<li class="protected"><a href="#fXML-api-query">query()</a></li>
	  	  			<li><a href="#fXML-api-toXML">toXML()</a></li>
	  			<li><a href="#fXML-api-xpath">xpath()</a></li>
	  </ul>
</div>
<div class="uses">
<h4>Uses</h4>
<ul>
		<li><a href="#fCore">fCore</a></li>
		<li><a href="#fExpectedException">fExpectedException</a></li>
		<li><a href="#fProgrammerException">fProgrammerException</a></li>
		<li><a href="#fValidationException">fValidationException</a></li>
	  </ul>
</div>
</div>
<div class="meta">
	<span class="type">class</span>,
	<span class="implements"> implements ArrayAccess </span>,	<span class="version">v1.0.0b8</span></div>
<p class="short_description">Provides functionality for XML files</p>
<div class="description"><p>This class is implemented to use the UTF-8 character encoding. Please see  <a href="#UTF-8-docs">UTF-8</a> for more information.</p></div>
<div class="changes"><strong>Changes:</strong> <table cellspacing="0"><tr><th>1.0.0b8</th><td>Fixed a method signature <span class="date">8/24/11</span></td></tr><tr><th>1.0.0b7</th><td>Added a workaround for iconv having issues in MAMP 1.9.4+ <span class="date">7/26/11</span></td></tr><tr><th>1.0.0b6</th><td>Updated class to use <a href="#fCore-api-startErrorCapture"><tt>fCore::startErrorCapture()</tt></a> instead of <tt>error_reporting()</tt> <span class="date">8/9/10</span></td></tr><tr><th>1.0.0b5</th><td>Added the <tt>$fix_entities_encoding</tt> parameter to <a href="#fXML-api-__construct"><tt>__construct()</tt></a> <span class="date">8/8/10</span></td></tr><tr><th>1.0.0b4</th><td>Updated the class to automatically add a <tt>__</tt> prefix for the default namespace and to use that for attribute and child element access <span class="date">4/6/10</span></td></tr><tr><th>1.0.0b3</th><td>Added the <tt>$http_timeout</tt> parameter to <a href="#fXML-api-__construct"><tt>__construct()</tt></a> <span class="date">9/16/09</span></td></tr><tr><th>1.0.0b2</th><td>Added instance functionality for reading of XML files <span class="date">9/1/09</span></td></tr><tr><th>1.0.0b</th><td>The initial implementation <span class="date">1/13/08</span></td></tr></table></div>
<div class="class_variables" id="fXML-api-class_vars">
<h4>Variables</h4>
	<!-- start protected variable -->
	<h5 id="fXML-api-__custom_prefixes" class="protected variable"><span class="resolution">-></span><span class="name">__custom_prefixes</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>Custom prefix =&gt; namespace URI mappings</p>
			</div>
		<h6>Type</h6>
		<p class="type">array</p>
	</div>
	<!-- end variable -->
	<!-- start protected variable -->
	<h5 id="fXML-api-__dom" class="protected variable"><span class="resolution">-></span><span class="name">__dom</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>The dom element for this XML</p>
			</div>
		<h6>Type</h6>
		<p class="type">DOMElement</p>
	</div>
	<!-- end variable -->
	<!-- start protected variable -->
	<h5 id="fXML-api-__xml" class="protected variable"><span class="resolution">-></span><span class="name">__xml</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>The XML string for serialization</p>
			</div>
		<h6>Type</h6>
		<p class="type">string</p>
	</div>
	<!-- end variable -->
	<!-- start protected variable -->
	<h5 id="fXML-api-__xpath" class="protected variable"><span class="resolution">-></span><span class="name">__xpath</span> <span class="visibility">protected</span></h5>
	<div class="protected variable">	
					<div class="variable_description">
							<p>An XPath object for performing xpath lookups</p>
			</div>
		<h6>Type</h6>
		<p class="type">DOMXPath</p>
	</div>
	<!-- end variable -->
</div>
<div class="class_methods static" id="fXML-api-class_methods_static">
<h4>Static Methods</h4>
			  			  									<!-- start method static -->
			<h5 id="fXML-api-encode" class="method static"><span class="resolution">::</span><span class="name">encode()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Encodes content for display in a UTF-8 encoded XML document</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">encode</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$content</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$content</td>
				<td class="param_description">The content to encode</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					The encoded content
				</p>
			</div>
			<!-- end method static -->
			  			  									<!-- start method static -->
			<h5 id="fXML-api-sendHeader" class="method static"><span class="resolution">::</span><span class="name">sendHeader()</span> <span class="visibility">public</span></h5>
			<div class="method static">
							<div class="method_description">
									<p>Sets the proper <tt>Content-Type</tt> HTTP header for a UTF-8 XML file</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">sendHeader</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
			</div>
			<!-- end method static -->
			</div>
<div class="class_methods" id="fXML-api-class_methods">
<h4>Methods</h4>
						<!-- start method -->
			<h5 id="fXML-api-__construct" class="method"><span class="resolution">-></span><span class="name">__construct()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Create the XML object from a string, <a href="#fFile">fFile</a> or URL</p>
								<p>The <tt>$default_namespace</tt> will be used for any sort of methods calls,  member access or array access when the element or attribute name does  not include a <tt>:</tt>.</p>
				</div>
			<h6>Signatures</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fXML">fXML</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fFile">fFile</a>|string</span> <span class="php-var">$source</span><span class="php-code">,</span> <span class="php-vartype">numeric</span> <span class="php-var">$http_timeout</span><span class="php-code">=</span>NULL<span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$fix_entities_encoding</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
			</p>
							<p class="signature">
					<code><span class="php-vartype"><a href="#fXML">fXML</a></span> <span class="php-identifier">__construct</span><span class="php-brackets">(</span> <span class="php-vartype"><a href="#fFile">fFile</a>|string</span> <span class="php-var">$source</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$fix_entities_encoding</span><span class="php-code">=</span>NULL <span class="php-brackets">)</span></code>
				</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type"><a href="#fFile">fFile</a>|string</td>
				<td class="param_name">$source</td>
				<td class="param_description">The source of the XML, either an <a href="#fFile">fFile</a> object, a string of XML, a file path or a URL</td>
			  </tr>
						  <tr>
				<td class="param_data_type">numeric</td>
				<td class="param_name">$http_timeout</td>
				<td class="param_description">The timeout to use in seconds when requesting an XML file from a URL</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$fix_entities_encoding</td>
				<td class="param_description">This will fix two common XML authoring errors and should only be used when experiencing decoding issues - HTML entities that haven't been encoded as XML, and XML content published in ISO-8859-1 or Windows-1252 encoding without an explicit encoding attribute</td>
			  </tr>
						</table>
			</div>
													<h6>Throws</h6>
				<dl class="throws"> <dt><a href="#fValidationException">fValidationException</a></dt><dd>When the source XML is invalid or does not exist</dd></dl>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fXML-api-__get" class="protected method"><span class="resolution">-></span><span class="name">__get()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Allows access to the text content of a child tag</p>
								<p>The child element name (<tt>$name</tt>) may start with a namespace prefix and a  <tt>:</tt> to indicate what namespace it is part of. A blank namespace prefix  (i.e. an element name starting with <tt>:</tt>) is treated as the XML default  namespace.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype"><a href="#fXML">fXML</a>|NULL</span> <span class="php-identifier">__get</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$name</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The child element to retrieve</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The child element requested
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fXML-api-__isset" class="protected method"><span class="resolution">-></span><span class="name">__isset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>The child element name (<tt>$name</tt>) may start with a namespace prefix and a  <tt>:</tt> to indicate what namespace it is part of. A blank namespace prefix  (i.e. an element name starting with <tt>:</tt>) is treated as the XML default  namespace.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">__isset</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$name</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The child element to check - see method description for details about namespaces</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If the child element is set
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fXML-api-__set" class="protected method"><span class="resolution">-></span><span class="name">__set()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Prevents users from trying to set elements</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">__set</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$name</span><span class="php-code">,</span> <span class="php-vartype">mixed</span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The element to set</td>
			  </tr>
						  <tr>
				<td class="param_data_type">mixed</td>
				<td class="param_name">$value</td>
				<td class="param_description">The value to set</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fXML-api-__sleep" class="protected method"><span class="resolution">-></span><span class="name">__sleep()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>The XML needs to be made into a string before being serialized</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">__sleep</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The members to serialize
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fXML-api-__toString" class="method"><span class="resolution">-></span><span class="name">__toString()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Gets the string inside the root XML element</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">__toString</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The text inside the root element
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fXML-api-__unset" class="protected method"><span class="resolution">-></span><span class="name">__unset()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Prevents users from trying to unset elements</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">__unset</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$name</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$name</td>
				<td class="param_description">The element to unset</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fXML-api-__wakeup" class="protected method"><span class="resolution">-></span><span class="name">__wakeup()</span> <span class="visibility">internal public</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>The XML needs to be made into a DOMElement when woken up</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">__wakeup</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fXML-api-addCustomPrefix" class="method"><span class="resolution">-></span><span class="name">addCustomPrefix()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Adds a custom namespace prefix to full namespace mapping</p>
								<p>This namespace prefix will be valid for any operation on this object,  including calls to <a href="#fXML-api-xpath"><tt>xpath()</tt></a>.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">addCustomPrefix</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$ns_prefix</span><span class="php-code">,</span> <span class="php-vartype">string</span> <span class="php-var">$namespace</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$ns_prefix</td>
				<td class="param_description">The custom namespace prefix</td>
			  </tr>
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$namespace</td>
				<td class="param_description">The full namespace it maps to</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fXML-api-getName" class="method"><span class="resolution">-></span><span class="name">getName()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the name of the current element</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getName</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The name of the current element
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fXML-api-getNamespace" class="method"><span class="resolution">-></span><span class="name">getNamespace()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the namespace of the current element</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getNamespace</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The namespace of the current element
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fXML-api-getPrefix" class="method"><span class="resolution">-></span><span class="name">getPrefix()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the namespace prefix of the current element</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getPrefix</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The namespace prefix of the current element
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fXML-api-getText" class="method"><span class="resolution">-></span><span class="name">getText()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns the string text of the current element</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">getText</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The string text of the current element
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fXML-api-offsetExists" class="protected method"><span class="resolution">-></span><span class="name">offsetExists()</span> <span class="visibility">internal public</span><span class="implements"> implements ArrayAccess</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Provides functionality for isset() and empty() (required by arrayaccess interface)</p>
								<p>Offsets refers to an attribute name. Attribute may start with a namespace  prefix and a <tt>:</tt> to indicate what namespace the attribute is part of. A  blank namespace prefix (i.e. an offset starting with <tt>:</tt>) is treated as  the XML default namespace.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">boolean</span> <span class="php-identifier">offsetExists</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$offset</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$offset</td>
				<td class="param_description">The offset to check</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 If the offset exists
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fXML-api-offsetGet" class="protected method"><span class="resolution">-></span><span class="name">offsetGet()</span> <span class="visibility">internal public</span><span class="implements"> implements ArrayAccess</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Provides functionality for get [index] syntax (required by ArrayAccess interface)</p>
								<p>Offsets refers to an attribute name. Attribute may start with a namespace  prefix and a <tt>:</tt> to indicate what namespace the attribute is part of. A  blank namespace prefix (i.e. an offset starting with <tt>:</tt>) is treated as  the XML default namespace.</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">offsetGet</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$offset</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$offset</td>
				<td class="param_description">The attribute to retrieve the value for</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The value of the offset
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fXML-api-offsetSet" class="protected method"><span class="resolution">-></span><span class="name">offsetSet()</span> <span class="visibility">internal public</span><span class="implements"> implements ArrayAccess</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Required by ArrayAccess interface</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">offsetSet</span><span class="php-brackets">(</span> <span class="php-vartype">integer|string</span> <span class="php-var">$offset</span><span class="php-code">,</span> <span class="php-vartype"></span> <span class="php-var">$value</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer|string</td>
				<td class="param_name">$offset</td>
				<td class="param_description">The offset to set</td>
			  </tr>
						  <tr>
				<td class="param_data_type"></td>
				<td class="param_name">$value</td>
				<td class="param_description"></td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fXML-api-offsetUnset" class="protected method"><span class="resolution">-></span><span class="name">offsetUnset()</span> <span class="visibility">internal public</span><span class="implements"> implements ArrayAccess</span></h5>
			<div class="protected method">
							<div class="internal_notice">
					<p>
						<em>Please note: this method is <strong>public</strong>, however it is
						primarily intended for internal use by Flourish and will normally not
						be useful in site/application code</em>
					</p>
				</div>
							<div class="method_description">
									<p>Required by ArrayAccess interface</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">void</span> <span class="php-identifier">offsetUnset</span><span class="php-brackets">(</span> <span class="php-vartype">integer|string</span> <span class="php-var">$offset</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">integer|string</td>
				<td class="param_name">$offset</td>
				<td class="param_description">The offset to unset</td>
			  </tr>
						</table>
			</div>
		</div>
		<!-- end method -->	
			  			  									<!-- start protected method -->
			<h5 id="fXML-api-query" class="protected method"><span class="resolution">-></span><span class="name">query()</span> <span class="visibility">protected</span></h5>
			<div class="protected method">
							<div class="method_description">
									<p>Performs an XPath query on the current element, returning the raw results</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array</span> <span class="php-identifier">query</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$path</span> <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$path</td>
				<td class="param_description">The XPath path to query</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 The matching elements
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fXML-api-toXML" class="method"><span class="resolution">-></span><span class="name">toXML()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Returns a well-formed XML string from the current element</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">string</span> <span class="php-identifier">toXML</span><span class="php-brackets">(</span>  <span class="php-brackets">)</span></code>
			</p>
										<h6>Returns</h6>
				<p class="return">
					 The XML
				</p>
		</div>
		<!-- end method -->	
			  			  									<!-- start method -->
			<h5 id="fXML-api-xpath" class="method"><span class="resolution">-></span><span class="name">xpath()</span> <span class="visibility">public</span></h5>
			<div class="method">
							<div class="method_description">
									<p>Executes an XPath query on the current element, returning an array of matching elements</p>
				</div>
			<h6>Signature</h6>
			<p class="signature">
				<code><span class="php-vartype">array|string|<a href="#fXML">fXML</a></span> <span class="php-identifier">xpath</span><span class="php-brackets">(</span> <span class="php-vartype">string</span> <span class="php-var">$path</span><span class="php-code">,</span> <span class="php-vartype">boolean</span> <span class="php-var">$first_only</span><span class="php-code">=</span>FALSE <span class="php-brackets">)</span></code>
			</p>
						<h6>Parameters</h6>
			<div class="parameters">
			<table cellspacing="0">
						  <tr>
				<td class="param_data_type">string</td>
				<td class="param_name">$path</td>
				<td class="param_description">The XPath path to query</td>
			  </tr>
						  <tr>
				<td class="param_data_type">boolean</td>
				<td class="param_name">$first_only</td>
				<td class="param_description">If only the first match should be returned</td>
			  </tr>
						</table>
			</div>
										<h6>Returns</h6>
				<p class="return">
					 An array of matching elements, or a string or <a href="#fXML">fXML</a> object if <tt>$first_only</tt> is <tt>TRUE</tt>
				</p>
		</div>
		<!-- end method -->	
			</div>		</section>
		</div>
		<section class="main">
<h2 id="BackwardsCompatibilityBreak-docs">Backwards Compatibility Breaks</h2>

<p>
On this page you will find a list of all breaks in backwards compatibility. Once Flourish becomes stable this will only happen with major version releases. During the alpha phase they are bound to happen on a regular basis, whereas during beta they should be rare.
</p>

<p>
<em>If you work with any protected methods or <code>@internal</code> public methods, be sure to check out the <a href="#InternalBackwardsCompatibilityBreak-docs">internal backwards
compatiblity breaks</a> page.</em>
</p>

<h3 id="BackwardsCompatibilityBreak-docs-BetaPhase">Beta Phase</h3>

<h4 id="BackwardsCompatibilityBreak-docs-Revision1035"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/32c6129d"><span class="icon">Revision 1035</span></a></h4>

<p>
<code>fTemplating::create()</code> was removed and a new method <a href="#fTemplating-api-attach">fTemplating::attach()</a> was created to provide similar functionality.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision1031"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/3903f026"><span class="icon">Revision 1031</span></a></h4>

<p>
<code>fCore::detectOpcodeCache()</code> was renamed to <a href="#fLoader-api-hasOpcodeCache">fLoader::hasOpcodeCache()</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision1026"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/0d744a20"><span class="icon">Revision 1026</span></a></h4>

<p>
<a href="#fFile-api-output">fFile::output()</a> now automatically closes any open output buffering and discards the contents.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision1011"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/d05c8bf0"><span class="icon">Revision 1011</span></a></h4>

<p>
The email subject of error/exception emails sent by <a href="#fCore">fCore</a> has changed.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision1010"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/c9e5633f"><span class="icon">Revision 1010</span></a></h4>

<p>
<a href="#fRecordSet-api-sort">fRecordSet::sort()</a> and <a href="#fRecordSet-api-sortByCallback">fRecordSet::sortByCallback()</a> now return a new record set instead of sorting the record set in place - this helps prevent side effects.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision990"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/5b17e6e6"><span class="icon">Revision 990</span></a></h4>

<p>
<a href="#fActiveRecord-api-reflect">fActiveRecord::reflect()</a> now returns an associative array instead of a string.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision984"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/ee3eda47"><span class="icon">Revision 984</span></a></h4>

<p>
<a href="#fSchema-api-getTables">fSchema::getTables()</a>, <a href="#fSchema-api-getColumnInfo">fSchema::getColumnInfo()</a>, <a href="#fSchema-api-getDatabases">fSchema::getDatabases()</a>, <a href="#fSchema-api-getKeys">fSchema::getKeys()</a> and <a href="#fSchema-api-getRelationships">fSchema::getRelationships()</a> now return database, schema, table and column names in lowercase. This may change the behavior of, or break ORM classes for SQLite, MySQL, PostgreSQL or MSSQL databases containing mixed-case identifiers, although such mixed-cased identifiers have never been officially supported. Please test ORM functionality when upgrading to this revision.
</p>

<p>
Callbacks registered to the <code>extracted</code> hook via <a href="#fDatabase-api-registerHookCallback">fDatabase::registerHookCallback()</a> no longer receive the <code>$strings</code> parameter, instead all strings are added into the <code>$values</code> parameter.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision973"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/0b410b6d"><span class="icon">Revision 973</span></a></h4>

<p>
Updated <a href="#fCore-api-expose">fCore::expose()</a> to not wrap the value in an HTML tag when PHP is being run via the CLI.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision969"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/0dd08754"><span class="icon">Revision 969</span></a></h4>

<p>
<a href="#fRequest-api-getBestAcceptType">fRequest::getBestAcceptType()</a> and <a href="#fRequest-api-getBestAcceptLanguage">fRequest::getBestAcceptLanguage()</a> now return either <code>NULL</code>, <code>FALSE</code> or a string instead of <code>NULL</code> or a string. See <a href="#fRequest-docs-RetrievingHTTPAcceptValues">documentation</a> for details of return values.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision945"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/a1ae8dc9"><span class="icon">Revision 945</span></a></h4>

<p>
The <code>$contents</code> parameter of <a href="#fEmail-api-addAttachment">fEmail::addAttachment()</a> is now first instead of third.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision944"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/fd0e0eae"><span class="icon">Revision 944</span></a></h4>

<p>
<a href="#fORMFile-api-configureImageUploadColumn">fORMFile::configureImageUploadColumn()</a> no longer accepts the optional <code>$image_type</code> as the fourth parameter, instead <a href="#fORMFile-api-addFImageMethodCall">fORMFile::addFImageMethodCall()</a> must be called with <code>saveChanges</code> as the <code>$method</code> and the image type as the first parameter.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision943"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/a388312c"><span class="icon">Revision 943</span></a></h4>

<p>
<a href="#fRequest-api-get">fRequest::get()</a> now strips out low bytes characters if no <code>$cast_to</code>, or if a <code>string</code> or <code>array</code> <code>$cast_to</code> is specified. Using the new <code>binary</code> <code>$cast_to</code> will leave all bytes intact. 
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision942"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/91441067"><span class="icon">Revision 942</span></a></h4>

<p>
<a href="#fActiveRecord">fActiveRecord</a> column <code>set</code> methods now treat strings of all whitespace the same as empty strings and convert them to <code>NULL</code>.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision934"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/aca98e00"><span class="icon">Revision 934</span></a></h4>

<p>
Changed the parameter order in <a href="#fImage-api-crop">fImage::crop()</a> from <code>$crop_from_x</code>, <code>$crop_from_y</code>, <code>$new_width</code>, <code>$new_height</code> to <code>$new_width</code>, <code>$new_height</code>, <code>$crop_from_x</code>, <code>$crop_from_y</code>.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision917"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/313acde2"><span class="icon">Revision 917</span></a></h4>

<p>
Changed the array structure for child record in validation messages. Instead of all main record and child record messages being in a single array with keys in the form of <code>child_table[0]::column</code>, there is now a <code>child_table[0]</code> key that points to an array containing a <code>name</code> key and an <code>errors</code> key. The value for <code>name</code> is the name of the child record, e.g. <code>Child Record #1</code>. The value for <code>errors</code> is an array of validation messages with the keys being the column names and the values being the validation messages. Thus:
</p>
<pre><code>array(
    'first_name' =&gt; 'First Name: Please enter a value',
    'user_permissions[0]::resource' =&gt; 'Resource: Please enter a value'
)</code></pre>

<p>
 would now be represented as:
</p>
<pre><code>array(
    'first_name' =&gt; 'First Name: Please enter a value',
    'user_permissions[0]' =&gt; array(
        'name' =&gt; 'User Permission #1',
        'errors' =&gt; array(
            'resource' =&gt; 'Resource: Please enter a value'
        )
    )
)</code></pre>

<p>
 Methods registered to the <code>pre::validate()</code> and <code>post::validate()</code> hooks will need to handle this new array structure. Code that calls <code>-&gt;validate(TRUE)</code> on an <a href="#fActiveRecord">fActiveRecord</a> object will need to handle this new array structure. <a href="#fORMValidation-api-addStringReplacement">fORMValidation::addStringReplacement()</a>, <a href="#fORMValidation-api-addRegexReplacement">fORMValidation::addRegexReplacement()</a> and <a href="#fORMValidation-api-setMessageOrder">fORMValidation::setMessageOrder()</a> will now only affect the specified class specified and will not affect messages from child records.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision915"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/28548208"><span class="icon">Revision 915</span></a></h4>

<p>
Restructured individual record access, the iterator interface and callback parameters for <a href="#fRecordSet">fRecordSet</a>.
</p>

<p>
Removed the method <code>fRecordSet::fetchRecord()</code> - functionality can be replicated via the new method <a href="#fRecordSet-api-getRecord">fRecordSet::getRecord()</a>.
</p>

<p>
Manual iteration via <code>fRecordSet::current()</code>, <code>fRecordSet::key()</code>, <code>fRecordSet::next()</code>, <code>fRecordSet::rewind()</code> and <code>fRecordSet::valid()</code> (the Iterator interface) was removed and should be replaced by retrieving an ArrayIterator from the new method <a href="#fRecordSet-api-getIterator">fRecordSet::getIterator()</a>. Manual iteration can be performed on the ArrayIterator object.
</p>

<p>
The <code>$pointer</code> parameter was replaced with <code>$method_name</code> for callbacks registered via <a href="#fORM-api-registerRecordSetMethod">fORM::registerRecordSetMethod()</a>.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision911"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/94b78744"><span class="icon">Revision 911</span></a></h4>

<p>
Changed <a href="#fTemplating-api-delete">fTemplating::delete()</a> to return the value(s) of the element(s) deleted instead of the <a href="#fTemplating">fTemplating</a> instance.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision904"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/e7b5f799"><span class="icon">Revision 904</span></a></h4>

<p>
<a href="#fSession-api-add">fSession::add()</a>, <a href="#fSession-api-delete">fSession::delete()</a>, <a href="#fSession-api-get">fSession::get()</a>, <a href="#fSession-api-set">fSession::set()</a>, <a href="#fTemplating-api-add">fTemplating::add()</a>, <a href="#fTemplating-api-delete">fTemplating::delete()</a>, <a href="#fTemplating-api-get">fTemplating::get()</a> and <a href="#fTemplating-api-set">fTemplating::set()</a> all now interpret <code>[</code> and <code>]</code> as array syntax and thus these can not be used in key or element names.
</p>

<p>
<code>fTemplating::remove()</code> was renamed to <a href="#fTemplating-api-filter">fTemplating::filter()</a>. 
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision885"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/6ce45b67"><span class="icon">Revision 885</span></a></h4>

<p>
Removed <code>fDatabase::enableSlowQueryWarnings()</code>, added ability to replicate via <a href="#fDatabase-api-registerHookCallback">fDatabase::registerHookCallback()</a>.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision879"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/1c311706"><span class="icon">Revision 879</span></a></h4>

<p>
Removed support for the <code>odbc</code> and <code>pdo_odbc</code> extensions from <a href="#fDatabase">fDatabase</a>, <a href="#fResult">fResult</a>, <a href="#fStatement">fStatement</a> and <a href="#fUnbufferedResult">fUnbufferedResult</a>. With this change, Flourish no longer supports any kind of ODBC connections.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision854"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/58262812"><span class="icon">Revision 854</span></a></h4>

<p>
<code>fActiveRecord::populate{RelatedRecords}()</code> changed from requiring the database table name as the input prefix to the <code>underscore_notation</code> version of the class name. This will only affect related records where the class was mapped using <a href="#fORM-api-mapClassToTable">fORM::mapClassToTable()</a>.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision840"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/b604ea2b"><span class="icon">Revision 840</span></a></h4>

<p>
Renamed <code>fUpload::setMaxFilesize()</code> to <a href="#fUpload-api-setMaxSize">fUpload::setMaxSize()</a> to be consistent with <a href="#fFile-api-getSize">fFile::getSize()</a>.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision839"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/79457820"><span class="icon">Revision 839</span></a></h4>

<p>
<a href="#fUpload">fUpload</a> no longer accepts uploaded files that start with a <code>.</code> unless <a href="#fUpload-api-allowDotFiles">fUpload::allowDotFiles()</a> is called.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision833"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/4891f35e"><span class="icon">Revision 833</span></a></h4>

<p>
<a href="#fActiveRecord-api-validate">fActiveRecord::validate()</a> now uses column names as array keys if messages are returned, the <code>$validation_messages</code> parameter for the <code>pre::validate()</code> and <code>post::validate()</code> hooks now requires array keys be column names and <a href="#fValidation-api-validate">fValidation::validate()</a> now uses field names as array keys if messages are returned.
</p>

<p>
<a href="#fUpload-api-validate">fUpload::validate()</a> no longer returns a <code>$_FILES</code> array.
</p>

<p>
<a href="#fValidation-api-addRequiredFields">fValidation::addRequiredFields()</a> no longer accepts one-or-more rules, instead use <a href="#fValidation-api-addOneOrMoreRule">fValidation::addOneOrMoreRule()</a>. <a href="#fValidation-api-addRequiredFields">fValidation::addRequiredFields()</a> no longer accepts conditional rules, instead use <a href="#fValidation-api-addConditionalRule">fValidation::addConditionalRule()</a>.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision760"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/72da3349"><span class="icon">Revision 760</span></a></h4>

<p>
<a href="#fDirectory-api-scan">fDirectory::scan()</a> and <a href="#fDirectory-api-scanRecursive">fDirectory::scanRecursive()</a> to strip the current directory's path before matching the <code>$filter</code>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision736"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/26d79b1e"><span class="icon">Revision 736</span></a></h4>

<p>
Renamed <code>fFile::getFilename()</code> to <a href="#fFile-api-getName">fFile::getName()</a>, <code>fFile::getFilesize()</code> to <a href="#fFile-api-getSize">fFile::getSize()</a>, <code>fFile::getDirectory()</code> to <a href="#fFile-api-getParent">fFile::getParent()</a> and <code>fDirectory::getFilesize()</code> to <a href="#fDirectory-api-getSize">fDirectory::getSize()</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision735"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/8075c6db"><span class="icon">Revision 735</span></a></h4>

<p>
Added the <code>$force_cascade</code> parameter to <a href="#fActiveRecord-api-delete">fActiveRecord::delete()</a> and <a href="#fActiveRecord-api-store">fActiveRecord::store()</a>. This change require any classes that override those methods be updated to include at least one parameter.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision726"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/b55d0d43"><span class="icon">Revision 726</span></a></h4>

<p>
<code>fORM::addCustomClassTableMapping()</code> was renamed to <a href="#fORM-api-mapClassToTable">fORM::mapClassToTable()</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision721"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/5a19c8ed"><span class="icon">Revision 721</span></a></h4>

<p>
Removed the <code>$prefix</code> parameter from the methods <a href="#fSession-api-delete">fSession::delete()</a>, <a href="#fSession-api-get">fSession::get()</a> and <a href="#fSession-api-set">fSession::set()</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision720"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/30b77654"><span class="icon">Revision 720</span></a></h4>

<p>
Removed support for date function translation in <a href="#fDatabase">fDatabase</a>/<a href="#fSQLTranslation">fSQLTranslation</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision700"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/b2915f6a"><span class="icon">Revision 700</span></a></h4>

<p>
Renamed <code>fRecordSet::buildFromRecords()</code> to <a href="#fRecordSet-api-buildFromArray">fRecordSet::buildFromArray()</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision659"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/fbe71f0b"><span class="icon">Revision 659</span></a></h4>

<p>
Before this revision <code>one-to-one</code> relationships were not properly detected, so some <code>one-to-many</code> functionality such as <code>fActiveRecord::populate{RelatedRecords}()</code>, <code>fActiveRecord::build{RelatedRecords}()</code> and <code>fActiveRecord::associate{RelatedRecords}()</code> was working on these <code>one-to-one</code> relationships when it should not have.
</p>

<p>
<code>one-to-one</code> relationships support <code>fActiveRecord::create{RelatedRecord}()</code>, <code>fActiveRecord::populate{RelatedRecord}()</code> and <code>fActiveRecord::associate{RelatedRecord}()</code> instead.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision651"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/e7b2d448"><span class="icon">Revision 651</span></a></h4>

<p>
Renamed <code>fORMValidation::addConditionalValidationRule()</code> to <a href="#fORMValidation-api-addConditionalRule">fORMValidation::addConditionalRule()</a>, <code>fORMValidation::addManyToManyValidationRule()</code> to <a href="#fORMValidation-api-addManyToManyRule">fORMValidation::addManyToManyRule()</a>, <code>fORMValidation::addOneOrMoreValidationRule()</code> to <a href="#fORMValidation-api-addOneOrMoreRule">fORMValidation::addOneOrMoreRule()</a>, <code>fORMValidation::addOneToManyValidationRule()</code> to <a href="#fORMValidation-api-addOneToManyRule">fORMValidation::addOneToManyRule()</a>, <code>fORMValidation::addOnlyOneValidationRule()</code> to <a href="#fORMValidation-api-addOnlyOneRule">fORMValidation::addOnlyOneRule()</a>, <code>fORMValidation::addValidValuesValidationRule()</code> to <a href="#fORMValidation-api-addValidValuesRule">fORMValidation::addValidValuesRule()</a> 
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision591"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/e031537c"><span class="icon">Revision 591</span></a></h4>

<p>
Removed <code>fRecordSet::flagAssociate()</code> and <code>fRecordSet::isFlaggedForAssociation()</code>, the <code>$associate</code> parameter is no longer passed to callbacks registered via <a href="#fORM-api-registerRecordSetMethod">fORM::registerRecordSetMethod()</a> 
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision567"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/a158d016"><span class="icon">Revision 567</span></a></h4>

<p>
The first parameter of <a href="#fSession-api-clear">fSession::clear()</a> was removed, <a href="#fSession-api-delete">fSession::delete()</a> should now be used instead 
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision566"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/d6d9c907"><span class="icon">Revision 566</span></a></h4>

<p>
Moved <code>fCRUD::printOption()</code> to <a href="#fHTML-api-printOption">fHTML::printOption()</a>, <code>fCRUD::showChecked()</code> to <a href="#fHTML-api-showChecked">fHTML::showChecked()</a>, <code>fCRUD::removeListItems()</code> and <code>fCRUD::reorderListItems()</code> to <a href="#fException-api-splitMessage">fException::splitMessage()</a>, <code>fCRUD::generateRequestToken()</code> to <a href="#fRequest-api-generateCSRFToken">fRequest::generateCSRFToken()</a>, and <code>fCRUD::validateRequestToken()</code> to <a href="#fRequest-api-validateCSRFToken">fRequest::validateCSRFToken()</a> 
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision562"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/4491abdd"><span class="icon">Revision 562</span></a></h4>

<p>
Removed <code>fORMSchema::enableSmartCaching()</code>, <a href="#fORM-api-enableSchemaCaching">fORM::enableSchemaCaching()</a> now provides equivalent functionality. <code>fSchema::setCacheFile()</code> changed to <a href="#fSchema-api-enableCaching">fSchema::enableCaching()</a> and now requires an <a href="#fCache">fCache</a> object. <code>fSchema::flushInfo()</code> was renamed to <a href="#fSchema-api-clearCache">fSchema::clearCache()</a>. 
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision525"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/ff14fd2a"><span class="icon">Revision 525</span></a></h4>

<p>
Changed the second parameter of <a href="#fFile-api-output">fFile::output()</a> from <code>$ignore_output_buffer</code> to <code>$filename</code>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision524"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/322743e0"><span class="icon">Revision 524</span></a></h4>

<p>
Removed <code>fDate::getSecondsDifference()</code>, <code>fTime::getSecondsDifference()</code>, <code>fTimestamp::getSecondsDifference()</code> and <code>fTimestamp::getSeconds()</code>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision514"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/09f5f00a"><span class="icon">Revision 514</span></a></h4>

<p>
<code>fCore::getOS()</code> and <code>fCore::getPHPVersion()</code> were removed and replaced with <a href="#fCore-api-checkOS">fCore::checkOS()</a> and <a href="#fCore-api-checkVersion">fCore::checkVersion()</a> 
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision499"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/2691c60a"><span class="icon">Revision 499</span></a></h4>

<p>
Renamed <code>fORM::addCustomTableClassMapping()</code> to <a href="#fORM-api-addCustomClassTableMapping">fORM::addCustomClassTableMapping()</a> and swapped the parameters
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision498"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/e2e48a71"><span class="icon">Revision 498</span></a></h4>

<p>
Changed <a href="#fCryptography-api-symmetricKeyEncrypt">fCryptography::symmetricKeyEncrypt()</a> to not encrypt the IV since we are using HMAC on it 
</p>

<p>
<hr />

</p>

<h3 id="BackwardsCompatibilityBreak-docs-AlphaPhase">Alpha Phase</h3>

<p>
<em>Most users will not have code from the Flourish alpha</em>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision403"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/ec66b713"><span class="icon">Revision 403</span></a></h4>

<p>
<code>fCore::stringlike()</code> was removed
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision402"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/843e4a01"><span class="icon">Revision 402</span></a></h4>

<p>
<code>fCore::trigger()</code> was removed
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision399"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/45d33aa6"><span class="icon">Revision 399</span></a></h4>

<p>
!<a href="#fPrintableException">fPrintableException</a> was renamed to <a href="#fException">fException</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision388"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/b221d83a"><span class="icon">Revision 388</span></a></h4>

<p>
<code>fCore::toss()</code> was removed and all exceptions are now normally thrown with <code>throw new ExceptionName()</code>. <code>fCore::registerTossCallback()</code> was renamed to <code>fPrintableException::registerCallback()</code>, <code>fGrammar::compose()</code> was renamed to <a href="#fText-api-compose">fText::compose()</a> and <code>fGrammar::registerComposeCallback()</code> was renamed to <a href="#fText-api-registerComposeCallback">fText::registerComposeCallback()</a>. 
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision374"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/6f388cad"><span class="icon">Revision 374</span></a></h4>

<p>
<a href="#fActiveRecord">fActiveRecord</a> hooks and method calls now have a <code>&amp;$cache</code> parameter after the <code>&amp;$related_records</code> parameter, but before any other parameters. Any method registered to a hook will need to have the method signature updated.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision364"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/3d22a999"><span class="icon">Revision 364</span></a></h4>

<p>
Swapped the order of the last two parameters of <a href="#fORMRelated-api-setOrderBys">fORMRelated::setOrderBys()</a> so that <code>$route</code> (which is really just <code>NULL</code> most of the time) was last and optional 
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision361"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/99eb5d09"><span class="icon">Revision 361</span></a></h4>

<p>
Changed the existing file upload field name from <code>__flourish_existing_column_name</code> to <code>existing-column_name</code> and changed the delete file upload field name from <code>__flourish_delete_column_name</code> to <code>delete-column_name</code> 
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision348"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/920b4098"><span class="icon">Revision 348</span></a></h4>

<p>
<code>fNoResultsException</code> was renamed to <a href="#fNoRowsException">fNoRowsException</a>, <code>fResult::tossIfNoResults()</code> was renamed to <a href="#fRequest-api-tossIfNoRows">fRequest::tossIfNoRows()</a>, <code>fUnbufferedResult::tossIfNoResults()</code> was renamed to <a href="#fUnbufferedResult-api-tossIfNoRows">fUnbufferedResult::tossIfNoRows()</a>, <code>fResult::getAffectedRows()</code> was renamed to <a href="#fResult-api-countAffectedRows">fResult::countAffectedRows()</a> and <code>fResult::getReturnedRows()</code> was renamed to <a href="#fRequest-api-countReturnedRows">fRequest::countReturnedRows()</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision332"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/c92bb99c"><span class="icon">Revision 332</span></a></h4>

<p>
<code>fActiveRecord::has()</code> was renamed to <a href="#fActiveRecord-api-hasOld">fActiveRecord::hasOld()</a> and <code>fActiveRecord::retrieve()</code> was renamed to <a href="#fActiveRecord-api-retrieveOld">fActiveRecord::retrieveOld()</a> 
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision331"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/08f818f5"><span class="icon">Revision 331</span></a></h4>

<p>
<code>replace::</code> hooks are no longer allowed in <a href="#fORM-api-registerHookCallback">fORM::registerHookCallback()</a>, instead use <a href="#fORM-api-registerActiveRecordMethod">fORM::registerActiveRecordMethod()</a>. <code>fRecordSet::registerMethodCallback()</code> has been renamed to <a href="#fORM-api-registerRecordSetMethod">fORM::registerRecordSetMethod()</a>.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision308"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/57b8a034"><span class="icon">Revision 308</span></a></h4>

<p>
Renamed <code>fORMDatabase::getInstance()</code> to <a href="#fORMDatabase-api-retrieve">fORMDatabase::retrieve()</a> and renamed <code>fORMSchema::getInstance()</code> to <a href="#fORMSchema-api-retrieve">fORMSchema::retrieve()</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision305"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/45be4b92"><span class="icon">Revision 305</span></a></h4>

<p>
<code>fUTF8::detect()</code> went from being public to private 
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision304"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/fa6be338"><span class="icon">Revision 304</span></a></h4>

<p>
<code>fResult::getPointer()</code> was removed, same functionality is available from <a href="#fResult-api-key">fResult::key()</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision303"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/b96e833e"><span class="icon">Revision 303</span></a></h4>

<p>
<code>fResult::areRemainingRows()</code> was removed, same functionality is available from <a href="#fResult-api-valid">fResult::valid()</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision300"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/2c36cbf1"><span class="icon">Revision 300</span></a></h4>

<p>
<code>fUpload::upload()</code> was renamed to <a href="#fUpload-api-move">fUpload::move()</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision298"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/cbd894da"><span class="icon">Revision 298</span></a></h4>

<p>
Changed <a href="#fUpload">fUpload</a> from a static class to an instance class
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision294"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/4c458526"><span class="icon">Revision 294</span></a></h4>

<p>
Removed <code>fPrintableException::prepareMessage()</code>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision293"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/e4089f17"><span class="icon">Revision 293</span></a></h4>

<p>
Removed <code>fTimestamp::combine()</code>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision289"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/093f2d20"><span class="icon">Revision 289</span></a></h4>

<p>
Changed the replacement token in <a href="#fRequest-api-overrideAction">fRequest::overrideAction()</a> from <code>%%action%%</code> to <code>%action%</code> 
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision282"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/fc757f03"><span class="icon">Revision 282</span></a></h4>

<p>
Changed the separator between the table name and column name for related form inputs from . back to :: because PHP converts . to _ - this reverts changes in r264
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision278"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/4001508d"><span class="icon">Revision 278</span></a></h4>

<p>
<code>fRecordSet::build{RelatedRecords}()</code> was renamed to <code>fRecordSet::prebuild{RelatedRecords}()</code> and <code>fRecordSet::count{RelatedRecords}()</code> was renamed to <code>fRecordSet::precount{RelatedRecords}()</code>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision277"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/9ad19034"><span class="icon">Revision 277</span></a></h4>

<p>
Removed <code>fRecordSet::countWithoutLimit()</code> and added the <code>$ignore_limit</code> parameter to <a href="#fRecordSet-api-count">fRecordSet::count()</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision264"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/96b8a2f2"><span class="icon">Revision 264</span></a></h4>

<p>
Changed the separator between the table name and column name for related form inputs from <code>::</code> to <code>.</code> - <code>users::user_id[]</code> will now be <code>users.user_id[]</code>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision263"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/e27ca21b"><span class="icon">Revision 263</span></a></h4>

<p>
Removed <code>fRecordSet::buildFromPrimaryKeys()</code>, changed <a href="#fORMRelated-api-associateRecords">fORMRelated::associateRecords()</a> to only accept an <a href="#fRecordSet">fRecordSet</a> instead of an <a href="#fRecordSet">fRecordSet</a> or an array of primary keys
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision259"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/c7a9f89d"><span class="icon">Revision 259</span></a></h4>

<p>
Renamed <code>fORM::createActiveRecordClass()</code> to <a href="#fORM-api-defineActiveRecordClass">fORM::defineActiveRecordClass()</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision258"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/5291446a"><span class="icon">Revision 258</span></a></h4>

<p>
Renamed <code>fFilesystem::createUniqueName()</code> to <a href="#fFilesystem-api-makeUniqueName">fFilesystem::makeUniqueName()</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision257"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/6329fae0"><span class="icon">Revision 257</span></a></h4>

<p>
Renamed <code>fTimestamp::createFormat()</code> to <a href="#fTimestamp-api-defineFormat">fTimestamp::defineFormat()</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision253"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/c6eee3ef"><span class="icon">Revision 253</span></a></h4>

<p>
Removed <code>fORMDatabase::escapeByType()</code>, added support for shorthand table.column names to <a href="#fORMDatabase-api-escapeBySchema">fORMDatabase::escapeBySchema()</a> to provide replacement functionality 
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision251"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/1c247eaa"><span class="icon">Revision 251</span></a></h4>

<p>
The fourth parameter of <a href="#fRecordSet-api-build">fRecordSet::build()</a> is now the page number instead of the offset. The page number is subtracted by one and multiplied by the limit to get the correct offset.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision250"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/5c3b1530"><span class="icon">Revision 250</span></a></h4>

<p>
Removed <code>fGrammar::registerHumanizeCallback()</code>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision249"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/97ec81f2"><span class="icon">Revision 249</span></a></h4>

<p>
<code>fGrammar::replaceHumanize()</code> was renamed to <a href="#fGrammar-api-registerHumanizeCallback">fGrammar::registerHumanizeCallback()</a>, <code>fGrammar::replaceJoinArray()</code> was renamed to <a href="#fGrammar-api-registerJoinArrayCallback">fGrammar::registerJoinArrayCallback()</a>. <code>fGrammar::addAllCapitalsWord()</code> was removed and <a href="#fGrammar-api-addHumanizeRule">fGrammar::addHumanizeRule()</a> was added with similar functionality.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision239"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/8399ee64"><span class="icon">Revision 239</span></a></h4>

<p>
<code>fDate::setDate()</code>, <code>fDate::setISODate()</code>, <code>fTime::setTime()</code>, <code>fTimestamp::setDate()</code>, <code>fTimestamp::setISODate()</code>, <code>fTimestamp::setTime()</code>, <code>fTimestamp::setTimezone()</code>, <code>fTimestamp::getTimezone()</code> were removed. The <a href="#fDate">fDate</a>, <a href="#fTime">fTime</a> and <a href="#fTimestamp">fTimestamp</a> classes all became value objects (immutable) and <a href="#fDate-api-adjust">fDate::adjust()</a>, <a href="#fTime-api-adjust">fTime::adjust()</a> and <a href="#fTimestamp-api-adjust">fTimestamp::adjust()</a> all now return new objects. Each class also gained a method called <code>modify()</code> which returns a new object based on the current object, replacing the various set methods.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision229"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/7c6a0858"><span class="icon">Revision 229</span></a></h4>

<p>
Changed <a href="#fCRUD-api-removeListItems">fCRUD::removeListItems()</a> so its parameters were consistent with <a href="#fCRUD-api-reorderListItems">fCRUD::reorderListItems()</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision225"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/4ff669ca"><span class="icon">Revision 225</span></a></h4>

<p>
<code>fXML::prepare()</code> was renamed to <a href="#fXML-api-encode">fXML::encode()</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision223"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/7c67d80d"><span class="icon">Revision 223</span></a></h4>

<p>
<code>fRecordSet::flagForAssociation()</code> was renamed to <a href="#fRecordSet-api-flagAssociate">fRecordSet::flagAssociate()</a> 
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision222"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/095c09ac"><span class="icon">Revision 222</span></a></h4>

<p>
<code>fRecordSet::registerCallback()</code> was renamed to <a href="#fRecordSet-api-registerMethodCallback">fRecordSet::registerMethodCallback()</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision221"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/dc35e6a8"><span class="icon">Revision 221</span></a></h4>

<p>
<code>fORM::getClassName()</code> was renamed to <a href="#fORM-api-getClass">fORM::getClass()</a> and <code>fRecordSet::getClassName()</code> was renamed to <a href="#fRecordSet-api-getClass">fRecordSet::getClass()</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision218"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/5b39138e"><span class="icon">Revision 218</span></a></h4>

<p>
<code>fHTML::checkForBlockLevelHTML()</code> was renamed to <a href="#fHTML-api-containsBlockLevelHTML">fHTML::containsBlockLevelHTML()</a> and <code>fHTML::createLinks()</code> was renamed to <a href="#fHTML-api-makeLinks">fHTML::makeLinks()</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision217"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/a4c6fc12"><span class="icon">Revision 217</span></a></h4>

<p>
<code>fCryptography::generateRandomString()</code> was renamed to <a href="#fCryptography-api-randomString">fCryptography::randomString()</a> 
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision216"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/f58475fb"><span class="icon">Revision 216</span></a></h4>

<p>
<code>fCRUD::createSortableColumn()</code> was renamed to <a href="#fCRUD-api-printSortableColumn">fCRUD::printSortableColumn()</a> 
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision215"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/5b552d4a"><span class="icon">Revision 215</span></a></h4>

<p>
Removed fFinancialTransaction and fShippingRates. Both were unlike the rest of Flourish in that they were tied to the APIs of other services and neither was very comprehensive in terms of the number of services supported.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision206"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/e5c99029"><span class="icon">Revision 206</span></a></h4>

<p>
Removed <code>fORMDatabase::initialize()</code>, you must now construct an <a href="#fDatabase">fDatabase</a> instance and pass it to <a href="#fORMDatabase-api-attach">fORMDatabase::attach()</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision205"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/0042a0ff"><span class="icon">Revision 205</span></a></h4>

<p>
<code>fORMDatabase::prepareBySchema()</code> was renamed to <a href="#fORMDatabase-api-escapeBySchema">fORMDatabase::escapeBySchema()</a> and <code>fORMDatabase::prepareByType()</code> was renamed to <a href="#fORMDatabase-api-escapeByType">fORMDatabase::escapeByType()</a> 
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision204"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/1207ef87"><span class="icon">Revision 204</span></a></h4>

<p>
<a href="#fDatabase-api-escape">fDatabase::escape()</a> replaces <code>fDatabase::escapeBlob()</code>, <code>fDatabase::escapeBoolean()</code>, <code>fDatabase::escapeDate()</code>, <code>fDatabase::escapeFloat()</code>, <code>fDatabase::escapeInteger()</code>, <code>fDatabase::escapeString()</code>, <code>fDatabase::escapeTime()</code> and <code>fDatabase::escapeTimestamp()</code>. <a href="#fDatabase-api-unescape">fDatabase::unescape()</a> replaces <code>fDatabase::unescapeBlob()</code>, <code>fDatabase::unescapeBoolean()</code>, <code>fDatabase::unescapeDate()</code>, <code>fDatabase::unescapeFloat()</code>, <code>fDatabase::unescapeInteger()</code>, <code>fDatabase::unescapeString()</code>, <code>fDatabase::unescapeTime()</code> and <code>fDatabase::unescapeTimestamp()</code>.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision202"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/521a55e6"><span class="icon">Revision 202</span></a></h4>

<p>
The second and third parameters of <a href="#fMessaging-api-create">fMessaging::create()</a> were swapped to be consistent with the other <a href="#fMessaging">fMessaging</a> methods
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision201"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/05cd24e5"><span class="icon">Revision 201</span></a></h4>

<p>
<code>fORMColumn::configureDateCreatedColumn()</code> was moved to <a href="#fORMDate-api-configureDateCreatedColumn">fORMDate::configureDateCreatedColumn()</a> and <code>fORMColumn::configureDateUpdatedColumn()</code> was moved to <a href="#fORMDate-api-configureDateUpdatedColumn">fORMDate::configureDateUpdatedColumn()</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision195"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/37eae733"><span class="icon">Revision 195</span></a></h4>

<p>
<code>fORMColumn::configureMoneyColumn()</code> was moved to <a href="#fORMMoney-api-configureMoneyColumn">fORMMoney::configureMoneyColumn()</a> 
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision184"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/980845ca"><span class="icon">Revision 184</span></a></h4>

<p>
<code>fMoney::multiply()</code> renamed to <a href="#fMoney-api-mul">fMoney::mul()</a> and <code>fMoney::subtract()</code> renamed to <a href="#fMoney-api-sub">fMoney::sub()</a> to be consistent with <a href="#fNumber">fNumber</a>
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision174"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/66b4f30e"><span class="icon">Revision 174</span></a></h4>

<p>
<code>fORMRelated::constructRecord()</code> renamed to <a href="#fORMRelated-api-createRecord">fORMRelated::createRecord()</a>, <code>fORMRelated::constructRecordSet()</code> renamed to <a href="#fORMRelated-api-buildRecords">fORMRelated::buildRecords()</a> 
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision173"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/90ac2353"><span class="icon">Revision 173</span></a></h4>

<p>
Renamed <code>fRecordSet::create()</code> to <a href="#fRecordSet-api-build">fRecordSet::build()</a>, removed <code>fRecordSet::createEmpty()</code>, renamed <code>fRecordSet::createFromObjects()</code> to <a href="#fRecordSet-api-buildFromRecords">fRecordSet::buildFromRecords()</a> and added a new first parameter, renamed <code>fRecordSet::createFromPrimaryKeys()</code> to <a href="#fRecordSet-api-buildFromPrimaryKeys">fRecordSet::buildFromPrimaryKeys()</a>, renamed <code>fRecordSet::createFromSQL()</code> to <a href="#fRecordSet-api-buildFromSQL">fRecordSet::buildFromSQL()</a>.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision166"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/b942184f"><span class="icon">Revision 166</span></a></h4>

<p>
<a href="#fValidation">fValidation</a> no longer has the methods <code>fValidation::setEmailFields()</code>, <code>fValidation::setEmailHeaderFields()</code> or <code>fValidation::setRequiredFields()</code>. The various <code>fValidation::add*()</code> methods should be used instead.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision144"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/0231c739"><span class="icon">Revision 144</span></a></h4>

<p>
The method <a href="#fImage-api-getInfo">fImage::getInfo()</a> went from being <code>public</code> to <code>protected</code>.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision127"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/418540c0"><span class="icon">Revision 127</span></a></h4>

<p>
<code>fRecordSet::preload{RelatedRecords}()</code> became <code>fRecordSet::build{RelatedRecords}()</code>.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision125"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/8410513c"><span class="icon">Revision 125</span></a></h4>

<p>
The <code>$debug</code> parameter was removed from all calls to <a href="#fActiveRecord">fActiveRecord</a> hook callbacks.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision84"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/1fd0f7c4"><span class="icon">Revision 84</span></a></h4>

<p>
Removed <code>fRecordSet::preload{RelatedRecords}()</code>.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision81"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/a96e0974"><span class="icon">Revision 81</span></a></h4>

<p>
<code>fInflection</code> was renamed to <a href="#fGrammar">fGrammar</a>.
</p>

<h4 id="BackwardsCompatibilityBreak-docs-Revision76"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/95cf1f34"><span class="icon">Revision 76</span></a></h4>

<p>
<a href="#fMessaging-api-show">fMessaging::show()</a> now behaves differently than it did before.
</p>
		</section>
		
		<section class="main">
<h2 id="FlourishCallbackSyntax-docs">Flourish Callback Syntax</h2>

<p>
In most programming languages where functions are first-class members, the syntax for a function or method callback is simply the function/method name without the parenthesis. The below snippet of javascript defines a function and then uses a callback for setTimeout to cause the function to be executed at a later time.
</p>
<pre class="block js"><code>function foo() {
    // Do stuff
}
setTimeout(foo, 100);</code></pre>

<p>
 Unfortunately PHP does not treat function at first-class members of the language. It uses strings and arrays for function and method callbacks respectively. In an attempt to make the callback syntax a little more intuitive, Flourish uses class constants and the <code>__get()</code> magic method to make javascript-style callbacks.
</p>

<p>
Flourish defines class constants with the same name as all static methods:
</p>
<pre class="block php"><code>// Uppercase a UTF-8 string
$string = fUTF8::upper($string);

// Uppercase an array of UTF-8 strings (PHP 5.2 only)
$strings = array_map(fUTF8::upper, $strings);</code></pre>

<p>
 The only caveat with these class constants is that in PHP 5.1 they need to be passed to <a href="#fCore-api-callback">fCore::callback()</a> if they are going to be used with built-in PHP functions. This is because the constants are the string-style static method callbacks, which were added in PHP 5.2. The method <a href="#fCore-api-callback">fCore::callback()</a> translates them into the array-style syntax that works in 5.1.
</p>
<pre class="block php"><code>// PHP 5.1 compatible callbacks for PHP functions
$string = array_map(fCore::callback(fUTF8::upper), $strings);</code></pre>

<p>
 For instance method callbacks, Flourish uses the <code>__get()</code> magic method to create the appropriate array-syntax callback for the object being called.
</p>
<pre class="block php"><code>$ten_dollars = new fMoney(10);
echo $ten_dollars-&gt;format();

// Callback syntax for format
fCore::call($ten_dollars-&gt;format);</code></pre>

<p>
 Both the instance and static method callback syntaxes work on every method of every Flourish class.
</p>
		</section>
		
		<section class="main">
<h2 id="FlourishSql-docs">Flourish SQL</h2>
<div class="sidebar">
<h3>Contents</h3>

<ul>
<li><a href="#FlourishSql-docs-SupportedDatabaseVersions">Supported Database Versions</a></li>
<li><a href="#FlourishSql-docs-Limitations">Limitations</a></li>
<li><a href="#FlourishSql-docs-Usage">Usage</a></li>
<li><a href="#FlourishSql-docs-DataTypes">Data Types</a></li>
<li><a href="#FlourishSql-docs-BooleanValues">Boolean Values</a></li>
<li><a href="#FlourishSql-docs-Transactions">Transactions</a></li>
<li><a href="#FlourishSql-docs-DataManipulationStatements">Data Manipulation Statements</a>
<ul>
<li><a href="#FlourishSql-docs-Operators">Operators</a></li>
<li><a href="#FlourishSql-docs-Functions">Functions</a></li>
<li><a href="#FlourishSql-docs-Expressions">Expressions</a></li>
<li><a href="#FlourishSql-docs-Joins">Joins</a>
<ul>
<li><a href="#FlourishSql-docs-OtherJoinTypes">Other Join Types</a></li>
</ul>
</li>
<li><a href="#FlourishSql-docs-Clauses">Clauses</a></li>
</ul>
</li>
<li><a href="#FlourishSql-docs-DataDefinitionStatements">Data Definition Statements</a>
<ul>
<li><a href="#FlourishSql-docs-CreateTable">Create Table</a></li>
<li><a href="#FlourishSql-docs-AlterTable">Alter Table</a>
<ul>
<li><a href="#FlourishSql-docs-RenameTable">Rename Table</a></li>
<li><a href="#FlourishSql-docs-AddColumn">Add Column</a></li>
<li><a href="#FlourishSql-docs-RenameColumn">Rename Column</a></li>
<li><a href="#FlourishSql-docs-DropColumn">Drop Column</a></li>
<li><a href="#FlourishSql-docs-SetColumnType">Set Column Type</a></li>
<li><a href="#FlourishSql-docs-SetDefault">Set Default</a></li>
<li><a href="#FlourishSql-docs-DropDefault">Drop Default</a></li>
<li><a href="#FlourishSql-docs-SetNotNull">Set Not Null</a></li>
<li><a href="#FlourishSql-docs-DropNotNull">Drop Not Null</a></li>
<li><a href="#FlourishSql-docs-SetCheckConstraint">Set Check Constraint</a></li>
<li><a href="#FlourishSql-docs-DropCheckConstraint">Drop Check Constraint</a></li>
<li><a href="#FlourishSql-docs-AddPrimaryKey">Add Primary Key</a></li>
<li><a href="#FlourishSql-docs-DropPrimaryKey">Drop Primary Key</a></li>
<li><a href="#FlourishSql-docs-AddForeignKey">Add Foreign Key</a></li>
<li><a href="#FlourishSql-docs-DropForeignKey">Drop Foreign Key</a></li>
<li><a href="#FlourishSql-docs-AddUnique">Add Unique</a></li>
<li><a href="#FlourishSql-docs-DropUnique">Drop Unique</a></li>
</ul>
</li>
<li><a href="#FlourishSql-docs-CommentonColumn">Comment on Column</a></li>
<li><a href="#FlourishSql-docs-DropTable">Drop Table</a></li>
<li><a href="#FlourishSql-docs-CreateIndex">Create Index</a></li>
<li><a href="#FlourishSql-docs-DropIndex">Drop Index</a></li>
<li><a href="#FlourishSql-docs-ForeignKeySupport">Foreign Key Support</a></li>
</ul>
</li>
</ul>
</div>

<p>
One of the aims of Flourish is to make a portable PHP library so that applications can be deployed on different servers with little to no changes. With the multitude of database servers available and different platforms, one of the main hurdles for portability is the different dialects of SQL.
</p>

<p>
Flourish SQL has grown a common subset of the SQL dialects supported by IBM DB2, Microsoft SQL Server, MySQL, PostgreSQL and SQLite, with a few additions for ease-of-use. This document describes what features and syntax are supported across all databases.
</p>

<p>
In the Flourish SQL column you will find the supported syntax for a function, data type, etc. The other columns contain a <code></code> if the syntax is the same, or the database-specific syntax highlighted in red.
</p>

<h3 id="FlourishSql-docs-SupportedDatabaseVersions">Supported Database Versions</h3>

<p>
The information on this page is targeted at the following database versions, or newer editions:
</p>

<ul>
<li><strong>DB2:</strong> 9.x</li>
<li><strong>MSSQL:</strong> Server 2005</li>
<li><strong>MySQL:</strong> 5.0</li>
<li><strong>Oracle:</strong> 10g</li>
<li><strong>PostgreSQL:</strong> 8.0</li>
<li><strong>SQLite:</strong> 2.8.17 <em>(v2)</em>, 3.2.8 <em>(v3)</em></li>
</ul>

<h3 id="FlourishSql-docs-Limitations">Limitations</h3>

<p>
If targeting MSSQL or DB2, please be aware that <code>UNIQUE</code> constraints only allow a single <code>NULL</code> value to be present in all rows. To work around this, split the column in to a separate table and use a foreign key to associate it to the original table.
</p>

<p>
Oracle does not support the <code>ON UPDATE</code> clause for foreign keys. MSSQL does not allow <code>ON UPDATE CASCADE</code> or <code>ON DELETE CASCADE</code> clauses for foreign keys that could cause cycles during handling. This is often caused by multiple columns in a table referencing the same foreign table.
</p>

<p>
MySQL, DB2, Oracle and MSSQL all have various constraints on <code>TEXT</code> and <code>BLOB</code> data types. To achieve cross-database support, be sure not to do the following with such columns:
</p>

<ul>
<li>Set a <code>DEFAULT</code> value</li>
<li>Use them in a <code>GROUP BY</code> clause</li>
<li>Use them as a <code>PRIMARY KEY</code> or <code>FOREIGN KEY</code></li>
<li>Use them in a <code>UNIQUE</code> constraint</li>
</ul>

<p>
Since <a href="#fRecordSet">fRecordSet</a> uses <code>GROUP BY</code> clauses to allow for selection of records by values in related tables, it is highly recommended that <code>TEXT</code> and <code>BLOB</code> columns always be split out into a separate table and to use a foreign key to associate it with the original table. The Flourish ORM has strong support to easily retrieving such related records.
</p>

<h3 id="FlourishSql-docs-Usage">Usage</h3>

<p>
The following Flourish SQL is supported when calling the <a href="#fDatabase-api-translatedQuery">fDatabase::translatedQuery()</a> and <a href="#fDatabase-api-unbufferedTranslatedQuery">fDatabase::unbufferedTranslatedQuery()</a> methods. The <a href="#fDatabase-docs-Cross-DatabaseSQL">Cross-Database SQL section</a> of the <a href="#fDatabase">fDatabase</a> page has more information.
</p>

<h3 id="FlourishSql-docs-DataTypes">Data Types</h3>

<p>
Most dialects of SQL support a large number of common data types, however a things like booleans, binary data and dates and times are often different. Here is an outline of the data types supported by Flourish SQL:
</p>
<table class="wiki sql">
	<tr>
		<th class="flourish">Flourish SQL</th>
		<th>DB2</th>
		<th>MSSQL</th>
		<th>MySQL</th>
		<th>Oracle</th>
		<th>PostgreSQL</th>
		<th>SQLite</th>
	</tr>
	<tr>
		<td class="flourish">smallint</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">integer</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">bigint</td>
		<td></td>
		<td></td>
		<td></td>
		<td class="different">integer</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">integer autoincrement primary key</td>
		<td class="different">integer generated by default as identity primary key</td>
		<td class="different">integer identity(1) primary key</td>
		<td class="different">integer auto_increment primary key</td>
		<td class="different">integer + sequence + trigger</td>
		<td class="different">serial primary key</td>
		<td class="different">integer primary key autoincrement</td>
	</tr>
	<tr>
		<td class="flourish">float</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">real</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">decimal</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">char</td>
		<td></td>
		<td class="different">nchar</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">varchar</td>
		<td></td>
		<td class="different">nvarchar</td>
		<td></td>
		<td class="different">varchar2</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">text</td>
		<td class="different">clob</td>
		<td class="different">ntext</td>
		<td class="different">mediumtext</td>
		<td class="different">clob</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">blob</td>
		<td></td>
		<td class="different">image</td>
		<td class="different">longblob</td>
		<td></td>
		<td class="different">bytea</td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">timestamp</td>
		<td></td>
		<td class="different">datetime</td>
		<td class="different">datetime</td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">date</td>
		<td></td>
		<td class="different">date for 2008, datetime for 2005</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">time</td>
		<td></td>
		<td class="different">time for 2008, datetime for 2005</td>
		<td></td>
		<td class="different">timestamp</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">boolean</td>
		<td class="different">char(1)</td>
		<td class="different">bit</td>
		<td></td>
		<td class="different">number(1)</td>
		<td></td>
		<td></td>
	</tr>
</table>
<p>
 In all cases except for the <code>date</code> and <code>time</code> are the data types consistent across the databases. MSSQL does not support <code>date</code> or <code>time</code>, so the more precise <code>datetime</code> is used instead. Oracle does not support <code>time</code> and uses <code>timestamp</code> instead. In both cases, the unnecessary portions are removed by the <a href="#fDatabase-api-unescape"><code>unescape()</code></a> method of <a href="#fDatabase">fDatabase</a>.
</p>

<p>
One other thing to note is the apparent perfect compatibility for SQLite data types. This is not because the SQLite data types were chosen as the basis for Flourish SQL, but rather that SQLite is loosely-typed and allows anything to be entered for a data type.
</p>

<h3 id="FlourishSql-docs-BooleanValues">Boolean Values</h3>

<p>
Since boolean fields are implemented quite differently across databases, it comes as no surprise that there are different values to use for boolean fields:
</p>
<table class="wiki sql">
	<tr>
		<th class="flourish">Flourish SQL</th>
		<th>DB2</th>
		<th>MSSQL</th>
		<th>MySQL</th>
		<th>Oracle</th>
		<th>PostgreSQL</th>
		<th>SQLite</th>
	</tr>
	<tr>
		<td class="flourish">TRUE</td>
		<td class="different">'1'</td>
		<td class="different">'1'</td>
		<td></td>
		<td class="different">1</td>
		<td></td>
		<td class="different">'1'</td>
	</tr>
	<tr>
		<td class="flourish">FALSE</td>
		<td class="different">'0'</td>
		<td class="different">'0'</td>
		<td></td>
		<td class="different">0</td>
		<td></td>
		<td class="different">'0'</td>
	</tr>
</table>
<h3 id="FlourishSql-docs-Transactions">Transactions</h3>

<p>
Transaction control differs slightly among the supported databases:
</p>
<table class="wiki sql">
	<tr>
		<th class="flourish">Flourish SQL</th>
		<th>DB2</th>
		<th>MSSQL</th>
		<th>MySQL</th>
		<th>Oracle</th>
		<th>PostgreSQL</th>
		<th>SQLite</th>
	</tr>
	<tr>
		<td class="flourish">BEGIN</td>
		<td class="different">auto-commit disabled</td>
		<td class="different">BEGIN TRANSACTION</td>
		<td></td>
		<td class="different">auto-commit disabled</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">COMMIT</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">ROLLBACK</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">SAVEPOINT <em>savepoint_name</em></td>
		<td></td>
		<td class="different">SAVE TRANSACTION <em>savepoint_name</em></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">ROLLBACK TO SAVEPOINT <em>savepoint_name</em></td>
		<td></td>
		<td class="different">ROLLBACK TRANSACTION <em>savepoint_name</em></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
</table>
<h3 id="FlourishSql-docs-DataManipulationStatements">Data Manipulation Statements</h3>

<p>
The following constructs are are used with the data manipulation language (DML) statements in SQL. Such statements include <code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code> and <code>DELETE</code>.
</p>

<h4 id="FlourishSql-docs-Operators">Operators</h4>

<p>
Operators are fairly consistent across the different databases, with the exception of the concatenation operator. Please note that <code>||</code> works for concatenation in MySQL <strong><em>only</em></strong> when MySQL is in ANSI mode (Flourish automatically switches into ANSI mode when a connection to a MySQL database is initiated).
</p>
<table class="wiki sql">
	<tr>
		<th class="flourish">Flourish SQL</th>
		<th>DB2</th>
		<th>MSSQL</th>
		<th>MySQL</th>
		<th>Oracle</th>
		<th>PostgreSQL</th>
		<th>SQLite</th>
	</tr>
	<tr>
		<th colspan="7" class="spanner">
			Mathematical Operators
		</th>
	</tr>
	<tr>
		<td class="flourish">+</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">-</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">/</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">*</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">%</td>
		<td class="different">mod()</td>
		<td></td>
		<td></td>
		<td class="different">mod()</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<th colspan="7" class="spanner">
			String Operators
		</th>
	</tr>
	<tr>
		<td class="flourish">|| <em>(concatenation)</em></td>
		<td></td>
		<td class="different">+</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<th colspan="7" class="spanner">
			Comparison Operators
		</th>
	</tr>
	<tr>
		<td class="flourish">&lt;</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">&gt;</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">&lt;=</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">&gt;=</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">&lt;&gt; <em>(inequality)</em></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">!=</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">=</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">IN</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">NOT IN</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">IS <em>(equality with NULL)</em></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">IS NOT <em>(inequality with NULL)</em></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">LIKE <em>(case insensitive)</em></td>
		<td class="different">lower(value) LIKE lower(pattern)</td>
		<td></td>
		<td></td>
		<td class="different">lower(value) LIKE lower(pattern)</td>
		<td class="different">ILIKE</td>
		<td></td>
	</tr>
	<tr>
		<th colspan="7" class="spanner">
			Boolean Operators
		</th>
	</tr>
	<tr>
		<td class="flourish">AND</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">OR</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
</table>
<h4 id="FlourishSql-docs-Functions">Functions</h4>

<p>
There a quite a few functions that are consistent across the different databases:
</p>
<table class="wiki sql">
	<tr>
		<th class="flourish">Flourish SQL</th>
		<th>DB2</th>
		<th>MSSQL</th>
		<th>MySQL</th>
		<th>Oracle</th>
		<th>PostgreSQL</th>
		<th>SQLite</th>
	</tr>
	<tr>
		<th colspan="7" class="spanner">
			Mathematical Functions
		</th>
	</tr>
	<tr>
		<td class="flourish">abs(x)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">acos(x)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td class="different">PHP Callback</td>
	</tr>
	<tr>
		<td class="flourish">asin(x)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td class="different">PHP Callback</td>
	</tr>
	<tr>
		<td class="flourish">atan(x)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td class="different">PHP Callback</td>
	</tr>
	<tr>
		<td class="flourish">atan2(x, y)</td>
		<td></td>
		<td class="different">atn2(x, y)</td>
		<td></td>
		<td></td>
		<td></td>
		<td class="different">PHP Callback</td>
	</tr>
	<tr>
		<td class="flourish">ceil(x)</td>
		<td class="different">ceiling(x)</td>
		<td class="different">ceiling(x)</td>
		<td></td>
		<td></td>
		<td></td>
		<td class="different">PHP Callback</td>
	</tr>                  
	<tr>
		<td class="flourish">ceiling(x)</td>
		<td></td>
		<td></td>
		<td></td>
		<td class="different">ceil(x)</td>
		<td></td>
		<td class="different">PHP Callback</td>
	</tr>
	<tr>
		<td class="flourish">cos(x)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td class="different">PHP Callback</td>
	</tr>
	<tr>
		<td class="flourish">cot(x)</td>
		<td class="different">(1/tan(x))</td>
		<td></td>
		<td></td>
		<td class="different">(1/tan(x))</td>
		<td></td>
		<td class="different">PHP Callback</td>
	</tr>
	<tr>
		<td class="flourish">degrees(x)</td>
		<td></td>
		<td></td>
		<td></td>
		<td class="different">(x * 57.295779513083)</td>
		<td></td>
		<td class="different">PHP Callback</td>
	</tr> 
	<tr>
		<td class="flourish">exp(x)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td class="different">PHP Callback</td>
	</tr>
	<tr>
		<td class="flourish">floor(x)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td class="different">PHP Callback</td>
	</tr>
	<tr>
		<td class="flourish">ln(x)</td>
		<td></td>
		<td class="different">log(x)</td>
		<td></td>
		<td></td>
		<td></td>
		<td class="different">PHP Callback</td>
	</tr>
	<tr>
		<td class="flourish">log(b, x)</td>
		<td class="different">(ln(x)/ln(b))</td>
		<td class="different">(log(x)/log(b))</td>
		<td></td>
		<td></td>
		<td></td>
		<td class="different">PHP Callback</td>
	</tr>
	<tr>
		<td class="flourish">pi()</td>
		<td class="different">3.14159265358979</td>
		<td></td>
		<td class="different">(pi()+0.0000000000000)</td>
		<td class="different">3.14159265358979</td>
		<td></td>
		<td class="different">PHP Callback</td>
	</tr>
	<tr>
		<td class="flourish">power(x, y)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td class="different">PHP Callback</td>
	</tr>
	<tr>
		<td class="flourish">radians(x)</td>
		<td></td>
		<td></td>
		<td></td>
		<td class="different">(x * 0.017453292519943)</td>
		<td></td>
		<td class="different">PHP Callback</td>
	</tr>
	<tr>
		<td class="flourish">random()</td>
		<td class="different">rand()</td>
		<td class="different">rand()</td>
		<td class="different">rand()</td>
		<td class="different">(abs( dbms_random.random ) / 2147483647)</td>
		<td></td>
		<td class="different">(abs( random()) / 9223372036854775807)</td>
	</tr>
	<tr>
		<td class="flourish">round(x)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">sign(x)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td class="different">PHP Callback</td>
	</tr>
	<tr>
		<td class="flourish">sqrt(x)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td class="different">PHP Callback</td>
	</tr>
	<tr>
		<td class="flourish">sin(x)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td class="different">PHP Callback</td>
	</tr>
	<tr>
		<td class="flourish">tan(x)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td class="different">PHP Callback</td>
	</tr>
	<tr>
		<th colspan="7" class="spanner">
			Aggregate Functions
		</th>
	</tr>
	<tr>
		<td class="flourish">avg(l)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">count(l)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">max(l)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">min(l)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">sum(l)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<th colspan="7" class="spanner">
			String Functions
		</th>
	</tr>
	<tr>
		<td class="flourish">trim(s)</td>
		<td></td>
		<td class="different">rtrim(ltrim(s))</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">rtrim(s)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">ltrim(s)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">upper(s)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>      
	<tr>
		<td class="flourish">lower(s)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">substr(s, start, length)</td>
		<td class="different">substring(s, start, length, CODEUNITS32)</td>
		<td class="different">substring(s, start, length)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">replace(s, find, replace)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">length(s)</td>
		<td class="different">character_length(s, CODEUNITS32)</td>
		<td class="different">len(s)</td>
		<td class="different">char_length(s)</td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">coalesce(a, b,...)</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>  
	<tr>
		<th colspan="7" class="spanner">
			Date/Time Functions
		</th>
	</tr>
	<tr>
		<td class="flourish">CURRENT_TIMESTAMP</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td class="different">datetime( CURRENT_TIMESTAMP, 'localtime')</td>
	</tr>
</table>
<p>
 A quick scan of the SQLite column indicates that the trigonometric functions are all implemented as PHP callbacks. SQLite made the decision to include only specific functions in the supported SQL dialect, however they added support for hooks into other programming languages. Flourish uses this ability to provide support for trigonometric functions.
</p>

<h4 id="FlourishSql-docs-Expressions">Expressions</h4>

<p>
There are a few expressions that are consistent across databases:
</p>
<table class="wiki sql">
	<tr>
		<th class="flourish">Flourish SQL</th>
		<th>DB2</th>
		<th>MSSQL</th>
		<th>MySQL</th>
		<th>Oracle</th>
		<th>PostgreSQL</th>
		<th>SQLite</th>
	</tr>
	<tr>
		<td class="flourish">BETWEEN</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">CASE <em>(simple)</em></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">CASE <em>(complex)</em></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
</table>
<h4 id="FlourishSql-docs-Joins">Joins</h4>

<p>
There are quite a few different types of join supported by the four different databases, however the common join functionality is a small subset. Note that all joins except <code>CROSS</code> and <code>,</code> require use of an <code>ON</code> clause, while <code>CROSS</code> and <code>,</code> can not use an <code>ON</code> clause.
</p>
<table class="wiki sql">
	<tr>
		<th class="flourish">Flourish SQL</th>
		<th>DB2</th>
		<th>MSSQL</th>
		<th>MySQL</th>
		<th>Oracle</th>
		<th>PostgreSQL</th>
		<th>SQLite</th>
	</tr>
	<tr>
		<td class="flourish">, <em>(cross join)</em></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">CROSS JOIN</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">[INNER] JOIN</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">LEFT [OUTER] JOIN</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
</table>
<p>
 The brackets indicate the words <code>OUTER</code> and <code>INNER</code> are optional.
</p>

<h5 id="FlourishSql-docs-OtherJoinTypes">Other Join Types</h5>

<p>
You may notice the lack of a <code>FULL [OUTER] JOIN</code>, <code>RIGHT [OUTER] JOIN</code>, the keyword <code>NATURAL</code> and <code>USING</code> clauses. Unfortunately DB2, MySQL and SQLite do not support <code>FULL</code> joins, SQLite does not support <code>RIGHT</code> joins and DB2 and MSSQL do not support <code>NATURAL</code> joins. <code>USING (col, ...)</code> clauses are not supported by MSSQL.
</p>

<p>
<code>FULL</code> joins can be achieved by a somewhat complex combination of a <code>SELECT</code> from the first table with extra columns <code>UNION</code>ed with an <code>INNER JOIN</code>, <code>UNION</code>ed with a <code>SELECT</code> from the second table with extra columns.
</p>

<p>
<code>RIGHT</code> joins can be performed by switching the order of the tables in the <code>FROM</code> clause.
</p>

<p>
<code>NATURAL</code> joins are just shorthand for the common columns between tables, so all that needs to be done is an <code>INNER</code> join with manually specified columns in the <code>ON</code> condition.
</p>

<p>
<code>USING</code> clauses can be approximated with a <code>ON</code> condition, however the <code>USING</code> operator ensures that only one copy of each column is included in the returned rows, whereas <code>ON</code> does not. 
</p>

<h4 id="FlourishSql-docs-Clauses">Clauses</h4>

<p>
There are a few clauses that are supported across all databases:
</p>
<table class="wiki sql">
	<tr>
		<th class="flourish">Flourish SQL</th>
		<th>DB2</th>
		<th>MSSQL</th>
		<th>MySQL</th>
		<th>Oracle</th>
		<th>PostgreSQL</th>
		<th>SQLite</th>
	</tr>
	<tr>
		<td class="flourish">DISTINCT <em>(follows SELECT)</em></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
        <tr>
		<td class="flourish">ALL <em>(follows SELECT)</em></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
        <tr>
		<td class="flourish">LIMIT <em>(without an offset)</em></td>
		<td class="different">FETCH FIRST n ROWS ONLY</td>
		<td class="different">TOP</td>
		<td></td>
		<td class="different">subquery with rownum clause</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">LIMIT/OFFSET</td>
		<td class="different">subquery with row_number() clause and removal of extra column via PHP</td>
		<td class="different">subquery with row_number() clause and removal of extra column via PHP</td>
		<td></td>
		<td class="different">nested subqueries with rownum clauses and removal of extra column via PHP</td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">UNION</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
	<tr>
		<td class="flourish">UNION ALL</td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
	</tr>
</table>
<h3 id="FlourishSql-docs-DataDefinitionStatements">Data Definition Statements</h3>

<p>
The following are the supported data definition language (DDL) statements in Flourish SQL. Some examples of DDL statements include <code>CREATE TABLE</code>, <code>ALTER TABLE</code> and <code>CREATE INDEX</code>.
</p>

<p>
While DML statements between the supported databases tend to be fairly consistent, DDL statements tend to be much more varied. For instance, all of the supported databases use different constructs to achieve auto-incrementing primary keys.
</p>

<p>
The following grammars will show the supported Flourish SQL syntax, but do not cover exactly what is run for each type of database. To see what processing takes place, please see the <a href="#fSQLSchemaTranslation">fSQLSchemaTranslation</a> source code, or call <a href="#fDatabase-api-enableDebugging">fDatabase::enableDebugging()</a> before executing DDL statements.
</p>

<h4 id="FlourishSql-docs-CreateTable">Create Table</h4>

<p>
The following syntax is supported for <code>CREATE TABLE</code> statements. By strictly following this syntax, and using the <a href="#FlourishSql-docs-DataTypes">data types previously
defined</a>, <code>CREATE TABLE</code> statements should work identically across all six supported database systems.
</p>
<pre><code>CREATE TABLE table_name ( 
    {
        column_name data_type [ DEFAULT default_value ] [ column_constraint [ ... ] ] |
        table_constraint
    }, ...
)</code></pre>

<p>
 where <em>column_constraint</em> is:
</p>
<pre><code>{
    NOT NULL | 
    NULL | 
    UNIQUE |
    [ AUTOINCREMENT ] PRIMARY KEY |
    CHECK ( column_name IN ( value1 [, value2 [, ... ] ] ) ) |
    REFERENCES referenced_table ( referenced_column ) [ ON DELETE action ]
}</code></pre>

<p>
 <em>table_constraint</em> is:
</p>
<pre><code>{
    UNIQUE ( column_name [, ... ] ) |
    PRIMARY KEY ( column_name [, ... ] ) |
    CHECK ( column_name IN ( value1 [, value2 [, ... ] ] ) ) |
    FOREIGN KEY ( column_name ) REFERENCES referenced_table ( referenced_column )
        [ ON DELETE action ]
}</code></pre>

<p>
 and <em>action</em> is:
</p>
<pre><code>{ RESTRICT | CASCADE | SET NULL | NO ACTION }</code></pre>

<h4 id="FlourishSql-docs-AlterTable">Alter Table</h4>

<p>
The <code>ALTER TABLE</code> statements are some of the most powerful aspects of Flourish SQL since the native support for <code>ALTER TABLE</code> varies wildly between databases. In addition to varying syntax, many databases require explicit constraint names for dropping <code>UNIQUE</code>, <code>CHECK</code>, <code>FOREIGN KEY</code> and <code>PRIMARY KEY</code> constraints. These constraint names are usually generated by the system and are not consistent across different databases.
</p>

<p>
To solve these problems, <a href="#fSQLSchemaTranslation">fSQLSchemaTranslation</a> introspects the database and alters the SQL statements to work with the different database engines. In some cases multiple SQL statements must be executed. <a href="#fSQLSchemaTranslation">fSQLSchemaTranslation</a> is written in such a way that each of the statements listen below should be individually atomic. Thus, if the statement fails, the database should remain at the state before the statement was executed.
</p>

<p>
PostgreSQL, SQLite and MSSQL all fully support transactions for DDL statements, which makes this easy. For DB2, most DDL statements run within a transaction, and the one that doesn't (<code>REORG TABLE</code>) is only executed once the primary statement succeeds. For Oracle, all of these statement correspond to a single SQL statement, so the statement will either succeed or fail. MySQL requires storing rollback statements for all database operations, and such statements are run if a statement fails. The <a class="ext-link" href="http://flourishlib.com/docs/Tests"><span class="icon">tests</span></a> for Flourish include a bunch of tests to ensure that statements are run atomically.
</p>

<p>
The syntax is strongly based on PostgreSQL's <code>ALTER TABLE</code> statements, since they are powerful and succinct. Users who are more familiar with other database systems, especially SQLite and MySQL, will hopefully find these statement significantly easier to use than native commands.
</p>

<p>
Of special note among the supported database systems is SQLite, since it only natively supports renaming tables and adding columns for version 3.x and nothing for version 2.x. Flourish does a fairly significant amount of work for SQLite, which includes:
</p>

<ol>
<li>parsing the existing table structure</li>
<li>modifying it into a new temporary table</li>
<li>transferring table contents to the temporary table</li>
<li>dropping the original table</li>
<li>renaming the temporary table to the original table name</li>
</ol>

<p>
Some of these steps require significant sub-steps, such as in SQLite 2, where table renaming does not exists. Luckily SQLite allows DDL statements within transactions, so everything is safe, but <code>ALTER TABLE</code> statements may run more slowly because of the extensive amount of work required.
</p>

<h5 id="FlourishSql-docs-RenameTable">Rename Table</h5>
<pre><code>ALTER TABLE table_name RENAME TO new_table_name</code></pre>

<p>
 An <a href="#fSQLException">fSQLException</a> will be thrown if a table with the new name already exists.
</p>

<h5 id="FlourishSql-docs-AddColumn">Add Column</h5>
<pre><code>ALTER TABLE table_name ADD COLUMN column_name data_type [ DEFAULT default_value ] [ column_constraint [ ... ] ]</code></pre>

<p>
 The <code>data_type</code>, <code>default_value</code> and <code>column_constraint</code> values are all exactly the same as those for <a href="#FlourishSql-docs-CreateTable">Create Table</a> statements. An <a href="#fSQLException">fSQLException</a> will be thrown if a column with the same name already exists or there is an error in the column definition.
</p>

<h5 id="FlourishSql-docs-RenameColumn">Rename Column</h5>
<pre><code>ALTER TABLE table_name RENAME COLUMN column_name TO new_column_name</code></pre>

<p>
 An <a href="#fSQLException">fSQLException</a> will be thrown if a column with the new name already exists.
</p>

<h5 id="FlourishSql-docs-DropColumn">Drop Column</h5>
<pre><code>ALTER TABLE table_name DROP COLUMN column_name</code></pre>

<p>
 Any <code>UNIQUE</code>, <code>FOREIGN KEY</code> or <code>PRIMARY KEY</code> constraints that involve this column will also be dropped. An <a href="#fSQLException">fSQLException</a> will be thrown if the column does not exist.
</p>

<h5 id="FlourishSql-docs-SetColumnType">Set Column Type</h5>
<pre><code>ALTER TABLE table_name ALTER COLUMN column_name TYPE data_type</code></pre>

<p>
 For many of the supported databases, there are restrictions about what data types can be automatically converted. In general it is safe to change the data type to increase the size, such as making a <code>VARCHAR</code> longer, or changing from an <code>INTEGER</code> to a <code>BIGINT</code>.
</p>

<p>
For more drastic data type changes, it is normally necessary to:
</p>

<ol>
<li>Create a new column</li>
<li>Assign values to the new column from the old column, using a <code>CAST()</code> statement</li>
<li>Drop the old column</li>
<li>Rename the new column to the old column</li>
<li>Re-create <code>UNIQUE</code>, <code>FOREIGN KEY</code> and <code>PRIMARY KEY</code> constraints that existed on the old column</li>
</ol>

<h5 id="FlourishSql-docs-SetDefault">Set Default</h5>
<pre><code>ALTER TABLE table_name ALTER COLUMN column_name SET DEFAULT default_value</code></pre>

<p>
 Sets the default value for a column, overriding any previous value. Some databases only support constant values for <code>default_value</code>. For example, not all databases allow setting <code>CURRENT_TIMESTAMP()</code> to be a default value since it is a function.
</p>

<h5 id="FlourishSql-docs-DropDefault">Drop Default</h5>
<pre><code>ALTER TABLE table_name ALTER COLUMN column_name DROP DEFAULT</code></pre>

<p>
 Drops the default value for a column. This statement will succeed even if no default value exists.
</p>

<h5 id="FlourishSql-docs-SetNotNull">Set Not Null</h5>
<pre><code>ALTER TABLE table_name ALTER COLUMN column_name SET NOT NULL [ DEFAULT default_value ]</code></pre>

<p>
 Sets a column to not allow <code>NULL</code> values, and optionally sets the default value for a column. This statement will succeed even if the column already restricts <code>NULL</code> values.
</p>

<p>
This combined form of <code>SET NOT NULL</code> and <code>SET DEFAULT</code> is useful to support <code>NOT NULL DEFAULT ''</code> configurations on Oracle databases, where blank strings are automatically converted to <code>NULL</code>. <code>NOT NULL DEFAULT ''</code> is useful for writing simpler SQL statements since it is no longer necessary to specially test for <code>NULL</code> values via <code>(column_name IS NULL OR column_name = '')</code>.
</p>

<h5 id="FlourishSql-docs-DropNotNull">Drop Not Null</h5>
<pre><code>ALTER TABLE table_name ALTER COLUMN column_name DROP NOT NULL</code></pre>

<p>
 Changes a column to allow <code>NULL</code> values. For most databases this will not succeed on columns that are part of a <code>PRIMARY KEY</code> constraint. This statement will succeed even if the column already allows <code>NULL</code>s.
</p>

<h5 id="FlourishSql-docs-SetCheckConstraint">Set Check Constraint</h5>
<pre><code>ALTER TABLE table_name ALTER COLUMN column_name SET CHECK IN (string_value [, ... ] )</code></pre>

<p>
 Creates a <code>CHECK(column_name IN ('string value', 'string value'))</code> check constraint for the column. This check constraint will override any existing check constraint.
</p>

<p>
MySQL doesn't support <code>CHECK</code> constraints, but the <code>ENUM()</code> data type is basically a check constraint for a set of string values. Thus for MySQL, this statement will turn a <code>VARCHAR</code> column into an <code>ENUM()</code> column with the strings provided.
</p>

<h5 id="FlourishSql-docs-DropCheckConstraint">Drop Check Constraint</h5>
<pre><code>ALTER TABLE table_name ALTER COLUMN column_name DROP CHECK</code></pre>

<p>
 Drop the <code>CHECK</code> constraint for a column. An <a href="#fSQLException">fSQLException</a> will be thrown if no check constraint exists.
</p>

<p>
MySQL doesn't support <code>CHECK</code> constraints, but the <code>ENUM()</code> data type is basically a check constraint for a set of string values. Thus the only cross- database compatible <code>CHECK</code> constraint is <code>CHECK(column_name IN ('string value', 'string value 2'))</code>, which will be automatically converted to an <code>ENUM()</code> for MySQL. Consequently, when <code>DROP CHECK</code> is called for MySQL, an <code>ENUM()</code> column will be coverted to a <code>VARCHAR</code>.
</p>

<h5 id="FlourishSql-docs-AddPrimaryKey">Add Primary Key</h5>
<pre><code>ALTER TABLE table_name ADD PRIMARY KEY (column_name [, ... ] ) [ AUTOINCREMENT ]</code></pre>

<p>
 Creates a primary key for <code>table_name</code> with the columns specified. An <a href="#fSQLException">fSQLException</a> will be thrown if a primary key already exists.
</p>

<p>
If only one column is specified and the <code>AUTOINCREMENT</code> keyword is provided, the column will be configured to automatically created auto-incrementing integer values when no value is provided. The actual implementation of <code>AUTOINCREMENT</code> varies widely between databases. Please see <a href="#FlourishSql-docs-DataTypes">Data Types</a> for details.
</p>

<h5 id="FlourishSql-docs-DropPrimaryKey">Drop Primary Key</h5>
<pre><code>ALTER TABLE table_name DROP PRIMARY KEY</code></pre>

<p>
 Drops the primary key for <code>table_name</code>. Any foreign keys that reference this primary key will also be dropped. An <a href="#fSQLException">fSQLException</a> will be thrown if a primary key does not exist.
</p>

<h5 id="FlourishSql-docs-AddForeignKey">Add Foreign Key</h5>
<pre><code>ALTER TABLE table_name ADD FOREIGN KEY (column_name) REFERENCES foreign_table(foreign_column) [ ON DELETE action ]</code></pre>

<p>
 Adds a foreign key to the column specified. Currently, Flourish as a whole, only supports single-column foreign key constraints. This restriction is also present for this <code>ALTER TABLE</code> statement. The valid <code>action</code> values are the same as those supported by <a href="#FlourishSql-docs-CreateTable">Create Table</a>. An <a href="#fSQLException">fSQLException</a> will be thrown if a foreign key already exist.
</p>

<p>
Since DB2 and Oracle do not fully support <code>ON UPDATE</code> clauses, such a clause will be automatically removed for those databases.
</p>

<h5 id="FlourishSql-docs-DropForeignKey">Drop Foreign Key</h5>
<pre><code>ALTER TABLE table_name DROP FOREIGN KEY (column_name)</code></pre>

<p>
 Drops the foreign key for the column specified. Currently, Flourish as a whole, only supports single-column foreign key constraints. An <a href="#fSQLException">fSQLException</a> will be thrown if a foreign key does not exist.
</p>

<h5 id="FlourishSql-docs-AddUnique">Add Unique</h5>
<pre><code>ALTER TABLE table_name ADD UNIQUE (column_name [, ... ] )</code></pre>

<p>
 Adds a unique constraint to the column(s) specified. Some databases, such as MSSQL and DB2, treat a <code>NULL</code> value as a distinct value, only allowing one per column. PostgreSQL, SQLite, Oracle and MySQL treat <code>NULL</code> specially and allow any number of <code>NULL</code>s in a unique column.
</p>

<h5 id="FlourishSql-docs-DropUnique">Drop Unique</h5>
<pre><code>ALTER TABLE table_name DROP UNIQUE (column_name [, ... ] )</code></pre>

<p>
 Drop the unique constraint that exists for the column(s) specified. Any foreign keys that reference this unique constraint will also be dropped. An <a href="#fSQLException">fSQLException</a> will be thrown if a <code>UNIQUE</code> constraint does not exist for the column(s) specified.
</p>

<h4 id="FlourishSql-docs-CommentonColumn">Comment on Column</h4>
<pre><code>COMMENT ON COLUMN table_name.column_name IS 'Comment value'</code></pre>

<p>
 For SQLite, this statement adds an inline SQL comment at the end of the line that defines the column. All other databases have a native system for storing comments.
</p>

<h4 id="FlourishSql-docs-DropTable">Drop Table</h4>
<pre><code>DROP TABLE table_name</code></pre>

<h4 id="FlourishSql-docs-CreateIndex">Create Index</h4>

<p>
The following syntax is supported for <code>CREATE INDEX</code> statements.
</p>
<pre><code>CREATE [ UNIQUE ] INDEX index_name ON table_name ( column_name [, ... ] ) </code></pre>

<h4 id="FlourishSql-docs-DropIndex">Drop Index</h4>
<pre><code>DROP INDEX index_name</code></pre>

<h4 id="FlourishSql-docs-ForeignKeySupport">Foreign Key Support</h4>

<p>
All of the databases supported by Flourish support foreign key constraints through some method. By using <code>translatedQuery()</code> to execute <code>CREATE TABLE</code> statements, you can be sure that foreign keys will be enforced.
</p>

<p>
PostgreSQL, MSSQL, Oracle and DB2 support foreign keys completely natively. MySQL supports them natively as long as the InnoDB engine type is specified in the <code>CREATE TABLE</code> statement. This is automatically added when using <code>translatedQuery()</code>.
</p>

<p>
SQLite supports the syntax, however enforcement before version 3.6.19 has to be done through triggers. <code>translatedQuery()</code> will create the necessary triggers to enforce foreign key constraints on an SQLite database.
</p>

<p>
Please note that Oracle does not support <code>ON UPDATE</code> clauses, and DB2 only supports the <code>NO ACTION</code> and <code>RESTRICT</code> actions for <code>ON UPDATE</code> clauses. Because of these limitations, it is best to avoid <code>ON UPDATE</code> clauses for cross-database applications.
</p>

<p>
In addition, Flourish is designed to support only single-column foreign keys. While most databases support multi-column foreign keys, Flourish's SQLite foreign key trigger generation only supports a single column. In addition, the <code>ALTER TABLE</code> through Flourish SQL is only designed and tested against single- column foreign keys.
</p>
		</section>
		
		<section class="main">
<h2 id="GettingStarted-docs">Getting Started</h2>
<div class="sidebar">
<h3>Contents</h3>

<ul>
<li><a href="#GettingStarted-docs-DownloadingFlourish">Downloading Flourish</a></li>
<li><a href="#GettingStarted-docs-SetUpanInitScript">Set Up an Init Script</a></li>
<li><a href="#GettingStarted-docs-CreateaConfigurationScript">Create a Configuration Script</a></li>
<li><a href="#GettingStarted-docs-StartUsingFlourish">Start Using Flourish</a></li>
<li><a href="#GettingStarted-docs-NextSteps">Next Steps</a></li>
</ul>
</div>

<p>
Since Flourish isnt a framework, getting started might seem a little daunting. Lets start with getting the Flourish code and setting up our pages to include it.
</p>

<h3 id="GettingStarted-docs-DownloadingFlourish">Downloading Flourish</h3>

<p>
As a first step, <a class="ext-link" href="http://flourishlib.com/download/"><span class="icon">download flourish</span></a> and extract it into a directory on your server. To help ensure that a server misconfiguration wont expose your PHP (possibly including database credentials), it is best to try and place your includes outside of the document root.
</p>
<pre><code>{doc_root}/../inc/flourish/</code></pre>

<h3 id="GettingStarted-docs-SetUpanInitScript">Set Up an Init Script</h3>

<p>
At the beginning of every page we arent going to want to include every class file or configuration file, so a logical first step is to create an initialization script to handle that. I prefer to create the script at:
</p>
<pre><code>{doc_root}/../inc/init.php</code></pre>

<p>
 Inside of init.php, put:
</p>
<pre class="block php"><code>&lt;?php
include($_SERVER['DOCUMENT_ROOT'] . '/../inc/config.php');</code></pre>

<h3 id="GettingStarted-docs-CreateaConfigurationScript">Create a Configuration Script</h3>

<p>
For better separation, I prefer to put all configuration code into a separate file from the initialization code. I put all of my configuration code in:
</p>
<pre><code>{doc_root}/../inc/config.php</code></pre>

<p>
 Inside of <code>config.php</code> we will put our auto-loading function:
</p>
<pre class="block php"><code>&lt;?php
/**
 * Automatically includes classes
 * 
 * @throws Exception
 * 
 * @param  string $class_name  Name of the class to load
 * @return void
 */
function __autoload($class_name)
{
	// Customize this to your root Flourish directory
	$flourish_root = $_SERVER['DOCUMENT_ROOT'] . '/../inc/flourish/';
	
	$file = $flourish_root . $class_name . '.php';

	if (file_exists($file)) {
		include $file;
		return;
	}
	
	throw new Exception('The class ' . $class_name . ' could not be loaded');
}</code></pre>

<p>
 <strong>Performance tip:</strong> If you are running Flourish on a server that has <a class="ext-link" href="http://pecl.php.net/package/APC"><span class="icon">APC</span></a>, <a class="ext-link" href="http://eaccelerator.net"><span class="icon">eAccelerator</span></a>, <a class="ext-link" href="http://turck-mmcache.sourceforge.net/index_old.html"><span class="icon">Turck MMCache</span></a> or <a class="ext-link" href="http://xcache.lighttpd.net"><span class="icon">XCache</span></a> check out the section about <a href="#PerformanceTips#ClassLoading-docs">class loading</a>.
</p>

<h3 id="GettingStarted-docs-StartUsingFlourish">Start Using Flourish</h3>

<p>
Now that we have our init script setup, we can start creating pages and using Flourish. Just add this snippet to the top of each of your pages:
</p>
<pre class="block php"><code>&lt;?php
include_once($_SERVER['DOCUMENT_ROOT'] . '/../inc/init.php');</code></pre>

<p>
 Alternatively if you run Apache and have access to the Apache conf file, you can use PHPs <a class="ext-link" href="http://php.net/ini.core#ini.auto-prepend-file"><span class="icon">auto_prepend_file</span></a> setting with the <a href="http://php.net/configuration.changes">Apache PHP settings
directives</a>.
</p>

<h3 id="GettingStarted-docs-NextSteps">Next Steps</h3>

<p>
If you havent read it already, the <a href="#HowDoI-docs">How Do I  ?</a> page is a good resource for exploring some of the functionality of Flourish. The <a class="ext-link" href="http://flourishlib.com/docs"><span class="icon">documentation</span></a> includes links to detailed information about each class, class APIs and general documentation.
</p>

<p>
The <strong><a class="ext-link" href="http://flourishlib.com/blog/FlourishDemoSite"><span class="icon">Flourish Demo Site</span></a></strong> is a good way to dive into some code to see how Flourish can be used.
</p>

<p>
For a simpler more guided introduction to Flourish, try checking out the following classes:
</p>

<ul>
<li>fTemplating: Provides a simple templating system to help reduce duplicated HTML</li>
<li>fRequest: Retrieves information submitted by the user, in a secure fashion</li>
<li>fDatabase: Standard SQL interaction with any MySQL, PostgreSQL, SQLite, MSSQL, Oracle or DB2 database</li>
</ul>

<p>
The documentation below includes some topics that most PHP developers should know or learn about:
</p>

<ul>
<li><a href="#Security-docs">PHP/web security</a></li>
<li><a href="#UTF-8-docs">UTF-8 in PHP</a></li>
<li><a href="#ObjectRelationalMapping-docs">ORM (Object-Relational Mapping)</a></li>
</ul>
		</section>
		
		<section class="main">
<h2 id="HowDoI-docs">How Do I?</h2>

<p>
This page is meant to be sort of a compass to new users of Flourish to help them figure out where to look for solutions to their problems.
</p>
<table><tbody>
<tr>
<td><strong>Task at Hand</strong></td>
<td><strong>Where to Look</strong></td>
</tr>
<tr>
<td>Handle exceptions and errors gracefully</td>
<td><a href="#fCore">fCore</a></td>
</tr>
<tr>
<td>Ensure content is properly encoded (HTML entities)</td>
<td><a href="#fHTML">fHTML</a></td>
</tr>
<tr>
<td>Handle UTF-8 content</td>
<td><a href="#fUTF8">fUTF8</a></td>
</tr>
<tr>
<td>Perform simple form validation (contact forms, etc)</td>
<td><a href="#fValidation">fValidation</a></td>
</tr>
<tr>
<td>Simple (non-ORM) interaction with a database</td>
<td><a href="#fDatabase">fDatabase</a>, <a href="#fResult">fResult</a>, <a href="#fUnbufferedResult">fUnbufferedResult</a></td>
</tr>
<tr>
<td>Retrieve the structure of the database I am connected to</td>
<td><a href="#fSchema">fSchema</a></td>
</tr>
<tr>
<td>Interact with the database simply by using <a href="#ObjectRelationalMapping-docs">object-relational mapping</a> (ORM)</td>
<td><a href="#fActiveRecord">fActiveRecord</a>, <a href="#fRecordSet">fRecordSet</a></td>
</tr>
<tr>
<td>Get and sanitize information from the users request, including <code>GET</code>, <code>POST</code>, <code>PUT</code> and <code>DELETE</code> data</td>
<td><a href="#fRequest">fRequest</a></td>
</tr>
<tr>
<td>Pass transient messages around without polluting URLs</td>
<td><a href="#fMessaging">fMessaging</a></td>
</tr>
<tr>
<td>Store and retrieve session information</td>
<td><a href="#fSession">fSession</a></td>
</tr>
<tr>
<td>Handle user permissions and access control</td>
<td><a href="#fAuthorization">fAuthorization</a></td>
</tr>
<tr>
<td>Ensure that data is stored securely (passwords, confidential information, etc)</td>
<td><a href="#fCryptography">fCryptography</a></td>
</tr>
<tr>
<td>Handle dates and times, including timezones</td>
<td><a href="#fDate">fDate</a>, <a href="#fTime">fTime</a>, <a href="#fTimestamp">fTimestamp</a></td>
</tr>
<tr>
<td>Manipulate images</td>
<td><a href="#fImage">fImage</a></td>
</tr>
<tr>
<td>Manipulate and query files and directories</td>
<td><a href="#fFile">fFile</a>, <a href="#fDirectory">fDirectory</a></td>
</tr>
<tr>
<td>Handle file uploads</td>
<td><a href="#fUpload">fUpload</a></td>
</tr>
<tr>
<td>Use templating to reduce code duplication and keep logic and presentation separate</td>
<td><a href="#fTemplating">fTemplating</a></td>
</tr>
<tr>
<td>Conditionally build English language constructs and convert between syntax notations</td>
<td><a href="#fGrammar">fGrammar</a></td>
</tr>
<tr>
<td>Handle translation or modification of messages</td>
<td><a href="#fText">fText</a></td>
</tr>
<tr>
<td>Send emails and validate email addresses</td>
<td><a href="#fEmail">fEmail</a></td>
</tr>
<tr>
<td>Encode and decode JSON data</td>
<td><a href="#fJSON">fJSON</a></td>
</tr>
<tr>
<td>Deal with precise numbers and calculations</td>
<td><a href="#fNumber">fNumber</a></td>
</tr>
<tr>
<td>Represent, manipulate and translate monetary values</td>
<td><a href="#fMoney">fMoney</a></td>
</tr>
<tr>
<td>Handle sticky search values and sortable columns for list pages</td>
<td><a href="#fCRUD">fCRUD</a></td>
</tr>
<tr>
<td>Get and set cookies, including HTTPOnly cookies and default values</td>
<td><a href="#fCookie">fCookie</a></td>
</tr>
<tr>
<td>Encode content for XML files</td>
<td><a href="#fXML">fXML</a></td>
</tr>
</tbody></table>

<h3 id="HowDoI-docs-TopicPages">Topic Pages</h3>

<p>
The following pages include some more in-depth information about topics, including links to the relevant Flourish classes.
</p>

<ul>
<li><a href="#ObjectRelationalMapping-docs">ORM (Object-Relational Mapping)</a></li>
<li><a href="#Security-docs">PHP/web security</a></li>
<li><a href="#UTF-8-docs">UTF-8 in PHP</a></li>
</ul>
		</section>
		
		<section class="main">
<h2 id="InternalBackwardsCompatibilityBreak-docs">Internal Backwards Compatibility Breaks</h2>

<p>
<em>See also non-internal <a href="#BackwardsCompatibilityBreak-docs">backwards compatibility breaks</a></em>
</p>

<p>
Public methods flagged with the PHPDoc tag <code>@internal</code> and all protected methods and attributes are considered internal to Flourish and are subject to change even in minor revisions or during the beta. Below is a list of changes that affect internal code.
</p>

<p>
Normally this list will only be applicable if you write ORM plugins or mess around with the ORM internals.
</p>

<h3 id="InternalBackwardsCompatibilityBreak-docs-Revision881"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/89cc8eeb"><span class="icon">Revision 881</span></a></h3>

<p>
Changed <a href="#fORM-api-parseMethod">fORM::parseMethod()</a> to not underscorize the subject of the method.
</p>

<h3 id="InternalBackwardsCompatibilityBreak-docs-Revision867"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/6d3c4b62"><span class="icon">Revision 867</span></a></h3>

<p>
Changed the structure of the array returned from <a href="#fSQLTranslation-api-translate">fSQLTranslation::translate()</a> to include a number plus <code>:</code> before the original SQL in the array keys.
</p>

<h3 id="InternalBackwardsCompatibilityBreak-docs-Revision720"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/30b77654"><span class="icon">Revision 720</span></a></h3>

<p>
Removed:
</p>

<ul>
<li><code>fORMDatabase::addTableToKeys()</code></li>
<li><code>fORMDatabase::addTableToValues()</code></li>
<li><code>fORMDatabase::escapeBySchema()</code></li>
<li><code>fORMDatabase::escapeByType()</code></li>
</ul>

<p>
Rewrote:
</p>

<ul>
<li><code>fORMDatabase::createHavingClause()</code> to <a href="#fORMDatabase-api-addHavingClause">fORMDatabase::addHavingClause()</a></li>
<li><code>fORMDatabase::createOrderByClause()</code> to <a href="#fORMDatabase-api-addOrderByClause">fORMDatabase::addOrderByClause()</a></li>
<li><code>fORMDatabase::insertFromAndGroupByClauses()</code> to <a href="#fORMDatabase-api-injectFromAndGroupByClauses">fORMDatabase::injectFromAndGroupByClauses()</a></li>
</ul>

<p>
Added the <code>$schema</code> parameter to the beginning of:
</p>

<ul>
<li><a href="#fORMSchema-api-getRoute">fORMSchema::getRoute()</a></li>
<li><a href="#fORMSchema-api-getRouteName">fORMSchema::getRouteName()</a></li>
<li><a href="#fORMSchema-api-getRoutes">fORMSchema::getRoutes()</a></li>
<li><a href="#fORMSchema-api-isOneToOne">fORMSchema::isOneToOne()</a></li>
</ul>

<p>
Added the <code>$class</code> parameter to the beginning of <a href="#fORMRelated-api-storeManyToMany">fORMRelated::storeManyToMany()</a> 
</p>

<h3 id="InternalBackwardsCompatibilityBreak-docs-Revision659"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/fbe71f0b"><span class="icon">Revision 659</span></a></h3>

<p>
<a href="#fORMRelated-api-createRecord">fORMRelated::createRecord()</a> now has an extra parameter in the middle, <code>$related_records</code>. <code>fORMRelated::storeOneToMany()</code> was renamed to <a href="#fORMRelated-api-storeOneToStar">fORMRelated::storeOneToStar()</a>.
</p>

<h3 id="InternalBackwardsCompatibilityBreak-docs-Revision639"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/b68ba1c1"><span class="icon">Revision 639</span></a></h3>

<p>
Changed <a href="#fActiveRecord-api-hash">fActiveRecord::hash()</a> from a protected method to a static public/internal method that requires the class name for non-<a href="#fActiveRecord">fActiveRecord</a> values
</p>

<h3 id="InternalBackwardsCompatibilityBreak-docs-Revision616"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/3bca645f"><span class="icon">Revision 616</span></a></h3>

<p>
The method signatures for <a href="#fORMRelated-api-validate">fORMRelated::validate()</a> and <a href="#fORMValidation-api-validateRelated">fORMValidation::validateRelated()</a> changed
</p>

<h3 id="InternalBackwardsCompatibilityBreak-docs-Revision603"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/35163816"><span class="icon">Revision 603</span></a></h3>

<p>
The following methods no longer accept an object instance, just a class name:
</p>

<ul>
<li><a href="#fORM-api-checkHookCallback">fORM::checkHookCallback()</a></li>
<li><a href="#fORM-api-getActiveRecordMethod">fORM::getActiveRecordMethod()</a></li>
<li><a href="#fORM-api-getColumnName">fORM::getColumnName()</a></li>
<li><a href="#fORM-api-getRecordName">fORM::getRecordName()</a></li>
<li><a href="#fORM-api-replicate">fORM::replicate()</a></li>
<li><a href="#fORM-api-tablize">fORM::tablize()</a></li>
</ul>

<ul>
<li><a href="#fORMRelated-api-associateRecords">fORMRelated::associateRecords()</a></li>
<li><a href="#fORMRelated-api-buildRecords">fORMRelated::buildRecords()</a></li>
<li><a href="#fORMRelated-api-countRecords">fORMRelated::countRecords()</a></li>
<li><a href="#fORMRelated-api-createRecord">fORMRelated::createRecord()</a></li>
<li><a href="#fORMRelated-api-determineRequestFilter">fORMRelated::determineRequestFilter()</a></li>
<li><a href="#fORMRelated-api-flagForAssociation">fORMRelated::flagForAssociation()</a></li>
<li><a href="#fORMRelated-api-getOrderBys">fORMRelated::getOrderBys()</a></li>
<li><a href="#fORMRelated-api-getPrimaryKeys">fORMRelated::getPrimaryKeys()</a></li>
<li><a href="#fORMRelated-api-getRelatedRecordName">fORMRelated::getRelatedRecordName()</a></li>
<li><a href="#fORMRelated-api-linkRecords">fORMRelated::linkRecords()</a></li>
<li><a href="#fORMRelated-api-overrideRelatedRecordName">fORMRelated::overrideRelatedRecordName()</a></li>
<li><a href="#fORMRelated-api-populateRecords">fORMRelated::populateRecords()</a></li>
<li><a href="#fORMRelated-api-reflect">fORMRelated::reflect()</a></li>
<li><a href="#fORMRelated-api-setCount">fORMRelated::setCount()</a></li>
<li><a href="#fORMRelated-api-setPrimaryKeys">fORMRelated::setPrimaryKeys()</a></li>
<li><a href="#fORMRelated-api-setRecordSet">fORMRelated::setRecordSet()</a></li>
<li><a href="#fORMRelated-api-store">fORMRelated::store()</a></li>
<li><a href="#fORMRelated-api-validate">fORMRelated::validate()</a></li>
</ul>

<ul>
<li><a href="#fORMValidation-api-reorderMessages">fORMValidation::reorderMessages()</a></li>
<li><a href="#fORMValidation-api-validateRelated">fORMValidation::validateRelated()</a></li>
</ul>

<h3 id="InternalBackwardsCompatibilityBreak-docs-Revision593"><a class="ext-link" href="https://github.com/flourishlib/flourish-classes/commit/daf1327e"><span class="icon">Revision 593</span></a></h3>

<p>
Renamed <code>fORMRelated::setRecords()</code> to <a href="#fORMRelated-api-setRecordSet">fORMRelated::setRecordSet()</a> and <code>fORMRelated::tallyRecords()</code> to <a href="#fORMRelated-api-setCount">fORMRelated::setCount()</a> 
</p>
		</section>
		
		<section class="main">
<h2 id="InternationalizationLocalization-docs">Internationalization and Localization</h2>

<p>
When creating code for audiences in more than one language, it is necessary to write it with <a class="ext-link" href="http://en.wikipedia.org/wiki/Internationalization_and_localization"><span class="icon">internationalization (i18n) and localization (L10n)</span></a> in mind.
</p>

<p>
A <a class="ext-link" href="http://en.wikipedia.org/wiki/Locale"><span class="icon">locale</span></a> is a combination of a language and standards for formatting of numbers, date, currencies and more. Normally an locale is identified by a combination of a country and language code. Different languages require different sort ordering (or <a class="ext-link" href="http://en.wikipedia.org/wiki/Collation"><span class="icon">collation</span></a>) for words and numbers often have different thousands and decimal separators. Other differences include date formatting and the words used for days and months.
</p>

<p>
Internationalization is the act of writing code than can be customized to work in multiple locales. Localization is the act of customizing code to work in a specific locale. Flourish is written with internationalization in mind, however there is no localization done, that is left for the teams working on individual projects.
</p>

<h3 id="InternationalizationLocalization-docs-InternationalizedClasses">Internationalized Classes</h3>

<p>
The following classes in Flourish are in some way internationalized, thus capable of being localized.  
</p>

<ul>
<li><a href="#fGrammar">fGrammar</a></li>
<li><a href="#fMoney">fMoney</a></li>
<li><a href="#fNumber">fNumber</a></li>
<li><a href="#fText">fText</a></li>
<li><a href="#fTimestamp">fTimestamp</a></li>
</ul>

<p>
Please note that every class in Flourish that creates messages hooks into <a href="#fText">fText</a> (once loaded) and thus all messages can be translated through the features available in <a href="#fText">fText</a>. The <a href="#MessagesList-docs">message list page</a> includes a list of every message created by a Flourish class, along with the location in the source code.
</p>
		</section>
		
		<section class="main">
<h2 id="LicenseAgreement-docs">License</h2>
<div class="sidebar">
<h3>Contents</h3>

<ul>
<li><a href="#LicenseAgreement-docs-SourceCodeLicense">Source Code License</a></li>
<li><a href="#LicenseAgreement-docs-DocumentationLicense">Documentation License</a></li>
</ul>
</div>

<p>
The source code and documentation for Flourish are licensed under two separate licenses due to their nature of being two vastly different things.
</p>

<p>
The Flourish logo and <a class="ext-link" href="http://flourishlib.com"><span class="icon">http://flourishlib.com</span></a> site design are (c) 2007-2012 Will Bond and are <strong>not</strong> licensed under either of these licenses.
</p>

<h3 id="LicenseAgreement-docs-SourceCodeLicense">Source Code License</h3>
<div>
<p>
Info about the MIT License:
</p>

<ul>
<li><a class="ext-link" href="http://en.wikipedia.org/wiki/MIT_License"><span class="icon">Wikipedia</span></a></li>
<li><a class="ext-link" href="http://www.fsf.org/licensing/licenses/index_html#Expat"><span class="icon">FSF.org</span></a></li>
<li><a class="ext-link" href="http://www.ibm.com/developerworks/opensource/library/os-license2/"><span class="icon">IBM.com</span></a></li>
<li><a class="ext-link" href="http://www.opensource.org/licenses/mit-license.php"><span class="icon">OpenSource.org</span></a></li>
</ul>
</div>

<p>
<em>Copyright (c) 2007-2010 Will Bond &lt;<a class="ext-link" href="mailto:will@flourishlib.com"><span class="icon">will@flourishlib.com</span></a>&gt;</em>
</p>

<p>
<em>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the &quot;Software&quot;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</em>
</p>

<p>
<em>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</em>
</p>

<p>
<em>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</em>
</p>

<h3 id="LicenseAgreement-docs-DocumentationLicense">Documentation License</h3>
<div>
<p>
The license for Flourish documentation is based on the FreeBSD Documentation License with modifications to address the format in which the Flourish documentation is presented.
</p>

<p>
Info about the FreeBSD Documentation License:
</p>

<ul>
<li><a class="ext-link" href="http://www.freebsd.org/copyright/freebsd-doc-license.html"><span class="icon">FreeBSD.org</span></a></li>
<li><a class="ext-link" href="http://en.wikipedia.org/wiki/FreeBSD_Documentation_License"><span class="icon">Wikipedia</span></a></li>
<li><a class="ext-link" href="http://www.fsf.org/licensing/licenses/#DocumentationLicenses"><span class="icon">FSF.org</span></a></li>
</ul>
</div>

<p>
<em>Copyright (c) 2007-2010 Will Bond &lt;<a class="ext-link" href="mailto:will@flourishlib.com"><span class="icon">will@flourishlib.com</span></a>&gt;. All rights reserved.</em>
</p>

<p>
<em>Redistribution and use in any form (html, pdf, etc) with or without modification, are permitted provided that the following condition is met:</em>
</p>

<p>
<em>Redistributions must reproduce the above copyright notice, this condition and the following disclaimer in the documentation and/or other materials provided with the distribution.</em>
</p>

<p>
<em>THIS DOCUMENTATION IS PROVIDED BY WILLIAM BOND &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL WILLIAM BOND BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS DOCUMENTATION, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</em>
</p>
		</section>
		
		<section class="main">
<h2 id="MessagesList-docs">Messages List</h2>
<div class="sidebar">
<h3>Contents</h3>

<ul>
<li><a href="#MessagesList-docs-DownloadableTemplate">Downloadable Template</a></li>
<li><a href="#MessagesList-docs-Translations">Translations</a></li>
<li><a href="#MessagesList-docs-LinkedReference">Linked Reference</a></li>
</ul>
</div>

<p>
This page contains resources for use when translating the messages used internally by Flourish.
</p>

<h3 id="MessagesList-docs-DownloadableTemplate">Downloadable Template</h3>

<p>
A ready-made PHP array is available that includes every string as an array key and blank string values to use for the translations. This array can then be used with <a href="#fText">fText</a> to perform translation of internal Flourish messaging. See the <a href="#fText">fText documentation</a> for an example.
</p>
<form action="http://docs.flourishlib.com/messages/" method="get" id="MessagesList-docs-download_template">
<p>
<label><strong>Revision</strong></label> <input type="text" name="revision" value="%download_rev%" size="3" /> <input type="submit" value="Download Template" />
</p>
</form>
<script type="text/javascript">
/*<![CDATA[*/
$(function() {
    $('form#download_template').submit(function() {
        var rev = parseInt($('input[name="revision"]').val());
        if (rev == NaN) {
            alert('Please enter a revision number');
            return false;
        }
        if (rev < 850) {
            alert('Please enter a revision greater than 850');
            return false;
        }
        if (rev > %download_rev%) {
            alert('Please enter a revision %download_rev% or less');
            return false;
        }
    });
});
/*]]>*/
</script>
<p>
 <em>If you fill one of these out for a language, please send a copy to <a class="ext-link" href="mailto:will@wbond.net"><span class="icon">will@wbond.net</span></a> so I may post it on the site for others to use also.</em>
</p>

<h3 id="MessagesList-docs-Translations">Translations</h3>

<p>
The following translations have been generously created by the community. <em>It is possible that the messages may be slightly out-of-date due to changes in Flourish since the revision listed.</em>
</p>

<ul>
<li><a href="http://docs.flourishlib.com/translations/en_to_it_855.phps">English to
   Italian</a> for r855 by <a class="ext-link" href="http://gruppoambita.com"><span class="icon">Gruppo Ambita</span></a></li>
</ul>

<h3 id="MessagesList-docs-LinkedReference">Linked Reference</h3>

<p>
The following table contains a list of every message used in the current revision of Flourish, and their locations in the source code.
</p>

<p>
<a class="ext-link" href="[Include(http://docs.flourishlib.com/messages.php)"><span class="icon">[Include(http://docs.flourishlib.com/messages.php)</span></a>
</p>
		</section>
		
		<section class="main">
<h2 id="MethodNaming-docs">Method Naming</h2>

<p>
Flourish uses some standards in method names to help developers easily identify functionality without having to review the documentation. Below is a list of verbs and their connotations in Flourish code:
</p>

<ul>
<li><strong>add:</strong> assigns a value that allows multiple</li>
<li><strong>check:</strong> returns a boolean</li>
<li><strong>enable:</strong> turn a feature on (or possibly off)</li>
<li><strong>encode:</strong> returns a value that is safe for output into the appropriate format</li>
<li><strong>extend:</strong> add functionality to a class</li>
<li><strong>get:</strong> returns a value</li>
<li><strong>is:</strong> returns a boolean</li>
<li><strong>prepare:</strong> returns a value that is safe for output into HTML, should only be used with trusted content</li>
<li><strong>print:</strong> echoes content</li>
<li><strong>register:</strong> adds or sets a callback for a hook</li>
<li><strong>set:</strong> assigns a value</li>
<li><strong>show:</strong> conditionally echoes content</li>
<li><strong>validate:</strong> throws an exception if something is not correct</li>
</ul>

<p>
The Flourish ORM also has a few conventions for method names:
</p>

<ul>
<li><strong>build:</strong> returns an <a href="#fRecordSet">fRecordSet</a></li>
<li><strong>configure:</strong> adds functionality to a specific class or column</li>
<li><strong>count:</strong> returns the number of records in an <a href="#fRecordSet">fRecordSet</a></li>
<li><strong>create:</strong> returns a single <a href="#fActiveRecord">fActiveRecord</a></li>
<li><strong>populate:</strong> uses values from the HTTP request to set values in one or more objects</li>
</ul>
		</section>
		
		<section class="main">
<h2 id="ObjectRelationalMapping-docs">ORM (Object-Relational Mapping)</h2>
<div class="sidebar">
<h3>Contents</h3>

<ul>
<li><a href="#ObjectRelationalMapping-docs-ORMClassesinFlourish">ORM Classes in Flourish</a></li>
<li><a href="#ObjectRelationalMapping-docs-WhyAnotherORM">Why Another ORM?</a></li>
</ul>
</div>

<p>
When dealing with database-driven web applications (and sites) often times interacting with the DB is one of the most repetitive and messy tasks. Having to manually build <code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code>, and <code>DELETE</code> queries for a multitude of tables is time consuming and mostly deterministic.
</p>

<p>
<a href="http://en.wikipedia.org/wiki/Object-relational_mapping">Object-Relational
Mapping</a> (ORM) helps to reduce the tedium, creates cleaner code, make relationships easy to access. Rows from a relational database management system (RDBMS) such as MySQL, PostgreSQL, SQL Server, Oracle, DB2, etc. are translated into objects in the programming language.
</p>

<h3 id="ObjectRelationalMapping-docs-ORMClassesinFlourish">ORM Classes in Flourish</h3>

<p>
The ORM features of Flourish are primarily accomplished by the following two classes:
</p>

<ul>
<li><strong><a href="#fActiveRecord">fActiveRecord</a></strong> - Handles creation and manipulation of single database records</li>
<li><strong><a href="#fRecordSet">fRecordSet</a></strong> - Handles finding and manipulation sets of records</li>
</ul>

<p>
There are a number of other classes in Flourish that provide functionality to <a href="#fActiveRecord">fActiveRecord</a> and fRecordSet:
</p>

<ul>
<li><strong><a href="#fORM">fORM</a></strong> - Allow for overriding defaults and extending classes</li>
<li><strong><a href="#fORMColumn">fORMColumn</a></strong> - Provides miscellaneous functionality for columns</li>
<li><strong><a href="#fORMDatabase">fORMDatabase</a></strong> - Holds the <a href="#fDatabase">fDatabase</a> class to use for all ORM tasks</li>
<li><strong><a href="#fORMDate">fORMDate</a></strong> - Provides configurable date functionality</li>
<li><strong><a href="#fORMFile">fORMFile</a></strong> - Provides configurable file upload functionality</li>
<li><strong><a href="#fORMJSON">fORMJSON</a></strong> - Extends <a href="#fActiveRecord">fActiveRecord</a> and <a href="#fRecordSet">fRecordSet</a> with methods to convert to JSON</li>
<li><strong><a href="#fORMMoney">fORMMoney</a></strong> - Provides configurable money functionality</li>
<li><strong><a href="#fORMOrdering">fORMOrdering</a></strong> - Provides configuration record ordering functionality</li>
<li><strong><a href="#fORMRelated">fORMRelated</a></strong> - Powers the built in support for retrieving related records from <a href="#fActiveRecord">fActiveRecord</a></li>
<li><strong><a href="#fORMSchema">fORMSchema</a></strong> - Holds the <a href="#fSchema">fSchema</a> class to use for all ORM tasks</li>
<li><strong><a href="#fORMValidation">fORMValidation</a></strong> - Powers the built in validation routines and allows for configuration validation functionality</li>
</ul>

<h3 id="ObjectRelationalMapping-docs-WhyAnotherORM">Why Another ORM?</h3>

<p>
Many of the big PHP frameworks (<a class="ext-link" href="http://cakephp.org"><span class="icon">CakePHP</span></a>, <a class="ext-link" href="http://codeigniter.com"><span class="icon">Code Igniter</span></a>,  <a class="ext-link" href="http://www.symfony-project.org"><span class="icon">Symfony</span></a>, <a class="ext-link" href="http://framework.zend.com"><span class="icon">Zend Framework</span></a>) perform ORM to some degree. There are also a few PHP ORM suites (<a class="ext-link" href="http://propel.phpdb.org"><span class="icon">Propel</span></a> and <a class="ext-link" href="http://www.phpdoctrine.org"><span class="icon">Doctrine</span></a>) focused on strictly ORM tasks.
</p>

<p>
You may be wondering, why build another PHP &quot;framework&quot; with ORM functionality? Flourish is intended to be more of a library of PHP code as opposed to a framework (defined as strict set of conventions, rules and methods that must be followed to build a site). In addition Flourish sits somewhere between the frameworks and ORM suites by providing some of the more advanced ORM features that most of the frameworks are missing, while being lighter weight and easier to use than the ORM suites.
</p>

<p>
You may also be interested in checking out some of the <a class="ext-link" href="http://flourishlib.com/docs/MotivationsForFlourish"><span class="icon">motivations for creating Flourish</span></a> instead of using an existing solution.
</p>
		</section>
		
		<section class="main">
<h2 id="ObtainingaSecureCertificateKeyPair-docs">Obtaining a Secure Certificate/Key Pair</h2>
<div class="sidebar">
<h3>Contents</h3>

<ul>
<li><a href="#ObtainingaSecureCertificateKeyPair-docs-GeneratingaCertificatewithOpenSSL">Generating a Certificate with OpenSSL</a></li>
<li><a href="#ObtainingaSecureCertificateKeyPair-docs-12">Creating a PKCS! File from a Private Key and Public Certificate</a></li>
<li><a href="#ObtainingaSecureCertificateKeyPair-docs-12">Creating a Private Key and Public Certificate from a PKCS! File</a></li>
</ul>
</div>

<p>
When dealing with <a href="http://en.wikipedia.org/wiki/Public-key_cryptography">public-
key encryption</a> using the <a href="#fCryptography">fCryptography</a> class or sending secure emails via the <a href="#fEmail">fEmail</a> class, you will need an <a href="http://en.wikipedia.org/wiki/X509">x509
public-key certificate</a> and a PEM-encoded private key.
</p>

<p>
Certificate authorities offer certificates that will validate your identity by the public, however, self-generated keys can be used for any purposes where identity verification is not important, just encryption.
</p>

<p>
<a class="ext-link" href="http://www.instantssl.com/ssl-certificate-products/free-email-certificate.html"><span class="icon">InstantSSL</span></a> and <a class="ext-link" href="https://www.startssl.com/"><span class="icon">StartSSL</span></a> offer certificates for free, while <a class="ext-link" href="http://www.verisign.com/products-services/security-services/pki/pki-application/email-digital-id/index.html"><span class="icon">VeriSign</span></a> and many others offer them for a fee. Most of these services tend to install the certificate in your browser, and thus only work with some browsers. As of January 2010, Google Chrome seems to be the only major browser not providing this functionality. Also, since the private key/certificate is installed in your browser, you'll need to figure out how to use your browser to export the <code>.p12</code> file.
</p>

<p>
<em>Self-signed certificates are not recommended for a secure connection (https://) on a public web server since browsers will not recognize you as an authorized certificate authority (CA) and warning messages will be displayed.</em>
</p>

<h3 id="ObtainingaSecureCertificateKeyPair-docs-GeneratingaCertificatewithOpenSSL">Generating a Certificate with OpenSSL</h3>

<p>
There are various methods to generate a self-signed SSL certificate, however one of the simplest to explain in using the <a class="ext-link" href="http://www.openssl.org"><span class="icon">OpenSSL</span></a> executable. Most Linux/BSD distributions and OSX all have it installed by default while Windows users can <a class="ext-link" href="http://www.slproweb.com/products/Win32OpenSSL.html"><span class="icon">download an installer</span></a> or use it through <a class="ext-link" href="http://cygwin.com"><span class="icon">Cygwin</span></a>. If you run the Windows installer, be sure to open a command prompt and <code>cd</code> to the <code>{install_dir}\bin</code> before executing these commands. 
</p>

<p>
First, lets generate the private key file (it will be output in PEM format) by executing the following command:
</p>
<pre><code>openssl genrsa -des3 -out private.key 1024</code></pre>

<p>
 The output will look something like the text below and will prompt for a passphrase (and a repeat). This is essential for restricting access to the key if it is stored on the same server as the encrypted data.
</p>
<pre><code>Generating RSA private key, 1024 bit long modulus
.....................................++++++
........................++++++
e is 65537 (0x10001)
Enter pass phrase for private.key:
Verifying - Enter pass phrase for private.key:</code></pre>

<p>
 Next we need to create a certificate signing request (CSR) which is used to generate the certificate:
</p>
<pre><code>openssl req -new -x509 -key private.key -out public.crt</code></pre>

<p>
 You will be asked a series of questions used for identifying the owner of the certificate (in this case, you). Below is an example with my answers in bold:
</p>
<pre class="wiki output">Enter pass phrase for private.key:
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [AU]:<strong>US</strong>
State or Province Name (full name) [Some-State]:<strong>Massachusetts</strong>
Locality Name (eg, city) []:<strong>Newburyport</strong>
Organization Name (eg, company) [Internet Widgits Pty Ltd]:<strong>Flourish</strong>
Organizational Unit Name (eg, section) []:<strong>Web Development</strong>
Common Name (eg, YOUR name) []:<strong>William Bond</strong>
Email Address []:<strong>will@flourishlib.com</strong></pre>
<p>
 When performing public-key encryption with the <a href="#fCryptography">fCryptography</a> you will need the <code>public.crt</code> and <code>private.key</code> files.
</p>

<h3 id="ObtainingaSecureCertificateKeyPair-docs-12">Creating a PKCS! File from a Private Key and Public Certificate</h3>

<p>
If you are going to use the certificate you generated with the <a href="#fEmail">fEmail</a> class you will need <code>public.crt</code> for the web server and a <a class="ext-link" href="http://en.wikipedia.org/wiki/PKCS12"><span class="icon">PKCS#12</span></a> formatted file for your email program. You can generate the PKCS!#12 file by executing the following:
</p>
<pre><code>openssl pkcs12 -export -inkey private.key -in public.crt -out private_public.p12 -name &quot;Flourish Certificate&quot;</code></pre>

<p>
 Notice that the PKCS!#12 file contains both the public and the private keys. You will asked for a password for the PKCS!#12 file, which you will also have to provide to the email program you use it with:
</p>
<pre><code>Enter pass phrase for private.key:
Enter Export Password:
Verifying - Enter Export Password:</code></pre>

<h3 id="ObtainingaSecureCertificateKeyPair-docs-12">Creating a Private Key and Public Certificate from a PKCS! File</h3>

<p>
Depending on where you obtain a secure certificate from, you may only receive a .p12 file since it contains both the private key and public certificate. If you are going to use this certificate with <a href="#fCryptography">fCryptography</a> or <a href="#fEmail">fEmail</a> you are going to need the private key and public certificate separated into individual files in specific formats.
</p>

<p>
The following command will export a <code>public.crt</code> file from an PKCS!#12 named <code>private_public.p12</code>:
</p>
<pre><code>openssl pkcs12 -in private_public.p12 -clcerts -nokeys | openssl x509 -out public.crt</code></pre>

<p>
 Youll be asked for the .p12 files password:
</p>
<pre><code>Enter Import Password:
MAC verified OK</code></pre>

<p>
 Next, well export a <code>private.key</code> file from the same .p12 file:
</p>
<pre><code>openssl pkcs12 -in private_public.p12 -nocerts -nodes | openssl rsa -des3 -out private.key</code></pre>

<p>
 First you will be prompted for the .p12 password, after which you will be prompted for the private key password (with repeat).
</p>
<pre><code>Enter Import Password:
MAC verified OK
writing RSA key
Enter PEM pass phrase:
Verifying - Enter PEM pass phrase:</code></pre>

<p>
 You will now have <code>public.crt</code> and <code>private.key</code> files for use with <a href="#fCryptography">fCryptography</a> and <a href="#fEmail">fEmail</a>.
</p>
		</section>
		
		<section class="main">
<h2 id="OrmConventions-docs">ORM Conventions</h2>
<div class="sidebar">
<h3>Contents</h3>

<ul>
<li><a href="#OrmConventions-docs-PrimaryKeys">Primary Keys</a></li>
<li><a href="#OrmConventions-docs-DatabaseTableColumnNotation">Database Table &amp; Column Notation</a></li>
<li><a href="#OrmConventions-docs-MethodNotation">Method Notation</a></li>
<li><a href="#OrmConventions-docs-HTMLFormNotation">HTML Form Notation</a></li>
<li><a href="#OrmConventions-docs-TableNames">Table Names</a></li>
<li><a href="#OrmConventions-docs-JoiningTables">Joining Tables</a></li>
<li><a href="#OrmConventions-docs-RelationshipRoutes">Relationship Routes</a></li>
<li><a href="#OrmConventions-docs-SchemasOracleDB2Users">Schemas (Oracle/DB2 Users)</a></li>
<li><a href="#OrmConventions-docs-MultipleDatabases">Multiple Databases</a></li>
<li><a href="#OrmConventions-docs-MySQLStorageEngine">MySQL Storage Engine</a></li>
<li><a href="#OrmConventions-docs-SQLiteForeignKeyConstraints">SQLite Foreign Key Constraints</a></li>
</ul>
</div>

<p>
The Flourish ORM uses a few different conventions to prevent needless configuration and to reduce typing. Most of the conventions have to do with the database schema and various notations.
</p>

<h3 id="OrmConventions-docs-PrimaryKeys">Primary Keys</h3>

<p>
The whole ORM is built in such a way that all tables you are using with it should have primary keys. Without primary keys, things may start acting weird or breaking. If you don't have primary keys for your tables, consider adding them, they're generally considered a best practice.
</p>

<h3 id="OrmConventions-docs-DatabaseTableColumnNotation">Database Table &amp; Column Notation</h3>

<p>
The Flourish ORM assumes that all database table and column names are written in <code>underscore_notation</code>. Below is an example of a correctly implemented database table:
</p>
<pre class="block sql"><code>CREATE TABLE users (
    first_name VARCHAR(255) NOT NULL,
    last_name VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    password VARCHAR(100) NOT NULL
);</code></pre>

<p>
 <strong>This database table would not be properly detected:</strong>
</p>
<pre class="block sql"><code>CREATE TABLE Users (
    FirstName VARCHAR(255) NOT NULL,
    LastName VARCHAR(255) NOT NULL,
    Email VARCHAR(255) NOT NULL UNIQUE,
    Password VARCHAR(100) NOT NULL
);</code></pre>

<p>
 With correct <code>underscore_notation</code>, numbers should be separated from words by an underscore, such as <code>address_2</code>. If a number is not separated by an underscore, or you are having other notation conversion issues, you man need to <a href="#fGrammar-docs-FixingNotationConversionIssues">customize the notation
conversion</a> using <a href="#fGrammar">fGrammar</a>.
</p>

<h3 id="OrmConventions-docs-MethodNotation">Method Notation</h3>

<p>
Methods for <a href="#fActiveRecord">fActiveRecord</a> objects use <code>lowerCamelCase</code>, like the rest of the methods in Flourish. When dealing with database columns, every method will be in the form <code>verbColumnName()</code>. Below are some example of working with the <code>users</code> table defined in <a href="#OrmConventions-docs-SchemaNotation">Schema Notation</a>:
</p>
<pre class="block php"><code>$user-&gt;getFirstName();
$user-&gt;setLastName($last_name);</code></pre>

<h3 id="OrmConventions-docs-HTMLFormNotation">HTML Form Notation</h3>

<p>
HTML forms use <code>underscore_notation</code> just as the database schema should. The method <a href="#fActiveRecord-api-populate">fActiveRecord::populate()</a> will looks for input names in <code>underscore_notation</code> when populating an object. Below is an example of a valid HTML form that will work with the <code>users</code> table defined in <a href="#OrmConventions-docs-SchemaNotation">Schema Notation</a>:
</p>
<pre class="block html"><code>&lt;form action=&quot;&quot; method=&quot;post&quot; charset=&quot;utf-8&quot;&gt;
    &lt;p&gt;
        &lt;label for=&quot;users-first_name&quot;&gt;First Name:&lt;/label&gt;
        &lt;input id=&quot;users-first_name&quot; type=&quot;text&quot; name=&quot;first_name&quot; /&gt;
    &lt;/p&gt;
    &lt;p&gt;
        &lt;label for=&quot;users-last_name&quot;&gt;Last Name:&lt;/label&gt;
        &lt;input id=&quot;users-last_name&quot; type=&quot;text&quot; name=&quot;last_name&quot; /&gt;
    &lt;/p&gt;
    &lt;p&gt;
        &lt;label for=&quot;users-email&quot;&gt;Email:&lt;/label&gt;
        &lt;input id=&quot;users-email&quot; type=&quot;text&quot; name=&quot;email&quot; /&gt;
    &lt;/p&gt;
    &lt;p&gt;
        &lt;label for=&quot;users-password&quot;&gt;Password:&lt;/label&gt;
        &lt;input id=&quot;users-password&quot; type=&quot;password&quot; name=&quot;password&quot; /&gt;
    &lt;/p&gt;
&lt;/form&gt;</code></pre>

<h3 id="OrmConventions-docs-TableNames">Table Names</h3>

<p>
Database table names should always be <em>plural</em> nouns. A proper database table name would be <code>users</code>, not <code>user</code>.
</p>

<p>
For existing databases, it is possible to configure a class to model a non- plural table name, or a name that is different than the class. The static method <a href="#fORM-api-mapClassToTable">fORM::mapClassToTable()</a> accepts a <code>$class</code> and <code>$table</code> and will override the default mapping. The <a href="#fActiveRecord">fActiveRecord</a> page includes an <a href="#fActiveRecord-docs-CustomClasstoTableMapping">example of custom mapping</a>.
</p>

<h3 id="OrmConventions-docs-JoiningTables">Joining Tables</h3>

<p>
When two tables are related in a many-to-many relationship the proper way to model the relationship is to use a table consisting of the primary keys from each of the two tables. Flourish uses the term <strong>joining table</strong> to refer to these.
</p>

<p>
Currently Flourish only works with single column <code>FOREIGN KEY</code> constraints, thus these simple tables consist of exactly two columns, each of which have a <code>FOREIGN KEY</code> constraint. The <code>PRIMARY KEY</code> of the joining table a multi-column key containing both <code>FOREIGN KEY</code> columns.
</p>

<h3 id="OrmConventions-docs-RelationshipRoutes">Relationship Routes</h3>

<p>
When two database tables are in more than one relationship via <code>FOREIGN KEY</code> constraints, the Flourish ORM uses the term <strong>route</strong> to refer to the different ways in which the two tables are related. If two tables only have a single relationship, routes will never need to be specified. Otherwise routes will, and the following rules are used to determine the route name.
</p>

<ul>
<li>Many-to-many relationships use the joining table name for the route name</li>
<li>One-to-many relationships use the column in the related table that has the <code>FOREIGN KEY</code> constraint</li>
<li>One-to-one and many-to-one relationships use the column that has the <code>FOREIGN KEY</code> constraint</li>
</ul>

<h3 id="OrmConventions-docs-SchemasOracleDB2Users">Schemas (Oracle/DB2 Users)</h3>

<p>
PostgreSQL, MSSQL, Oracle and DB2 all have the concept of schemas, although in Oracle and DB2 a schema is simply a specific user's set of database objects. Schemas are used for grouping tables, views, functions and other database objects.
</p>

<p>
With the Flourish ORM (and in raw SQL) a table in the non-default schema (<code>public</code> for PostgreSQL, <code>dbo</code> for MSSQL and the username for Oracle) is represented by <code>schema.table</code>. Anywhere that a table name can be used in the ORM, a <code>schema.table</code> string can also be used. This includes methods such as <a href="#fORM-api-mapClassToTable">fORM::mapClassToTable()</a>, for mapping a class to a table with a different name or in a different schema, and <a href="#fRecordSet-api-build">fRecordSet::build()</a>, when specifying a related table in the <code>$where_conditions</code>.
</p>

<h3 id="OrmConventions-docs-MultipleDatabases">Multiple Databases</h3>

<p>
The Flourish ORM supports using multiple databases, both for vertical partition and master-slave setups. Please see the <a href="#fORMDatabase">fORMDatabase
documentation</a> for more information.
</p>

<h3 id="OrmConventions-docs-MySQLStorageEngine">MySQL Storage Engine</h3>

<p>
The Flourish ORM is built on top of the principles of relational database systems including <a class="ext-link" href="http://en.wikipedia.org/wiki/Database_transaction"><span class="icon">transactions</span></a> and <a class="ext-link" href="http://en.wikipedia.org/wiki/Foreign_key"><span class="icon">foreign key</span></a> constraints. MySQL is built in such a way that <a href="http://dev.mysql.com/doc/refman/5.0/en/storage-engines.html">multiple storage
engines</a> are supported to do the work of actually storing data. Choosing the right storage engine for MySQL is essential for getting the Flourish ORM to work to the best of its abilities.
</p>

<p>
Unfortunately not all of the MySQL storage engines support the necessary features such as transactions and foreign key constraints. In fact the default storage engine, MyISAM, does not support either of these features as of MySQL
</p>

<ol>
<li>0. The InnoDB storage engine, which is shipped with MySQL by default, does</li>
</ol>

<p>
however support the necessary features. Because of these feature limitations, developers should be sure to specify the InnoDB storage engine when creating tables to be used with the Flourish ORM.
</p>

<p>
Below is an example of creating an InnoDB database table in MySQL, note specifically the <code>ENGINE</code> parameter after the closing <code>)</code> of the table definition.
</p>
<pre class="block sql"><code>CREATE TABLE users (
    customer_id INTEGER AUTO_INCREMENT PRIMARY KEY,
    first_name VARCHAR(255) NOT NULL,
    last_name VARCHAR(255) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE,
    password VARCHAR(100) NOT NULL
) ENGINE=InnoDB;</code></pre>

<p>
 If the InnoDB engine is not used for tables, foreign key constraints will not be created and Flourish will be unable to automatically detect the relationships between tables. In addition, any operations on multiple records will not be atomic since transactions are not supported. Thus the first record could be successfully changed, but if the second one fails, the first will not be rolled back.
</p>

<h3 id="OrmConventions-docs-SQLiteForeignKeyConstraints">SQLite Foreign Key Constraints</h3>

<p>
SQLite databases supports the syntax for foreign key constraints, however does not enforce them as of version 3.6.4. In order to enforce the foreign key constraints, triggers must be used instead.
</p>

<p>
A slightly old, but still relevant, <a href="http://www.sqlite.org/cvstrac/wiki?p=ForeignKeyTriggers">wiki page on the SQLite
site</a> explains how triggers can be used to enforce foreign keys. There are a couple of tools mentioned that can automatically generate the appropriate triggers.
</p>

<p>
In addition, the <a href="#fDatabase-api-translatedQuery">fDatabase::translatedQuery()</a> method will automatically create appropriate triggers for <code>CREATE TABLE</code> statements executed through an instance of the <a href="#fDatabase">fDatabase</a> class. If a <code>CREATE TABLE</code> statement is executed that includes a <code>FOREIGN KEY</code> constraint, the clauses will be automatically parsed for the relevant restrictions and the triggers will be created. Both <code>ON UPDATE</code> and <code>ON DELETE</code> clauses plus the actions <code>RESTRICT</code>, <code>NO ACTION</code>, <code>CASCADE</code> and <code>SET NULL</code> are supported:
</p>
<pre class="block php"><code>// The following will create a users table that actually
// enforces the group_id foreign key constraint
$db-&gt;translatedQuery(&quot;
CREATE TABLE users (
    customer_id INTEGER AUTO_INCREMENT PRIMARY KEY,
    first_name VARCHAR(255) NOT NULL,
    last_name VARCHAR(255) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE,
    password VARCHAR(100) NOT NULL,
    group_id INTEGER REFERENCES groups(group_id) ON DELETE RESTRICT
)
&quot;);</code></pre>

<p>
 		</section>
		
		<section class="main">
<h2 id="PerformanceTips-docs">Performance Tips</h2>
<div class="sidebar">
<h3>Contents</h3>

<ul>
<li><a href="#PerformanceTips-docs-OpcodeCaching">Opcode Caching</a></li>
<li><a href="#PerformanceTips-docs-Extensions">Extensions</a></li>
</ul>
</div>

<p>
This page is a small collection of some tips to help increase performance of you PHP code. Most of them require that you have enough control of the server to be able to change settings in Apache and load different PHP extensions.
</p>

<h3 id="PerformanceTips-docs-OpcodeCaching">Opcode Caching</h3>

<p>
Under normal operation, PHP will load each source code file upon each request. The source code files are first compiled into PHP opcodes and then the opcodes are executed. A number of PHP opcode caching extensions exist that keep the compiled opcodes stored in memory and only regenerate the opcode if the source code changes.
</p>

<ul>
<li><a class="ext-link" href="http://pecl.php.net/package/APC"><span class="icon">APC</span></a></li>
<li><a class="ext-link" href="http://eaccelerator.net"><span class="icon">eAccelerator</span></a></li>
<li><a class="ext-link" href="http://turck-mmcache.sourceforge.net/index_old.html"><span class="icon">Turck MMCache</span></a></li>
<li><a class="ext-link" href="http://xcache.lighttpd.net"><span class="icon">XCache</span></a></li>
</ul>

<p>
Mike Willbanks has <a href="http://blog.digitalstruct.com/2007/12/24/accelerators-revisited/">a comparison
of APC, eAccelerator and XCache</a> from late 2007.
</p>

<p>
<a href="#fLoader">fLoader</a> will utilize the most performant loading technique based on the current execution environment. If a opcode cache is present, all classes will be included. If not, autoloading will be done via <a class="ext-link" href="http://php.net/spl_autoload_register"><span class="icon"><code>spl_autoload_register()</code></span></a>.
</p>

<h3 id="PerformanceTips-docs-Extensions">Extensions</h3>

<p>
A few of the Flourish classes provide pure PHP implementations of functionality that is also available from extensions that are not installed by default. Below is a list of the classes and the extension that will provide better performance.
</p>
<table><tbody>
<tr>
<td><strong>Class</strong></td>
<td><strong>Extension</strong></td>
</tr>
<tr>
<td><a href="#fJSON">fJSON</a></td>
<td><a class="ext-link" href="http://php.net/json"><span class="icon">json</span></a> (included in 5.2 by default)</td>
</tr>
<tr>
<td><a href="#fNumber">fNumber</a>/<a href="#fMoney">fMoney</a></td>
<td><a class="ext-link" href="http://php.net/bc"><span class="icon">bcmath</span></a></td>
</tr>
<tr>
<td><a href="#fUTF8">fUTF8</a></td>
<td><a class="ext-link" href="http://php.net/mbstring"><span class="icon">mbstring</span></a></td>
</tr>
</tbody></table>
		</section>
		
		<section class="main">
<h2 id="PhpVersionDifferences-docs">PHP Version Differences</h2>
<div class="sidebar">
<h3>Contents</h3>

<ul>
<li><a href="#PhpVersionDifferences-docs-CallbackFormats">Callback Formats</a></li>
<li><a href="#PhpVersionDifferences-docs-ConvertingObjectstoStrings">Converting Objects to Strings</a></li>
</ul>
</div>

<p>
Flourish is designer to be fully functional on PHP 5.1+. There are, however a number of end-programmer differences between PHP 5.1 and 5.2. This page contains an overview of the major differences.
</p>

<h3 id="PhpVersionDifferences-docs-CallbackFormats">Callback Formats</h3>

<p>
In both 5.1 and 5.2, callbacks to instance methods of object are formulated as an array with the first element being the object and the second being a string of the method name.
</p>
<pre class="block php"><code>$date = new fDate();
$callback = array($date, '__toString');</code></pre>

<p>
 Similarly, with both 5.1 and 5.2 static method callbacks can be created with an array containing a string of the class and a string of the static method to call.
</p>
<pre class="block php"><code>$callback = array('fCore', 'backtrace');</code></pre>

<p>
 In 5.2, however, a second static method callback format was added. The new format consists of a single string with the class name concatenated with <code>::</code> and then the method name.
</p>
<pre class="block php"><code>$callback = 'fCore::backtrace';</code></pre>

<p>
 If you are using callbacks with Flourish, be sure to check out how Flourish provides an <a href="#FlourishCallbackSyntax-docs">intuitive callback syntax</a>.
</p>

<h3 id="PhpVersionDifferences-docs-ConvertingObjectstoStrings">Converting Objects to Strings</h3>

<p>
Many different kinds of objects, especially value objects, will intrinsically have a string representation of their value. In both 5.1 and 5.2 a <code>__toString()</code> method can be defined for any object. The difference between 5.1 and 5.2 is the automatic conversion of an object to a string.
</p>

<p>
In 5.1, the <code>__toString()</code> method is only automatically called when an object is <code>echo</code>ed or <code>print</code>ed. However, if the object is concatenated with another string during the <code>echo</code> or <code>print</code> statement, the <code>__toString()</code> method is <strong>not</strong> called. In PHP 5.2 this behavior was fixed, and the <code>__toString()</code> method is called whenever a string is expected.
</p>

<p>
In the context of Flourish, all classes that represent some sort of simple value have a predefined <code>__toString()</code> methods. Also, any methods that accept strings or objects will automatically check for a <code>__toString()</code> method on a object and call that. The only thing to keep in mind is that when using objects where strings are expected you will need to explicitly call <code>__toString()</code> if the code will be run on an environment with 5.1.
</p>
		</section>
		
		<section class="main">
<h2 id="ReferenceObjects-docs">Reference Objects</h2>

<p>
A reference object refers to a class that is implemented in such a way that all instances with the same value share properties. Thus changes to one instance of an object representing a user should also show up in another object representing the same user. Reference objects are mutable, in that their state can be changed without creating a new object.
</p>

<p>
Flourish includes a few different classes that are reference objects:
</p>

<ul>
<li><a href="#fActiveRecord">fActiveRecord</a></li>
<li><a href="#fDirectory">fDirectory</a></li>
<li><a href="#fFile">fFile</a></li>
<li><a href="#fImage">fImage</a></li>
</ul>

<p>
Here is another page with some info about reference objects:
</p>

<ul>
<li><a class="ext-link" href="http://c2.com/cgi/wiki?ReferenceObject"><span class="icon">http://c2.com/cgi/wiki?ReferenceObject</span></a></li>
</ul>

<p>
The opposite of a reference object is a <a href="#ValueObjects-docs">value object</a>.
</p>
		</section>
		
		<section class="main">
<h2 id="Security-docs">Security</h2>
<div class="sidebar">
<h3>Contents</h3>

<ul>
<li><a href="#Security-docs-Cross-SiteRequestForgery">Cross-Site Request Forgery</a></li>
<li><a href="#Security-docs-Cross-SiteScripting">Cross-Site Scripting</a></li>
<li><a href="#Security-docs-SessionFixation">Session Fixation</a></li>
<li><a href="#Security-docs-Cross-SiteSessionTransfer">Cross-Site Session Transfer</a></li>
<li><a href="#Security-docs-Pseudo-RandomNumberGeneratorAttacks">Pseudo-Random Number Generator Attacks</a></li>
<li><a href="#Security-docs-SQLInjection">SQL Injection</a></li>
<li><a href="#Security-docs-EmailInjection">Email Injection</a></li>
<li><a href="#Security-docs-PathDisclosure">Path Disclosure</a></li>
<li><a href="#Security-docs-PathTraversal">Path Traversal</a></li>
<li><a href="#Security-docs-RequestValueFixation">Request Value Fixation</a></li>
<li><a href="#Security-docs-InvalidCharacterEncoding">Invalid Character Encoding</a></li>
<li><a href="#Security-docs-FileUploads">File Uploads</a></li>
<li><a href="#Security-docs-PasswordHashing">Password Hashing</a></li>
<li><a href="#Security-docs-MagicQuotesandRegisterGlobals">Magic Quotes and Register Globals</a></li>
<li><a href="#Security-docs-AdditionalSecurityResources">Additional Security Resources</a></li>
</ul>
</div>

<p>
Security is an important topic when creating web sites. Quite a few techniques exist to compromise web servers, web browsers, or peoples information. This page serves as an overview of the various attacks that Flourish helps to prevent. While technology can help to keep sites secure, the most important part of the equation is that developers know what they are up against.
</p>

<h3 id="Security-docs-Cross-SiteRequestForgery">Cross-Site Request Forgery</h3>

<p>
CSRF attacks consist of malicious websites taking advantage of users being logged in to multiple web sites in a single browser, thereby allowing them to direct users to perform password protected tasks in an unauthorized manner. The <a href="#fRequest">fRequest</a> class provides functionality to <a href="#fRequest-docs-PreventingCSRFSecurity">prevent CSRF attacks</a>.
</p>

<p>
<strong>More info:</strong>
</p>

<ul>
<li><a href="#fRequest-docs-PreventingCSRFSecurity">fRequest: Preventing CSRF</a></li>
<li><a class="ext-link" href="http://en.wikipedia.org/wiki/Cross-site_request_forgery"><span class="icon">http://en.wikipedia.org/wiki/Cross-site_request_forgery</span></a></li>
<li><a class="ext-link" href="http://shiflett.org/articles/cross-site-request-forgeries"><span class="icon">http://shiflett.org/articles/cross-site-request-forgeries</span></a></li>
<li><a class="ext-link" href="http://shiflett.org/articles/foiling-cross-site-attacks"><span class="icon">http://shiflett.org/articles/foiling-cross-site-attacks</span></a></li>
</ul>

<h3 id="Security-docs-Cross-SiteScripting">Cross-Site Scripting</h3>

<p>
Cross-site scripting (or XSS) is an attack that injects malicious code into a normally &quot;safe&quot; page. This usually takes the form of a link containing malicious content which is embedded in a page or by allowing posting of permanent data (such as blog comments) that gets embedded in the page. To prevent this type of attack, all input should be filtered and all output should be escaped. The <a href="#fRequest-api-get">fRequest::get()</a> method allows for filtering input data with typecasting, while <a href="#fHTML-api-escape">fHTML::escape()</a> ensures that all output is properly escaped for output in HTML.
</p>

<p>
<strong>More info:</strong>
</p>

<ul>
<li><a href="#fRequest-docs-InputFilteringbyTypecastingSecurity">fRequest: Input Filtering
   by Typecasting</a></li>
<li><a href="#fHTML-docs-EscapingContentSecurity">fHTML: Escaping Content</a></li>
<li><a class="ext-link" href="http://en.wikipedia.org/wiki/Cross-site_scripting"><span class="icon">http://en.wikipedia.org/wiki/Cross-site_scripting</span></a></li>
<li><a class="ext-link" href="http://shiflett.org/articles/foiling-cross-site-attacks"><span class="icon">http://shiflett.org/articles/foiling-cross-site-attacks</span></a></li>
</ul>

<h3 id="Security-docs-SessionFixation">Session Fixation</h3>

<p>
Session fixation is when an attacker tricks a user into using a known session id to log into a website and then uses the same session id to access their account. The <a href="#fSession">fSession</a> class helps prevent this by setting the appropriate ini settings so that session ids can only be specified in cookies and not in the query string. The <a href="#fAuthorization">fAuthorization</a> class takes it a step further and regenerates the session identifier whenever any new user information (such as ACLs or authorization level) is set.
</p>

<p>
<strong>More info:</strong>
</p>

<ul>
<li><a href="#fAuthorization-docs-PreventingPrivilegeEscalationSecurity">fAuthorization:
   Preventing Privilege Escalation</a></li>
<li><a href="#fSession-docs-PreventingSessionFixationSecurity">fSession: Preventing
   Session Fixation</a></li>
<li><a class="ext-link" href="http://en.wikipedia.org/wiki/Session_fixation"><span class="icon">http://en.wikipedia.org/wiki/Session_fixation</span></a></li>
<li><a class="ext-link" href="http://shiflett.org/articles/session-fixation"><span class="icon">http://shiflett.org/articles/session-fixation</span></a></li>
</ul>

<h3 id="Security-docs-Cross-SiteSessionTransfer">Cross-Site Session Transfer</h3>

<p>
When multiple sites on a single server share the same directory to store their session files, it is possible that a user could log into a legitimate account on one site and then copy and paste the session id into the other sites session id cookie. This type of attack would allow an attacker to gain access to information of the second site as long as the <code>$_SESSION</code> data is structured the same as the first site.
</p>

<p>
The easiest way to prevent such an attack is to have each site use a custom directory to store session files by calling the static method <a href="#fSession-api-setPath">fSession::setPath()</a>.
</p>

<p>
<strong>More info:</strong>
</p>

<ul>
<li><a href="#fSession-docs-ConfigurationSecurity">fSession: Configuration</a></li>
<li><a href="http://www.suspekt.org/wp-content/uploads/2008/09/lesserknownsecurityproblemsinphpapplications.pdf">Slides from Stefan Essers talk &quot;Lesser Known Security Problems in PHP
   Applications&quot;</a> </li>
</ul>

<h3 id="Security-docs-Pseudo-RandomNumberGeneratorAttacks">Pseudo-Random Number Generator Attacks</h3>

<p>
The pseudo-random number generator (PRNG) built into PHP includes a fairly secure seeding system to make sure that the number generated are hard to guess or replicate. Unfortunately the functions <a class="ext-link" href="http://php.net/srand"><span class="icon"><code>srand()</code></span></a> and <a class="ext-link" href="http://php.net/mt_srand"><span class="icon"><code>mt_srand()</code></span></a> allow seeding the <a class="ext-link" href="http://php.net/rand"><span class="icon"><code>rand()</code></span></a> and <a class="ext-link" href="http://php.net/mt_rand"><span class="icon"><code>mt_rand()</code></span></a> functions, and the seeds used are usually very insecure and can be calculated by attackers. It is also possible via a number of different techniques for an attacker to manage to reset the seed to a known value.
</p>

<p>
The <a href="#fCryptography">fCryptography</a> class provides functionality where the OS random number generator (<code>/dev/urandom</code> on BSD/Linux and the CAPICOM object on Windows) is used to seed the PRNG. If neither of those sources is available, a combination of a number of other attributes about the current server and install are used to create a seed value. Because of this functionality, the static method <a href="#fCrytography-api-random">fCrytography::random()</a> should always be used for random numbers and the static method <a href="#fCryptography-api-randomString">fCryptography::randomString()</a> should always be used for random strings.
</p>

<p>
<strong>More info:</strong>
</p>

<ul>
<li><a href="#fCryptography-docs-RandomNumbersandStrings">fCryptography: Random Numbers
   and Strings</a></li>
<li><a class="ext-link" href="http://www.suspekt.org/2008/08/17/mt_srand-and-not-so-random-numbers/"><span class="icon">http://www.suspekt.org/2008/08/17/mt_srand-and-not-so-random-numbers/</span></a></li>
</ul>

<h3 id="Security-docs-SQLInjection">SQL Injection</h3>

<p>
SQL injection is a technique where an attacker passes in a value into a site that includes SQL commands where the application is normally expecting a value to use in a query. Suppose there is a site that accepts a blog id in the query string of the blog page:
</p>
<pre><code>http://example.com/blogs.php?blog_id=25</code></pre>

<p>
 This value would then be used in the SQL query to look up the appropriate blog:
</p>
<pre class="block php"><code>$sql = &quot;SELECT * FROM blogs WHERE blog_id = '&quot; . $_GET['blog_id'] . &quot;'&quot;;</code></pre>

<p>
 which would create the following SQL statement:
</p>
<pre class="block sql"><code>SELECT * FROM blogs WHERE blog_id = '2'</code></pre>

<p>
 If an attacker were to use a different value for the blog id, such as below, they could execute arbitrary SQL statements.
</p>
<pre><code>http://example.com/blogs.php?blog_id=2'%3B%20DELETE%20FROM%20blogs%3B</code></pre>

<p>
 which would end up creating the following SQL statement:
</p>
<pre class="block sql"><code>SELECT * FROM blogs WHERE blog_id = '2'; DELETE FROM blogs;</code></pre>

<p>
 The way to prevent such attacks is to always escape data that is being placed into a SQL query. The <a href="#fDatabase">fDatabase</a> class is built with this in mind, providing the static method <a href="#fDatabase-api-escape">fDatabase::escape()</a> which allows escaping of data based on its type. In addition, each of the four different query methods allow using the same escape syntax.
</p>

<p>
<strong>More info:</strong>
</p>

<ul>
<li><a href="#fDatabase-docs-EscapingDataSecurity">fDatabase: Escaping Data</a></li>
<li><a class="ext-link" href="http://en.wikipedia.org/wiki/SQL_injection"><span class="icon">http://en.wikipedia.org/wiki/SQL_injection</span></a></li>
</ul>

<h3 id="Security-docs-EmailInjection">Email Injection</h3>

<p>
Email injection is an attack similar to SQL injection, except that the malicious content must be placed in the <code>$additional_headers</code> parameter of the <a class="ext-link" href="http://php.net/function.mail"><span class="icon"><code>mail()</code></span></a> function. Since the <code>From:</code> header is added to an email using this additional headers parameter, it is possible to an attacker to set additional headers or even inject full messages if user submitted data is included in the <code>From:</code> header.
</p>

<p>
Below is an example of code that would be vulnerable to an email injection attack:
</p>
<pre class="block php"><code>$headers = &quot;From: &quot; . $_POST['name'] . &quot; &lt;&quot; . $_POST['email'] . &quot;&gt;&quot;;
mail($to, $subject, $body, $headers);</code></pre>

<p>
 If an attacker were to include line breaks in the name or email fields, they could add additional headers including <code>To:</code>, <code>Cc:</code>, <code>Bcc:</code>, <code>Subject:</code>, and even more like setting up a mime type. PHP automatically prevents line break characters in the <code>$subject</code> parameter of <code>mail()</code>, while the <code>$to</code> parameter requires a valid email address and the <code>$message</code> parameter would just display the headers as normal text content.
</p>

<p>
Both the <a href="#fValidation">fValidation</a> and <a href="#fEmail">fEmail</a> classes contain features to help prevent email injection attacks. The <a href="#fValidation">fValidation</a> class includes methods to check fields for being valid email addresses and to make sure they dont include line breaks. The <a href="#fEmail">fEmail</a> class provides full prevention against attacks by validating each email address and name (to, from, reply to, etc) plus the subject to ensure they dont contain vulnerabilities.
</p>

<p>
<strong>More info:</strong>
</p>

<ul>
<li><a href="#fEmail">fEmail</a></li>
<li><a href="#fValidation">fValidation</a></li>
<li><a class="ext-link" href="http://en.wikipedia.org/wiki/E-mail_injection"><span class="icon">http://en.wikipedia.org/wiki/E-mail_injection</span></a></li>
</ul>

<h3 id="Security-docs-PathDisclosure">Path Disclosure</h3>

<p>
Error messages and unhandled exception messages often include full file or directory paths to documents on your server. During development it is useful to display this information so that debugging is easier. Once a site has moved to its production environment, however, these file and directory paths can be a security risk. While not a risk in an of themselves, the information is useful when combined with other attacks.
</p>

<p>
Say that a site is on a shared server with a custom session path to prevent cross-site session transfer attacks. Obviously the directory has to be readable and writable by the web server, otherwise the session files would not be saved. If the attacker was able to find the session path via an error or exception message, they could then set their application to use the same session path and execute an attack.
</p>

<p>
To prevent this information from leaking, error and exception messages should be routed to a log file or an email address once a site is in production. The static methods <a href="#fCore-api-enableErrorHandling">fCore::enableErrorHandling()</a> and <a href="#fCore-api-enableExceptionHandling">fCore::enableExceptionHandling()</a> provide such functionality, plus more.
</p>

<p>
<strong>More info:</strong>
</p>

<ul>
<li><a href="#fCore-docs-ErrorExceptionHandling">fCore: Error/Exception Handling</a></li>
</ul>

<h3 id="Security-docs-PathTraversal">Path Traversal</h3>

<p>
Path traversal is an attack in which a script that uses user input to access a file is fed a path outside of the intended directory. Suppose the following URL allows downloading files from a directory:
</p>
<pre><code>http://example.com/download.php?file=image.gif</code></pre>

<p>
And that <code>download.php</code> contained code such as:
</p>
<pre class="block php"><code>$path   = '/path/to/download/dir/' . $_GET['file'];
$handle = fopen($path, 'rb');
fpassthru($handle);
fclose($handle);
exit;</code></pre>

<p>
 If a user specified the following URL, they could access the file <code>/etc/passwd</code> since they are using the <code>../</code> notation for the parent directory:
</p>
<pre><code>http://example.com/download.php?file=..%2F..%2F..%2F..%2Fetc%2Fpasswd</code></pre>

<p>
 The best way to prevent such an attack is to not accept filenames from users, but instead accept an identifer which can be mapped to a filename.
</p>
<pre class="block php"><code>$valid_files = array(
    '1' =&gt; 'image.gif',
    '2' =&gt; 'image.jpg',
    '3' =&gt; 'image.png'
);

$file = $_GET['file'];

if (isset($valid_files[$file])) {
    // Handle the error
}

$path = '/path/to/download/dir/' . $file;</code></pre>

<p>
 Similarly, another option is to create some sort of whitelist of valid files and make sure the file requested is in the whitelist.
</p>

<p>
If it is not possible to create a whitelist, the function <a class="ext-link" href="http://php.net/realpath"><span class="icon"><code>realpath()</code></span></a> will return the canonical form of a path, resolving any <code>../</code> paths and following any symlinks. For the example above, <code>realpath()</code> would have returned <code>/etc/passwd</code>. Thus, checking the output of <code>realpath()</code> against the valid file directory can prevent unauthorized filesystem access:
</p>
<pre class="block php"><code>$dir  = '/path/to/download/dir/';
$path = realpath($dir . $_GET['file']);

if (strpos($path, $dir) !== 0 || $path == $dir) {
    // Handle the error
}</code></pre>

<p>
 The <a href="#fFile">fFile</a> class can be useful in validating files since it will throw an <a href="#fValidation">fValidation</a> exception if the file is not found and will return the output of <code>realpath()</code> from the method <a href="#fFile-api-getPath">fFile::getPath()</a>.
</p>

<p>
<strong>More info:</strong>
</p>

<ul>
<li><a href="#fFile">fFile</a></li>
<li><a class="ext-link" href="http://www.owasp.org/index.php/Path_Traversal"><span class="icon">http://www.owasp.org/index.php/Path_Traversal</span></a></li>
</ul>

<h3 id="Security-docs-RequestValueFixation">Request Value Fixation</h3>

<p>
Request value fixation is an attack that is only effective against script that use the <code>$_REQUEST</code> superglobal. The <code>$_REQUEST</code> superglobal pulls in values from <code>$_GET</code>, <code>$_POST</code>, and <code>$_COOKIE</code>, in that order. This means that any value specified in a cookie with the same key as a value passed in by a query string will always resolve to the cookie value.
</p>

<p>
This type of attack would require that a users cookie be compromised, but could cause serious issues. Because of this vulnerability, the <code>$_REQUEST</code> superglobal should not be used. The <a href="#fRequest">fRequest</a> class provides functionality to retrieve values from both the <code>$_GET</code> and <code>$_POST</code> superglobals (in that order) and provides additional useful features.
</p>

<p>
<strong>More info:</strong>
</p>

<ul>
<li><a href="#fRequest-docs-GettingValues">fRequest: Getting Values</a></li>
<li><a class="ext-link" href="http://kuza55.blogspot.com/2006/03/request-variable-fixation.html"><span class="icon">http://kuza55.blogspot.com/2006/03/request-variable-fixation.html</span></a></li>
<li><a class="ext-link" href="http://www.suspekt.org/2008/10/01/php-53-and-delayed-cross-site-request-forgerieshijacking/"><span class="icon">http://www.suspekt.org/2008/10/01/php-53-and-delayed-cross-site-request-forgerieshijacking/</span></a></li>
</ul>

<h3 id="Security-docs-InvalidCharacterEncoding">Invalid Character Encoding</h3>

<p>
Some multibyte character encodings can cause issues when escaping data, especially when creating SQL statements. The issues is that some character encodings use the <code>\</code> character as a second, third or fourth byte in a multibyte sequence, however that can be combined with other characters to cause escaping to be done incorrectly.
</p>

<p>
UTF-8, the character encoding that Flourish uses for everything, does not suffer from this type of vulnerability. As a precaution, however, the static method <a href="#fRequest-api-get">fRequest::get()</a> filters all incoming content through <a href="#fUTF8-api-clean">fUTF8::clean()</a> to ensure that no malformed UTF-8 characters are present. In a similar sense, all data imported into the system should be converted to UTF-8, and cleaned to make sure no invalid characters exist.
</p>

<p>
<strong>More info:</strong>
</p>

<ul>
<li><a href="#fRequest-docs-SpecialDataTypeHandling">fRequest: Special Data Type Handling</a></li>
<li><a href="#fUTF8-docs-CleaningStringsSecurity">fUTF8: Cleaning Strings</a></li>
<li><a class="ext-link" href="http://shiflett.org/blog/2006/jan/addslashes-versus-mysql-real-escape-string"><span class="icon">http://shiflett.org/blog/2006/jan/addslashes-versus-mysql-real-escape-string</span></a></li>
<li><a class="ext-link" href="http://www.suspekt.org/2008/09/18/slides-from-my-lesser-known-security-problems-in-php-applications-talk-at-zendcon/"><span class="icon">http://www.suspekt.org/2008/09/18/slides-from-my-lesser-known-security-problems-in-php-applications-talk-at-zendcon/</span></a></li>
</ul>

<h3 id="Security-docs-FileUploads">File Uploads</h3>

<p>
File uploads can clearly be a security vulnerability if no filtering is done of user input. Malicious users could upload executables containing viruses, trojans, or any other sort of harmful content. Because of this, it is best practice to limit the accepted file types to those that are suitable for the task at hand.
</p>

<p>
The <code>$_FILES</code> superglobal that PHP provides to access file uploads includes a <code>type</code> key which contains the mime type of the file. This mime type, however, is specified by the user and should not be trusted for filtering nefarious files. The <a href="#fUpload">fUpload</a> class, however, includes functionality that filters uploaded files by their mime type, with the mime type checking being done on the server side.
</p>

<p>
<strong>More info:</strong>
</p>

<ul>
<li><a href="#fUpload-docs-SettingOptionsSecurity">fUpload: Setting Options</a></li>
</ul>

<h3 id="Security-docs-PasswordHashing">Password Hashing</h3>

<p>
Users' passwords should never be stored in plain text. As much as there is a desire to provide functionality such as &quot;email me my password,&quot; the benefit is not worth the risk of an attacker obtaining a list of users and their passwords. Instead, all user passwords should be hashed and then functionality such as &quot;reset my password&quot; should be implemented.
</p>

<p>
It is also important to understand that simply hashing a password using <a class="ext-link" href="http://php.net/md5"><span class="icon"><code>md5()</code></span></a> or <a class="ext-link" href="http://php.net/sha1"><span class="icon"><code>sha1()</code></span></a> is not enough to provide reasonable security. Before hashing the password, it should be combined with a salt to provide extra security and protect against certain forms of attack. The <a href="#fCryptography">fCryptography</a> class provides secure password hashing functionality via the static methods <a href="#fCryptography-api-hashPassword">fCryptography::hashPassword()</a> and <a href="#fCryptography-api-checkPasswordHash">fCryptography::checkPasswordHash()</a>.
</p>

<p>
<strong>More info:</strong>
</p>

<ul>
<li><a href="#fCryptography-docs-PasswordHashing">fCryptography: Password Hashing</a></li>
<li><a class="ext-link" href="http://en.wikipedia.org/wiki/Key_strengthening"><span class="icon">http://en.wikipedia.org/wiki/Key_strengthening</span></a></li>
<li><a class="ext-link" href="http://en.wikipedia.org/wiki/Password_cracking"><span class="icon">http://en.wikipedia.org/wiki/Password_cracking</span></a></li>
<li><a class="ext-link" href="http://phpsec.org/articles/2005/password-hashing.html"><span class="icon">http://phpsec.org/articles/2005/password-hashing.html</span></a></li>
<li><a class="ext-link" href="http://www.securityfocus.com/blogs/262"><span class="icon">http://www.securityfocus.com/blogs/262</span></a></li>
</ul>

<h3 id="Security-docs-MagicQuotesandRegisterGlobals">Magic Quotes and Register Globals</h3>

<p>
Magic quotes and register globals are two features built into PHP that can cause security issues and affect how user input is treated in PHP.
</p>

<p>
Magic quotes (specifically the ini setting <code>magic_quotes_gpc</code>) tries to prevent SQL injection attacks by automatically escaping all <code>'</code>, <code>&quot;</code>, <code>\</code> and <code>NULL</code> characters with a <code>\</code>. This affects all data in the <code>$_GET</code>, <code>$_POST</code> and <code>$_COOKIE</code> superglobals and is enabled by default in new PHP installations. The <a href="#fRequest-api-get">fRequest::get()</a> and <a href="#fCookie-api-get">fCookie::get()</a> static methods will automatically detect if <code>magic_quotes_gpc</code> is turned on and will remove the extra escape <code>\</code> characters.
</p>

<p>
Register globals is a feature where all data from the <code>$_GET</code>, <code>$_POST</code> and <code>$_COOKIE</code> superglobals are exported into the global scope as variables. This can very quickly lead to injection vulnerabilities and this feature should never be enabled. Register globals has been disabled by default since PHP version
</p>

<ol>
<li>2.0.</li>
</ol>

<p>
<strong>More info:</strong>
</p>

<ul>
<li><a href="#fRequest-docs-GettingValues">fRequest: Getting Values</a></li>
<li><a href="#fCookie-docs-GettingValues">fCookie: Getting Values</a></li>
<li><a class="ext-link" href="http://php.net/security.magicquotes.disabling"><span class="icon">http://php.net/security.magicquotes.disabling</span></a></li>
<li><a class="ext-link" href="http://en.wikipedia.org/wiki/Magic_quotes"><span class="icon">http://en.wikipedia.org/wiki/Magic_quotes</span></a></li>
<li><a class="ext-link" href="http://php.net/ini.core#ini.register-globals"><span class="icon">http://php.net/ini.core#ini.register-globals</span></a></li>
<li><a class="ext-link" href="http://php.net/register_globals"><span class="icon">http://php.net/register_globals</span></a></li>
</ul>

<h3 id="Security-docs-AdditionalSecurityResources">Additional Security Resources</h3>

<p>
The following web sites and blogs have a wealth of information about web/PHP security and best practices.
</p>

<ul>
<li><a class="ext-link" href="http://shiflett.org/articles"><span class="icon">http://shiflett.org/articles</span></a></li>
<li><a class="ext-link" href="http://blog.php-security.org/"><span class="icon">http://blog.php-security.org/</span></a></li>
<li><a class="ext-link" href="http://www.suspekt.org/category/security/"><span class="icon">http://www.suspekt.org/category/security/</span></a></li>
<li><a class="ext-link" href="http://www.owasp.org/index.php/Category:Attack"><span class="icon">http://www.owasp.org/index.php/Category:Attack</span></a></li>
<li><a class="ext-link" href="http://en.wikipedia.org/wiki/Category:Web_security_exploits"><span class="icon">http://en.wikipedia.org/wiki/Category:Web_security_exploits</span></a></li>
</ul>
		</section>
		
		<section class="main">
<h2 id="UTF-8-docs">UTF-8 in PHP</h2>
<div class="sidebar">
<h3>Contents</h3>

<ul>
<li><a href="#UTF-8-docs-WhatisUTF-8">What is UTF-8?</a></li>
<li><a href="#UTF-8-docs-PHPandUTF-8">PHP and UTF-8</a></li>
<li><a href="#UTF-8-docs-FlourishsUTF-8Support">Flourishs UTF-8 Support</a>
<ul>
<li><a href="#UTF-8-docs-DatabaseEncoding">Database Encoding</a>
<ul>
<li><a href="#UTF-8-docs-PostgreSQL">PostgreSQL</a></li>
<li><a href="#UTF-8-docs-MySQL">MySQL</a></li>
<li><a href="#UTF-8-docs-MSSQL">MSSQL</a></li>
<li><a href="#UTF-8-docs-SQLite">SQLite</a></li>
<li><a href="#UTF-8-docs-Oracle">Oracle</a></li>
<li><a href="#UTF-8-docs-DB2">DB2</a></li>
</ul>
</li>
<li><a href="#UTF-8-docs-HTMLEncoding">HTML Encoding</a></li>
<li><a href="#UTF-8-docs-RequestData">Request Data</a></li>
<li><a href="#UTF-8-docs-StringManipulation">String Manipulation</a></li>
</ul>
</li>
<li><a href="#UTF-8-docs-ImportingData">Importing Data</a></li>
</ul>
</div>

<p>
After some experience with PHP, developers will often start to notice issues related to character encoding including &quot;weird&quot; characters and multiple characters where there should only be one. Handling character encoding on the web usually means support the <a class="ext-link" href="http://en.wikipedia.org/wiki/UTF-8"><span class="icon">UTF-8</span></a> character encoding to allow for more than the standard ASCII characters present on US keyboard layouts. This page will try to give a brief overview of the issues and solutions to using UTF-8 with PHP.
</p>

<h3 id="UTF-8-docs-WhatisUTF-8">What is UTF-8?</h3>

<p>
UTF-8 is a <a class="ext-link" href="http://en.wikipedia.org/wiki/Character_encoding"><span class="icon">character encoding</span></a>, or a way to represent characters in a digital manner. It is an encoding of the of the <a class="ext-link" href="http://en.wikipedia.org/wiki/Unicode"><span class="icon">Unicode</span></a> standard which is closely related to the <a href="http://en.wikipedia.org/wiki/Universal_Character_Set">Universal
Character Set</a> (UCS). There are many different character encodings in the Unicode standard, however UTF-8 has a few properties that make it one of the best and most popular choices for work on the web.
</p>

<p>
Unicode contains around 100,000 characters, allowing it to represent a majority of the written languages in the world. Other common characters sets in languages with Latin characters include <a class="ext-link" href="http://en.wikipedia.org/wiki/ISO_8859-1"><span class="icon">ISO-8859-1</span></a> and <a class="ext-link" href="http://en.wikipedia.org/wiki/Windows-1252"><span class="icon">Windows-1252</span></a>. Each of these character encoding suffers from issues that they only support 256 different characters, with some common characters not being present (such as curly quotes and the Euro symbol in ISO-8859-1).
</p>

<p>
Since UTF-8 is an encoding that represents the Unicode standard, character availability is not an issue. However, to be able to represent so many different characters, UTF-8 uses multiple bytes of space for all non-ASCII characters. One of the nice properties of UTF-8 is that it is backwards compatible with ASCII and the first 128 characters in ISO-8859-1 and Windows-1252. In addition, UTF-8 is constructed in such a way that it is  possible to tell where character boundaries are even if a parser is started in the middle of a character. Related to that, it is simple for a UTF-8 string to be verified as correctly encoded.
</p>

<h3 id="UTF-8-docs-PHPandUTF-8">PHP and UTF-8</h3>

<p>
Unfortunately, PHP does not include native support for UTF-8. All of the built- in string functions are designed to work with single-byte encodings only. The <a class="ext-link" href="http://php.net/mbstring"><span class="icon">mbstring</span></a> extension exists to provide string functions that are compatible with UTF-8, however it only covers a fraction of the standard string functions, and is not installed by default.
</p>

<p>
In addition to manipulating strings, the character encoding also affects the HTML that is returned to browsers and text in databases. The HTML standard defines ISO-8859-1 as the default character set to use for HTML when not specified, which will cause &quot;weird&quot; characters when UTF-8 content is returned. In a similar fashion, both MySQL and PostgreSQL default to using ISO-8859-1 as the character encoding unless specified.
</p>

<p>
MSSQL is much more complicated to work with since the whole server uses a single character encoding. In order to store unicode information, the column data types must be specified as one of the national character types, <code>NVARCHAR</code>, <code>NCHAR</code> or <code>NTEXT</code>. These national columns store data in USC-2 encoding, which contains null bytes for the characters in the ASCII range. Unfortunately none of the PHP extensions support binary data to be returned in string columns, so the national columns require extra work to cast them as binary data and then translated the data once in PHP.
</p>

<h3 id="UTF-8-docs-FlourishsUTF-8Support">Flourishs UTF-8 Support</h3>

<p>
Even though PHP has poor UTF-8 support by default, there are ways to work around it. Since using UTF-8 is the most universal way to handle characters from other languages, Flourish includes code that automatically works the shortcomings of PHP and provides UTF-8 support in all situations. While Flourish can solve many of the PHP issues with UTF-8, it is also important to understand how UTF-8 affects the other aspects of building a web site.
</p>

<h4 id="UTF-8-docs-DatabaseEncoding">Database Encoding</h4>

<p>
If a database is being used to store text information, it should be created using UTF-8 as the character encoding. This allows the widest range of characters to be properly stored, sorted and manipulated by the database.
</p>

<h5 id="UTF-8-docs-PostgreSQL">PostgreSQL</h5>

<p>
For PostgreSQL, the database encoding must be specified when the database is created. If it is not, the database will have to be dumped and re-imported into a new database.
</p>
<pre class="block sql"><code>CREATE DATABASE database_name ENCODING = 'UTF-8';</code></pre>

<p>
 The <a href="#fDatabase">fDatabase</a> class will also automatically switch the connection encoding of any PostgreSQL database to UTF-8 even if it is not set up with UTF-8 encoding. This ensures that all data coming from PostgreSQL is always UTF-8, however there can be issues with trying to store UTF-8 characters in a database that does not support all of the same characters. Commonly this will be manifested by characters being stored as <code>?</code>s.
</p>

<h5 id="UTF-8-docs-MySQL">MySQL</h5>

<p>
MySQL allows the character encoding for content to be defined when the database is created, or when a table is created.
</p>
<pre class="block sql"><code>-- Setting the default encoding for a database
CREATE DATABASE example CHARACTER SET 'utf8';

-- Setting the encoding on a table
CREATE TABLE examples (
    name VARCHAR(255) PRIMARY KEY
) CHARACTER SET utf8;</code></pre>

<p>
 However, <a href="#fDatabase">fDatabase</a> will also automatically switch the connection encoding for any MySQL database to UTF-8. This means that all data coming back to PHP will be encoded as UTF-8 regardless of the table encoding. There can, however, be issues if text containing UTF-8 data is stored in a table that can not handle as many characters as UTF-8. Commonly this will be manifested by characters being stored as <code>?</code>s.
</p>

<h5 id="UTF-8-docs-MSSQL">MSSQL</h5>

<p>
MSSQL does not support UTF-8 natively like the other database engines, and requires that all databases on a server use the same character encoding. Luckily it also provides the national (or unicode) character data types <code>NVARCHAR</code>, <code>NCHAR</code> and <code>NTEXT</code> that allow storing unicode text.
</p>
<pre class="block sql"><code>CREATE TABLE examples (
    name NVARCHAR(255) PRIMARY KEY,
    description NTEXT NOT NULL
);</code></pre>

<p>
 <em>If national columns are not used and the data you insert into the database can </em>not be represented by the default database encoding, the characters will be <em>stored as <code>?</code>s.</em>
</p>

<p>
<em> There can be difficulties in dealing with such data types in PHP, however the <a href="#fDatabase-api-translatedQuery">fDatabase::translatedQuery()</a> method has been developed in such a way that all data from national columns will be returned as UTF-8.</em>
</p>

<p>
<em><pre class="block php"><code>// This will ensure all data coming out of MSSQL is properly converted to UTF-8
$result = $db-&gt;translatedQuery(&quot;SELECT * FROM examples WHERE name = %s&quot;, $name);</code></pre>

<p>
 When inserting strings containing UTF-8 into a MSSQL database, the method <a href="#fDatabase-api-escape">fDatabase::escape()</a> should be used since it will detect extended characters and escape them properly.
</p>
<pre class="block php"><code>// This will ensure all data going into MSSQL is properly stored in NCHAR, NVARCHAR, NTEXT columns
$result = $db-&gt;translatedQuery(
    &quot;INSERT INTO examples (name, description) VALUES (%s, %s)&quot;,
    $name
    $description
);</code></pre>

<p>
 If you are using a linux or BSD server, you are probably access SQL Server through FreeTDS. The following configuration options should be set in your <code>freetds.conf</code> to ensure that everything works properly. 
</p>
</em>The encoding (<code>CP1252</code>) may need to be changed if the Windows machine the server is running on uses a primary language other than English.
</p>

<p>
<em><pre><code># This is the version of the protocol to use for SQL Server 2000
# and newer. Versions less than this may cause weird database bugs.
tds version = 8.0

# By default FreeTDS uses ISO-8859-1 which will turn some characters
# into ?s. CP1252 (or Windows-1252) is usually the character encoding
# used by SQL Server for English installs
client charset = CP1252</code></pre>

<p>
 Depending on what linux distribution or flavor of BSD you are using, the <code>freetds.conf</code> may be in a few different directories, including:
</p>

<ul>
<li><code>/etc/</code></li>
<li><code>/etc/freetds/</code></li>
<li><code>/usr/local/etc/</code></li>
<li><code>/usr/local/etc/freetds/</code></li>
</ul>
 It is also possible your operating system may not install a default <code>freetds.conf</code>, but it may provide a <code>freetds.conf.dist</code> or something similar.</em>
</p>

<p>
<em>
<h5 id="UTF-8-docs-SQLite">SQLite</h5>
 SQLite uses UTF-8 for all text storage by default, so no special configuration is needed.</em>
</p>

<p>
<em>
<h5 id="UTF-8-docs-Oracle">Oracle</h5>
 Like with the other databases, Oracle has both a database encoding and a client encoding, however, unlike the other databases, the client encoding can not be set at connection time.</em>
</p>

<p>
<em> In order to full support UTF-8, the Oracle database should be installed with the <code>AL32UTF8</code> encoding for version 9i+ and <code>UTF8</code> for version 8. </em>If you are installing <a class="ext-link" href="http://www.oracle.com/technology/products/database/xe/index.html"><span class="icon">Oracle 10g XE</span></a>, be sure to get the <code>universal</code> version that support multi-byte encodings.
</p>

<p>
<em> On the client side, the character encoding is controlled by the <code>NLS_LANG</code> environmental variable. For US-English installs, this should probably be set to <code>AMERICAN_AMERICA.AL32UTF8</code>. In addition to the <code>NLS_LANG</code> environmental variable, the Oracle PHP drivers will also need the <code>ORACLE_HOME</code> environmental variable set. <a class="ext-link" href="http://download.oracle.com/docs/cd/B25329_01/doc/admin.102/b25107"><span class="icon">/connecting.htm#sthref81 Examples for Linux</span></a>.</em>
</p>

<p>
<em>
<h5 id="UTF-8-docs-DB2">DB2</h5>
 DB2 can be instructed to store UTF-8 as the database default, or on individual tables. UTF-8 is used whenever unicode is specified. To specified unicode as the default for a database, add the <code>USING CODESET</code> option to the <code>CREATE DATABASE</code> statement:</em>
</p>

<p>
<em><pre class="block sql"><code>CREATE DATABASE example USING CODESET UTF-8 TERRITORY US;</code></pre>

<p>
 The <code>TERRITORY</code> should be set to an appropriate locale for your data.
</p>
 It is also possible to set the <code>CCSID UNICODE</code> on individual tables with <code>CREATE TABLE</code>:</em>
</p>

<p>
<em><pre class="block sql"><code>CREATE TABLE example (
    -- ....
) CCSID UNICODE;</code></pre>

<p>
 In addition to setting up your server for UTF-8 database, it is required to set the client to use UTF-8 also. Unfortunately this can not be controlled via SQL over the database connection like other database, but must be set as an environmental variable. In a method appropriate for your OS, set the <code>DB2CODEPAGE</code> environmental variable to <code>1208</code>, which represents UTF-8.
</p>
 For linux with a sh/bash shell, this can be accomplished via:</em>
</p>

<p>
<em><pre><code>export DB2CODEPAGE=1208</code></pre>

<p>
 For Windows, this can be set in the Environmental Variables panel under 
</p>
</em>My Computer &gt; Properties &gt; Advanced &gt; Environmental Variables<em>.</em>
</p>

<p>
<em>
<h4 id="UTF-8-docs-HTMLEncoding">HTML Encoding</h4>
 When delivering HTML to browsers, it is important to include the proper character encoding information so that the browser can properly display the characters. The method <a href="#fHTML-api-sendHeader">fHTML::sendHeader()</a> sets the proper <code>Content-type</code> header for UTF-8 HTML. This method should be called for every page that returns HTML, and should be called before any output is created. Consequently, it will often be called in an init or bootstrapping script:</em>
</p>

<p>
<em><pre class="block php"><code>fHTML::sendHeader();</code></pre>

<p>
 It is also good practice to include an HTML <code>meta</code> tag specifying the character set for when HTML is displayed from the filesystem instead of a web server.
</p>
<pre class="block html"><code>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;
        </code></pre>

<h4 id="UTF-8-docs-RequestData">Request Data</h4>
 As long as the HTML encoding is set to UTF-8, all browsers should obey this setting and submit request data encoded as UTF-8. When retrieving information from <code>GET</code> and <code>POST</code> requests, the class <a href="#fRequest">fRequest</a> ensures that all values coming in are valid UTF-8 strings, and cleans out those that are not.</em>
</p>

<p>
<em><pre class="block php"><code>// This value will be proper
$name = fRequest::get('name');</code></pre>

<h4 id="UTF-8-docs-StringManipulation">String Manipulation</h4>
 The class <a href="#fUTF8">fUTF8</a> is a static class that provides all of the same functionality as the normal PHP string functions, but in a way that is compatible with the multi- byte nature of UTF-8. The <a href="#fUTF8">class documentation</a> includes a list of all of the PHP string functions and their equivalent methods in <a href="#fUTF8">fUTF8</a>.</em>
</p>

<p>
<em>
<h3 id="UTF-8-docs-ImportingData">Importing Data</h3>
 While Flourish is built to ensure that all data coming in through normal web interactions is clean and valid UTF-8, it is necessary to manually convert data coming from an old database or text files. The <a class="ext-link" href="http://php.net/iconv"><span class="icon">iconv</span></a> PHP extension provides functionality to convert text stored in another encoding to UTF-8 using a simple function call.</em>
</p>

<p>
<em> When importing data from an old database, as long as the <a href="#fDatabase">fDatabase</a> class is used to connect to the old DB, all data should be automatically converted from the old encoding to UTF-8 on-the-fly. This is accomplished by the fact that <a href="#fDatabase">fDatabase</a> sets the connection encoding to UTF-8 whenever connecting to a database. This, does not, however mean that <a href="#fDatabase">fDatabase</a> will work seamlessly with a non UTF-8 database. Most of the default character sets for databases only support a subset of the UTF-8 characters, making conversion to UTF-8 fine, but conversion back nearly impossible.</em>
</p>

<p>
<em> 		</section>
		
		<section class="main">
<h2 id="ValueObjects-docs">Value Objects</h2>

<p>
The term value object refers to a small object that contains a simple value such as a dates, numbers, string or money. They are implemented to be immutable, meaning a new object is created whenever modifications are requested. This property helps to prevent the side affects that come from objects being passed by reference.
</p>

<p>
There are five classes in Flourish that are implemented as value objects:
</p>

<ul>
<li><a href="#fDate">fDate</a></li>
<li><a href="#fMoney">fMoney</a></li>
<li><a href="#fNumber">fNumber</a></li>
<li><a href="#fTime">fTime</a></li>
<li><a href="#fTimestamp">fTimestamp</a></li>
</ul>

<p>
Here are some other pages about value objects:
</p>

<ul>
<li><a class="ext-link" href="http://martinfowler.com/bliki/ValueObject.html"><span class="icon">http://martinfowler.com/bliki/ValueObject.html</span></a></li>
<li><a class="ext-link" href="http://c2.com/cgi/wiki?ValueObject"><span class="icon">http://c2.com/cgi/wiki?ValueObject</span></a></li>
</ul>

<p>
The opposite of a value object is a <a href="#ReferenceObjects-docs">reference object</a>.
</p>
		</section>
		
		<section class="main">
<h2 id="Versioning-docs">Versioning</h2>
<div class="sidebar">
<h3>Contents</h3>

<ul>
<li><a href="#Versioning-docs-ClassVersioning">Class Versioning</a></li>
<li><a href="#Versioning-docs-LibraryVersioning">Library Versioning</a></li>
</ul>
</div>

<p>
Versioning happens on two different levels with Flourish. On the lowest level, each class that is part of Flourish is versioned using a three-part number. On the library level, Flourish is versioned using the current revision number of the SVN repository.
</p>

<h3 id="Versioning-docs-ClassVersioning">Class Versioning</h3>

<p>
All classes are versioned using a three-part number in the following format:
</p>
<pre><code>{major_version}.{minor_version}.{edit_version}</code></pre>

<p>
 Below are some examples of valid version numbers:
</p>
<pre><code>1.0.0
1.0.25
1.5.1
1.0.0b</code></pre>

<p>
 The last version, <code>1.0.0b</code> signifies that the class is currently in beta. This type of version will only exist before version <code>1.0.0</code>, and will not be present once Flourish <a class="ext-link" href="http://flourishlib.com/docs/Roadmap"><span class="icon">hits stable</span></a>.
</p>

<p>
The version number have the following significance:
</p>

<ul>
<li><strong>Major version:</strong> this will only change when a major rearchitecting of a class happens, or when backwards compatibility breaks occur</li>
<li><strong>Minor version:</strong> an increase to the minor version indicates that a new feature was added or an existing feature was enhanced</li>
<li><strong>Edit version:</strong> this is the most common change to the version and indicates a bug was fixed or changes were made that did not affect functionality in any way</li>
</ul>

<h3 id="Versioning-docs-LibraryVersioning">Library Versioning</h3>

<p>
Flourish, as a library of related classes, is versioned simply by the current revision of the master SVN repository.
</p>
		</section>
		</section></body></html>