<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>Testing Enhancements – Blog – Flourish</title>
		<link href='http://fonts.googleapis.com/css?family=Arimo:400,700' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="/css/main.css" type="text/css" media="all">
		<link rel="stylesheet" href="/js/codemirror.css" type="text/css">
		<script src="/js/jquery-1.7.2.min.js"></script>
		<script src="/js/codemirror.js"></script>
		<script src="/js/util/runmode.js"></script>
		<script src="/js/mode/xml/xml.js"></script>
		<script src="/js/mode/clike/clike.js"></script>
		<script src="/js/mode/javascript/javascript.js"></script>
		<script src="/js/mode/css/css.js"></script>
		<script src="/js/mode/php/php.js"></script>
		<script src="/js/mode/mysql/mysql.js"></script>
		<script src="/js/mode/htmlmixed/htmlmixed.js"></script>
		<script src="/js/highlight.js"></script>
		<script src="/js/site.js"></script>
	</head>
	<body>
		<header>
			<section class="main group">
				<a href="/"><img src="/img/logo.png" alt="Flourish" /></a>
				<span class="tagline">PHP Unframework</span>
				<nav class="group">
					<a href="/docs">Documentation</a>
					<a href="/Download">Download</a>
					<a href="https://github.com/flourishlib/flourish-classes">Code</a>
					<a href="https://github.com/flourishlib/flourish-classes/issues">Issues</a>
					<a href="/Tests">Tests</a>
					<a href="http://forum.flourishlib.com">Discussion</a>
					<a href="/blog">Blog</a>
				</nav>
			</section>
		</header>
		<section class="main">
<h1 id="TestingEnhancements">Testing Enhancements</h1>

<p>
With the addition of <a href="/blog/PreparedStatementSupportAdded">comprehensive
prepared statement support</a>, I felt it time to invest in an enhanced testing architecture to help ensure that Flourish is as portable as possible. The work described below was possible due to the generous support received through the <a href="/docs/ServerFund">Server Fund</a> last fall.
</p>

<p>
The hardware purchased with the server fund included an Intel Core i7 860 processor and 8GB of ram. This hardware is used to run 11 different virtual machines:
</p>
<a href="/docs/Tests" style="float: right; margin-left: 2em; font-size: 0.85em; text-align: center; margin-bottom: 0.5em;"><img src="/blog/img/tests.png" alt="Testing Output" style="display: block;" />Test History Graphs</a>
<ul>
<li>A Debian database server running MySQL 5.0, PostgreSQL 8.3 and Oracle 10g XE</li>
<li>A Windows XP machine used for running tests and running SQL Server 2005 and SQL Server 2008</li>
<li>Machines for running tests, including the following operating systems:
<ul>
<li>CentOS 5.3, PHP 5.1.6</li>
<li>Debian 5.0, PHP 5.2.6</li>
<li>Fedora 12, PHP 5.3.2</li>
<li>FreeBSD 7.2, PHP 5.2.12</li>
<li>NetBSD 5.0, PHP 5.2.13</li>
<li>OpenBSD 4.5, PHP 5.2.8</li>
<li>OpenSolaris 2009.06, PHP 5.2.9</li>
<li>OpenSuSE 11.2, PHP 5.3.1</li>
<li>Ubuntu 8.10 LTS, PHP 5.2.4</li>
</ul>
</li>
</ul>

<p>
This extensive combination of operating systems and PHP versions ensure that Flourish is tested on most of the environments that may be encountered in the wild.
</p>

<p>
To take advantage of this setup, an SVN post-commit hook is used to run the full test suite on all of the servers after each commit. As of the time of writing this article, 5989 tests have been written using <a href="http://www.phpunit.de/">PHPUnit</a>. Each server reports the number of tests that passed, skipped, and failed. The <a href="/docs/Tests">Tests page</a> has graphs showing a history of the results for each server.
</p>

<p>
Flourish has some extensive PHP and shell scripts that allow tests to be run on multiple different configurations per class and on remote servers with little effort. The different configurations allow running the tests with different PHP extensions loaded, or against different types of databases. When an extension or program is not available, or the test is not applicable to the current environment, it is skipped. It is by this functionality that all 16 supported database extensions can be tested.
</p>

<p>
The current plans for improving this setup include obtaining a Mac Mini or notebook for OS X testing, and a copy of Microsoft Server 2008. If you, or someone you know, would be willing to donate either of these, please contact me at <a href="mailto:will@wbond.net">will@wbond.net</a>.
</p>
		</section>
		<footer>
			<section class="main group">
				© 2012 Will Bond
			</section>
		</footer>

	<script type="text/javascript">
		var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
		document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script type="text/javascript">
		var pageTracker = _gat._getTracker("UA-688035-5");
		pageTracker._initData();
		pageTracker._trackPageview();
	</script>
	<script src="http://static.getclicky.com/67539.js" type="text/javascript"></script>
	<noscript><p><img alt="Clicky" width="1" height="1" src="http://static.getclicky.com/67539-db9.gif" /></p></noscript>
	</body>
</html>