<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>fValidationException – Class Documentation – Flourish</title>
		<link href='http://fonts.googleapis.com/css?family=Arimo:400,700' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="/css/main.css" type="text/css" media="all">
		<link rel="stylesheet" href="/js/codemirror.css" type="text/css">
		<script src="/js/jquery-1.7.2.min.js"></script>
		<script src="/js/codemirror.js"></script>
		<script src="/js/util/runmode.js"></script>
		<script src="/js/mode/xml/xml.js"></script>
		<script src="/js/mode/clike/clike.js"></script>
		<script src="/js/mode/javascript/javascript.js"></script>
		<script src="/js/mode/css/css.js"></script>
		<script src="/js/mode/php/php.js"></script>
		<script src="/js/mode/mysql/mysql.js"></script>
		<script src="/js/mode/htmlmixed/htmlmixed.js"></script>
		<script src="/js/highlight.js"></script>
		<script src="/js/site.js"></script>
	</head>
	<body>
		<header>
			<section class="main group">
				<a href="/"><img src="/img/logo.png" alt="Flourish" /></a>
				<span class="tagline">PHP Unframework</span>
				<nav class="group">
					<a href="/docs">Documentation</a>
					<a href="/Download">Download</a>
					<a href="https://github.com/flourishlib/flourish-classes">Code</a>
					<a href="https://github.com/flourishlib/flourish-classes/issues">Issues</a>
					<a href="/Tests">Tests</a>
					<a href="http://forum.flourishlib.com">Discussion</a>
					<a href="/blog">Blog</a>
				</nav>
			</section>
		</header>
		<section class="main">
<h1 id="fValidationException">fValidationException</h1>
<div class="sidebar">
<h2 id="ClassResources">Class Resources </h2>

<ul>
<li><strong><a href="/docs/fValidationException">Class Documentation</a></strong></li>
<li><a href="/api/fValidationException">API Reference</a></li>
<li><a href="https://github.com/flourishlib/flourish-classes/blob/master/fValidationException.php">Source Code</a></li>
</ul>

<h2>Contents</h2>

<ul>
<li><a href="#MessagewithaList">Message with a List</a></li>
<li><a href="#FieldNameFormatting">Field Name Formatting</a></li>
<li><a href="#RemovingFieldNames">Removing Field Names</a></li>
</ul>

<h2 id="ExceptionClasses">Exception Classes </h2>

<ul>
<li><a href="/docs/fException">fException</a>
<ul>
<li><a href="/docs/fExpectedException">fExpectedException</a>
<ul>
<li><a href="/docs/fAuthorizationException">fAuthorizationException</a></li>
<li><a href="/docs/fEmptySetException">fEmptySetException</a></li>
<li><a href="/docs/fNoRemainingException">fNoRemainingException</a></li>
<li><a href="/docs/fNoRowsException">fNoRowsException</a></li>
<li><a href="/docs/fNotFoundException">fNotFoundException</a></li>
<li><strong>fValidationException</strong></li>
</ul>
</li>
<li><a href="/docs/fUnexpectedException">fUnexpectedException</a>
<ul>
<li><a href="/docs/fConnectivityException">fConnectivityException</a></li>
<li><a href="/docs/fEnvironmentException">fEnvironmentException</a></li>
<li><a href="/docs/fProgrammerException">fProgrammerException</a></li>
<li><a href="/docs/fSQLException">fSQLException</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<p>
fValidationException is a sub-class of <a href="/docs/fExpectedException">fExpectedException</a> that indicates that some sort of input did not meet the requirements of the code. This class is used by Flourish code quite a bit and would be suitable to toss on almost any web site or application at some point.
</p>

<h2 id="MessagewithaList">Message with a List</h2>

<p>
This functionality is specific to fValidationException, where it is most common and useful. In addition to being able to pass a <code>$message</code> to <a href="/api/fValidationException#__construct"><code>__construct()</code></a> (and possibly some values to interpolate), it is possible to pass a string <code>$message</code> followed by an array of <code>$sub_messages</code>. The <code>$message</code> will be placed in a <code>&lt;p&gt;</code> tag and the <code>$sub_messages</code> will each be placed in an <code>&lt;li&gt;</code> tag inside of a <code>&lt;ul&gt;</code> tag.
</p>

<p>
Thus, the following example code:
</p>
<pre class="block php"><code>throw new fValidationException(
    'The following problems were found:',
    array(
        'First Name: Please enter a value',
        'Last Name: Please enter a value',
        'Email: Please enter your email in the format name@host.com'
    )
);</code></pre>

<p>
 will create the message:
</p>
<pre class="block html"><code>&lt;p&gt;The following problems were found:&lt;/p&gt;
&lt;ul&gt;
    &lt;li&gt;First Name: Please enter a value&lt;/li&gt;
    &lt;li&gt;Last Name: Please enter a value&lt;/li&gt;
    &lt;li&gt;Email: Please enter your email in the format name@host.com&lt;/li&gt;
&lt;/ul&gt;</code></pre>

<h2 id="FieldNameFormatting">Field Name Formatting</h2>

<p>
Both <a href="/docs/fValidation">fValidation</a> and <a href="/docs/fORMValidation">fORMValidation</a> throw fValidationException objects when data has been detected that does not validate according to the established rules. In the message for these exceptions there are unordered lists of each field/column name followed by the error message for that field/column. By default the field/column name is printed followed by <code>: </code>.
</p>

<p>
Sometimes it may be desirable to change the formatting of the field name, to include HTML tags such as <code>&lt;strong&gt;</code> or <code>&lt;em&gt;</code>. The static method <a href="/api/fValidationException#setFieldFormat"><code>setFieldFormat()</code></a> accepts a single parameter that is the format for field/column names. The token <code>%s</code> is replaced with the field/column name. Any literal <code>%</code> symbols should be changed to <code>%%</code> to prevent formatting issues.
</p>

<p>
Here is an example of adding <code>&lt;strong&gt;</code> tags around field/column names:
</p>
<pre class="block php"><code>fValidationException::setFieldFormat('&lt;strong&gt;%s&lt;/strong&gt;: ');</code></pre>

<h2 id="RemovingFieldNames">Removing Field Names</h2>

<p>
When <a href="/api/fActiveRecord#validate">fActiveRecord::validate()</a> or <a href="/api/fValidation#validate">fValidation::validate()</a> is called with the <code>$return_messages</code> parameter set to <code>TRUE</code>, an array of error messages will be returned, with the column or field names included in the error messages. For situations where the messages are going to be displayed next to the field in question, having the field name in the actual error message is not desirable. The static method <a href="/api/fValidationException#removeFieldNames"><code>removeFieldNames()</code></a> will accept an array of error messages and will return an array with the same error messages, sans field names.
</p>

<p>
The code below will produce a full exception including the field names, but will also provide an associative array of the key being the field/column and the value being the error message without the field name.
</p>
<pre class="block php"><code>$errors = $user-&gt;validate(TRUE);
$field_errors = fValidationException::removeFieldNames($errors);
if ($errors) {
    throw new fValidationException('The following problems were found:', $errors);
}</code></pre>

<p>
 The exception message would be:
</p>
<pre><code>The following problems were found:
 - First Name: Please enter a value
 - Last Name: Please enter a value</code></pre>

<p>
 And the <code>$field_errors</code> array would contain:
</p>
<pre class="block php"><code>array(
    'first_name' =&gt; 'Please enter a value',
    'last_name'  =&gt; 'Please enter a value'
);</code></pre>

<p>
 		</section>
		<footer>
			<section class="main group">
				© 2012 Will Bond
			</section>
		</footer>

	<script type="text/javascript">
		var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
		document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script type="text/javascript">
		var pageTracker = _gat._getTracker("UA-688035-5");
		pageTracker._initData();
		pageTracker._trackPageview();
	</script>
	<script src="http://static.getclicky.com/67539.js" type="text/javascript"></script>
	<noscript><p><img alt="Clicky" width="1" height="1" src="http://static.getclicky.com/67539-db9.gif" /></p></noscript>
	</body>
</html>
</p>
